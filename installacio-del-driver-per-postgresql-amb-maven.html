<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Apunts tècnics: Instal·lació del driver per PostGreSQL amb maven</title>
<meta name="description" content="">
<meta name="author" content="Moisès Gómez Girón">

<!-- HTML5 shim, for IE6-8 support of HTML elements -->
<!--[if lt IE 9]>
        <script src="./theme/html5.js"></script>
    <![endif]-->

<!-- Styles -->
<link href="./theme/bootstrap.moi.css" rel="stylesheet">
<link href="./theme/local.css" rel="stylesheet">
<link href="./theme/pygments.css" rel="stylesheet">

<!-- Feeds -->
<link href="http://apuntstecnics.herokuapp.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Apunts tècnics Atom Feed" />

</head>
<body>

<div class="topbar">
    <div class="topbar-inner">
        <div class="container-fluid">
            <a class="brand" href="./">[Apunts tècnics]
 Instal·lació del driver per PostGreSQL amb maven             </a>
        </div>
    </div>
</div>

<div class="container-fluid">
    <div class="sidebar">
        <div class="well">
            <!--
            <h3>Temes</h3>
                <ul>
                </ul>
            -->
            <h3>Categories</h3>
            <ul>
                <li class="active"><a href="./category/bd.html">bd</a></li>
                <li ><a href="./category/dev.html">dev</a></li>
                <li ><a href="./category/eines.html">eines</a></li>
                <li ><a href="./category/misc.html">misc</a></li>
                <li ><a href="./category/mongodb.html">mongodb</a></li>
                <li ><a href="./category/poo.html">poo</a></li>
                <li ><a href="./category/programacio.html">programacio</a></li>
                <li ><a href="./category/uml.html">uml</a></li>
            </ul>
            <h3>Tags</h3>
            <ul>
                <li><a href="./tag/c.html">C</a></li>
                <li><a href="./tag/jdbc.html">JDBC</a></li>
                <li><a href="./tag/postgresql.html">PostGreSQL</a></li>
                <li><a href="./tag/mongodb.html">mongoDB</a></li>
                <li><a href="./tag/programari.html">programari</a></li>
                <li><a href="./tag/util.html">util</a></li>
                <li><a href="./tag/test.html">test</a></li>
                <li><a href="./tag/java.html">java</a></li>
            </ul>
        </div>
    </div>

    <div class="content">
<div class='article'>
<div class="well small">
<ul id="navigation"> 
    <li class="navigation-prev">
    <a href="./installacio-directa-del-driver-per-postgresql.html">
        Instal·lació (directa) del driver per PostGreSQL
    </a>
    </li>

    <li class="navigation-top">
    <a href="./jdbc-i-introduccio-al-jdbc.html">
        inici
    </a>
    </li>

    <li class="navigation-next">
    <a href="./primeres-consultes-a-postgresql.html">
        Primeres consultes a PostGreSQL
    </a>
    </li>
</ul> 
</div>
    <div class="page-header"><h1>Instal·lació del driver per PostGreSQL amb maven</h1></div>
<div class="well small">
    Entrada ubicada a la categoria
    <a href="./category/bd.html">
        bd
    </a>
            amb els tags: 
            <a href="./tag/postgresql.html">PostGreSQL</a> 
            <a href="./tag/java.html">java</a> 
            <a href="./tag/jdbc.html">JDBC</a> 
</div>
    <div><div class="section" id="introduccio">
<h2>Introducció</h2>
<p>En aquesta secció veurem una alternativa d'instal·lació del driver per
PostGreSQL, fent servir la utilitat Maven.</p>
<p>Si encara no tens Maven instal·lat al teu equip, pots seguir les
instruccions d'<a class="reference external" href="./installacio-de-maven.html">aquesta guia</a>.
Per obtenir unes nocions bàsiques de l'eina, considera <a class="reference external" href="./primeres-passes-amb-maven.html">aquesta
introducció</a>.</p>
</div>
<div class="section" id="instruccions">
<h2>Instruccions</h2>
<p>Segueix les instruccions:</p>
<ul class="simple">
<li>Crea un nou projecte amb Maven</li>
</ul>
<div class="highlight"><pre><span class="nv">$ </span>mvn -B archetype:generate -DarchetypeGroupId<span class="o">=</span>org.apache.maven.archetypes -DgroupId<span class="o">=</span>org.iesjoandaustria.test -DartifactId<span class="o">=</span>holapgsql
</pre></div>
<ul>
<li><p class="first">Allà on apareix App.java, copia el fitxer amb el codi font de
HolaPG.java vist a la <a class="reference external" href="./installacio-directa-del-driver-per-postgresql.html">secció anterior</a>.</p>
<p>Aquest cop, assegurat però que HolaPG.java especifica el package
adequat.</p>
</li>
<li><p class="first">Compila i executa la classe:</p>
<div class="highlight"><pre><span class="nv">$ </span>mvn compile <span class="nb">exec</span>:java -Dexec.mainClass<span class="o">=</span><span class="s2">&quot;org.iesjoandaustria.test.HolaPG&quot;</span>
</pre></div>
<p>Tot i que s'executarà sense problemes pel que respecta a Maven (no
finalitza amb excepció), el missatge que genera és molt clar:</p>
<pre class="literal-block">
ERROR: no s'ha pogut connectar: java.sql.SQLException: No suitable driver found for jdbc:postgresql://192.168.56.101/testbd?user=usuaribd&amp;password=pass
</pre>
<p>Malgrat el nostre sistema ja té el driver instal·lat i correctament
accessible des de la variable CLASSPATH, Maven no sembla trobar-lo.</p>
<p>La idea és que el nostre projecte gestionat per Maven ha de definir
el driver de PostGreSQL (i qualsevol altre que faci servir) a la
secció de dependències de pom.xml.</p>
</li>
<li><p class="first">Afegeix a la secció de dependències de pom.xml la següent:</p>
<div class="highlight"><pre><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.postgresql<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>postgresql<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>9.4-1201.jdbc41<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
<p>Donat que la versió 9.4 no es troba als repositoris de Maven
<a class="footnote-reference" href="#faltenmansapgsql" id="id1">[1]</a>, haurem de fer la instal·lació manualment.</p>
</li>
<li><p class="first">Demana a Maven que instal·li el driver des del jar que vas
descarregar a la <a class="reference external" href="./installacio-directa-del-driver-per-postgresql.html">secció anterior</a>.</p>
<div class="highlight"><pre><span class="nv">$ </span>mvn install:install-file -DgroupId<span class="o">=</span>org.postgresql -DartifactId<span class="o">=</span>postgresql -Dpackaging<span class="o">=</span>jar -Dversion<span class="o">=</span>9.4-1201.jdbc41 -Dfile<span class="o">=</span><span class="nv">$HOME</span>/lib/postgresql-9.4-1201.jdbc41.jar -DgeneratePom<span class="o">=</span><span class="nb">true</span>
</pre></div>
</li>
<li><p class="first">Torna a executar HolaPG i aquest cop hauria de sortir-te l'esperat
missatge:</p>
<pre class="literal-block">
Connectat a la base de dades testbd
</pre>
</li>
</ul>
</div>
<div class="section" id="notes">
<h2>Notes</h2>
<table class="docutils footnote" frame="void" id="faltenmansapgsql" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>en el moment en que estic preparant aquests
continguts, la darrera versió del driver encara no estava al
repositori central de Maven. Sembla ser que és un problema de temps
disponible per part dels <a class="reference external" href="https://jdbc.postgresql.org/community/community.html">desenvolupadors</a> del
driver. Si tens temps tu, considera oferir-los el teu ajut!</td></tr>
</tbody>
</table>
</div>
</div>
<div class="well small">
<ul id="navigation"> 
    <li class="navigation-prev">
    <a href="./installacio-directa-del-driver-per-postgresql.html">
        Instal·lació (directa) del driver per PostGreSQL
    </a>
    </li>

    <li class="navigation-top">
    <a href="./jdbc-i-introduccio-al-jdbc.html">
        inici
    </a>
    </li>

    <li class="navigation-next">
    <a href="./primeres-consultes-a-postgresql.html">
        Primeres consultes a PostGreSQL
    </a>
    </li>
</ul> 
</div>
</div>
<footer>
  <p>
  <a href=".">Apunts tècnics</a> 
  &copy; 
  <a href="http://www.gnu.org/copyleft/fdl.html">GNU FDL</a>
  per <i>Moisès Gómez Girón </i> (<img style="position:relative;top:+5px;border:0; display:inline;" src="./images/adressamoi.png">)
  amb el generador de blocs <a href="http://getpelican.com/">Pelican</a> 
  </p>
</footer>    </div>
</div>

</body>
</html>