<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Apunts tècnics: Instal·lació (directa) del driver per PostGreSQL</title>
<meta name="description" content="">
<meta name="author" content="Moisès Gómez Girón">

<!-- HTML5 shim, for IE6-8 support of HTML elements -->
<!--[if lt IE 9]>
        <script src="./theme/html5.js"></script>
    <![endif]-->

<!-- Styles -->
<link href="./theme/bootstrap.moi.css" rel="stylesheet">
<link href="./theme/local.css" rel="stylesheet">
<link href="./theme/pygments.css" rel="stylesheet">

<!-- Feeds -->


<!-- adding cookies warning for google analytics.
Attention: this might break compatibility with older browsers. Bad luck!  -->
<link href="./theme/moistyle.css" rel="stylesheet">
<script src="theme/moiscripts.js"></script>
</head>

<body>
  <div>
    <div id="cookiesbox">
        Aquest lloc web utilitza galetes (<i>cookies</i>) per a analitzar el seu ús
        amb les eines que ofereix <a href="https://www.google.com/analytics">Google Analytics</a>.
        En continuar navegant-hi, estàs acceptant-ho.
        <br/>
        <a class="btn btn-neutral" onclick="setUserAcceptsCookies();">
            Tancar
            <span class="fa fa-window-close"></span>
        </a>
    </div>

    <script>setCookiesboxVisibility();</script>
</div>


<div class="topbar">
    <div class="topbar-inner">
        <div class="container-fluid">
            <a class="brand" href="./">[Apunts tècnics]
 Instal·lació (directa) del driver per PostGreSQL             </a>
        </div>
    </div>
</div>

<div class="container-fluid">
    <div class="sidebar">
        <div class="well">
            <!--
            <h3>Temes</h3>
                <ul>
                </ul>
            -->
            <h3>Categories</h3>
            <ul>
                <li class="active"><a href="./bd.html">bd</a></li>
                <li ><a href="./dev.html">dev</a></li>
                <li ><a href="./eines.html">eines</a></li>
                <li ><a href="./misc.html">misc</a></li>
                <li ><a href="./mongodb.html">mongodb</a></li>
                <li ><a href="./poo.html">poo</a></li>
                <li ><a href="./programacio.html">programacio</a></li>
                <li ><a href="./uml.html">uml</a></li>
            </ul>
            <h3>Tags</h3>
            <ul>
                <li><a href="./c.html">C</a></li>
                <li><a href="./jdbc.html">JDBC</a></li>
                <li><a href="./postgresql.html">PostGreSQL</a></li>
                <li><a href="./mongodb.html">mongoDB</a></li>
                <li><a href="./programari.html">programari</a></li>
                <li><a href="./util.html">util</a></li>
                <li><a href="./test.html">test</a></li>
                <li><a href="./java.html">java</a></li>
            </ul>
        </div>
    </div>

    <div class="content">
<div class='article'>
<div class="well small">
<ul id="navigation"> 
    <li class="navigation-prev">
    <a href="./que-es-jdbc.html">
        Què és JDBC
    </a>
    </li>

    <li class="navigation-top">
    <a href="./jdbc-i-introduccio-al-jdbc.html">
        inici
    </a>
    </li>

    <li class="navigation-next">
    <a href="./installacio-del-driver-per-postgresql-amb-maven.html">
        Instal·lació del driver per PostGreSQL amb maven
    </a>
    </li>
</ul> 
</div>
    <div class="page-header"><h1>Instal·lació (directa) del driver per PostGreSQL</h1></div>
<div class="well small">
    Entrada ubicada a la categoria
    <a href="./bd.html">
        bd
    </a>
            amb els tags: 
            <a href="./postgresql.html">PostGreSQL</a> 
            <a href="./java.html">java</a> 
            <a href="./jdbc.html">JDBC</a> 
</div>
    <div><div class="section" id="introduccio">
<h2>Introducció</h2>
<p>Aquesta secció és una guia d'instal·lació i configuració del <em>driver</em>
per accedir des de Java a PostGreSQL. Es tracta d'una instal·lació
directa des de consola.</p>
<p>A la <a class="reference external" href="./installacio-del-driver-per-postgresql-amb-maven.html">següent secció</a> coneixerem
una nova eina (Maven) que ens permetrà simplificar aquesta
instal·lació (entre altres moltes coses).</p>
</div>
<div class="section" id="installacio">
<h2>Instal·lació</h2>
<p>Segueix les següents instruccions per a instal·lar el <em>driver</em> de
PostGreSQL.</p>
<p>Descarrega la darrera versió del <em>driver</em> de <a class="reference external" href="http://jdbc.postgresql.org/">jdbc.postgresql.org</a></p>
<p>En el moment en que s'escriu aquest document la darrera versió
correspon a <a class="reference external" href="https://jdbc.postgresql.org/download/postgresql-9.4-1201.jdbc41.jar">JDBC41 Postgresql Driver, Version 9.4-1201</a>.</p>
<p>Deixa el fitxer descarregat a un directori, per exemple:</p>
<div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span> ~/lib
<span class="nv">$ </span>wget -c https://jdbc.postgresql.org/download/postgresql-9.4-1201.jdbc41.jar
</pre></div>
</div>
<div class="section" id="configuracio">
<h2>Configuració</h2>
<p>Configura la variable <tt class="docutils literal">CLASSPATH</tt> per què Java pugui trobar el
driver.  Per exemple, afegeix la següent línia al teu ~/.bashrc:</p>
<div class="highlight"><pre><span class="nv">CLASSPATH</span><span class="o">=</span><span class="nv">$CLASSPATH</span>:<span class="nv">$HOME</span>/lib/postgresql-9.4-1201.jdbc41.jar
</pre></div>
</div>
<div class="section" id="prova">
<h2>Prova</h2>
<p>Provem el driver que acabem d'instal·lar amb el típic &quot;holamón&quot;.
Considera el següent codi que:</p>
<ol class="arabic">
<li><p class="first">importa les classes del JDBC</p>
</li>
<li><p class="first">composa la cadena de connexió</p>
<p>Fixat que aquest és l'únic punt on apareix alguna referència a
PostGreSQL. La resta del codi no hauria de requerir canvis si
decidíssim canviar de SGBD.</p>
</li>
<li><p class="first">realitza la connexió</p>
</li>
<li><p class="first">tanca la connexió</p>
</li>
</ol>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="highlight"><pre><span class="hll"><span class="kn">import</span> <span class="nn">java.sql.*</span><span class="o">;</span>  <span class="c1">// (1) importa les classes del JDBC</span>
</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HolaPG</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// components de la cadena de connexió</span>
        <span class="n">String</span> <span class="n">usuari</span>   <span class="o">=</span> <span class="s">&quot;usuaribd&quot;</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">password</span> <span class="o">=</span> <span class="s">&quot;pass&quot;</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">host</span>     <span class="o">=</span> <span class="s">&quot;192.168.56.101&quot;</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">bd</span>       <span class="o">=</span> <span class="s">&quot;testbd&quot;</span><span class="o">;</span>

<span class="hll">        <span class="n">String</span> <span class="n">cadenaConnexio</span> <span class="c1">// (2) composa la cadena de connexió</span>
</span>            <span class="o">=</span> <span class="s">&quot;jdbc:postgresql://&quot;</span> <span class="o">+</span> <span class="n">host</span>
            <span class="o">+</span> <span class="s">&quot;/&quot;</span>                <span class="o">+</span> <span class="n">bd</span>
            <span class="o">+</span> <span class="s">&quot;?user=&quot;</span>           <span class="o">+</span> <span class="n">usuari</span>
            <span class="o">+</span> <span class="s">&quot;&amp;password=&quot;</span>       <span class="o">+</span> <span class="n">password</span><span class="o">;</span>

        <span class="c1">// connexió</span>
        <span class="n">Connection</span> <span class="n">conn</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
<span class="hll">            <span class="c1">// (3) realitza la connexió</span>
</span>            <span class="n">conn</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="n">cadenaConnexio</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Connectat a la base de dades &quot;</span> <span class="o">+</span> <span class="n">bd</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;ERROR: no s&#39;ha pogut connectar: &quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="k">try</span><span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">conn</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
<span class="hll">                    <span class="n">conn</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="c1">// (4) tanca la connexió</span>
</span>                <span class="o">}</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;ERROR: no s&#39;ha pogut desconnectar: &quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table><p>En executar HolaPG, si tot ha anat correctament hauries de veure el
missatge:</p>
<pre class="literal-block">
Connectat a la base de dades testbd
</pre>
<p>Altrament, revisa que el servidor estigui disponible amb els
paràmetres de connexió que especifica HolaPG, i que el CLASSPATH
estigui correctament configurat per a accedir al driver.</p>
</div>
</div>
<div class="well small">
<ul id="navigation"> 
    <li class="navigation-prev">
    <a href="./que-es-jdbc.html">
        Què és JDBC
    </a>
    </li>

    <li class="navigation-top">
    <a href="./jdbc-i-introduccio-al-jdbc.html">
        inici
    </a>
    </li>

    <li class="navigation-next">
    <a href="./installacio-del-driver-per-postgresql-amb-maven.html">
        Instal·lació del driver per PostGreSQL amb maven
    </a>
    </li>
</ul> 
</div>
</div>
<footer>
  <p>
  <a href=".">Apunts tècnics</a> 
  &copy; 
  <a href="http://www.gnu.org/copyleft/fdl.html">GNU FDL</a>
  per <i>Moisès Gómez Girón </i> (<img style="position:relative;top:+5px;border:0; display:inline;" src="./images/adressamoi.png">)
  amb el generador de blocs <a href="http://getpelican.com/">Pelican</a> 
    
  </p>
</footer>    </div>
</div>


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                         m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                         })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-41103782-3', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->
</body>
</html>
