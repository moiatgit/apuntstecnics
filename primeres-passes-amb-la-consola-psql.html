<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Apunts tècnics: Primeres passes amb la consola <em>psql</em></title>
<meta name="description" content="">
<meta name="author" content="Moisès Gómez Girón">

<!-- HTML5 shim, for IE6-8 support of HTML elements -->
<!--[if lt IE 9]>
        <script src="./theme/html5.js"></script>
    <![endif]-->

<!-- Styles -->
<link href="./theme/bootstrap.moi.css" rel="stylesheet">
<link href="./theme/local.css" rel="stylesheet">
<link href="./theme/pygments.css" rel="stylesheet">

<!-- Feeds -->


<!-- adding cookies warning for google analytics.
Attention: this might break compatibility with older browsers. Bad luck!  -->
<link href="./theme/moistyle.css" rel="stylesheet">
<script src="theme/moiscripts.js"></script>
</head>

<body>
  <div>
    <div id="cookiesbox">
        Aquest lloc web utilitza galetes (<i>cookies</i>) per a analitzar el seu ús
        amb les eines que ofereix <a href="https://www.google.com/analytics">Google Analytics</a>.
        En continuar navegant-hi, estàs acceptant-ho.
        <br/>
        <a class="btn btn-neutral" onclick="setUserAcceptsCookies();">
            Tancar
            <span class="fa fa-window-close"></span>
        </a>
    </div>

    <script>setCookiesboxVisibility();</script>
</div>


<div class="topbar">
    <div class="topbar-inner">
        <div class="container-fluid">
            <a class="brand" href="./">[Apunts tècnics]
 Primeres passes amb la consola <em>psql</em>             </a>
        </div>
    </div>
</div>

<div class="container-fluid">
    <div class="sidebar">
        <div class="well">
            <!--
            <h3>Temes</h3>
                <ul>
                </ul>
            -->
            <h3>Categories</h3>
            <ul>
                <li class="active"><a href="./bd.html">bd</a></li>
                <li ><a href="./dev.html">dev</a></li>
                <li ><a href="./eines.html">eines</a></li>
                <li ><a href="./misc.html">misc</a></li>
                <li ><a href="./mongodb.html">mongodb</a></li>
                <li ><a href="./poo.html">poo</a></li>
                <li ><a href="./programacio.html">programacio</a></li>
                <li ><a href="./uml.html">uml</a></li>
            </ul>
            <h3>Tags</h3>
            <ul>
                <li><a href="./c.html">C</a></li>
                <li><a href="./jdbc.html">JDBC</a></li>
                <li><a href="./postgresql.html">PostGreSQL</a></li>
                <li><a href="./mongodb.html">mongoDB</a></li>
                <li><a href="./programari.html">programari</a></li>
                <li><a href="./util.html">util</a></li>
                <li><a href="./test.html">test</a></li>
                <li><a href="./java.html">java</a></li>
            </ul>
        </div>
    </div>

    <div class="content">
<div class='article'>
<div class="well small">
<ul id="navigation"> 
    <li class="navigation-prev">
    <a href="./breu-guia-de-psql.html">
        Breu guia de <em>psql</em>
    </a>
    </li>

    <li class="navigation-top">
    <a href="./sgbd-objecte-relacional.html">
        inici
    </a>
    </li>

    <li class="navigation-next">
    <a href="./comparacio-models-relacional-i-objecte-relacionals-primera-part.html">
        Comparació models relacional i objecte-relacionals (primera part)
    </a>
    </li>
</ul> 
</div>
    <div class="page-header"><h1>Primeres passes amb la consola <em>psql</em></h1></div>
<div class="well small">
    Entrada ubicada a la categoria
    <a href="./bd.html">
        bd
    </a>
            amb el tag:
            <a href="./postgresql.html">PostGreSQL</a> 
</div>
    <div><div class="section" id="introduccio">
<h2>Introducció</h2>
<p>En aquesta entrada començarem a treballar amb la consola de <em>psql</em>.</p>
</div>
<div class="section" id="primeres-passes">
<h2>Primeres passes</h2>
<p>En aquesta secció farem una ràpida in introducció a la consola
<em>psql</em>, una de les possibles portes de comunicació amb PostGreSQL.</p>
<p>Si no ho has fet encara, instal·lat el PostGreSQL. Pressuposaré que
estàs seguint les passes descrites al document <a class="reference external" href="./installacio-de-postgresql.html">d'instal·lació de
PostGreSQL</a>.</p>
<p>Segueix les passes:</p>
<pre class="literal-block">
# connecta a la base de dades de prova
$ psql -U usuaribd -d testbd -h 192.168.56.101
Password for user usuaribd:
psql (9.1.8)
SSL connection (cipher: DHE-RSA-AES256-SHA, bits: 256)
Type &quot;help&quot; for help.

testbd=&gt; -- això és un comentari
testbd=&gt; -- comprova l'usuari amb el que t'has connectat
testbd=&gt; SELECT current_user;
 current_user
--------------
 usuaribd
(1 row)

testbd=&gt; -- no distingeix majúscules
testbd=&gt; select CURRENT_USER;
 current_user
--------------
 usuaribd
(1 row)

testbd=&gt; -- un càlcul simple
SELECT 5 * 2 + 1 AS resultat;
 resultat
----------
       11
(1 row)

testbd=&gt; -- amb més d'una línia \p mostra la línia introduïda i \g o ; l'executa
testbd=&gt; SELECT
5 * 2
testbd-&gt; \p
select
5 * 2
testbd-&gt; + 1
testbd-&gt; AS resultat
testbd-&gt; \p
select
5 * 2
+ 1
AS resultat
testbd-&gt; \g
 resultat
----------
       11
(1 row)

testbd=&gt; -- per obtenir ajuda
testbd=&gt; \?
General
  \copyright             show PostgreSQL usage and distribution terms
  \g [FILE] or ;         execute query (and send results to file or |pipe)
  \h [NAME]              help on syntax of SQL commands, * for all commands
  \q                     quit psql

Query Buffer
  \e [FILE] [LINE]       edit the query buffer (or file) with external editor
  \ef [FUNCNAME [LINE]]  edit function definition with external editor
  \p                     show the contents of the query buffer
  \r                     reset (clear) the query buffer
  \s [FILE]              display history or save it to file
  \w FILE                write query buffer to file

Input/Output
  \copy ...              perform SQL COPY with data stream to the client host
  \echo [STRING]         write string to standard output
  \i FILE                execute commands from file
  \o [FILE]              send all query results to file or |pipe
  \qecho [STRING]        write string to query output stream (see \o)

Informational
  (options: S = show system objects, + = additional detail)
  \d[S+]                 list tables, views, and sequences
  \d[S+]  NAME           describe table, view, sequence, or index
«...»
</pre>
<p>De vegades ens resultarà més còmode editar les nostres comandes en un
fitxer i demanar a <em>psql</em> que ens les executi. O podem fer
interactivament des del propi <em>psql</em> amb <tt class="docutils literal">\i</tt> però també sense que
calgui entrar.</p>
<pre class="literal-block">
$ echo &quot;SELECT current_user;&quot; &gt; currentuser.sql
$ psql -U usuaribd -d testbd -h 192.168.56.101 -f currentuser.sql
Password for user usuaribd:
 current_user
--------------
 usuaribd
(1 row)
</pre>
<p>Altres vegades el que ens interessarà serà guardar en un fitxer el
resultat d'una consulta</p>
<pre class="literal-block">
testbd=&gt; SELECT current_user \g /tmp/currentuser.sql
testbd=&gt; \q
$ cat /tmp/currentuser.sql
 current_user
--------------
 usuaribd
(1 row)
</pre>
<p>Tot i que hi ha altres eines disponibles, fins i tot gràfiques, que
t'ajudaran a fer la majoria de les tasques d'administració amb el teu
PostgreSQL, aconseguir una certa habilitat en l'ús de la consola
<em>psql</em> de segur et pagarà la pena.</p>
</div>
<div class="section" id="exercicis">
<h2>Exercicis</h2>
<div class="section" id="exercici-1-funcions-de-sistema">
<h3>Exercici 1. Funcions de sistema</h3>
<p>Desenvolupa una taula amb els continguts de la taula <em>9.47 Session
Information Functions</em> que apareix a <a class="reference external" href="http://www.postgresql.org/docs/9.1/static/functions-info.html">9.3. System Information
Functions</a> tot
afegint una nova columna amb el resultat d'executar-ho al teu
servidor.</p>
</div>
<div class="section" id="exercici-2-tipus-basics-de-dades">
<h3>Exercici 2. Tipus bàsics de dades</h3>
<p>Desenvolupa una taula amb la descripció dels tipus de dades bàsics que
apareixen al capítol 8 sobre <a class="reference external" href="http://www.postgresql.org/docs/9.1/static/datatype.html">tipus de dades</a>.</p>
<p>Només cal que incloguis els tipus bàsics que apareixen sota les
seccions 8.1 fins la 8.6.
Evidentment, si tens interès, pots afegir-ne d'altres.</p>
<p>Afegeix, per cada tipus, una referència al manual (la url) on apareix
i una descripció amb les teves paraules de les variacions.</p>
</div>
</div>
</div>
<div class="well small">
<ul id="navigation"> 
    <li class="navigation-prev">
    <a href="./breu-guia-de-psql.html">
        Breu guia de <em>psql</em>
    </a>
    </li>

    <li class="navigation-top">
    <a href="./sgbd-objecte-relacional.html">
        inici
    </a>
    </li>

    <li class="navigation-next">
    <a href="./comparacio-models-relacional-i-objecte-relacionals-primera-part.html">
        Comparació models relacional i objecte-relacionals (primera part)
    </a>
    </li>
</ul> 
</div>
</div>
<footer>
  <p>
  <a href=".">Apunts tècnics</a> 
  &copy; 
  <a href="http://www.gnu.org/copyleft/fdl.html">GNU FDL</a>
  per <i>Moisès Gómez Girón </i> (<img style="position:relative;top:+5px;border:0; display:inline;" src="./images/adressamoi.png">)
  amb el generador de blocs <a href="http://getpelican.com/">Pelican</a> 
    
  </p>
</footer>    </div>
</div>


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                         m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                         })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-41103782-3', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->
</body>
</html>
