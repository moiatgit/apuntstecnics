<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Apunts tècnics</title><link href="http://apuntstecnics.herokuapp.com/" rel="alternate"></link><link href="http://apuntstecnics.herokuapp.com/feeds/all.atom.xml" rel="self"></link><id>http://apuntstecnics.herokuapp.com/</id><updated>2015-04-11T22:20:38+02:00</updated><entry><title>SGBD Objecte-Relacional</title><link href="http://apuntstecnics.herokuapp.com/sgbd-objecte-relacional.html" rel="alternate"></link><updated>2015-04-11T22:20:38+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-04-11:sgbd-objecte-relacional.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquests continguts ofereixen una introducció als Sistemes Gestors de
Bases de Dades Objecte-Relacional.&lt;/p&gt;
&lt;p&gt;Hi trobaràs la definició i contextualització d'aquests tipus de SGBDs.&lt;/p&gt;
&lt;p&gt;Al final de l'entrada, et presento el SGBD que farem servir en aquest
curs.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="sgbd-que"&gt;
&lt;h2&gt;SGBD-&lt;em&gt;què?&lt;/em&gt;&lt;/h2&gt;
&lt;p&gt;Veiem algunes definicions com a recordatori:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;em&gt;base de dades&lt;/em&gt; és una col·lecció de dades organitzada d'una manera
coherent, de manera que pugui ser accedida per una aplicació.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;un &lt;em&gt;sistema de gestió de bases de dades&lt;/em&gt; (SGBD) és una aplicació que
permet l'administració de bases de dades, de l'organització de les
dades i de les dades pròpiament.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Una &lt;em&gt;transacció&lt;/em&gt; és una operació unitària sobre una base de dades,
tractada d'una manera coherent, fiable i independent d'altres
transaccions. Tot i que pot consistir en diverses operacions
individuals, la transacció ha de ser realitzada completament o bé no
realitzada. És a dir, no pot ser executada parcialment.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;em&gt;ACID&lt;/em&gt;, acrònim anglès de les paraules &lt;em&gt;Atomicity&lt;/em&gt;, &lt;em&gt;Consistency&lt;/em&gt;,
&lt;em&gt;Isolation&lt;/em&gt; i &lt;em&gt;Durability&lt;/em&gt; implica un conjunt de propietats que ha
de complir un SGBD per garantir la fiabilitat de les transaccions.&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Atomicitat: assegura que una transacció és un &lt;em&gt;tot o res&lt;/em&gt;. Una
transacció o bé finalitza correctament i confirma o bé no deixa
cap rastre de la seva execució.&lt;/li&gt;
&lt;li&gt;Consistència: garanteix que l'execució de qualsevol transacció
no violarà cap les regles definides a la base de dades.&lt;/li&gt;
&lt;li&gt;Aïllament: el resultat d'executar transaccions de manera
concurrent ha de ser el mateix que si l'execució hagués estat
seqüencial.&lt;/li&gt;
&lt;li&gt;Durabilitat: un cop confirmada una transacció, aquesta propietat
ens assegura que el seu resultat es mantindrà fins i tot en el
cas de fallada del sistema.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El &lt;em&gt;model relacional&lt;/em&gt; és una manera d'estructurar la informació en
bases de dades basada en lògica de primer ordre, un sistema
descriptiu formal. L'estructura es basa en &lt;em&gt;tuples&lt;/em&gt; (llistes
ordenades d'elements o &lt;em&gt;camps&lt;/em&gt;) agrupades en relacions o &lt;em&gt;taules&lt;/em&gt;.
Sovint ens referim a les tuples com &lt;em&gt;registres&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Direm SGBDR a un SGBD que gestiona bases de dades definides fent
servir el model relacional. De fet, en l'actualitat és tan comú que
es respecti aquest model, que dient SGBD&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Es coneix com a &lt;em&gt;normalització&lt;/em&gt; al procés d'organitzar els camps i
taules d'una base de dades de manera que es minimitzi redundàncies
i dependències. Tot i que hi ha més, es considera que una base de
dades està normalitzada si acompleix les primeres tres formes
normals:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;1FN: es diu que una taula està en primera forma normal si
disposa d'una clau primària no nula que permet identificar cada
registre &lt;a class="footnote-reference" href="#nfmes" id="id1"&gt;[1]&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;2FN: tots els camps de un registre que no són clau depenen de la
clau primària en el seu conjunt. És a dir, que no depenen d'altres
camps que no siguin tots els que formen la clau primària.&lt;/li&gt;
&lt;li&gt;3FN: tot camp que no sigui clau no ha dependre de cap altre camp
a banda dels que formen la clau primària.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Tot i que un SGBDR és suficient per a moltes (potser &lt;em&gt;la majoria de
les&lt;/em&gt;) necessitats de gestió de dades que puguin tenir les nostres
aplicacions, presenta algunes febleses.&lt;/p&gt;
&lt;p&gt;Una de les crítiques freqüents que trobarem és: en normalitzar, sovint
ens trobem forçats a crear taules que no es corresponen amb entitats
del món real. Per exemple, pensa en com cal implementar les relacions
M:N.&lt;/p&gt;
&lt;p&gt;Però potser la limitació més &lt;em&gt;incòmoda&lt;/em&gt; del model relacional és la
dificultat que ofereix a comunicar-se amb aplicacions basades en el
paradigma &amp;quot;de moda&amp;quot;: l'orientació a objectes. És el que es coneix com
a &lt;em&gt;bretxa&lt;/em&gt; o &lt;em&gt;impedance mismatch&lt;/em&gt; entre els dos models. Bàsicament:&lt;/p&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="53%" /&gt;
&lt;col width="47%" /&gt;
&lt;/colgroup&gt;
&lt;thead valign="bottom"&gt;
&lt;tr&gt;&lt;th class="head"&gt;El model Orientat a Objectes&lt;/th&gt;
&lt;th class="head"&gt;El model relacional&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;transitori (&lt;em&gt;transient&lt;/em&gt;)&lt;/td&gt;
&lt;td&gt;persistent&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;p class="first"&gt;classes&lt;/p&gt;
&lt;p class="last"&gt;inclou comportament&lt;/p&gt;
&lt;/td&gt;
&lt;td&gt;&lt;p class="first"&gt;taules&lt;/p&gt;
&lt;p class="last"&gt;només dades&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;p class="first"&gt;jerarquia de classes&lt;/p&gt;
&lt;p class="last"&gt;inclou herència&lt;/p&gt;
&lt;/td&gt;
&lt;td&gt;&lt;p class="first"&gt;esquema de la BD&lt;/p&gt;
&lt;p class="last"&gt;inclou claus foranes&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;herència&lt;/td&gt;
&lt;td&gt;!&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;propietats / atributs&lt;/td&gt;
&lt;td&gt;columnes / camps&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;instància&lt;/td&gt;
&lt;td&gt;tuples / files / registres&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;atribut d'instància&lt;/td&gt;
&lt;td&gt;camp&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;identitat implícita (punter)&lt;/td&gt;
&lt;td&gt;identitat explícita (clau primària)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;referències&lt;/td&gt;
&lt;td&gt;claus foranes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;referències unidireccionals&lt;/td&gt;
&lt;td&gt;referències bidireccionals&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;amb ordre (seqüèncial)&lt;/td&gt;
&lt;td&gt;sense ordre&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;missatges / interfície&lt;/td&gt;
&lt;td&gt;!&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;centrat en el comportament&lt;/td&gt;
&lt;td&gt;centrat en les dades&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;navegació seguint referències&lt;/td&gt;
&lt;td&gt;operació en conjunt&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;agrupació basada en el comportament&lt;/td&gt;
&lt;td&gt;agrupació basada en les dades&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;mètodes&lt;/td&gt;
&lt;td&gt;&lt;em&gt;stored procedures&lt;/em&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;dades i comportament fortament acoblats&lt;/td&gt;
&lt;td&gt;&lt;em&gt;triggers&lt;/em&gt; i restriccions&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;ocultació de dades, encapsulació&lt;/td&gt;
&lt;td&gt;!&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;A partir d'aquesta bretxa, es van dissenyar bases de dades orientades
a objecte per incorporar un mecanisme de persistència a les
aplicacions orientades a objecte.&lt;/p&gt;
&lt;p&gt;Per diferents raons, els SGBDOOs (SGBD Orientats a Objectes) no han
acabat de quallar en la industria del desenvolupament. Segurament es
explicable pel fet que el model relacional tingui una sòlida base
matemàtica i, probablement, la disponibilitat del llenguatge SQL per
realitzar consultes amb independència del llenguatge de programació.&lt;/p&gt;
&lt;p&gt;Amb tot, les necessitats d'afegir funcionalitats orientades a objecte
es manté. Així apareix el model &lt;em&gt;objecte-relacional&lt;/em&gt; com un pas
intermedi entre els SGBDR i els SGBDOOs.&lt;/p&gt;
&lt;p&gt;Podem veure el model objecte-relacional com una
extensió del model relacional amb conceptes del paradigma d'orientació
a objectes.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Relació entre el model relacional i l'objecte relacional" src="http://apuntstecnics.herokuapp.com/images/postgresql001.img001.ordbms_uml.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Un gestor de bases de dades objecte-relacional (SGBDOR) és una
extensió d'un SGBDR amb el suport de les funcionalitats d'orientació a
objectes. Algunes d'aquestes funcionalitats són: suport a tipus
definits per l'usuari (&lt;em&gt;UDT&lt;/em&gt;), tipus complexos (agregats),
col·leccions (arrays) i herència.&lt;/p&gt;
&lt;p&gt;Michael Stonebraker en el seu llibre &amp;quot;Object-Relational DBMSs: The
Next Great Wave&amp;quot; ens ofereix aquesta taula per aclarir els conceptes:&lt;/p&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="37%" /&gt;
&lt;col width="31%" /&gt;
&lt;col width="33%" /&gt;
&lt;/colgroup&gt;
&lt;thead valign="bottom"&gt;
&lt;tr&gt;&lt;th class="head"&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class="head"&gt;dades bàsiques&lt;/th&gt;
&lt;th class="head"&gt;dades complexes&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;&lt;em&gt;amb consultes&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;SGBDR&lt;/td&gt;
&lt;td&gt;SGBDOR&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;em&gt;sense consultes&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;SF&lt;/td&gt;
&lt;td&gt;SGBDOO&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Al mercat hi ha marques amb prou prestigi com ara Oracle, PostGreSQL,
Informix i Microsoft SQL Server, que afirmen que els seus SGBDs són
SGBDORs. Amb tot, les funcionalitats OR no han tingut, de moment, una
excessiva penetració en el desenvolupament. Una de les raons, de ben
segur, és la falta de consens entre els fabricants a l'hora de
desenvolupar aquestes funcionalitats, si tenim en compte que sovint
les aplicacions cerquen independència del SGBD.&lt;/p&gt;
&lt;p&gt;Amb tot, es d'esperar que amb el temps, aquesta tecnologia acabi
madurant fins un estat en el que els principals fabricants es posin
d'acord com (més o menys) ja ho van fer en el seu dia amb la
implementació del ara estàndard SQL.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="postgresql"&gt;
&lt;h2&gt;PostGreSQL&lt;/h2&gt;
&lt;p&gt;De entre els SGBDORs que hi ha al mercat, treballarem amb PostGreSQL.&lt;/p&gt;
&lt;p&gt;Com diuen de si mateixos a la seva &lt;a class="reference external" href="http://www.postgresql.org/docs/9.1/static/intro-whatis.html"&gt;documentació&lt;/a&gt;,
PostGreSQL és SGBDOR de codi obert que implementa una gran part de
l'estàndard SQL i ofereix moltes funcionalitats, com ara: consultes
complexes, claus foranies, triggers, vistes, integritat transaccional,
control de multiversions concurrents... PostGreSQL pot ser ampliat per
l'usuari de diferents maneres com per exemple afegint tipus de dades,
funcions, operadors, mètodes d'indexació, llenguatges procedurals...
Gràcies a la seva llicència, pot ser usat, modificat i distribuït per
tothom sense cap cost, per qualsevol propòsit (comercial inclòs). A
més, disposa d'una extensa i cuidada documentació accessible des de la
seva web &lt;a class="reference external" href="http://www.postgresql.org/"&gt;postgresql.org&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="nfmes" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;La formulació original incloïa més característiques com
ara l'atomicitat dels camps. Com que hi ha certa controvèrsia amb
les interpretacions, aquí obviarem aquests detalls.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="PostGreSQL"></category></entry><entry><title>Instal·lació de PostGreSQL</title><link href="http://apuntstecnics.herokuapp.com/installacio-de-postgresql.html" rel="alternate"></link><updated>2015-04-11T22:19:38+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-04-11:installacio-de-postgresql.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquesta guia descriu, pas a pas, una instal·lació bàsica del Sistema
Gestor de Bases de Dades (SGBD) &lt;em&gt;PostGreSQL&lt;/em&gt; sobre una màquina virtual
amb un servidor Ubuntu.&lt;/p&gt;
&lt;p&gt;Es recomana la instal·lació del servidor de &lt;em&gt;PostGreSQL&lt;/em&gt; a una màquina
independent de la màquina de treball però connectada a aquesta.
D'aquesta manera les proves que es realitzin s'acostaran més a una
manera de treballar més &lt;em&gt;real&lt;/em&gt;.  Per simplicitat/economia, es proposa
que el servidor sigui una màquina virtual.&lt;/p&gt;
&lt;p&gt;En aquest document suposarà que disposes d'una màquina Ubuntu que
hostatjarà la màquina virtual d'un servidor Ubuntu gestionada per
l'aplicació de virtualització &lt;a class="reference external" href="https://www.virtualbox.org/"&gt;*VirtualBox*&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Pel cas que no coneguis l'aplicació &lt;em&gt;VirtualBox&lt;/em&gt; o/i com crear una
màquina virtual, aquest document et donarà unes breus indicacions per
a aconseguir configurar quelcom usable.&lt;/p&gt;
&lt;p&gt;En el cas que prefereixis fer servir algun altre sistema operatiu o bé
una aplicació de virtualització diferent, no hauries de tenir gaires
problemes per a seguir el principal objectiu d'aquest document: la
instal·lació d'un servidor &lt;em&gt;PostGreSQL&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="creacio-de-la-maquina-virtual"&gt;
&lt;h2&gt;Creació de la màquina virtual&lt;/h2&gt;
&lt;p&gt;A continuació es presenta una breu guia per a crear una màquina
virtual amb el servidor des d'un equip Ubuntu.&lt;/p&gt;
&lt;div class="section" id="installacio-del-virtualbox"&gt;
&lt;h3&gt;Instal·lació del VirtualBox&lt;/h3&gt;
&lt;p&gt;A la pàgina &lt;a class="reference external" href="https://www.virtualbox.org/wiki/Linux_Downloads"&gt;Download VirtualBox for Linux Hosts&lt;/a&gt; hi trobaràs
diferents maneres d'instal·lar el &lt;em&gt;VirtualBox&lt;/em&gt; a una màquina GNU/Linux.&lt;/p&gt;
&lt;p&gt;Instal·la l'aplicació a la màquina on realitzaràs les pràctiques
d'aquest document (a partir d'ara &lt;em&gt;amfitrió&lt;/em&gt;). Si l'amfitrió és un
Ubuntu 12.04, les instruccions següents t'ho permetran fàcilment:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Afegeix el repositori&lt;/p&gt;
&lt;p&gt;Afegeix la següent línia al final del fitxer
&lt;tt class="docutils literal"&gt;/etc/apt/sources.list&lt;/tt&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;deb http://download.virtualbox.org/virtualbox/debian precise contrib
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Registra la clau pública d'Oracle:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;wget -q http://download.virtualbox.org/virtualbox/debian/oracle_vbox.asc -O- &lt;span class="p"&gt;|&lt;/span&gt; sudo apt-key add -
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Actualitza la base de dades de apt i instal·la l'aplicació:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get update
&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get install virtualbox-4.3
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Arrenca l'aplicació:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;VirtualBox &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="creacio-del-servidor"&gt;
&lt;h3&gt;Creació del servidor&lt;/h3&gt;
&lt;p&gt;A continuació trobaràs unes instruccions per a crear una màquina
virtual bàsica i instal·lar-li un servidor d'Ubuntu. Si saps el que
estàs fent, hauries de poder realitzar-ho d'altres maneres sense que
això afecti l'objectiu d'aquesta lliçó.&lt;/p&gt;
&lt;p&gt;Ara crearem ara una màquina virtual amb un &lt;em&gt;Ubuntu Server&lt;/em&gt;. Segueix
les passes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Descarrega la imatge amb l'instal·lador del servidor d'Ubuntu.&lt;/p&gt;
&lt;p&gt;Descarrega la imatge d'una versió del servidor d'Ubuntu a la pàgina
&lt;a class="reference external" href="http://www.ubuntu.com/download/server"&gt;Download Ubuntu Server&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Crea una nova màquina virtual&lt;/p&gt;
&lt;p&gt;Arrenca &lt;em&gt;VirtualBox&lt;/em&gt; i selecciona &lt;em&gt;Màquina-&amp;gt;Nova&lt;/em&gt; (o &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;ctrl-N&lt;/span&gt;&lt;/tt&gt;)&lt;/p&gt;
&lt;p&gt;Indica un nom per la màquina (ex. &lt;tt class="docutils literal"&gt;Ubuntu PostGreSQL&lt;/tt&gt;) de tipus
&lt;tt class="docutils literal"&gt;Linux&lt;/tt&gt; i versió &lt;tt class="docutils literal"&gt;Ubuntu&lt;/tt&gt;. Reserva la memòria recomanada i crea
un nou disc virtual de tipus VDI, ubicat de forma dinàmica i amb la
ubicació i mida que se't proposin. És a dir, accepta tots els
valors que et proposen per defecte.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Enllaça la imatge del servidor amb la nova màquina virtual&lt;/p&gt;
&lt;p&gt;Per fer-ho, segueix &lt;em&gt;Màquina-&amp;gt;Paràmetres-&amp;gt;Emmagatzematge&lt;/em&gt;, clica
sobre la icona del CD a l'àrbre d'emmagatzematge i tot seguit a la
mateixa icona però a la secció d'atributs. Al desplegable,
selecciona la opció de &lt;em&gt;Selecciona una imatge de CD/DVD virtual&lt;/em&gt; i
navega fins a seleccionar el fitxer amb la imatge que t'has
descarregat.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Arrenca la màquina i instal·la el sistema operatiu.&lt;/p&gt;
&lt;p&gt;Segueix &lt;em&gt;Màquina-&amp;gt;Inicia&lt;/em&gt; i segueix les instruccions per instal·lar
el servidor d'Ubuntu.&lt;/p&gt;
&lt;p&gt;En cas que no tinguis familiaritat amb la instal·lació no gràfica
d'un sistema operatiu com l'Ubuntu Server, simplement escull idioma
&lt;a class="footnote-reference" href="#idiomaangles" id="id1"&gt;[1]&lt;/a&gt; i selecciona &lt;em&gt;Install Ububtu Server&lt;/em&gt;. Selecciona
els valors que consideris adequats (el del teclat potser voldràs
que te l'intenti detectar l'instal·lador)&lt;/p&gt;
&lt;p&gt;A continuació creat un usuari &lt;em&gt;sudoer&lt;/em&gt; i posa-li una contrasenya
que puguis recordar. Aquí suposarem &lt;em&gt;usuarivm&lt;/em&gt;. També et caldrà
definir un nom de la màquina.  Aquí suposarem &lt;em&gt;vm&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Continua amb la resta d'opcions fins la creació de les particions.
Normalment el valor proposat hauria de ser adequat. Amb la secció
de creació de particions escull la primera opció &lt;em&gt;Guided - use
entire disk&lt;/em&gt; (sense LVM) i accepta la taula de particions que
t'ofereixi.&lt;/p&gt;
&lt;p&gt;Ara espera a que s'instal·li el sistema operatiu.&lt;/p&gt;
&lt;p&gt;Hi haurà algunes preguntes que requeriran de la teva interacció. La
major part de les vegades podràs seleccionar l'opció per defecte
fins que arribis a la instal·lació de paquets de la secció
&lt;em&gt;Software selection&lt;/em&gt;. Si et vols evitar la instal·lació posterior
del servidor de &lt;em&gt;PostGreSQL&lt;/em&gt; i del de SSH (per exemple per fer login
remotament), pots aprofitar i marcar &lt;em&gt;OpenSSH Server&lt;/em&gt; i &lt;em&gt;PostgreSQL
database&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;No és imprescindible instal·lar el servidor de ssh, però pot
resultar-te molt més còmode establir sessió des d'una consola a
l'amfitrió que teclejar directament a la màquina virtual. Com tot,
va a gustos.  Si no vas marcar el paquet OpenSSH, però t'interessa
més endavant, el podràs instal·lar amb un:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get install openssh-server
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Un cop instal·lat el sistema operatiu, torna a arrencar la màquina. Per exemple, amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;sudo shutdown -r now
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Entra amb el teu usuari &lt;em&gt;sudoer&lt;/em&gt; (si has seguit el nom d'aquesta
guia, serà &lt;em&gt;usuarivm&lt;/em&gt;) i actualitza (si tens temps) el programari
amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get uptdate
usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get upgrade
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Canvia la connexió de la xarxa&lt;/p&gt;
&lt;p&gt;El mode de connexió NAT ens permet accedir a l'exterior (internet)
des de la màquina virtual. Ens limita, però, l'accés des de la
màquina host al servidor: precisament el que més ens interessa.&lt;/p&gt;
&lt;p&gt;Per aquesta raó, canviarem el tipus de connexió a un altre que ens
ajudi al nostre objectiu. Escollirem el mode &lt;em&gt;Adaptador de només
amfitrió&lt;/em&gt; de manera que l'accés a la màquina virtual quedi
restringit a la nostra màquina i altres possibles màquines virtuals
que s'executin sobre aquesta.&lt;/p&gt;
&lt;p&gt;Per fer-ho, segueix les següents passes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;finalitza l'execució de la màquina virtual&lt;/li&gt;
&lt;li&gt;des de la finestra principal de &lt;em&gt;VirtualBox&lt;/em&gt;, selecciona
&lt;em&gt;Fitxer-&amp;gt;Preferències-&amp;gt;Xarxa-&amp;gt;Xarxes de només amfitrió&lt;/em&gt; i fes
clic al botó lateral (dreta) que apareix amb un '+' (amb
llegenda &lt;em&gt;Âfegeix xarxa de només anfitrió&lt;/em&gt;). Això t'incorporarà
&lt;em&gt;vboxnet0&lt;/em&gt;, un servidor DHCP que ofereix per defecte
&lt;em&gt;VirtualBox&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;des de la finestra principal de &lt;em&gt;VirtualBox&lt;/em&gt;, selecciona
&lt;em&gt;Màquina-&amp;gt;Paràmetres-&amp;gt;Xarxa&lt;/em&gt; i a
&lt;em&gt;Connectat a:&lt;/em&gt; canvia el valor de NAT per &lt;em&gt;Adaptador de només
amfitrió&lt;/em&gt; &lt;a class="footnote-reference" href="#adaptadorpont" id="id2"&gt;[2]&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Cal tenir en compte que en arrencar de nou la màquina virtual
haurem perdut l'accés cap a l'exterior. Si et cal per algun motiu,
pots provar, per exemple, d'assignar a la màquina virtual una
interfície de xarxa addicional amb NAT &lt;a class="footnote-reference" href="#config2interf" id="id3"&gt;[3]&lt;/a&gt;. Pels
objectius d'aquest document, no serà necessari.&lt;/p&gt;
&lt;p&gt;Ara, pots consultar la informació de xarxa a la màquina virtual:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;ifconfig eth0
eth0      Link encap:Ethernet  HWaddr 08:00:27:f8:47:05
          inet addr:192.168.56.101  Bcast:192.168.56.255  Mask:255.255.255.0
          inet6 addr: fe80::a00:27ff:fef8:4705/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:48 errors:0 dropped:0 overruns:0 frame:0
          TX packets:46 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:8041 &lt;span class="o"&gt;(&lt;/span&gt;8.0 KB&lt;span class="o"&gt;)&lt;/span&gt;  TX bytes:6805 &lt;span class="o"&gt;(&lt;/span&gt;6.8 KB&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;També des de la màquina amfitrió, on comprovarem que &lt;em&gt;VirtualBox&lt;/em&gt; ens
ha creat una nova interfície anomenada &lt;em&gt;vboxnet0&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;ifconfig vboxnet0
vboxnet0  Link encap:Ethernet  HWaddr 0a:00:27:00:00:00
          inet addr:192.168.56.1  Bcast:192.168.56.255  Mask:255.255.255.0
          inet6 addr: fe80::800:27ff:fe00:0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:68 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 &lt;span class="o"&gt;(&lt;/span&gt;0.0 B&lt;span class="o"&gt;)&lt;/span&gt;  TX bytes:11577 &lt;span class="o"&gt;(&lt;/span&gt;11.5 KB&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Podem ara, per exemple, connectar-nos a la màquina virtual amb una
sessió &lt;tt class="docutils literal"&gt;ssh&lt;/tt&gt; des d'una consola de l'amfitrió:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;ssh usuarivm@192.168.56.101
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id4"&gt;
&lt;h2&gt;Instal·lació de PostGreSQL&lt;/h2&gt;
&lt;p&gt;Aquesta secció només considera-la en el cas que no hagis ja instal·lat
el &lt;em&gt;PostGreSQL&lt;/em&gt; com una de les col·leccions d'aplicacions durant la
instal·lació del SO.&lt;/p&gt;
&lt;p&gt;La instal·lació del servidor de &lt;em&gt;PostGreSQL&lt;/em&gt; en la configuració
proposada no podria ser gaire més senzilla. Assegura't però que ho fas
a la màquina virtual i no a la amfitriona! :&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get install postgresql
&lt;/pre&gt;&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Segurament no t'instal·larà la darrera versió de &lt;em&gt;PostGreSQL&lt;/em&gt;, però al
menys serà una estable i suficient pels objectius d'aquesta lliçó.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="configuracio-de-postgresql"&gt;
&lt;h2&gt;Configuració de PostGreSQL&lt;/h2&gt;
&lt;p&gt;En instal·lar &lt;em&gt;PostGreSQL&lt;/em&gt;, ens ha creat usuari &lt;em&gt;postgres&lt;/em&gt; i la base
de dades &lt;em&gt;template1&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;En cas que sigui necessari, canviarem la contrasenya de &lt;em&gt;postgres&lt;/em&gt;
amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;sudo passwd postgres
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per defecte, PostGreSQL configura l'accés local perquè sigui realitzat
des d'un usuari del sistema operatiu. Tot i que es pot canviar,
acceptarem aquest comportament per defecte.&lt;/p&gt;
&lt;p&gt;Així, crearem un nou usuari al sistema. Ho farem sense donar-li
possibilitats de logar-se:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;sudo useradd -s /sbin/nologin usuaribd
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Creem ara un usuari regular i una nova base de dades. Farem:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;su - postgres
postgres@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;psql
&lt;span class="nv"&gt;$ &lt;/span&gt;psql
psql &lt;span class="o"&gt;(&lt;/span&gt;9.3.6&lt;span class="o"&gt;)&lt;/span&gt;
Type &lt;span class="s2"&gt;&amp;quot;help&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; help.
&lt;span class="nv"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="c"&gt;# CREATE USER usuaribd WITH PASSWORD &amp;#39;toPSikr3t&amp;#39;;&lt;/span&gt;
CREATE ROLE
&lt;span class="nv"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="c"&gt;# CREATE DATABASE testbd;&lt;/span&gt;
CREATE DATABASE
&lt;span class="nv"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="c"&gt;# GRANT ALL PRIVILEGES ON DATABASE testbd to usuaribd;&lt;/span&gt;
GRANT
&lt;span class="nv"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="c"&gt;#\q&lt;/span&gt;
postgres@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;exit&lt;/span&gt;
&lt;span class="nb"&gt;logout&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nota: és possible que el primer cop que sortim de &lt;em&gt;psql&lt;/em&gt; ens generi un
missatge com ara:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
could not save history to file
&amp;quot;/var/lib/postgresql/.psql_history&amp;quot;: No such file or directory
&lt;/pre&gt;
&lt;p&gt;Si és així, el podem ignorar amb tranquil·litat.&lt;/p&gt;
&lt;p&gt;Evidentment pots escollir el nom de la base de dades, el d'usuari i la
clau que t'agradin. Recorda que si la configuració de xarxa de la
teva màquina virtual és la que se't proposa en aquest document, només
es podrà accedir a aquesta des de la teva màquina amfitrió.&lt;/p&gt;
&lt;p&gt;Accedim a la nova base de dades amb el nou usuari fent servir:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;psql -U usuaribd -d testbd -h localhost
Password &lt;span class="k"&gt;for&lt;/span&gt; user usuaribd:
psql &lt;span class="o"&gt;(&lt;/span&gt;9.3.6&lt;span class="o"&gt;)&lt;/span&gt;
SSL connection &lt;span class="o"&gt;(&lt;/span&gt;cipher: DHE-RSA-AES256-SHA, bits: 256&lt;span class="o"&gt;)&lt;/span&gt;
Type &lt;span class="s2"&gt;&amp;quot;help&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; help.

&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="se"&gt;\q&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per a accedir des d'una màquina fora de la que conté el servidor, per
exemple del nostre amfitrió &lt;a class="footnote-reference" href="#nossh" id="id5"&gt;[4]&lt;/a&gt;, ens caldrà fer algunes
modificacions a la configuració per defecte de &lt;em&gt;PostGreSQL&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;El canvi requereix la modificació de dos fitxers de configuració que
es trobaran a &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;/etc/postgresql/«X.Y»&lt;/span&gt;&lt;/tt&gt; on «X.Y» correspon a la versió
que hagis instal·lat de &lt;em&gt;PostGreSQL&lt;/em&gt;. En el meu cas la &lt;tt class="docutils literal"&gt;9.3&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;El primer fitxer a modificar és
&lt;tt class="docutils literal"&gt;/etc/postgresql/9.3/main/pg_hba.conf&lt;/tt&gt;. Cal localitzar les següents
línies&lt;/p&gt;
&lt;pre class="literal-block"&gt;
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
&lt;/pre&gt;
&lt;p&gt;Tot just a sota, hi afegirem la següent línia &lt;a class="footnote-reference" href="#editordef" id="id6"&gt;[5]&lt;/a&gt;&lt;/p&gt;
&lt;pre class="literal-block"&gt;
host    all             all             192.168.56.0/24        md5
&lt;/pre&gt;
&lt;p&gt;A continuació, modificarem el fitxer &lt;tt class="docutils literal"&gt;/etc/postgresql/9.3/main/postgresql.conf&lt;/tt&gt;. Hi localitzarem la secció &lt;em&gt;Connection settings&lt;/em&gt; i descomentarem la línia que conté&lt;/p&gt;
&lt;pre class="literal-block"&gt;
# listen_addresses = 'localhost'          # what IP address(es) to listen on;
&lt;/pre&gt;
&lt;p&gt;de manera que aparegui com:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
listen_addresses = '*'          # what IP address(es) to listen on;
&lt;/pre&gt;
&lt;p&gt;Ara reiniciem el servidor de &lt;em&gt;PostGreSQL&lt;/em&gt; amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;sudo service postgresql restart
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finalment provarem la connexió remota. Per simplicitat, farem servir
la consola de &lt;tt class="docutils literal"&gt;psql&lt;/tt&gt; des de l'amfitrió.&lt;/p&gt;
&lt;p&gt;A la màquina amfitrió ens
caldrà probablement instal·lar el client de &lt;em&gt;PostGreSQL&lt;/em&gt;. Ho podem fer
simplement amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get install postgresql-client
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ara ja podem fer una prova des de l'amfitrió:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;psql -U usuaribd -d testbd -h 192.168.56.101
Password &lt;span class="k"&gt;for&lt;/span&gt; user usuaribd:
psql &lt;span class="o"&gt;(&lt;/span&gt;9.3.6&lt;span class="o"&gt;)&lt;/span&gt;
SSL connection &lt;span class="o"&gt;(&lt;/span&gt;cipher: DHE-RSA-AES256-GCM-SHA384, bits: 256&lt;span class="o"&gt;)&lt;/span&gt;
Type &lt;span class="s2"&gt;&amp;quot;help&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; help.

&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\q&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si tot ha anat bé, ja disposem d'un servidor &lt;em&gt;PostGreSQL&lt;/em&gt; en
funcionament amb un usuari i una base de dades amb els que podrem
estudiar el funcionament d'aquest SGBD.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="idiomaangles" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En aquest cas, l'idioma és només per
l'instal·lador. De seguida et demanarà l'idioma del SO. Et recomano
que mantinguis l'anglés de manera que no hagis de barallar-te amb
la instal·lació de diferents paquets de traducció.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="adaptadorpont" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Pot ser temptador fer servir l'opció d'&lt;em&gt;Adaptador
pont&lt;/em&gt;. Si et trobes però a una xarxa amb molts equips, tingues en
compte que aquesta opció consumirà una IP del servidor DHCP. A més,
les comunicacions entre la màquina virtual i l'amfitrió seran més
lentes donat que cal que surtin físicament.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="config2interf" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;En cas que vulguis configurar més d'una interfície
de xarxa, és possible que no sigui suficient amb configurar els dos
adaptadors al &lt;em&gt;VirtualBox&lt;/em&gt;. Hauràs de configurar la màquina virtual
de manera que reconegui la nova interfície. Per fer-ho, considera
afegir les següents línies al final de
&lt;tt class="docutils literal"&gt;/etc/network/interfaces&lt;/tt&gt;&lt;/p&gt;
&lt;pre class="last literal-block"&gt;
auto eth1
iface eth1 inet dhcp
&lt;/pre&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="nossh" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Per favor, no et confonguis amb el fet d'estar-te
connectant des d'una sessió &lt;em&gt;ssh&lt;/em&gt;. Tot i que la connexió &lt;em&gt;ssh&lt;/em&gt;
l'estàs realitzant des de la màquina anfitriona, la connexió al
servidor de &lt;em&gt;PostGreSQL&lt;/em&gt; l'estàs realitzant des de la màquina
virtual.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="editordef" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id6"&gt;[5]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Per editar, el servidor us ofereix dos editors: el
&lt;em&gt;vi&lt;/em&gt; i el &lt;em&gt;nano&lt;/em&gt;. Si no saps manegar-te amb el primer, els ajuts
del segon t'haurien de ser suficients.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="PostGreSQL"></category></entry><entry><title>Breu guia de psql</title><link href="http://apuntstecnics.herokuapp.com/breu-guia-de-psql.html" rel="alternate"></link><updated>2015-04-11T22:18:38+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-04-11:breu-guia-de-psql.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada trobaràs una breu guia de les comandes que
probablement necessitaràs durant aquest curs per fer anar &lt;em&gt;psql&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Pots venir a mirar aquesta guia cada cop que necessitis fer una
consulta ràpida. El primer cop, però, et recomano que li facis una
ullada ràpida i responguis els exercicis, per a tenir una idea de què
hi pots trobar.&lt;/p&gt;
&lt;p&gt;En la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/primeres-passes-amb-la-consola-psql.html"&gt;següent entrada&lt;/a&gt; gran part del que
apareix en aquesta guia cobrarà sentit. Mentrestant, et proposo que
facis proves pel teu compte. Encara que no tinguis res a la base de
dades, t'ajudarà a familiaritzar-te amb l'aplicació.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="guia-basica-de-comandes-de-psql"&gt;
&lt;h2&gt;Guia bàsica de comandes de &lt;em&gt;psql&lt;/em&gt;&lt;/h2&gt;
&lt;div class="section" id="per-entrar-i-per-sortir"&gt;
&lt;h3&gt;Per entrar i per sortir&lt;/h3&gt;
&lt;p&gt;Ens connectarem a la base de dades &lt;em&gt;testbd&lt;/em&gt; que es troba al servidor
&lt;em&gt;192.168.56.101&lt;/em&gt; amb l'usuari &lt;em&gt;usuaribd&lt;/em&gt; escrivint al terminal
&lt;a class="footnote-reference" href="#contrasenya" id="id1"&gt;[1]&lt;/a&gt; (ens demanarà contrasenya):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;psql -U usuaribd -d testbd -h 192.168.56.101
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per sortir de la consola de &lt;em&gt;psql&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\q&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="per-aconseguir-ajuda"&gt;
&lt;h3&gt;Per aconseguir ajuda&lt;/h3&gt;
&lt;p&gt;En realitat, amb aquesta secció podria donar per finalitzada aquesta
breu guia. La consola &lt;em&gt;psql&lt;/em&gt; disposa d'un sistema d'ajut molt complet.&lt;/p&gt;
&lt;p&gt;Obtenim ajuda sobre el programa &lt;em&gt;psql&lt;/em&gt; amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;psql --help
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Obtenim ajuda sobre comandes &lt;em&gt;psql&lt;/em&gt; amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\?&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Obtenim ajuda sobre comandes &lt;em&gt;sql&lt;/em&gt; amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\h&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si volem una comanda concreta, simplement l'afegim a continuació:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\h&lt;/span&gt; SELECT
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="per-carregar-el-contingut-d-un-fitxer"&gt;
&lt;h3&gt;Per carregar el contingut d'un fitxer&lt;/h3&gt;
&lt;p&gt;Des de terminal:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;psql -U usuaribd -d testbd -h 192.168.56.101 &amp;lt; fitxer.sql
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;o també&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;psql -U usuaribd -d testbd -h 192.168.56.101 -f fitxer.sql
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Des de consola &lt;em&gt;psql&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\i&lt;/span&gt; fitxer.sql
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="per-guardar-el-resultat-d-una-consulta-en-un-fitxer"&gt;
&lt;h3&gt;Per guardar el resultat d'una consulta en un fitxer&lt;/h3&gt;
&lt;p&gt;Guardarem la sortida de&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\o&lt;/span&gt; fitxer.sql
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per recuperar la sortida en la consola:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\o&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="consultar-objectes-de-la-base-de-dades"&gt;
&lt;h3&gt;Consultar objectes de la base de dades&lt;/h3&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="21%" /&gt;
&lt;col width="79%" /&gt;
&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;\d&lt;/td&gt;
&lt;td&gt;mostra tables, seqüències, vistes i indexos&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;\dt&lt;/td&gt;
&lt;td&gt;mostra les tables&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;\dt clients&lt;/td&gt;
&lt;td&gt;mostra els detalls de la taula &lt;em&gt;clients&lt;/em&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;\dt+ clients&lt;/td&gt;
&lt;td&gt;mostra &lt;strong&gt;més&lt;/strong&gt; detalls sobre la taula &lt;em&gt;clients&lt;/em&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;\dt cl*&lt;/td&gt;
&lt;td&gt;mostra els detalls de les taules que comencen amb &lt;em&gt;cl&lt;/em&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;\d clients&lt;/td&gt;
&lt;td&gt;mostra la descripció de la taula &lt;em&gt;clients&lt;/em&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-massa-linies"&gt;
&lt;h3&gt;Exercici 1. Massa línies&lt;/h3&gt;
&lt;p&gt;Què passa quan el resultat d'una comanda sobrepassa el nombre de
línies que tenim disponibles a la finestra des de la que estem
treballant?&lt;/p&gt;
&lt;p&gt;Pista: fes que la finestra del terminal mostri un màxim de 10 línies i
demana la llista de totes les comandes &lt;em&gt;sql&lt;/em&gt; que enten &lt;em&gt;postgresql&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-les-taules-vip"&gt;
&lt;h3&gt;Exercici 2. Les taules &lt;em&gt;vip&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;Amb quina comanda psql podem veure la llista de les taules que
el seu nom finalitza amb &amp;quot;vip&amp;quot;.&lt;/p&gt;
&lt;p&gt;La comanda hauria de mostrar taules amb els següents noms:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;CLIENTS_VIP&lt;/li&gt;
&lt;li&gt;COMANDES_VIP&lt;/li&gt;
&lt;li&gt;TAULAVIP&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-help"&gt;
&lt;h3&gt;Exercici 3. Help!&lt;/h3&gt;
&lt;p&gt;Et toca investigar una mica en l'ajut de &lt;em&gt;psql&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Indica amb quina &lt;strong&gt;única&lt;/strong&gt; comanda podríem executar el contingut del
fitxer &lt;em&gt;entrada.sql&lt;/em&gt; i deixar el resultat en el fitxer &lt;em&gt;sortida.sql&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="contrasenya" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;ens demanarà contrasenya. A l'exemple hem fet servir
&lt;em&gt;pass&lt;/em&gt;. No és gaire segura, però en la configuració que et proposen
els apunts, no representa un gran problema.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="PostGreSQL"></category></entry><entry><title>Primeres passes amb la consola psql</title><link href="http://apuntstecnics.herokuapp.com/primeres-passes-amb-la-consola-psql.html" rel="alternate"></link><updated>2015-04-11T22:17:38+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-04-11:primeres-passes-amb-la-consola-psql.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada començarem a treballar amb la consola de &lt;em&gt;psql&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="primeres-passes"&gt;
&lt;h2&gt;Primeres passes&lt;/h2&gt;
&lt;p&gt;En aquesta secció farem una ràpida in introducció a la consola
&lt;em&gt;psql&lt;/em&gt;, una de les possibles portes de comunicació amb PostGreSQL.&lt;/p&gt;
&lt;p&gt;Si no ho has fet encara, instal·lat el PostGreSQL. Pressuposaré que
estàs seguint les passes descrites al document &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/installacio-de-postgresql.html"&gt;d'instal·lació de
PostGreSQL&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Segueix les passes:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
# connecta a la base de dades de prova
$ psql -U usuaribd -d testbd -h 192.168.56.101
Password for user usuaribd:
psql (9.1.8)
SSL connection (cipher: DHE-RSA-AES256-SHA, bits: 256)
Type &amp;quot;help&amp;quot; for help.

testbd=&amp;gt; -- això és un comentari
testbd=&amp;gt; -- comprova l'usuari amb el que t'has connectat
testbd=&amp;gt; SELECT current_user;
 current_user
--------------
 usuaribd
(1 row)

testbd=&amp;gt; -- no distingeix majúscules
testbd=&amp;gt; select CURRENT_USER;
 current_user
--------------
 usuaribd
(1 row)

testbd=&amp;gt; -- un càlcul simple
SELECT 5 * 2 + 1 AS resultat;
 resultat
----------
       11
(1 row)

testbd=&amp;gt; -- amb més d'una línia \p mostra la línia introduïda i \g o ; l'executa
testbd=&amp;gt; SELECT
5 * 2
testbd-&amp;gt; \p
select
5 * 2
testbd-&amp;gt; + 1
testbd-&amp;gt; AS resultat
testbd-&amp;gt; \p
select
5 * 2
+ 1
AS resultat
testbd-&amp;gt; \g
 resultat
----------
       11
(1 row)

testbd=&amp;gt; -- per obtenir ajuda
testbd=&amp;gt; \?
General
  \copyright             show PostgreSQL usage and distribution terms
  \g [FILE] or ;         execute query (and send results to file or |pipe)
  \h [NAME]              help on syntax of SQL commands, * for all commands
  \q                     quit psql

Query Buffer
  \e [FILE] [LINE]       edit the query buffer (or file) with external editor
  \ef [FUNCNAME [LINE]]  edit function definition with external editor
  \p                     show the contents of the query buffer
  \r                     reset (clear) the query buffer
  \s [FILE]              display history or save it to file
  \w FILE                write query buffer to file

Input/Output
  \copy ...              perform SQL COPY with data stream to the client host
  \echo [STRING]         write string to standard output
  \i FILE                execute commands from file
  \o [FILE]              send all query results to file or |pipe
  \qecho [STRING]        write string to query output stream (see \o)

Informational
  (options: S = show system objects, + = additional detail)
  \d[S+]                 list tables, views, and sequences
  \d[S+]  NAME           describe table, view, sequence, or index
«...»
&lt;/pre&gt;
&lt;p&gt;De vegades ens resultarà més còmode editar les nostres comandes en un
fitxer i demanar a &lt;em&gt;psql&lt;/em&gt; que ens les executi. O podem fer
interactivament des del propi &lt;em&gt;psql&lt;/em&gt; amb &lt;tt class="docutils literal"&gt;\i&lt;/tt&gt; però també sense que
calgui entrar.&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ echo &amp;quot;SELECT current_user;&amp;quot; &amp;gt; currentuser.sql
$ psql -U usuaribd -d testbd -h 192.168.56.101 -f currentuser.sql
Password for user usuaribd:
 current_user
--------------
 usuaribd
(1 row)
&lt;/pre&gt;
&lt;p&gt;Altres vegades el que ens interessarà serà guardar en un fitxer el
resultat d'una consulta&lt;/p&gt;
&lt;pre class="literal-block"&gt;
testbd=&amp;gt; SELECT current_user \g /tmp/currentuser.sql
testbd=&amp;gt; \q
$ cat /tmp/currentuser.sql
 current_user
--------------
 usuaribd
(1 row)
&lt;/pre&gt;
&lt;p&gt;Tot i que hi ha altres eines disponibles, fins i tot gràfiques, que
t'ajudaran a fer la majoria de les tasques d'administració amb el teu
PostgreSQL, aconseguir una certa habilitat en l'ús de la consola
&lt;em&gt;psql&lt;/em&gt; de segur et pagarà la pena.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-funcions-de-sistema"&gt;
&lt;h3&gt;Exercici 1. Funcions de sistema&lt;/h3&gt;
&lt;p&gt;Desenvolupa una taula amb els continguts de la taula &lt;em&gt;9.47 Session
Information Functions&lt;/em&gt; que apareix a &lt;a class="reference external" href="http://www.postgresql.org/docs/9.1/static/functions-info.html"&gt;9.3. System Information
Functions&lt;/a&gt; tot
afegint una nova columna amb el resultat d'executar-ho al teu
servidor.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-tipus-basics-de-dades"&gt;
&lt;h3&gt;Exercici 2. Tipus bàsics de dades&lt;/h3&gt;
&lt;p&gt;Desenvolupa una taula amb la descripció dels tipus de dades bàsics que
apareixen al capítol 8 sobre &lt;a class="reference external" href="http://www.postgresql.org/docs/9.1/static/datatype.html"&gt;tipus de dades&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Només cal que incloguis els tipus bàsics que apareixen sota les
seccions 8.1 fins la 8.6.
Evidentment, si tens interès, pots afegir-ne d'altres.&lt;/p&gt;
&lt;p&gt;Afegeix, per cada tipus, una referència al manual (la url) on apareix
i una descripció amb les teves paraules de les variacions.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="PostGreSQL"></category></entry><entry><title>Comparació models relacional i objecte-relacionals (primera part)</title><link href="http://apuntstecnics.herokuapp.com/comparacio-models-relacional-i-objecte-relacionals-primera-part.html" rel="alternate"></link><updated>2015-04-11T22:16:38+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-04-11:comparacio-models-relacional-i-objecte-relacionals-primera-part.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document compara la modelització de dades des de dues
perspectives:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;el model Relacional&lt;/li&gt;
&lt;li&gt;el model Objecte-Relacional.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Els continguts estan orientats al sistema gestor de bases de dades
objecte-relacional (SGBDOR) PostGreSQL. Tot i que les idees generals
haurien de ser traduïbles a altres SGBDOR, en l'actualitat, els
SGBDORs més importants no s'han posat d'acord en la interpretació de
les funcionalitats. Això implica que trobaràs diferències importants
depenent del fabricant.&lt;/p&gt;
&lt;p&gt;Tot i que PostGreSQL ofereix un suport extens a procediments
emmagatzemats (&lt;em&gt;stored procedures&lt;/em&gt;), en aquests continguts ens
centrarem en el emmagatzemament de dades i deixarem de moment la
manipulació d'aquestes.&lt;/p&gt;
&lt;p&gt;Aquesta és la primera part de la comparació. Hi trobaràs un breu repàs
del SQL del model relacional. La part afegida pel model
Objecte-Relacional queda a la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/comparacio-models-relacional-i-objecte-relacionals-segona-part.html"&gt;segona part&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Per seguir aquests continguts, es pressuposa que saps com gestionar
taules, fer consultes i inserir, modificar i eliminar-hi elements.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="model-relacional"&gt;
&lt;h2&gt;Model Relacional&lt;/h2&gt;
&lt;p&gt;En aquesta secció es presenten les entitats de que es composa
l'exemple &lt;a class="footnote-reference" href="#exempleclassic" id="id1"&gt;[1]&lt;/a&gt; a implementar.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama d'Entitat Relació del cas d'estudi" src="http://apuntstecnics.herokuapp.com/images/postgresql005.img001.der.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Com ja saps, el model relacional guarda les dades en taules tot
cercant minimitzar redundàncies.&lt;/p&gt;
&lt;p&gt;Les taules de l'exemple &lt;a class="footnote-reference" href="#convencioder" id="id2"&gt;[2]&lt;/a&gt; CLIENTS, COMERCIALS,
COMANDES, LINIES_COMANDA, i PRODUCTES.&lt;/p&gt;
&lt;p&gt;Els atributs de cada entitat formaran les columnes de les diferents
taules.&lt;/p&gt;
&lt;p&gt;Fixa't que cada part de l'adreça (carrer, codi postal, ciutat,
país) queda emmagatzemat en la seva pròpia columna. Hi ha adreces a
les taules de CLIENTS i COMANDES. Per la primera, l'adreça correspon a
la de facturació. La de COMANDES correspon a la de lliurament.&lt;/p&gt;
&lt;p&gt;En el cas dels telèfons, per tenir-ne més d'un la taula CLIENTS ha de
disposar d'una columna per cada telèfon. No és massa &lt;em&gt;elegant&lt;/em&gt; ja que
si en tenim menys de telèfons, hem de posar &lt;em&gt;nulls&lt;/em&gt;, i si són més hem
de modificar la taula.&lt;/p&gt;
&lt;p&gt;Per altra banda, el model reflexa que hi ha alguns clients que tenen
un comercial associat. Es tracta de clients importants als que
l'empresa destina un comercial. Com que un comercial pot tenir N
clients als que fa el seguiment, mentre que un client pot tenir 0 o 1
comercial associat, aquesta relació ens donarà alguns problemes a
l'hora de codificar-la en el model relacional. En concret, ens
obligarà o renunciar al control d'integritat d'una clau forana que en
alguns casos, haurà de poder ser nul, o bé a crear una taula
addicional que enllaci els clients VIPs amb el comercial associat.
Aquí optarem per aquesta via &lt;a class="footnote-reference" href="#alternativesherencia" id="id3"&gt;[3]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Finalment, fixat que la relació entre la comanda i els productes
requerits, fa servir una &lt;em&gt;entitat feble&lt;/em&gt; (LINIES_COMANDA) que
emmagatzema aquesta relació i afegeix alguna informació (quantitat de
producte).&lt;/p&gt;
&lt;div class="section" id="la-taula-clients"&gt;
&lt;h3&gt;La taula Clients&lt;/h3&gt;
&lt;p&gt;Crearem la taula CLIENTS amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;PRIMARY&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;tractament&lt;/span&gt; &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;cognoms&lt;/span&gt; &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;carrer&lt;/span&gt; &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;codi_postal&lt;/span&gt; &lt;span class="nb"&gt;VARCHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;ciutat&lt;/span&gt; &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;pais&lt;/span&gt; &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;telefon_1&lt;/span&gt; &lt;span class="nb"&gt;VARCHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;telefon_2&lt;/span&gt; &lt;span class="nb"&gt;VARCHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;telefon_3&lt;/span&gt; &lt;span class="nb"&gt;VARCHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Tot i que PostGreSQL ens ofereix el tipus SERIAL per generar una clau
primària que s'autocalculi per cada client, aquí farem servir INTEGER
per simplicitat. Si tens intenció d'afegir moltes entrades pots fer
servir BIG INTEGER.&lt;/p&gt;
&lt;p&gt;No cal indicar que &lt;em&gt;id&lt;/em&gt; és NOT NULL. PostGreSQL ho marca en el moment
que sap que és una clau primària.&lt;/p&gt;
&lt;p&gt;També notem que la majoria de camps els declarem de tipus TEXT per no
haver-nos de preocupar per les mides. Tenint en compte que PostGreSQL
fa una implementació força eficient d'aquest tipus de dades, potser
només ens hauríem de preocupar del camp &lt;em&gt;tractament&lt;/em&gt; que contindrà
valors com ara &lt;em&gt;Sr.&lt;/em&gt;, &lt;em&gt;Sra.&lt;/em&gt;, etc. Per simplicitat et proposo que ho
deixem així.&lt;/p&gt;
&lt;p&gt;En el moment que llencis aquesta comanda, PostGreSQL respondrà amb&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index &lt;span class="s2"&gt;&amp;quot;clients_pkey&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; table &lt;span class="s2"&gt;&amp;quot;clients&amp;quot;&lt;/span&gt;
CREATE TABLE
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Amb això ens està avisant que ha creat un índex per la taula CLIENTS.
És un element que en altres SGBDs queda amagat i que PostGreSQL
explicita perquè ofereix la possibilitat de fer-ho d'altres maneres.
Per cert, en cas que vulguis desfer-te de la taula (&lt;tt class="docutils literal"&gt;DROP TABLE
CLIENTS;&lt;/tt&gt;) PostGreSQL es farà càrrec també d'eliminar els índexs i
altres elements que hagi creat per tu &lt;a class="footnote-reference" href="#compteambheretats" id="id4"&gt;[4]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;En cas que tinguis interès en revisar la descripció de la taula que
has creat, pots fer-ho des de &lt;tt class="docutils literal"&gt;psql&lt;/tt&gt; amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\d&lt;/span&gt; CLIENTS
             Table &lt;span class="s2"&gt;&amp;quot;public.clients&amp;quot;&lt;/span&gt;
   Column    &lt;span class="p"&gt;|&lt;/span&gt;         Type          &lt;span class="p"&gt;|&lt;/span&gt; Modifiers
-------------+-----------------------+-----------
 id          &lt;span class="p"&gt;|&lt;/span&gt; integer               &lt;span class="p"&gt;|&lt;/span&gt; not null
 tractament  &lt;span class="p"&gt;|&lt;/span&gt; text                  &lt;span class="p"&gt;|&lt;/span&gt;
 nom         &lt;span class="p"&gt;|&lt;/span&gt; text                  &lt;span class="p"&gt;|&lt;/span&gt;
 cognoms     &lt;span class="p"&gt;|&lt;/span&gt; text                  &lt;span class="p"&gt;|&lt;/span&gt;
 carrer      &lt;span class="p"&gt;|&lt;/span&gt; text                  &lt;span class="p"&gt;|&lt;/span&gt;
 codi_postal &lt;span class="p"&gt;|&lt;/span&gt; character varying&lt;span class="o"&gt;(&lt;/span&gt;20&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;
 ciutat      &lt;span class="p"&gt;|&lt;/span&gt; text                  &lt;span class="p"&gt;|&lt;/span&gt;
 pais        &lt;span class="p"&gt;|&lt;/span&gt; text                  &lt;span class="p"&gt;|&lt;/span&gt;
 telefon_1   &lt;span class="p"&gt;|&lt;/span&gt; character varying&lt;span class="o"&gt;(&lt;/span&gt;20&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;
 telefon_2   &lt;span class="p"&gt;|&lt;/span&gt; character varying&lt;span class="o"&gt;(&lt;/span&gt;20&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;
 telefon_3   &lt;span class="p"&gt;|&lt;/span&gt; character varying&lt;span class="o"&gt;(&lt;/span&gt;20&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;
Indexes:
    &lt;span class="s2"&gt;&amp;quot;clients_pkey&amp;quot;&lt;/span&gt; PRIMARY KEY, btree &lt;span class="o"&gt;(&lt;/span&gt;id&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-la-taula-comercials"&gt;
&lt;h3&gt;Exercici 1. La taula COMERCIALS&lt;/h3&gt;
&lt;p&gt;Implementa la taula COMERCIALS.&lt;/p&gt;
&lt;p&gt;Anomena a la clau primària &lt;tt class="docutils literal"&gt;id&lt;/tt&gt; i declara-la exactament igual que a
CLIENTS. Això permetrà mantenir la coherència amb la resta de les
definicions que venen a continuació.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="els-clients-vip"&gt;
&lt;h3&gt;Els clients VIP&lt;/h3&gt;
&lt;p&gt;Com hem comentat abans, crearem una taula addicional per enllaçar els
clients especials amb el seu comercial associat&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;VIP_COMERCIAL&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id_client&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;REFERENCES&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;id_comercial&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;REFERENCES&lt;/span&gt; &lt;span class="n"&gt;COMERCIALS&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="la-taula-comandes"&gt;
&lt;h3&gt;La taula COMANDES&lt;/h3&gt;
&lt;p&gt;La taula COMANDES presenta una particularitat: la clau forana.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;COMANDES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;PRIMARY&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;id_client&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;REFERENCES&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;data_comanda&lt;/span&gt; &lt;span class="k"&gt;TIMESTAMP&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;carrer&lt;/span&gt; &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;codi_postal&lt;/span&gt; &lt;span class="nb"&gt;VARCHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;ciutat&lt;/span&gt; &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;pais&lt;/span&gt; &lt;span class="nb"&gt;TEXT&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En quan a la data, fixa't que apareix com a TIMESTAMP. És una manera
eficient de guardar les dates (incloent l'hora) i PostGreSQL ens
ofereix diferents funcions per a tractar aquest tipus. Mira el &lt;a class="reference external" href="http://www.postgresql.org/docs/9.1/static/datatype-datetime.html"&gt;manual
de TIMESTAMP&lt;/a&gt;
per més detalls.&lt;/p&gt;
&lt;p&gt;També fixat que aquesta taula també es veu obligada a disposar de
camps per cada element que forma una adreça. Probablement aquesta
sigui la mateixa que la del client, però de vegades els clients tenen
una adreça diferent per lliurar que per facturar.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-la-taula-productes"&gt;
&lt;h3&gt;Exercici 2. La taula PRODUCTES&lt;/h3&gt;
&lt;p&gt;Implementa la taula PRODUCTES. Considera únicament que el estoc és un
INTEGER i el preu un NUMERIC(10,2) que implica valors fins a 10 dígits
(comptant decimals) i fins a dos posicions decimals.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="la-taula-amb-les-linies-de-comanda"&gt;
&lt;h3&gt;La taula amb les línies de comanda&lt;/h3&gt;
&lt;p&gt;La taula LINIES_COMANDA presenta una altra particularitat, una clau
primària composta. Ho podem indicar de la següent manera:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;LINIES_COMANDA&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id_comanda&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;REFERENCES&lt;/span&gt; &lt;span class="n"&gt;COMANDES&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;id_producte&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;REFERENCES&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="k"&gt;PRIMARY&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id_comanda&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="afegim-productes"&gt;
&lt;h3&gt;Afegim productes&lt;/h3&gt;
&lt;p&gt;Inserim ara algunes dades a la taula PRODUCTES&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10001&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;producte nr. 10001&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;101&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;01&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10002&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;producte nr. 10002&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;102&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10003&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;producte nr. 10003&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;103&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10004&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;producte nr. 10004&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;104&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10005&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;producte nr. 10005&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;105&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;05&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10006&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;producte nr. 10006&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;106&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10007&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;producte nr. 10007&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;107&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;07&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10008&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;producte nr. 10008&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;108&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;08&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't com els strings apareixen envoltats amb cometes simples, i els
preus separen els decimals amb punt.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-alguns-clients"&gt;
&lt;h3&gt;Exercici 3. Alguns clients&lt;/h3&gt;
&lt;p&gt;Afegeix uns quants clients. Assegura't que hi apareixen al menys els
clients amb identificador 20001 i 20002.&lt;/p&gt;
&lt;p&gt;Intenta posar dades diferents per a cada camp de cada client. Això
facilitarà molt les proves que facis.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-algunes-comandes"&gt;
&lt;h3&gt;Exercici 4. Algunes comandes&lt;/h3&gt;
&lt;p&gt;Inserirem ara algunes comandes. En concret, volem com a mínim tres.
Una pel client 20001 i dues pel client 20002.&lt;/p&gt;
&lt;p&gt;Aquí tens la primera &amp;quot;de regal&amp;quot;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;COMANDES&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;30001&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;20001&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;2013-01-01 12:01:01&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't com introdueix la data. En realitat PostGreSQL accepta molts
formats per introduir dates. Fem servir aquest perquè resulta clar.&lt;/p&gt;
&lt;p&gt;Per altra banda, està inserint el valor NULL als camps de l'adreça.
Podem suposar que l'aplicació que faci servir aquesta base de dades
considerarà que NULL aquí implica la mateixa adreça que apareix al
client.&lt;/p&gt;
&lt;p&gt;Completa les insercions que falten. Intenta que al menys una d'elles
no correspongui a la mateixa adreça (és a dir, no contingui NULLs)&lt;/p&gt;
&lt;p&gt;Finalment afegeix algunes línies de comanda per cada comanda, de
manera que tinguis comandes amb una, dues i més de dues línies. Ja
que tens prou productes, intenta no repetir-ne cap a una mateixa
comanda.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-alguns-clients-vip"&gt;
&lt;h3&gt;Exercici 5. Alguns clients VIP&lt;/h3&gt;
&lt;p&gt;Insereix un comercial amb identificador 40001 i associa'l al client
20001.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="algunes-consultes"&gt;
&lt;h3&gt;Algunes consultes&lt;/h3&gt;
&lt;p&gt;En el model relacional, les consultes (&lt;em&gt;queries&lt;/em&gt;) es realitzen amb la
commanda SELECT.&lt;/p&gt;
&lt;p&gt;Alguns exemples:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Llista de les quantitats de producte que ha comprat els tres clients
que més n'han comprat:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="k"&gt;c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;client&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;producte&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;quantitat&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="k"&gt;c&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;COMANDES&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;cmd&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;LINIES_COMANDA&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;
&lt;span class="k"&gt;WHERE&lt;/span&gt;   &lt;span class="k"&gt;c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;id_client&lt;/span&gt;        &lt;span class="k"&gt;AND&lt;/span&gt;
        &lt;span class="n"&gt;cmd&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id_comanda&lt;/span&gt;   &lt;span class="k"&gt;AND&lt;/span&gt;
        &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id_producte&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;
&lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="k"&gt;DESC&lt;/span&gt;
&lt;span class="k"&gt;LIMIT&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Llista de l'import total que cada client ha comprat&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="k"&gt;c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;client&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;preu&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="k"&gt;c&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;COMANDES&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;cmd&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;LINIES_COMANDA&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;
&lt;span class="k"&gt;WHERE&lt;/span&gt;   &lt;span class="k"&gt;c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;id_client&lt;/span&gt;        &lt;span class="k"&gt;AND&lt;/span&gt;
        &lt;span class="n"&gt;cmd&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id_comanda&lt;/span&gt;   &lt;span class="k"&gt;AND&lt;/span&gt;
        &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id_producte&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;
&lt;span class="k"&gt;GROUP&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="k"&gt;c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;llista de clients amb més d'una comanda&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;  &lt;span class="k"&gt;SELECT&lt;/span&gt;  &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39; &amp;#39;&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;cognoms&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;client&lt;/span&gt;
  &lt;span class="k"&gt;FROM&lt;/span&gt;    &lt;span class="n"&gt;clients&lt;/span&gt;
  &lt;span class="k"&gt;WHERE&lt;/span&gt;   &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="k"&gt;IN&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
              &lt;span class="k"&gt;SELECT&lt;/span&gt;   &lt;span class="n"&gt;id_client&lt;/span&gt;
              &lt;span class="k"&gt;FROM&lt;/span&gt;     &lt;span class="n"&gt;comandes&lt;/span&gt;
              &lt;span class="k"&gt;GROUP&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;id_client&lt;/span&gt;
              &lt;span class="k"&gt;HAVING&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
          &lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="n"&gt;Fixa&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;t en l&amp;#39;&lt;/span&gt;&lt;span class="err"&gt;ú&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="n"&gt;de&lt;/span&gt; &lt;span class="o"&gt;``||``&lt;/span&gt; &lt;span class="n"&gt;per&lt;/span&gt; &lt;span class="n"&gt;concatenar&lt;/span&gt; &lt;span class="n"&gt;strings&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Llista dels clients VIPs amb el seu comercial associat&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;  &lt;span class="n"&gt;CLIENTS&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cognoms&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;, &amp;#39;&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;client&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;COMERCIALS&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt;    &lt;span class="n"&gt;CLIENTS&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;COMERCIALS&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;VIP_COMERCIAL&lt;/span&gt;
&lt;span class="k"&gt;WHERE&lt;/span&gt;   &lt;span class="n"&gt;CLIENTS&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;VIP_COMERCIAL&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id_client&lt;/span&gt;
  &lt;span class="k"&gt;AND&lt;/span&gt;   &lt;span class="n"&gt;COMERCIALS&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;VIP_COMERCIAL&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id_comercial&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-els-clients-de-barcelona"&gt;
&lt;h3&gt;Exercici 6. Els clients de Barcelona&lt;/h3&gt;
&lt;p&gt;Dissenya una consulta que retorni totes les dades dels clients de la
ciutat de Barcelona.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-els-clients-amb-un-segon-telefon"&gt;
&lt;h3&gt;Exercici 7. Els clients amb un segon telèfon&lt;/h3&gt;
&lt;p&gt;Dissenya una consulta que retorni totes les dades dels clients que
tinguin definit el segon telèfon (camp &lt;em&gt;telefon_2&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Atenció&lt;/em&gt;: considerarem que un telèfon no està definit per un de dos
motius: perquè valgui NULL o pergue valgui la cadena buida ('').&lt;/p&gt;
&lt;p&gt;Pista: &lt;em&gt;IS [NOT] NULL&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-8-adreces-diferents"&gt;
&lt;h3&gt;Exercici 8. Adreces diferents&lt;/h3&gt;
&lt;p&gt;Dissenya una consulta que retorni totes les comandes que tinguin
l'adreça de lliurament diferent de la de facturació del client
corresponent.&lt;/p&gt;
&lt;p&gt;La consulta tornarà només els identificadors de client i de comanda.
El resultat generat reanomenarà els resultats amb &lt;em&gt;client_nr&lt;/em&gt; i
&lt;em&gt;comanda_nr&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Pista: &lt;em&gt;AS&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-9-el-millor-client"&gt;
&lt;h3&gt;Exercici 9. ★ El millor client&lt;/h3&gt;
&lt;p&gt;Dissenya una consulta que retorni el nom i cognoms del client que ens
hagi fet més despesa (import total de totes les seves comandes).&lt;/p&gt;
&lt;p&gt;Nota: aquesta consulta és una mica més complexa que les anteriors, eh?&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-el-producte-mes-comprat"&gt;
&lt;h3&gt;Exercici 10. ★ El producte més comprat&lt;/h3&gt;
&lt;p&gt;Dissenya una consulta que retorni el nom del producte més comprat.&lt;/p&gt;
&lt;p&gt;Nota: aquesta consulta és també una mica més complexa, eh?&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-11-modifiquem-dades"&gt;
&lt;h3&gt;Exercici 11. Modifiquem dades&lt;/h3&gt;
&lt;p&gt;Defineix una comanda que modifiqui el segon telèfon i el codi postal
del client 20001 a les dades teves.&lt;/p&gt;
&lt;p&gt;Encara que no te'n recordis de la sintaxi concreta, no t'hauria de ser
difícil de trobar.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-12-eliminem-dades"&gt;
&lt;h3&gt;Exercici 12. Eliminem dades&lt;/h3&gt;
&lt;p&gt;Defineix una comanda sql que elimini tots els productes que no
apareguin a cap comanda i tinguin un preu superior a 10.07.&lt;/p&gt;
&lt;p&gt;Encara que no te'n recordis de la sintaxi concreta, no t'hauria de ser
difícil de trobar.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-13-comandes-dificils"&gt;
&lt;h3&gt;Exercici 13. Comandes difícils&lt;/h3&gt;
&lt;p&gt;Defineix les especificacions d'un mínim de 5 comandes sql &lt;strong&gt;no
trivials&lt;/strong&gt; sobre aquest model de dades, i proporciona al menys una
solució per cadascuna.&lt;/p&gt;
&lt;p&gt;Crea un informe en el que aparegui el contingut de les diferents
taules implicades a les teves comandes i, per cadascuna, indica
quina és la sortida que t'ha donat.&lt;/p&gt;
&lt;p&gt;Et poso exemples d'algunes especificacions de companys anteriors. No
t'hi has de basar, però potser et serveixen d'inspiració
&lt;a class="footnote-reference" href="#potserlesteves" id="id5"&gt;[5]&lt;/a&gt;.&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;id del client que ha comprat més productes diferents (productes amb
diferent id)&lt;/li&gt;
&lt;li&gt;comptar quantes comandes tenen més d'una linia de comanda.&lt;/li&gt;
&lt;li&gt;Algunes comandes tenen camps de direcció buit i volem completar-los
per tant caldrà obtenir la informació del client.  Volem el nom,
cognom i tractament (en un format més llegible) i telefons dels
clients que tinguin alguna comanda amb algun camp buit, inclourem la
id de la comanda també.  Cal endreçar els resultats per la id del
client i en cas de tenir més d'una comanda per client, per la id de
comanda.&lt;/li&gt;
&lt;li&gt;Mostra el nom del comercial i la suma dels diners gastats pels
clients de cada comercial durant els últims 30 dies endreçats de mes
a menys.&lt;/li&gt;
&lt;li&gt;Mostrar els clients (id i ciutat) que hagin comprat menys de 6
unitats (o cap unitat) de productes que valguin menys de 5€. Cal
mostrar també aquells clients que no hagin comprat cap unitat de
productes de menys de 5€.&lt;/li&gt;
&lt;li&gt;Som el responsable de l'empresa. Les nostres ventes estan baixant i
els plans d'acció que hem aplicat no han donat resultat. Hem de
començar a pensar en reduir la nostra plantilla de comercials. És
per això que es demana una query que ens retorni: els comercials (id
i nom complet) que tinguin clients que que no hagin fet cap compra
en la darrera setmana, i també els comercials amb clients que hagin
fet compres en la darrera setmana però l'import total de totes les
compres no superi els 50€.&lt;/li&gt;
&lt;li&gt;Presentar en dos registros en formato horizontal.  En el primer
registro mostrar cuantos productos se han vendido con el precio
mayor que la media de los productos vendidos. En el caso de
encontrar más de una vez el mismo producto solo se contará una vez.
En el segundo registro presentar todos los datos de la tabla
&amp;quot;productes&amp;quot;, de aquellos productos seleccionados en el primer caso.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-14-opcional-les-consultes-d-anys-anteriors"&gt;
&lt;h3&gt;Exercici 14. (opcional) Les consultes d'anys anteriors&lt;/h3&gt;
&lt;p&gt;Prova de resoldre les consultes dels companys d'anys anteriors.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="exempleclassic" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Sí, es tracta de l'exemple clàssic que segurament
ja has trobat a més d'un lloc. Recorda, és més fàcil entendre nous
conceptes fent servir contexts coneguts.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="convencioder" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;En aquest document es fan servir algunes
convencions en els noms per evitar confusions amb la modelització en
classes. En particular, els noms de les entitats/taules apareix en
majúscules i plural (CLIENTS implica una taula que conté un conjunt
de clients) A banda, les claus primàries a cada entitat es diuen
simplement &lt;em&gt;id&lt;/em&gt; mentre que les forànees porten com a sufix el nom
de l'entitat (aquest cop en singular i minúscules)&lt;/p&gt;
&lt;p class="last"&gt;Trobaràs defensors de diferents convencions, i potser tu ja tens la
teva manera favorita d'anomenar les coses. Et recomano però que, al
menys per serguir aquests exemples, facis servir aquestes
que et proposo.&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="alternativesherencia" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si en comptes d'una referència a una altra
entitat, haguéssim hagut simplement de posar un valor com ara un
string amb el nom del comercial, o bé només ens calgués aquí les
dades del comercial (no hi hagués cap altra taula amb una una
forana a COMERCIALS) ho haguéssim resolt segurament amb valors
nuls.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="compteambheretats" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Amb la versió que estem fent servir aquí, és
possible que no funcioni automàticament amb casos menys provats com
per exemple amb l'herència.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="potserlesteves" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[5]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Potser et pensaràs que són les consultes més
&lt;em&gt;xungues&lt;/em&gt; que em van lliurar. En realitat les he escollides a
l'atzar! T'imagines mirar d'aquí uns anys aquests materials i
trobar-te una de les teves consultes?&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="PostGreSQL"></category></entry><entry><title>Comparació models relacional i objecte-relacionals (segona part)</title><link href="http://apuntstecnics.herokuapp.com/comparacio-models-relacional-i-objecte-relacionals-segona-part.html" rel="alternate"></link><updated>2015-04-11T22:15:38+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-04-11:comparacio-models-relacional-i-objecte-relacionals-segona-part.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document correspon a la segona part de la comparació entre els
models relacionals i Objecte-relacional (mira la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/comparacio-models-relacional-i-objecte-relacionals-primera-part.html"&gt;primera part&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;En aquesta segona part, es tracta la perspectiva Objecte-Relacional.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="model-objecte-relacional"&gt;
&lt;h2&gt;Model Objecte-Relacional&lt;/h2&gt;
&lt;p&gt;A la secció anterior hem fet un petit repàs de les possibilitats que
&lt;em&gt;PostGreSQL&lt;/em&gt; ens ofereix com a SGBD relacional. En aquesta considerarem
algunes de les possibilitats que ens ofereix com a SGBD
objecte-relacional.&lt;/p&gt;
&lt;p&gt;Excepte per lleugeres diferències, l'apartat anterior seria comú a
altres SBGDs que hi ha al mercat, com ara Oracle. A partir d'ara, les
diferències s'amplifiquen fins a trobar-nos que els diferents SGBDs
que s'auto denominen Objecte-Relacionals presenten una diversitat
d'interpretacions que de vegades no tenen ni traducció als altres.&lt;/p&gt;
&lt;div class="section" id="el-model-des-de-la-perspectiva-oo"&gt;
&lt;h3&gt;El model des de la perspectiva OO&lt;/h3&gt;
&lt;p&gt;El següent diagrama de classes UML mostra una possible representació
del model anterior en forma de classes.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Possible diagrama de classes del cas d'estudi" src="http://apuntstecnics.herokuapp.com/images/postgresql005.img002.uml.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Algunes de les diferències més notables són:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;En comptes de representar les diferents parts que formen una adreça
en forma de camps no relacionats dins de diferents taules, el model
OO agrupa aquestes dades i manega el concepte d'&lt;em&gt;adreça&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;El model relacional ja podria haver fet quelcom similar, tot
definint una entitat ADRECES i fent que les taules usuàries CLIENTS
i COMMANDES en fessin referència.&lt;/p&gt;
&lt;p&gt;Amb tot, una adreça ens apareix de manera natural com un tipus de
dades, encara que compost, com podria ser una data.&lt;/p&gt;
&lt;p&gt;Cada SGBDOR ofereix mecanismes per definir aquests tipus de dades
definits per l'usuari (&lt;em&gt;UDT&lt;/em&gt;: &lt;em&gt;User Defined Type&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;Per altra banda, tot i que el model inicial ens forçava a definir
tota la informació del carrer en una única línia, de vegades algunes
adreces són més complicades i requereixen més d'una línia. Una
llista de línies de carrer ens permetria més comoditat a l'hora de
d'emmagatzemar aquestes dades. Novament, el model relacional ens
permetria fer-ho per exemple separant el contingut de cada línia per
un caràcter especial (ex. &lt;tt class="docutils literal"&gt;\n&lt;/tt&gt;). Encara que efectiva, no és una
manera còmoda ni per guardar-la ni per usar-la posteriorment.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El cas de la llista de telèfons és un cas similar al de les línies
d'especificació del carrer, en aquest cas, però, sembla que cada
element té una mica més d'entitat per separat. Al cap i a la fi,
normalment voldrem mostrar juntes totes les línies del carrer,
mentre que cada telèfon podria tenir un ús especial.&lt;/p&gt;
&lt;p&gt;Ho podríem &amp;quot;arreglar&amp;quot; des de la perspectiva purament relacional,
definint dues noves taules (TELEFONS i TELEFONS_CLIENT) de manera
que TELEFONS_CLIENT emmagatzemés la relació M:N entre CLIENTS i
TELEFONS. Complex, oi?&lt;/p&gt;
&lt;p&gt;Una de les crítiques que rep el model relacional és que obliga a
crear un munt d'entitats que no corresponen a cap concepte de la
realitat, només per a permetre normalitzar les dades.&lt;/p&gt;
&lt;p&gt;En el model de classes proposat, aprofitant que disposem de la
classe Telèfon, podem afegir més informació com ara el prefix del
país i el tipus de telèfon (mòbil, fax, fix, ...)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Les dades que formen part del nom del client (tractament, nom i
cognoms) són un cas similar al de l'adreça i el telèfon.&lt;/p&gt;
&lt;p&gt;Respecte el tractament, ara fa servir un enumerat per controlar la
validesa  Amb el model relacional hauríem pogut crear una taula amb
els diferents valors possibles i fer una clau forana des de CLIENTS.
Tota una taula per poc més de quatre valors...&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Les entitats principals CLIENTS, COMANDES i PRODUCTES es
converteixen en classes en un model purament orientat a objectes.
Malauradament els SGBDORs en general, i &lt;em&gt;PostGreSQL&lt;/em&gt; en particular,
encara no ofereixen mecanismes prou còmodes per implementar
relacions d'agregació. Per més detalls, considera l'anàlisi de
&lt;a class="citation-reference" href="#eessaar" id="id1"&gt;[Eessaar]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Tot plegat, per les entitats principals aquest document no
considerarà la implementació a la base de dades en forma de UDT sinó
com a taules estàndard.&lt;/p&gt;
&lt;p&gt;Com a norma general, et proposo que consideris la definició d'un nou
tipus per a aquells conceptes què puguis voler manipular de la
manera que ho fas amb un String. Fixa't que amb un String potser
pots tenir interès en les parts individuals (caràcters) que el
formen, però probablement no t'interessarà disposar d'una taula amb
tots els strings que facin servir la resta d'entitats. En tot cas,
aquesta serà l'aproximació que prenem en aquest document.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;La taula amb les línies de comanda, és un artifici que sovint ens
veiem forçats a muntar en el model Relacional per definir relacions
M:N.&lt;/p&gt;
&lt;p&gt;Potser resultaria molt més natural poder disposar d'una llista de
línies de comanda &lt;em&gt;dins&lt;/em&gt; de cada comanda.&lt;/p&gt;
&lt;p&gt;En aquest cas, ens caldria definir un tipus compost que contindria
una clau forana a PRODUCTES. El problema està en que, a hores d'ara,
&lt;em&gt;PostGreSQL&lt;/em&gt; no ofereix la possibilitat d'indicar restriccions en els
UDTs. Per aquesta raó, haurem de mantenir la taula LINIES−COMANDA.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El cas dels clients VIP, en un model orientat a objectes es podria
resoldre amb una relació d'herència. Un client VIP és una extensió
d'un client estàndard. Amb el model relacional ens havíem vist
obligats a crear una taula intermèdia per evitar claus foranies
nul·les en cas de clients estàndard &lt;a class="footnote-reference" href="#nocaliaherencia" id="id2"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;El DER resultant el representa el següent diagrama:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama d'entitat-relació amb objecte-relacional" src="http://apuntstecnics.herokuapp.com/images/postgresql005.img003.der_or.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="l-enumerat-pel-tractament"&gt;
&lt;h3&gt;L'enumerat pel tractament&lt;/h3&gt;
&lt;p&gt;Podem definir l'enumeració Tractament de la següent manera&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TYPE&lt;/span&gt; &lt;span class="n"&gt;Tractament&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;ENUM&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;Sr.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;Sra.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;Srta.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;Dr.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;Dra.&amp;#39;&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Podem consultar els detalls del tipus amb&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\d&lt;/span&gt;T+ tractament
                         List of data types
 Schema &lt;span class="p"&gt;|&lt;/span&gt;    Name    &lt;span class="p"&gt;|&lt;/span&gt; Internal name &lt;span class="p"&gt;|&lt;/span&gt; Size &lt;span class="p"&gt;|&lt;/span&gt; Elements &lt;span class="p"&gt;|&lt;/span&gt; Description
--------+------------+---------------+------+----------+-------------
 public &lt;span class="p"&gt;|&lt;/span&gt; tractament &lt;span class="p"&gt;|&lt;/span&gt; tractament    &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;4&lt;/span&gt;    &lt;span class="p"&gt;|&lt;/span&gt; Sr.     +&lt;span class="p"&gt;|&lt;/span&gt;
        &lt;span class="p"&gt;|&lt;/span&gt;            &lt;span class="p"&gt;|&lt;/span&gt;               &lt;span class="p"&gt;|&lt;/span&gt;      &lt;span class="p"&gt;|&lt;/span&gt; Sra.    +&lt;span class="p"&gt;|&lt;/span&gt;
        &lt;span class="p"&gt;|&lt;/span&gt;            &lt;span class="p"&gt;|&lt;/span&gt;               &lt;span class="p"&gt;|&lt;/span&gt;      &lt;span class="p"&gt;|&lt;/span&gt; Srta.   +&lt;span class="p"&gt;|&lt;/span&gt;
        &lt;span class="p"&gt;|&lt;/span&gt;            &lt;span class="p"&gt;|&lt;/span&gt;               &lt;span class="p"&gt;|&lt;/span&gt;      &lt;span class="p"&gt;|&lt;/span&gt; Dr.     +&lt;span class="p"&gt;|&lt;/span&gt;
        &lt;span class="p"&gt;|&lt;/span&gt;            &lt;span class="p"&gt;|&lt;/span&gt;               &lt;span class="p"&gt;|&lt;/span&gt;      &lt;span class="p"&gt;|&lt;/span&gt; Dra.     &lt;span class="p"&gt;|&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; row&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-l-enumerat-pel-tipus-de-telefon"&gt;
&lt;h3&gt;Exercici 1. L'enumerat pel tipus de telèfon&lt;/h3&gt;
&lt;p&gt;Et toca a tu definir l'enumerat pels diferents tipus de telèfon.
Anomena l'enumerat com a &lt;tt class="docutils literal"&gt;TipusTelefon&lt;/tt&gt;. L'enumerat hauria de
contenir, com a mínim els valors &lt;tt class="docutils literal"&gt;mòbil&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;fax&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;fix&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="el-tipus-telefon"&gt;
&lt;h3&gt;El tipus Telèfon&lt;/h3&gt;
&lt;p&gt;Podem definir el nou tipus (classe) Telefon fent servir el concepte de
dades compostes de &lt;em&gt;PostGreSQL&lt;/em&gt;, de la següent manera&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TYPE&lt;/span&gt; &lt;span class="n"&gt;Telefon&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;tipus&lt;/span&gt;   &lt;span class="n"&gt;TipusTelefon&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;pref&lt;/span&gt;    &lt;span class="nb"&gt;VARCHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;num&lt;/span&gt;     &lt;span class="nb"&gt;VARCHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest cas, podem tornar a veure els detalls del nou tipus de la mateixa
manera que consultàvem els detalls d'una taula:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\d&lt;/span&gt; Telefon
      Composite &lt;span class="nb"&gt;type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;public.telefon&amp;quot;&lt;/span&gt;
 Column &lt;span class="p"&gt;|&lt;/span&gt;         Type          &lt;span class="p"&gt;|&lt;/span&gt; Modifiers
--------+-----------------------+-----------
 tipus  &lt;span class="p"&gt;|&lt;/span&gt; tipustelefon          &lt;span class="p"&gt;|&lt;/span&gt;
 pref   &lt;span class="p"&gt;|&lt;/span&gt; character varying&lt;span class="o"&gt;(&lt;/span&gt;4&lt;span class="o"&gt;)&lt;/span&gt;  &lt;span class="p"&gt;|&lt;/span&gt;
 num    &lt;span class="p"&gt;|&lt;/span&gt; character varying&lt;span class="o"&gt;(&lt;/span&gt;16&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que estem fent servir &lt;em&gt;TipusTelefon&lt;/em&gt; directament com el tipus de
dades de la propietat &lt;em&gt;tipus&lt;/em&gt; de &lt;em&gt;Telefon&lt;/em&gt;. Fàcil no?&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-el-tipus-denominacio"&gt;
&lt;h3&gt;Exercici 2. El tipus Denominació&lt;/h3&gt;
&lt;p&gt;Defineix la classe &lt;em&gt;Denominacio&lt;/em&gt;. Fixa't que conté un enumerat definit
per nosaltres.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-el-tipus-adreca"&gt;
&lt;h3&gt;Exercici 3. El tipus Adreça&lt;/h3&gt;
&lt;p&gt;Defineix la classe &lt;em&gt;Adressa&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Aquesta classe presenta la particularitat de l'array de strings al
carrer. Llegeix la següent secció sobre la taula de CLIENTS per
&lt;em&gt;inspirar-te&lt;/em&gt; en com crear el nou tipus.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="la-taula-clients"&gt;
&lt;h3&gt;La taula CLIENTS&lt;/h3&gt;
&lt;p&gt;Ara que ja disposem dels nous tipus, tornarem a declarar la taula
CLIENTS de la següent forma:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;clients&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;PRIMARY&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="n"&gt;Denominacio&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;adr&lt;/span&gt; &lt;span class="n"&gt;Adressa&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;telefons&lt;/span&gt; &lt;span class="n"&gt;Telefon&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't en l'ús dels nous tipus, incloent l'array de telèfons.&lt;/p&gt;
&lt;p&gt;Nota: segurament et serà més còmode eliminar la versió anterior de la
taula (&lt;tt class="docutils literal"&gt;DROP TABLE CLIENTS&lt;/tt&gt;) que intentar modificar-la a base de
&lt;tt class="docutils literal"&gt;ALTER TABLE&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-la-taula-comandes"&gt;
&lt;h3&gt;Exercici 4. La taula COMANDES&lt;/h3&gt;
&lt;p&gt;Defineix la taula COMANDES de manera que ara disposi dels nous tipus
que hem creat.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-la-taula-comercials"&gt;
&lt;h3&gt;Exercici 5. La taula COMERCIALS&lt;/h3&gt;
&lt;p&gt;Defineix la taula COMERCIALS.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="la-taula-clients-vip"&gt;
&lt;h3&gt;La taula CLIENTS_VIP&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;PostGreSQL&lt;/em&gt; ens ofereix la possibilitat d'especificar una relació
d'herència entre dues entitats amb la clau &lt;em&gt;INHERITS&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per implementar l'herència podem fer:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;CLIENTS_VIP&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id_comercial&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;REFERENCES&lt;/span&gt; &lt;span class="n"&gt;COMERCIALS&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;INHERITS&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CLIENTS&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't què passa si fas:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\d&lt;/span&gt; clients_vip
       Table &lt;span class="s2"&gt;&amp;quot;public.clients_vip&amp;quot;&lt;/span&gt;
    Column    &lt;span class="p"&gt;|&lt;/span&gt;    Type     &lt;span class="p"&gt;|&lt;/span&gt; Modifiers
--------------+-------------+-----------
 id           &lt;span class="p"&gt;|&lt;/span&gt; integer     &lt;span class="p"&gt;|&lt;/span&gt; not null
 nom          &lt;span class="p"&gt;|&lt;/span&gt; denominacio &lt;span class="p"&gt;|&lt;/span&gt;
 adr          &lt;span class="p"&gt;|&lt;/span&gt; adressa     &lt;span class="p"&gt;|&lt;/span&gt;
 telefons     &lt;span class="p"&gt;|&lt;/span&gt; telefon&lt;span class="o"&gt;[]&lt;/span&gt;   &lt;span class="p"&gt;|&lt;/span&gt;
 id_comercial &lt;span class="p"&gt;|&lt;/span&gt; integer     &lt;span class="p"&gt;|&lt;/span&gt;
Foreign-key constraints:
    &lt;span class="s2"&gt;&amp;quot;clients_vip_id_comercial_fkey&amp;quot;&lt;/span&gt; FOREIGN KEY &lt;span class="o"&gt;(&lt;/span&gt;id_comercial&lt;span class="o"&gt;)&lt;/span&gt; REFERENCES comercials&lt;span class="o"&gt;(&lt;/span&gt;id&lt;span class="o"&gt;)&lt;/span&gt;
Inherits: clients
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A CLIENTS_VIP els apareix &lt;strong&gt;tots&lt;/strong&gt; els camps de CLIENTS.&lt;/p&gt;
&lt;p&gt;Malauradament l'herència a la versió que estem fent servir de
&lt;em&gt;PostGreSQL&lt;/em&gt; no està completament suportada. La taula que estén &lt;strong&gt;no
hereta&lt;/strong&gt; restriccions com ara la clau primària i les claus foranes.
Això fa que es pugui produir situacions &lt;em&gt;aberrants&lt;/em&gt; com que dos
clients puguin tenir el mateix identificador, o bé que no es pugui
crear una comanda per un client vip malgrat l'identificador d'aquest
sembla existir segons les &lt;em&gt;selects&lt;/em&gt;. En aquests materials simplement
ignorarem el problema, però caldrà que el tinguis en compte en cas
que tinguis interès en fer servir aquesta funcionalitat en producció.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="inserir-clients"&gt;
&lt;h3&gt;Inserir clients&lt;/h3&gt;
&lt;p&gt;La inserció de clients, com és d'esperar, requerirà alguns canvis.
Així la inserció tindria un aspecte similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt;
&lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10001&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="k"&gt;ROW&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Sr.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Pepito&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Grillo&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="k"&gt;ROW&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;ARRAY&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;C/ Càspita, nr.1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Polígon Industrial Guarapunzo&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
            &lt;span class="s1"&gt;&amp;#39;08080&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Alifardi&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Guinea Bisau&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="k"&gt;CAST&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
                &lt;span class="nb"&gt;ARRAY&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;ROW&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;mòbil&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;0034&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;933333333&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                      &lt;span class="k"&gt;ROW&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;fax&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;0034&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;933333334&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
                &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;Telefon&lt;/span&gt;&lt;span class="p"&gt;[])&lt;/span&gt;
       &lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;per introduir un valor d'un tipus complex, ho farem mitjançant la
paraula clau &lt;tt class="docutils literal"&gt;ROW&lt;/tt&gt; seguida, entre parèntesis, dels valors dels
diferents camps del tipus separats amb coma.&lt;/p&gt;
&lt;p&gt;En molts casos, podem obviar la paraula &lt;tt class="docutils literal"&gt;ROW&lt;/tt&gt;. Mira la &lt;a class="reference external" href="http://www.postgresql.org/docs/9.1/static/sql-expressions.html#SQL-SYNTAX-ROW-CONSTRUCTORS"&gt;secció
4.2.13 del manual&lt;/a&gt;
per més detalls.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;de manera similar, per introduir un array farem servir la paraula
clau &lt;tt class="docutils literal"&gt;ARRAY&lt;/tt&gt; seguida, entre claudàtors, pels diferents elements
que conformen l'array tot separant-los amb coma.&lt;/p&gt;
&lt;p&gt;També aquí disposem d'una versió més compacta, expressant els valors
de l'array entre claus (&lt;tt class="docutils literal"&gt;{}&lt;/tt&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;en el cas de l'array de telèfons, ens caldrà fer un &lt;em&gt;cast&lt;/em&gt; per
indicar a &lt;em&gt;PostGreSQL&lt;/em&gt; de quin tipus de dades està format l'array.
Això ho fem amb &lt;tt class="docutils literal"&gt;CAST( &lt;span class="pre"&gt;«...»&lt;/span&gt; AS &lt;span class="pre"&gt;Telefon[])&lt;/span&gt;&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Novament &lt;em&gt;PostGreSQL&lt;/em&gt; ens ofereix una manera més compacta
d'escriure-ho amb l'operador de cast &lt;tt class="docutils literal"&gt;::&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Les possibilitats de compactació que ens ofereix el &lt;em&gt;PostGreSQL&lt;/em&gt; fan una
mica més críptiques les expressions. Això fa que no siguin gaire
adequades en un primer contacte amb el SGBD.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-algunes-comandes"&gt;
&lt;h3&gt;Exercici 6. Algunes comandes&lt;/h3&gt;
&lt;p&gt;Insereix les dades necessàries per que quedin enregistrades les
comandes de tres clients.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-alguns-comercials"&gt;
&lt;h3&gt;Exercici 7. Alguns comercials&lt;/h3&gt;
&lt;p&gt;Insereix alguns comercials. Ens caldrà al menys un amb l'id 40001.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="inserir-clients-vip"&gt;
&lt;h3&gt;Inserir clients VIP&lt;/h3&gt;
&lt;p&gt;La inserció de clients VIP, malgrat hem definit la taula com una
extensió de clients, és molt similar a la inserció a una taula
&lt;em&gt;convencional&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;CLIENTS_VIP&lt;/span&gt;
&lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10002&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="k"&gt;ROW&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Sra.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Pepita&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Grilla&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="k"&gt;ROW&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;ARRAY&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;C/ Càspita, nr.2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Polígon Industrial Guarapunzo&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
            &lt;span class="s1"&gt;&amp;#39;08080&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Alifardi&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Guinea Bisau&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="nb"&gt;ARRAY&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;ROW&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;mòbil&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;0034&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;933333335&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
              &lt;span class="k"&gt;ROW&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;fax&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;0034&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;933333336&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)]::&lt;/span&gt;&lt;span class="n"&gt;Telefon&lt;/span&gt;&lt;span class="p"&gt;[],&lt;/span&gt;
        &lt;span class="mi"&gt;40001&lt;/span&gt;
       &lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Un cop disposem d'aquest client VIP, podem comprovar què:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;es troba a CLIENTS_VIP&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT * FROM CLIENTS_VIP&lt;span class="p"&gt;;&lt;/span&gt;
  id   &lt;span class="p"&gt;|&lt;/span&gt;         nom          &lt;span class="p"&gt;|&lt;/span&gt;                                            adr                                             &lt;span class="p"&gt;|&lt;/span&gt;                     telefons                      &lt;span class="p"&gt;|&lt;/span&gt; id_comercial
-------+----------------------+--------------------------------------------------------------------------------------------+---------------------------------------------------+--------------
 &lt;span class="m"&gt;10002&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;Sra.,Pepita,Grilla&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;{&amp;quot;&amp;quot;C/ Càspita, nr.2&amp;quot;&amp;quot;,&amp;quot;&amp;quot;Polígon Industrial Guarapunzo&amp;quot;&amp;quot;}&amp;quot;&lt;/span&gt;,08080,Alifardi,&lt;span class="s2"&gt;&amp;quot;Guinea Bisau&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;(mòbil,0034,933333335)&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;(fax,0034,933333336)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;        40001
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; row&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;es troba a CLIENTS&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT * FROM CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
  id   &lt;span class="p"&gt;|&lt;/span&gt;         nom          &lt;span class="p"&gt;|&lt;/span&gt;                                            adr                                             &lt;span class="p"&gt;|&lt;/span&gt;                     telefons
-------+----------------------+--------------------------------------------------------------------------------------------+---------------------------------------------------
 &lt;span class="m"&gt;10001&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;Sr.,Pepito,Grillo&lt;span class="o"&gt;)&lt;/span&gt;  &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;{&amp;quot;&amp;quot;C/ Càspita, nr.1&amp;quot;&amp;quot;,&amp;quot;&amp;quot;Polígon Industrial Guarapunzo&amp;quot;&amp;quot;}&amp;quot;&lt;/span&gt;,08080,Alifardi,&lt;span class="s2"&gt;&amp;quot;Guinea Bisau&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;(mòbil,0034,933333333)&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;(fax,0034,933333334)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="m"&gt;10002&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;Sra.,Pepita,Grilla&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;{&amp;quot;&amp;quot;C/ Càspita, nr.2&amp;quot;&amp;quot;,&amp;quot;&amp;quot;Polígon Industrial Guarapunzo&amp;quot;&amp;quot;}&amp;quot;&lt;/span&gt;,08080,Alifardi,&lt;span class="s2"&gt;&amp;quot;Guinea Bisau&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;(mòbil,0034,933333335)&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;(fax,0034,933333336)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per cert, si volem saber només els clients que no són VIP, &lt;em&gt;PostGreSQL&lt;/em&gt;
ens ofereix &lt;tt class="docutils literal"&gt;ONLY&lt;/tt&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT * FROM ONLY CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
  id   &lt;span class="p"&gt;|&lt;/span&gt;         nom         &lt;span class="p"&gt;|&lt;/span&gt;                                            adr                                             &lt;span class="p"&gt;|&lt;/span&gt;                     telefons
-------+---------------------+--------------------------------------------------------------------------------------------+---------------------------------------------------
 &lt;span class="m"&gt;10001&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;Sr.,Pepito,Grillo&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;{&amp;quot;&amp;quot;C/ Càspita, nr.1&amp;quot;&amp;quot;,&amp;quot;&amp;quot;Polígon Industrial Guarapunzo&amp;quot;&amp;quot;}&amp;quot;&lt;/span&gt;,08080,Alifardi,&lt;span class="s2"&gt;&amp;quot;Guinea Bisau&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;(mòbil,0034,933333333)&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;(fax,0034,933333334)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; row&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Malauradament, com ja hem comentat, la implementació actual de
&lt;em&gt;PostGreSQL&lt;/em&gt; permet alguns usos no adequats. Per exemple, podrem inserir
un client vip amb un id ja disponible tant a CLIENTS com a
CLIENTS_VIP, donat que en realitat no disposem de cap clau primària a
CLIENTS_VIP. També podríem inserir només els camps de CLIENTS i
&lt;em&gt;PostGreSQL&lt;/em&gt; afegirà automàticament nulls als camps que faltin.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-8-alguns-clients-vip"&gt;
&lt;h3&gt;Exercici 8. Alguns clients VIP&lt;/h3&gt;
&lt;p&gt;Insereix un mínim de tres clients VIP.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="seleccionar-clients"&gt;
&lt;h3&gt;Seleccionar clients&lt;/h3&gt;
&lt;p&gt;Ja hem vist abans que podem accedir als camps de tipus complex i
d'array com amb qualsevol altre camp. Per exemple&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT nom FROM CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
         nom
----------------------
 &lt;span class="o"&gt;(&lt;/span&gt;Sr.,Pepito,Grillo&lt;span class="o"&gt;)&lt;/span&gt;
 &lt;span class="o"&gt;(&lt;/span&gt;Sra.,Pepita,Grilla&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't, però, que els valors dels atributs surten agrupats. Si els
volem separats, podem fer&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT &lt;span class="o"&gt;(&lt;/span&gt;nom&lt;span class="o"&gt;)&lt;/span&gt;.* FROM CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
  tr  &lt;span class="p"&gt;|&lt;/span&gt;  nom   &lt;span class="p"&gt;|&lt;/span&gt; cognoms
------+--------+---------
 Sr.  &lt;span class="p"&gt;|&lt;/span&gt; Pepito &lt;span class="p"&gt;|&lt;/span&gt; Grillo
 Sra. &lt;span class="p"&gt;|&lt;/span&gt; Pepita &lt;span class="p"&gt;|&lt;/span&gt; Grilla
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;De manera individual els seleccionarem indicant el nom de l'atribut&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT &lt;span class="o"&gt;(&lt;/span&gt;nom&lt;span class="o"&gt;)&lt;/span&gt;.cognoms &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;, &amp;#39;&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;nom&lt;span class="o"&gt;)&lt;/span&gt;.nom FROM CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
    ?column?
----------------
 Grillo, Pepito
 Grilla, Pepita
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En el cas dels arrays, podem accedir simplement amb&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT telefons FROM CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
                     telefons
---------------------------------------------------
 &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;(mòbil,0034,933333333)&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;(fax,0034,933333334)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;(mòbil,0034,933333335)&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;(fax,0034,933333336)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;O especificant un rang&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT telefons&lt;span class="o"&gt;[&lt;/span&gt;1:2&lt;span class="o"&gt;]&lt;/span&gt; FROM CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
                     telefons
---------------------------------------------------
 &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;(mòbil,0034,933333333)&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;(fax,0034,933333334)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;(mòbil,0034,933333335)&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;(fax,0034,933333336)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per defecte, els arrays es defineixen a partir del 1 i no del 0.&lt;/p&gt;
&lt;p&gt;Disposem d'algunes utilitats per saber les dimensions d'un array
&lt;a class="footnote-reference" href="#dimensions" id="id3"&gt;[2]&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; -- la longitut de l&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;array telèfons per la primera dimensió
&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT ARRAY_LENGTH&lt;span class="o"&gt;(&lt;/span&gt;telefons, 1&lt;span class="o"&gt;)&lt;/span&gt; FROM CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
 array_length
--------------
            2
            2
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; -- la posició superior per la primera dimensió
&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT ARRAY_UPPER&lt;span class="o"&gt;(&lt;/span&gt;telefons, 1&lt;span class="o"&gt;)&lt;/span&gt; FROM CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
 array_upper
-------------
           2
           2
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; -- la posició inferior per la primera dimensió
&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT ARRAY_LOWER&lt;span class="o"&gt;(&lt;/span&gt;telefons, 1&lt;span class="o"&gt;)&lt;/span&gt; FROM CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
 array_lower
-------------
           1
           1
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; -- les dimensions dels arrays
&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT ARRAY_DIMS&lt;span class="o"&gt;(&lt;/span&gt;telefons&lt;span class="o"&gt;)&lt;/span&gt; FROM CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
 array_dims
------------
 &lt;span class="o"&gt;[&lt;/span&gt;1:2&lt;span class="o"&gt;]&lt;/span&gt;
 &lt;span class="o"&gt;[&lt;/span&gt;1:2&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per exemple, la següent consulta ens retorna tots els clients amb 2 o
més telèfons&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt; &lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;ARRAY_LENGTH&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;telefons&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;La següent consulta mostra els clients pels que el seu darrer telèfon
és un fax&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt; &lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;telefons&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;ARRAY_LENGTH&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;telefons&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)]).&lt;/span&gt;&lt;span class="n"&gt;tipus&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;fax&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En cas que el que necessitem sigui cercar dins dels valors d'un array,
podem fer servir la funció &lt;tt class="docutils literal"&gt;unnest()&lt;/tt&gt; que ens expansiona els valors
de l'array en un conjunt de registres. Per exemple, la següent
consulta ens retorna tots aquells clients que tinguin fax&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="k"&gt;DISTINCT&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;UNNEST&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;telefons&lt;/span&gt;&lt;span class="p"&gt;)).&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;
      &lt;span class="k"&gt;FROM&lt;/span&gt;   &lt;span class="n"&gt;CLIENTS&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;INTERN&lt;/span&gt;
&lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;tipus&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;fax&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't com, en aquest exemple:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;extraiem els telèfons en files amb &lt;tt class="docutils literal"&gt;UNNEST()&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;com que els telèfons són de tipus complex, demanem que apareguin els
atributs com a columnes amb el &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;(«camp»).*&lt;/span&gt;&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;tot plegat ho definim com a l'origen de la consulta, que ara disposa
de les columnes: id, tipus, pref i num.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Trobaràs totes les possibilitats que t'ofereix &lt;em&gt;PostGreSQL&lt;/em&gt; a la secció
&lt;a class="reference external" href="http://www.postgresql.org/docs/9.1/static/arrays.html"&gt;8.14 Arrays&lt;/a&gt;
i un resum de les funcions i operadors amb arrays a la secció &lt;a class="reference external" href="http://www.postgresql.org/docs/9.1/static/functions-array.html"&gt;9-17.
Array Functions and Operators&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="modificar-un-valor-d-un-atribut"&gt;
&lt;h3&gt;Modificar un valor d'un atribut&lt;/h3&gt;
&lt;p&gt;Podem modificar els atributs d'un camp complex d'una manera molt
similar a com els consultem&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;UPDATE&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt; &lt;span class="k"&gt;SEt&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Pepet&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cognoms&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Grill&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;10001&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixat com, en aquest cas, no fem servir parèntesis amb el nom del
camp.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="modificar-valors-dins-d-un-array"&gt;
&lt;h3&gt;Modificar valors dins d'un array&lt;/h3&gt;
&lt;p&gt;La modificació d'un dels valors d'un array la podem fer indicant
l'índex de l'array. Per exemple, la següent comanda modifica la
primera línia del carrer del client 10001&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;UPDATE&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt; &lt;span class="k"&gt;SET&lt;/span&gt; &lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;C/ Càspita, S/N&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;10001&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Imagina, però, que el que vols és afegir un element més a l'array. La
següent comanda&lt;/p&gt;
&lt;p&gt;Podem afegir al final o al principi d'un array fent servir les funcions
&lt;tt class="docutils literal"&gt;array_append()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;array_prepend()&lt;/tt&gt;. La comanda següent, afegeix
una línia nova al final de les línies del carrer d'un client&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;UPDATE&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt;
&lt;span class="k"&gt;SET&lt;/span&gt; &lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;array_append&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Sector A&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;10001&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per inserir en un punt intermedi, haurem de composar l'array. Per
exemple, la següent comanda afegeix nova línia a la segona posició de
l'array del carrer d'un client&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;UPDATE&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt;
&lt;span class="k"&gt;SET&lt;/span&gt; &lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ARRAY_CAT&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;ARRAY&lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Nau del Pepet&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                         &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ARRAY_LENGTH&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)])&lt;/span&gt;
&lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;10001&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per eliminar un valor d'un array, procedirem de manera similar. Per
exemple, eliminarem la primera i darrera línies de carrer d'un client
amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;UPDATE&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt;
&lt;span class="k"&gt;SET&lt;/span&gt; &lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ARRAY_LENGTH&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;10001&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-9-un-nou-telefon"&gt;
&lt;h3&gt;Exercici 9. Un nou telèfon&lt;/h3&gt;
&lt;p&gt;Ens informen que el client amb id 10001 té un nou telèfon de tipus
fix. És el 0034 933100131.&lt;/p&gt;
&lt;p&gt;Escriu les comandes que permetrien:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;comprovar si aquest client ja disposa d'aquest telèfon. Han de
coincidir totes les dades per que es considerin iguals.&lt;/li&gt;
&lt;li&gt;inserir el nou telèfon al començament de la llista&lt;/li&gt;
&lt;li&gt;inserir el nou telèfon al final de la llista&lt;/li&gt;
&lt;li&gt;inserir el nou telèfon al el penúltim de la llista&lt;/li&gt;
&lt;li&gt;reemplaçar tots els telèfons fixos que disposi el client, per
aquest. No importa l'ordre en què quedin i es pot incloure més
d'una comanda.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-canvi-de-codi-postal"&gt;
&lt;h3&gt;Exercici 10. Canvi de codi postal&lt;/h3&gt;
&lt;p&gt;Ens comuniquen que les adreces que apareixien sota el codi postal
08020 del país Espanya, s'han assignat ara al codi postal 08021.&lt;/p&gt;
&lt;p&gt;Desenvolupa la comanda (o comandes) necessàries per registrar aquesta
modificació a la nostra base de dades.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-11-una-consulta-complexa"&gt;
&lt;h3&gt;Exercici 11. Una consulta complexa&lt;/h3&gt;
&lt;p&gt;Volem saber els clients que han fet comandes a lliurar a la
mateixa ciutat que la de l'adreça del client, i que hagin comprat un
mínim de 10 productes amb preu superior a 10€ durant el darrer mes (30
dies).&lt;/p&gt;
&lt;p&gt;Pista:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT DATE &lt;span class="s1"&gt;&amp;#39;2013-04-08&amp;#39;&lt;/span&gt; - INTERVAL &lt;span class="s1"&gt;&amp;#39;1 month&amp;#39;&lt;/span&gt; &amp;lt; DATE &lt;span class="s1"&gt;&amp;#39;2013-04-08&amp;#39;&lt;/span&gt; AS abans&lt;span class="p"&gt;;&lt;/span&gt;
 abans
-------
 t
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; row&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-12-comandes-dificils"&gt;
&lt;h3&gt;Exercici 12. Comandes difícils&lt;/h3&gt;
&lt;p&gt;Defineix les especificacions d'un mínim de 5 comandes sql &lt;strong&gt;no
trivials&lt;/strong&gt; sobre aquest model de dades, i proporciona al menys una
solució per cadascuna.&lt;/p&gt;
&lt;p&gt;Crea un informe en el que aparegui el contingut de les diferents
taules implicades a les teves comandes i, per cadascuna, indica
quina és la sortida que t'ha donat.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Important&lt;/strong&gt;: Assegurat que totes les consultes que proposes
requereixen la comprensió d'un o més dels elements Objecte-Relacionals
que hem treballat en aquest document.&lt;/p&gt;
&lt;p&gt;Et poso exemples d'algunes especificacions de companys anteriors. No
t'hi has de basar, però potser et serveixen d'inspiració.&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Mostrar en ordre alfabètic els cognoms dels clients que tinguin com
a mínim un telèfon mòbil&lt;/li&gt;
&lt;li&gt;Cambia el tratamiento por Dr del cliente con codigo postal 08080 que
mas ha gastado&lt;/li&gt;
&lt;li&gt;Volem saber el nom (en format cognoms+', '+nom) i el/s telèfon/s
d'aquells clients que gasten de mitjana en les seves comandes per
sobre de la comanda mitjana.&lt;/li&gt;
&lt;li&gt;Mostrar els id's dels clients (gènere masculí) que hagin gastat més
de 200€ en els últims 5 mesos que tinguin com a mínim un telèfon
mòbil de contacte.&lt;/li&gt;
&lt;li&gt;D'entre els clients vip, mostra els Japonesos que s'han gastat més
de 100 euros en total Mostra el nom, cognoms i tractament dels
clients, la xifra gastada y el seu comercial associat Comanda:&lt;/li&gt;
&lt;li&gt;Mostra aquelles comandes amb tots els seus camps així com la
quantitat de carrers que figurin en l'adreça, si es que hi ha que
han tingut lloc en el darrer lustre i s'ha indicat l'adreça&lt;/li&gt;
&lt;li&gt;Selecionar  los clientes que tengan telefono fijo, no sean de
Espanya y su teléfono comienze por 93 y termine por 31&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-13-opcional-les-consultes-d-anys-anteriors"&gt;
&lt;h3&gt;Exercici 13. (opcional) Les consultes d'anys anteriors&lt;/h3&gt;
&lt;p&gt;Prova de resoldre les consultes dels companys d'anys anteriors.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="referencies"&gt;
&lt;h2&gt;Referències&lt;/h2&gt;
&lt;table class="docutils citation" frame="void" id="eessaar" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[Eessaar]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;&amp;quot;&lt;a class="reference external" href="http://www.wseas.us/e-library/conferences/2006cscc/papers/534-523.pdf"&gt;Whole-Part Relationships in the Object-Relational Databases&lt;/a&gt;&amp;quot;
de Erki Eessaar&lt;/p&gt;
&lt;p class="last"&gt;Anàlisi de diferents maneres d'implementar una relació d'agregació
en un SGBDOR.&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="nocaliaherencia" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;De fet, en aquest cas, probablement podríem
eliminar la necessitat de distingir els clients VIP donat que només
té la referència al comercial, fent que simplement el comercial
disposi de la llista de clients. Mantindrem, però, l'herència ja
que ens interessa veure com ho s'implementa en el model OR i, a
l'hora, volem mantenir la simplicitat de l'exemple.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="dimensions" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;em&gt;PostGreSQL&lt;/em&gt; permet definir arrays multidimensionals.
Donat que en aquest document només veurem d'unidimensionals, a
l'argument de dimensió d'algunes de les funcions hi trobaràs sempre
un 1.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="PostGreSQL"></category></entry><entry><title>JDBC I. Introducció al JDBC</title><link href="http://apuntstecnics.herokuapp.com/jdbc-i-introduccio-al-jdbc.html" rel="alternate"></link><updated>2015-04-11T22:14:38+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-04-11:jdbc-i-introduccio-al-jdbc.html</id><summary type="html">&lt;div class="section" id="introducio"&gt;
&lt;h2&gt;Introdució&lt;/h2&gt;
&lt;p&gt;Amb aquests continguts treballarem la manera de comunicar els nostres
programes orientats a objecte amb les nostres bases de dades objecte
relacionals.&lt;/p&gt;
&lt;p&gt;Les tecnologies concretes que farem servir són el JDK 7 i PostGreSQL
9.4 &lt;a class="footnote-reference" href="#potseraltrestambe" id="id1"&gt;[1]&lt;/a&gt;. Els continguts pressuposen que tens prou
nocions d'aquestes dues tecnologies.&lt;/p&gt;
&lt;p&gt;Els continguts es poden dividir en tres parts:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;una primera part d'introducció al JDBC (&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/que-es-jdbc.html"&gt;què és&lt;/a&gt;, &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/installacio-directa-del-driver-per-postgresql.html"&gt;instal·lació&lt;/a&gt; i &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/primeres-consultes-a-postgresql.html"&gt;primeres nocions d'ús&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;S'aprofitarà aquesta part per introduir una nova eina pels nostres
desenvolupaments: el Apache Maven.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;una &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/jdbc-ii-model-relacional.html"&gt;segona part&lt;/a&gt; en la que
analitzarem, a partir d'exemples, el funcionament del JDBC amb un
model purament relacional.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;finalment, a la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/jdbc-iii-model-objecte-relacional.html"&gt;tercera part&lt;/a&gt;
d'aquesta introducció analitzarem el funcionament amb les diferents
característiques objecte-relacional que ens ofereix PostGreSQL.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En el títol d'alguns dels exercicis d'aquest tema, apareix una marca
(★). Aquesta estrella indica que l'exercici és d'ampliació o repàs.
Els exercicis sense marca estan dissenyats per què disposis d'una
referència bàsica de que has entès els continguts.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="potseraltrestambe" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Altres versions funcionaran molt probablement
sense grans canvis.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;!-- XXX TODO: possa un enllaç en cada apartat per que serveixi d'index.
reanomena els nous fitxers
reset les dates
posa entre asteriscs driver, Maven, i PostGreSQL --&gt;
&lt;/div&gt;
</summary><category term="PostGreSQL"></category><category term="java"></category><category term="JDBC"></category></entry><entry><title>Què és JDBC</title><link href="http://apuntstecnics.herokuapp.com/que-es-jdbc.html" rel="alternate"></link><updated>2015-04-11T22:13:38+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-04-11:que-es-jdbc.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introduccio&lt;/h2&gt;
&lt;p&gt;En aquesta secció veurem molt breument que vol dir JDBC.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="java-database-connectivity"&gt;
&lt;h2&gt;Java DataBase Connectivity&lt;/h2&gt;
&lt;p&gt;Segons la definició que apareix a la documentació oficial de Java per
&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/technotes/guides/jdbc/"&gt;JDBC&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
The Java Database Connectivity (JDBC) API provides universal data
access from the Java programming language. Using the JDBC API, you
can access virtually any data source, from relational databases to
spreadsheets and flat files. JDBC technology also provides a
common base on which tools and alternate interfaces can be built.&lt;/blockquote&gt;
&lt;p&gt;Amb JDBC, per tant, disposem d'un conjunt d'&lt;em&gt;interfaces&lt;/em&gt; i alguna
classe completa que ens permetrà comunicar-nos amb el SGBD (entre
altres fonts de dades) Per si sol, no podrem fer gaire cosa, fins que
disposem d'una implementació concreta i adequada pel nostre SGBD. A
aquesta implementació se la coneix com a &lt;em&gt;driver&lt;/em&gt;. Si el &lt;em&gt;driver&lt;/em&gt;
implementa correctament la interfície, el codi que desenvolupem
fent-la servir, hauria de funcionar (sense comptar les sentències sql)
per altres fonts de dades que implementin el JDBC.&lt;/p&gt;
&lt;div class="section" id="exercici-1-a-veure-si-ho-he-entes-be"&gt;
&lt;h3&gt;Exercici 1. A veure si ho he entès bé&lt;/h3&gt;
&lt;p&gt;Indica quines de les següents afirmacions són certes respecte JDBC:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;és un sistema que ens permet accedir des d'una base de dades
objecte-relacional, a un programa fet en Java 7 o superior.&lt;/li&gt;
&lt;li&gt;per a poder accedir a un SGBD concret, ens caldrà una
implementació adequada del JDBC, doncs JDBC per si sol només
defineix &lt;em&gt;interfaces&lt;/em&gt; i poc més.&lt;/li&gt;
&lt;li&gt;si els nostres programes fan servir les interfícies definides per
JDBC en comptes de les classes concretes dels drivers, hauria de
ser raonablement fàcil canviar de SGBD sense haver de modificar els
nostres programes.&lt;/li&gt;
&lt;li&gt;donada una implementació concreta de JDBC, coneguda com a &lt;em&gt;driver&lt;/em&gt;,
podríem accedir a diverses fonts de dades, no només bases de dades.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="PostGreSQL"></category><category term="java"></category><category term="JDBC"></category></entry><entry><title>Instal·lació (directa) del driver per PostGreSQL</title><link href="http://apuntstecnics.herokuapp.com/installacio-directa-del-driver-per-postgresql.html" rel="alternate"></link><updated>2015-04-11T22:12:38+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-04-11:installacio-directa-del-driver-per-postgresql.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquesta secció és una guia d'instal·lació i configuració del &lt;em&gt;driver&lt;/em&gt;
per accedir des de Java a PostGreSQL. Es tracta d'una instal·lació
directa des de consola.&lt;/p&gt;
&lt;p&gt;A la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/installacio-del-driver-per-postgresql-amb-maven.html"&gt;següent secció&lt;/a&gt; coneixerem
una nova eina (Maven) que ens permetrà simplificar aquesta
instal·lació (entre altres moltes coses).&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="installacio"&gt;
&lt;h2&gt;Instal·lació&lt;/h2&gt;
&lt;p&gt;Segueix les següents instruccions per a instal·lar el &lt;em&gt;driver&lt;/em&gt; de
PostGreSQL.&lt;/p&gt;
&lt;p&gt;Descarrega la darrera versió del &lt;em&gt;driver&lt;/em&gt; de &lt;a class="reference external" href="http://jdbc.postgresql.org/"&gt;jdbc.postgresql.org&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;En el moment en que s'escriu aquest document la darrera versió
correspon a &lt;a class="reference external" href="https://jdbc.postgresql.org/download/postgresql-9.4-1201.jdbc41.jar"&gt;JDBC41 Postgresql Driver, Version 9.4-1201&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Deixa el fitxer descarregat a un directori, per exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ~/lib
&lt;span class="nv"&gt;$ &lt;/span&gt;wget -c https://jdbc.postgresql.org/download/postgresql-9.4-1201.jdbc41.jar
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="configuracio"&gt;
&lt;h2&gt;Configuració&lt;/h2&gt;
&lt;p&gt;Configura la variable &lt;tt class="docutils literal"&gt;CLASSPATH&lt;/tt&gt; per què Java pugui trobar el
driver.  Per exemple, afegeix la següent línia al teu ~/.bashrc:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;CLASSPATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$CLASSPATH&lt;/span&gt;:&lt;span class="nv"&gt;$HOME&lt;/span&gt;/lib/postgresql-9.4-1201.jdbc41.jar
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="prova"&gt;
&lt;h2&gt;Prova&lt;/h2&gt;
&lt;p&gt;Provem el driver que acabem d'instal·lar amb el típic &amp;quot;holamón&amp;quot;.
Considera el següent codi que:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;importa les classes del JDBC&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;composa la cadena de connexió&lt;/p&gt;
&lt;p&gt;Fixat que aquest és l'únic punt on apareix alguna referència a
PostGreSQL. La resta del codi no hauria de requerir canvis si
decidíssim canviar de SGBD.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;realitza la connexió&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;tanca la connexió&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="hll"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.sql.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;  &lt;span class="c1"&gt;// (1) importa les classes del JDBC&lt;/span&gt;
&lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;HolaPG&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// components de la cadena de connexió&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;usuari&lt;/span&gt;   &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;usuaribd&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;pass&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;host&lt;/span&gt;     &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;192.168.56.101&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;bd&lt;/span&gt;       &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;testbd&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="hll"&gt;        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;cadenaConnexio&lt;/span&gt; &lt;span class="c1"&gt;// (2) composa la cadena de connexió&lt;/span&gt;
&lt;/span&gt;            &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;jdbc:postgresql://&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;host&lt;/span&gt;
            &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/&amp;quot;&lt;/span&gt;                &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bd&lt;/span&gt;
            &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;?user=&amp;quot;&lt;/span&gt;           &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;usuari&lt;/span&gt;
            &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;amp;password=&amp;quot;&lt;/span&gt;       &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

        &lt;span class="c1"&gt;// connexió&lt;/span&gt;
        &lt;span class="n"&gt;Connection&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="hll"&gt;            &lt;span class="c1"&gt;// (3) realitza la connexió&lt;/span&gt;
&lt;/span&gt;            &lt;span class="n"&gt;conn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;DriverManager&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getConnection&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cadenaConnexio&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Connectat a la base de dades &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bd&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ERROR: no s&amp;#39;ha pogut connectar: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="hll"&gt;                    &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// (4) tanca la connexió&lt;/span&gt;
&lt;/span&gt;                &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ERROR: no s&amp;#39;ha pogut desconnectar: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En executar HolaPG, si tot ha anat correctament hauries de veure el
missatge:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Connectat a la base de dades testbd
&lt;/pre&gt;
&lt;p&gt;Altrament, revisa que el servidor estigui disponible amb els
paràmetres de connexió que especifica HolaPG, i que el CLASSPATH
estigui correctament configurat per a accedir al driver.&lt;/p&gt;
&lt;/div&gt;
</summary><category term="PostGreSQL"></category><category term="java"></category><category term="JDBC"></category></entry><entry><title>Instal·lació del driver per PostGreSQL amb maven</title><link href="http://apuntstecnics.herokuapp.com/installacio-del-driver-per-postgresql-amb-maven.html" rel="alternate"></link><updated>2015-04-11T22:11:38+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-04-11:installacio-del-driver-per-postgresql-amb-maven.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta secció veurem una alternativa d'instal·lació del driver per
PostGreSQL, fent servir la utilitat Maven.&lt;/p&gt;
&lt;p&gt;Si encara no tens Maven instal·lat al teu equip, pots seguir les
instruccions d'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/installacio-de-maven.html"&gt;aquesta guia&lt;/a&gt;.
Per obtenir unes nocions bàsiques de l'eina, considera &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/primeres-passes-amb-maven.html"&gt;aquesta
introducció&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="instruccions"&gt;
&lt;h2&gt;Instruccions&lt;/h2&gt;
&lt;p&gt;Segueix les instruccions:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Crea un nou projecte amb Maven&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mvn -B archetype:generate -DarchetypeGroupId&lt;span class="o"&gt;=&lt;/span&gt;org.apache.maven.archetypes -DgroupId&lt;span class="o"&gt;=&lt;/span&gt;org.iesjoandaustria.test -DartifactId&lt;span class="o"&gt;=&lt;/span&gt;holapgsql
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;Allà on apareix App.java, copia el fitxer amb el codi font de
HolaPG.java vist a la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/installacio-directa-del-driver-per-postgresql.html"&gt;secció anterior&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Aquest cop, assegurat però que HolaPG.java especifica el package
adequat.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Executa la classe:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mvn &lt;span class="nb"&gt;exec&lt;/span&gt;:java -Dexec.mainClass&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;org.iesjoandaustria.test.HolaPG&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Tot i que s'executarà sense problemes pel que respecta a Maven (no
finalitza amb excepció), el missatge que genera és molt clar:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
ERROR: no s'ha pogut connectar: java.sql.SQLException: No suitable driver found for jdbc:postgresql://192.168.56.101/testbd?user=usuaribd&amp;amp;password=pass
&lt;/pre&gt;
&lt;p&gt;Malgrat el nostre sistema ja té el driver instal·lat i correctament
accessible des de la variable CLASSPATH, Maven no sembla trobar-lo.&lt;/p&gt;
&lt;p&gt;La idea és que el nostre projecte gestionat per Maven ha de definir
el driver de PostGreSQL (i qualsevol altre que faci servir) a la
secció de dependències de pom.xml.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Afegeix a la secció de dependències de pom.xml la següent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.postgresql&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;postgresql&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;9.4-1201.jdbc41&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Donat que la versió 9.4 no es troba als repositoris de Maven
&lt;a class="footnote-reference" href="#faltenmansapgsql" id="id1"&gt;[1]&lt;/a&gt;, haurem de fer la instal·lació manualment.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Demana a Maven que instal·li el driver des del jar que vas
descarregar a la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/installacio-directa-del-driver-per-postgresql.html"&gt;secció anterior&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mvn install:install-file -DgroupId&lt;span class="o"&gt;=&lt;/span&gt;org.postgresql -DartifactId&lt;span class="o"&gt;=&lt;/span&gt;postgresql -Dpackaging&lt;span class="o"&gt;=&lt;/span&gt;jar -Dversion&lt;span class="o"&gt;=&lt;/span&gt;9.4-1201.jdbc41 -Dfile&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$HOME&lt;/span&gt;/lib/postgresql.jdbc.jar -DgeneratePom&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Torna a executar HolaPG i aquest cop hauria de sortir-te l'esperat
missatge:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Connectat a la base de dades testbd
&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="faltenmansapgsql" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;en el moment en que estic preparant aquests
continguts, la darrera versió del driver encara no estava al
repositori central de Maven. Sembla ser que és un problema de temps
disponible per part dels &lt;a class="reference external" href="https://jdbc.postgresql.org/community/community.html"&gt;desenvolupadors&lt;/a&gt; del
driver. Si tens temps tu, considera oferir-los el teu ajut!&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="PostGreSQL"></category><category term="java"></category><category term="JDBC"></category></entry><entry><title>Primeres consultes a PostGreSQL</title><link href="http://apuntstecnics.herokuapp.com/primeres-consultes-a-postgresql.html" rel="alternate"></link><updated>2015-04-11T22:10:38+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-04-11:primeres-consultes-a-postgresql.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta secció veurem com podem fer unes consultes (molt simples)
a un servidor de PostGreSQL.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="consultes"&gt;
&lt;h2&gt;Consultes&lt;/h2&gt;
&lt;p&gt;Per llençar una consulta (&lt;em&gt;query&lt;/em&gt;) a la base de dades, JDBC ens
ofereix les classes &lt;tt class="docutils literal"&gt;Statement&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;PreparedStatement&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Considera el següent codi que:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;importa la classe &lt;em&gt;java.util.Properties&lt;/em&gt; per emmagatzemar les dades
&lt;em&gt;sensibles&lt;/em&gt; (usuari i password).&lt;/p&gt;
&lt;p&gt;Amb &lt;tt class="docutils literal"&gt;Properties&lt;/tt&gt; podem, per exemple, disposar de les dades en
algun fitxer extern al nostre codi, probablement protegit i &lt;em&gt;fora&lt;/em&gt;
del control de versions.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;considerem un mètode per a &lt;em&gt;amagar&lt;/em&gt; tots els detalls de connexió:
el &lt;tt class="docutils literal"&gt;connecta()&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;crea el &lt;em&gt;Statement&lt;/em&gt; que permetrà llençar una comanda sql i recollir
el resultat de la seva interpretació pel SGBD.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;crea el &lt;em&gt;ResultSet&lt;/em&gt; que contindrà el resultat obtingut d'una
commanda.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;recupera el resultat&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;tanca els recursos&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.sql.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Properties&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;SgbdVersion&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="hll"&gt;    &lt;span class="cm"&gt;/* (2) realitza la connexió i la retorna */&lt;/span&gt;
&lt;/span&gt;    &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Connection&lt;/span&gt; &lt;span class="nf"&gt;connecta&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="hll"&gt;        &lt;span class="c1"&gt;// (1) construcció del conjunt de Properties&lt;/span&gt;
&lt;/span&gt;        &lt;span class="n"&gt;Properties&lt;/span&gt; &lt;span class="n"&gt;prop&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Properties&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;prop&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;user&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;  &lt;span class="s"&gt;&amp;quot;usuaribd&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;prop&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;password&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;  &lt;span class="s"&gt;&amp;quot;pass&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;host&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;192.168.56.101&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;bd&lt;/span&gt;   &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;testbd&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;cadenaConnexio&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;jdbc:postgresql://&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;host&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bd&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;DriverManager&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getConnection&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cadenaConnexio&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prop&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Connection&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;connecta&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="hll"&gt;        &lt;span class="n"&gt;Statement&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;createStatement&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// (3) crea un Statement&lt;/span&gt;
&lt;/span&gt;        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;query&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;SELECT version()&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;     &lt;span class="c1"&gt;// defineix la query&lt;/span&gt;
&lt;span class="hll"&gt;        &lt;span class="n"&gt;ResultSet&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;executeQuery&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;query&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// (4) crea un ResultSet&lt;/span&gt;
&lt;/span&gt;&lt;span class="hll"&gt;        &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;next&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;                             &lt;span class="c1"&gt;// (5) recupera el resultat&lt;/span&gt;
&lt;/span&gt;        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;versio&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Versió: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;versio&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="hll"&gt;        &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;                            &lt;span class="c1"&gt;// tanca ResultSet&lt;/span&gt;
&lt;/span&gt;&lt;span class="hll"&gt;        &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;                            &lt;span class="c1"&gt;// tanca Statement&lt;/span&gt;
&lt;/span&gt;&lt;span class="hll"&gt;        &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;                          &lt;span class="c1"&gt;// tanca connexió&lt;/span&gt;
&lt;/span&gt;    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;El resultat d'executar aquest programa hauria de mostrar-te la versió
del servidor de PostGreSQL a la que s'està connectant.&lt;/p&gt;
&lt;div class="section" id="exercici-1-obtencio-de-dades-de-la-connexio"&gt;
&lt;h3&gt;Exercici 1. Obtenció de dades de la connexió&lt;/h3&gt;
&lt;p&gt;Crea un nou projecte amb Maven i modifica App.java de manera que:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;pertanyi al &lt;em&gt;package&lt;/em&gt; &lt;em&gt;org.iesjoandaustria.test&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;es connecti a la base de dades &lt;em&gt;testbd&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;obtingui l'adreça (&lt;em&gt;inet address&lt;/em&gt;) i el port amb el que es comunica
el nostre client&lt;/li&gt;
&lt;li&gt;obtingui l'adreça i el port del servidor.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Finalment, l'aplicació mostrarà els resultats obtinguts i finalitzarà.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pista&lt;/strong&gt;: Potser voldràs intentar-ho fer amb una única consulta. A la
línia 22 del codi anterior apareix &lt;tt class="docutils literal"&gt;rs.getString(1)&lt;/tt&gt;. Aquest &lt;tt class="docutils literal"&gt;1&lt;/tt&gt;
indica que el que es vol és la &lt;strong&gt;primera&lt;/strong&gt; columna obtinguda.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-cadena-de-connexio-des-d-un-fitxer"&gt;
&lt;h3&gt;Exercici 2. ★ Cadena de connexió des d'un fitxer&lt;/h3&gt;
&lt;p&gt;Disposar de les dades de connexió, com ara la contrasenya, a un fitxer
extern al nostre codi té els seus avantatges. Per exemple, pots deixar
el fitxer fora del control de versions i així, si estàs compartint el
codi en un lloc públic (ex. &lt;a class="reference external" href="https://github.com/"&gt;GitHub&lt;/a&gt;) no corres
risc de compartir &lt;em&gt;massa&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Considera la api &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html"&gt;java.util.Properties&lt;/a&gt;
i, amb una mica de recerca, aconsegueix que les dades de la cadena de
connexió es recullin d'un fitxer de propietats.&lt;/p&gt;
&lt;p&gt;Considera també &lt;a class="reference external" href="http://stackoverflow.com/questions/10885077/where-can-i-store-this-property-for-use-by-maven-and-java"&gt;aquesta discussió&lt;/a&gt;
per incorporar les propietats a un projecte gestionat per Maven.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-dades-de-connexio-protegides"&gt;
&lt;h3&gt;Exercici 3. ★ Dades de connexió protegides&lt;/h3&gt;
&lt;p&gt;El fitxer de propietats que has preparat a l'exercici anterior
presenta el problema de que la contrasenya apareix &lt;em&gt;oberta&lt;/em&gt;. Qualsevol
que tingui accés al fitxer per lectura, la pot veure. Potser fent
servir les utilitats de protecció que ofereix el sistema operatiu en
tindràs prou per &amp;quot;garantir&amp;quot; la seguretat, però de vegades voldràs anar
una mica més lluny.&lt;/p&gt;
&lt;p&gt;Si aquest és el teu cas, considera algun sistema d'encriptació com el
que t'ofereix la llibreria com ara &lt;a class="reference external" href="http://www.jasypt.org/"&gt;Java Simplified Encryption&lt;/a&gt; i crea una nova versió de l'aplicació que
et permeti protegir encara més aquestes dades tan sensibles.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="PostGreSQL"></category><category term="java"></category><category term="JDBC"></category></entry><entry><title>JDBC II. Model relacional</title><link href="http://apuntstecnics.herokuapp.com/jdbc-ii-model-relacional.html" rel="alternate"></link><updated>2015-04-11T22:09:38+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-04-11:jdbc-ii-model-relacional.html</id><summary type="html">&lt;div class="section" id="introducio"&gt;
&lt;h2&gt;Introdució&lt;/h2&gt;
&lt;p&gt;Amb aquests continguts treballarem la manera de comunicar els nostres
programes orientats a objecte amb les nostres bases de dades objecte
relacionals.&lt;/p&gt;
&lt;p&gt;A aquesta segona part es treballa amb el JDBC per a comunicar-nos amb
una base de dades que disposi d'un model relacional &lt;em&gt;bàsic&lt;/em&gt;. La
comunicació amb una base de dades amb característiques
Objecte-Relacional es deixa per la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/jdbc-iii-model-objecte-relacional.html"&gt;tercera part&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="jdbc-sobre-sgbd"&gt;
&lt;h2&gt;JDBC sobre SGBD&lt;/h2&gt;
&lt;p&gt;En aquesta secció considerarem la manera bàsica de comunicar-nos amb
la base de dades.&lt;/p&gt;
&lt;p&gt;Estudiem el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Animal&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;     &lt;span class="c1"&gt;// valor de la clau primària a ANIMALS&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;categoria&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;categoria&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;(-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;categoria&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// encara no té identificador&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;categoria&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;categoria&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;categoria&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setId&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;    &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;       &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;       &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;       &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;getCategoria&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;categoria&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;(){&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;(&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;, &amp;#39;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;#39;, &amp;#39;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;categoria&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;#39;)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;i&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.sql.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaAnimal&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Connection&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;    &lt;span class="c1"&gt;// connexió&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;connecta&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;usuari&lt;/span&gt;   &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;usuaribd&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;pass&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;host&lt;/span&gt;     &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;192.168.56.101&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;bd&lt;/span&gt;       &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;testbd&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;      &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;jdbc:postgresql://&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;host&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bd&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;conn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;DriverManager&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getConnection&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;usuari&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Connectat amb &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// tanca la connexió en cas que estigui connectada&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;desconnecta&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;conn&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Desconnectat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;conn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// crea la taula d&amp;#39;animals&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;creaTaula&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;eliminaTaula&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// eliminem si ja existia&lt;/span&gt;
        &lt;span class="n"&gt;Statement&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;createStatement&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;sql&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;CREATE TABLE  ANIMALS (&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;       id        SERIAL PRIMARY KEY,&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;       nom       TEXT,              &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;       categoria VARCHAR(40))&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;executeUpdate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sql&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Creada taula ANIMALS&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// elimina la taula d&amp;#39;animals si existeix&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;eliminaTaula&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Statement&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;createStatement&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;sql&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;DROP TABLE IF EXISTS ANIMALS&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;executeUpdate&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sql&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Eliminada taula ANIMALS&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// mostra la llista d&amp;#39;animals&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;consulta&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;sql&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;SELECT * FROM ANIMALS ORDER BY nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;Statement&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;createStatement&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;ResultSet&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;executeQuery&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sql&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;nAnimals&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;next&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
                &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
                &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;categoria&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
                &lt;span class="n"&gt;Animal&lt;/span&gt; &lt;span class="n"&gt;animal&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
                &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;animal&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
                &lt;span class="n"&gt;nAnimals&lt;/span&gt;&lt;span class="o"&gt;++;&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nAnimals&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Cap animal de moment&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// retorna el nombre d&amp;#39;animals que hi ha insertats&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;comptaAnimals&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;SELECT_SQL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;SELECT COUNT(*) FROM Animals&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;Statement&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;createStatement&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;ResultSet&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;executeQuery&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SELECT_SQL&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;next&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El nombre d&amp;#39;animals a la bd és: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// afegeix un animal a la taula i obté l&amp;#39;id generat&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;afegeixAnimal&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// crea l&amp;#39;animal&lt;/span&gt;
        &lt;span class="n"&gt;Animal&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;canari&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;ocell&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="c1"&gt;// crea la comanda&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;sql&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;INSERT INTO ANIMALS (nom, categoria) values (&amp;#39;&amp;quot;&lt;/span&gt;
            &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;
            &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;#39;, &amp;#39;&amp;quot;&lt;/span&gt;
            &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getCategoria&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;
            &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;#39;)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="c1"&gt;// envia la comanda&lt;/span&gt;
        &lt;span class="n"&gt;Statement&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;createStatement&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;executeUpdate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sql&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Statement&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RETURN_GENERATED_KEYS&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Nombre d&amp;#39;animals afegits: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;ResultSet&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getGeneratedKeys&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;next&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setId&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;        &lt;span class="c1"&gt;// assignem l&amp;#39;id de l&amp;#39;animal&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Afegit l&amp;#39;animal &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// afegeix uns quants animals a la taula&lt;/span&gt;
    &lt;span class="c1"&gt;// Ho fa com a transacció (o tots o cap)&lt;/span&gt;
    &lt;span class="c1"&gt;// Fa servir un PreparedStatement per optimitzar repetides crides&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;afegeixMoltsAnimals&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// plantilla de la sentència d&amp;#39;inserció&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;sql&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;INSERT INTO Animals (nom, categoria) values (?,?)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

        &lt;span class="c1"&gt;// crea els animals&lt;/span&gt;
        &lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;llista&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;estruç&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;ocell&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;kiwi&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;ocell&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;gos&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;mamifer&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;bacallà&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;peix&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;dofí&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;peix&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
        &lt;span class="o"&gt;};&lt;/span&gt;

        &lt;span class="c1"&gt;// obté l&amp;#39;estat anterior de l&amp;#39;autocommit.&lt;/span&gt;
        &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;anteriorAutoCommit&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getAutoCommit&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="c1"&gt;// fem que no faci autocommit a cada execució&lt;/span&gt;
        &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setAutoCommit&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;PreparedStatement&lt;/span&gt; &lt;span class="n"&gt;ps&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="c1"&gt;// crea la sentència a executar (només un cop!)&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;ps&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;prepareStatement&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sql&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;llista&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                    &lt;span class="c1"&gt;// afegim els valors a insertar&lt;/span&gt;
                    &lt;span class="n"&gt;ps&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;       &lt;span class="c1"&gt;// primer camp&lt;/span&gt;
                    &lt;span class="n"&gt;ps&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getCategoria&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt; &lt;span class="c1"&gt;// segon camp&lt;/span&gt;
                    &lt;span class="n"&gt;ps&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;executeUpdate&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
                    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Afegit l&amp;#39;animal &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
                &lt;span class="o"&gt;}&lt;/span&gt;
                &lt;span class="c1"&gt;// si no hi ha problemes accepta tot&lt;/span&gt;
                &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;commit&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="c1"&gt;// trobat problemes amb la inserció: tot enrere&lt;/span&gt;
                &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;rollback&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="c1"&gt;// tornem l&amp;#39;estat de autocomit tal i com estava&lt;/span&gt;
                &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setAutoCommit&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;anteriorAutoCommit&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ps&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;ps&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;corregeixAnimals&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// tenim el dofí en una categoria equivocada. Canviem-la a la BD&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;sql&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;UPDATE Animals set categoria = &amp;#39;mamifer&amp;#39; WHERE nom = &amp;#39;dofí&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;Statement&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;createStatement&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;executeUpdate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sql&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Modificat animals: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;eliminaOcells&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// volem eliminar tots els ocells de la bd&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;DELETE_SQL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;DELETE FROM Animals WHERE categoria = &amp;#39;ocell&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;Statement&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;createStatement&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;executeUpdate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DELETE_SQL&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Eliminats ocells: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;UsaAnimal&lt;/span&gt; &lt;span class="n"&gt;ua&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;ua&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;UsaAnimal&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;ua&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;connecta&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;ua&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;creaTaula&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;ua&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;consulta&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;ua&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;afegeixAnimal&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;ua&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;afegeixMoltsAnimals&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;ua&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;consulta&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;ua&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;corregeixAnimals&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;ua&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;consulta&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;ua&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;eliminaOcells&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;ua&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;consulta&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;ua&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;comptaAnimals&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;ua&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;eliminaTaula&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ua&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;ua&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;desconnecta&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;div class="section" id="exercici-1-jdbc-en-funcionament"&gt;
&lt;h3&gt;Exercici 1. JDBC en funcionament&lt;/h3&gt;
&lt;p&gt;Contesta les següents preguntes respecte el codi anterior. Algunes de
les preguntes potser requeriran que revisis la documentació oficial.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Quines diferències hi trobes entre executar una comanda sql que
potencialment modifica registres i una altra que fa una consulta?&lt;/li&gt;
&lt;li&gt;Què passa si tanques un &lt;em&gt;Statement&lt;/em&gt; que ja està tancat?&lt;/li&gt;
&lt;li&gt;Què passa si no tanques un &lt;em&gt;ResultSet&lt;/em&gt;?&lt;/li&gt;
&lt;li&gt;Com s'assegura aquest codi que es tanquen els &lt;em&gt;Statement&lt;/em&gt; passi el
que passi?&lt;/li&gt;
&lt;li&gt;Seria possible fer servir una única instància de &lt;em&gt;Statement&lt;/em&gt; per a
totes les operacions d'aquest codi? Si contestes que sí, mostra com
(no cal el codi complet) Si contestes que no, indica perquè?&lt;/li&gt;
&lt;li&gt;Indica la diferència principal entre &lt;em&gt;Statement&lt;/em&gt; i
&lt;em&gt;PreparedStatement&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Perquè hi ha dos &lt;em&gt;try&lt;/em&gt; al mètode &lt;em&gt;afegeixMoltsAnimals()&lt;/em&gt;?&lt;/li&gt;
&lt;li&gt;Què volen dir els interrogants que apareixen a la comanda sql del
mètode &lt;em&gt;afegeixMoltsAnimals()&lt;/em&gt;?&lt;/li&gt;
&lt;li&gt;Explica quin és l'objectiu que persegueixen les crides als mètodes
&lt;em&gt;getAutoCommit()&lt;/em&gt; i &lt;em&gt;setAutoCommit()&lt;/em&gt; al mètode
&lt;em&gt;afegeixMoltsAnimals()&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Al mètode &lt;em&gt;afegeixMoltsAnimals()&lt;/em&gt; què ha de passar perquè s'executi
la crida al mètode &lt;em&gt;commit()&lt;/em&gt;? i què per què s'executi
&lt;em&gt;rollback()&lt;/em&gt;?&lt;/li&gt;
&lt;li&gt;La documentació del mètode &lt;em&gt;rollback()&lt;/em&gt; ens indica que només hem de
fer servir aquest mètode quan tenim &lt;em&gt;autocomit&lt;/em&gt; inhabilitat. El
codi anterior respecta aquest &lt;em&gt;contracte&lt;/em&gt;?&lt;/li&gt;
&lt;li&gt;Què fan les crides al mètode &lt;em&gt;setString()&lt;/em&gt; a
&lt;em&gt;afegeixMoltsAnimals()&lt;/em&gt;?&lt;/li&gt;
&lt;li&gt;Com es pot saber a quants registres ha afectat l'execució d'una
comanda de modificació?&lt;/li&gt;
&lt;li&gt;Fixa't que cada animal que es guarda a la base de dades disposa
d'un identificador (la clau primària de la taula). Tal i com s'ha
definit aquest programa, qui posa l'identificador dels animals, el
codi o el SGBD? Com podem fer que l'altre part se n'assabenti?
Podríem fer-ho a l'inrevés? És a dir, podria ser la part que no
assigna ara l'identificador qui l'assignés? Quines implicacions
tindria? Què consideres més adequat? Perquè?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-l-entorn-operatiu-de-gestio-d-animals"&gt;
&lt;h3&gt;Exercici 2. L'entorn operatiu de gestió d'animals&lt;/h3&gt;
&lt;p&gt;Crea un nou projecte amb Maven anomenat &lt;em&gt;gestoranimals&lt;/em&gt; que ofereixi
una senzilla consola que mostri el &lt;em&gt;prompt&lt;/em&gt;:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
[animals]:
&lt;/pre&gt;
&lt;p&gt;L'aplicació oferirà les següents opcions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;help&lt;/p&gt;
&lt;p&gt;mostra la llista de comandes vàlides&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;list&lt;/p&gt;
&lt;p&gt;Mostra la llista d'animals a la base de dades en el següent format:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
* primera categoria (per ordre alfabètic)

    - nom primer animal de la primera categoria (per ordre
      alfabètic)

    - nom segon animal de la primera categoria

* segona categoria

    - nom primer animal de la segona categoria

    - ..
&lt;/pre&gt;
&lt;p&gt;Si no es troba cap animal a la bd, s'indicarà amb el missatge:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Cap animal
&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;list «categoria»&lt;/p&gt;
&lt;p&gt;Mostra la llista d'animals ordenats alfabèticament de la categoria
indicada.&lt;/p&gt;
&lt;p&gt;El format serà idèntic que per l'opció &lt;em&gt;list&lt;/em&gt;, excepte que només
mostrarà una categoria.&lt;/p&gt;
&lt;p&gt;Si no es troba cap animal de la categoria indicada, s'indicarà amb
el missatge:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Cap animal
&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;add «nom animal» «categoria»&lt;/p&gt;
&lt;p&gt;Afegeix un nou animal a la categoria indicada.&lt;/p&gt;
&lt;p&gt;Si ja existeix un animal amb aquest nom, per a aquesta categoria,
mostrarà el missatge d'error:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Ja existeix un animal amb aquest nom per a aquesta categoria
&lt;/pre&gt;
&lt;p&gt;Si tot ha anat correctament, es mostrarà el missatge:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
D'acord
&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;del «nom animal» [ «categoria» ]&lt;/p&gt;
&lt;p&gt;Aquesta comanda permet eliminar un animal pel seu nom. Opcionalment
es pot indicar la categoria a la que pertany.&lt;/p&gt;
&lt;p&gt;En cas que no existeixi cap animal amb aquest nom, o no existeixi
amb el nom per la categoria indicada, es mostrarà el missatge:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
No es troba l'animal
&lt;/pre&gt;
&lt;p&gt;En cas que no s'especifiqui la categoria i hi hagi més d'un animal
amb el mateix nom en diferents categories, es mostrarà el missatge i
es tornarà mostrar el &lt;em&gt;prompt&lt;/em&gt; :&lt;/p&gt;
&lt;pre class="literal-block"&gt;
S'ha trobat aquest nom d'animal en les següents categories:

* primera categoria (per ordre alfabètic)

* segona categoria

* ...

Per favor, expliciteu la categoria
&lt;/pre&gt;
&lt;p&gt;Finalment, en cas que s'hagi identificat un únic animal, es demanarà
confirmació segons:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Es procedirà a eliminar l'animal «nom animal» de la categoria «categoria»
Segur? (S|n):
&lt;/pre&gt;
&lt;p&gt;En cas que l'usuari respongui amb 'S' o 's', s'eliminarà l'animal de
la base de dades i s'informarà amb el missatge:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
D'acord
&lt;/pre&gt;
&lt;p&gt;Si es respon amb qualsevol altre caràcter, es mostrarà el missatge:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Cap modificació
&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;assign «nom animal» [ «categoria1» ] to «categoria2»&lt;/p&gt;
&lt;p&gt;Permet canviar la categoria d'un animal.&lt;/p&gt;
&lt;p&gt;En cas que no quedi clarament especificat un sol animal (com a
l'opció &lt;em&gt;del&lt;/em&gt;), es mostrarà els mateixos missatges.&lt;/p&gt;
&lt;p&gt;En cas de que l'animal estigui identificat, es procedirà a demanar
confirmació amb el missatge:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Es procedirà a assignar l'animal «nom animal» de la categoria «categoria1» a la categoria «categoria2»
Segur? (S|n):
&lt;/pre&gt;
&lt;p&gt;L'usuari rebrà el missatge corresponent com en el cas de &lt;em&gt;del&lt;/em&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;quit&lt;/p&gt;
&lt;p&gt;Finalitzarà l'aplicació&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="requeriments-addicionals"&gt;
&lt;h4&gt;Requeriments addicionals&lt;/h4&gt;
&lt;p&gt;En arrencar, l'aplicació demanarà un password que farà servir per
intentar la connexió a la base de dades (la resta de dades de connexió
les posarà l'aplicació) En cas que el password proporcionat no permeti
realitzar la connexió, l'aplicació mostrarà l'error i permetrà tornar
a intentar o bé cancelar:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Contrasenya incorrecta (i: tornar a intentar, c: cancelar):
&lt;/pre&gt;
&lt;p&gt;En cas de cancelació, l'aplicació finalitzarà l'execució.&lt;/p&gt;
&lt;p&gt;Cal que el codi estigui estructurat seguint el patró
Model-Vista-Controlador.&lt;/p&gt;
&lt;p&gt;En aquest context això implica que hi haurà, almenys, els següents
&lt;em&gt;packages&lt;/em&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;org.iesjoandaustria.animals.model&lt;/p&gt;
&lt;p&gt;inclou classes que encapsulen la lògica i les dades de
l'aplicació.&lt;/p&gt;
&lt;p&gt;En aquest package no hauria d'aparèixer ni sql, ni text concret a
mostrar a l'usuari, ni cap interpretació de l'entrada de l'usuari.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;org.iesjoandaustria.animals.vista&lt;/p&gt;
&lt;p&gt;inclou classes que encapsulen els elements a mostrar a l'usuari
de l'aplicació.&lt;/p&gt;
&lt;p&gt;En el cas d'aquesta aplicació de consola, únicament caldrà que
les classes de vista retornin els missatges de text a mostrar.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;org.iesjoandaustria.animals.control&lt;/p&gt;
&lt;p&gt;inclou les classes que interpreten les comandes de l'usuari, les
tradueixen a missatges cap a les classes del model i mostren el
resultat a partir de la informació del model i amb el format/text
de la vista.&lt;/p&gt;
&lt;p&gt;En aquest package no hauria d'aparèixer ni sql, ni text concret a
mostrar a l'usuari. Tampoc no hi hauria d'aparèixer la lògica de
l'aplicació, com ara que no es pugui eliminar un animal si hi ha
més d'un amb el mateix nom i l'usuari no ha especificat la
categoria.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;org.iesjoandaustria.animals.bd&lt;/p&gt;
&lt;p&gt;inclou les classes que encapsulen la comunicació amb el SGBD. És
a dir, contindrà les sentències SQL, mètodes de
connexió/desconnexió, etc.&lt;/p&gt;
&lt;p&gt;En aquest package no hauria d'aparèixer ni text concret a mostrar
a l'usuari, ni lògica de l'aplicació, ni interpretació de
l'entrada.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="pistes"&gt;
&lt;h4&gt;Pistes:&lt;/h4&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Per simplicitat, totes les operacions que modifiquin els continguts
de la base de dades, es realitzaran directament, sense esperar a
que es tanqui l'aplicació.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;No et capfiquis gaire amb les classes d'alguns &lt;em&gt;packages&lt;/em&gt;. Per
exemple, la de vista és possible que només contingui una classe amb
un mètode que composi i retorni un String per cada missatge que
s'hagi d'escriure a la consola.&lt;/p&gt;
&lt;p&gt;Per independitzar al màxim la vista (i potser altres &lt;em&gt;packages&lt;/em&gt;) et
proposo que plantegis la comunicació fent servir alguna
implementació de &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html"&gt;Map&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Per a aconseguir que es pugui llegir el password de manera segura
(sense fer eco del que teclegi l'usuari), i aprofitant que es
tracta d'una aplicació de consola, podem fer servir la classe
&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/io/Console.html"&gt;java.io.Console&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;DemoPassword&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;io&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Console&lt;/span&gt; &lt;span class="n"&gt;cons&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;console&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;passwd&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;usuari&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cons&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;usuari&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cons&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;readLine&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Usuari: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;passwd&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cons&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;readPassword&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Password de %s: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;usuari&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;cons&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Usuari: %s. Password: %s%n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;usuari&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;passwd&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
            &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Arrays&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fill&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;passwd&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// un cop usat, eliminem el contingut de&lt;/span&gt;
                                                &lt;span class="c1"&gt;// passwd per minimitzar el temps que&lt;/span&gt;
                                                &lt;span class="c1"&gt;// mantenim dades sensibles en memòria&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Revisa la resta de l'API de la classe Console per veure si hi ha
altres mètodes que et puguin ser d'utilitat.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;Per a aquesta versió de l'aplicació no cal que et preocupis pels
jocs de prova unitària. Simplement fes el que puguis per mantenir
l'aplicació sense errors.&lt;/p&gt;
&lt;p&gt;Si t'agradaria, però, intentar-ho. Llegeix primer l'exercici
següent.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-jocs-de-prova"&gt;
&lt;h3&gt;Exercici 3. ★ Jocs de prova&lt;/h3&gt;
&lt;p&gt;Aquest exercici d'ampliació et convida a desenvolupar un joc de proves
per la teva aplicació de gestió.&lt;/p&gt;
&lt;p&gt;Et proposo que defineixis &lt;em&gt;interfaces&lt;/em&gt; per les classes del &lt;em&gt;package&lt;/em&gt;
de base de dades. D'aquesta manera podràs fer que classes controlades
pel teu test implementin aquestes &lt;em&gt;interfaces&lt;/em&gt; i així no et calgui
modificar la base de dades per fer les proves.&lt;/p&gt;
&lt;p&gt;Nota: no cal que implementis proves amb un 100% de cobertura.
Únicament recorda que per poc que facis en aquest exercici, segur que
el codi de la teva aplicació i, el més important, la teva manera
de codificar, hauran millorat ostensiblement. Fes la prova!&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="PostGreSQL"></category><category term="java"></category></entry><entry><title>JDBC III. Model Objecte-Relacional</title><link href="http://apuntstecnics.herokuapp.com/jdbc-iii-model-objecte-relacional.html" rel="alternate"></link><updated>2015-04-11T22:08:38+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-04-11:jdbc-iii-model-objecte-relacional.html</id><summary type="html">&lt;div class="section" id="introducio"&gt;
&lt;h2&gt;Introdució&lt;/h2&gt;
&lt;p&gt;Amb aquests continguts treballarem la manera de comunicar els nostres
programes orientats a objecte amb les nostres bases de dades objecte
relacionals.&lt;/p&gt;
&lt;p&gt;A aquesta darrera part es considera com podem fer servir el JDBC per
comunicar-nos amb una base de dades que implementi elements
d'Objecte-Relacional.&lt;/p&gt;
&lt;p&gt;Els continguts pressuposen que disposes de la base de dades presentada
als &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/comparacio-models-relacional-i-objecte-relacionals-segona-part.html"&gt;continguts sobre el model objecte relacional&lt;/a&gt;. Es realitzarà
uns &lt;em&gt;lleugers&lt;/em&gt; canvis que es descriuen a diferents exercicis.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="jdbc-sobre-sgbdor"&gt;
&lt;h2&gt;JDBC sobre SGBDOR&lt;/h2&gt;
&lt;p&gt;El mecanisme per guardar instàncies d'objectes a una
base de dades relacional, el descriuen alguns a partir del següent
símil:&lt;/p&gt;
&lt;blockquote&gt;
Imagina que per aparcar cada nit el teu cotxe al garatge, en
passar per la porta l'haguessis de desmuntar peça a peça i
guardar-les convenientment en diferents calaixos especialment
destinats per cadascuna d'aquestes. Tot plegat, per l'endemà haver
de tornar a muntar tot el vehicle de nou a partir de les peces si
el vols tornar a conduir.&lt;/blockquote&gt;
&lt;p&gt;Malauradament en l'actualitat, amb les bases de dades
Objecte-Relacional la situació no ha millorat gaire. Hom diria que
fins i tot ha empitjorat. De fet, jugant amb el símil del cotxe:&lt;/p&gt;
&lt;blockquote&gt;
Imagina que per aparcar cada nit el teu cotxe al garatge, en
passar per la porta l'haguessis de desmuntar peça a peça,
tornar-les a muntar en diferents blocs i guardar aquests
convenientment en diferents calaixos especialment destinats per
cadascun d'aquests. Tot plegat, per l'endemà haver de tornar a
desmuntar els blocs i, ja fora del garatge, tornar a muntar tot el
vehicle de nou a partir de les peces si el vols tornar a conduir.&lt;/blockquote&gt;
&lt;p&gt;S'estan fent diferents esforços per estalviar-nos als desenvolupadors
la feixuga tasca de muntatge i desmuntatge dels nostres objectes i
entitats. Considera per exemple &lt;a class="reference external" href="http://ca.wikipedia.org/wiki/Hibernate"&gt;Hibernate&lt;/a&gt;. Amb tot, encara molts
desenvolupaments es realitzen &lt;em&gt;a ma&lt;/em&gt;. En el nostre cas, estem obligats
a fer-ho manualment, ja que les funcionalitats objecte-relacional que
encara no disposen de prou suport.&lt;/p&gt;
&lt;p&gt;En el moment en que escric aquest document, el JDBC per
PostGreSQL no es troba completament implementat (especialment per la
part que toca a les funcionalitats Objecte-Relacionals). Per aquesta
raó, ens haurem de mantenir en un nivell encara més &lt;em&gt;manual&lt;/em&gt; del que
ens ofereix la definició del JDBC.&lt;/p&gt;
&lt;div class="section" id="implementacio-d-un-enumerat"&gt;
&lt;h3&gt;Implementació d'un enumerat&lt;/h3&gt;
&lt;p&gt;Els enumerats de PostGreSQL es corresponen molt còmodament amb els
enumerats de Java.&lt;/p&gt;
&lt;p&gt;Per exemple, &lt;em&gt;Tractament&lt;/em&gt; es podria implementar com:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;enum&lt;/span&gt; &lt;span class="n"&gt;Tractament&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;SR&lt;/span&gt;   &lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Sr.&amp;quot;&lt;/span&gt;   &lt;span class="o"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;SRA&lt;/span&gt;  &lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Sra.&amp;quot;&lt;/span&gt;  &lt;span class="o"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;SRTA&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Srta.&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;DR&lt;/span&gt;   &lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Dr.&amp;quot;&lt;/span&gt;   &lt;span class="o"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;DRA&lt;/span&gt;  &lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Dra.&amp;quot;&lt;/span&gt;  &lt;span class="o"&gt;);&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;representacio&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;Tractament&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;rep&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;representacio&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rep&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;representacio&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Tractament&lt;/span&gt; &lt;span class="nf"&gt;fromString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;rep&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Tractament&lt;/span&gt; &lt;span class="n"&gt;trobat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Tractament&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rep&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;trobat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trobat&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;IllegalArgumentException&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;No enum constant Tractament.&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;rep&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;trobat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que aquest enumerat ofereix el mètode &lt;em&gt;fromString()&lt;/em&gt; que,
donada una representació en forma de String, retorna el valor
corresponent de l'enumerat.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-modificacio-del-model-de-dades"&gt;
&lt;h3&gt;Exercici 1. Modificació del model de dades&lt;/h3&gt;
&lt;p&gt;Realitza les següents modificacions al model de dades:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;en la definició de les claus primàries de les diferents taules
passaran a ser &lt;em&gt;SERIAL&lt;/em&gt;. D'aquesta manera no caldrà que ens
preocupem de gestionar els identificadors.&lt;/li&gt;
&lt;li&gt;les entitats CLIENTS i COMERCIALS disposaran d'un nou camp (nif) que
no podrà ser nul ni repetit.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-el-tipustelefon"&gt;
&lt;h3&gt;Exercici 2. El TipusTelefon&lt;/h3&gt;
&lt;p&gt;A partir de l'exemple de l'enumerat &lt;em&gt;Tractament&lt;/em&gt; implementa un
enumerat que correspongui al &lt;em&gt;TipusTelefon&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="implementacio-d-un-tipus-complex"&gt;
&lt;h3&gt;Implementació d'un tipus complex&lt;/h3&gt;
&lt;p&gt;Considera la següent implementació de la classe &lt;em&gt;Denominacio&lt;/em&gt;. Fixa't
en com permet crear una denominació a partir d'un tractament en format
&lt;em&gt;String&lt;/em&gt; com requeria el codi de &lt;tt class="docutils literal"&gt;parseDenominacio()&lt;/tt&gt; que hem vist
abans.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Denominacio&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Tractament&lt;/span&gt; &lt;span class="n"&gt;tr&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;cognoms&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Denominacio&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;tr&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;cognoms&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Tractament&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fromString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tr&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cognoms&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Denominacio&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Tractament&lt;/span&gt; &lt;span class="n"&gt;tr&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;cognoms&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;tr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;tr&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;cognoms&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;cognoms&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Tractament&lt;/span&gt; &lt;span class="nf"&gt;getTr&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;  &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;tr&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;      &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;     &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;     &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;getCognoms&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;cognoms&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;   &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;tr&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;cognoms&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Com podem observar, un tipus complex es tradueix directament a una
classe estàndard de Java. Es tracta, això sí, d'una classe sovint
immutable (com en aquest cas), i que pràcticament no ofereix res més
que l'accés al valor de les seves propietats.&lt;/p&gt;
&lt;p&gt;Fixa't que aquesta classe ofereix dos constructors. El primer accepta
el tractament en forma de String. Més endavant es veurà que ens
resultarà molt còmode.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-telefon"&gt;
&lt;h3&gt;Exercici 3. Telèfon&lt;/h3&gt;
&lt;p&gt;Implementa el tipus &lt;em&gt;Telefon&lt;/em&gt; seguint la idea de la classe
&lt;em&gt;Denominacio&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="acces-directe-a-un-camp-complex"&gt;
&lt;h3&gt;Accés directe a un camp complex&lt;/h3&gt;
&lt;p&gt;Veiem com podem accedir a un camp complex.&lt;/p&gt;
&lt;p&gt;Suposa que a la base de dades disposem de&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;clients&lt;/span&gt; &lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;20001&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;id&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="n"&gt;nom&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt;                                        &lt;span class="n"&gt;adr&lt;/span&gt;                                        &lt;span class="o"&gt;|&lt;/span&gt;                    &lt;span class="n"&gt;telefons&lt;/span&gt;
&lt;span class="c1"&gt;-------+-----------------------+-----------------------------------------------------------------------------------+-------------------------------------------------&lt;/span&gt;
 &lt;span class="mi"&gt;20001&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Sra&lt;/span&gt;&lt;span class="p"&gt;.,&lt;/span&gt;&lt;span class="n"&gt;Barbara&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Liskov&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;{&amp;quot;&amp;quot;77 Massachusetts Avenue&amp;quot;&amp;quot;,&amp;quot;&amp;quot;Blue Bilding&amp;quot;&amp;quot;}&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;MA 02139-4307&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Cambridge&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;EEUU&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;(fax,0084,933333333)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;(fix,0084,933333334)&amp;quot;&lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;row&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Considera el següent fragment de codi que llegeix la denominació d'un
client a partir del seu identificador&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;sql&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;SELECT nom FROM CLIENTS WHERE id =&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;createStatement&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="n"&gt;rs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;executeQuery&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sql&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;next&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;nom: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si executem aquest codi ens generarà el següent resultat&lt;/p&gt;
&lt;pre class="literal-block"&gt;
nom: (Sra.,Barbara,Liskov)
&lt;/pre&gt;
&lt;p&gt;Es a dir, ens ha generat tots els continguts d'un tipus compost en un
string!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="camps-complexos-desmuntats"&gt;
&lt;h3&gt;Camps complexos &lt;em&gt;desmuntats&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;Amb les dades d'un camp complex codificades en forma de tupla, i el
&lt;em&gt;driver&lt;/em&gt; de PostGreSQL a mig fer &lt;a class="footnote-reference" href="#suportstruct" id="id1"&gt;[1]&lt;/a&gt;, ens veiem obligats
a idear algun &lt;em&gt;truc&lt;/em&gt; per extreure la informació.&lt;/p&gt;
&lt;p&gt;Una possibilitat és demanar les dades ja &lt;em&gt;desmuntades&lt;/em&gt; al SGBD&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;sql&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;SELECT (nom).* FROM CLIENTS WHERE id =&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;createStatement&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="n"&gt;rs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;executeQuery&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sql&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;next&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;tr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;tr&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;cognoms&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;cognoms&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;Denominacio&lt;/span&gt; &lt;span class="n"&gt;denom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Denominacio&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tr&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cognoms&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;nom: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;denom&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ara la sortida (suposant codificada adequadament la classe
&lt;em&gt;Denominacio&lt;/em&gt;) serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
nom: Sra. Barbara Liskov
&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="section" id="camps-complexos-parsejats"&gt;
&lt;h3&gt;Camps complexos &lt;em&gt;parsejats&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;De vegades pot no ser convenient (o fàcil) aconseguir una comanda sql
que ens retorni les dades compostes &lt;em&gt;desmuntades&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Una altra alternativa és que ens fem nosaltres el nostre &lt;em&gt;parser&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, considera el següent mètode per la classe &lt;em&gt;Denominacio&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* retorna una denominació a partir d&amp;#39;una tupla &amp;quot;(tr,nom,cognoms)&amp;quot;&lt;/span&gt;
&lt;span class="cm"&gt; * codificada a un String.&lt;/span&gt;
&lt;span class="cm"&gt; * En cas que no sigui una tupla vàlida retorna null. */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Denominacio&lt;/span&gt; &lt;span class="nf"&gt;parseDenominacio&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;tupla&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Denominacio&lt;/span&gt; &lt;span class="n"&gt;denom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tupla&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;startsWith&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;(&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;tupla&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;endsWith&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;elements&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tupla&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tupla&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;()-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;split&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;,&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;elements&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;denom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Denominacio&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;elements&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;],&lt;/span&gt; &lt;span class="n"&gt;elements&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;],&lt;/span&gt; &lt;span class="n"&gt;elements&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;denom&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Disposant d'aquest senzill &lt;em&gt;parser&lt;/em&gt; podrem aconseguir la denominació
simplement amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;sql&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;SELECT nom FROM CLIENTS WHERE id =&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;createStatement&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="n"&gt;rs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;executeQuery&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sql&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;next&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;tupla&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;Denominacio&lt;/span&gt; &lt;span class="n"&gt;denom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;parseDenominacio&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tupla&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;nom: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;denom&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Cal tenir en compte que aquest &lt;em&gt;parser&lt;/em&gt; no ens servirà en tots els
casos. Per exemple, si la senyora Liskov tingués dos cognoms (com ara
'Liskov d'Argent', el resultat seria que PostGreSQL ens retornaria els
dos cognoms entre cometes dobles. Un cas pitjor apareix si pel que
sigui, els cognoms contenen una coma. El nostre &lt;em&gt;parser&lt;/em&gt; detectaria
més dels tres camps que espera i retornaria &lt;em&gt;null&lt;/em&gt;!&lt;/p&gt;
&lt;p&gt;La següent versió està preparada per tuples tan particulars com
&lt;tt class="docutils literal"&gt;(Sra.&amp;nbsp; &amp;quot;Barbara Maria&amp;quot;, &amp;quot;Liskov, &lt;span class="pre"&gt;&amp;quot;&amp;quot;d'Argent&amp;quot;&amp;quot;)&lt;/span&gt;&lt;/tt&gt;. Probablement en
tindrem més que suficient pels exercicis que treballarem en aquest
document. Fa servir una &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html"&gt;expressió regular&lt;/a&gt;,
per extreure cada element &lt;a class="footnote-reference" href="#regexsimple" id="id2"&gt;[2]&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* donada una seqüència de valors tancats entre parèntesis o claus&lt;/span&gt;
&lt;span class="cm"&gt; * separats per comes i amb possibilitat d&amp;#39;estar envoltats per cometes&lt;/span&gt;
&lt;span class="cm"&gt; * dobles que a l&amp;#39;hora puguin incloure dobles cometes dobles &amp;quot;&amp;quot; i comes,&lt;/span&gt;
&lt;span class="cm"&gt; * retorna la llista de strings.*/&lt;/span&gt;
&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nf"&gt;splitSeq&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;seq&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// patró per extreure els elements&lt;/span&gt;
    &lt;span class="n"&gt;Pattern&lt;/span&gt; &lt;span class="n"&gt;pattern&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Pattern&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;compile&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;((\&amp;quot;((\&amp;quot;\&amp;quot;)|([^\&amp;quot;]))*\&amp;quot;)|([^\&amp;quot;,]*)),&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="cm"&gt;/* elimina els parèntesis que envolten la seqüència */&lt;/span&gt;
    &lt;span class="n"&gt;StringBuilder&lt;/span&gt; &lt;span class="n"&gt;sb&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;StringBuilder&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;seq&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;startsWith&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;(&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;seq&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;endsWith&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt;
            &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;seq&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;startsWith&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;{&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;seq&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;endsWith&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;}&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;sb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;seq&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;seq&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;()-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="cm"&gt;/* afegeix una coma al final per permetre una regex simple */&lt;/span&gt;
    &lt;span class="n"&gt;sb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;,&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="cm"&gt;/* realitza el parseig */&lt;/span&gt;
    &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
    &lt;span class="n"&gt;Matcher&lt;/span&gt; &lt;span class="n"&gt;matcher&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pattern&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;matcher&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;matcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;find&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;element&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;matcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;group&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;element&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;startsWith&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt; &lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;startsWith&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\&amp;quot;\&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="c1"&gt;// elimina cometes a l&amp;#39;inici i final&lt;/span&gt;
                &lt;span class="n"&gt;element&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;()-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="c1"&gt;// simplifica cometes dobles&lt;/span&gt;
            &lt;span class="n"&gt;element&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;replaceAll&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\&amp;quot;\&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="c1"&gt;// afegeix l&amp;#39;element un cop &amp;quot;netejat&amp;quot;&lt;/span&gt;
            &lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que ara, implementar el mètode &lt;em&gt;parseDenominacio()&lt;/em&gt; és molt
senzill:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* retorna una denominació a partir d&amp;#39;una tupla &amp;quot;(tr,nom,cognoms)&amp;quot;&lt;/span&gt;
&lt;span class="cm"&gt; * codificada a un String.&lt;/span&gt;
&lt;span class="cm"&gt; * En cas que no sigui una tupla vàlida retorna null. */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Denominacio&lt;/span&gt; &lt;span class="nf"&gt;parseDenominacio&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;tupla&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Denominacio&lt;/span&gt; &lt;span class="n"&gt;denom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;splitSeq&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tupla&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;size&lt;/span&gt;&lt;span class="o"&gt;()==&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;denom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Denominacio&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;denom&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-parsetelefon"&gt;
&lt;h3&gt;Exercici 4. parseTelefon()&lt;/h3&gt;
&lt;p&gt;Seguint l'exemple de codi del mètode &lt;em&gt;parseDenominacio()&lt;/em&gt; implementa
el mètode &lt;em&gt;parseTelefon()&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Col·loca tots dos mètodes a una nova classe que es digui
&lt;em&gt;VendesParser&lt;/em&gt; que ens permetrà agrupar aquests mètodes d'utilitat en
un únic lloc &lt;a class="footnote-reference" href="#principispooalterra" id="id3"&gt;[4]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Nota&lt;/strong&gt;: Si tens intenció de realitzar exercicis de prova unitària,
potser voldràs mirar-te primer l'exercici següent i començar per la
prova.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-test-de-parsers"&gt;
&lt;h3&gt;Exercici 5. ★ Test de parsers&lt;/h3&gt;
&lt;p&gt;Desenvolupa un codi de test pels dos mètodes &lt;em&gt;parser&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Hi pots testar que els dos mètodes retornin una denominació / un
telèfon correctes a partir de tuples controlades pel test.&lt;/p&gt;
&lt;p&gt;Es tracta d'un test senzill que et permetrà &lt;em&gt;escalfar motors&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="arrays"&gt;
&lt;h3&gt;Arrays&lt;/h3&gt;
&lt;p&gt;Veiem com podem tractar elements de tipus &lt;em&gt;array&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Recordem la definició del tipus &lt;em&gt;Adressa&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="n"&gt;adressa&lt;/span&gt;
         &lt;span class="n"&gt;Composite&lt;/span&gt; &lt;span class="k"&gt;type&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;public.adressa&amp;quot;&lt;/span&gt;
   &lt;span class="k"&gt;Column&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="k"&gt;Type&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Modifiers&lt;/span&gt;
&lt;span class="c1"&gt;-------------+-----------------------+-----------&lt;/span&gt;
 &lt;span class="n"&gt;carrer&lt;/span&gt;      &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="nb"&gt;text&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt;                &lt;span class="o"&gt;|&lt;/span&gt;
 &lt;span class="n"&gt;codi_postal&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="nb"&gt;character&lt;/span&gt; &lt;span class="nb"&gt;varying&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;
 &lt;span class="n"&gt;ciutat&lt;/span&gt;      &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="nb"&gt;text&lt;/span&gt;                  &lt;span class="o"&gt;|&lt;/span&gt;
 &lt;span class="n"&gt;pais&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="nb"&gt;text&lt;/span&gt;                  &lt;span class="o"&gt;|&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Com podem veure, &lt;em&gt;carrer&lt;/em&gt; apareix definit com a &lt;em&gt;array&lt;/em&gt; de &lt;em&gt;strings&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;La representació del tipus &lt;em&gt;Adressa&lt;/em&gt; en Java pot tenir un aspecte similar
al següent&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Adressa&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;   &lt;span class="n"&gt;codiPostal&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;   &lt;span class="n"&gt;ciutat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;   &lt;span class="n"&gt;pais&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Adressa&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;codiPostal&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;ciutat&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;pais&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;carrer&lt;/span&gt;      &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;codiPostal&lt;/span&gt;  &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;codiPostal&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ciutat&lt;/span&gt;      &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ciutat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pais&lt;/span&gt;        &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pais&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="nf"&gt;getCarrer&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;    &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Així, construirem una adreça amb&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;liniesCarrer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;C/Antracita, 21&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Pol. Ind. Gualda&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;};&lt;/span&gt;
&lt;span class="n"&gt;Adressa&lt;/span&gt; &lt;span class="n"&gt;adr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Adressa&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;liniesCarrer&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;08020&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Barcelona&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Catalunya&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Recordem que en SQL, l'aspecte que ha de tenir aquesta adreça segons
la definició a la base de dades és:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;ROW&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;ARRAY&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;C/Antracita, 21&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Pol. Ind. Gualda&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;08020&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Barcelona&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Catalunya&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Podem composar aquests valors amb els següents mètodes&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;composaCarrer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;carrer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;carrer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;ARRAY[]&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;StringBuilder&lt;/span&gt; &lt;span class="n"&gt;sb&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;StringBuilder&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ARRAY[&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;sb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;sb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;#39;,&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;sb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;sb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;#39;]&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;carrer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;composaAdressa&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Adressa&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;sql&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;ROW(%s,&amp;#39;%s&amp;#39;,&amp;#39;%s&amp;#39;,&amp;#39;%s&amp;#39;)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;carrer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;composaCarrer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getCarrer&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sql&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getCodiPostal&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getCiutat&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getPais&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A l'hora de llegir l'adreça, ens trobem que ens retorna la següent
tupla:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;{&amp;quot;&amp;quot;C/Antracita, 21&amp;quot;&amp;quot;,&amp;quot;&amp;quot;Pol. Ind. Gualda&amp;quot;&amp;quot;}&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;08020&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Barcelona&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Catalunya&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per interpretar-la, ho tenim molt fàcil gràcies al mètode &lt;em&gt;splitSeq()&lt;/em&gt;
que hem presentat abans. Així el següent mètode ens pot construir una
adreça a partir de la tupla anterior&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Adressa&lt;/span&gt; &lt;span class="nf"&gt;parseAdressa&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;tupla&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Adressa&lt;/span&gt; &lt;span class="n"&gt;adr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;splitSeq&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tupla&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;size&lt;/span&gt;&lt;span class="o"&gt;()==&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;carrer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;splitSeq&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;elements&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;size&lt;/span&gt;&lt;span class="o"&gt;()];&lt;/span&gt;
        &lt;span class="n"&gt;adr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Adressa&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toArray&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;elements&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
                &lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't com &lt;em&gt;parseAdressa()&lt;/em&gt; crida dos cops a &lt;em&gt;splitSeq()&lt;/em&gt;. El primer
per destriar els camps de l'adreça, i el segon per les diferents
línies del carrer.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-test-de-composicio-i-parser"&gt;
&lt;h3&gt;Exercici 6. ★ Test de composició i parser&lt;/h3&gt;
&lt;p&gt;Desenvolupa codi de test per comprovar el funcionament dels mètodes
&lt;em&gt;composaCarrer()&lt;/em&gt;, &lt;em&gt;composaAdressa()&lt;/em&gt; i &lt;em&gt;parseAdressa()&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;És clar, si trobes un error de funcionament al codi que et
proporciona aquest document, avisa!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="implementacio-d-una-entitat"&gt;
&lt;h3&gt;Implementació d'una entitat&lt;/h3&gt;
&lt;p&gt;Les entitats (no tipus) de la base de dades també trobaran
correspondència amb una classe de Java.&lt;/p&gt;
&lt;p&gt;Com que volem recuperar instàncies guardades com a registres a una o
més taules de la base de dades, per després poder tornar a guardar les
modificacions sobre els mateixos registres, ens caldrà disposar de
l'identificador dels registres associat a les instàncies. La proposta
aquí és molt bàsica: afegim una propietat &lt;em&gt;îd&lt;/em&gt; a la instància.&lt;/p&gt;
&lt;p&gt;Per exemple, considera el següent codi que implementa la classe
&lt;em&gt;Comercial&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Comercial&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Denominacio&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Telefon&lt;/span&gt; &lt;span class="n"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Comercial&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Denominacio&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Telefon&lt;/span&gt; &lt;span class="n"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;(-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Comercial&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Denominacio&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Telefon&lt;/span&gt; &lt;span class="n"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setId&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;       &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt;         &lt;span class="nf"&gt;getId&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;      &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;      &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Denominacio&lt;/span&gt; &lt;span class="nf"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;     &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;     &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Telefon&lt;/span&gt;     &lt;span class="nf"&gt;getTelefon&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Comercial: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;\n\tnom: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;\n\ttelefon: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixat:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;La classe ofereix dos constructors. Quan creem una instància a
partir de les dades obtingudes d'una consulta a la base de dades,
disposarem de l'identificador (la clau primària d'aquesta). Quan
creem una nova instància, però, aquest identificador encara no
estarà assignat. Suposarem que si no ho està encara, aquest serà un
valor que no pugui ser representat com a identificador a la base de
dades. En concret aquí s'ha escollit el -1 &lt;a class="footnote-reference" href="#messofisticat" id="id4"&gt;[5]&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;El camp &lt;em&gt;id&lt;/em&gt; pot ser assignat amb posterioritat. És a dir, aquesta
classe no és immutable com ho era per exemple &lt;em&gt;Denominacio&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;La classe reescriu el mètode &lt;em&gt;toString()&lt;/em&gt; per facilitar la prova.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-client"&gt;
&lt;h3&gt;Exercici 7. Client&lt;/h3&gt;
&lt;p&gt;Implementa la classe &lt;em&gt;Client&lt;/em&gt; seguint les idees anteriors.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="carrega-d-una-entitat"&gt;
&lt;h3&gt;Càrrega d'una entitat&lt;/h3&gt;
&lt;p&gt;Suposem que coneixem l'identificador del comercial a la base de dades.
Com podem obtenir les dades associades i a partir d'elles construir la
instància del comercial?&lt;/p&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Comercial&lt;/span&gt; &lt;span class="nf"&gt;carregaComercial&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Statement&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;  &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;sql&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;SELECT * FROM COMERCIALS WHERE id =&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;Comercial&lt;/span&gt; &lt;span class="n"&gt;comercial&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;createStatement&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;ResultSet&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;executeQuery&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sql&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;next&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nomStr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;telStr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;tel&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;Denominacio&lt;/span&gt; &lt;span class="n"&gt;denom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;VendesParser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseDenominacio&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nomStr&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;Telefon&lt;/span&gt; &lt;span class="n"&gt;telefon&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;VendesParser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseTelefon&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;telStr&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;comercial&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Comercial&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;denom&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;comercial&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixat:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Aquest mètode intenta trobar el comercial amb l'identificador
indicat. Si no el troba (o hi ha qualsevol problema amb la BD)
retorna el comercial &lt;em&gt;null&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;El mètode &lt;em&gt;absorbeix&lt;/em&gt; qualsevol problema amb la base de dades.
Únicament mostra el traç de l'excepció per sortida estàndard. Si bé
és una manera còmoda de sortir-nos del pas aquí, potser no és gaire
adequada per aplicacions &lt;em&gt;reals&lt;/em&gt;. És clar, no voldrem que la nostra
aplicació hagi de tractar amb excepcions SQL i que finalment pugui
arribar a l'usuari un missatge de la base de dades! Però tampoc
voldrem quedar-nos sense informació potser vital durant la
depuració. Considera la classe &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/logging/Logger.html"&gt;java.util.logging.Logger&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-8-test-de-carrega-de-comercial"&gt;
&lt;h3&gt;Exercici 8. ★ Test de càrrega de comercial&lt;/h3&gt;
&lt;p&gt;El desenvolupament d'aquest test pot ser una mica &lt;em&gt;peculiar&lt;/em&gt; ja que
haurem de tractar amb la base de dades i sabem, per la resposta del
mestre Flying Feathers a &lt;a class="reference external" href="http://www.agitar.com/downloads/TheWayOfTestivus.pdf"&gt;The way of Testivus&lt;/a&gt; a la secció
&lt;em&gt;The test is more important than the unit&lt;/em&gt;, que:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If it talks to the database, it is not a unit test&lt;/p&gt;
&lt;p&gt;If it can't run at the same time as any other unit tests, it is not a unit test.&lt;/p&gt;
&lt;p&gt;«...»&lt;/p&gt;
&lt;p&gt;If you have to do special things to your environment to run it, it is not a unit test.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Recorda la nota que va rebre l'estudiant aquella nit:&lt;/p&gt;
&lt;blockquote&gt;
The answer from the great master Flying Feathers is an excellent
guide.  Follow it, and most of the time you will do well.  But
don’t get stuck on any dogma.  Write the test that needs to be
written&amp;quot;.&lt;/blockquote&gt;
&lt;p&gt;Amb aquest segon consell en ment, pots escriure unes proves que
preparin la base de dades amb les dades d'un comercial, després
executin el mètode a provar i finalment &lt;em&gt;netegin&lt;/em&gt; la base de dades. No
serà una prova unitària &lt;em&gt;de mena&lt;/em&gt; però de moment ens permetrà sortir
del pas (&lt;em&gt;An imperfect test today is better than a perfect test
someday&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;Com sempre, si descobreixes un error al codi, avisa.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-9-carrega-un-client"&gt;
&lt;h3&gt;Exercici 9. Carrega un client&lt;/h3&gt;
&lt;p&gt;Fen servir de guia el codi de càrrega d'un comercial, implementa el
mètode &lt;em&gt;Client carregaClient(int id)&lt;/em&gt; que carrega un client a partir
del seu identificador de la base de dades i retorna una instància de
&lt;em&gt;Client&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-test-de-carrega-de-client"&gt;
&lt;h3&gt;Exercici 10. ★ Test de càrrega de client&lt;/h3&gt;
&lt;p&gt;Afegeix el codi de prova per comprovar el funcionament del teu codi.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-11-carregant-clients"&gt;
&lt;h3&gt;Exercici 11. Carregant clients&lt;/h3&gt;
&lt;p&gt;Anteriorment hem desenvolupat ja algunes classes i mètodes per
accedir a la base de dades.&lt;/p&gt;
&lt;p&gt;Alguns mètodes, com ara els tipus &lt;em&gt;parser&lt;/em&gt; els estem col·locant a la
classe &lt;em&gt;VendesParser&lt;/em&gt;. Hi ha altres mètodes, però, que no tenim tan
clar on col·locar. Per exemple, on has posat els mètodes
&lt;em&gt;carregaComercial()&lt;/em&gt; i &lt;em&gt;carregaClient()&lt;/em&gt;?&lt;/p&gt;
&lt;p&gt;En aquest exercici crearem la classe &lt;em&gt;VendesBD&lt;/em&gt; que, com
&lt;em&gt;VendesParser&lt;/em&gt; ens permetrà que classes com &lt;em&gt;Client&lt;/em&gt; no hagin de
preocupar-se gaire de coses com l'emmagatzemament a la base de dades.&lt;/p&gt;
&lt;p&gt;Així &lt;em&gt;VendesBD&lt;/em&gt; encapsularà tot l'accés a la base de dades.  A
diferència de &lt;em&gt;VendesParser&lt;/em&gt;, aquesta classe requerirà mantenir un
cert estat, com a mínim la connexió amb la base de dades. Només
voldrem una instància d'aquesta classe i ens interessarà poder accedir
a ella des de qualsevol mètode de la nostra aplicació (com si fos una
variable global).&lt;/p&gt;
&lt;p&gt;Per donar resposta a aquestes característiques, hi ha un patró de
desenvolupament anomenat &lt;a class="reference external" href="http://www.javaworld.com/javaworld/jw-04-2003/jw-0425-designpatterns.html"&gt;singleton&lt;/a&gt;.
Donat que a la nostra aplicació sempre ens interessarà disposar de la
connexió, podrem implementar el patró d'una manera molt senzilla.
El codi següent podria servir de plantilla &lt;a class="footnote-reference" href="#threadsafe" id="id5"&gt;[6]&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;VendesBD&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// única instància de VendesBD per tot el procés&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;VendesBD&lt;/span&gt; &lt;span class="n"&gt;instancia&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;VendesBD&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;

    &lt;span class="c1"&gt;// connexió amb la base de dades&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Connection&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="nf"&gt;VendesBD&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;

    &lt;span class="cm"&gt;/* retorna la única instància de VendesBD&lt;/span&gt;
&lt;span class="cm"&gt;     * Si hi ha problemes de connexió genera una excepció RuntimeException */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;VendesBD&lt;/span&gt; &lt;span class="nf"&gt;getInstance&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;RuntimeException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;instancia&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;conn&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;       &lt;span class="c1"&gt;// primer cop o tancada?&lt;/span&gt;
            &lt;span class="n"&gt;instancia&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;conn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;connecta&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;instancia&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;conn&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;   &lt;span class="c1"&gt;// no es pot establir la connexió&lt;/span&gt;
                &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;RuntimeException&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Sense connexió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;instancia&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/* tanca la instància.*/&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;tanca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;instancia&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;conn&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;instancia&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="n"&gt;instancia&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;conn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/* Crea la connexió amb la base de dades.&lt;/span&gt;
&lt;span class="cm"&gt;     * Si ja hi havia una connexió, no fa res.&lt;/span&gt;
&lt;span class="cm"&gt;     * No genera error si no pot establir la connexió&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Connection&lt;/span&gt; &lt;span class="nf"&gt;connecta&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Connection&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;usuari&lt;/span&gt;   &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;usuaribd&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;pass&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;host&lt;/span&gt;     &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;192.168.56.101&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;bd&lt;/span&gt;       &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;testbd&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;      &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;jdbc:postgresql://&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;host&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bd&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;conn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;DriverManager&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getConnection&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;usuari&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per cridar a un mètode de &lt;em&gt;VendesBD&lt;/em&gt; podem, per exemple&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Client&lt;/span&gt; &lt;span class="n"&gt;client&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;VendesBD&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getInstance&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;carregaClient&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En acabar l'execució, és recomanable tancar la connexió amb la base de
dades. Per aquest fi disposem del mètode &lt;em&gt;tanca()&lt;/em&gt; que hauria de ser
cridat quan ja no tinguem més necessitat de disposar de connexió a la
base de dades des del nostre programa.&lt;/p&gt;
&lt;p&gt;A banda d'afegir-hi els mètodes que ja hem treballat abans (ex.
&lt;em&gt;carregaClient()&lt;/em&gt;), per aquest exercici caldrà que implementis el
mètode públic &lt;em&gt;Client[] carregaClients()&lt;/em&gt; que llegeix de la base de
dades tots els clients, construirà instàncies de Client i, agrupades
en un array, les retornarà. No consideris la taula de clients VIP en
aquest exercici.&lt;/p&gt;
&lt;p&gt;La classe &lt;em&gt;UsaClient&lt;/em&gt; consistirà en una funció &lt;em&gt;main()&lt;/em&gt; que demanarà a
&lt;em&gt;VendesBD&lt;/em&gt; la llista de tots els clients, i els mostrarà per sortida
estàndard. No oblidis de tancar la connexió en finalitzar.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-12-test-de-carrega-de-clients"&gt;
&lt;h3&gt;Exercici 12. ★ Test de càrrega de clients&lt;/h3&gt;
&lt;p&gt;Probablement els canvis anteriors et requeriran reorganitzar el codi
de les teves proves. A més a més, segurament hi ha nous elements que
voldràs provar.&lt;/p&gt;
&lt;p&gt;Realitza els canvis necessaris a la teva bateria de proves.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="herencia"&gt;
&lt;h2&gt;Herència&lt;/h2&gt;
&lt;p&gt;A un &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/comparacio-models-relacional-i-objecte-relacionals-segona-part.html"&gt;tema anterior&lt;/a&gt;
vàrem veure que PostGreSQL ens ofereix la clau &lt;em&gt;INHERITS&lt;/em&gt; per
especificar una relació d'herència entre dues entitats.  Havíem fet
servir aquest mecanisme per relacionar &lt;em&gt;CLIENTS&lt;/em&gt; amb &lt;em&gt;CLIENTS_VIP&lt;/em&gt;.
També vàrem observar que es tracta d'una funcionalitat que encara no
està completament implementada pel SGBD.&lt;/p&gt;
&lt;p&gt;Com que l'herència és un element bàsic a la POO, haurem de trobar un
camí alternatiu mentre els desenvolupadors d'aquest (per altra banda
fantàstic) SGBD, poden finalitzar la implementació d'aquest concepte.&lt;/p&gt;
&lt;p&gt;L'aproximació que prendrem aquí és molt habitual en el model
relacional (sense Objecte-Relacional): l'entitat que estén disposa
d'una clau primària que és a l'hora forana de l'entidad estesa&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;CLIENTS_VIP&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id_client&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;PRIMARY&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt; &lt;span class="k"&gt;REFERENCES&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;id_comercial&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;REFERENCES&lt;/span&gt; &lt;span class="n"&gt;COMERCIALS&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;D'aquesta manera, la taula de &lt;em&gt;CLIENTS_VIP&lt;/em&gt; conté únicament les dades
que estén, mentre que &lt;em&gt;CLIENTS&lt;/em&gt; conté la resta.&lt;/p&gt;
&lt;p&gt;Farem que un client sigui VIP simplement afegint a &lt;em&gt;CLIENTS_VIP&lt;/em&gt; una
entrada. Per exemple, la nostra clienta 20001 la farem VIP amb&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;CLIENTS_VIP&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20001&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;40001&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per a accedir a les dades de tots els clients, siguin o no, VIP podem
fer&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt; &lt;span class="k"&gt;LEFT&lt;/span&gt; &lt;span class="k"&gt;OUTER&lt;/span&gt; &lt;span class="k"&gt;JOIN&lt;/span&gt; &lt;span class="n"&gt;CLIENTS_VIP&lt;/span&gt; &lt;span class="k"&gt;ON&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;id_client&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aquesta consulta ens retornarà una columna &lt;em&gt;id_comercial&lt;/em&gt; que
contindrà un valor nul en el cas que el client no correspongui a un
VIP.&lt;/p&gt;
&lt;p&gt;Si fem una consulta d'aquesta manera amb el driver de PostGreSQL des
de Java, ens trobarem que els clients no VIP presenten un 0 al valor
del camp &lt;em&gt;id_comercial&lt;/em&gt;. Potser ens interessaria que aquest valor fos
el -1 que estem fent servir en aquests materials. Això ho aconseguirem
amb &lt;a class="footnote-reference" href="#coalesce" id="id6"&gt;[3]&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;coalesce&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id_comercial&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;id_comercial&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt; &lt;span class="k"&gt;LEFT&lt;/span&gt; &lt;span class="k"&gt;OUTER&lt;/span&gt; &lt;span class="k"&gt;JOIN&lt;/span&gt; &lt;span class="n"&gt;CLIENTS_VIP&lt;/span&gt; &lt;span class="k"&gt;ON&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;id_client&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;D'aquesta manera, quan estem llegint un client podem fer&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;id_comercial&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;id_comercial&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;Client&lt;/span&gt; &lt;span class="n"&gt;client&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id_comercial&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;client&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Client&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;denom&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;telefons&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Comercial&lt;/span&gt; &lt;span class="n"&gt;comercial&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;carregaComercial&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id_comercial&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;client&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ClientVip&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;denom&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;telefons&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;comercial&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que en cas que el comercial ja hagi estat carregat al sistema
per un altre client, hi haurà instàncies duplicades del mateix
comercial.  És molt probable que a la teva aplicació no vulguis que
això passi. En aquest cas pots fer &lt;em&gt;trucs&lt;/em&gt; com ara guardar-te la
llista d'entitats de comercials i mirar si el comercial cercat ja
apareix a la llista, abans de crear-ne una altra instància. Per
aquests exercicis introductoris, no cal que facis una versió tant
sofisticada.&lt;/p&gt;
&lt;div class="section" id="exercici-13-carregant-clients-vip"&gt;
&lt;h3&gt;Exercici 13. Carregant clients VIP&lt;/h3&gt;
&lt;p&gt;Desenvolupa una nova versió de &lt;em&gt;UsaClient&lt;/em&gt;. En aquesta ocasió, el
programa mostrarà la informació de tots els clients, incloent la dels
VIP.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Pista&lt;/em&gt;: gràcies al polimorfisme probablement no et serà necessari
distingir quina mena de client t'arriba a &lt;em&gt;UsaClient&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-14-test-de-carrega-de-clients-vip"&gt;
&lt;h3&gt;Exercici 14. ★ Test de càrrega de clients VIP&lt;/h3&gt;
&lt;p&gt;Ja saps: codifica la prova del mètode o mètodes anteriors.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="guardant-clients"&gt;
&lt;h3&gt;Guardant clients&lt;/h3&gt;
&lt;p&gt;A l'hora de guardar un client a la base de dades, cal tenir en compte
si es tracta d'un client VIP, i en aquest cas caldrà guardar també la
informació d'aquest.&lt;/p&gt;
&lt;p&gt;Una manera seria crear dos mètodes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;VendesBD&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;guardaClient&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Client&lt;/span&gt; &lt;span class="n"&gt;client&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;i&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;VendesBD&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;guardaClient&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ClientVip&lt;/span&gt; &lt;span class="n"&gt;client&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;D'aquesta manera deixaríem la distinció del tipus de client al
compilador. Com que sovint, però, les nostres referències seran a
client tant si són VIP com si no, segurament ens serà més pràctic fer
una distinció amb l'operador &lt;em&gt;instanceof&lt;/em&gt; &lt;a class="footnote-reference" href="#principispooalterra" id="id7"&gt;[4]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Considera la implementació del següent mètode de &lt;em&gt;VendesBD&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;guardaClient&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Client&lt;/span&gt; &lt;span class="n"&gt;client&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;esVip&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;client&lt;/span&gt; &lt;span class="k"&gt;instanceof&lt;/span&gt; &lt;span class="n"&gt;ClientVip&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;composaDenominacio&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;client&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;adr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;composaAdressa&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;client&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getAdr&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;tel&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;composaTelefons&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;client&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getTelefons&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;idClient&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;client&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getId&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;idClient&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;idClient&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;insertClientBD&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tel&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;client&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setId&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;idClient&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// assigna l&amp;#39;id del client&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;updateClientBD&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;idClient&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tel&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esVip&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Comercial&lt;/span&gt; &lt;span class="n"&gt;comercial&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;ClientVip&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;client&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;getComercial&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;comercial&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getComercial&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;guardaComercial&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;comercial&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;insertOUpdateClientVipBD&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;idClient&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;comercial&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getId&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;El mètode distingeix si ha de realitzar un &lt;em&gt;insert&lt;/em&gt; o un &lt;em&gt;update&lt;/em&gt; a
partir de l'identificador del client.&lt;/li&gt;
&lt;li&gt;El codi inicialitza &lt;em&gt;esVip&lt;/em&gt; segons sigui o no VIP. Més endavant, si
és VIP, se n'encarrega de guardar (també &lt;em&gt;insert&lt;/em&gt; o &lt;em&gt;update&lt;/em&gt;) el
comercial i la informació a la taula &lt;em&gt;CLIENTS_VIP&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;El codi de &lt;em&gt;composaDenominacio()&lt;/em&gt; podria ser:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;composaDenominacio&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Denominacio&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;ROW(&amp;#39;%s&amp;#39;,&amp;#39;%s&amp;#39;,&amp;#39;%s&amp;#39;)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getTr&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getCognoms&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;El codi de &lt;em&gt;insertClientBD()&lt;/em&gt; podria ser:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;     &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;insertClientBD&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;tel&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;sql&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                 &lt;span class="s"&gt;&amp;quot;INSERT INTO CLIENTS (nom, adr, telefons) VALUES (%s,%s,CAST(%s AS Telefon[]))&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                 &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tel&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
         &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;insertElementBd&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sql&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;amb&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* Executa una query que generarà una única clau i la retorna */&lt;/span&gt;
&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;insertElementBd&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;sql&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;SQLException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Statement&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;conn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;createStatement&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;executeUpdate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sql&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Statement&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RETURN_GENERATED_KEYS&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;ResultSet&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getGeneratedKeys&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;next&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-15-guardant-client"&gt;
&lt;h3&gt;Exercici 15. Guardant client&lt;/h3&gt;
&lt;p&gt;Completa el codi necessari per que funcioni el mètode
&lt;em&gt;VendesBD.guardaClient(Client)&lt;/em&gt; a partir de les idees anteriors.&lt;/p&gt;
&lt;p&gt;Amplia &lt;em&gt;UsaClient&lt;/em&gt; de manera que mostri com s'afegeix un nou client i
com es modifica un d'existent.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-16-test-de-guardar-client"&gt;
&lt;h3&gt;Exercici 16. ★ Test de guardar client&lt;/h3&gt;
&lt;p&gt;Aquí també hauràs de fer una prova amb la base de dades. En aquest
cas, però, inicialment segurament voldràs assegurar-te que el client
que vols guardar encara no hi sigui.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-17-entorn-operatiu-de-vendes"&gt;
&lt;h3&gt;Exercici 17. Entorn operatiu de Vendes&lt;/h3&gt;
&lt;p&gt;Crea un nou projecte amb Maven anomenat &lt;em&gt;vendes&lt;/em&gt; que ofereixi
una senzilla consola que mostri el &lt;em&gt;prompt&lt;/em&gt;:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
[vendes]:
&lt;/pre&gt;
&lt;p&gt;L'aplicació oferirà les següents opcions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;help&lt;/p&gt;
&lt;p&gt;mostra la llista de comandes vàlides&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;list «element»&lt;/p&gt;
&lt;p&gt;On «element» pot ser un dels següents valors: clients, vips, comandes, comercials, productes.&lt;/p&gt;
&lt;p&gt;Mostra la llista de clients, clients vip, comandes, comercials o
productes.&lt;/p&gt;
&lt;p&gt;En cas que no hi hagi cap element dels demanats, l'aplicació
ho indicarà amb el missatge:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
No s'ha trobat cap «element»
&lt;/pre&gt;
&lt;p&gt;En cas que es demani un tipus d'element que no correspongui amb un
dels cinc indicats, l'aplicació mostrarà el missatge:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Element «element»
&lt;/pre&gt;
&lt;p&gt;A l'hora de mostrar els clients, es farà omplint la següent
plantilla per cada client:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Client [ «nif» ]: «tractament» «nom» «cognom»
    Tel.: «tipus» «prefix» «nr.»
          «tipus» «prefix» «nr.»
          «...»
    Adr.: «primera línia carrer»
          «segona línia carrer»
          «...»
          «codi postal» «ciutat»
          «país»
&lt;/pre&gt;
&lt;p&gt;A l'hora de mostrar els clients VIP, la plantilla serà molt similar
a la de clients:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Client VIP [ «nif» ]: «tractament» «nom» «cognom»
    Tel.: «tipus» «prefix» «nr.»
          «tipus» «prefix» «nr.»
          «...»
    Adr.: «primera línia carrer»
          «segona línia carrer»
          «...»
          «codi postal» «ciutat»
          «país»
    Comercial: «tractament» «nom» «cognom»
&lt;/pre&gt;
&lt;p&gt;Quan el client demana mostrar la llista de clients, apareixeran
barrejats tant
els clients VIPs com els que no ho siguin. Amb tot, els clients VIPs
es mostraran amb la seva pròpia plantilla.&lt;/p&gt;
&lt;p&gt;Els comercials es mostraran segons la plantilla:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Comercial:
&lt;/pre&gt;
&lt;p&gt;Les comandes es mostraran segons la plantilla
&lt;a class="footnote-reference" href="#simplicitatidcomanda" id="id8"&gt;[7]&lt;/a&gt;:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Comanda [«id»]
    data: «dia/mes/any»
    client: [«nif»]: «tractament» «nom» «cognom»
    detall:
         nr  producte       quantitat   preu unit      import
        001: «nom producte» «quantitat» «preu unitari» «import»
        002: «nom producte» «quantitat» «preu unitari» «import»
        «...»
    import total: «import total de la comanda»
&lt;/pre&gt;
&lt;p&gt;En el cas dels productes, es mostraran segons la plantilla
&lt;a class="footnote-reference" href="#simplicitatidproducte" id="id9"&gt;[8]&lt;/a&gt;:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Producte [«id»]: «nom»
    preu unitari: «preu»
    estoc: «estoc»
&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;add client&lt;/p&gt;
&lt;p&gt;Permet donar d'alta un client. L'aplicació demanarà interactivament
les següents dades tot indicant el nom de la dada seguit de dos
punts.&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;nif:&lt;/li&gt;
&lt;li&gt;nom:&lt;/li&gt;
&lt;li&gt;cognoms:&lt;/li&gt;
&lt;li&gt;telèfon 1&lt;ul&gt;
&lt;li&gt;tipus de telèfon (m: mòbil, i: fix, a: fax, x: finalitzar telèfon)&lt;/li&gt;
&lt;li&gt;prefix:&lt;/li&gt;
&lt;li&gt;número:&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;telèfon 2&lt;ul&gt;
&lt;li&gt;«...»&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;adreça&lt;ul&gt;
&lt;li&gt;carrer (introduir línies amb la darrera en blanc per finalitzar):&lt;/li&gt;
&lt;li&gt;codi postal:&lt;/li&gt;
&lt;li&gt;ciutat:&lt;/li&gt;
&lt;li&gt;país:&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En cas que el nif proporcionat pertanyi a un client existent,
s'indicarà l'error i se li permetrà corregir o cancel·lar l'alta:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Ja existeix un client amb aquest nif. e: editar, c: cancelar
&lt;/pre&gt;
&lt;p&gt;En el moment en que l'usuari indiqui 'x' al tipus de telèfon, ja no
se li demanarà més dades de telèfon.&lt;/p&gt;
&lt;p&gt;Es requerirà especificar al menys un telèfon.&lt;/p&gt;
&lt;p&gt;En el moment en que l'usuari introdueixi una línia en blanc, es
considerarà finalitzada la introducció de línies de carrer.&lt;/p&gt;
&lt;p&gt;Es requerirà especificar al menys una línia de carrer.&lt;/p&gt;
&lt;p&gt;Un cop obtingudes totes les dades, es mostraran (segons plantilla de
client) i es demanarà confirmació amb el missatge:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Procedir als canvis (s: sí, e: editar, c: cancelar)
&lt;/pre&gt;
&lt;p&gt;En cas que l'usuari respongui 's', es donarà d'alta el client i, si
tot ha anat correcte, mostrarà el missatge:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
D'acord
&lt;/pre&gt;
&lt;p&gt;En cas que la resposta sigui 'c', es mostrarà el missatge:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Cap canvi
&lt;/pre&gt;
&lt;p&gt;Finalment, per qualsevol altra resposta es procedirà a editar les
dades del client (veure opció &lt;em&gt;edit&lt;/em&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;set client «nif client» as vip «nif comercial»&lt;/p&gt;
&lt;p&gt;Converteix un client estàndard a VIP, o si ja ho era, li assigna un
nou comercial.&lt;/p&gt;
&lt;p&gt;En cas que el nif del client no correspongui a cap client de la base
de dades, es mostrarà el missatge:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
No es troba cap client amb el nif «nif client»
&lt;/pre&gt;
&lt;p&gt;De la mateixa manera, si no es troba cap comercial amb el nif
indicat, es mostrarà el missatge:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
No es troba cap comercial amb el nif «nif client»
&lt;/pre&gt;
&lt;p&gt;En cas d'error, se li mostrarà l'opció de tornar a intentar-ho o bé
cancel·lar la comanda:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Premi r per reintentar o c per cancel·lar.
&lt;/pre&gt;
&lt;p&gt;Un cop es disposi de totes les dades correctes, es mostrarà els
canvis a realitzar (plantilla client VIP) i es demanarà confirmació:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Aplicar els canvis (s: sí, c: cancel·lar)
&lt;/pre&gt;
&lt;p&gt;Es respondrà de la manera especificada a la confirmació de l'alta de
client.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;unset vip «nif»&lt;/p&gt;
&lt;p&gt;Converteix un client vip a un client normal. És a dir, s'elimina
l'associació del client amb un comercial.&lt;/p&gt;
&lt;p&gt;En cas que el client no sigui vip, s'indicarà amb el missatge:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
El client no era vip
&lt;/pre&gt;
&lt;p&gt;Altrament, es demanarà confirmació:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Fer que el client deixi de ser vip (s: sí, c: cancelar)
&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;add comanda&lt;/p&gt;
&lt;p&gt;Permet afegir una nova comanda.&lt;/p&gt;
&lt;p&gt;Demanarà interactivament les dades de la comanda:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;nif del client:&lt;/li&gt;
&lt;li&gt;data («data actual»):&lt;/li&gt;
&lt;li&gt;línies de comanda:&lt;ul&gt;
&lt;li&gt;producte línia 001 (blanc per finalitzar):&lt;/li&gt;
&lt;li&gt;quantitat&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En cas que el nif proporcionat no correspongui a un client conegut
es mostrarà el missatge d'error corresponent com a l'opció
de convertir client a client vip.&lt;/p&gt;
&lt;p&gt;En quan a la data, es proposarà la data d'avui (en format
dia/mes/any). Si l'usuari prem enter (cadena en blanc), es
considerarà que accepta la data proposada.&lt;/p&gt;
&lt;p&gt;El producte de les línies de comanda s'especificarà mitjançant
l'identificador de producte. Si no es troba cap producte amb aquest
id, s'indicarà l'error amb el missatge:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
No es troba cap producte amb l'identificador «id»
&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;add «element»&lt;/p&gt;
&lt;p&gt;On element pot ser comercial o producte.&lt;/p&gt;
&lt;p&gt;La interacció és molt similar a afegir client&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;edit client «nif»&lt;/p&gt;
&lt;p&gt;Permet modificar qualsevol de les dades de client (excepte l'id
intern)&lt;/p&gt;
&lt;p&gt;En cas que el nif no correspongui a cap client, es mostrarà el
missatge d'error corresponent. Si l'usuari vol tornar-ho a intentar,
haurà de tornar a llençar la comanda un altre cop.&lt;/p&gt;
&lt;p&gt;Demanarà cada dada pel seu nom, seguit del valor actual entre
parèntesis. D'aquesta manera, si l'usuari vol, pot respondre en
blanc per conservar el valor previ. Per exemple, amb el nif:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
nif («nif actual»):
&lt;/pre&gt;
&lt;p&gt;Finalment es procedirà a mostrar les dades recollides i a demanar
confirmació a l'estil de l'alta de client.&lt;/p&gt;
&lt;p&gt;Per simplicitat, encara que el client correspongui a un client VIP,
no es permetrà editar el nif del comercial associat.&lt;/p&gt;
&lt;p&gt;En cas que aparegui algun error (ex. el nou nif correspongui a un
altre client) es mostrarà el missatge d'error corresponent.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;edit «element» «id»&lt;/p&gt;
&lt;p&gt;Permet editar les dades d'una comanda, comercial o producte.&lt;/p&gt;
&lt;p&gt;En cas de ser un comercial, «id» es refereix al seu nif.&lt;/p&gt;
&lt;p&gt;El comportament és molt similar al de la modificació de client.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;del «element» «id»&lt;/p&gt;
&lt;p&gt;Permet eliminar un client, comercial, producte o comanda.&lt;/p&gt;
&lt;p&gt;En cas que l'element sigui un client o un comercial, «id» es
refereix al seu nif.&lt;/p&gt;
&lt;p&gt;En cas que no es pugui trobar cap element amb aquest identificador,
es mostrarà el missatge d'error corresponent seguit del prompt.&lt;/p&gt;
&lt;p&gt;En cas que s'hagi trobat l'element a eliminar, es mostrarà les seves
dades amb la plantilla corresponent, i es demanarà confirmació.&lt;/p&gt;
&lt;p&gt;En el cas d'eliminar un client, cal tenir present que pot tenir
comandes associades. Per això, al final de les dades del client,
caldrà indicar que s'eliminaran també les comandes del client:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
S'eliminaran «n» comandes
&lt;/pre&gt;
&lt;p&gt;En el cas de productes o comercials, no es permetrà eliminar-los si
tenen comandes o clients associats (respectivament) amb el missatge:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
No es pot eliminar el producte perquè té les següents comandes
associades:
    «capçalera de cada comanda»
&lt;/pre&gt;
&lt;p&gt;o:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
No es pot eliminar el comercial perquè té els següents clients
associats: ::
    «nif» «tractament» «nom» «cognoms»
    «...»
&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;show «element»&lt;/p&gt;
&lt;p&gt;Permet mostrar els detalls d'un element (client o comercial)&lt;/p&gt;
&lt;p&gt;En cas de client, es mostrarà, a banda de les dades del client
(segons plantilla), les dades resumides de les comandes realitzades
(la plantilla de comandes sense el detall de línies) i l'import
total de totes les comandes realitzades.&lt;/p&gt;
&lt;p&gt;En el cas de comercial, es mostrarà, a banda de les dades del
comercial, la llista de clients associats. Es tracta de la plantilla
completa de client vip (per simplicitat s'accepta la redundància de
mostrar el nif del comercial) més l'import total de les comandes del
client (sense detall de comandes). Finalment, es mostrarà l'import
total de les despeses de tots els clients del comercial.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;quit&lt;/p&gt;
&lt;p&gt;Finalitzarà l'aplicació&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="requeriments-addicionals"&gt;
&lt;h4&gt;Requeriments addicionals&lt;/h4&gt;
&lt;p&gt;Estructura el projecte de manera similar a la descrita a l'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/jdbc-ii-model-relacional.html"&gt;exercici 2
del model relacional&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;De la mateixa manera, l'aplicació vendes requerirà la contrasenya per
a poder connectar a la base de dades i es comportarà de com al
gestoranimals.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="pistes"&gt;
&lt;h4&gt;Pistes&lt;/h4&gt;
&lt;p&gt;A banda de les pistes de l'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/jdbc-ii-model-relacional.html"&gt;exercici 2 del model relacional&lt;/a&gt;,
considera:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;realitzar les modificacions completes. És a dir, encara que s'hagi
modificat només un número de telèfon d'un client, es guarda &lt;strong&gt;tot&lt;/strong&gt;
el client.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-18-prova-de-vendes"&gt;
&lt;h3&gt;Exercici 18. ★ Prova de Vendes&lt;/h3&gt;
&lt;p&gt;En aquest exercici d'ampliació, et proposo que agrupis totes les
proves que hagis preparat en els exercicis d'ampliació previs.&lt;/p&gt;
&lt;p&gt;A més, potser voldràs provar que funcionen les diferents restriccions
(ex. que no es puguin eliminar comercials amb clients associats, o que
la informació d'import total de client sigui l'esperada...)&lt;/p&gt;
&lt;p&gt;Com a l'ampliació de  l'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/jdbc-ii-model-relacional.html"&gt;exercici 2 del model relacional&lt;/a&gt;, no cal que
implementis proves amb un 100% de cobertura.  Únicament recorda que
per poc que facis en aquest exercici, segur que el codi de la teva
aplicació i, el més important, la teva manera de codificar, hauran
millorat ostensiblement. Fes la prova!&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="suportstruct" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En el moment en que es va composar aquest document,
el driver &lt;em&gt;oficial&lt;/em&gt; de PostGreSQL encara no disposava
d'implementació per la interfície &lt;tt class="docutils literal"&gt;java.sql.Struct&lt;/tt&gt; que seria la
que ens aniria bé aquí. Qui no té paciència ha de tenir recursos...&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="regexsimple" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Veureu que s'han realitzat algunes modificacions al
string que conté la tupla, de manera que l'expressió regular sigui
més senzilla. Si et ve de gust intentar-ho sense aquests trucs,
estaré encantat si la vols compartir.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="coalesce" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id6"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Un agraïment per l'alumne Gerardo Galán que tan
oportunament ens va apuntar cap aquesta solució.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="principispooalterra" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;[4]&lt;/td&gt;&lt;td&gt;&lt;em&gt;(&lt;a class="fn-backref" href="#id3"&gt;1&lt;/a&gt;, &lt;a class="fn-backref" href="#id7"&gt;2&lt;/a&gt;)&lt;/em&gt; Sabem que aquesta no és una bona pràctica en
programació orientada a objectes. És cert. Les classes
&lt;em&gt;VendesParser&lt;/em&gt; i &lt;em&gt;VendesBD&lt;/em&gt; saben &lt;em&gt;massa&lt;/em&gt; de les intimitats
d'altres classes com ara &lt;em&gt;Denominacio&lt;/em&gt;. Per tant, estem creant
dependències important. Amb tot, aquest tipus de classes ens
permeten agrupar elements complexos en un sol lloc i és una
pràctica coneguda i molt utilitzada.  Considera-ho com una mena de
catifa on escombrem la brossa un dia amb pressesa.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="messofisticat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[5]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si vols fer-ho més sofisticat, pots codificar
l'identificador amb un &lt;em&gt;Integer&lt;/em&gt; i posar-lo a &lt;em&gt;null&lt;/em&gt; quan no
estigui assignat.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="threadsafe" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[6]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En aquests materials no estem considerant els
problemes que poden esdevenir d'una execució multifil
(&lt;em&gt;multithread&lt;/em&gt;).&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="simplicitatidcomanda" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id8"&gt;[7]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Per simplicitat, farem servir directament
l'identificador intern de la taula COMANDES.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="simplicitatidproducte" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id9"&gt;[8]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Per simplicitat, farem servir directament
l'identificador intern de la taula PRODUCTES, tot i que en un
context més real, probablement disposaríem d'un SKU (Stock Keep
Unit) o nr. de referència.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="PostGreSQL"></category><category term="java"></category></entry><entry><title>Introducció al control de versions</title><link href="http://apuntstecnics.herokuapp.com/introduccio-al-control-de-versions.html" rel="alternate"></link><updated>2015-04-09T16:20:42+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-04-09:introduccio-al-control-de-versions.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document és una introducció al control de versions. Està
orientat especialment a la gestió de versions de programari i escull
el gestor de versions Git com a concreció.&lt;/p&gt;
&lt;p&gt;Tot i que he composat aquesta introducció a partir de diverses fonts,
hi ha dues que vull ressaltar:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;el &lt;a class="reference external" href="https://www.kernel.org/pub/software/scm/git/docs/"&gt;manual oficial de Git&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;el llibre de Scott Chacon &lt;a class="reference external" href="http://git-scm.com/book"&gt;Pro Git&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Aquesta introducció suposa que estàs fent servir un sistema compatible
POSIX (ex. alguna distribució GNU/Linux). Això bàsicament es veurà
reflectit en la sintaxi que apareixerà a la línia de comandes, i no
hauria de representar-te cap obstacle si estàs fent servir qualsevol
dels sistemes operatius que suporten Git.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="control-de-versions"&gt;
&lt;h2&gt;Control de versions&lt;/h2&gt;
&lt;p&gt;Els documents, com pràcticament tot, canvien al llarg de la seva vida.&lt;/p&gt;
&lt;p&gt;Considerem les següents situacions durant la vida d'una aplicació:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;A partir d'uns requeriments el creem i comencem a composar-la.
Normalment serà prou complexa com per què inclogui més d'un fitxer
de diferents tipus (com ara codi, icones, etc) i
ens porti uns dies finalitzar-la.&lt;/li&gt;
&lt;li&gt;De tant en tant, alguna prova ens indicarà que hi ha alguna part que
no acaba d'anar bé i ens caldrà modificar-la.&lt;/li&gt;
&lt;li&gt;Un cop finalitzat i provat, el posarem en producció on, després d'un
temps apareixeran errors fins llavors no detectats o noves
funcionalitats a afegir-hi.&lt;/li&gt;
&lt;li&gt;De vegades, alguna de les modificacions que hi afegim, eliminen
parts del codi que després voldríem recuperar.&lt;/li&gt;
&lt;li&gt;D'altres vegades, una modificació feta sota pressió fa malbé altres
parts del programa i, a sobre, deixa el codi en un estat que costa
molt de refer-ho com era abans.&lt;/li&gt;
&lt;li&gt;Altres vegades voldrem provar si el programa suportaria una certa
modificació, però no voldrem modificar el programa original a menys
que el resultat ens sigui satisfactori.&lt;/li&gt;
&lt;li&gt;Fins i tot pot passar que ens trobem amb el nostre programa en
producció i a l'hora estiguem afegint noves funcionalitats per la
següent versió del programa, i de sobte ens toqui fer alguna
modificació en la versió de producció (per exemple, perquè s'ha
detectat un error). Encara no podem lliurar la versió amb que estem
treballant potser perquè falta molt per finalitzar-la, i tampoc no
voldrem modificar només la versió de producció (si tenim la sort de
guardar una còpia del codi font) perquè els canvis no es veuran a la
versió en que estem treballant.&lt;/li&gt;
&lt;li&gt;Potser tampoc sempre podrem treballar en la nostra aplicació des del
mateix equip. De vegades ens trobarem a l'equip de la feina,
d'altres amb el de casa, amb un portàtil, etc. Quan modifiquem
alguna cosa en un dels equips, ens trobarem havent d'assegurar-nos
que passem els canvis a la resta d'equips en els que treballem.&lt;/li&gt;
&lt;li&gt;Encara més, sovint no treballarem sols en la nostra aplicació. Amb
prou disciplina, podem organitzar-nos els diferents membres de
l'equip per treballar en parts independents del codi. Però
segurament ja saps les persones no sempre seguim bé les pautes, i
tard o d'hora algun company (potser tu!) necessitarà fer un canvi en
un dels arxius d'un altre, o esborrarà inadvertidament un fitxer del
que depen la feina d'un altre, etc.&lt;/li&gt;
&lt;li&gt;Un cas cada cop més freqüent el trobem amb treballadors que
treballen de manera exclusivament telemàtica &lt;a class="footnote-reference" href="#treballtelematic" id="id1"&gt;[5]&lt;/a&gt; En
aquest cas, el posar-se d'acord per organitzar les diferents
aportacions de cada desenvolupador es complica amb la distància.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per poc que hagis desenvolupat, intuiràs que aquests escenaris, i
molts altres de similars, no són pas possibilitats remotes sinó més
aviat el dia a dia dels desenvolupadors.&lt;/p&gt;
&lt;p&gt;Quan treballes sol i sempre amb el mateix equip, potser guardant unes
còpies de seguretat de tant en tant i amb molt de
compte, pots anar tirant si l'aplicació és senzilleta i requereix pocs
canvis i aquests no són urgents.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="local" src="http://apuntstecnics.herokuapp.com/images/git.intro.img001.local.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Quan comences a afegir més
complexitat, acabes amb una munió de carpetes, amb sort anomenades amb
alguna marca de temps (la data de la còpia) o de seqüència (1.0.0.1,
1.0.0.2, etc.) o pitjor (la_darrera, la_darrera2, ladelamarta,
ladelamarta_modificadapeljoan, la_que_tracta_els_accents,
aquesta_si_final, definitiva, definitiva2,
definitivahojuropersnoopy...) Aquestes carpetes les aniràs guardant en
diferents suports, enviant per correu a la companya, etc. fins que
arribarà un moment que no sabreu quina és la versió &amp;quot;actual&amp;quot; amb la
que treballar, haureu perdut un munt de codi, de temps reprogramant el
que altres (potser un mateix) ja havia programat abans. Quan la
situació sigui insostenible, probablement us reunireu tot l'equip,
guardareu totes les còpies en una carpeta anomenada backup201209 o
similar, i començareu de nou amb molt bona voluntat i fixant-vos
alguna pauta d'anomenar versions que en poc temps estarà tan
descontrolada com la que guardeu a backup201209.&lt;/p&gt;
&lt;div class="section" id="que-es-un-sistema-de-control-de-versions"&gt;
&lt;h3&gt;Què és un sistema de control de versions?&lt;/h3&gt;
&lt;p&gt;Un &lt;em&gt;sistema de control de versions&lt;/em&gt; (&lt;em&gt;SCV&lt;/em&gt;) o &lt;em&gt;Version Control System&lt;/em&gt;
(&lt;em&gt;VCS&lt;/em&gt;) és una aplicació que ofereix mecanismes per gestionar les
diferents versions d'un o més fitxers de manera que eviti la pèrdua de
continguts un cop enregistrat i permeti recuperar qualsevol versió un
cop enregistrada. Alguns també permeten gestionar la complexitat de
treball en grup i des de diferents equips.&lt;/p&gt;
&lt;p&gt;Un SCV &lt;em&gt;com cal&lt;/em&gt; ens haurà de permetre, entre d'altres:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;recuperar un estat anterior d'arxius concrets o de tot el projecte&lt;/li&gt;
&lt;li&gt;revisar els canvis realitzats al llarg del temps en arxius o grups
d'arxius.&lt;/li&gt;
&lt;li&gt;recuperar arxius eliminats accidentalment&lt;/li&gt;
&lt;li&gt;comparar diferents versions d'un arxiu&lt;/li&gt;
&lt;li&gt;comprovar si una determinada modificació pot ser útil sense que la
prova afecti la resta de l'aplicació.&lt;/li&gt;
&lt;li&gt;mantenir simultàniament diferents línies d'un mateix projecte: ex.
versió de producció i nova versió.&lt;/li&gt;
&lt;li&gt;facilitar la fusió de diferents versions&lt;/li&gt;
&lt;li&gt;facilitar la integració de canvis realitzats per diferents membres
de l'equip&lt;/li&gt;
&lt;li&gt;fer tot això sense afegir una sobrecàrrega excessiva&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="scv-centralitzats"&gt;
&lt;h3&gt;SCV centralitzats&lt;/h3&gt;
&lt;p&gt;Un dels principals problemes a resoldre pel SCV es troba en la gestió
de versions produïdes per més d'un desenvolupador o/i en diferents
equips.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="centralitzat" src="http://apuntstecnics.herokuapp.com/images/git.intro.img002.centralitzat.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Aquests SCV, com ara &lt;a class="reference external" href="http://cvs.nongnu.org/"&gt;CVS&lt;/a&gt;, &lt;a class="reference external" href="http://subversion.apache.org/"&gt;Subversion&lt;/a&gt; i &lt;a class="reference external" href="http://www.perforce.com/"&gt;Perforce&lt;/a&gt;, disposen d'un únic servidor (el
repositori central) que conté totes les versions registrades. Els
usuaris es descarreguen la versió que els interessa del servidor als
seus equips i, quan realitzen modificacions, les envien al servidor.
L'administrador del repositori disposa normalment de moltes eines per
controlar qui pot enviar què al servidor, realitzar fusions entre
versions, etc.&lt;/p&gt;
&lt;p&gt;Un dels problemes obvis amb aquest tipus de SCVs és la seva
dependència amb un sol punt. Què passa si el servidor deixa d'estar
disponible una estona? Doncs que durant aquest temps ningú no pot
treballar amb cap versió diferent de la que tingui al seu equip.
Encara pitjor, i si el disc del servidor es trenca? Depenem de les
còpies de seguretat que fes el servidor, donat que les còpies locals
de cadascun dels usuaris són de versions úniques i, potser,
modificades.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="scv-distribuits"&gt;
&lt;h3&gt;SCV distribuïts&lt;/h3&gt;
&lt;p&gt;Alguns dels problemes dels SCV centralitzats els intenten adreçar els
SCV distribuïts.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="distribuït" src="http://apuntstecnics.herokuapp.com/images/git.intro.img003.distribuit.png" /&gt;
&lt;/div&gt;
&lt;p&gt;En aquest cas, cada usuari disposa d'una còpia de &lt;strong&gt;totes&lt;/strong&gt; les
versions registrades. El servidor &amp;quot;central&amp;quot; pot no existir o haver-ne
més d'un. En cas que n'hi hagi, es diferenciarà dels equips dels
usuaris únicament en que no tindrà espai de treball.&lt;/p&gt;
&lt;p&gt;Exemples de SCV distribuïts són &lt;a class="reference external" href="http://git-scm.com/"&gt;Git&lt;/a&gt;,
&lt;a class="reference external" href="http://mercurial.selenic.com/"&gt;Mercurial&lt;/a&gt;, &lt;a class="reference external" href="http://bazaar.canonical.com/en/"&gt;Bazaar&lt;/a&gt; i Darcs &amp;lt;&lt;a class="reference external" href="http://darcs.net/"&gt;http://darcs.net/&lt;/a&gt;&amp;gt;`_.&lt;/p&gt;
&lt;p&gt;Entre els avantatges d'aquest tipus de SCVs tenim l'evident que ja no
hi ha una dependència del servidor per a poder treballar. Si un cau,
la resta poden continuar treballant (excepte per sincronitzar amb
l'equip caigut, és clar) A més, donat que cada usuari disposa d'una
còpia amb tot el repositori de versions, la majoria de les operacions
més habituals no requereixen comunicació entre equips i, per tant, són
més ràpides. Per contra tenen el problema de l'espai ocupat pels
fitxers de totes les versions. Sovint això no representa cap problema
amb les capacitats d'emmagatzemament i compressió actuals.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id2"&gt;
&lt;h2&gt;Git&lt;/h2&gt;
&lt;p&gt;Git és un sistema de control de versions distribuït dissenyat per
gestionar projectes de qualsevol mida. És programari obert i gratuït.&lt;/p&gt;
&lt;p&gt;El funcionament de Git, en breu, és el següent: cada cop que registres
l'estat del teu projecte, Git guarda una &lt;em&gt;foto&lt;/em&gt; (&lt;em&gt;snapshot&lt;/em&gt;) del
contingut de &lt;strong&gt;tots&lt;/strong&gt; els fitxers que composen el projecte
&lt;a class="footnote-reference" href="#gitdiferentdaltres" id="id3"&gt;[1]&lt;/a&gt;. Per qüestions d'eficiència, en comptes de
tornar a guardar els fitxers no modificats, simplement en guarda un
enllaç.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="snapshots" src="http://apuntstecnics.herokuapp.com/images/git.intro.img004.snapshots.png" /&gt;
&lt;/div&gt;
&lt;p&gt;A l'esquema anterior, veiem com els tres fitxers gestionats per al
projecte representat, van sent emmagatzemats a partir dels canvis que
apareixen a cada versió guardada. A la versió 1 els fitxers A i C han
estat modificats i Git guarda els seus nous continguts. En canvi el
fitxer B no presenta cap canvi i, per tant, només es guarda un enllaç
al fitxer original.&lt;/p&gt;
&lt;p&gt;Per cada fitxer, Git calcula un valor de hash (checksum) per cada
fitxer, de manera que no se li escapa cap modificació, tant si l'hem
feta expressament com si s'ha produït accidentalment. La funció que fa
servir és diu &lt;a class="reference external" href="http://ca.wikipedia.org/wiki/Secure_Hash_Algorithm"&gt;SHA-1&lt;/a&gt; que genera un
string de 40 caràcters hexadecimals [0-9a-f]. Aquests strings
identifiquen cada (versió de) fitxer dins de Git en comptes del nom.&lt;/p&gt;
&lt;p&gt;La majoria de les accions que permet fer Git afegeixen dades al
repositori. D'aquesta manera no és fàcil perdre informació i, per
tant, podem experimentar amb tranquil·litat.&lt;/p&gt;
&lt;p&gt;Per Git, tot fitxer gestionat es troba principalment en un dels
següents tres estats &lt;a class="footnote-reference" href="#hihamesestats" id="id4"&gt;[4]&lt;/a&gt;: registrat (&lt;em&gt;commited&lt;/em&gt;), modificat i en escena
(&lt;em&gt;staged&lt;/em&gt;) &lt;a class="footnote-reference" href="#terminologiaanglesa" id="id5"&gt;[2]&lt;/a&gt;.&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;em&gt;commited&lt;/em&gt;: tens l'estat actual del fitxer registrat en el
repositori.&lt;/li&gt;
&lt;li&gt;modificat: has modificat el fitxer i però encara no has indicat
res sobre els canvis a Git.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;staged&lt;/em&gt;: has modificat el fitxer i has indicat a Git que registri
el nou estat al repositori la propera vegada que es guardi l'estat
del projecte (es faci &lt;em&gt;commit&lt;/em&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Tenint en comptes aquests estats, els fitxers es troben guardats en
tres àrees diferents: el directori de treball, l'escenari (àrea
&lt;em&gt;staging&lt;/em&gt;) i el repositori de Git.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="estats" src="http://apuntstecnics.herokuapp.com/images/git.intro.img005.estats.png" /&gt;
&lt;/div&gt;
&lt;p&gt;El repositori és bàsicament un directori amb una estructura particular
on Git emmagatzema les diferents versions i la meta-informació per
gestionar-les. Tot plegat es guarda comprimit d'una manera força
eficient &lt;a class="footnote-reference" href="#fitxerscomprimits" id="id6"&gt;[3]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;El directori de treball és una única versió del projecte. El procés
d'obtenir una determinada versió del repositori es coneix com a
&lt;em&gt;checkout&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Finalment, l'àrea de &lt;em&gt;staging&lt;/em&gt; és un fitxer, probablement guardat dins
del directori de Git, que conté informació sobre el que es registrarà
el proper &lt;em&gt;commit&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Habitualment, modificaràs un o més fitxers en l'àrea de treball,
passaràs els fitxers modificats que t'interessin a l'àrea de &lt;em&gt;staging&lt;/em&gt;
i finalment fas un &lt;em&gt;commit&lt;/em&gt; amb el que els canvis registrats a
&lt;em&gt;staging&lt;/em&gt; passen definitivament al repositori.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="installacio-i-configuracio"&gt;
&lt;h2&gt;Instal·lació i configuració&lt;/h2&gt;
&lt;p&gt;Per la instal·lació de Git, disposes d'una guia força detallada a la
secció &lt;a class="reference external" href="http://git-scm.com/book/en/Getting-Started-Installing-Git"&gt;1.4 de Pro Git&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Si estàs fent servir Ubuntu, probablement tindràs prou escrivint a una
consola:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ apt-get install git
&lt;/pre&gt;
&lt;p&gt;Un cop el tinguis instal·lat, cal que facis unes petites tasques de
configuració. En concret, cal indicar a Git qui ets. Això ho faràs amb
les següents comandes:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ git config --global user.name &amp;quot;Moisès Gómez Girón&amp;quot;
$ git config --global user.email iesmoises&amp;#64;example.org
&lt;/pre&gt;
&lt;p&gt;Aquesta informació serà guardada en el teu sistema per al teu usuari.
Així, altres usuaris poden fer servir Git en el teu equip sense
problemes.&lt;/p&gt;
&lt;p&gt;Ara que ja tens el Git disponible al teu sistema, pots començar a
utilitzar-lo.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="git-en-local"&gt;
&lt;h2&gt;Git en local&lt;/h2&gt;
&lt;p&gt;A aquesta secció hi trobaràs com realitzar les tasques que més
freqüentment necessitaràs de Git.&lt;/p&gt;
&lt;div class="section" id="obtencio-d-ajuda"&gt;
&lt;h3&gt;Obtenció d'ajuda&lt;/h3&gt;
&lt;p&gt;Git incorpora un sistema raonablement còmode per obtenir ajuda de les
diferents comandes que ofereix. Per obtenir la llista, simplement
escriu:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ git help
usage: git [--version] [--exec-path[=&amp;lt;path&amp;gt;]] [--html-path] [--man-path] [--info-path]
           [-p|--paginate|--no-pager] [--no-replace-objects] [--bare]
           [--git-dir=&amp;lt;path&amp;gt;] [--work-tree=&amp;lt;path&amp;gt;] [--namespace=&amp;lt;name&amp;gt;]
           [-c name=value] [--help]
           &amp;lt;command&amp;gt; [&amp;lt;args&amp;gt;]

The most commonly used git commands are:
   add        Add file contents to the index
   bisect     Find by binary search the change that introduced a bug
   branch     List, create, or delete branches
   checkout   Checkout a branch or paths to the working tree
   clone      Clone a repository into a new directory
   commit     Record changes to the repository
   diff       Show changes between commits, commit and working tree, etc
   fetch      Download objects and refs from another repository
   grep       Print lines matching a pattern
   init       Create an empty git repository or reinitialize an existing one
   log        Show commit logs
   merge      Join two or more development histories together
   mv         Move or rename a file, a directory, or a symlink
   pull       Fetch from and merge with another repository or a local branch
   push       Update remote refs along with associated objects
   rebase     Forward-port local commits to the updated upstream head
   reset      Reset current HEAD to the specified state
   rm         Remove files from the working tree and from the index
   show       Show various types of objects
   status     Show the working tree status
   tag        Create, list, delete or verify a tag object signed with GPG

See 'git help &amp;lt;command&amp;gt;' for more information on a specific command.
&lt;/pre&gt;
&lt;p&gt;Com ja indica a la darrera línia, si vols ajuda específica d'una
determinada comanda, simplement indica-ho, per exemple amb&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ git help config
&lt;/pre&gt;
&lt;p&gt;Aquesta comanda t'obrirà el manual de la comanda &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;git-config&lt;/span&gt;&lt;/tt&gt; (que
realment és la que executes quan fas &lt;tt class="docutils literal"&gt;$ git config &lt;span class="pre"&gt;«...»&lt;/span&gt;&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Tot i completa, aquesta ajuda requereix estar força encaminat al què
necessites.&lt;/p&gt;
&lt;p&gt;Per altra banda, vàries de les comandes Git també t'informaran de
comandes associades que possiblement vulguis fer.&lt;/p&gt;
&lt;p&gt;Si amb tot no en tens prou per trobar com fer alguna cosa, gràcies a
l'ús extensiu de Git, amb molta seguretat trobaràs resposta al que
necessitis a partir d'una pregunta adequada al teu cercador web
preferit.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="us-local-de-git"&gt;
&lt;h2&gt;Ús local de Git&lt;/h2&gt;
&lt;p&gt;En aquesta secció es mostren les comandes més freqüents que faràs
servir amb Git.&lt;/p&gt;
&lt;p&gt;Si vols seguir aquesta secció com un tutorial pràctic, et proposo que
et creis un directori i hi afegeixis algun fitxer. Per exemple:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ mkdir projecte
$ cd projecte
projecte$ echo &amp;quot;hola&amp;quot; &amp;gt; hola.txt
&lt;/pre&gt;
&lt;div class="section" id="creacio-d-un-repositori-init"&gt;
&lt;h3&gt;Creació d'un repositori: init&lt;/h3&gt;
&lt;p&gt;Poques coses et seran més fàcils que crear un nou repositori Git&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git init
&lt;/pre&gt;
&lt;p&gt;Això et generarà un directori anomenat &lt;tt class="docutils literal"&gt;.git&lt;/tt&gt; que en sistemes POSIX
apareixerà ocult. Pots tafanejar dins del directori però, a menys que
sàpigues molt bé el que fas, millor que no hi toquis res.&lt;/p&gt;
&lt;p&gt;Donat que aquesta secció és queda tan curta, l'amplio dient-te com
eliminar un repositori git. Simplement elimina el directori &lt;tt class="docutils literal"&gt;.git/&lt;/tt&gt;
que t'ha generat &lt;tt class="docutils literal"&gt;git init&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Nota&lt;/em&gt; en cas que el que vulguem crear sigui un repositori sense
directori de treball, podem fer servir l'opció &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;--bare&lt;/span&gt;&lt;/tt&gt;:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte_bak$ git --bare init
&lt;/pre&gt;
&lt;p&gt;En aquest cas, només disposarem del directori on git guarda la base
de dades amb les diferents versions que gestiona.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="afegir-fitxers-a-la-gestio-add"&gt;
&lt;h3&gt;Afegir fitxers a la gestió: add&lt;/h3&gt;
&lt;p&gt;Un cop has creat el repositori Git, voldràs afegir-hi fitxers. Potser
són fitxers nous o potser d'existents. Sigui com sigui, quan tinguis
fitxers per a accedir-hi, faràs servir la comanda &lt;tt class="docutils literal"&gt;git add&lt;/tt&gt;&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git add hola.txt
&lt;/pre&gt;
&lt;p&gt;Amb això simplement hem indicat a Git que la propera vegada que
registrem els canvis (amb &lt;tt class="docutils literal"&gt;commit&lt;/tt&gt;) comenci a considerar aquest
fitxer com a gestionat.&lt;/p&gt;
&lt;p&gt;Podem fer que Git afegeixi el contingut de tot un directori. Per
exemple, la següent comanda afegirà tots els codis font java del
directori src&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ git add src/*.java
&lt;/pre&gt;
&lt;p&gt;I la següent comanda afegirà tot el contingut de la carpeta actual:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ git add .
&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="section" id="comprovar-l-estat-status"&gt;
&lt;h3&gt;Comprovar l'estat: status&lt;/h3&gt;
&lt;p&gt;Ja hem vist que els fitxers poden estar en diferents estats des de la
perspectiva de Git.&lt;/p&gt;
&lt;p&gt;Considera el següent diagrama d'estats pels que pot passar un fitxer.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="tots els estats" src="http://apuntstecnics.herokuapp.com/images/git.intro.img006.estatsfull.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Quan crees un nou fitxer en el directori de treball, comença en estat
&lt;em&gt;no gestionat&lt;/em&gt;. Ja hem vist que el podem afegir (i treure) de la
gestió de Git amb la comanda &lt;tt class="docutils literal"&gt;add&lt;/tt&gt; (i &lt;tt class="docutils literal"&gt;rm&lt;/tt&gt;). Un cop està
gestionat, es considerarà &lt;em&gt;no modificat&lt;/em&gt; si el seu contingut
coincideix amb el darrer registrat (&lt;em&gt;commit&lt;/em&gt;). En cas de modificació,
apareixerà com a &lt;em&gt;modificat&lt;/em&gt; (o també &lt;em&gt;unstaged&lt;/em&gt;) fins que el passem a
&lt;em&gt;stage&lt;/em&gt;. Finalment, quan registrem els canvis (amb un &lt;em&gt;commit&lt;/em&gt;) el
fitxer torna a estat &lt;em&gt;no modificat&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;En qualsevol moment pots comprovar l'estat del contingut del teu
directori de treball des de la perspectiva de Git, fent servir la
comanda &lt;tt class="docutils literal"&gt;git status&lt;/tt&gt;.&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git status
# On branch master
#
# Initial commit
#
# Changes to be committed:
#   (use &amp;quot;git rm --cached &amp;lt;file&amp;gt;...&amp;quot; to unstage)
#
#   new file:   hola.txt
#
&lt;/pre&gt;
&lt;p&gt;En aquest cas ens trobem que Git ens informa que:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;estem a la branca de desenvolupament &lt;em&gt;master&lt;/em&gt; (ja veurem més tard
que vol dir això)&lt;/li&gt;
&lt;li&gt;tenim a l'àrea de &lt;em&gt;stage&lt;/em&gt; el fitxer &lt;tt class="docutils literal"&gt;hola.txt&lt;/tt&gt; i el podem eliminar
de &lt;em&gt;stage&lt;/em&gt; si fem servir la comanda &lt;tt class="docutils literal"&gt;git rm&lt;/tt&gt;. Ja t'he dit que les
comandes Git sovint et donaran pistes de comandes relacionades.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="guardar-els-canvis-commit"&gt;
&lt;h3&gt;Guardar els canvis: commit&lt;/h3&gt;
&lt;p&gt;Per registrar els canvis fem servir la comanda &lt;tt class="docutils literal"&gt;git commit&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Ens caldrà indicar un missatge descriptiu dels canvis que registrem.
Per a això disposem de l'opció &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-m&lt;/span&gt;&lt;/tt&gt;. Si no ho fem, Git ens obrirà
l'editor per defecte del sistema (si no l'hem canviat) i ens permetrà
descriure els nostres canvis.&lt;/p&gt;
&lt;p&gt;Els comentaris que indiquem quan fem un &lt;tt class="docutils literal"&gt;commit&lt;/tt&gt; ens resultaran molt
útils quan vulguem recuperar una versió anterior. Així que acostuma't
a posar-hi sempre quelcom significatiu.&lt;/p&gt;
&lt;p&gt;En l'estat del nostre exemple, donat que és el primer &lt;em&gt;commit&lt;/em&gt; podem
fer simplement:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git commit -m &amp;quot;Registre inicial&amp;quot;
[master (root-commit) 527a527] Registre inicial
 1 file changed, 1 insertion(+)
 create mode 100644 hola.txt
projecte$ git status
# On branch master
nothing to commit (working directory clean)
&lt;/pre&gt;
&lt;p&gt;La darrera línia de &lt;em&gt;status&lt;/em&gt; ens indica que el directori de treball no
té cap fitxer no gestionat ni modificat.&lt;/p&gt;
&lt;p&gt;Fixa't també en la cadena hexadecimal de la primera línia generada pel
&lt;em&gt;commit&lt;/em&gt;. &lt;tt class="docutils literal"&gt;527a527&lt;/tt&gt; correspon a la part inicial dels 40 caràcters
que ens genera la funció SHA-1 per aquest commit. Aquest valor ens
servirà més endavant per revisar aquest estat concret del nostre
projecte. No cal que l'apuntis, Git t'ofereix maneres de recuperar-lo.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="passar-a-stage"&gt;
&lt;h3&gt;Passar a &lt;em&gt;stage&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;Per veure com passar canvis a &lt;em&gt;stage&lt;/em&gt; ens cal modificar un fitxer.&lt;/p&gt;
&lt;p&gt;Modifiquem el fitxer &lt;tt class="docutils literal"&gt;hola.txt&lt;/tt&gt; del nostre exemple. Haurem de
canviar-li realment el contingut, donat que Git no considerarà que
està modificat si li fas un simple &lt;tt class="docutils literal"&gt;touch&lt;/tt&gt;:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ echo &amp;quot;adéu&amp;quot; &amp;gt;&amp;gt; hola.txt
projecte$ git status
# On branch master
# Changes not staged for commit:
#   (use &amp;quot;git add &amp;lt;file&amp;gt;...&amp;quot; to update what will be committed)
#   (use &amp;quot;git checkout -- &amp;lt;file&amp;gt;...&amp;quot; to discard changes in working directory)
#
#   modified:   hola.txt
#
no changes added to commit (use &amp;quot;git add&amp;quot; and/or &amp;quot;git commit -a&amp;quot;)
&lt;/pre&gt;
&lt;p&gt;Observa com ara, Git t'informa que el contingut del fitxer ha estat
modificat. També ens informa que podem passar aquest canvis a &lt;em&gt;stage&lt;/em&gt;
fent servir (novament) la comanda &lt;tt class="docutils literal"&gt;add&lt;/tt&gt;, i que podem recuperar els
continguts anteriors fent servir &lt;tt class="docutils literal"&gt;checkout&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Anem a afegir els canvis a &lt;em&gt;stage&lt;/em&gt; seguint les indicacions del propi
Git. És a dir, farem servir un altre cop la comanda &lt;tt class="docutils literal"&gt;add&lt;/tt&gt; que, en
aquest cas té un significat lleugerament diferent al que ja coneixíem:
en comptes d'afegir un nou fitxer, &lt;em&gt;afegeix&lt;/em&gt; uns nous continguts.&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git add hola.txt
projecte$ git status
# On branch master
# Changes to be committed:
#   (use &amp;quot;git reset HEAD &amp;lt;file&amp;gt;...&amp;quot; to unstage)
#
#   modified:   hola.txt
#
&lt;/pre&gt;
&lt;p&gt;Veiem que ara &lt;tt class="docutils literal"&gt;hola.txt&lt;/tt&gt; apareix com a modificat. Git ens suggereix
com passar a l'estat anterior (abans de &lt;em&gt;stage&lt;/em&gt;) fent servir
&lt;tt class="docutils literal"&gt;reset&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;En aquest cas registrarem els canvis amb&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git commit -m &amp;quot;Afegit adéu&amp;quot;
[master 831889e] Afegit adéu
 1 file changed, 1 insertion(+)
projecte$ git status
# On branch master
nothing to commit (working directory clean)
&lt;/pre&gt;
&lt;p&gt;És molt habitual aquest cicle: modifiquem fitxer -&amp;gt; passem a &lt;em&gt;stage&lt;/em&gt;
-&amp;gt; registrem el canvi. Tant, que els desenvolupadors de Git ens
ofereixen una petita drecera. Considera l'exemple següent i fixa't en
la nova opció &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-a&lt;/span&gt;&lt;/tt&gt; pel &lt;tt class="docutils literal"&gt;commit&lt;/tt&gt;&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ echo &amp;quot;gutbai&amp;quot; &amp;gt;&amp;gt; hola.txt
projecte$ git commit -am &amp;quot;Afegit adéu en inglish&amp;quot;
[master b4d88ea] Afegit adéu en inglish
 1 file changed, 1 insertion(+)
&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="section" id="ignorar-fitxers"&gt;
&lt;h3&gt;Ignorar fitxers&lt;/h3&gt;
&lt;p&gt;Sovint hi ha fitxers (i directoris) que no voldrem que Git gestioni.
Per exemple, els fitxers temporals que ens generen alguns editors
(normalment acabats en &lt;tt class="docutils literal"&gt;~&lt;/tt&gt;), o fitxers amb codi objecte o
executables (ex. fitxers objecte &lt;tt class="docutils literal"&gt;.o&lt;/tt&gt; de C o els compilats de java
&lt;tt class="docutils literal"&gt;.class&lt;/tt&gt;)&lt;/p&gt;
&lt;p&gt;Podem indicar a Git que ignori aquests fitxers creant/modificant el
fitxer &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;project/.gitignore&lt;/span&gt;&lt;/tt&gt;. Per exemple, el següent fitxer
indicaria a Git que ignori els fitxers temporals d'edició, els
resultats de compilació, els comprimits, i el contingut del directori
on es construeix l'aplicació i el temporal.&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ cat projecte/.gitignore
## Fitxers a ignorar pel Git

# Fitxers d'edició
*~

# Fitxers de compilació
*.[oa]
*.class

# paquets i comprimits
*.7z
*.dmg
*.gz
*.iso
*.jar
*.rar
*.tar
*.tar.gz
*.zip

# contingut de directoris complets
build/
tmp/
&lt;/pre&gt;
&lt;p&gt;Atenció: en cas que ja estiguis registrant fitxers que has marcat per
ignorar al &lt;tt class="docutils literal"&gt;.gitignore&lt;/tt&gt;, hauràs d'eliminar-los manualment. Per
exemple, si ja havies fet &lt;em&gt;commit&lt;/em&gt; d'un &lt;tt class="docutils literal"&gt;.class&lt;/tt&gt; pots eliminar-lo
amb&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git rm --cached *.class
&lt;/pre&gt;
&lt;p&gt;Ves amb compte perquè aquesta comanda és una de les poques que
eliminen informació permanentment del repositori de Git!&lt;/p&gt;
&lt;p&gt;Trobaràs informació més completa de com ignorar fitxers a &lt;a class="reference external" href="https://help.github.com/articles/ignoring-files"&gt;aquest
article&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="consultar-versions-log"&gt;
&lt;h3&gt;Consultar versions: log&lt;/h3&gt;
&lt;p&gt;Quan portem un temps treballant en un projecte, de vegades ens
interessarà consultar l'històric de canvis realitzats. Per fer-ho, Git
ens ofereix &lt;tt class="docutils literal"&gt;git log&lt;/tt&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;projecte$ git log
commit b4d88eabeb77e1d83ca674199810de0c892c7efa
Author: Moisès Gómez Girón &amp;lt;&lt;a class="reference external" href="mailto:iesmoises&amp;#64;example.org"&gt;iesmoises&amp;#64;example.org&lt;/a&gt;&amp;gt;
Date:   Sun Mar 10 12:15:45 2013 +0100&lt;/p&gt;
&lt;blockquote&gt;
Afegit adéu en inglish&lt;/blockquote&gt;
&lt;p&gt;commit 831889ec9bfd31575b56f220c0a2c67c3a07be58
Author: Moisès Gómez Girón &amp;lt;&lt;a class="reference external" href="mailto:iesmoises&amp;#64;example.org"&gt;iesmoises&amp;#64;example.org&lt;/a&gt;&amp;gt;
Date:   Sun Mar 10 12:15:19 2013 +0100&lt;/p&gt;
&lt;blockquote&gt;
Afegit adéu&lt;/blockquote&gt;
&lt;p&gt;commit 527a52776b695a05e174b276b75da2a8a9c82ae7
Author: Moisès Gómez Girón &amp;lt;&lt;a class="reference external" href="mailto:iesmoises&amp;#64;example.org"&gt;iesmoises&amp;#64;example.org&lt;/a&gt;&amp;gt;
Date:   Sun Mar 10 12:14:37 2013 +0100&lt;/p&gt;
&lt;blockquote&gt;
Registre inicial&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;Fixa't que per cada &lt;em&gt;commit&lt;/em&gt; apareix una entrada al llistat amb la
següent informació:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Identificador del &lt;em&gt;commit&lt;/em&gt;: són els 40 caràcters que genera la
funció de hash SHA-1. Els primers 7 caràcters d'aquests strings
corresponen a la informació que ens apareix quan fem &lt;em&gt;commit&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;L'autor del &lt;em&gt;commit&lt;/em&gt;: nom i adreça de correu que hem especificat a
la configuració.&lt;/li&gt;
&lt;li&gt;La data del &lt;em&gt;commit&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;El comentari que posem a cada &lt;em&gt;commit&lt;/em&gt;. Ja et vaig dir que era
important posar-ne un de significatiu, oi?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Si vols veure l'historial de canvis d'un fitxer concret, pots
indicar-li:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git log hola.txt
&lt;/pre&gt;
&lt;p&gt;Les opcions de la comanda &lt;tt class="docutils literal"&gt;log&lt;/tt&gt; s'escapen de qualsevol text
introductori de Git. Pots fer una ullada al manual de &lt;a class="reference external" href="https://www.kernel.org/pub/software/scm/git/docs/git-log.html"&gt;git-log&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Per exemple, pots aconseguir que el log sigui més compacte amb:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git log --pretty=format:&amp;quot;%h [%cn]: %s&amp;quot;
b4d88ea [Moisès Gómez Girón]: Afegit adéu en inglish
831889e [Moisès Gómez Girón]: Afegit adéu
527a527 [Moisès Gómez Girón]: Registre inicial
&lt;/pre&gt;
&lt;p&gt;També existeixen eines gràfiques (ex. &lt;a class="reference external" href="https://www.kernel.org/pub/software/scm/git/docs/gitk.html"&gt;gitk&lt;/a&gt;) que et
permetran navegar més visualment entre l'històric de canvis. Aquesta
la podràs instal·lar i executar amb:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ sudo apt-get install gitk
«...»
projecte$ gitk
&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="section" id="comparar-versions"&gt;
&lt;h3&gt;Comparar versions&lt;/h3&gt;
&lt;p&gt;&lt;tt class="docutils literal"&gt;status&lt;/tt&gt; ens ofereix la informació de quins fitxers han estat
modificats però de vegades ens interessarà saber quins canvis concrets
s'ha realitzat en un fitxer.&lt;/p&gt;
&lt;p&gt;Considerem els següents casos:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;què he canviat i encara no he passat a &lt;em&gt;stage&lt;/em&gt;?&lt;/p&gt;
&lt;p&gt;Segueix les comandes:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ echo &amp;quot;ciao&amp;quot; &amp;gt;&amp;gt; hola.txt
projecte$ git status
# On branch master
# Changes not staged for commit:
#   (use &amp;quot;git add &amp;lt;file&amp;gt;...&amp;quot; to update what will be committed)
#   (use &amp;quot;git checkout -- &amp;lt;file&amp;gt;...&amp;quot; to discard changes in working directory)
#
#   modified:   hola.txt
#
no changes added to commit (use &amp;quot;git add&amp;quot; and/or &amp;quot;git commit -a&amp;quot;)
projecte$ git diff hola.txt
diff --git a/hola.txt b/hola.txt
index 12a57d6..007493b 100644
--- a/hola.txt
+++ b/hola.txt
&amp;#64;&amp;#64; -1,3 +1,4 &amp;#64;&amp;#64;
 hola
 adéu
 gutbay
+ciao
&lt;/pre&gt;
&lt;p&gt;Fixa't que la utilitat &lt;tt class="docutils literal"&gt;diff&lt;/tt&gt; ens mostra les diferencies entre la
versió &lt;em&gt;staged&lt;/em&gt; (anomenada &lt;tt class="docutils literal"&gt;a/hola.txt&lt;/tt&gt;) i l'actual (anomenada
&lt;tt class="docutils literal"&gt;b/hola.txt&lt;/tt&gt;) Veiem que la nova conté una línia extra &lt;tt class="docutils literal"&gt;ciao&lt;/tt&gt;.
Pots canviar el programa que mostra les diferències per un de més
visual, per exemple, &lt;tt class="docutils literal"&gt;vimdiff&lt;/tt&gt; (revisa les opcions de la comanda
&lt;tt class="docutils literal"&gt;global&lt;/tt&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;quines diferències hi ha entre el que tinc a &lt;em&gt;stage&lt;/em&gt; i el darrer
&lt;em&gt;commit&lt;/em&gt;?&lt;/p&gt;
&lt;p&gt;Si el que ens preocupa és quins són els canvis concrets en un
fitxers que es registraran en el proper &lt;em&gt;commit&lt;/em&gt; podem passar
&lt;tt class="docutils literal"&gt;hola.txt&lt;/tt&gt; a &lt;em&gt;stage&lt;/em&gt; i comprovar les diferències.&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git add hola.txt
projecte$ git diff --staged hola.txt
diff --git a/hola.txt b/hola.txt
index 12a57d6..007493b 100644
--- a/hola.txt
+++ b/hola.txt
&amp;#64;&amp;#64; -1,3 +1,4 &amp;#64;&amp;#64;
 hola
 adéu
 gutbay
+ciao
&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;què ha canviat a cada &lt;em&gt;commit&lt;/em&gt; ?&lt;/p&gt;
&lt;p&gt;Per a respondre aquesta pregunta farem servir la comanda &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-p&lt;/span&gt;&lt;/tt&gt; de
&lt;tt class="docutils literal"&gt;log&lt;/tt&gt;. La de l'exemple d'acontinuació fa servir &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-2&lt;/span&gt;&lt;/tt&gt; per mostrar
només els dos darrers &lt;em&gt;commits&lt;/em&gt;.&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git log -2 -p hola.txt
commit b4d88eabeb77e1d83ca674199810de0c892c7efa
Author: Moisès Gómez Girón &amp;lt;iesmoises&amp;#64;example.org&amp;gt;
Date:   Sun Mar 10 12:15:45 2013 +0100

    Afegit adéu en inglish

diff --git a/hola.txt b/hola.txt
index 3ad6909..db1148d 100644
--- a/hola.txt
+++ b/hola.txt
&amp;#64;&amp;#64; -1,2 +1,3 &amp;#64;&amp;#64;
 hola
 adéu
+gutbai

commit 831889ec9bfd31575b56f220c0a2c67c3a07be58
Author: Moisès Gómez Girón &amp;lt;iesmoises&amp;#64;example.org&amp;gt;
Date:   Sun Mar 10 12:15:19 2013 +0100

    Afegit adéu

diff --git a/hola.txt b/hola.txt
index 5c1b149..3ad6909 100644
--- a/hola.txt
+++ b/hola.txt
&amp;#64;&amp;#64; -1 +1,2 &amp;#64;&amp;#64;
 hola
+adéu
&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="eliminar-fitxers"&gt;
&lt;h3&gt;Eliminar fitxers&lt;/h3&gt;
&lt;p&gt;De vegades ens interessarà eliminar fitxers dels nostres projectes.&lt;/p&gt;
&lt;p&gt;Podem fer-ho simplement amb les utilitats del nostre sistema operatiu.
Per exemple:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ rm hola.txt
projecte$ git status
# On branch master
# Changes not staged for commit:
#   (use &amp;quot;git add/rm &amp;lt;file&amp;gt;...&amp;quot; to update what will be committed)
#   (use &amp;quot;git checkout -- &amp;lt;file&amp;gt;...&amp;quot; to discard changes in working directory)
#
#   deleted:    hola.txt
#
no changes added to commit (use &amp;quot;git add&amp;quot; and/or &amp;quot;git commit -a&amp;quot;)
projecte$ git commit -am &amp;quot;Eliminat hola.txt&amp;quot;
[master 4923494] Eliminat hola.txt
1 file changed, 2 deletions(-)
delete mode 100644 hola.txt
$ git status
# On branch master
nothing to commit (working directory clean)
&lt;/pre&gt;
&lt;p&gt;Consulta &lt;a class="reference external" href="https://www.kernel.org/pub/software/scm/git/docs/git-rm.html"&gt;git rm&lt;/a&gt; per
veure altres opcions d'esborrar que ens ofereix Git.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="reanomenar-fitxers"&gt;
&lt;h3&gt;Reanomenar fitxers&lt;/h3&gt;
&lt;p&gt;De vegades ens pot interessar canviar el nom d'un fitxer. Git ens
ofereix aquesta possibilitat fent servir:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git mv hola.txt adeu.txt
&lt;/pre&gt;
&lt;p&gt;Amb això obtenim quelcom equivalent a si fem directament&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ mv hola.txt adeu.txt
projecte$ git add adeu.txt
&lt;/pre&gt;
&lt;p&gt;Recorda que Git considera canvis en el contingut de fitxers.
Meta-informació com ara el nom del fitxer o el subdirectori on es
troba queda guardada de manera independent.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="tornar-enrere"&gt;
&lt;h3&gt;Tornar enrere&lt;/h3&gt;
&lt;p&gt;Potser la raó fonamental de fer servir un SCV és poder recuperar
fàcilment una versió anterior.&lt;/p&gt;
&lt;p&gt;Considera els següents escenaris habituals i la manera de resoldre'ls:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;modificar el missatge del darrer &lt;em&gt;commit&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Potser volíem afegir alguna cosa més a la descripció del darrer
&lt;em&gt;commit&lt;/em&gt; o bé simplement ens hem equivocat amb el missatge. En
qualsevol cas, podem tornar enrere fàcilment amb l'opció
&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;--amend&lt;/span&gt;&lt;/tt&gt; si encara no tenim cap canvi a &lt;em&gt;stage&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Aconsegueix que el teu directori de treball estigui net segons
&lt;tt class="docutils literal"&gt;status&lt;/tt&gt;&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git status
# On branch master
nothing to commit (working directory clean)
projecte$ echo &amp;quot;un altre&amp;quot; &amp;gt; adeu.txt
projecte$ git add adeu.txt
projecte$ git commit -am &amp;quot;un missatge equivocat&amp;quot;
[master 6b38844] un missatge equivocat
 1 file changed, 1 insertion(+)
 create mode 100644 adeu.txt
$ git commit --amend -m &amp;quot;missatge correcte&amp;quot;
[master 2c942cc] missatge correcte
 1 file changed, 1 insertion(+)
 create mode 100644 adeu.txt
projecte$ git log -2
commit 2c942cc4dd691473b1d791d1b82af839d21b4b50
Author: Moisès Gómez Girón &amp;lt;iesmoises&amp;#64;example.org&amp;gt;
Date:   Sun Mar 10 13:18:46 2013 +0100

    missatge correcte

commit b4d88eabeb77e1d83ca674199810de0c892c7efa
Author: Moisès Gómez Girón &amp;lt;iesmoises&amp;#64;example.org&amp;gt;
Date:   Sun Mar 10 12:15:45 2013 +0100

    afegit adéu en inglish
&lt;/pre&gt;
&lt;p&gt;Fixa't com a l'històric no queda constància del missatge erroni.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;afegir/eliminar continguts al darrer &lt;em&gt;commit&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;De vegades fem el &lt;em&gt;commit&lt;/em&gt; massa aviat per després adonar-nos que
hem comés un petit error i ens veiem obligats a tornar a fer el
&lt;em&gt;commit&lt;/em&gt;. Git ens ofereix un mecanisme senzill tot utilitzant
novament l'opció &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;--amend&lt;/span&gt;&lt;/tt&gt;:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ echo &amp;quot;nou adéu&amp;quot; &amp;gt; adeu.txt
projecte$ git status
# On branch master
# Changes not staged for commit:
#   (use &amp;quot;git add &amp;lt;file&amp;gt;...&amp;quot; to update what will be committed)
#   (use &amp;quot;git checkout -- &amp;lt;file&amp;gt;...&amp;quot; to discard changes in working directory)
#
#   modified:   adeu.txt
#
no changes added to commit (use &amp;quot;git add&amp;quot; and/or &amp;quot;git commit -a&amp;quot;)
projecte$ git commit --amend -am &amp;quot;missatge correcte amb adeu correcte&amp;quot;
[master ced5a9d] missatge correcte amb adeu correcte
 1 file changed, 1 insertion(+)
 create mode 100644 adeu.txt
projecte$ git log -2
commit ced5a9d2161b6206c76f2dbe47a77cc113bdc5c4
Author: Moisès Gómez Girón &amp;lt;iesmoises&amp;#64;example.org&amp;gt;
Date:   Sun Mar 10 13:18:46 2013 +0100

    missatge correcte amb adeu correcte

commit b4d88eabeb77e1d83ca674199810de0c892c7efa
Author: Moisès Gómez Girón &amp;lt;iesmoises&amp;#64;example.org&amp;gt;
Date:   Sun Mar 10 12:15:45 2013 +0100
&lt;/pre&gt;
&lt;p&gt;Fixa't com el contingut del fitxer &lt;tt class="docutils literal"&gt;adeu.txt&lt;/tt&gt; ha canviat però
queda enregistrat en el mateix &lt;em&gt;commit&lt;/em&gt; que abans.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;recuperar un fitxer segons el darrer &lt;em&gt;commit&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Has modificat el contingut d'un fitxer però vols deixar-lo tal i com
estava el darrer cop que vas fer &lt;em&gt;commit&lt;/em&gt;? Només has de seguir les
indicacions de &lt;tt class="docutils literal"&gt;git status&lt;/tt&gt;&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ echo &amp;quot;nou hola&amp;quot; &amp;gt; hola.txt
projecte$ echo &amp;quot;nou adéu&amp;quot; &amp;gt; adeu.txt
projecte$ git add hola.txt
projecte$ git status
# On branch master
# Changes to be committed:
#   (use &amp;quot;git reset HEAD &amp;lt;file&amp;gt;...&amp;quot; to unstage)
#
#   modified:   hola.txt
#
# Changes not staged for commit:
#   (use &amp;quot;git add &amp;lt;file&amp;gt;...&amp;quot; to update what will be committed)
#   (use &amp;quot;git checkout -- &amp;lt;file&amp;gt;...&amp;quot; to discard changes in working directory)
#
#   modified:   adeu.txt
#
&lt;/pre&gt;
&lt;p&gt;Fixa't que tenim en &lt;em&gt;stage&lt;/em&gt; a &lt;tt class="docutils literal"&gt;hola.txt&lt;/tt&gt; i com a &lt;em&gt;modificat&lt;/em&gt; a
&lt;tt class="docutils literal"&gt;adeu.txt&lt;/tt&gt;. Recuperem tots dos seguint les indicacions de Git&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ git reset HEAD hola.txt
Unstaged changes after reset:
M   adeu.txt
M   hola.txt
projecte$ git status
# On branch master
# Changes not staged for commit:
#   (use &amp;quot;git add &amp;lt;file&amp;gt;...&amp;quot; to update what will be committed)
#   (use &amp;quot;git checkout -- &amp;lt;file&amp;gt;...&amp;quot; to discard changes in working directory)
#
#   modified:   adeu.txt
#   modified:   hola.txt
#
no changes added to commit (use &amp;quot;git add&amp;quot; and/or &amp;quot;git commit -a&amp;quot;)
projecte$ git checkout -- hola.txt adeu.txt
projecte$ git status
# On branch master
nothing to commit (working directory clean)
projecte$ cat hola.txt
hola
adéu
gutbai
projecte$ cat adeu.txt
un altre
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Atenció&lt;/strong&gt;: fes servir aquestes comandes amb compte. Els canvis que
reverteixis d'aquesta manera &lt;strong&gt;no&lt;/strong&gt; els podràs recuperar amb Git
donat que no han arribat mai a ser registrats! És preferible que
facis servir l'opció &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;--amend&lt;/span&gt;&lt;/tt&gt; perquè aquesta ofereix a Git
possibilitats de &lt;a class="reference external" href="http://git-scm.com/book/en/Git-Internals-Maintenance-and-Data-Recovery"&gt;recuperació&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;recuperar un estat d'un &lt;em&gt;commit&lt;/em&gt; de l'històric de canvis&lt;/p&gt;
&lt;p&gt;Per poder fer això ens haurem d'esperar a conèixer el concepte de
branques. De seguida.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="git-branques"&gt;
&lt;h2&gt;Git branques&lt;/h2&gt;
&lt;p&gt;En diferents ocasions ens pot interessar treballar amb una versió del
projecte sense que els nostres canvis afectin a la línia principal.
Per exemple:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;tenim una versió en producció a la que hem de corregir un error,
mentre estem ja treballant en una nova versió del projecte que no
podem/volem lliurar encara al client.&lt;/li&gt;
&lt;li&gt;volem fer un experiment de codi i només fer-lo servir si ens surt
bé.&lt;/li&gt;
&lt;li&gt;volem fer una nova línia de desenvolupament del projecte tot
mantenint l'anterior.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Un cop realitzat els experiments o modificacions, voldrem:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;deixar-los tal qual&lt;/li&gt;
&lt;li&gt;descartar-los&lt;/li&gt;
&lt;li&gt;fusionar-los amb la línia principal de desenvolupament (o amb alguna
altra línia)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;La majoria dels SCVs ofereixen algun tipus de mecanismes per a
aconseguir aquesta funcionalitat. Sovint se li diu &lt;em&gt;branching&lt;/em&gt; ja que
cada nova línia és com una &lt;em&gt;branca&lt;/em&gt; de l'arbre (línia principal).&lt;/p&gt;
&lt;p&gt;Git ofereix un mecanisme de &lt;em&gt;branching&lt;/em&gt; força lleuger i àgil.&lt;/p&gt;
&lt;p&gt;Per poder entendre el funcionament de les branques de Git, cal
mirar amb més deteniment com guarda Git la informació.&lt;/p&gt;
&lt;p&gt;Suposa que al nostre projecte tenim tres fitxers (&lt;tt class="docutils literal"&gt;fitxerA&lt;/tt&gt;,
&lt;tt class="docutils literal"&gt;fitxerB&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;fitxerC&lt;/tt&gt;). Git amb el primer &lt;em&gt;commit&lt;/em&gt; guarda el
contingut dels tres fitxers, crea un nou objecte (li direm &lt;em&gt;arbre&lt;/em&gt;)
que conté una referència al contingut de cadascun dels tres fitxers
juntament amb meta-informació (com ara el nom de cada fitxer), i crea
un altre objecte que apunta a l'arbre, i que afegeix la informació del
&lt;em&gt;commit&lt;/em&gt; (entre d'altres l'autor, la data i el missatge descriptiu).
El directori de Git acaba contenint cinc elements: els tres continguts
dels fitxers A, B i C; l'objecte que conté la meta-informació dels
fitxers i l'objecte que conté la informació del &lt;em&gt;commit&lt;/em&gt;. De tots cinc
elements, Git calcula el seu valor hash amb els que els identificarà.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="commit" src="http://apuntstecnics.herokuapp.com/images/git.intro.img007.commit.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Fixa't com cada element es veu identificat pel seu valor de hash.&lt;/p&gt;
&lt;p&gt;Si a continuació modifiquem els continguts dels fitxers A i C, Git
crea un nou arbre que apunta als fitxers i un nou objecte amb la
informació del &lt;em&gt;commit&lt;/em&gt;.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="dos commits" src="http://apuntstecnics.herokuapp.com/images/git.intro.img008.2commits.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Fixa't com el segon &lt;em&gt;commit&lt;/em&gt; fa referència al primer. El diagrama
també mostra que, donat que &lt;tt class="docutils literal"&gt;fitxerB&lt;/tt&gt; no ha modificat els seus
continguts, simplement no es crea un nou objecte per ell sinó que es
fa servir el del &lt;em&gt;commit&lt;/em&gt; anterior (el què té hash 4425b...)&lt;/p&gt;
&lt;p&gt;Després d'uns quants &lt;em&gt;commits&lt;/em&gt; i simplificant més el diagrama
anterior, l'aspecte del repositori es podria representar segons el
següent diagrama:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="master" src="http://apuntstecnics.herokuapp.com/images/git.intro.img009.master.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Fixa't en el nou node anomenat &lt;em&gt;master&lt;/em&gt;. Es tracta d'un simple
apuntador al darrer &lt;em&gt;commit&lt;/em&gt; realitzat. Aquest és el significat de
&lt;em&gt;master&lt;/em&gt; que ens apareix cada cop que fem &lt;em&gt;commit&lt;/em&gt;: és bàsicament la
línia principal o branca mestra de desenvolupament del nostre
projecte, i de moment la única.&lt;/p&gt;
&lt;div class="section" id="crear-una-branca"&gt;
&lt;h3&gt;Crear una branca&lt;/h3&gt;
&lt;p&gt;La comanda &lt;tt class="docutils literal"&gt;branch&lt;/tt&gt; ens permet llistar, crear i eliminar branques.&lt;/p&gt;
&lt;p&gt;Per crear una nova branca, farem:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git branch prova
&lt;/pre&gt;
&lt;p&gt;Aquesta comanda ens crea una nova branca anomenada &lt;tt class="docutils literal"&gt;prova&lt;/tt&gt;. Podem
veure les branques disponibles amb:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git branch
* master
  prova
&lt;/pre&gt;
&lt;p&gt;Fixa't com la branca actual (en aquest cas &lt;em&gt;master&lt;/em&gt;) apareix
ressaltada. Per tant, només hem creat la branca, però hem canviat de
branca!&lt;/p&gt;
&lt;p&gt;L'aspecte del repositori d'ara és:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="prova" src="http://apuntstecnics.herokuapp.com/images/git.intro.img010.prova.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="canviar-de-branca"&gt;
&lt;h3&gt;Canviar de branca&lt;/h3&gt;
&lt;p&gt;Canviem de branca fent servir la comanda &lt;tt class="docutils literal"&gt;checkout&lt;/tt&gt;:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git checkout prova
Switched to branch 'prova'
projecte$ git status
# On branch prova
nothing to commit (working directory clean)
projecte$ git checkout master
Switched to branch 'master'
projecte$ git status
# On branch master
nothing to commit (working directory clean)
&lt;/pre&gt;
&lt;p&gt;Per saber en quina branca es troba el teu directori de treball, Git fa
servir un apuntador anomenat &lt;tt class="docutils literal"&gt;HEAD&lt;/tt&gt;.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="head" src="http://apuntstecnics.herokuapp.com/images/git.intro.img011.head.png" /&gt;
&lt;/div&gt;
&lt;p&gt;En crear una branca, aquesta apareix apuntant a &lt;tt class="docutils literal"&gt;HEAD&lt;/tt&gt;. Quan fem un
&lt;em&gt;commit&lt;/em&gt; en una branca, les línies de desenvolupament es separen.&lt;/p&gt;
&lt;p&gt;Per exemple, suposa que passes a la branca de proves, modifiques el
contingut de &lt;tt class="docutils literal"&gt;fitxerA&lt;/tt&gt; i fas &lt;em&gt;commit&lt;/em&gt;. El resultat es pot
representar segons :&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="prova del commit" src="http://apuntstecnics.herokuapp.com/images/git.intro.img012.provacommit.png" /&gt;
&lt;/div&gt;
&lt;p&gt;En codi, podem fer la següent prova:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git status
# On branch master
nothing to commit (working directory clean)
projecte$ git checkout prova
Switched to branch 'prova'
projecte$ ls
adeu.txt  hola.txt
projecte$ echo &amp;quot;canvi afegit a la branca de prova&amp;quot; &amp;gt;&amp;gt; adeu.txt
projecte$ git commit -am &amp;quot;afegit un text a adeu.txt&amp;quot;
[prova 653315c] afegit un text a adeu.txt
 1 file changed, 1 insertion(+)
projecte$ cat adeu.txt
nou adéu
canvi afegit a la branca de prova
projecte$ git checkout master
Switched to branch 'master'
projecte$ cat adeu.txt
nou adéu
projecte$ git checkout prova
Switched to branch 'prova'
projecte$ cat adeu.txt
nou adéu
canvi afegit a la branca de prova
&lt;/pre&gt;
&lt;p&gt;Fixa't com hem fet un canvi al fitxer &lt;tt class="docutils literal"&gt;adeu.txt&lt;/tt&gt; mentre estàvem a la
branca &lt;em&gt;prova&lt;/em&gt; i hi hem fet &lt;em&gt;commit&lt;/em&gt;. A continuació passem a la
branca &lt;em&gt;master&lt;/em&gt; on comprovem que &lt;tt class="docutils literal"&gt;adeu.txt&lt;/tt&gt; no conté el canvi que
hem fet a la branca &lt;em&gt;prova&lt;/em&gt;. Finalment tornem a la branca &lt;em&gt;prova&lt;/em&gt; on
comprovem que el canvi fet a &lt;tt class="docutils literal"&gt;adeu.txt&lt;/tt&gt; continua sent-hi.&lt;/p&gt;
&lt;p&gt;Fins ara tot quedava representat en una única línia de &lt;em&gt;commits&lt;/em&gt;
encara que amb dues branques. Què passaria si tornem a la branca
&lt;em&gt;master&lt;/em&gt; i hi registrem un nou canvi? Doncs que les línies de les dues
branques divergiran.&lt;/p&gt;
&lt;p&gt;Al següent diagrama veiem el resultat de modificar i fer &lt;em&gt;commit&lt;/em&gt; des
de &lt;em&gt;master&lt;/em&gt; a partir de la situació del diagrama anterior.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="divergència" src="http://apuntstecnics.herokuapp.com/images/git.intro.img013.divergencia.png" /&gt;
&lt;/div&gt;
&lt;p&gt;En codi, ho podem reproduir per exemple amb:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git checkout master
Switched to branch 'master'
projecte$ echo &amp;quot;afegim des de master&amp;quot; &amp;gt;&amp;gt; hola.txt
projecte$ git commit -am &amp;quot;afegida línia a hola.txt&amp;quot;
[master 4df1544] afegida línia a hola.txt
 1 file changed, 1 insertion(+)
&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="section" id="fusionar-branques"&gt;
&lt;h3&gt;Fusionar branques&lt;/h3&gt;
&lt;p&gt;Si has seguit l'exemple de codi que hem fet fins ara, disposaràs de
dues branques &lt;em&gt;master&lt;/em&gt; i &lt;em&gt;prova&lt;/em&gt; amb continguts diferents. &lt;em&gt;master&lt;/em&gt;
ha registrat un canvi a &lt;tt class="docutils literal"&gt;hola.txt&lt;/tt&gt; que no està contingut a &lt;em&gt;prova&lt;/em&gt;.
A l'hora, &lt;em&gt;prova&lt;/em&gt; ha registrat un canvi a &lt;tt class="docutils literal"&gt;adeu.txt&lt;/tt&gt; que no està
registrat a &lt;em&gt;master&lt;/em&gt;.&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git checkout master
projecte$ cat hola.txt
hola
adéu
gutbai
afegim des de master
projecte$ cat adeu.txt
nou adéu
projecte$ git checkout prova
Switched to branch 'prova'
projecte$ cat hola.txt
hola
adéu
gutbai
projecte$ cat adeu.txt
nou adéu
canvi afegit a la branca de prova
&lt;/pre&gt;
&lt;p&gt;Com ens ho fem per fusionar (&lt;em&gt;merge&lt;/em&gt;) aquests canvis? Suposem que
volem fusionar els canvis a &lt;em&gt;master&lt;/em&gt;:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git checkout master
Switched to branch 'master'
projecte$ git merge prova
Merge made by the 'recursive' strategy.
 adeu.txt |    1 +
 1 file changed, 1 insertion(+)
projecte$ cat hola.txt
hola
adéu
gutbai
afegim des de master
projecte$ cat adeu.txt
nou adéu
canvi afegit a la branca de prova
projecte$ git checkout prova
Switched to branch 'prova'
projecte$ cat hola.txt
hola
adéu
gutbai
&lt;/pre&gt;
&lt;p&gt;Fixa't com el resultat és:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;em&gt;master&lt;/em&gt; conté els canvis de &lt;em&gt;prova&lt;/em&gt;: el fitxer &lt;tt class="docutils literal"&gt;adeu.txt&lt;/tt&gt;
incorpora el canvi realitzat a la branca &lt;em&gt;prova&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;prova&lt;/em&gt; no es modifica: el fitxer &lt;tt class="docutils literal"&gt;hola.txt&lt;/tt&gt; no ha patit cap canvi
malgrat a &lt;em&gt;master&lt;/em&gt; va ser modificat.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Tot plegat ha creat un nou &lt;em&gt;commit&lt;/em&gt; que té com a antecessors els
&lt;em&gt;commits&lt;/em&gt; corresponents a les dues branques fusionades. El següent
diagrama mostra una representació gràfica:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="merge" src="http://apuntstecnics.herokuapp.com/images/git.intro.img014.merge.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Aquesta fusió no és poca cosa. Com que Git tracta continguts i no
fitxers, és capaç de fusionar continguts que hagin estat modificats en
diferents punts d'un mateix fitxer!&lt;/p&gt;
&lt;p&gt;En aquesta demostració introduirem un canvi al començament del fitxer
&lt;tt class="docutils literal"&gt;hola.txt&lt;/tt&gt; de la branca &lt;em&gt;prova&lt;/em&gt; i farem &lt;em&gt;commit&lt;/em&gt;. Fixa't que a
partir d'aquest moment tant &lt;em&gt;master&lt;/em&gt; com &lt;em&gt;prova&lt;/em&gt; contenen canvis en el
mateix fitxer! Què farà Git en demanar-li que fusioni les dues
branques?&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git checkout master
projecte$ cat hola.txt
hola
adéu
gutbai
afegim des de master
projecte$ git checkout prova
Switched to branch 'prova'
projecte$ cat hola.txt
hola
adéu
gutbai
projecte$ mv hola.txt tmphola
projecte$ echo &amp;quot;un canvi introduït des de prova&amp;quot; &amp;gt; hola.txt
projecte$ cat /tmp/tmphola &amp;gt;&amp;gt; hola.txt
projecte$ cat hola.txt
un canvi introduït des de prova
hola
adéu
gutbai
projecte$ git commit -am &amp;quot;canvi afegit al començament de hola.txt&amp;quot;
[prova e4f3743] canvi afegit al començament de hola.txt
 1 file changed, 1 insertion(+)
projecte$ git checkout master
Switched to branch 'master'
projecte$ git merge prova
Auto-merging hola.txt
Merge made by the 'recursive' strategy.
 hola.txt |    1 +
 1 file changed, 1 insertion(+)
projecte$ cat hola.txt
un canvi introduït des de prova
hola
adéu
gutbai
afegim des de master
&lt;/pre&gt;
&lt;p&gt;No sé a tu, però a mi m'ha impressionat!&lt;/p&gt;
&lt;p&gt;Malauradament Git no pot resoldre totes les possibles situacions de
conflicte en fusionar un fitxer modificat a dues branques. De vegades
caldrà realitzar fusions manuals. Amb tot, Git t'ajudarà en aquesta
indesitjable situació.&lt;/p&gt;
&lt;p&gt;Per fer la següent demostració, modificarem el fitxer &lt;tt class="docutils literal"&gt;adeu.txt&lt;/tt&gt; de
manera diferent a totes dues branques i intentarem fusionar en
&lt;em&gt;master&lt;/em&gt;.&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git checkout master
Switched to branch 'master'
projecte$ echo &amp;quot;un canvi dràstic des de master&amp;quot; &amp;gt; adeu.txt
projecte$ git commit -am &amp;quot;canvi dràstic des de master&amp;quot;
[master 58f8a62] canvi dràstic des de master
 1 file changed, 1 insertion(+), 1 deletion(-)
projecte$ git checkout prova
M   adeu.txt
Switched to branch 'prova'
projecte$ echo &amp;quot;un canvi també dràstic des de prova&amp;quot; &amp;gt; adeu.txt
projecte$ git commit -am &amp;quot;canvi dràstic des de prova&amp;quot;
[prova 8de01e1] canvi dràstic des de prova
 1 file changed, 1 insertion(+), 1 deletion(-)
projecte$ git checkout master
Switched to branch 'master'
projecte$ git merge prova
Auto-merging adeu.txt
CONFLICT (content): Merge conflict in adeu.txt
Automatic merge failed; fix conflicts and then commit the result.
&lt;/pre&gt;
&lt;p&gt;Git ens avisa que no ha pogut fer la fusió automàtica. Ens proposa que
arreglem els conflictes i que tornem a fer &lt;em&gt;commit&lt;/em&gt; amb el resultat.&lt;/p&gt;
&lt;p&gt;Si ara demanem l'estat, ens trobem&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git status
# On branch master
# Unmerged paths:
#   (use &amp;quot;git add/rm &amp;lt;file&amp;gt;...&amp;quot; as appropriate to mark resolution)
#
#   both modified:      adeu.txt
#
no changes added to commit (use &amp;quot;git add&amp;quot; and/or &amp;quot;git commit -a&amp;quot;)
&lt;/pre&gt;
&lt;p&gt;És més, Git ens ha afegit unes marques al fitxer &lt;tt class="docutils literal"&gt;adeu.txt&lt;/tt&gt; de
manera que ens sigui més fàcil prendre les decisions.&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ cat adeu.txt
&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; HEAD
un canvi dràstic des de master
=======
un canvi també dràstic des de prova
&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; prova
&lt;/pre&gt;
&lt;p&gt;Ara simplement hem d'editar el fitxer, modificar-lo com ens convingui
i fer un nou &lt;em&gt;commit&lt;/em&gt; com ens recomana Git.&lt;/p&gt;
&lt;blockquote&gt;
projecte$ cat adeu.txt
un canvi dràstic des de master i també des de prova
projecte$ git commit -am &amp;quot;corregida la fusió manualment&amp;quot;
[master f54fbd7] corregida la fusió manualment
projecte$ git status
# On branch master
nothing to commit (working directory clean)&lt;/blockquote&gt;
&lt;p&gt;Amb fitxers binaris com ara imatges, Git no ens podrà ajudar tant amb
les fusions. Amb tot, els marcarà com a &lt;em&gt;unmerged&lt;/em&gt; i esperarà que
facis &lt;em&gt;commit&lt;/em&gt; amb la versió corregida.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="eliminar-una-branca"&gt;
&lt;h3&gt;Eliminar una branca&lt;/h3&gt;
&lt;p&gt;Quan ja no et cal una branca, pots eliminar-la amb l'opció &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-d&lt;/span&gt;&lt;/tt&gt; de
&lt;tt class="docutils literal"&gt;branch&lt;/tt&gt;:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ git branch -d prova
Deleted branch prova (was 8de01e1).
&lt;/pre&gt;
&lt;p&gt;Si a la branca a eliminar hi quedaven canvis sense fusionar amb el
&lt;tt class="docutils literal"&gt;HEAD&lt;/tt&gt;, Git t'avisarà i et proposarà que facis servir l'opció &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-D&lt;/span&gt;&lt;/tt&gt;
en comptes de &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-d&lt;/span&gt;&lt;/tt&gt; per indicar que no t'importa que es perdin els
canvis.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="crear-una-branca-a-partir-d-una-versio-antiga"&gt;
&lt;h3&gt;Crear una branca a partir d'una versió antiga&lt;/h3&gt;
&lt;p&gt;Suposa que vols continuar un desenvolupament des d'un &lt;em&gt;commit&lt;/em&gt;
concret. Troba el seu hash (amb els primers caràcters segurament en tindràs prou) i fes:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git branch tornemhi ced5a9
projecte$ git checkout tornemhi
Switched to branch 'tornemhi'
&lt;/pre&gt;
&lt;p&gt;Ja pots treballar en aquesta branca i, en acabar, realitzar les
fusions que consideris necessàries.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="git-remot"&gt;
&lt;h2&gt;Git remot&lt;/h2&gt;
&lt;p&gt;Amb el que hem vist fins ara, espero que t'hagi convençut de fer
servir Git (o algun altre SCV) en tots els teus desenvolupaments. Si
no ho he aconseguit encara, espera't a veure el que Git et pot oferir
quan el teu projecte el fas des de diferents màquines o/i amb
diferents desenvolupadors.&lt;/p&gt;
&lt;div class="section" id="duplicar-o-clonar"&gt;
&lt;h3&gt;duplicar o clonar&lt;/h3&gt;
&lt;p&gt;De vegades voldrem treballar en un repositori existent que no ens
pertany.&lt;/p&gt;
&lt;p&gt;Per duplicar un repositori farem servir la comanda &lt;tt class="docutils literal"&gt;clone&lt;/tt&gt;&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ git clone «url» [«noudir»]
&lt;/pre&gt;
&lt;p&gt;Per exemple, la següent comanda et crearà un directori anomenat
&lt;tt class="docutils literal"&gt;gems&lt;/tt&gt; a partir del directori actual i hi duplicarà el repositori
contingut a la url indicada.&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ git clone git://github.com/WilliamHackmore/linuxgems.git gems
Cloning into 'gems'...
remote: Counting objects: 23, done.
remote: Compressing objects: 100% (23/23), done.
remote: Total 23 (delta 6), reused 17 (delta 0)
Receiving objects: 100% (23/23), 9.54 KiB, done.
Resolving deltas: 100% (6/6), done.
$ cd gems/
gems$ ls
cheat_sheet.org.sh  to_do.txt
&lt;/pre&gt;
&lt;p&gt;En cas que no s'especifiqui el nom del directori, la comanda crearà un
directori amb el mateix nom que l'original.&lt;/p&gt;
&lt;p&gt;Ara podríem començar a treballar en una nova branca del projecte que
Hackmore tan amablement ens ofereix al &lt;a class="reference external" href="https://github.com/"&gt;github&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="el-repositori-remot"&gt;
&lt;h3&gt;El repositori remot&lt;/h3&gt;
&lt;p&gt;A partir del repositori clonat a la secció anterior, podem demanar a
Git que ens digui quin és el repositori remot de la nostra còpia:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
gems$ git remote -v
origin      git://github.com/WilliamHackmore/linuxgems.git (fetch)
origin      git://github.com/WilliamHackmore/linuxgems.git (push)
&lt;/pre&gt;
&lt;p&gt;Aquesta comanda ens està indicant que el repositori té associat un
repositori remot anomenat &lt;em&gt;origen&lt;/em&gt; i quines són les urls que farà
servir en cas que vulguem recuperar noves versions o enviar les
nostres.&lt;/p&gt;
&lt;p&gt;La comanda &lt;tt class="docutils literal"&gt;remote&lt;/tt&gt; ens ofereix la possibilitat de gestionar els
repositoris remots amb que volem enllaçar el nostre. Amb &lt;em&gt;remot&lt;/em&gt; ens
referirem a qualsevol altre repositori, independentment de si es troba
a un altre equip accessible per algun protocol (ex. ssh) o muntat
directament al nostre.&lt;/p&gt;
&lt;p&gt;Per exemple, suposem que volem fer un repositori de còpia de seguretat
en un disc addicional muntat a &lt;tt class="docutils literal"&gt;/mnt/diskbackup/projecte_bak&lt;/tt&gt;
(preferiblement iniciat amb &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;--bare&lt;/span&gt;&lt;/tt&gt;). Podem afegir aquest directori
com a remot del nostre amb:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git remote add backup /mnt/diskbackup/projecte_bak
projecte$ git config remote.backup.mirror true
&lt;/pre&gt;
&lt;p&gt;Amb això, disposem d'un nou repositori remot amb el que ens podrem
&lt;em&gt;sincronitzar-nos&lt;/em&gt; quan vulguem fer còpies.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="recuperar-els-canvis-remots"&gt;
&lt;h3&gt;recuperar els canvis remots&lt;/h3&gt;
&lt;p&gt;Per recuperar canvis realitzats a un repositori remot, simplement
farem:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
gems$ git pull origin master
 * branch            master     -&amp;gt; FETCH_HEAD
Already up-to-date.
&lt;/pre&gt;
&lt;p&gt;Donat que el Hackmore no li hem donat temps d'afegir nous canvis, en
aquest cas ens diu que ja disposem de la darrera versió del projecte.
Altrament ens hagués descarregat els nous canvis.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="enviar-canvis-a-remot"&gt;
&lt;h3&gt;enviar canvis a remot&lt;/h3&gt;
&lt;p&gt;Per enviar els nostres canvis al repositori remot ens calen les
següents coses:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;haver fet &lt;em&gt;commit&lt;/em&gt; dels nostres canvis en local&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;assegurar-nos que tenim la darrera versió del remot (recorda
&lt;tt class="docutils literal"&gt;pull&lt;/tt&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;tenir permisos per poder enviar els nostres canvis al repositori
remot (en el cas del projecte del Hackmore no els tenim)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;enviar els canvis amb la comanda &lt;tt class="docutils literal"&gt;push&lt;/tt&gt;&lt;/p&gt;
&lt;pre class="literal-block"&gt;
gems$ git push origin master
&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="empaquetament"&gt;
&lt;h3&gt;Empaquetament&lt;/h3&gt;
&lt;p&gt;De vegades no podrem connectar-nos directament a algun repositori
remot, però ens interessarà sincronitzar-nos. Git ofereix la comanda
&lt;tt class="docutils literal"&gt;bundle&lt;/tt&gt; que ens permet empaquetar tot o part del repositori en un
fitxer i portar-lo allà on ens interessi.&lt;/p&gt;
&lt;p&gt;Per empaquetar el nostre repositori, farem simplement:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
projecte$ git bundle create projecte.bundle --all
Counting objects: 40, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (28/28), done.
Writing objects: 100% (40/40), 3.75 KiB, done.
Total 40 (delta 5), reused 0 (delta 0)
projecte$ ls
adeu.txt  hola.txt  projecte.bundle
&lt;/pre&gt;
&lt;p&gt;Ara copiem el fitxer generat (&lt;tt class="docutils literal"&gt;projecte.bundle&lt;/tt&gt;) allà on ens
interessi i el recuperem amb:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ git clone project.bundle miproject
Cloning into 'miproject'...
Receiving objects: 100% (40/40), done.
Resolving deltas: 100% (5/5), done.
$ cd miproject
miproject$ ls
adeu.txt  hola.txt
&lt;/pre&gt;
&lt;p&gt;Ara ja disposem a &lt;tt class="docutils literal"&gt;miproject/&lt;/tt&gt; d'un duplicat del nostre projecte per
la branca &lt;em&gt;master&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-resum-de-comandes"&gt;
&lt;h3&gt;Exercici 1. Resum de comandes&lt;/h3&gt;
&lt;p&gt;Creat un petit resum de les comandes que han aparegut en aquesta
introducció a Git. Inclou les comandes comentades a partir de
suggeriments del propi Git, com ara &lt;tt class="docutils literal"&gt;reset&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Pensa-ho com una &lt;em&gt;xuleta&lt;/em&gt; o &lt;em&gt;cheat sheet&lt;/em&gt; que serveixi de
referència ràpida pel Git.&lt;/p&gt;
&lt;p&gt;Probablement un format tabulat sigui el més adequat. Indica la comanda
(ex. &lt;tt class="docutils literal"&gt;commit &lt;span class="pre"&gt;-m&lt;/span&gt; «comentaris»&lt;/tt&gt;), una petita descripció (ex. &amp;quot;registra
els canvis a &lt;em&gt;stage&lt;/em&gt; associant-los un comentari&amp;quot;) i un exemple (ex. &amp;quot;$
git commit -m &amp;quot;Registre inicial&amp;quot;)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-una-mica-de-practica"&gt;
&lt;h3&gt;Exercici 2. Una mica de pràctica&lt;/h3&gt;
&lt;p&gt;Per la realització d'aquest exercici hauràs de prendre nota de totes
les comandes que llencis i continguts de fitxers que toquis.&lt;/p&gt;
&lt;p&gt;Segueix les instruccions i prepara els resultats finals que seran en
forma de &lt;em&gt;bundle&lt;/em&gt; més un document amb les descripcions de les passes i
les comandes/continguts de fitxer.&lt;/p&gt;
&lt;p&gt;Les instruccions et deixaran lliures alguns elements (ex. noms, alguns
continguts de fitxers, missatges de &lt;em&gt;commit&lt;/em&gt;) És molt recomanable que
les realitzis sobre un GNU/Linux o, com a mínim, un sistema compatible
POSIX per facilitar-te la captura.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Instruccions&lt;/strong&gt;&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Personalitza adequadament el teu Git.&lt;/li&gt;
&lt;li&gt;Crea un repositori Git&lt;/li&gt;
&lt;li&gt;Afegeix al directori de treball un fitxer amb un contingut generat
per la comanda &lt;tt class="docutils literal"&gt;ifconfig&lt;/tt&gt; (o l'equivalent al teu sistema) des de
la teva màquina.&lt;/li&gt;
&lt;li&gt;Fes el primer &lt;em&gt;commit&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Copia el contingut del teu fitxer de configuració &lt;tt class="docutils literal"&gt;.gitconfig&lt;/tt&gt; a
un fitxer dins del directori de treball i afegeix-lo al control de
versions.&lt;/li&gt;
&lt;li&gt;Crea un nou fitxer on afegeixis la data i hora del sistema
(&lt;tt class="docutils literal"&gt;date&lt;/tt&gt;), afegeix-lo a &lt;em&gt;stage&lt;/em&gt; i comprova l'estat del projecte.&lt;/li&gt;
&lt;li&gt;Modifica el primer fitxer tot afegint-hi al final la data i hora
del sistema i comprova l'estat del projecte.&lt;/li&gt;
&lt;li&gt;Registra tots els canvis i torna a comprovar l'estat del projecte.&lt;/li&gt;
&lt;li&gt;Consulta l'historial de canvis fins el moment de tot el projecte.&lt;/li&gt;
&lt;li&gt;Configura el teu projecte de manera que Git no intenti gestionar
els .class. Realitza les accions que consideris per comprovar que
no ho està fent.&lt;/li&gt;
&lt;li&gt;Realitza les accions que trobis necessàries per demostrar com es
pot veure els canvis realitzats al contingut d'un fitxer que
encara no s'han passat a &lt;em&gt;stage&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Com al punt anterior, però aquest cop demostra com comprovar
els canvis realitzats en un fitxer respecte el darrer &lt;em&gt;commit&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Consulta ara l'històric de canvis d'un dels fitxers incloent les
diferències de cada versió respecte de l'anterior.&lt;/li&gt;
&lt;li&gt;Realitza les comandes necessàries per demostrar com es pot tornar
a l'estat del darrer &lt;em&gt;commit&lt;/em&gt; d'un determinat fitxer.&lt;/li&gt;
&lt;li&gt;Crea una nova branca, modifica-hi un dels fitxers i registra els
canvis. Comprova que els canvis hi són a la nova branca però no a
la branca &lt;em&gt;mestra&lt;/em&gt;. Finalment torna a la branca mestra, fusiona
els canvis de la nova branca i elimina la nova branca. Comprova que
l'has eliminada.&lt;/li&gt;
&lt;li&gt;Crea una nova branca i realitza els canvis necessaris sobre algun
dels fitxers, de manera que les dues línies de desenvolupament (la
nova branca i la mestra) divergeixin. Aconsegueix que en intentar
fusionar els canvis a la branca mestra algun dels fitxers
modificats sigui fusionat automàticament però algun altre
requereixi modificacions manuals. Finalment hauria de quedar tots
els canvis fusionats a la branca mestra i l'altra branca quedar
eliminada.&lt;/li&gt;
&lt;li&gt;Guarda tot el contingut de la branca mestra en un paquet.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;hr class="docutils" /&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="gitdiferentdaltres" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;A diferencia d'altres SCV com ara Subversion,
Git no guarda diferènces entre fitxers individuals sinó de tot el
conjunt de fitxers que gestiona.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="terminologiaanglesa" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;La traducció al català que et presento no té
un ús generalitzat. Per tant, continuarem fent servir la
terminologia en anglès.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="fitxerscomprimits" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id6"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Probablement no et sortirà a compte gestionar
versions de fitxers comprimits per estalviar espai. Git ja ho fa
força eficientment per tu.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="hihamesestats" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Hi ha més estats i els veurem més tard.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="treballtelematic" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[5]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Ja sigui perquè les empreses cerquen reduir
despeses fixes de lloguer d'espais, o per la localització física
dels bons professionals i de les empreses, cada cop és més habitual
tenir els professionals treballant des de casa.
(Gràcies Alejandro E. per aquesta aportació)&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="util"></category></entry><entry><title>Empaquetar un repositori de Git</title><link href="http://apuntstecnics.herokuapp.com/empaquetar-un-repositori-de-git.html" rel="alternate"></link><updated>2015-04-09T16:19:42+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-04-09:empaquetar-un-repositori-de-git.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;De vegades ens pot interessar guardar els continguts d'un repositori
Git en un paquet. Per exemple, considera el cas que vulguis compartir
un projecte amb una màquina que no està connectada a la xarxa
&lt;a class="footnote-reference" href="#casexamen" id="id1"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;La resposta que t'ofereix Git es diu &lt;em&gt;bundle&lt;/em&gt; (aquí traduït com a
&lt;em&gt;paquet&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;En aquesta entrada podràs veure com es pot guardar tot un repositori
Git en un paquet per després desempaquetar-ho.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="creacio-d-un-paquet-git"&gt;
&lt;h2&gt;Creació d'un paquet Git&lt;/h2&gt;
&lt;p&gt;Per crear un paquet Git, farem servir l'opció:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
git bundle create «nomfitxer» «branca»
&lt;/pre&gt;
&lt;p&gt;Com a exemple, crearem un repositori senzillet a la carpeta temporal
del nostre equip:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /tmp
&lt;span class="nv"&gt;$ &lt;/span&gt;mkdir elmeurepo
&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd &lt;/span&gt;elmeurepo
&lt;span class="nv"&gt;$ &lt;/span&gt;git init
Initialized empty Git repository in /tmp/elmeurepo/.git/
&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Repositori de prova&amp;quot;&lt;/span&gt; &amp;gt; readme
&lt;span class="nv"&gt;$ &lt;/span&gt;git add .
&lt;span class="nv"&gt;$ &lt;/span&gt;git commit -am &lt;span class="s2"&gt;&amp;quot;primer commit&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;master &lt;span class="o"&gt;(&lt;/span&gt;root-commit&lt;span class="o"&gt;)&lt;/span&gt; eb124ef&lt;span class="o"&gt;]&lt;/span&gt; primer commit
 &lt;span class="m"&gt;1&lt;/span&gt; file changed, &lt;span class="m"&gt;1&lt;/span&gt; insertion&lt;span class="o"&gt;(&lt;/span&gt;+&lt;span class="o"&gt;)&lt;/span&gt;
 create mode &lt;span class="m"&gt;100644&lt;/span&gt; readme
&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Un fitxer amb continguts&amp;quot;&lt;/span&gt; &amp;gt; continguts.txt
&lt;span class="nv"&gt;$ &lt;/span&gt;git add continguts.txt
/tmp/elmeurepo&lt;span class="nv"&gt;$ &lt;/span&gt;git commit -am &lt;span class="s2"&gt;&amp;quot;Afegit continguts&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;master 54da159&lt;span class="o"&gt;]&lt;/span&gt; Afegit continguts
 &lt;span class="m"&gt;1&lt;/span&gt; file changed, &lt;span class="m"&gt;1&lt;/span&gt; insertion&lt;span class="o"&gt;(&lt;/span&gt;+&lt;span class="o"&gt;)&lt;/span&gt;
 create mode &lt;span class="m"&gt;100644&lt;/span&gt; continguts.txt
&lt;span class="nv"&gt;$ &lt;/span&gt;git log
commit 54da15947ad77315308c21d75c351023773a7bb2
Author: Moisès Gómez Girón &amp;lt;iesmoises@example.com&amp;gt;
Date:   Thu Mar &lt;span class="m"&gt;19&lt;/span&gt; 16:25:39 &lt;span class="m"&gt;2015&lt;/span&gt; +0100

    Afegit continguts

commit eb124ef136751c60c224070581d94fc588e31fbb
Author: Moisès Gómez Girón &amp;lt;iesmoises@example.com&amp;gt;
Date:   Thu Mar &lt;span class="m"&gt;19&lt;/span&gt; 16:24:26 &lt;span class="m"&gt;2015&lt;/span&gt; +0100

    primer commit
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si has seguit les passes, ara disposes d'un repositori senzillet amb
dos fitxers i amb dos &lt;em&gt;commits&lt;/em&gt;. Toca crear el paquet:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;git bundle create elmeurepo.bundle master
Counting objects: 6, &lt;span class="k"&gt;done&lt;/span&gt;.
Delta compression using up to &lt;span class="m"&gt;4&lt;/span&gt; threads.
Compressing objects: 100% &lt;span class="o"&gt;(&lt;/span&gt;3/3&lt;span class="o"&gt;)&lt;/span&gt;, &lt;span class="k"&gt;done&lt;/span&gt;.
Writing objects: 100% &lt;span class="o"&gt;(&lt;/span&gt;6/6&lt;span class="o"&gt;)&lt;/span&gt;, &lt;span class="m"&gt;497&lt;/span&gt; bytes, &lt;span class="k"&gt;done&lt;/span&gt;.
Total &lt;span class="m"&gt;6&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;delta 1&lt;span class="o"&gt;)&lt;/span&gt;, reused &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;delta 0&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;$ &lt;/span&gt;ls
continguts.txt  elmeurepo.bundle  readme
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ara ja disposem del fitxer &lt;em&gt;elmeurepo.bundle&lt;/em&gt; que podem enviar per
correu electrònic, amb un &lt;em&gt;pendrive&lt;/em&gt; o com sigui, a la màquina on
volem recuperar el projecte.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="verificacio-d-un-paquet-git"&gt;
&lt;h2&gt;Verificació d'un paquet Git&lt;/h2&gt;
&lt;p&gt;Quan reps un paquet Git, o bé n'has d'enviar un a algú, potser voldràs
comprovar que estigui correcte &lt;a class="footnote-reference" href="#siesexer" id="id2"&gt;[2]&lt;/a&gt;. Git t'ofereix la següent
manera:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
git bundle verify «nomfitxer»
&lt;/pre&gt;
&lt;p&gt;A la secció anterior vam crear un fitxer anomenat &lt;em&gt;elmeurepo.bundle&lt;/em&gt;.
Suposem que el tenim a un altre lloc (encara que podria ser a la
mateixa carpeta on el vam crear). Comprovarem la seva integritat amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;git bundle verify elmeurepo.bundle
The bundle contains &lt;span class="m"&gt;1&lt;/span&gt; ref
54da15947ad77315308c21d75c351023773a7bb2 refs/heads/master
The bundle requires these &lt;span class="m"&gt;0&lt;/span&gt; ref
elmeurepo.bundle is okay
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="extraient-el-contingut-d-un-paquet-git"&gt;
&lt;h2&gt;Extraient el contingut d'un paquet Git&lt;/h2&gt;
&lt;p&gt;Un cop el paquet Git ha arribat a la seva destinació, toca
desempaquetar-ho. Per fer-ho, podem crear una nova versió del
repositori a la nova màquina fent servir l'opció &lt;em&gt;-b&lt;/em&gt; de &lt;em&gt;clone&lt;/em&gt;&lt;/p&gt;
&lt;pre class="literal-block"&gt;
git clone -b «branca» «nomfitxer» «nomrepositori»
&lt;/pre&gt;
&lt;p&gt;Seguint l'exemple que portem:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;git clone -b master elmeurepo.bundle nourepo
Cloning into &lt;span class="s1"&gt;&amp;#39;nourepo&amp;#39;&lt;/span&gt;...
Receiving objects: 100% &lt;span class="o"&gt;(&lt;/span&gt;6/6&lt;span class="o"&gt;)&lt;/span&gt;, &lt;span class="k"&gt;done&lt;/span&gt;.
Resolving deltas: 100% &lt;span class="o"&gt;(&lt;/span&gt;1/1&lt;span class="o"&gt;)&lt;/span&gt;, &lt;span class="k"&gt;done&lt;/span&gt;.
&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd &lt;/span&gt;nourepo
&lt;span class="nv"&gt;$ &lt;/span&gt;ls
continguts.txt  readme
&lt;span class="nv"&gt;$ &lt;/span&gt;git log
commit 54da15947ad77315308c21d75c351023773a7bb2
Author: Moisès Gómez Girón &amp;lt;iesmoises@example.com&amp;gt;
Date:   Thu Mar &lt;span class="m"&gt;19&lt;/span&gt; 16:25:39 &lt;span class="m"&gt;2015&lt;/span&gt; +0100

    Afegit continguts

commit eb124ef136751c60c224070581d94fc588e31fbb
Author: Moisès Gómez Girón &amp;lt;iesmoises@example.com&amp;gt;
Date:   Thu Mar &lt;span class="m"&gt;19&lt;/span&gt; 16:24:26 &lt;span class="m"&gt;2015&lt;/span&gt; +0100

    primer commit
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Com pots veure, el nou repositori conté una còpia de l'original que
inclou tots els &lt;em&gt;commits&lt;/em&gt; de la branca &lt;em&gt;master&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="mes-informacio"&gt;
&lt;h2&gt;Més informació&lt;/h2&gt;
&lt;p&gt;En aquesta entrada t'he presentat una versió reduïda. Hi ha més
possibilitats amb els paquets Git. Per exemple, podries fer paquets
incrementals de manera que es poguessin afegir &lt;em&gt;commits&lt;/em&gt; nous entre
els dos repositoris.&lt;/p&gt;
&lt;p&gt;Si t'has quedat amb les ganes de saber més opcions disponibles
d'aquesta funcionalitat de Git, pots llegir totes les opcions
disponibles a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;git &lt;span class="nb"&gt;help &lt;/span&gt;bundle
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;O amb més descripció al manual de &lt;a class="reference external" href="http://git-scm.com/docs/git-bundle"&gt;Git&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="casexamen" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;O un cas més &amp;quot;remot&amp;quot;: que has de lliurar un projecte a
un docent per que te l'avalui.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="siesexer" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Aquesta comprovació és important, per exemple, si el
que estàs és preparant un paquet per enviar-ho a algú que t'ha
d'avaluar el teu projecte.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="util"></category></entry><entry><title>Instruccions d'instal·lació del JDK 8</title><link href="http://apuntstecnics.herokuapp.com/instruccions-dinstallacio-del-jdk-8.html" rel="alternate"></link><updated>2015-04-09T16:18:42+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-04-09:instruccions-dinstallacio-del-jdk-8.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document descriu les passes per a instal·lar JDK 8 en una
màquina GNU/Linux &lt;a class="footnote-reference" href="#provatendebian" id="id1"&gt;[1]&lt;/a&gt; sense privilegis d'administració.&lt;/p&gt;
&lt;p&gt;En tot moment es pressuposa que faràs servir el JDK des de consola. Si
el teu objectiu és fer-ho anar amb alguna aplicació com ara un IDE,
probablement sigui preferible que el configuris des d'aquest.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="instruccions"&gt;
&lt;h2&gt;Instruccions&lt;/h2&gt;
&lt;p&gt;Descarrega la darrera versió del JDK disponible al lloc de
&lt;a class="reference external" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html"&gt;descàrregues d'Oracle&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;En cas que tinguis dubtes de si la teva màquina funciona amb 32 o 64
bits, pots comprovar-ho amb la comanda:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;uname -m
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En el meu cas m'indica &lt;em&gt;x86_64&lt;/em&gt; i, per tant, instal·laré la de 64
bits. En concret l'entrada marcada com &lt;em&gt;jdk-8u40-linux-x64.tar.gz&lt;/em&gt;, o
la versió equivalent que hi hagi en el moment en que ho facis tu.&lt;/p&gt;
&lt;p&gt;Ara toca descomprimir el fitxer en un lloc accessible. Si no tens una
preferència clara de com i on fer-ho, et proposo les següents passes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;des d'una consola, col·locat a la carpeta on has descarregat el
fitxer anterior.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;ls jdk-8u40-linux-x64.tar.gz
jdk-8u40-linux-x64.tar.gz
&lt;span class="nv"&gt;$ abans&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="nb"&gt;pwd&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;
&lt;span class="nv"&gt;$ &lt;/span&gt;mkdir -p ~/soft/jdk
&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ~/soft/jdk
&lt;span class="nv"&gt;$ &lt;/span&gt;tar xzvf &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$abans&lt;/span&gt;&lt;span class="s2"&gt;/jdk-8u40-linux-x64.tar.gz&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;$ &lt;/span&gt;ln -s jdk1.8.0_40 actual
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si has seguit les instruccions, ara disposes d'una instal·lació de
JDK 8 a la carpeta ~/soft/jdk/actual. Has creat un enllaç simbòlic
que et permetrà disposar d'altres versions del JDK sense grans
canvis al teu sistema.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Ara caldrà afegir el jdk a la teva variable PATH. Et proposo que
ho facis al fitxer ~/.bashrc.&lt;/p&gt;
&lt;p&gt;Així doncs, edita el fitxer ~/.bashrc i afegeix al final d'aquest
la següent línia:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;~/soft/jdk/actual:&lt;span class="nv"&gt;$PATH&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finalment guarda els canvis&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Comprovem que tot ha anat bé&lt;/p&gt;
&lt;p&gt;Obre una nova consola i escriu&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;javac -version
javac 1.8.0_40
&lt;span class="nv"&gt;$ &lt;/span&gt;java -version
java version &lt;span class="s2"&gt;&amp;quot;1.8.0_40&amp;quot;&lt;/span&gt;
Java&lt;span class="o"&gt;(&lt;/span&gt;TM&lt;span class="o"&gt;)&lt;/span&gt; SE Runtime Environment &lt;span class="o"&gt;(&lt;/span&gt;build 1.8.0_40-b26&lt;span class="o"&gt;)&lt;/span&gt;
Java HotSpot&lt;span class="o"&gt;(&lt;/span&gt;TM&lt;span class="o"&gt;)&lt;/span&gt; 64-Bit Server VM &lt;span class="o"&gt;(&lt;/span&gt;build 25.40-b25, mixed mode&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Si tot ha anat bé, enhorabona, ja tens el teu flamant JDK 8 instal·lat
només pel teu usuari sense necessitat de privilegis d'administració.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="provatendebian" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;La instal·lació ha estat provada en un Debian
Wheezy. No hauria de ser molt diferent per altres
distribucions/versions.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="util"></category><category term="java"></category></entry><entry><title>Instal·lació de Maven</title><link href="http://apuntstecnics.herokuapp.com/installacio-de-maven.html" rel="alternate"></link><updated>2015-04-09T16:17:42+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-04-09:installacio-de-maven.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest breu document t'indica com instal·lar Maven en un sistema
GNU/Linux (com ara Debian) sense requerir privilegis d'administració.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="abans-de-comencar"&gt;
&lt;h2&gt;Abans de començar&lt;/h2&gt;
&lt;p&gt;Abans de començar, assegura't que no disposes ja d'una vesió de Maven
en el teu sistema.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mvn --version
mvn: no s&lt;span class="s1"&gt;&amp;#39;ha trobat l&amp;#39;&lt;/span&gt;ordre
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si el resultat de la comanda és l'indicat abans, voldrà dir que no es
troba cap Maven. Si pel contrari, la comanda et mostra alguna
informació, llavors ja disposes d'una versió de Maven instal·lada. Per
exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mvn --version
Apache Maven 3.0.4
Maven home: /usr/share/maven
Java version: 1.7.0_76, vendor: Oracle Corporation
Java home: /usr/lib/jvm/java-7-oracle/jre
Default locale: ca_ES, platform encoding: UTF-8
OS name: &lt;span class="s2"&gt;&amp;quot;linux&amp;quot;&lt;/span&gt;, version: &lt;span class="s2"&gt;&amp;quot;3.5.0-54-generic&amp;quot;&lt;/span&gt;, arch: &lt;span class="s2"&gt;&amp;quot;amd64&amp;quot;&lt;/span&gt;, family: &lt;span class="s2"&gt;&amp;quot;unix&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest cas, hauràs de decidir si vols quedar-te amb aquesta versió
o bé continuar amb aquesta guia per obtenir una de més moderna.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="instruccions"&gt;
&lt;h2&gt;Instruccions&lt;/h2&gt;
&lt;p&gt;Per començar a instal·lar Maven en el teu sistema, primer de tot,
descarrega la darrera versió de Maven del lloc de &lt;a class="reference external" href="https://maven.apache.org/download.cgi"&gt;descàrregues
d'Apache&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Si no tens una preferència clara de com i on fer-ho, et proposo les
següents passes &lt;a class="footnote-reference" href="#compteambversio" id="id1"&gt;[1]&lt;/a&gt;:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Descarrega el paquet amb la darrera versió de Maven:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /tmp
&lt;span class="nv"&gt;$ &lt;/span&gt;wget -c http://apache.rediris.es/maven/maven-3/3.3.1/binaries/apache-maven-3.3.1-bin.tar.gz
&lt;span class="nv"&gt;$ &lt;/span&gt;wget -c http://www.apache.org/dist/maven/maven-3/3.3.1/binaries/apache-maven-3.3.1-bin.tar.gz.md5
&lt;span class="nv"&gt;$ &lt;/span&gt;md5sum apache-maven-3.3.1-bin.tar.gz &lt;span class="p"&gt;|&lt;/span&gt; cut -d&lt;span class="se"&gt;\ &lt;/span&gt; -f &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; diff -b - apache-maven-3.3.1-bin.tar.gz.md5
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si la darrera comanda ha generat algun missatge, voldrà dir que has
tingut algun problema en la descàrrega del fitxer. Torna a
descarregar-t'ho i intenta-ho de nou.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A continuació descomprimirem Maven en un directori que sigui
accessible per la variable PATH.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mkdir ~/soft/apache-maven
&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ~/soft/apache-maven
&lt;span class="nv"&gt;$ &lt;/span&gt;tar -xzvf /tmp/apache-maven-3.3.1-bin.tar.gz
&lt;span class="nv"&gt;$ &lt;/span&gt;ln -s apache-maven-3.3.1 actual
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Ara caldrà afegir Maven a la teva variable PATH. Et proposo que
ho facis al fitxer ~/.bashrc&lt;/p&gt;
&lt;p&gt;Així doncs, edita el fitxer ~/.bashrc i afegeix al final d'aquest
la següent línia &lt;a class="footnote-reference" href="#sijaestavainstallat" id="id2"&gt;[2]&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$PATH&lt;/span&gt;:~/soft/apache-maven/actual/bin
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finalment guarda els canvis.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ol class="arabic" start="3"&gt;
&lt;li&gt;&lt;p class="first"&gt;Comprovem que tot ha anat bé&lt;/p&gt;
&lt;p&gt;Obre una nova consola i escriu&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mvn --version
Apache Maven 3.3.1 &lt;span class="o"&gt;(&lt;/span&gt;cab6659f9874fa96462afef40fcf6bc033d58c1c&lt;span class="p"&gt;;&lt;/span&gt; 2015-03-13T21:10:27+01:00&lt;span class="o"&gt;)&lt;/span&gt;
Maven home: /home/moi/soft/apache-maven/actual
Java version: 1.8.0_40, vendor: Oracle Corporation
Java home: /mnt/dades/soft/jdk/jdk1.8.0_40/jre
Default locale: ca_ES, platform encoding: UTF-8
OS name: &lt;span class="s2"&gt;&amp;quot;linux&amp;quot;&lt;/span&gt;, version: &lt;span class="s2"&gt;&amp;quot;3.2.0-4-amd64&amp;quot;&lt;/span&gt;, arch: &lt;span class="s2"&gt;&amp;quot;amd64&amp;quot;&lt;/span&gt;, family: &lt;span class="s2"&gt;&amp;quot;unix&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Si tot ha anat bé, enhorabona, ja tens el teu flamant Maven instal·lat
només pel teu usuari sense necessitat de privilegis d'administració.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="seguents-passes"&gt;
&lt;h2&gt;Següents passes&lt;/h2&gt;
&lt;p&gt;Ara que ja disposem de Maven al nostre sistema, &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/primeres-passes-amb-maven.html"&gt;veiem com podem fer-lo
servir&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="compteambversio" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Potser voldràs assegurar-te que la versió més
actual continua sent la que et proposo. Altrament, pots canviar les
instruccions per la darrera versió.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="sijaestavainstallat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En cas que ja estigués instal·lat el Maven
al teu sistema, però t'interessi aquesta darrera versió, és
possible que calgui posar el path al nou Maven abans que la resta
de camins de PATH&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="util"></category><category term="java"></category></entry><entry><title>Primeres passes amb Maven</title><link href="http://apuntstecnics.herokuapp.com/primeres-passes-amb-maven.html" rel="alternate"></link><updated>2015-04-09T16:17:42+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-04-09:primeres-passes-amb-maven.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document et servirà d'introducció a l'us de Maven.&lt;/p&gt;
&lt;p&gt;Crearàs un projecte anomenat &lt;em&gt;holamaven&lt;/em&gt; i aprendràs com:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;compilar-lo&lt;/li&gt;
&lt;li&gt;executar-lo&lt;/li&gt;
&lt;li&gt;llençar proves unitàries&lt;/li&gt;
&lt;li&gt;generar un jar per a ser distribuït&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Et proposo que no et limitis a llegir-lo i executis les passes que et
proposo.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="crear-un-projecte-amb-maven"&gt;
&lt;h2&gt;Crear un projecte amb Maven&lt;/h2&gt;
&lt;p&gt;Comencem creant el projecte &lt;em&gt;holamaven&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per crear el projecte, anirem a la carpeta on el desenvoluparem (per
exemple a ~/dev) tot fent:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ~/dev
 &lt;span class="nv"&gt;$ &lt;/span&gt;mvn -B archetype:generate -DarchetypeGroupId&lt;span class="o"&gt;=&lt;/span&gt;org.apache.maven.archetypes -DgroupId&lt;span class="o"&gt;=&lt;/span&gt;org.iesjoandaustria.test -DartifactId&lt;span class="o"&gt;=&lt;/span&gt;holamaven
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Scanning &lt;span class="k"&gt;for&lt;/span&gt; projects...
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt;
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; ------------------------------------------------------------------------
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Building Maven Stub Project &lt;span class="o"&gt;(&lt;/span&gt;No POM&lt;span class="o"&gt;)&lt;/span&gt; 1
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; ------------------------------------------------------------------------
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt;
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; &amp;gt;&amp;gt;&amp;gt; maven-archetype-plugin:2.2:generate &lt;span class="o"&gt;(&lt;/span&gt;default-cli&lt;span class="o"&gt;)&lt;/span&gt; &amp;gt; generate-sources @ standalone-pom &amp;gt;&amp;gt;&amp;gt;
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt;
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&amp;lt;&lt;/span&gt; maven-archetype-plugin:2.2:generate &lt;span class="o"&gt;(&lt;/span&gt;default-cli&lt;span class="o"&gt;)&lt;/span&gt; &amp;lt; generate-sources @ standalone-pom &lt;span class="o"&gt;&amp;lt;&amp;lt;&amp;lt;&lt;/span&gt;
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt;
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; --- maven-archetype-plugin:2.2:generate &lt;span class="o"&gt;(&lt;/span&gt;default-cli&lt;span class="o"&gt;)&lt;/span&gt; @ standalone-pom ---
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Generating project in Batch mode
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; No archetype defined. Using maven-archetype-quickstart &lt;span class="o"&gt;(&lt;/span&gt;org.apache.maven.archetypes:maven-archetype-quickstart:1.0&lt;span class="o"&gt;)&lt;/span&gt;
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; ----------------------------------------------------------------------------
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Using following parameters &lt;span class="k"&gt;for&lt;/span&gt; creating project from Old &lt;span class="o"&gt;(&lt;/span&gt;1.x&lt;span class="o"&gt;)&lt;/span&gt; Archetype: maven-archetype-quickstart:1.0
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; ----------------------------------------------------------------------------
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Parameter: basedir, Value: /home/usuari/dev
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Parameter: package, Value: org.iesjoandaustria.test
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Parameter: groupId, Value: org.iesjoandaustria.test
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Parameter: artifactId, Value: holamaven
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Parameter: packageName, Value: org.iesjoandaustria.test
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Parameter: version, Value: 1.0-SNAPSHOT
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; project created from Old &lt;span class="o"&gt;(&lt;/span&gt;1.x&lt;span class="o"&gt;)&lt;/span&gt; Archetype in dir: /home/usuari/dev/holamaven
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; ------------------------------------------------------------------------
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; BUILD SUCCESS
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; ------------------------------------------------------------------------
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Total &lt;span class="nb"&gt;time&lt;/span&gt;: 2.316 s
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Finished at: 2015-04-10T23:18:11+02:00
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Final Memory: 13M/111M
 &lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; ------------------------------------------------------------------------
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Si tot ha anat correctament, ens haurà generat una nova carpeta
amb el nom del projecte (&lt;em&gt;holamaven&lt;/em&gt;) i dins hi apareix una estructura de directoris habitual en un projecte genèric de Java.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd &lt;/span&gt;holamaven
&lt;span class="nv"&gt;$ &lt;/span&gt;tree .
.
├── pom.xml
└── src
    ├── main
    │   └── java
    │       └── org
    │           └── iesjoandaustria
    │               └── &lt;span class="nb"&gt;test&lt;/span&gt;
    │                   └── App.java
    └── &lt;span class="nb"&gt;test&lt;/span&gt;
        └── java
            └── org
                └── iesjoandaustria
                    └── &lt;span class="nb"&gt;test&lt;/span&gt;
                        └── AppTest.java

&lt;span class="m"&gt;11&lt;/span&gt; directories, &lt;span class="m"&gt;3&lt;/span&gt; files
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;El fitxer pom.xml (POM: Project Object Model) conté la descripció del
projecte en format xml. Maven el farà servir per a realitzar les seves
tasques. Serà el fitxer que editarem per a afegir/modificar elements
del nostre projecte.&lt;/p&gt;
&lt;p&gt;Fem una ullada ràpida al seu contingut:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nt"&gt;&amp;lt;project&lt;/span&gt; &lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;xmlns:xsi=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&lt;/span&gt;
  &lt;span class="na"&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;modelVersion&amp;gt;&lt;/span&gt;4.0.0&lt;span class="nt"&gt;&amp;lt;/modelVersion&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.iesjoandaustria.test&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;holamaven&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;packaging&amp;gt;&lt;/span&gt;jar&lt;span class="nt"&gt;&amp;lt;/packaging&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0-SNAPSHOT&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;name&amp;gt;&lt;/span&gt;holamaven&lt;span class="nt"&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;url&amp;gt;&lt;/span&gt;http://maven.apache.org&lt;span class="nt"&gt;&amp;lt;/url&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;junit&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;junit&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;3.8.1&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;test&lt;span class="nt"&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Aquest pom.xml generat automàticament està informant a Maven, entre
d'altres coses, el nom del nostre projecte i el seu package.&lt;/p&gt;
&lt;p&gt;Els dos fitxers font en java contenen bàsicament un &amp;quot;Hola Món!&amp;quot; i una
prova unitària que segur que passa.&lt;/p&gt;
&lt;p&gt;Mirem org.iesjoandaustria.test.App.java primer:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.iesjoandaustria.test&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt; * Hello world!&lt;/span&gt;
&lt;span class="cm"&gt; *&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;App&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt;
    &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Hello World!&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si compiléssim i executéssim aquesta aplicació fent servir les
utilitats javac i java del JDK, ens respondria amb el ja conegut i
esperat &lt;em&gt;Hello World!&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;L'altre fitxer correspon a una prova unitària amb junit.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.iesjoandaustria.test&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;junit.framework.Test&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;junit.framework.TestCase&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;junit.framework.TestSuite&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt; * Unit test for simple App.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;AppTest&lt;/span&gt;
    &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;TestCase&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * Create the test case&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @param testName name of the test case&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;AppTest&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;testName&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt;
    &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="n"&gt;testName&lt;/span&gt; &lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * @return the suite of tests being tested&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Test&lt;/span&gt; &lt;span class="nf"&gt;suite&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;
    &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;TestSuite&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="n"&gt;AppTest&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt; &lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * Rigourous Test :-)&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;testApp&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;
    &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;assertTrue&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt; &lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En executar aquesta prova amb les eines del JDK, ens informaria que ha
passat el test &lt;em&gt;rigorós&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Passem a compilar i executar el codi que ens ha generat
automàticament.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="compilar-un-projecte-amb-maven"&gt;
&lt;h2&gt;Compilar un projecte amb Maven&lt;/h2&gt;
&lt;p&gt;Per compilar el nostre projecte amb Maven, ens col·locarem en l'arrel
del directori del projecte (on es troba pom.xml) i executarem:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mvn compile
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aquesta comanda realitzarà un cert nombre de passes fins acabar amb un
missatge que tot ha anat bé (&lt;em&gt;BUILD SUCCESS&lt;/em&gt;) seguit d'informació
sobre el temps i la memòria ocupada amb la compilació.&lt;/p&gt;
&lt;p&gt;Si tornem a mirar els continguts del nostre projecte, ens trobarem que
l'estructura ha crescut:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;.
├── pom.xml
├── src
│   ├── main
│   │   └── java
│   │       └── org
│   │           └── iesjoandaustria
│   │               └── &lt;span class="nb"&gt;test&lt;/span&gt;
│   │                   └── App.java
│   └── &lt;span class="nb"&gt;test&lt;/span&gt;
│       └── java
│           └── org
│               └── iesjoandaustria
│                   └── &lt;span class="nb"&gt;test&lt;/span&gt;
│                       └── AppTest.java
└── target
    ├── classes
    │   └── org
    │       └── iesjoandaustria
    │           └── &lt;span class="nb"&gt;test&lt;/span&gt;
    │               └── App.class
    └── maven-status
        └── maven-compiler-plugin
            └── compile
                └── default-compile
                    ├── createdFiles.lst
                    └── inputFiles.lst

&lt;span class="m"&gt;20&lt;/span&gt; directories, &lt;span class="m"&gt;6&lt;/span&gt; files
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ara disposem d'una nova carpeta anomenada &lt;em&gt;target&lt;/em&gt; que, dins la
carpeta &lt;em&gt;classes&lt;/em&gt; inclou la compilació de la classe App.&lt;/p&gt;
&lt;div class="section" id="encoding"&gt;
&lt;h3&gt;Encoding&lt;/h3&gt;
&lt;p&gt;Entre la informació que genera Maven, hi ha alguns &lt;em&gt;warnings&lt;/em&gt;
relacionats amb la codificació de caràcters.&lt;/p&gt;
&lt;p&gt;Per exemple, al meu sistema em diu:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!
&lt;/pre&gt;
&lt;p&gt;Per evitar el missatge i les conseqüències de compilar la nostra
aplicació amb dependència de la plataforma, podem afegir al pom.xml la
següent propietat (per exemple després de l'element &amp;lt;url&amp;gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nt"&gt;&amp;lt;properties&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;project.build.sourceEncoding&amp;gt;&lt;/span&gt;UTF-8&lt;span class="nt"&gt;&amp;lt;/project.build.sourceEncoding&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/properties&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si tornem a provar a compilar, el missatge d'avís ja no hauria de ser
generat.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="versio-de-java"&gt;
&lt;h3&gt;Versió de Java&lt;/h3&gt;
&lt;p&gt;Per defecte, Maven ens compilarà amb Java 5. Per App.java això no
representa cap problema. Imagina, però, que el teu codi inclou alguna
característica introduïda a alguna versió posterior (per exemple, una
sentència &lt;em&gt;try-with-resources&lt;/em&gt; introduïda al Java 7).&lt;/p&gt;
&lt;p&gt;Podem especificar la versió del JDK a utilitzar, tot configurant un
&lt;em&gt;plugin&lt;/em&gt; al pom.xml.&lt;/p&gt;
&lt;p&gt;Per fer-ho, afegeix el següent bloc al pom.xml, per exemple, abans de
definir les dependències:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nt"&gt;&amp;lt;build&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.maven.plugins&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-compiler-plugin&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;3.3&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
                &lt;span class="nt"&gt;&amp;lt;source&amp;gt;&lt;/span&gt;1.7&lt;span class="nt"&gt;&amp;lt;/source&amp;gt;&lt;/span&gt;
                &lt;span class="nt"&gt;&amp;lt;target&amp;gt;&lt;/span&gt;1.7&lt;span class="nt"&gt;&amp;lt;/target&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/build&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="executar-una-classe-amb-maven"&gt;
&lt;h2&gt;Executar una classe amb Maven&lt;/h2&gt;
&lt;p&gt;En compilar, hem vist que Maven ens ha guardat App.class dins de la carpeta &lt;em&gt;target/classes&lt;/em&gt; (amb la jerarquia de directoris requerida pel &lt;em&gt;package&lt;/em&gt;).
Podem executar aquesta classe amb les eines estàndards del JDK&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java -cp &lt;span class="nv"&gt;$CLASSPATH&lt;/span&gt;:target/classes/ org.iesjoandaustria.test.App
Hello World!
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I també ho podem fer directament amb Maven. Per suposat, en un exemple
tan senzill com aquest, no trobarem gaire avantatge, però a mida que
es compliqui el nostre projecte, agrairem disposar d'una eina que ens
controli els &amp;quot;petits&amp;quot; detalls de camins, dependències, etc.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mvn &lt;span class="nb"&gt;exec&lt;/span&gt;:java -Dexec.mainClass&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;org.iesjoandaustria.test.App&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Scanning &lt;span class="k"&gt;for&lt;/span&gt; projects...
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; ------------------------------------------------------------------------
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Building holamaven 1.0-SNAPSHOT
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; ------------------------------------------------------------------------
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; &amp;gt;&amp;gt;&amp;gt; &lt;span class="nb"&gt;exec&lt;/span&gt;-maven-plugin:1.2.1:java &lt;span class="o"&gt;(&lt;/span&gt;default-cli&lt;span class="o"&gt;)&lt;/span&gt; &amp;gt; validate @ holamaven &amp;gt;&amp;gt;&amp;gt;
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="nb"&gt;exec&lt;/span&gt;-maven-plugin:1.2.1:java &lt;span class="o"&gt;(&lt;/span&gt;default-cli&lt;span class="o"&gt;)&lt;/span&gt; &amp;lt; validate @ holamaven &lt;span class="o"&gt;&amp;lt;&amp;lt;&amp;lt;&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; --- &lt;span class="nb"&gt;exec&lt;/span&gt;-maven-plugin:1.2.1:java &lt;span class="o"&gt;(&lt;/span&gt;default-cli&lt;span class="o"&gt;)&lt;/span&gt; @ holamaven ---
&lt;span class="hll"&gt;Hello World!
&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; ------------------------------------------------------------------------
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; BUILD SUCCESS
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; ------------------------------------------------------------------------
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Total &lt;span class="nb"&gt;time&lt;/span&gt;: 0.773 s
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Finished at: 2015-04-10T23:59:55+02:00
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Final Memory: 9M/110M
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; ------------------------------------------------------------------------
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixa't que entre tota la quantitat d'informació que mostra Maven, a la
línia 13 apareix la sortida de l'aplicació.&lt;/p&gt;
&lt;p&gt;Si vols que no aparegui tanta informació i només t'avisi dels errors,
pots fer servir l'opció &lt;em&gt;-q&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mvn -q &lt;span class="nb"&gt;exec&lt;/span&gt;:java -Dexec.mainClass&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;org.iesjoandaustria.test.App&amp;quot;&lt;/span&gt;
Hello World!
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Com que és molt probable que aquesta execució la fem sovint, podríem
informar al pom.xml de quina és la classe principal del projecte.
Així, inclourem al pom.xml dins de l'element &amp;lt;plugins&amp;gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;       &lt;span class="nt"&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.codehaus.mojo&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;exec-maven-plugin&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.2.1&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
             &lt;span class="nt"&gt;&amp;lt;mainClass&amp;gt;&lt;/span&gt;org.iesjoandaustria.test.App&lt;span class="nt"&gt;&amp;lt;/mainClass&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
       &lt;span class="nt"&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Ara podem executar l'aplicació simplement amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mvn -q &lt;span class="nb"&gt;exec&lt;/span&gt;:java
Hello World!
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Maven ens permet especificar més d'un objectiu a l'hora. Per exemple,
la següent comanda compilarà i, si tot ha anat bé, executarà
l'aplicació:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mvn -q compile &lt;span class="nb"&gt;exec&lt;/span&gt;:java
Hello World!
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En cas d'error, Maven ens informarà amb prou detall. Per exemple, si
editem App.java tot treient-li el punt i coma final de la línia 11,
ens trobem que:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mvn -q compile &lt;span class="nb"&gt;exec&lt;/span&gt;:java&lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; COMPILATION ERROR :
&lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; /mnt/dades/home/moi/Feina/repositori/ies_2014-15/dev/pg.execicis/holamaven/src/main/java/org/iesjoandaustria/test/App.java:&lt;span class="o"&gt;[&lt;/span&gt;11,45&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;;&amp;#39;&lt;/span&gt; expected
&lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile &lt;span class="o"&gt;(&lt;/span&gt;default-compile&lt;span class="o"&gt;)&lt;/span&gt; on project holamaven: Compilation failure
&lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; /mnt/dades/home/moi/Feina/repositori/ies_2014-15/dev/pg.execicis/holamaven/src/main/java/org/iesjoandaustria/test/App.java:&lt;span class="o"&gt;[&lt;/span&gt;11,45&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;;&amp;#39;&lt;/span&gt; expected
&lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; -&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt;Help 1&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; To see the full stack trace of the errors, re-run Maven with the -e switch.
&lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; Re-run Maven using the -X switch to &lt;span class="nb"&gt;enable &lt;/span&gt;full debug logging.
&lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; For more information about the errors and possible solutions, please &lt;span class="nb"&gt;read &lt;/span&gt;the following articles:
&lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Help 1&lt;span class="o"&gt;]&lt;/span&gt; http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixa't que entre la informació que ens ofereix trobem:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;a la línia 2 ens descriu l'error. En aquest cas, ha trobat que
falta un punt i coma a la línia 11 de App.java.&lt;/li&gt;
&lt;li&gt;a les darreres línies ens indica que podem obtenir encara més
detall si afegim les opcions &lt;em&gt;-e&lt;/em&gt; o &lt;em&gt;-X&lt;/em&gt;, i fins i tot ens ofereix
una url amb articles d'ajut per trobar errors i possibles
solucions!&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="passar-arguments"&gt;
&lt;h3&gt;Passar arguments&lt;/h3&gt;
&lt;p&gt;Si l'execució de la nostra classe requerís arguments per línia de
comandes, podem afegir-los a la comanda d'execució amb l'opció:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
-Dexec.args=&amp;quot;arg1 arg2 arg3&amp;quot;
&lt;/pre&gt;
&lt;p&gt;Per exemple, modifica App.java perquè contingui el següent codi:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;App&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Hello World!&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ara compila i executa:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mvn -q compile &lt;span class="nb"&gt;exec&lt;/span&gt;:java -Dexec.mainClass&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;org.iesjoandaustria.test.App&amp;quot;&lt;/span&gt; -Dexec.args&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;arg1 arg2 arg3&amp;quot;&lt;/span&gt;
Hello World!
arg1
arg2
arg3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;També pots afegir els arguments al pom.xml dins del bloc
&amp;lt;configuration&amp;gt;, per exemple, després de definir el &amp;lt;mainClass&amp;gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nt"&gt;&amp;lt;arguments&amp;gt;&lt;/span&gt;
   &lt;span class="nt"&gt;&amp;lt;argument&amp;gt;&lt;/span&gt;arg1&lt;span class="nt"&gt;&amp;lt;/argument&amp;gt;&lt;/span&gt;
   &lt;span class="nt"&gt;&amp;lt;argument&amp;gt;&lt;/span&gt;arg2&lt;span class="nt"&gt;&amp;lt;/argument&amp;gt;&lt;/span&gt;
   &lt;span class="nt"&gt;&amp;lt;argument&amp;gt;&lt;/span&gt;arg3&lt;span class="nt"&gt;&amp;lt;/argument&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/arguments&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="executar-les-proves-unitaries-amb-maven"&gt;
&lt;h2&gt;Executar les proves unitàries amb Maven&lt;/h2&gt;
&lt;p&gt;Per executar les proves unitàries amb Maven, farem servir la següent
comanda &lt;a class="footnote-reference" href="#compteerror" id="id1"&gt;[1]&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mvn -q &lt;span class="nb"&gt;test&lt;/span&gt;

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.iesjoandaustria.test.AppTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.021 sec

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 0
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Com era d'esperar, el nostre codi passa les proves. L'objectiu &lt;em&gt;test&lt;/em&gt;
provarà d'executar totes les proves del projecte.&lt;/p&gt;
&lt;div class="section" id="un-junit-mes-actual"&gt;
&lt;h3&gt;Un JUnit més actual&lt;/h3&gt;
&lt;p&gt;Si tens molta capacitat d'observació, és possible que te n'hagis
adonat que estem fent servir una versió una mica antiga de JUnit. En
el pom.xml està demanant la versió 3.8.1, mentre que la versió
disponible en el moment en que estic escrivint aquesta guia ja es
trobava a la 4.12.&lt;/p&gt;
&lt;p&gt;Per fer que Maven faci servir aquesta darrera versió, modificarem el
pom.xml de manera que la dependència de JUnit quedi com:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;junit&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;junit&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;4.12&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;test&lt;span class="nt"&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per a adequar el test a la nova versió, reemplaçarem el contingut de
AppTest.java per:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.iesjoandaustria.test&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;junit.framework.Assert&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.junit.Test&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;AppTest&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="nd"&gt;@Test&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;testApp&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;
    &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Assert&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;assertTrue&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt; &lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si tornem a executar el test, hauria de passar la prova sense
problemes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="afegint-nous-tests"&gt;
&lt;h3&gt;Afegint nous tests&lt;/h3&gt;
&lt;p&gt;Podem afegir nous tests a AppTest.java, però també a nous fitxers.&lt;/p&gt;
&lt;p&gt;En aquest cas, modificarem la classe App.java de manera que contingui
un nou mètode que puguem provar:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.iesjoandaustria.test&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt; * Hello world!&lt;/span&gt;
&lt;span class="cm"&gt; *&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;App&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;getGreeting&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Hello World!&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="n"&gt;getGreeting&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ara crearem un nou fitxer de proves al mateix directori de
AppTest.java amb el següent contingut:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.iesjoandaustria.test&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;junit.framework.Assert&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.junit.Test&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;App2Test&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="nd"&gt;@Test&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;testGetGreeting&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;
    &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Assert&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;assertEquals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt; &lt;span class="n"&gt;App&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getGreeting&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Hello World!&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si provem d'executar les proves, aquest cop Maven ens dirà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.iesjoandaustria.test.AppTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.367 sec
Running org.iesjoandaustria.test.App2Test
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec

Results :

Tests run: 2, Failures: 0, Errors: 0, Skipped: 0
&lt;/pre&gt;
&lt;p&gt;És a dir, ens ha passat un test per cada fitxer de test.&lt;/p&gt;
&lt;p&gt;Atenció: Per defecte s'espera que els noms dels fitxers de test
comencin per &lt;em&gt;Test&lt;/em&gt; o bé acabin en &lt;em&gt;Test&lt;/em&gt; o &lt;em&gt;TestCase&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Podem executar fitxers concrets de test ambo&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mvn -Dtest&lt;span class="o"&gt;=&lt;/span&gt;App2Test &lt;span class="nb"&gt;test&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I fins i tot, seleccionar-los amb comodins:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mvn -Dtest&lt;span class="o"&gt;=&lt;/span&gt;*2Test &lt;span class="nb"&gt;test&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="generar-un-jar-amb-maven"&gt;
&lt;h2&gt;Generar un jar amb Maven&lt;/h2&gt;
&lt;p&gt;Per acabar amb aquesta petita introducció a l'ús de Maven, veurem com
podem generar un jar amb tota la aplicació, incloent dependències.&lt;/p&gt;
&lt;p&gt;En primer lloc, ens caldrà configurar al pom.xml un plugin per generar
el jar amb totes les dependències. Sense entrar en detalls, afegirem
al pom.xml el següent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;   &lt;span class="nt"&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
       &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-assembly-plugin&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
       &lt;span class="nt"&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
           &lt;span class="nt"&gt;&amp;lt;archive&amp;gt;&lt;/span&gt;
               &lt;span class="nt"&gt;&amp;lt;manifest&amp;gt;&lt;/span&gt;
&lt;span class="hll"&gt;                   &lt;span class="nt"&gt;&amp;lt;mainClass&amp;gt;&lt;/span&gt;org.iesjoandaustria.test.App&lt;span class="nt"&gt;&amp;lt;/mainClass&amp;gt;&lt;/span&gt;
&lt;/span&gt;               &lt;span class="nt"&gt;&amp;lt;/manifest&amp;gt;&lt;/span&gt;
           &lt;span class="nt"&gt;&amp;lt;/archive&amp;gt;&lt;/span&gt;
           &lt;span class="nt"&gt;&amp;lt;descriptorRefs&amp;gt;&lt;/span&gt;
               &lt;span class="nt"&gt;&amp;lt;descriptorRef&amp;gt;&lt;/span&gt;jar-with-dependencies&lt;span class="nt"&gt;&amp;lt;/descriptorRef&amp;gt;&lt;/span&gt;
           &lt;span class="nt"&gt;&amp;lt;/descriptorRefs&amp;gt;&lt;/span&gt;
       &lt;span class="nt"&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
   &lt;span class="nt"&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que cal indicar quina és la classe amb el main() de manera que
Maven pugui definir correctament el manifest del .jar.&lt;/p&gt;
&lt;p&gt;Ara podem generar el .jar amb la comanda:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mvn compile assembly:single
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Que ens haurà generat el fitxer
&lt;em&gt;target/holamaven-1.0-SNAPSHOT-jar-with-dependencies.jar&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Podem portar-nos aquest fitxer a un altre equip amb el jre i
executar-ho fent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java -jar holamaven-1.0-SNAPSHOT-jar-with-dependencies.jar
Hello World!
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="conclusions"&gt;
&lt;h2&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;En aquesta breu guia hem vist com realitzar operacions bàsiques amb
Maven, com ara crear un projecte, configurar diferents aspectes,
compilar, executar, afegir/modificar dependències, passar jocs de
prova i generar un .jar amb tota l'aplicació.&lt;/p&gt;
&lt;p&gt;Hi ha moltes coses que han quedat sense explicar d'aquesta utilitat.
Si vols ampliar els teus coneixements, et proposo que consultis &lt;a class="reference external" href="http://maven.apache.org/"&gt;la
extensa documentació del projecte Maven&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="compteerror" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Abans de passar les proves, assegura't que has
corregit l'error que hem introduït al final de l'apartat anterior
per a veure com informa Maven dels errors de compilació! Ah! i és
clar, caldrà que recompilis.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="util"></category><category term="java"></category></entry><entry><title>Diagrames de seqüència</title><link href="http://apuntstecnics.herokuapp.com/diagrames-de-sequencia.html" rel="alternate"></link><updated>2015-02-21T18:22:59+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-21:diagrames-de-sequencia.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document és un guió per la presentació a classe dels diagrames
de seqüència.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exemple-comandes"&gt;
&lt;h2&gt;Exemple Comandes&lt;/h2&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="comandes" src="http://apuntstecnics.herokuapp.com/images/uml002.img001.comandes.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Imatge generada amb BOUML&lt;/p&gt;
&lt;p&gt;Del llibre &lt;em&gt;UML Distilled: A Brief Guide to the Standard Object
Modeling Language, Third Edition&lt;/em&gt; de Martin Fowler.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exemple-entorn-gat-renat"&gt;
&lt;h2&gt;Exemple Entorn Gat Renat&lt;/h2&gt;
&lt;p&gt;Considerant l'entorn operatiu del Gat Renat amb l'ampliació de
l'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/relacions-entre-classes.html"&gt;exercici 1 de Relacions entre classes&lt;/a&gt;&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="entorn Renat" src="http://apuntstecnics.herokuapp.com/images/uml002.img002.exemple_entornrenat.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-l-activitat-dels-ulls-del-gat-renat"&gt;
&lt;h3&gt;Exercici 1. L'activitat dels ulls del Gat Renat&lt;/h3&gt;
&lt;p&gt;Representa el diagrama de seqüència corresponent a l'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/relacions-entre-classes.html"&gt;exercici 2 de
Relacions entre classes&lt;/a&gt; de
manera que es pugui entendre com interacciona el gat amb els ulls a
partir dels diferents serveis del gat que afecten a l'estat dels ulls.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary></entry><entry><title>Diagrames d'estat</title><link href="http://apuntstecnics.herokuapp.com/diagrames-destat.html" rel="alternate"></link><updated>2015-02-21T18:22:59+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-21:diagrames-destat.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document és un guió per la presentació a classe dels diagrames
de màquines d'estat. En el document s'abreujarà per &lt;em&gt;diagrames
d'estat&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;Diagrames d'estat&lt;/h2&gt;
&lt;p&gt;Un diagrama d'estats mostra una &lt;em&gt;màquina d'estats&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Els diagrames d'estat estan formats per un conjunt d'estats i les
transicions entre aquests.&lt;/p&gt;
&lt;p&gt;Les transicions normalment apareixen etiquetades amb l'esdeveniment
que les provoca o dispara (&lt;em&gt;trigger&lt;/em&gt;). També poden incloure informació
respecte a condicions en que es dispararan i accions a realitzar. La
notació completa és: &lt;em&gt;esdeveniment[condició]/acció&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Farem servir els diagrames d'estat per modelitzar el comportament
dinàmic d'un sistema, normalment el d'objectes que responen a
esdeveniments externs.&lt;/p&gt;
&lt;p&gt;Exemple una mica forçat del funcionament d'un ascensor poc
convencional.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Estat de l'ascensor" src="http://apuntstecnics.herokuapp.com/images/uml001.img001.estatascensor.png" /&gt;
&lt;/div&gt;
&lt;p&gt;L'estat final no és obligatori i n'hi poden aparèixer més d'un.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="implementacio"&gt;
&lt;h2&gt;Implementació&lt;/h2&gt;
&lt;p&gt;Una possible codificació per l'estat &lt;em&gt;Funcionant&lt;/em&gt; seria:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
switch (estat) {
    case PlantaBaixa:
        switch (esdeveniment) {
            case Puja1:
                setEstat(PrimerPis);
                break;
            case Puja2:
                setEstat(SegonPis);
                break;
            case Baixa1:
            case Baixa2:
                mostraError();
        }
        break;
    case PrimerPis:
        switch (esdeveniment) {
            «...»
        }
        break;
    case SegonPis:
        «...»
        break;
}
&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-implementacio-de-l-ascensor"&gt;
&lt;h3&gt;Exercici 1. Implementació de l'ascensor&lt;/h3&gt;
&lt;p&gt;Completa la implementació de l'estat compost &lt;em&gt;Funcionant&lt;/em&gt; de l'exemple
de l'ascensor.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-l-estat-del-gat-renat"&gt;
&lt;h3&gt;Exercici 2. L'estat del Gat Renat&lt;/h3&gt;
&lt;p&gt;Considera una versió del Gat Renat que pot estar en alguna de les
següents posicions:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;corrent&lt;/li&gt;
&lt;li&gt;caminant&lt;/li&gt;
&lt;li&gt;dret&lt;/li&gt;
&lt;li&gt;assegut&lt;/li&gt;
&lt;li&gt;estirat&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;El gat no pot posar-se a caminar o a córrer si estava assegut o
estirat. Per altra banda, si estava corrent o caminant, no pot
seure's o estirar-se de cop, primer ha de quedar-se dret. Malgrat
estant dret pot estirar-se directament, no pot posar-se dret si estava
estirat.&lt;/p&gt;
&lt;p&gt;Realitza el diagrama d'estats i proposa un esquema d'implementació.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary></entry><entry><title>Us bàsic de l'entorn de desenvolupament integrat Eclipse</title><link href="http://apuntstecnics.herokuapp.com/us-basic-de-lentorn-de-desenvolupament-integrat-eclipse.html" rel="alternate"></link><updated>2015-02-21T18:22:58+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-21:us-basic-de-lentorn-de-desenvolupament-integrat-eclipse.html</id><summary type="html">&lt;!-- categories: eines --&gt;
&lt;!-- tags: eclipse --&gt;
&lt;!-- permalink: '/:categories/eclipse-us-basic' --&gt;
&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquest document accedirem als elements bàsics personalització i ús
de l'entorn Eclipse.&lt;/p&gt;
&lt;p&gt;Per seguir-lo, caldrà disposar de&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;eclipse instal·lat amb jdk correctament instal·lat&lt;/li&gt;
&lt;li&gt;plug-in CDT instal·lat&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Si encara no tens instal·lat Eclipse, pots seguir aquesta
&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-de-eclipse.html"&gt;guia d'eclipse&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Si no tens instal·lat el CDT, pots seguir aquesta
&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/configuracio-declipse-per-cc.html"&gt;guia de CDT&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="continguts"&gt;
&lt;h2&gt;Continguts&lt;/h2&gt;
&lt;p&gt;Començarem amb la creació d'un programa en C que respongui al següent
enunciat de requeriments:&lt;/p&gt;
&lt;blockquote&gt;
Escriu un programa que demani a l'usuari dos punts en el pla i li
mostri la longitud del segment que descriuen.&lt;/blockquote&gt;
&lt;p&gt;Crea un nou projecte de tipus &lt;em&gt;C Project&lt;/em&gt; i anomenal &lt;em&gt;Punts&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Selecciona el projecte acabat de crear i, amb el botó dret, crea un
nou fitxer font de C&lt;/p&gt;
&lt;p&gt;Ens crea el nou fitxer amb una capçalera de comentaris on surt la
data de creació i el nom de l'autor (el nom de l'usuari del
sistema)&lt;/p&gt;
&lt;p&gt;Comença a escriure &lt;tt class="docutils literal"&gt;int main(&lt;/tt&gt; i fixa't que et tanca el parèntesi
automàticament. Un detall és que si tot i així el tanques tu, no et
queden dos parèntesis tancats.&lt;/p&gt;
&lt;p&gt;Passa el mateix amb les claus. Si obres &lt;tt class="docutils literal"&gt;{&lt;/tt&gt; i fas &amp;lt;enter&amp;gt;, et
tanca la clau i t'indenta adequadament en la línia on probablement
voldràs començar a escriure codi.&lt;/p&gt;
&lt;p&gt;Introdueix &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;printf(&amp;quot;Introdueix&lt;/span&gt; les coordenades de dos punts\n&amp;quot;)&lt;/tt&gt;
sense el punt i coma final. Veuràs que t'avisa del problema amb un
interrogant al costat esquerre de la línia. Si poses el cursor a
sobre de l'interrogant, podràs llegir una descripció de l'error. En
aquest cas &lt;tt class="docutils literal"&gt;Missing ;&lt;/tt&gt;. Corregeix la situació i l'avís
desapareixerà.&lt;/p&gt;
&lt;p&gt;També veuràs que algunes paraules del missatge apareixen
subratllades en vermell. El comprovador ortogràfic no està
configurat pel català &lt;a class="footnote-reference" href="#spellcat" id="id1"&gt;[1]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Afegeix&lt;/p&gt;
&lt;pre class="literal-block"&gt;
printf(&amp;quot;Punt 1 coordenada x: &amp;quot;);
scanf(&amp;quot;%f&amp;quot;, &amp;amp;x1);
&lt;/pre&gt;
&lt;p&gt;Un nou avís ens informa que la variable x1 no apareix definida.
Escollim l'opció de creació d'una variable local i veiem que ens la
crea però amb el tipus incorrecte (no sempre encerta) A més, ens ha
col·locat la declaració a la línia justament anterior al seu ús
quan en C es usual posar-les a l'inici del bloc. Fes les
correccions corresponents.&lt;/p&gt;
&lt;p&gt;Escriu peticions per la resta de coordenades, fes el càlcul de la
longitud del segment i mostra el resultat per pantalla.&lt;/p&gt;
&lt;p&gt;El programa hauria de quedar quelcom similar a:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
/*
 * calculaSegment.c
 *
 *  Created on: 16/08/2012
 *      Author: Moisès
 */

#include&amp;lt;stdio.h&amp;gt;
#include&amp;lt;math.h&amp;gt;
int main() {
    float x1, y1, x2, y2;
    float longitud;
    printf(&amp;quot;Introdueix les coordenades de dos punts\n&amp;quot;);
    printf(&amp;quot;Punt 1 coordenada x: &amp;quot;);
    scanf(&amp;quot;%f&amp;quot;, &amp;amp;x1);
    printf(&amp;quot;Punt 1 coordenada y: &amp;quot;);
    scanf(&amp;quot;%f&amp;quot;, &amp;amp;y1);
    printf(&amp;quot;Punt 2 coordenada x: &amp;quot;);
    scanf(&amp;quot;%f&amp;quot;, &amp;amp;x2);
    printf(&amp;quot;Punt 2 coordenada y: &amp;quot;);
    scanf(&amp;quot;%f&amp;quot;, &amp;amp;y2);
    longitud = sqrt(pow((x2-x1), 2)+pow((y2-y1), 2));
    printf(&amp;quot;La longitud del segment és %0.2f\n&amp;quot;, longitud);
    return 0;
}
&lt;/pre&gt;
&lt;p&gt;Ara executarem el nostre codi (ex. Run-&amp;gt;run) &lt;a class="footnote-reference" href="#sqrtproblem" id="id2"&gt;[2]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Eclipse ens ha fet tot: compilar, enllaçar i llençar l'execució. Si
anem a la consola veurem que podem introduir les dades i executar
el nostre programa.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Funcionament del càlcul de segment" src="http://apuntstecnics.herokuapp.com/images/eclipse004.img001.funcionant.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Suposem que volem canviar el nom de les variables del primer punt
per &lt;tt class="docutils literal"&gt;coord1&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;coord2&lt;/tt&gt;. Fàcil. Cliquem sobre qualsevol
aparició de &lt;tt class="docutils literal"&gt;x1&lt;/tt&gt; i escollim &lt;em&gt;Refactor&lt;/em&gt; del menú contextual (clic
dret) Ara escollim &lt;em&gt;Rename&lt;/em&gt; i comencem a escriure el nou nom.
Tornem a posar, però, els noms anteriors que eren molt més curts.&lt;/p&gt;
&lt;p&gt;Estaria bé veure els números de línia, no? Windows -&amp;gt; Preferences
-&amp;gt; Editors -&amp;gt; Text Editors -&amp;gt; Show line numbers.&lt;/p&gt;
&lt;p&gt;Ara crearem una funció que calculi la longitud del segment. Per
fer-ho, en comptes de copiar&amp;amp;enganxar, el que farem serà
seleccionar l'expressió que assignem a &lt;tt class="docutils literal"&gt;longitud&lt;/tt&gt; i fem
Refactor-&amp;gt;Extract function. Aqui, simplement escollim el nom de la
funció (per exemple &lt;tt class="docutils literal"&gt;calcula_longitud&lt;/tt&gt; i Eclipse ens ho fa tot
sol!. Ens ha posat com a tipus de retorn &lt;em&gt;double&lt;/em&gt;. El podem
corregir si volem un float.&lt;/p&gt;
&lt;p&gt;Ara tornarem a executar el programa. Aquest cop, però, anirem a Run
-&amp;gt; Debug. Ens demanarà obrir una nova perspectiva, acceptem-ho i
veurem quelcom similar a la següent imatge.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Depuració amb Eclipse" src="http://apuntstecnics.herokuapp.com/images/eclipse004.img002.depurant.png" /&gt;
&lt;/div&gt;
&lt;p&gt;A la secció 1 trobem el fil d'execució en que estem. Com que no estem
desenvolupant una aplicació multifil, podem ignorar-la&lt;/p&gt;
&lt;p&gt;La secció 2 correspon a la inspecció de variables i altres elements
de l'execució del nostre programa. Es clar que les variables no han
estat inicialitzades i contenen soroll.&lt;/p&gt;
&lt;p&gt;La secció 3 continua sent el nostre codi però té ressaltada la
línia amb el proper codi a executar. De moment només ha declarat
les variables. Atenció que, tot i que podem editar, ara no és el
moment més adequat i probablement ens demanarà tornar a executar
per tenir en compte els canvis. També és interessant passar per
sobre de les variables amb el cursor de l'apuntador. Veurem
informació en temps d'execució.&lt;/p&gt;
&lt;p&gt;La secció 4 ja l'havíem vista. Ens dona un esquema del codi. Podem
veure-hi les nostres dues funcions &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;calcula_longitud()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;La secció 5 també la coneixem: correspon a la consola.&lt;/p&gt;
&lt;p&gt;Amb Run -&amp;gt; Step Over (o F6) podem executar la línia actual. Així
podem anar fent fins que arribem a &lt;tt class="docutils literal"&gt;scanf()&lt;/tt&gt;. No podrem avançar
fins que no introduïm un valor i fem enter a la consola.&lt;/p&gt;
&lt;p&gt;Fixem-nos que a la secció d'inspecció de variables podem veure el
nou valor de &lt;tt class="docutils literal"&gt;x1&lt;/tt&gt;. Suposem que voldríem que fos un altre. Doncs
l'editem a la secció d'inspecció i ja està!&lt;/p&gt;
&lt;p&gt;Com que és una mica incòmode anar línia a línia, afegirem un punt
d'aturada a la línia on assignem valor a la variable &lt;tt class="docutils literal"&gt;longitud&lt;/tt&gt;.
Ho farem, per exemple, amb clic dret sobre el número de línia i
&lt;em&gt;Toggle breakpoint&lt;/em&gt; (tot i que és més directe amb un doble clic
sobre la part grisa del costat) Ara continuem amb l'execució del
programa amb Run -&amp;gt; Resume o F8. S'aturarà quan arribi a la línia
amb el punt d'aturada.&lt;/p&gt;
&lt;p&gt;Ara tenim dues opcions. Executar aquesta línia com un bloc (farem
F6) o bé entrar dins de la funció &lt;tt class="docutils literal"&gt;calcula_longitud()&lt;/tt&gt; per
inspeccionar-la (Run -&amp;gt; Step Into o F5) Si fem aquesta segona
notarem que l'inspector de variables ja no té longitud. Això és
perquè estem en un bloc on aquesta variable no existeix. De fet,
encara que tenen el mateix nom, la resta de les variables no són
les mateixes que les del bloc principal.&lt;/p&gt;
&lt;p&gt;Per cert, trobarem l'executable a la carpeta Debug dins de la carpeta
en el &lt;em&gt;workspace&lt;/em&gt; corresponent al nostre projecte.&lt;/p&gt;
&lt;hr class="docutils" /&gt;
&lt;table class="docutils footnote" frame="void" id="spellcat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Tot i que es pot configurar perquè faci la comprovació
pel català, el procés no resulta gaire interessant pels objectius
d'aquesta guia. Queda com a exercici de l'usuari interessat.
Altrament caldrà ignorar aquest subratllat, o encara millor,
inhabilitar la comprovació ortogràfica.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="sqrtproblem" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Amb les darreres versions del compilador gcc (i
potser amb altres) cal linkar explícitament la biblioteca math al
nostre programa. Per fer-ho haurem d'anar a les propietats del
projecte -&amp;gt; C/C++ Build -&amp;gt; Settings -&amp;gt; GCC C Linker -&amp;gt; Libraries, i
aquí premem l'icona verda amb un + i afegim &lt;tt class="docutils literal"&gt;m&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary></entry><entry><title>Desenvolupament d'aplicacions</title><link href="http://apuntstecnics.herokuapp.com/desenvolupament-daplicacions.html" rel="alternate"></link><updated>2015-02-11T10:33:42+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-11:desenvolupament-daplicacions.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Del prefaci del llibre &lt;em&gt;The Pragmatic Programmer: From Journeyman to
Master&lt;/em&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Programming is a craft. At its simplest, it comes down to getting
a computer to do what you want it to do (or what your user wants
it to do). As a programmer, you are part listener, part advisor,
part interpreter, and part dictator. You try to capture elusive
requirements and find a way of expressing them so that a mere
machine can do them justice. You try to document your work so that
others can understand it, and you try to engineer your work so
that others can build on it. What's more, you try to do all this
against the relentless ticking of the project clock. You work
small miracles every day.&lt;/p&gt;
&lt;p&gt;It's a difficult job.&lt;/p&gt;
&lt;p&gt;There are many people offering you help. Tool vendors tout the
miracles their products perform. Methodology gurus promise that
their techniques guarantee results. Everyone claims that their
programming language is the best, and every operating system is
the answer to all conceivable ills.&lt;/p&gt;
&lt;p&gt;Of course, none of this is true. There are no easy answers. There
is no such thing as a best solution, be it a tool, a language, or
an operating system. There can only be systems that are more
appropriate in a particular set of circumstances.&lt;/p&gt;
&lt;p&gt;This is where pragmatism comes in. You shouldn't be wedded to any
particular technology, but have a broad enough background and
experience base to allow you to choose good solutions in
particular situations. Your background stems from an understanding
of the basic principles of computer science, and your experience
comes from a wide range of practical projects. Theory and practice
combine to make you strong.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Els usem, els construïm, els modifiquem, en somiem amb nous.
L'element amb que treballem els desenvolupadors de programari és,
evidentment, el programari. Però què és exactament el programari?
Quines característiques té? Com es construeix?&lt;/p&gt;
&lt;p&gt;En aquest tema es tracta el concepte de &lt;em&gt;programari&lt;/em&gt; des de diferents
perspectives amb l'objectiu d'oferir un context de reflexió sobre el
producte de la nostra professió.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="definicio-de-programari"&gt;
&lt;h2&gt;Definició de programari&lt;/h2&gt;
&lt;div class="section" id="definicio-formal-de-programari"&gt;
&lt;h3&gt;Definició formal de programari&lt;/h3&gt;
&lt;p&gt;Una definició formal de llibre de text diria que el programari es
composa de:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;les instruccions (programes de computadora) que en executar-se
proporcionen les característiques, funcions i grau de rendiment
desitjats;&lt;/li&gt;
&lt;li&gt;les estructures de dades que permeten que els programes manipulin
informació de manera adequada; y&lt;/li&gt;
&lt;li&gt;els documents que descriuen l'operació i ús dels programes.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Però, amb això sabem que és el programari?&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="caracteristiques"&gt;
&lt;h3&gt;Característiques&lt;/h3&gt;
&lt;p&gt;El programari presenta unes característiques molt particulars, en
destacarem aquí:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;es desenvolupa o es construeix, no es manufactura en el sentit
clàssic&lt;/p&gt;
&lt;p&gt;No es treballa amb matèria (física), les despeses que ocasiona estan
en els desenvolupadors i no tant en els materials&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;no es desgasta però es deteriora&lt;/p&gt;
&lt;p&gt;amb el temps, les modificacions que es realitzen per manteniment
introdueixen més i més errors&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;es construeix majoritàriament &amp;quot;a mida&amp;quot;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;començant sempre pràcticament des de zero,&lt;/li&gt;
&lt;li&gt;sense pràcticament fer servir components a diferència de la
tendència general de la industria&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="tipus-de-programari"&gt;
&lt;h3&gt;Tipus de programari&lt;/h3&gt;
&lt;p&gt;El programari sovint es classifica en una o més de les següents
categories:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;programari de sistemes&lt;/p&gt;
&lt;p&gt;S.O., compiladors, i altres utilitats que es fan servir sovint per
altres programes&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;programari d'aplicació&lt;/p&gt;
&lt;p&gt;Programes que resolen una necessitat específica de negoci (ex.
processament de transaccions als punts de venda i el control de
processos de manufactura en temps real com ara &lt;em&gt;just-in-time&lt;/em&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;programari científic i d'enginyeria&lt;/p&gt;
&lt;p&gt;Caracteritzats per algorismes &amp;quot;devoradors de nombres&amp;quot; ex.
analitzadors de dades (astronomia, vulcanologia, tensió
automotriu, biologia molecular...)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;programari incrustat (embedded)&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;resideix a memòria de només lectura dels sistemes&lt;/li&gt;
&lt;li&gt;controlen característiques i funcions concretes per l'usuari i
pel propi sistema ex. control del teclat d'un forn microones,
funcions digitals de l'automòbil (control del combustible, de
frenada...)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;programari de línia de productes&lt;/p&gt;
&lt;p&gt;Ofereixen una capacitat específica valida per un gran nombre
d'usuaris dins d'un sector concret: (ex. productes de control
d'inventaris, comptabilitat...) o molt genèrics (ex. processadors
de texts, full de càlculs, presentació, multimedia, gestió de
bases de dades...)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;aplicacions basades en web (WebApps)&lt;/p&gt;
&lt;p&gt;Des d'un conjunt d'arxius en html fins a aplicacions B2B (Business
to Business) i de comerç electrònic.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;aplicacions per dispositius mòbils (&lt;em&gt;apps&lt;/em&gt;)&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;s'executen en smartphones, tablets i altres dispositius
lleugers.&lt;/li&gt;
&lt;li&gt;connectades, amb localització geogràfica, amb interaccions més
properes a l'usuari (gestos tàctils, moviment i posició del
dispositiu, anàlisi de audio i vídeo, etc.)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;programari d'intel·ligència artificial&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;fa servir algorismes no numèrics (ex. basats en heurístics) per
a la resolució de problemes complexos que encara no poden ser
abordats per l'anàlisi directe. Inclouen aplicacions per a la
robòtica, els sistemes experts, el reconeixement de patrons
(imatge, so), les xarxes neuronals artificials, demostració de
teoremes, jocs d'ordinador i, per descomptat, parts importants
de les &lt;em&gt;apps&lt;/em&gt; més innovadores.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="el-programari-heretat-legacy-software"&gt;
&lt;h3&gt;El programari heretat (legacy software)&lt;/h3&gt;
&lt;p&gt;Existeixen milers de programes en funcionament de totes les tipologies&lt;/p&gt;
&lt;p&gt;Algunes descripcions:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Els sistemes de programari heretats van ser desenvolupats fa
dècades, i han estat modificats de forma contínua per a complir els
requeriments dels canvis als negocis i de les plataformes de còmput.
La proliferació d'aquests sistemes ha causat mals de cap a les grans
organitzacions, que els perceben com a costosos de mantenir i
d'evolució molt arriscada&lt;/li&gt;
&lt;li&gt;Molts sistemes heretats donen suport a les funcions centrals de
negoci i són indispensables per les empreses&lt;/li&gt;
&lt;li&gt;Es caracteritza per la seva longevitat i per ser crítics pels
negocis&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Una característica addicional en general és la poca qualitat d'aquest
programari:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;dissenys impossibles d'entendre,&lt;/li&gt;
&lt;li&gt;codi complicat,&lt;/li&gt;
&lt;li&gt;documentació escassa o inexistent,&lt;/li&gt;
&lt;li&gt;casos de prova i resultats que mai van ser arxivats,&lt;/li&gt;
&lt;li&gt;historial de canvis pobrement mantingut, ...&lt;/li&gt;
&lt;li&gt;no s'adapta 100% a les necessitats&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I, què es pot fer amb tot això?&lt;/p&gt;
&lt;p&gt;La &lt;em&gt;regla d'or&lt;/em&gt; sempre ha estat &amp;quot;mentre funcioni no el toquis!&amp;quot;.&lt;/p&gt;
&lt;p&gt;Amb el temps, però, tot programari en ús requereix canvis perquè:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;cal adaptar-lo a noves tecnologies (ex. a entorns visuals, xarxa...)&lt;/li&gt;
&lt;li&gt;calen nous requeriments de negoci o els requeriments han canviat&lt;/li&gt;
&lt;li&gt;cal que interaccioni amb nous sistemes i sgbds, ...&lt;/li&gt;
&lt;li&gt;quan s'ha de modificar, cal que es realitzi un procés de
reenginyeria per a garantir la seva evolució futura.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Què passa? És què els anteriors desenvolupadors no ho sabien fer?&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;La crua realitat és que nosaltres estem desenvolupant el programari
heretat de demà.&lt;/li&gt;
&lt;li&gt;El programari evoluciona contínuament. El programari nou es
construeix a partir de l'antic, i tots han d'interactuar i cooperar
amb altres.&lt;/li&gt;
&lt;li&gt;El nostre repte, com a desenvolupadors, és trobar mecanismes per
desenvolupar programari de manera que interaccioni adequadament amb
el programari heretat i, a l'hora, sigui més mantenible que aquest.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="desenvolupament-del-programari"&gt;
&lt;h2&gt;Desenvolupament del programari&lt;/h2&gt;
&lt;p&gt;Ara que ja tenim una idea més &amp;quot;enriquida&amp;quot; del què és el programari,
anem a veure com el construïm.&lt;/p&gt;
&lt;div class="section" id="elements-del-desenvolupament"&gt;
&lt;h3&gt;Elements del desenvolupament&lt;/h3&gt;
&lt;p&gt;Per desenvolupar programari necessitem&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;un procés o model de desenvolupament&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;defineix el marc de treball&lt;/li&gt;
&lt;li&gt;persegueix el desenvolupament racional i a temps del programari&lt;/li&gt;
&lt;li&gt;ofereix control de la gestió dels projectes de programari&lt;/li&gt;
&lt;li&gt;estableix el context on s'apliquen els mètodes tècnics, es
generen els productes (models, documents, dades, informes,
formats)&lt;/li&gt;
&lt;li&gt;assegura la qualitat&lt;/li&gt;
&lt;li&gt;ofereix control de la gestió del canvi&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;un conjunt de mètodes&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;són els “com” tècnics de la construcció del programari.&lt;/li&gt;
&lt;li&gt;inclouen tasques com: comunicació, anàlisi de requeriments,
modelat del disseny construcció dels programes, realització de
proves, i  suport&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;un conjunt d'eines&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;proporcionen un suport pel procés i els mètodes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;quan les eines estan integrades entre si, es parla d'una eina CASE
(Computer Aided Software Engineering)&lt;/p&gt;
&lt;p&gt;(&lt;a class="reference external" href="http://ca.wikipedia.org/wiki/Eines_CASE"&gt;http://ca.wikipedia.org/wiki/Eines_CASE&lt;/a&gt;) Les eines CASE (Computer
Aided Software Engineering, Enginyeria del programari Assistida
per Ordinador) són diverses aplicacions informàtiques destinades a
augmentar la productivitat en el desenvolupament de programari
reduint el cost del desenvolupament en termes temps i diners.
Aquestes eines proporcionen ajudes en totes les fases del cicle de
vida de desenvolupament de programari com per exemple el procés de
realitzar un disseny del projecte, calcular costos, implementació
automàtica de codi a partir del disseny, compilació automàtica,
documentació o detecció d'errors entre d'altres.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="model-de-desenvolupament"&gt;
&lt;h3&gt;Model de desenvolupament&lt;/h3&gt;
&lt;p&gt;Els models de desenvolupament consideren les següents activitats
generals:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Activitats generals" src="http://apuntstecnics.herokuapp.com/images/prm001.img001.activitats_generals.png" /&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;comunicació&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;col·laboració i comunicació amb el client&lt;/li&gt;
&lt;li&gt;client (&lt;em&gt;stakeholder&lt;/em&gt; &lt;a class="footnote-reference" href="#stakeholder" id="id1"&gt;[1]&lt;/a&gt;) és qualsevol que tingui
interès en l'èxit del resultat del projecte&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;planificació&lt;/p&gt;
&lt;p&gt;Descriu el pla de treball:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;les tasques tècniques a realitzar&lt;/li&gt;
&lt;li&gt;els riscos probables&lt;/li&gt;
&lt;li&gt;els recursos requerits&lt;/li&gt;
&lt;li&gt;els productes a generar&lt;/li&gt;
&lt;li&gt;la programació de les tasques en el temps associades als recursos&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;modelat&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;elaboració dels models que permeten al desenvolupador i al client
entendre i posar-se d'acord amb els requeriments del programari a
desenvolupar.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;definició del disseny que satisfarà aquests requeriments&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;generalment es composa de dues accions diferenciades: anàlisi i
disseny.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;l'anàlisi&lt;/p&gt;
&lt;p&gt;Inclou investigació, elaboració, negociació, especificació i validació dels requeriments.&lt;/p&gt;
&lt;p&gt;Condueix a un model d'anàlisi o especificació de requeriments.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;el disseny&lt;/p&gt;
&lt;p&gt;Pot ser de dades, arquitectònic, d'interfície i a nivell de components&lt;/p&gt;
&lt;p&gt;Crea un model de disseny o especificació de disseny.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;construcció&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;generació del producte a partir del disseny (codificació)&lt;/li&gt;
&lt;li&gt;realització de les proves&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;desplegat&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;lliurament al client&lt;/li&gt;
&lt;li&gt;avaluació per part del client del resultat&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A banda de les activitats generals, s'inclou un conjunt d'activitats
de suport. Entre d'altres:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;seguiment i suport del projecte&lt;/p&gt;
&lt;p&gt;permet l'avaluació del progrés comparant-lo amb el pla del projecte&lt;/p&gt;
&lt;p&gt;permet prendre mesures per a corregir les possibles desviacions&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;gestió del risc&lt;/p&gt;
&lt;p&gt;avalua els riscos que puguin afectar al desenvolupament o a la qualitat&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;assegurament de la qualitat&lt;/p&gt;
&lt;p&gt;defineix i condueix les activitats requerides per a assegurar la
qualitat del programari&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;revisions tècniques&lt;/p&gt;
&lt;p&gt;avalua els productes que es van desenvolupant per a trobar i
eliminar errors abans que arribin a la següent acció o activitat&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;mesurament&lt;/p&gt;
&lt;p&gt;defineix i recull mesures del procés, el projecte i el producte&lt;/p&gt;
&lt;p&gt;ajuda a garantir la satisfacció dels requeriments&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;gestió de la reutilització&lt;/p&gt;
&lt;p&gt;defineix els criteris per a la reutilització dels productes
(incloent components de programari)&lt;/p&gt;
&lt;p&gt;estableix mecanismes per a la creació de components reusables&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;preparació i producció&lt;/p&gt;
&lt;p&gt;activitats requerides per a crear els productes com ara models, documents, registres, formats i llistes.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Existeixen diferents models de desenvolupament en ús actualment, des
de l'històric &lt;em&gt;model clàssic&lt;/em&gt; o &lt;em&gt;en cascada&lt;/em&gt;, a les diferents versions
de &lt;em&gt;desenvolupament àgil&lt;/em&gt; (ex. eXtreme Programming, Scrum). Tots ells
persegueixen un desenvolupament controlat que satisfaga el client.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-val-si-pero-que-es-el-programari"&gt;
&lt;h3&gt;Exercici 1. Val sí, però... què és el programari?&lt;/h3&gt;
&lt;p&gt;Descriu amb les teves paraules en un paràgraf què és el programari, de
manera que ho pugui entendre una persona que s'estigui plantejant fer
un cicle de desenvolupament de programari.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-el-nostre-producte-es-unic"&gt;
&lt;h3&gt;Exercici 2. El nostre producte és únic?&lt;/h3&gt;
&lt;p&gt;Troba un o més exemples de productes desenvolupats per les persones
que comparteixin el màxim de les tres característiques que esmenta
aquest article.&lt;/p&gt;
&lt;p&gt;Atreveix-te a fer una abstracció de quina mena de productes es
desenvolupen com el programari.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-tipologies-de-programari"&gt;
&lt;h3&gt;Exercici 3. Tipologies de programari&lt;/h3&gt;
&lt;p&gt;Per com a mínim cinc tipologies esmentades en aquest article, proposa
un o més programaris concrets que trobis que poden encabir-hi.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-genesi-del-programari-heretat"&gt;
&lt;h3&gt;Exercici 4. Gènesi del programari heretat&lt;/h3&gt;
&lt;p&gt;Argumenta amb quina activitat o activitat es creen o es produeixen les
característiques menys desitjables del programari heretat.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-els-teus-riscos"&gt;
&lt;h3&gt;Exercici 5. Els teus riscos&lt;/h3&gt;
&lt;p&gt;Descriu un mínim de dos riscos &lt;em&gt;creïbles&lt;/em&gt; que consideris que podrien
afectar-te en la superació satisfactoria d'aquest cicle. Considera
quina seria la severitat i proposa alguna estratègia per eliminar-los,
pal·liar-los o/i &lt;em&gt;sobreviure-hi&lt;/em&gt; en el cas que finalment esdevinguin
una realitat.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-gestio-del-canvi"&gt;
&lt;h3&gt;Exercici 6. Gestió del canvi&lt;/h3&gt;
&lt;p&gt;Els continguts d'aquest article indiquen que els models de
desenvolupament ofereixen &lt;em&gt;control gestió del canvi&lt;/em&gt;. Descriu com es
relaciona aquest concepte amb el de &lt;em&gt;legacy software&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="annotacions"&gt;
&lt;h2&gt;Annotacions&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="stakeholder" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;em&gt;stakeholder&lt;/em&gt; en anglès vol dir persona que subjecta
una estaca. A la nostra professió, aquesta estaca és gran i
afilada...  si no cuides bé als teus clients ja saps on anirà a
parar aquesta estaca... (acudit vist a &amp;quot;Ingeniería del Software, un
enfoque Práctico&amp;quot; 6a ed. del Roger Pressman)&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;!-- XXX TODO add exercises --&gt;
&lt;/div&gt;
</summary><category term="programari"></category></entry><entry><title>Llenguatges de programació</title><link href="http://apuntstecnics.herokuapp.com/llenguatges-de-programacio.html" rel="alternate"></link><updated>2015-02-11T10:32:42+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-11:llenguatges-de-programacio.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document descriu els llenguatges de programació i les
característiques més rellevants a partir de les que són classificats.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="context"&gt;
&lt;h2&gt;Context&lt;/h2&gt;
&lt;p&gt;Comencem repassant alguns conceptes bàsics.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Algorisme&lt;/em&gt;: seqüència de passes orientades a la realització d'una
tasca o la resolució d'un problema.&lt;/p&gt;
&lt;p&gt;Depenent del context, en la vida quotidiana els algorismes els
anomenem de diferents maneres: com receptes (passes per fregir un ou),
instruccions (per posar la rentadora), mètodes de càlcul (passes per
calcular l'arrel quadrada), etc.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Programa&lt;/em&gt;: seqüència d’instruccions orientada a ser executada per un
ordinador sobre un conjunt de dades per donar resposta a un problema
determinat, més la corresponent documentació.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Esquema d'un programa" src="http://apuntstecnics.herokuapp.com/images/prm002.img002.esquema_programa.png" /&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Aplicació&lt;/em&gt;: conjunt de programes relacionats més la corresponent
documentació. Un sinònim raonable és la paraula &lt;em&gt;programari&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Sistema informàtic&lt;/em&gt;: conjunt d'aplicacions, maquinari on
s'executa, operadors, usuaris, polítiques de backup/seguretat/...
que donen resposta a una necessitat complexa.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Instrucció&lt;/em&gt;: comanda que indica a l’ordinador que faci una acció.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Dada&lt;/em&gt;: unitat de tractament d'informació.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Informació&lt;/em&gt;: Dades dins d'un context.&lt;/p&gt;
&lt;p&gt;Les dades són valors &lt;em&gt;freds&lt;/em&gt;. Què deu ser &lt;tt class="docutils literal"&gt;42&lt;/tt&gt;? Les dades es
converteixen en informació quan les col·loquem en un context. Per
exemple, saber que &lt;tt class="docutils literal"&gt;42&lt;/tt&gt; és &lt;tt class="docutils literal"&gt;42 anys&lt;/tt&gt; o bé &lt;tt class="docutils literal"&gt;42 graus centígrads&lt;/tt&gt;
ens permet dir alguna cosa més de la dada. Podem intuir que correspon,
per exemple, a una edat o bé a una temperatura. D'això en podríem dir
el &lt;em&gt;tipus de dada&lt;/em&gt;.  &lt;a class="footnote-reference" href="#respostaunivers" id="id1"&gt;[1]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Les dades poden ser classificades a partir del seu &lt;em&gt;tipus de dades&lt;/em&gt;.
Dels exemples de dades anteriors, podríem dir que són, respectivament,
de tipus nombre enter, però també, de tipus edat o temperatura,
numèric o constant universal.&lt;/p&gt;
&lt;p&gt;Quan la informació s'amplia i la integrem amb altres coneixements,
apareix un significat. Per exemple, si ens diuen que l'aigua està a
&lt;em&gt;42 graus de temperatura&lt;/em&gt; i aquesta aigua és on pretenem banyar-nos,
ens suggerirà quelcom molt diferent a si l'aigua és amb la que ens
volem bullir uns espaguetis.&lt;/p&gt;
&lt;p&gt;Sigui com sigui, cal tenir clar que tant el significat com la
informació és quelcom que posem nosaltres. L'ordinador només entén de
dades. Encara més, ni tant sols entén de tipus de dades, ja que per
ell les dades tenen totes la forma de seqüències de 0 i 1. De fet,
també les instruccions són 0 i 1 per l'ordinador.&lt;/p&gt;
&lt;p&gt;Les dades són emmagatzemades en algun lloc de la memòria
&lt;a class="footnote-reference" href="#emmagatzemainstruccions" id="id2"&gt;[2]&lt;/a&gt;. Per fer-ne referència, és a dir, per usar
la dada, els programes ha de fer servir la posició de memòria on s'ha
deixat la dada. Ho podem imaginar com si haguéssim d'indicar on són
les coses per les seves coordenades geogràfiques. Com que és una mica
dur això d'haver de recordar en quina posició hem deixat cada cosa,
els llenguatges més modernets (la majoria) ofereixen la possibilitat
de donar un nom a aquestes posicions. D'aquest nom en diem sovint
&lt;em&gt;variables&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="definicions"&gt;
&lt;h2&gt;Definicions&lt;/h2&gt;
&lt;p&gt;Entrem ja en el tema principal d'aquest document:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Llenguatge de programació&lt;/em&gt;: conjunt de símbols combinats entre si
segons una sintaxis determinada que permet l’especificació dels
programes.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Esquema dels diferents llenguatges" src="http://apuntstecnics.herokuapp.com/images/prm002.img001.esquema_comunicacio.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Per ser considerat un llenguatge de programació, cal que permeti
computar. Per tant, llenguatges com HTML, CSS o fins i tot SQL
generalment no són considerats com a llenguatges de programació.
Sovint la característica que se li demana a un llenguatge per ser
considerat de programació és que sigui &lt;em&gt;Turin Complet&lt;/em&gt;
&lt;a class="footnote-reference" href="#turingcomplete" id="id3"&gt;[3]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Es comença amb la descripció dels requeriments. El client comunica al
desenvolupador el que vol amb un llenguatge natural que,
desitjablement, comparteixin tots dos.&lt;/p&gt;
&lt;p&gt;El pseudocodi és un llenguatge una mica més formal que el llenguatge
natural però molt més informal que un llenguatge de programació.  El
fem servir els desenvolupadors per aclarir idees abans de posar-les en
pràctica amb els detalls formals d'un llenguatge de programació
&lt;a class="footnote-reference" href="#enganypseudocodi" id="id4"&gt;[4]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Sovint es descriuen els algorismes en pseudocodi per després, si es
consideren viables, traduir-los al llenguatge escollit (com ara
Java, C, assamblador...) &lt;a class="footnote-reference" href="#programamaquina" id="id5"&gt;[5]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;La traducció al llenguatge de programació genera un o més fitxers,
generalment de text. Es diu que aquests fitxers contenen el &lt;em&gt;codi font&lt;/em&gt;
dels programes.&lt;/p&gt;
&lt;p&gt;El codi font no pot ser interpretat directament per l'ordinador que
només entén els 0 i 1 ja esmentats. Cal llavors passar per un o més
processos de traducció que, sortosament, els farà el propi ordinador.&lt;/p&gt;
&lt;p&gt;Els &lt;em&gt;traductors&lt;/em&gt; són programes s'encarreguen de traduir d'un
llenguatge de programació o un llenguatge intermedi a un altre
llenguatge intermedi o bé a codi màquina per a ser executat finalment
per l'ordinador.&lt;/p&gt;
&lt;p&gt;De &lt;em&gt;traductors&lt;/em&gt; en tenim de diferents tipus:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;em&gt;Compilador&lt;/em&gt;: traductor de programes expressats en un llenguatge
de programació a codi màquina o a un llenguatge intermedi.&lt;/p&gt;
&lt;p&gt;La traducció es realitza sencera abans d’executar cap
instrucció. Per tant, el programa ha de ser sintàcticament
correcte al 100% per començar a ser executat.&lt;/p&gt;
&lt;p&gt;Sovint cal una fase d’enllaçament (link) amb altres programes
(ex. biblioteques del sistema operatiu) perquè el codi pugui ser
executat.&lt;/p&gt;
&lt;p&gt;En acabar, es genera un fitxer amb el codi traduït, més els
enllaços corresponents,  que podrà ser executat &lt;em&gt;teòricament&lt;/em&gt;
per sempre més, sense que calgui tornar a compilar.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;em&gt;Intèrpret&lt;/em&gt;: tradueix les instruccions i, sinó hi ha error,
llença la seva execució d'una en una. Per tant, El programa pot
començar a executar-se malgrat hi hagi algun error en
instruccions posteriors.&lt;/p&gt;
&lt;p&gt;Si es vol tornar a executar el programa, caldrà tornar a
interpretar cadascuna de les instruccions que s'hagin
d'executar.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;em&gt;Màquina virtual&lt;/em&gt;: es podria considerar com un cas particular
d'intèrpret que tradueix d'un llenguatge intermedi al codi
màquina corresponent a la plataforma on s'executa la màquina
virtual.&lt;/p&gt;
&lt;p&gt;El codi màquina és altament depenent de la màquina que
l'executa. Per exemple, no podem executar el mateix codi màquina
en diferents màquines (ex. el PC i el mòbil) ni en diferents
sistemes operatius. L'avantatge de les màquines virtuals rau en
el fet que aquestes realitzen una abstracció de la plataforma on
s'executen, de manera que el programa, en codi intermedi, pugui
ser compilat a una màquina i executat en una altra.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="paradigmes"&gt;
&lt;h2&gt;Paradigmes&lt;/h2&gt;
&lt;p&gt;Els llenguatges de programació es poden classificar de moltes maneres
diferents sent una de les més descriptives el paradigma o paradigmes
que implementen.&lt;/p&gt;
&lt;p&gt;Podem entendre el concepte de &lt;em&gt;paradigma de programació&lt;/em&gt; com la manera
o estil de representar i estructurar els elements bàsics que formen
els programes.&lt;/p&gt;
&lt;p&gt;Hi distingim bàsicament dos famílies o branques de paradigmes de
programació:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;el paradigma imperatiu&lt;/li&gt;
&lt;li&gt;el paradigma declaratiu&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;El paradigma imperatiu és el que hem estudiat fins el moment. El
programa especifica a la màquina quines passes (instruccions /
&lt;em&gt;statements&lt;/em&gt;) ha de realitzar per a
aconseguir l'objectiu.&lt;/p&gt;
&lt;p&gt;Per la seva banda, el paradigma declaratiu &lt;em&gt;descriu&lt;/em&gt; la lògica del
programa sense detallar les passes que permeten aconseguir l'objectiu
final . És a dir, descriu el &lt;em&gt;què&lt;/em&gt; es vol aconseguir. Serà el
compilador o intèrpret l'encarregat de traduir aquesta descripció (el
&lt;em&gt;com&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;Entre els paradigmes de programació més populars es troben:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;el paradigma procedural&lt;/li&gt;
&lt;li&gt;el paradigma lògic&lt;/li&gt;
&lt;li&gt;el paradigma funcional&lt;/li&gt;
&lt;li&gt;el paradigma orientat a objectes&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;El paradigma procedural és l'estudiat fins ara al cicle. Es tracta
d'un paradigma imperatiu basat en els paradigmes de programació
estructurada i modular. Alguns exemples són C, Fortan, Pascal, ADA.&lt;/p&gt;
&lt;p&gt;El paradigma lògic és un paradigma declaratiu basat en lògica formal.
Els programes s'estructuren en axiomes (coses que sabem o
afirmacions), regles d'inferència (si A i B llavors C), i preguntes (o
teoremes) que corresponen al resultat a obtenir. Els exemples més
coneguts són Prolog i Datalog.&lt;/p&gt;
&lt;p&gt;El paradigma funcional és un paradigma declaratiu basat en l'avaluació
de funcions matemàtiques que evitant la modificació de l'estat de la
màquina (sense efectes secundaris / &lt;em&gt;side-effects&lt;/em&gt;). Els programes
s'especifiquen amb expressions. Les expressions retornen un valor
depenent únicament dels paràmetres que rebin (independent del nombre
de cops ni de l'estat de la màquina). Darrerament els llenguatges
funcionals estan retornant amb molta força amb la promesa que permeten
codificació de programes més robustos i mantenibles que els
imperatius. Entre els exemples més coneguts hi trobaríem Lisp,
Miranda, Haskell.&lt;/p&gt;
&lt;p&gt;El paradigma orientat a objectes és una extensió del paradigma
procedural en el que les dades i el procediments que les manipulen són
agrupades o &lt;em&gt;encapsulades&lt;/em&gt; en &lt;em&gt;objectes&lt;/em&gt;. És el paradigma
indiscutiblement més &lt;em&gt;de moda&lt;/em&gt; dels darrers anys, fins el punt que la
majoria dels llenguatges de programació més &lt;em&gt;tradicionals&lt;/em&gt; van
disposar d'alguna implementació que donés suport a aquest paradigma.
Exemples populars són C++ (del C) i Delphy (del Pascal). Hi ha
llenguatges orientats a objectes &lt;em&gt;purs&lt;/em&gt; (on tots els elements són
objectes) com ara Eiffel, Smalltalk, Rubi, Scala. Hi ha d'altres no
tan &lt;em&gt;purs&lt;/em&gt;, sigui perquè permeten programació no orientada a objecte
(com C++, Python) o simplement per incloure tipus primitius no
objectes (Java, C#, PHP, JavaScript).&lt;/p&gt;
&lt;p&gt;Darrerament s'estan popularitzant llenguatges multiparadigma. Per
exemple, Python, Ruby i Scala permeten programació orientada a
objectes i funcional.&lt;/p&gt;
&lt;p&gt;A &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Comparison_of_programming_paradigms"&gt;aquest article de la Vikipedia&lt;/a&gt;
disposen d'una taula resum prou descriptiva.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-quin-aspecte-fan"&gt;
&lt;h3&gt;Exercici 1. Quin aspecte fan&lt;/h3&gt;
&lt;p&gt;Pels paradigmes &lt;em&gt;procedural&lt;/em&gt;, &lt;em&gt;lògic&lt;/em&gt;, &lt;em&gt;funcional&lt;/em&gt; i &lt;em&gt;orientat a
objectes&lt;/em&gt; escull al menys un llenguatge que els implementi. Dóna
preferencia a llenguatges que no apareguin a la llista dels exemples
de classe o, com a mínim a llenguatges que no coneguis.&lt;/p&gt;
&lt;p&gt;Ara consulta el lloc web &lt;a class="reference external" href="http://rosettacode.org/"&gt;Rosetta Code&lt;/a&gt; i
troba alguna tasca que et cridi l'atenció. Per exemple, el problema de
les vuit reines o &lt;em&gt;eight queens problem&lt;/em&gt; es troba resolt, en una
versió genèrica, amb múltiples llenguatges a
&lt;a class="reference external" href="http://rosettacode.org/wiki/N-queens_problem"&gt;http://rosettacode.org/wiki/N-queens_problem&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;De la tasca escollida, troba codi que la resolgui en els quatre
llenguatges que has decidit abans amb el C (què és un procedural que
ja deus conèixer).&lt;/p&gt;
&lt;p&gt;Analitza els cinc codis i intenta esbrinar com cada versió arriba a
fer el càlcul a partir dels coneixements de programació de que ja
disposes.  Compara els diferents codis entre si i fes una valoració.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Ampliació&lt;/em&gt;: Si t'engresca aquest exercici, et proposo que miris
algun llenguatge ben diferent dels que hem comentat. Per exemple,
fes-li una ullada als &lt;em&gt;llenguatges de programació esotèrics&lt;/em&gt; com el
Brainfuck o Unlambda. És possible que no els trobis a &lt;em&gt;Rosetta Code&lt;/em&gt;
però de ben segur que et sorprendran. En cas que vulguis fer aquesta
ampliació, simplement agafa alguna versió del &amp;quot;Hola Món&amp;quot; que sovint
t'ofereixen i compara-la amb el llenguatge &lt;em&gt;no esotèric&lt;/em&gt; que vulguis.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-llenguatges-populars"&gt;
&lt;h3&gt;Exercici 2. Llenguatges populars&lt;/h3&gt;
&lt;p&gt;Consulta &lt;a class="reference external" href="http://www.tiobe.com/index.php/content/paperinfo/tpci/index.html"&gt;L'índex de llenguatges de Tiobe&lt;/a&gt;
i contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Descriu amb les teves paraules quines són les condicions que
requereixen a Tiobe per considerar un llenguatge com a llenguatge
de programació.&lt;/li&gt;
&lt;li&gt;Perquè no consideren &lt;em&gt;excel&lt;/em&gt; com un llenguatge de programació?&lt;/li&gt;
&lt;li&gt;Perquè no consideren &lt;em&gt;html&lt;/em&gt; com un llenguatge de programació?&lt;/li&gt;
&lt;li&gt;Llista els llenguatges que apareixen al &amp;quot;Hall of Fame&amp;quot; i que
actualment es troben entre els 10 més populars. Indica quin o quins
paradigmes suporten principalment.&lt;/li&gt;
&lt;li&gt;Tiobe afirma que &lt;em&gt;The index can be used to check whether your
programming skills are still up to date or to make a strategic
decision about what programming language should be adopted when
starting to build a new software system.&lt;/em&gt; Vista la informació i
tenint en comptes els objectius d'aquest cicle, creus que els
llenguatges de programació amb els que treballes/treballaràs durant
aquest cicle són prou actuals?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-la-pila-web"&gt;
&lt;h3&gt;Exercici 3. La pila Web&lt;/h3&gt;
&lt;p&gt;Considera la següent imatge que representa les diferents capes d'una
aplicació Web típica amb algunes de les tecnologies que veurem aquest
curs.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Capes d'una aplicació Web" src="http://apuntstecnics.herokuapp.com/images/prm002.img003.stack_curs.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Quines de les tecnologies que hi apareixen poden ser considerades
llenguatges de programació &lt;em&gt;com cal&lt;/em&gt; i quines no?&lt;/li&gt;
&lt;li&gt;Per les capes que tenen associades algun llenguatge de programació,
troba com a mínim un llenguatge de programació addicional que sigui
raonablement habitual en la capa.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-llenguatge-del-futur"&gt;
&lt;h3&gt;Exercici 4. Llenguatge del futur&lt;/h3&gt;
&lt;p&gt;Amb tot el que hem vist, fem ara d'endevins. Posa't el barret de
bruixeta/bruixot, agafa la bmirar mirar ola de cristall i atreveix-te a
pronosticar quin és el llenguatge de programació més interessant per a
aprendre avui de manera que maximitzi el teu èxit professional en els
propers cinc anys. Justifica la teva aposta.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="anotacions"&gt;
&lt;h2&gt;Anotacions&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="respostaunivers" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;És possible que &lt;tt class="docutils literal"&gt;42&lt;/tt&gt; sigui després de tot més
que una dada. Si tens temps i vols llegir quelcom no tan tècnic, mira
&lt;a class="reference external" href="http://ca.wikipedia.org/wiki/La_Resposta_a_la_Pregunta_Definitiva_sobre_la_Vida,_l%27Univers_i_Tot_Plegat"&gt;aquesta entrada&lt;/a&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="emmagatzemainstruccions" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;De fet, l'ordinador també emmagatzema
les instruccions a memòria de la mateixa manera (amb 0 i 1) Ja
veus, en memòria dades i instruccions són una mateixa cosa.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="turingcomplete" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En cas que t'interessin els detalls, pots
començar amb &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Turing_completeness"&gt;aquest article sobre completesa de Turing&lt;/a&gt; de la
wikipedia.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="enganypseudocodi" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;No us deixeu enganyar. Si una notació en
pseudocodi pot ser executada per un ordinador, no és pseudocodi sinó
codi sense el &lt;em&gt;pseudo&lt;/em&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="programamaquina" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[5]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Queden lluny els temps en que es programava
directament en llenguatge màquina. La salut mental mitja dels
desenvolupadors del món ha millorat (una mica) d'ençà.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="programari"></category></entry><entry><title>Entorn integrat de desenvolupament</title><link href="http://apuntstecnics.herokuapp.com/entorn-integrat-de-desenvolupament.html" rel="alternate"></link><updated>2015-02-11T10:31:42+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-11:entorn-integrat-de-desenvolupament.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest article introdueix l'estudiant a un tipus d'aplicació
dissenyades a servir de suport al desenvolupament d'aplicacions
informàtiques. Són conegudes com entorns de desenvolupament integrat o
IDE per les inicials en anglès (&lt;em&gt;Integrated Development Environment&lt;/em&gt;)
&lt;a class="footnote-reference" href="#interactiu" id="id1"&gt;[1]&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="justificacio"&gt;
&lt;h2&gt;Justificació&lt;/h2&gt;
&lt;p&gt;Per a poder desenvolupar un programa (fins i tot el més complex) en un
llenguatge de programació concret, als desenvolupadors ens calen
relativament molt poques eines. Considerem, sinó, el que implicaria la
creació de quelcom de complexitat similar en quasi bé qualsevol altra
disciplina (per exemple, en la construcció d'un vaixell o un edifici)&lt;/p&gt;
&lt;p&gt;D'entre les eines, i bàsicament per a poder realitzar proves, en
comptem el compilador (amb enllaçador si escau) o interpret
corresponent al llenguatge, la plataforma (una màquina virtual o
potser un simulador) on s'ha d'executar el programa, i poc més.&lt;/p&gt;
&lt;p&gt;Hi ha, però, una eina pràcticament inevitable i requerida per la
majoria &lt;a class="footnote-reference" href="#llenguatgesvisuals" id="id2"&gt;[2]&lt;/a&gt; dels desenvolupadors amb independència
de la tecnologia per la que estigui orientat el programa: &lt;em&gt;l'editor de
text&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Això és així perquè el codi font dels programes està format per text
pla a la majoria dels llenguatges de programació.&lt;/p&gt;
&lt;p&gt;Per exemple, amb el &lt;em&gt;bloc de notes&lt;/em&gt; de MS Windows &lt;a class="footnote-reference" href="#paciencia" id="id3"&gt;[3]&lt;/a&gt; podem
codificar qualsevol programa en Java que es pugui realitzar amb les
eines més sofisticades de desenvolupament disponibles.&lt;/p&gt;
&lt;p&gt;Per sort, els editors de text han evolucionat força i poca gent deu
quedar que desenvolupi grans aplicacions amb el bloc de notes.&lt;/p&gt;
&lt;p&gt;Alguns dels afegits als editors de text que ens faciliten la vida als
desenvolupadors són:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;numeració de línies i accés directe a partir d'un número de línia&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;ressaltat sintàctic o &lt;em&gt;syntax highlighting&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;ressaltat de parèntesis (claus, corxets, ...) concordants&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;autocompleció&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;de paraules que ja han aparegut al document, altres documents
oberts o diccionaris&lt;/li&gt;
&lt;li&gt;d'estructures pròpies del llenguatge (ex. tancament de claus, o
autoindentat)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;gestió de l'històric de canvis en el fitxer amb la possibilitat de
revertir a algun estat anterior&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;ressaltat de diferències entre dos fitxers&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;integració amb el compilador&lt;/p&gt;
&lt;p&gt;Alguns permeten col·locar el punter automàticament en la línia on el
compilador troba l'error.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;possibilitats d'ampliar l'editor&lt;/p&gt;
&lt;p&gt;Alguns ofereixen la possibilitat d'afegir (i, fins i tot,
desenvolupar) noves funcionalitats. Per exemple, per a integrar
l'editor amb algun sistema de control de versions.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En el mercat van apareixent editors amb funcionalitats cada cop més
sofisticades amb l'objectiu d'ajudar en el desenvolupament de
programes.&lt;/p&gt;
&lt;p&gt;Com es tracta d'una eina que el desenvolupador fa servir durant moltes
hores, no ha de resultar estrany que alguns desenvolupadors defensin
apassionadament el seu editor com el millor &lt;a class="footnote-reference" href="#viemacs" id="id4"&gt;[4]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Si amb el modest &lt;em&gt;notepad&lt;/em&gt; ja podíem teòricament desenvolupar
qualsevol aplicació i aquests editors més potents ens faciliten encara
més el desenvolupament, què més pot demanar un desenvolupador?&lt;/p&gt;
&lt;p&gt;Per a alguns desenvolupadors, les seves necessitats difícilment queden
cobertes per cap editor. Per ells, l'editor queda com un comandament a
distància de la tele que et permeti canviar de canals i controlar el
volum, però t'obligui a aixecar-te per canviar el contrast.  Per a
aquests desenvolupadors la resposta és &lt;em&gt;entorn de desenvolupament
integrat&lt;/em&gt; o IDE &lt;a class="footnote-reference" href="#comandament" id="id5"&gt;[5]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Les eines bàsiques que inclou un IDE són:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;un editor de text&lt;/li&gt;
&lt;li&gt;un compilador/interpret (o integració amb el compilador/interpret)&lt;/li&gt;
&lt;li&gt;un depurador&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A banda, els IDE més moderns inclouen moltes o totes les millores
esmentades anteriorment, i poden afegir-ne de manera integrada, entre
d'altres:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;eines d'automatització (ex. de generació del paquet a distribuir, o
sincronització amb el servidor de producció)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;gestió de projectes&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;gestió de múltiples desenvolupadors&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;suport per multiples tecnologies i llenguatges simultàniament&lt;/p&gt;
&lt;p&gt;Per exemple, en el desenvolupament d'aplicacions web és molt típic
trobar-se treballant a l'hora amb un llenguatge de servidor com ara
php, un de client (javascript), un o més de representació de la
informació (html, css), etc.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;gestió dels recursos associats (ex. icones dels botons)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;navegació en el codi incloent les biblioteques del llenguatge&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;validador sintàctic&lt;/p&gt;
&lt;p&gt;Incloent el ressaltat d'errors sintàctics en temps d'edició&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;ajuda en la documentació del codi&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;ajuda en l'autocompleció avançada&lt;/p&gt;
&lt;p&gt;No és tant que autocompleti amb les paraules que comencen per la
paraula que estem escrivint, com que ho faci únicament amb els
elements que tenen sentit en el lloc concret on s'està escrivint.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;dipòsits de codi i gestió de versions&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;suport d'automatització de proves&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;eines d'anàlisi del codi, d'optimització i de refacció
(&lt;em&gt;refactoring&lt;/em&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;suport en la construcció d'interfícies gràfiques&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;integració amb suport i consulta sobre l'ús del llenguatge&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;i un llarg etcètera que inclou detalls com l'ajut a la gestió de la
localització (idiomes), gestió de plantilles de codi, modelització
gràfica (UML)...&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="exemples-d-ides"&gt;
&lt;h3&gt;Exemples d'IDEs&lt;/h3&gt;
&lt;p&gt;Podem trobar molts exemples de IDEs a &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Comparison_of_integrated_development_environments"&gt;l'article comparatiu&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Centrant-nos, per exemple, en els IDEs amb suport al llenguatge Java,
trobem, entre d'altres:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://es.wikipedia.org/wiki/Eclipse_%28software%29"&gt;Eclipse&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://es.wikipedia.org/wiki/NetBeans"&gt;Netbeans&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://es.wikipedia.org/wiki/JDeveloper"&gt;JDeveloper&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-installacio-de-l-ide-eclipse"&gt;
&lt;h3&gt;Exercici 1. Instal·lació de l'IDE Eclipse&lt;/h3&gt;
&lt;p&gt;Instal·larem l'entorn de desenvolupament Eclipse.&lt;/p&gt;
&lt;p&gt;Podem seguir la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-de-eclipse.html"&gt;guia d'instal·lació d'eclipse&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Disposem d'una altre &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/us-basic-de-lentorn-de-desenvolupament-integrat-eclipse.html"&gt;guia&lt;/a&gt; que us oferirà una vista
pas a pas de l'ús bàsic de l'IDE Eclipse. Caldrà seguir aquesta guia
per poder realitzar alguns exercicis.&lt;/p&gt;
&lt;p&gt;Finalment farem una prova desenvolupant un petit programa per a
veure algunes de les característiques de l'entorn.&lt;/p&gt;
&lt;p&gt;Es demana:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;captura de pantalla on es pugui veure el codi i l'execució des
de l'Eclipse, del programa HolaMon fet en Java.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;els fitxers generats per Eclipse pel projecte HolaMon dins de
l'espai de treball (ex. ~/dev/eclipse/workspace/HolaMon) Per
exemple, es pot fer servir la comanda:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
~/dev/eclipse/workspace$ tar czvf HolaMon.tar.gz HolaMon/
&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;Important&lt;/strong&gt; Assegura't que la captura de pantalla permeti veure la
data d'execució i el teu nom dins de l'equip en que ho fas. És a dir,
&lt;strong&gt;no&lt;/strong&gt; capturis exclusivament la finestra que conté Eclipse.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-configuracio-d-eclipse-per-desenvolupar-en-c"&gt;
&lt;h3&gt;Exercici 2. Configuració d'Eclipse per desenvolupar en C&lt;/h3&gt;
&lt;p&gt;Un cop realitzada la instal·lació de Eclipse, el configurarem per a
poder treballar amb el llenguatge de programació C. El suport a aquest
llenguatge no ve instal·lat per defecte.  Podem fer servir la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/configuracio-declipse-per-cc.html"&gt;guia
d'instal·lació del plug-in per C&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Es demana:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;captura de pantalla on es pugui veure el codi i l'execució des
de l'Eclipse, del programa HolaCDT.&lt;/li&gt;
&lt;li&gt;els fitxers generats per Eclipse pel projecte HolaCDT dins de
l'espai de treball.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-voste-pot-anar-a-la-preso"&gt;
&lt;h3&gt;Exercici 3. Vostè pot anar a la presó&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa en C amb l'IDE Eclipse que demani a l'usuari
el nom i l'edat. Si és major d'edat, el programa respondrà:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Vostè ja pot anar a la presó!
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I, en tot cas, acabarà acomiadant-se de l'usuari dient:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Vagi amb compte «nom».
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;On «nom» es veurà substituït pel nom especificat per l'usuari.&lt;/p&gt;
&lt;p&gt;Com als exercicis anteriors, es demana:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;captura de pantalla on es pugui veure el codi i l'execució del
programa.&lt;/li&gt;
&lt;li&gt;els fitxers generats per Eclipse pel projecte.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-installacio-de-l-ide-netbeans"&gt;
&lt;h3&gt;Exercici 4. Instal·lació de l'IDE NetBeans&lt;/h3&gt;
&lt;p&gt;Instal·larem l'entorn de desenvolupament NetBeans.
Podem fer servir aquesta &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-de-netbeans.html"&gt;guia d'instal·lació de NetBeans&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Es demana:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;captura de pantalla on es pugui veure el codi i l'execució des
de NetBeans, del programa HolaMon fet en Java.&lt;/li&gt;
&lt;li&gt;els fitxers generats per NetBeans pel projecte HolaMon&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-opcional-configuracio-de-netbeans"&gt;
&lt;h3&gt;Exercici 5. (Opcional) Configuració de NetBeans&lt;/h3&gt;
&lt;p&gt;En aquest exercici se't demana que instal·lis el complement de
NetBeans que et permeti programar-hi en C. En aquesta ocasió et toca a
tu investigar com (no t'hauria de suposar una gran càrrega).&lt;/p&gt;
&lt;p&gt;Un cop realitzat, crea un projecte equivalent al de l'exercici &lt;em&gt;Vostè
pot anar a la presó&lt;/em&gt; i executa'l.&lt;/p&gt;
&lt;p&gt;Lliura la captura de pantalla que demostri que ho has fet.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-opcional-installacio-d-altres-ides"&gt;
&lt;h3&gt;Exercici 6. (Opcional) Instal·lació d'altres IDEs&lt;/h3&gt;
&lt;p&gt;Aquest exercici, tot i que és &lt;strong&gt;opcional&lt;/strong&gt;, es recomana per a
aquells estudiants que tinguin temps disponible.&lt;/p&gt;
&lt;p&gt;Es tracta d'instal·lar altres IDEs. En concret, es proposen:
dos propietaris (un d'ells d'ús gratuït i l'altre amb llicència
gratuïta per estudiants)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://www.oracle.com/technetwork/developer-tools/jdev/overview/index.html"&gt;IDE JDeveloper&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Es tracta d'un IDE propietari però d'ús gratuït.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://www.microsoft.com/visualstudio/eng/products/visual-studio-2010-express"&gt;IDE VisualStudio&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Atenció: aquest IDE, tot i que molt popular, presenta unes
restriccions importants respecte el sistema operatiu en el que
s'executa. A més en el moment d'escriure aquest continguts, no
inclou Java entre els llenguatges acceptats.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Es demana el lliurament de captures de pantalla que mostrin l'execució
d'un programa tipus Hola Món dins de l'entorn o entorns escollits.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="annotacions"&gt;
&lt;h2&gt;Annotacions&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="interactiu" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Trobaràs en alguns llocs que la &lt;em&gt;I&lt;/em&gt; de IDE
s'espandeix a &lt;em&gt;Interactiu&lt;/em&gt; en comptes d'&lt;em&gt;Integrat&lt;/em&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="llenguatgesvisuals" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;Hi ha la possibilitat de realitzar programes
de manera completament visual en algunes tecnologies (mireu per
exemple &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Visual_programming_language"&gt;VPL&lt;/a&gt;.&lt;/p&gt;
&lt;p class="last"&gt;Cercant la simplicitat d'aquest article, considerem que l'eina
necessaria per la codificació del programa estaria dins de la
mateixa categoria que el compilador, i ignorarem aquestes
tecnologies no tan extenses.&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="paciencia" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si decideixes programar amb el bloc de notes de MS
Windows (especialment en la seva versió clàssica) probablement et
caldrà a més, tenir molta paciència i un cert sentit masoquista. En
tot cas, contra gustos...&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="viemacs" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Pot resultar fascinant seguir les baralles entre els
editors &lt;em&gt;vi&lt;/em&gt; i &lt;em&gt;emacs&lt;/em&gt;. Mireu per exemple l'article &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Editor_war"&gt;Editor war&lt;/a&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="comandament" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[5]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;El concepte d'&lt;em&gt;aixecar-se&lt;/em&gt; en aquesta metèfora
representa anar a altres aplicacions diferents de l'editor, sovint
la consola. Per a molts desenvolupadors això no representa cap
dificultat. Ans al contrari, anar a una consola amb una bona
&lt;em&gt;shell&lt;/em&gt; ofereix una flexibilitat que difícilment podrà igualar el
millor entorn integrat.  Així, trobaràs que encara hi ha
desenvolupadors que treballen molt eficientment amb un editor com
ara Vim / Emacs i una o més consoles Bash entre els que es mouen
ràpidament amb alguna combinació de tecles (mai el ratolí!).&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="programari"></category></entry><entry><title>Validació d'aplicacions</title><link href="http://apuntstecnics.herokuapp.com/validacio-daplicacions.html" rel="alternate"></link><updated>2015-02-11T10:30:42+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-11:validacio-daplicacions.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Hi ha moltes coses que s'han de tenir en compte quan dissenyem
programari: usabilitat i reusabilitat, interfícies ben definides,...
i, no menys important, que el codi sigui fàcilment &lt;em&gt;validable&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;El nostre codi serà més testable com més ens faciliti la tasca de
provar el seu funcionament i detectar els errors que contingui, tan
ara com en un futur quan estigui funcionant en nous contexts.&lt;/p&gt;
&lt;p&gt;En aquesta entrada ens introduïrem en el món de la validació
d'aplicacions, tot revisant conceptes que probablement tenim, encara
que potser no hem formalitzat mai.&lt;/p&gt;
&lt;p&gt;A la següent entrada tractarem un tipus de prova concret, la prova
unitària, i farem servir el &lt;em&gt;junit&lt;/em&gt;, potser l'entorn més conegut i
usat per aquest tipus de prova.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="errors"&gt;
&lt;h2&gt;Errors&lt;/h2&gt;
&lt;p&gt;Els errors formen part de la realitat del desenvolupament informàtic
&lt;a class="footnote-reference" href="#totomerrors" id="id1"&gt;[1]&lt;/a&gt;. Tots en cometem i ho fem a totes les fases: en
agafar els requeriments, en analitzar-los i dissenyar les solucions,
en codificar... Fins i tot, a l'hora de provar el nostre
desenvolupament!&lt;/p&gt;
&lt;p&gt;Però, perquè hi ha errors?&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;perquè som mals programadors?&lt;/li&gt;
&lt;li&gt;perquè no som prou disciplinats?&lt;/li&gt;
&lt;li&gt;perquè ens demanen desenvolupar massa ràpid&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Bé! és simplement perquè som humans.&lt;/p&gt;
&lt;p&gt;En molts contexts de la nostra vida observarem que la gent intenta
amagar els seus errors i, sovint, no &amp;quot;destapa&amp;quot; els errors d'altres
per... bé, diguem per mantenir les bones relacions. A la nostra
professió hem de fer un esforç i canviar aquesta manera de funcionar.
El millor que ens pot passar és que trobem l'error abans que el nostre
client. Creu-me que aquest no tindrà problemes amb les convencions
socials. Per tant, si una prova ens troba un error abans del
lliurament ho hem de celebrar (probablement millor després
d'arreglar-lo).&lt;/p&gt;
&lt;p&gt;En resum: d'errors tots en fem, sempre en tindrem i millor trobar-los
aviat.&lt;/p&gt;
&lt;div class="section" id="exercici-1-els-meus-errors"&gt;
&lt;h3&gt;Exercici 1. Els meus errors&lt;/h3&gt;
&lt;p&gt;Si estàs seguint aquest tema, probablement ja portes un cert temps
desenvolupant i segur que en aquest temps has comés errors.
Probablement molts (no cal que t'avergonyeixis, ens passa a tots!)&lt;/p&gt;
&lt;p&gt;En aquest exercici, et demano que pensis en un error de programació
concret que t'hagi passat. Intenta trobar un que et costés prou de
trobar o/i de corregir. Descriu en detall:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;l'error: en què consistia&lt;/li&gt;
&lt;li&gt;la detecció: com te'n vas adonar&lt;/li&gt;
&lt;li&gt;el procés de trobar-lo. ex. com vas realitzar les proves&lt;/li&gt;
&lt;li&gt;la correcció: en què va consistir la correcció&lt;/li&gt;
&lt;li&gt;ah! intenta incloure com et vas sentir a cadascuna de les quatre
fases anteriors! (encara que tothom pot imaginar-se la darrera si va
costar-te molt, oi?)&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="les-proves"&gt;
&lt;h2&gt;Les proves&lt;/h2&gt;
&lt;p&gt;Les proves són accions destinades a trobar errors en la nostra
aplicació. Atenció, fixa't que no he dit, destinades a demostrar que
la nostra aplicació funciona. Si trobes un error amb una prova és que
hi era, si no el trobes no vol dir que no hi sigui, potser la prova no
ha estat prou efectiva.&lt;/p&gt;
&lt;p&gt;Una bona prova té alta probabilitat de trobar un error, presenta
baixa redundància amb altres proves i minimitza la interacció humana
(idealment és automatitzable).&lt;/p&gt;
&lt;p&gt;Quan s'està dissenyant o desenvolupant un component, s'ha de tenir al
cap la idea de facilitar la prova.  Per exemple, se sap que un codi
amb poques dependències facilita la prova. Per exemple, si el
funcionament d'una classe és independent (de la BD, la GUI, la xarxa,
altres classes) serà molt més fàcil dissenyar/realitzar proves per a
aquesta classe.&lt;/p&gt;
&lt;p&gt;TDD (&lt;a class="reference external" href="http://en.wikipedia.org/wiki/Test-driven_development"&gt;Test Driven Development&lt;/a&gt;), una
metodologia de desenvolupament basada en la prova, proposa que
comencem pensant com provarem el nostre sistema abans de codificar-lo.&lt;/p&gt;
&lt;p&gt;En el moment en que comencem a analitzar els casos d'ús del sistema a
desenvolupar, ja podem començar a definir com els provarem, el que
es coneix com a casos de test &lt;a class="footnote-reference" href="#casosdetest" id="id2"&gt;[2]&lt;/a&gt;.&lt;/p&gt;
&lt;div class="section" id="exercici-2-el-cicle-de-tdd"&gt;
&lt;h3&gt;Exercici 2. El cicle de TDD&lt;/h3&gt;
&lt;p&gt;Descriu amb les teves paraules les cinc passes que conformen el cicle
de &lt;em&gt;Test Driven Development&lt;/em&gt; segons aquest article de la &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Test-driven_development"&gt;Wikipedia
sobre el TDD&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Compara aquest cicle amb la teva manera de programar actual. Quina et
sembla més adequada segons criteris com velocitat de desenvolupament,
qualitat de codi generat, mantenibilitat, etc.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="classes-de-proves"&gt;
&lt;h2&gt;Classes de proves&lt;/h2&gt;
&lt;p&gt;Hi ha moltes i molt diferents maneres de provar els sistemes
informàtics. Tantes que es solen intentar classificar per poder-les
entendre millor.&lt;/p&gt;
&lt;div class="section" id="perspectives"&gt;
&lt;h3&gt;Perspectives&lt;/h3&gt;
&lt;p&gt;Una de les classificacions habituals, es basa en les diferents
perspectives de l'aplicació.&lt;/p&gt;
&lt;p&gt;La teva aplicació es pot veure (i s'ha de veure) des de tres
perspectives: usuaris, testejadors, desenvolupadors.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;Els usuaris&lt;/p&gt;
&lt;p&gt;Els usuaris veuen l'aplicació des de fora. És a dir, a partir de la
seva interfície d'usuari. També, si vols, a partir dels casos
d'ús. L'aplicació o bé fa el que esperen que faci, o bé no ho fa.&lt;/p&gt;
&lt;p&gt;No se'ls acudirà mirar, per exemple, el contingut de la BD. De fet,
potser no tenen ni idea de què és ni, en tot cas, gaire interès.&lt;/p&gt;
&lt;p&gt;La majoria de nosaltres som usuaris d'alguna cosa que no comprenem
per dins, com a mínim no profundament. Pensa en la rentadora, el
cotxe, o el jersei que ens va fer l'àvia. Què passa quan esperem que
faci el centrifugat, la nostra rentadora comença a treure escuma per
tot arreu?, o quan posem primera al cotxe fa un soroll i fa que ens
xoquem amb el vehicle del darrere?, o quan ens posem el jersei la
nostra ma surt per l'aixella d'una de les mànigues? La majoria
simplement direm que això no rutlla.&lt;/p&gt;
&lt;p&gt;Des de la perspectiva d'un usuari, l'aplicació és una &lt;strong&gt;caixa
negra&lt;/strong&gt;: el que hi ha dins del sistema està fora del seu abast.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Els testejadors&lt;/p&gt;
&lt;p&gt;Hi ha gent, amb probablement el coneixement tècnic per desenvolupar
aplicacions, que es dedica a provar aplicacions fetes per altres.
Normalment no són els usuaris finals de l'aplicació i,
desitjablement, tampoc són els que l'han desenvolupada.&lt;/p&gt;
&lt;p&gt;Comproven la funcionalitat (com amb la caixa negra) però, a l'hora,
comproven que per dins, les coses canvien com s'esperava.  Per
exemple, poden mirar la BD per veure si s'ha emmagatzemat
correctament l'alta d'una nau industrial.&lt;/p&gt;
&lt;p&gt;Són necessaris especialment per a aquelles aplicacions que no
permeten veure els resultats fàcilment. Per exemple, les aplicacions
web sovint maneguen dades entre taules de la bd sense donar una
sortida que permeti saber si aquestes dades es troben correctament
emmagatzemades. En aquests casos, cal accedir a la BD juntament amb
la interfície.&lt;/p&gt;
&lt;p&gt;Es diu que els testejadors veuen l'aplicació com una &lt;strong&gt;caixa grisa&lt;/strong&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Els desenvolupadors&lt;/p&gt;
&lt;p&gt;Els desenvolupadors veuen (i viuen en) els detalls d'implementació.
Es preocupen per coses com ara si les classes tenen un bon disseny,
si hi ha codi duplicat, si hi ha inconsistències en la representació
de les dades...&lt;/p&gt;
&lt;p&gt;Es diu que veuen l'aplicació com una &lt;strong&gt;caixa blanca&lt;/strong&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="nivell-de-les-proves"&gt;
&lt;h3&gt;Nivell de les proves&lt;/h3&gt;
&lt;p&gt;Les proves sovint s'agrupen tenint en compte el seu abast. Les
categories més habituals són proves de sistema, les d'integració i les
unitàries.&lt;/p&gt;
&lt;p&gt;Les proves de sistema posen tots els elements de l'aplicació en
conjunt, i sense tenir en compte els detalls de codificació, ens
enfoquem en les funcionalitats que demanà el client. Sovint són proves
de &lt;em&gt;caixa negra&lt;/em&gt; o &lt;em&gt;grisa&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Les proves d'integració comproven com les diferents parts del sistema
treballen quan les posem juntes. A diferència de les de sistema, no
cal que totes les parts estiguin disponibles. Habitualment són proves
de &lt;em&gt;caixa grisa&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Les proves unitàries s'enfoquen en una petita peça de codi aïllada de
la resta de l'aplicació. Miren de minimitzar dependències amb altres
parts i de provar tots els possibles camins (ex. totes les branques de
cada condicional). Aquest tipus de proves és generalment
automatitzable i, solen considerar-se de &lt;em&gt;caixa blanca&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-qui-fa-que"&gt;
&lt;h3&gt;Exercici 3. Qui fa què&lt;/h3&gt;
&lt;p&gt;Per cadascun dels tres nivells de prova indicats a &lt;a class="reference internal" href="#nivell-de-les-proves"&gt;Nivell de les
proves&lt;/a&gt; indica quin és el perfil dels testejadors més adequats per
realitzar-les. Justifica-ho.&lt;/p&gt;
&lt;p&gt;Proposa qui hauria de dissenyar aquestes proves i quan ho hauria de
fer (a quina fase del desenvolupament).&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="totomerrors" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;De fet, no només del desenvolupament informàtic.
Pensa en alguna cosa on no vegis possible que es trobi mai cap
error. Escriu-la en algun lloc, potser en el futur canviaràs
d'opinió.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="casosdetest" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Aquest tema s'escapa dels objectius d'aquest
document. En tot cas, pensa un cas de test com una descripció d'una
prova sobre un cas d'ús. En el cas de test sovint hi inclourem
dades realistes, de vegades amb algun error, i indicarem què
s'espera que generi el sistema a partir d'elles.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="java"></category><category term="test"></category></entry><entry><title>Proves unitàries amb JUnit</title><link href="http://apuntstecnics.herokuapp.com/proves-unitaries-amb-junit.html" rel="alternate"></link><updated>2015-02-11T10:29:42+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-11:proves-unitaries-amb-junit.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquesta secció t'introduirà un dels &lt;em&gt;frameworks&lt;/em&gt; més utilitzats per a
la prova unitària: XUnit.&lt;/p&gt;
&lt;p&gt;XUnit és el nom amb el que es coneix una família d'entorns de prova
unitària amplament coneguda entre els desenvolupadors de programari.
Aquest nom es deriva de JUnit, el primer d'aquests entorns en ser ben
conegut. En aquest cas, la &lt;em&gt;J&lt;/em&gt; vol dir &lt;em&gt;Java&lt;/em&gt;, i és l'entorn que farem
servir aquí &lt;a class="footnote-reference" href="#articlefowler" id="id1"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;El lloc oficial de JUnit és &lt;a class="reference external" href="http://www.junit.org"&gt;http://www.junit.org&lt;/a&gt; i podràs trobar respostes a diverses
qüestions bàsiques com ara, com instal·lo a
&lt;a class="reference external" href="http://junit.sourceforge.net/doc/faq/faq.htm"&gt;http://junit.sourceforge.net/doc/faq/faq.htm&lt;/a&gt;.&lt;/p&gt;
&lt;div class="section" id="installem-el-junit"&gt;
&lt;h3&gt;Instal·lem el JUnit&lt;/h3&gt;
&lt;p&gt;Per a instal·lar junit, cal seguir les passes a la pàgina
d'instal·lació que es troba a &lt;em&gt;junit.org&lt;/em&gt; i descarregar-se la versió
més recent dels fitxers &lt;tt class="docutils literal"&gt;junit.jar&lt;/tt&gt; &lt;a class="footnote-reference" href="#versiojunit" id="id2"&gt;[2]&lt;/a&gt; i (des de la
versió 4.11) també &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;hamcrest-core.jar&lt;/span&gt;&lt;/tt&gt; a un directori i afegeix els
.jar al CLASSPATH.&lt;/p&gt;
&lt;p&gt;Passem a fer la primera prova: que hem fet la instal·lació correcta.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java org.junit.runner.JUnitCore
JUnit version 4.11

Time: 0,002

OK &lt;span class="o"&gt;(&lt;/span&gt;0 tests&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si la teva darrera línia coincideix amb OK (0 tests) és que tot ha
anat bé. Altrament revisa amb atenció la instal·lació. Hi ha molts
números que el problema estigui al CLASSPATH.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="provem-una-classe-senzilla"&gt;
&lt;h3&gt;Provem una classe senzilla&lt;/h3&gt;
&lt;p&gt;Passem ara a provar una classe molt bàsica: la classe Punt. Ho farem
seguint el principi de TFD (&lt;em&gt;Test First Development&lt;/em&gt;), és a dir, primer
fem la prova i després codifiquem.&lt;/p&gt;
&lt;p&gt;En primer lloc, crearem la classe de test &lt;tt class="docutils literal"&gt;TestPunt&lt;/tt&gt;. Sí, creem el
text abans de crear la classe!&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.junit.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;TestPunt&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="nd"&gt;@Test&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;testPuntConstructor&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="c1"&gt;// comprova que el constructor Punt() pugui ser cridat&lt;/span&gt;
            &lt;span class="n"&gt;Punt&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Punt&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[])&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;junit&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;runner&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;JUnitCore&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;TestPunt&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Ara compilem&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;javac TestPunt.java
TestPunt.java:6: error: cannot find symbol
        Punt &lt;span class="nv"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; new Punt&lt;span class="o"&gt;()&lt;/span&gt;;
        ^
  symbol:   class Punt
  location: class TestPunt
TestPunt.java:6: error: cannot find symbol
        Punt &lt;span class="nv"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; new Punt&lt;span class="o"&gt;()&lt;/span&gt;;
                     ^
  symbol:   class Punt
  location: class TestPunt
2 errors
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Com era previsible, tenim un error de compilació: no troba la classe
Punt. Recorda que l'objectiu d'una prova és sempre trobar un error.
Hem fet fallar el nostre primer test. Felicitats!&lt;/p&gt;
&lt;p&gt;Afegim ara la classe Punt, amb el codi &lt;strong&gt;estrictament&lt;/strong&gt; necessari per
corregir el problema anterior i passar el nostre primer test.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Punt&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Compilem i executem&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;javac TestPunt.java &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; java TestPunt
JUnit version 4.11
.
Time: 0,006

OK &lt;span class="o"&gt;(&lt;/span&gt;1 &lt;span class="nb"&gt;test&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Molt bé! Sembla que hem passat el nostre primer test. No és gaire
impressionant, oi?&lt;/p&gt;
&lt;p&gt;Fem un nou test, ara una mica més sofisticat: mirarem que els atributs
d'un punt siguin inicialitzats correctament pel constructor per
defecte. Novament començarem per la prova.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.junit.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;static&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;junit&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Assert&lt;/span&gt;&lt;span class="o"&gt;.*;&lt;/span&gt;    &lt;span class="c1"&gt;// importa una classe static&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;TestPunt&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="nd"&gt;@Test&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;testPuntConstructor&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// comprova que el constructor Punt() pugui ser cridat&lt;/span&gt;
        &lt;span class="n"&gt;Punt&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Punt&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="nd"&gt;@Test&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;testPuntBuit&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// comprova que el constructor Punt() deixi a 0 els valors&lt;/span&gt;
        &lt;span class="n"&gt;Punt&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Punt&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;assertEquals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getX&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt; &lt;span class="c1"&gt;// Afirma que la coordenada x val 0&lt;/span&gt;
        &lt;span class="n"&gt;assertEquals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getY&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[])&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;junit&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;runner&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;JUnitCore&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;TestPunt&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Com que novament tenim errors de compilació (no troba els membres
&lt;tt class="docutils literal"&gt;getX()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;getY()&lt;/tt&gt;), completem la classe Punt afegint els
atributs i mètodes d'accés imprescindibles per a passar el nou test.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Punt&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// coordenades del punt&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getX&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getY&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Passem, ara sí, els dos tests.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;javac TestPunt.java &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; java TestPunt
JUnit version 4.11
..
Time: 0,006

OK &lt;span class="o"&gt;(&lt;/span&gt;2 tests&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;D'aquesta manera anem codificant els tests i després la part de la
classe que calgui per passar-los. Això, segons els de TFD ens
garanteix que tot el que anem desenvolupant sempre és estable i què
mai no desenvolupem de més.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-test-dels-setters"&gt;
&lt;h3&gt;Exercici 1. Test dels setters&lt;/h3&gt;
&lt;p&gt;Crea un nou test a &lt;tt class="docutils literal"&gt;TestPunt&lt;/tt&gt; que comprovi l'assignació correcta
dels mètodes &lt;tt class="docutils literal"&gt;setX(int)&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;setY(int)&lt;/tt&gt;. Un cop compilat, afegeix a
la classe Punt el codi necessari per passar el test.&lt;/p&gt;
&lt;p&gt;Pista:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setX&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;assertEquals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getX&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-un-test-amb-error"&gt;
&lt;h3&gt;Exercici 2. Un test amb error&lt;/h3&gt;
&lt;p&gt;Fins ara, tots els tests que hem fet, han donat error a l'hora de
compilar. No sembla que JUnit estigui oferint-nos gaire cosa que no
tingués ja el javac oi?&lt;/p&gt;
&lt;p&gt;Afegeix el següent codi a &lt;tt class="docutils literal"&gt;TestPunt.java&lt;/tt&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nd"&gt;@Test&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;testPuntDefinit&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// comprova que el constructor Punt(int,int) deixi els valors correctes&lt;/span&gt;
    &lt;span class="n"&gt;Punt&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Punt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;assertEquals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getX&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="n"&gt;assertEquals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getY&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Copia també el constructor corresponent a Punt &lt;a class="footnote-reference" href="#verbatim" id="id3"&gt;[3]&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Punt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;x&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;y&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En compilar, trobem&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;$&lt;/span&gt; &lt;span class="n"&gt;javac&lt;/span&gt; &lt;span class="n"&gt;TestPunt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;
&lt;span class="n"&gt;TestPunt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nl"&gt;error:&lt;/span&gt; &lt;span class="n"&gt;constructor&lt;/span&gt; &lt;span class="n"&gt;Punt&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Punt&lt;/span&gt; &lt;span class="n"&gt;cannot&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;applied&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;given&lt;/span&gt; &lt;span class="n"&gt;types&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;Punt&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Punt&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
                 &lt;span class="o"&gt;^&lt;/span&gt;
  &lt;span class="nl"&gt;required:&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;
  &lt;span class="nl"&gt;found:&lt;/span&gt; &lt;span class="n"&gt;no&lt;/span&gt; &lt;span class="n"&gt;arguments&lt;/span&gt;
  &lt;span class="nl"&gt;reason:&lt;/span&gt; &lt;span class="n"&gt;actual&lt;/span&gt; &lt;span class="n"&gt;and&lt;/span&gt; &lt;span class="n"&gt;formal&lt;/span&gt; &lt;span class="n"&gt;argument&lt;/span&gt; &lt;span class="n"&gt;lists&lt;/span&gt; &lt;span class="n"&gt;differ&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt;
&lt;span class="n"&gt;TestPunt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nl"&gt;error:&lt;/span&gt; &lt;span class="n"&gt;constructor&lt;/span&gt; &lt;span class="n"&gt;Punt&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Punt&lt;/span&gt; &lt;span class="n"&gt;cannot&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;applied&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;given&lt;/span&gt; &lt;span class="n"&gt;types&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;Punt&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Punt&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
                 &lt;span class="o"&gt;^&lt;/span&gt;
  &lt;span class="nl"&gt;required:&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;
  &lt;span class="nl"&gt;found:&lt;/span&gt; &lt;span class="n"&gt;no&lt;/span&gt; &lt;span class="n"&gt;arguments&lt;/span&gt;
  &lt;span class="nl"&gt;reason:&lt;/span&gt; &lt;span class="n"&gt;actual&lt;/span&gt; &lt;span class="n"&gt;and&lt;/span&gt; &lt;span class="n"&gt;formal&lt;/span&gt; &lt;span class="n"&gt;argument&lt;/span&gt; &lt;span class="n"&gt;lists&lt;/span&gt; &lt;span class="n"&gt;differ&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt;
&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="n"&gt;errors&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Ops! ens havíem descuidat del constructor per defecte. Sort que el
primer test de tots estava allà preparat per a ajudar-nos.&lt;/p&gt;
&lt;p&gt;Afegim el constructor per defecte, per exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Punt&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En compilar i executar ens trobem el següent (retallat):&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;JUnit version 4.11
..E..
Time: 0,009
There was 1 failure:
1&lt;span class="o"&gt;)&lt;/span&gt; testPuntDefinit&lt;span class="o"&gt;(&lt;/span&gt;TestPunt&lt;span class="o"&gt;)&lt;/span&gt;
java.lang.AssertionError: expected:&amp;lt;4&amp;gt; but was:&amp;lt;3&amp;gt;
    at org.junit.Assert.fail&lt;span class="o"&gt;(&lt;/span&gt;Assert.java:88&lt;span class="o"&gt;)&lt;/span&gt;
    at org.junit.Assert.failNotEquals&lt;span class="o"&gt;(&lt;/span&gt;Assert.java:743&lt;span class="o"&gt;)&lt;/span&gt;
    at org.junit.Assert.assertEquals&lt;span class="o"&gt;(&lt;/span&gt;Assert.java:118&lt;span class="o"&gt;)&lt;/span&gt;
    at org.junit.Assert.assertEquals&lt;span class="o"&gt;(&lt;/span&gt;Assert.java:555&lt;span class="o"&gt;)&lt;/span&gt;
    at org.junit.Assert.assertEquals&lt;span class="o"&gt;(&lt;/span&gt;Assert.java:542&lt;span class="o"&gt;)&lt;/span&gt;
    at TestPunt.testPuntDefinit&lt;span class="o"&gt;(&lt;/span&gt;TestPunt.java:34&lt;span class="o"&gt;)&lt;/span&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke0&lt;span class="o"&gt;(&lt;/span&gt;Native Method&lt;span class="o"&gt;)&lt;/span&gt;
    «...»
    at org.junit.runner.JUnitCore.main&lt;span class="o"&gt;(&lt;/span&gt;JUnitCore.java:40&lt;span class="o"&gt;)&lt;/span&gt;
    at TestPunt.main&lt;span class="o"&gt;(&lt;/span&gt;TestPunt.java:38&lt;span class="o"&gt;)&lt;/span&gt;

FAILURES!!!
Tests run: 4,  Failures: 1
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;La sortida el primer cop pot resultar una mica angoixant, oi?
Analitzem-la.&lt;/p&gt;
&lt;p&gt;En primer lloc, la darrera línia ens diu que de quatre tests, ha
fallat un. Per un de sol tant de soroll!&lt;/p&gt;
&lt;p&gt;Si mirem a partir de la línia 5 on posa &lt;tt class="docutils literal"&gt;1)
testPuntDefinit(TestPunt)&lt;/tt&gt; veurem que ens diu:
&lt;tt class="docutils literal"&gt;java.lang.AssertionError: &lt;span class="pre"&gt;expected:&amp;lt;4&amp;gt;&lt;/span&gt; but &lt;span class="pre"&gt;was:&amp;lt;3&amp;gt;&lt;/span&gt;&lt;/tt&gt;. Literalment,
s'esperava un 4 però ha trobat un 3. En essència, hi ha una afirmació
(&lt;em&gt;assert&lt;/em&gt;) que deia que havia de ser un 4 quan en realitat ens hem
trobat un 3.&lt;/p&gt;
&lt;p&gt;A continuació, la primera línia on apareix una classe desenvolupada
per nosaltres (en el cas de l'exemple a la línia 12 on diu &lt;tt class="docutils literal"&gt;at
TestPunt.testPuntDefinit(TestPunt.java:34)&lt;/tt&gt;) ens indica que la línia
del nostre codi on s'ha produït l'error.&lt;/p&gt;
&lt;p&gt;En el meu codi la línia 34 correspon a l'afirmació que la coordenada y
val 4:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;assertEquals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getY&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;  &lt;span class="c1"&gt;// aquí està l&amp;#39;error!&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Vist així, tenim una pista molt clara: o l'error es troba a
&lt;tt class="docutils literal"&gt;Punt.getY(int)&lt;/tt&gt; o bé al constructor &lt;tt class="docutils literal"&gt;Punt(int, int)&lt;/tt&gt;.  Si mirem
el codi del getter, trobem:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getY&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aquest codi no deixa marge pel dubte: ha d'estar bé! Per tant, haurem
de mirar al constructor:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Punt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;x&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;y&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si mirem amb atenció, veurem que el codi conté un error: assignem a
&lt;tt class="docutils literal"&gt;this.y&lt;/tt&gt; el valor de x en comptes del de y. Què hi farem? Passa a
les millors famílies.&lt;/p&gt;
&lt;p&gt;Corregeix l'error i comprova que passi el test.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-un-altre-test"&gt;
&lt;h3&gt;Exercici 3. Un altre test&lt;/h3&gt;
&lt;p&gt;Apa, fem un altre test per practicar. Afegeix un nou test anomenat
&lt;tt class="docutils literal"&gt;testSuma()&lt;/tt&gt; que comprovi que el mètode &lt;tt class="docutils literal"&gt;Punt.suma(Punt)&lt;/tt&gt; funciona
correctament. Aquest mètode tindrà el següent codi que, per suposat,
afegiràs després de crear el teu test.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;suma&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Punt&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;x&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;y&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-test-dels-accessors"&gt;
&lt;h3&gt;Exercici 4. Test dels accessors?&lt;/h3&gt;
&lt;p&gt;A partir de les &lt;a class="reference external" href="http://junit.sourceforge.net/doc/faq/faq.htm"&gt;respostes al FAQ&lt;/a&gt; 4.4 i 4.5, descriu quan té sentit fer un cas de test als mètodes get/set i quan no.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-un-sol-error-per-test"&gt;
&lt;h3&gt;Exercici 5. Un sol error per test&lt;/h3&gt;
&lt;p&gt;Descriu amb les teves paraules la resposta al FAQ 4.10&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-la-classe-segment"&gt;
&lt;h3&gt;Exercici 6. La classe Segment&lt;/h3&gt;
&lt;p&gt;Crea la classe Segment que contingui dos Punt, amb constructor per defecte i que defineixi els dos punts, mètodes get i set i el mètode longitud que torni la longitud del segment segons la fórmula:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;longitud&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sqrt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pow&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;x2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pow&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;y2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Crea també la classe TestSegment que provi la classe Segment.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-aprofitant-l-encapsulacio"&gt;
&lt;h3&gt;Exercici 7. Aprofitant l'encapsulació&lt;/h3&gt;
&lt;p&gt;Modifica la classe Punt de manera que ara la implementació de les
coordenades sigui&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;coord&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;on &lt;tt class="docutils literal"&gt;coord[0]&lt;/tt&gt; correspon a la coordenada x i &lt;tt class="docutils literal"&gt;coord[1]&lt;/tt&gt; correspon a la y.&lt;/p&gt;
&lt;p&gt;Aconsegueix que passi &lt;tt class="docutils literal"&gt;TestPunt&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;TestSegment&lt;/tt&gt; sense haver de
modificar cap test.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="provant-coses-mes-complexes"&gt;
&lt;h3&gt;Provant coses més complexes&lt;/h3&gt;
&lt;p&gt;Amb el que hem vist fins ara, podem provar classes més aviat
senzilletes. Què passa però quan la cosa es complica? Per exemple, com
ens ho fem per comprovar &lt;em&gt;exceptions&lt;/em&gt;? o bé classes abstractes? o fins
i tot multifil?&lt;/p&gt;
&lt;p&gt;La resposta que et donaré ara és... cercant-ho és clar. La lectura
completa de les FAQ ja són un bon punt de partida.&lt;/p&gt;
&lt;p&gt;En tot cas, intentarem fer una primera aproximació al &amp;quot;búscate la
vida&amp;quot; que t'estic venent, amb el següent exercici. D'aquesta manera,
espero, tindràs tota la confiança per trobar els &lt;em&gt;coms&lt;/em&gt; de les teves
necessitats amb els teus mitjans.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-8-punt-amb-excepcions"&gt;
&lt;h3&gt;Exercici 8. Punt amb excepcions&lt;/h3&gt;
&lt;p&gt;Farem que la nostra classe Punt només admeti coordenades positives i
que si es troba amb valors negatius, llenci l'excepció
&lt;tt class="docutils literal"&gt;IllegalArgumentException&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Amplia les proves unitàries que hem definit abans per aquesta classe,
de manera que contemplin aquests nous requisits.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pista&lt;/strong&gt;: (només en cas de desesperació) mira les FAQ al punt 4.6.
Ah! Assegura't que cobreixes tots els punts possibles, doncs n'hi ha
més d'un i més de dos!.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-9-la-botiga-de-vins"&gt;
&lt;h3&gt;Exercici 9. La botiga de vins&lt;/h3&gt;
&lt;p&gt;Considera l'exercici 1 de la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/mapes-i.html"&gt;botiga de vins&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Implementa les proves unitàries que consideris necessàries per poder
provar exhaustivament la classe Botiga.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Nota&lt;/strong&gt;: tingués en compte la descripció dels diferents membres
públics d'aquesta classe, incloent elements com excepcions.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="ampliacions"&gt;
&lt;h2&gt;Ampliacions&lt;/h2&gt;
&lt;p&gt;El món de les proves unitàries és ample. Potser voldràs llegir &lt;a class="reference external" href="http://www.agitar.com/downloads/TheWayOfTestivus.pdf"&gt;The
Way of Testivus&lt;/a&gt; per a
aconseguir una visió més filosòfica i potser entretinguda del món on
t'estàs ficant amb el tema del testeig.&lt;/p&gt;
&lt;p&gt;També pot ser-te interessant llegir-te el post del James Carr sobre
els &lt;a class="reference external" href="http://blog.james-carr.org/2006/11/03/tdd-anti-patterns/"&gt;antipatrons del TDD&lt;/a&gt;. Allà hi
trobaràs errors típics dels dissenyadors de proves, com ara:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Definir un munt de proves que el sistema és capaç de passar sense
donar error, però que si les mires amb detall, no testejen gaire
cosa.&lt;/li&gt;
&lt;li&gt;Proves que realment només proven que les dades introduïdes per la
prova són correctes.&lt;/li&gt;
&lt;li&gt;Proves que tinguin en comptes com està el sistema després d'una
altra prova. Les proves dependents entre si poden provocar problemes
si no estan ben documentades. Es preferible escriure proves
autocontingudes, que es realitzin amb el sistema &amp;quot;net&amp;quot;&lt;/li&gt;
&lt;li&gt;Proves que requereixen un munt de preparació per començar a provar,
fins al punt que es fa difícil saber què és el que es vol provar.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;Happy bug hunting!&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="articlefowler" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Pots trobar més informació a partir
d'&lt;a class="reference external" href="http://www.martinfowler.com/bliki/Xunit.html"&gt;aquest article&lt;/a&gt;
del Martin Fowler. També, com no, a la &lt;a class="reference external" href="http://en.wikipedia.org/wiki/XUnit"&gt;Vikipedia&lt;/a&gt; on podràs accedir a una
ampla &lt;a class="reference external" href="http://en.wikipedia.org/wiki/List_of_unit_testing_frameworks"&gt;llista d'entorns&lt;/a&gt; de
prova classificats pel llenguatge de programació.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="versiojunit" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Durant la darrera actualització d'aquest document,
la versió més actual disponible era la 4.11. Potser en el moment
que intentis descarregar-la sigui una altra. Amb sort, els
desenvolupadors del JUnit hauran mantingut la seva filosofia de
compatibilitat enrere.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="verbatim" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;No facis de &lt;em&gt;debugger&lt;/em&gt; i copia-ho &lt;em&gt;verbatim&lt;/em&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="java"></category><category term="test"></category></entry><entry><title>Introducció al Refactoring</title><link href="http://apuntstecnics.herokuapp.com/introduccio-al-refactoring.html" rel="alternate"></link><updated>2015-02-11T10:28:42+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-11:introduccio-al-refactoring.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta sèrie d'entrades tindrem una primera aproximació al
concepte de &lt;em&gt;refacció&lt;/em&gt;, més conegut directament amb el nom en anglès:
&lt;em&gt;refàctoring&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;El tema es presentarà tot seguint un exemple.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="requeriments"&gt;
&lt;h2&gt;Requeriments&lt;/h2&gt;
&lt;p&gt;Per seguir aquests continguts amb el màxim d'aprofitament et caldran
coneixements de programació orientada a objectes en Java i UML, així
com utilització del gestor de versions Git i del entorn de prova
unitària JUnit.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="recomanacions"&gt;
&lt;h2&gt;Recomanacions&lt;/h2&gt;
&lt;p&gt;Per a poder extreure el màxim d'aquests continguts, considera les
següents recomanacions:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Si estàs fent servir un IDE que ofereixi suport per la refacció, et
proposo que pels següents exercicis &lt;strong&gt;no facis&lt;/strong&gt; servir aquesta
funcionalitat. D'aquesta manera aconseguiràs un coneixement molt més
profund del tema que el que obtindries amb simplement veure els
resultats.&lt;/li&gt;
&lt;li&gt;Realitza els exercicis de manera seqüencial. Evidentment, si
descobreixes alguna cosa posteriorment hi pots tornar a un exercici
anterior. Evita, però, començar a realitzar un exercici després
d'haver llegit continguts posteriors.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per començar, passa a la següent &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/refactoring-que-es.html"&gt;entrada&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="referencies"&gt;
&lt;h2&gt;Referències&lt;/h2&gt;
&lt;p&gt;Aquests continguts estan basats en moltes fonts. Faré referència
especial a:&lt;/p&gt;
&lt;table class="docutils citation" frame="void" id="fowler" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;[FOWLER]&lt;/td&gt;&lt;td&gt;Fowler, Martin (1999) &lt;em&gt;Refactoring: Improving the Design of Existing
Code&lt;/em&gt;.  Addison-Wesley Professional.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils citation" frame="void" id="martin" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;[MARTIN]&lt;/td&gt;&lt;td&gt;Martin, Robert C. (2009) &lt;em&gt;Clean Code: A Handbook of Agile Software
Craftmanship&lt;/em&gt;. Prentice Hall.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="programari"></category><category term="java"></category></entry><entry><title>Refactoring: què és</title><link href="http://apuntstecnics.herokuapp.com/refactoring-que-es.html" rel="alternate"></link><updated>2015-02-11T10:27:42+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-11:refactoring-que-es.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada estudiarem què és el &lt;em&gt;refactoring&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="refactoring"&gt;
&lt;h2&gt;Refactoring&lt;/h2&gt;
&lt;p&gt;Llegim a la pàgina principal de &lt;a class="reference external" href="http://www.refactoring.com/"&gt;www.refactoring.com&lt;/a&gt; mantinguda per Martin Fowler, un dels
autors de referència sobre el concepte de &lt;em&gt;refacció&lt;/em&gt; o &lt;em&gt;refactoring&lt;/em&gt;:&lt;/p&gt;
&lt;blockquote&gt;
Refactoring is a disciplined technique for restructuring an
existing body of code, altering its internal structure without
changing its external behavior.&lt;/blockquote&gt;
&lt;p&gt;Així, la refacció és un procés que persegueix millorar un codi sense
afectar la seva funcionalitat.&lt;/p&gt;
&lt;p&gt;No és fàcil d'explicar, en termes generals, en que consisteix aquesta
millora. Aquí considerarem que un codi és millor que un altre quan
una o més de les següents afirmacions s'acompleixi:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;és més fàcil d'entendre&lt;/li&gt;
&lt;li&gt;és més fàcil de reutilitzar&lt;/li&gt;
&lt;li&gt;és més fàcil de modificar&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;La refacció &lt;strong&gt;no&lt;/strong&gt; afegeix més funcionalitat al codi. És un procés
que fem per a nosaltres mateixos, els desenvolupadors, i no pels usuaris
finals (tot i que aquests també es veuran beneficiats)&lt;/p&gt;
&lt;p&gt;La refacció &lt;strong&gt;no&lt;/strong&gt; necessàriament fa el codi executar-se més
eficientment. De fet, de vegades pot ser el contrari. Amb tot, la
possible pèrdua d'eficiència d'execució es veu gairebé sempre
compensada per l'enorme increment en l'eficiència d'introducció de
nous canvis, correcció d'errors, etc. Ah! En el no tan freqüent cas
que l'eficiència en execució sigui un punt crític, la refacció ajuda a
que l'optimització s'apliqui sobre un codi més senzill i,
probablement, serà encara més efectiva.&lt;/p&gt;
&lt;p&gt;Clàssicament als desenvolupadors ens diuen que primer hem de fer un
disseny perfecte, per després implementar-lo. Amb les tècniques de
desenvolupament àgil de moda actualment, aquest període de
disseny s'ha vist reduït. En comptes, el programari es va generant en
cicles de curta durada. A cada cicle, normalment es corregeixen errors
al codi anterior, se li afegeixen noves funcionalitats i... es
realitza un procés de refacció per permetre continuar fent més cicles
&lt;em&gt;curts&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Però com? T'estic venent que desenvolupadors amb seny modificaran un
codi que aparentment ja funciona només per fer-ho més &amp;quot;maco&amp;quot;? I si la
modificació trenca l'aplicació en algun punt imprevist? Com era
aquella màxima... «si funciona, no el toquis»? Hi ha truc. Encara que,
en la teoria, no és absolutament imprescindible, la refacció es
recolza fortament en la &lt;em&gt;prova unitària&lt;/em&gt;. El procés es realitza amb
petits canvis seguits del llançament de la bateria de proves. Si hi ha
algun problema, es detecta, es corregeix i es continua amb un sistema
lliure d'errors (fins on les proves sàpiguen dir).&lt;/p&gt;
&lt;p&gt;Passem a veure l'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/refactoring-lexemple.html"&gt;exemple&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</summary><category term="programari"></category><category term="java"></category></entry><entry><title>Refactoring: L'exemple</title><link href="http://apuntstecnics.herokuapp.com/refactoring-lexemple.html" rel="alternate"></link><updated>2015-02-11T10:26:42+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-11:refactoring-lexemple.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada es presenta i desenvolupa una primera implementació
de l'exemple que treballarem al llarg d'aquesta introducció al
&lt;em&gt;refactoring&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="l-exemple"&gt;
&lt;h2&gt;L'exemple&lt;/h2&gt;
&lt;p&gt;Aquest document només pretén servir d'introducció d'aquest tema. Ho
farà a partir d'una versió simplificada de l'exemple introductori de
&lt;a class="citation-reference" href="#fowler" id="id1"&gt;[FOWLER]&lt;/a&gt;. Es recomana anar seguint l'exemple i realitzant els
exercicis.&lt;/p&gt;
&lt;div class="section" id="punt-de-partida"&gt;
&lt;h3&gt;Punt de partida&lt;/h3&gt;
&lt;p&gt;L'exemple que treballarem és un sistema de gestió de lloguers de
vehicles. En concret, estudiarem el programa que genera els informes a
lliurar als clients. El programa, a partir dels lloguers realitzats
per un client, calcula l'import total dels lloguers i les
bonificacions aconseguides. Els vehicles llogats poden ser de tres
categories diferents: bàsic, general i de luxe.&lt;/p&gt;
&lt;p&gt;Considera el següent diagrama UML de classes que descriu els elements
principals d'aquest exemple.&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="Diagrama inicial de classes" src="http://apuntstecnics.herokuapp.com/images/refactoring.img001.diagrama_classes.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-codificant-el-gestor-de-lloguers"&gt;
&lt;h3&gt;Exercici 1. Codificant el Gestor de Lloguers&lt;/h3&gt;
&lt;!-- XXX TODO: cal descriure els tipus de les propietats --&gt;
&lt;!-- XXX TODO: cal idear mecanisme per obtenir el nombre de lloguers i
recorrer els lloguers des de fora d'un client --&gt;
&lt;p&gt;A partir del diagrama anterior, fes una proposta de codificació de les
classes que hi apareixen.&lt;/p&gt;
&lt;p&gt;Assegura't que les propietats que apareixen al diagrama de classes
disposen d'accessors adequats. Considera el codi següent per la classe
Client com a referència.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Vector&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Client&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nif&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Client&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nif&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nif&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nif&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;telefon&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;lloguers&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;getNif&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;     &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;nif&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;     &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;     &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;     &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;getTelefon&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setNif&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nif&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nif&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nif&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setNom&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setTelefon&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;telefon&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;afegeix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(!&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;contains&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;elimina&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;contains&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;remove&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;conte&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;contains&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// de moment en blanc&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-2-el-gestor-de-lloguers-lite"&gt;
&lt;h3&gt;Exercici 2. El Gestor de Lloguers &lt;em&gt;lite&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;Codifica la classe &lt;tt class="docutils literal"&gt;GestorLloguersLite&lt;/tt&gt; que crei un client amb el
teu nom, que disposi de un mínim de tres lloguers, un per cada tipus
de vehicle.&lt;/p&gt;
&lt;p&gt;Considera el següent &lt;em&gt;snippet&lt;/em&gt; com a pista per crear els vehicles i
lloguers:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c1"&gt;// demostració de construcció d&amp;#39;un vehicle de categoria BASIC&lt;/span&gt;
&lt;span class="n"&gt;Vehicle&lt;/span&gt; &lt;span class="n"&gt;vehicleBasic&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vehicle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Tata&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Vista&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Vehicle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;BASIC&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

&lt;span class="c1"&gt;// demostració de construccuó d&amp;#39;un lloguer amb una data&lt;/span&gt;
&lt;span class="n"&gt;SimpleDateFormat&lt;/span&gt; &lt;span class="n"&gt;dateFormat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SimpleDateFormat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;d/M/yyyy&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;Date&lt;/span&gt; &lt;span class="n"&gt;date&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dateFormat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parse&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;2/8/2013&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguerBasic&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Lloguer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;vehicleBasic&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

&lt;span class="c1"&gt;// demostració de formatat d&amp;#39;una data&lt;/span&gt;
&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dateFormat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguerBasic&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getData&lt;/span&gt;&lt;span class="o"&gt;()));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finalment, implementa un mètode estàtic de &lt;tt class="docutils literal"&gt;GestorLloguersLite&lt;/tt&gt; que
donat un Client, retorni un String que contingui la següent
informació:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Client: «nom del client»
        «nif»
        «telèfon»
Lloguers: «num de lloguers del client»
        1. vehicle: «marca del vehícle del primer lloguer» «model»
           data d&amp;#39;inici: «data d&amp;#39;inici del lloguer»
           dies llogats: «nombre de dies llogats»
        2. «... dades de la resta de lloguers del client»
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="informe-de-client"&gt;
&lt;h3&gt;Informe de client&lt;/h3&gt;
&lt;p&gt;Hem vist que &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; apareix en blanc al codi que ofereix
el primer exercici.&lt;/p&gt;
&lt;p&gt;El següent diagrama de seqüència ofereix una visió del seu
funcionament:&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="Diagrama inicial de classes" src="http://apuntstecnics.herokuapp.com/images/refactoring.img002.diagrama_sequencia.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Suposa que el codi que et trobes d'aquest mètode és el següent:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Informe de lloguers del client &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="n"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getNif&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="nl"&gt;lloguer:&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;switch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getCategoria&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;Vehicle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;BASIC&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                    &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mf"&gt;1.5&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
                &lt;span class="o"&gt;}&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;Vehicle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;GENERAL&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                    &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mf"&gt;2.5&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
                &lt;span class="o"&gt;}&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;Vehicle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LUXE&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="c1"&gt;// afegeix lloguers freqüents&lt;/span&gt;
        &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;++;&lt;/span&gt;

        &lt;span class="c1"&gt;// afegeix bonificació per dos dies de lloguer de Luxe&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getCategoria&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;Vehicle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LUXE&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;
                &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;++;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="c1"&gt;// composa els resultats d&amp;#39;aquest lloguer&lt;/span&gt;
        &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getMarca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// afegeix informació final&lt;/span&gt;
    &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Import a pagar: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Punts guanyats: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;D'aquest codi en podríem dir vàries coses. Probablement no totes
&lt;em&gt;maques&lt;/em&gt;. El mètode &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; és molt llarg i fa un munt de
coses que probablement hauria de fer alguna altra classe. Seria una
mena de traducció directa d'un algorisme no orientat a objectes a
java.  Podríem dir que és un codi &lt;em&gt;lleig&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Amb tot, el codi fa el que s'espera i al compilador no l'importa
l'estètica. El problema vindrà quan ens calgui modificar-lo. Imagina
que ens demanen que afegim un nou mètode que generi l'informe en
format html. No podríem aprofitar pràcticament res del mètode
&lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; ! D'acord que podem fer un &lt;em&gt;copy&amp;amp;paste&lt;/em&gt; i
modificar la part de construcció del String de tornada. Què passaria
llavors si ens demanen que canviem la lògica del càlcul de l'informe?
(ex. canvien política de preu pels vehicles de luxe).&lt;/p&gt;
&lt;p&gt;Potser em diràs que &lt;em&gt;el codi no és tan complex després de tot&lt;/em&gt; i que
no és tan greu haver-lo de reescriure. Si penses així, recorda que
aquest és només un exemple senzill, una &lt;em&gt;joguina&lt;/em&gt; per introduir el
concepte. A la vida real aquest tipus de codi el trobaràs &lt;strong&gt;molt&lt;/strong&gt; més
llarg, enrevessat i barrejat amb altre codi del mateix nivell.&lt;/p&gt;
&lt;p&gt;Com a regla d'or: si el codi que has de modificar presenta una
resistència important als canvis que persegueixes incorporar-li,
primer refacció i després introducció de la modificació.&lt;/p&gt;
&lt;p&gt;A continuació, seguint diferents passes de refacció, convertirem
aquest disseny en quelcom més &lt;em&gt;maco&lt;/em&gt;. Com que la millora de qualsevol
codi pot ser un procés infinit, ens concentrarem amb l'objectiu
d'aconseguir facilitar la implementació del mètode
&lt;tt class="docutils literal"&gt;Client.informeHTML()&lt;/tt&gt;.&lt;/p&gt;
&lt;!-- XXX TODO: cal reforçar aquest tema com a objectiu, doncs no tornes
a parlar d'aquest concepte fins vàries lliçons després! La primera
vegada que el vas impartir, se't va passar desapercebut i, per
tant, va ser una sorpresa trobar-te una referència a informeHTML --&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-preparant-el-terreny-control-de-versions"&gt;
&lt;h3&gt;Exercici 3. Preparant el terreny: control de versions&lt;/h3&gt;
&lt;p&gt;Per començar, i si encara no ho has fet, crea un repositori Git
on guardaràs les diferents versions d'aquest codi.&lt;/p&gt;
&lt;p&gt;Assegura't que fas servir comentaris informatius per cada &lt;em&gt;commit&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-preparant-el-terreny-proves-unitaries"&gt;
&lt;h3&gt;Exercici 4. Preparant el terreny: proves unitàries&lt;/h3&gt;
&lt;p&gt;Com que anirem modificant el codi de manera significativa, voldrem
disposar d'algun mecanisme que ens garanteixi que no hem trencat res.&lt;/p&gt;
&lt;p&gt;Genera una prova unitària per al mètode &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Inclou les proves al control de versions.&lt;/p&gt;
&lt;p&gt;Pista: obté un informe a partir de dels resultats generats per
la versió actual de &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; amb el client que crees amb
&lt;tt class="docutils literal"&gt;GestorLloguersLite&lt;/tt&gt;. La prova unitària es limitarà a comparar el
resultat de &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; amb l'informe que has obtingut.
Evidentment, si no modifiquem &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; hauria de passar la
prova &lt;a class="footnote-reference" href="#testdespresdecodi" id="id2"&gt;[1]&lt;/a&gt;. La gràcia apareixerà quan modifiquem el
mètode.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-preparant-el-terreny-ara-seriosament-proves-unitaries"&gt;
&lt;h3&gt;Exercici 5. Preparant el terreny: ara seriosament, proves unitàries&lt;/h3&gt;
&lt;p&gt;En cas que estiguis començant amb les proves unitàries, és molt
probable que a l'exercici anterior t'hagis quedat amb una prova
senzilla amb un sol cas. Potser fins i tot n'has fet més d'un de cas.
Molt més sorprenent serà que hagis fet casos de prova amb una
cobertura del 100% del codi a provar (és a dir, proves que &lt;em&gt;provin&lt;/em&gt;
&lt;strong&gt;totes&lt;/strong&gt; les línies del mètode)&lt;/p&gt;
&lt;p&gt;Com que estem d'entrenament, dedica una mica més d'esforç i crea un
joc de prova amb cobertura 100% de les línies del mètode
&lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Pista: cap lloguer, un lloguer, més d'un lloguer, lloguer de vehicle
general amb un dia, lloguer de general amb 2 dies, etc.&lt;/p&gt;
&lt;hr class="docutils" /&gt;
&lt;p&gt;Ara que ja tenim el nostre exemple preparat, passem a fer les &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/refactoring-extraccio-de-metodes.html"&gt;primeres
passes de refacció&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="referencies"&gt;
&lt;h2&gt;Referències&lt;/h2&gt;
&lt;table class="docutils citation" frame="void" id="fowler" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[FOWLER]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Fowler, Martin (1999) &lt;em&gt;Refactoring: Improving the Design of Existing
Code&lt;/em&gt;.  Addison-Wesley Professional.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="testdespresdecodi" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Potser estàs pensant &lt;em&gt;no m'havien venut que les
proves es creen per que fallin? Com és que ara em demanen crear una
prova a passar?.&lt;/em&gt; És cert que l'objectiu de crear una prova
(especialment en TDD) és fer que falli i per això escrivim la prova
abans del codi. En aquest cas però, el codi ja el tenim i estem
pressuposant que funciona. La idea és que aviat canviarem el codi i
volem comprovar que continua funcionant de la mateixa manera
després de les modificacions.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="programari"></category><category term="java"></category></entry><entry><title>Refactoring: extracció de mètodes</title><link href="http://apuntstecnics.herokuapp.com/refactoring-extraccio-de-metodes.html" rel="alternate"></link><updated>2015-02-11T10:25:42+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-11:refactoring-extraccio-de-metodes.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada relitza els primers passos de refacció sobre
l'exemple. En concret, es realitza un pas de refacció conegut com a
&lt;em&gt;extracció de mètode&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="extraccio-de-metodes"&gt;
&lt;h2&gt;Extracció de mètodes&lt;/h2&gt;
&lt;p&gt;En un mètode tan llarg, potser una de les passes de refacció més
adequada és aconseguir descomposar-lo en mètodes més petits.&lt;/p&gt;
&lt;p&gt;A aquest tipus de refacció li direm &lt;em&gt;extracció de mètode&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* mostra un missatge amb el mes anterior i el mes següent de&lt;/span&gt;
&lt;span class="cm"&gt; * l&amp;#39;especificat per paràmetre.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa que mesActual és un valor entre 1 i 12.  */&lt;/span&gt;
&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostraMesAnteriorISeguent&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mesActual&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// calcula i mostra el mes anterior&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mesAnterior&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;anyAnterior&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mesActual&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;mesAnterior&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;anyAnterior&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;mesAnterior&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mesActual&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;anyAnterior&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Mes anterior: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;mesAnterior&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;anyAnterior&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

    &lt;span class="c1"&gt;// calcula i mostra el mes següent&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mesSeguent&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;anySeguent&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mesActual&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;mesSeguent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;anySeguent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;mesSeguent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mesActual&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;anySeguent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Mes següent: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;mesSeguent&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;anySeguent&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Aquest codi realitza dues coses diferents:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;calcula i mostra el mes anterior&lt;/li&gt;
&lt;li&gt;calcula i mostra el mes següent&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Quan un mètode fa més d'una cosa, sol resultar molt convenient
&lt;em&gt;delegar&lt;/em&gt; algunes o totes aquestes coses a nous mètodes. Això facilita
la llegibilitat i el reaprofitament.&lt;/p&gt;
&lt;p&gt;En aquest exemple, aplicant l'extracció de mètodes aconseguirem el
següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* mostra un missatge amb el mes anterior i el mes següent de&lt;/span&gt;
&lt;span class="cm"&gt; * l&amp;#39;especificat per paràmetre.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa que mesActual és un valor entre 1 i 12.*/&lt;/span&gt;
&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostraMesAnteriorISeguent&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mesActual&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;mostraMesAnterior&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mesActual&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;mostraMesSeguent&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mesActual&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostraMesAnterior&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mesActual&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mesAnterior&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;anyAnterior&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mesActual&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;mesAnterior&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;anyAnterior&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;mesAnterior&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mesActual&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;anyAnterior&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Mes anterior: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;mesAnterior&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;anyAnterior&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;El mètode &lt;tt class="docutils literal"&gt;mostraMesSeguent()&lt;/tt&gt; te'l deixo per que t'exercitis.&lt;/p&gt;
&lt;p&gt;No sempre resultarà tan fàcil fer l'extracció del mètode com en aquest
exemple. De vegades hi haurà variables compartides o parts de codi
barrejades.&lt;/p&gt;
&lt;p&gt;Tornant al nostre mètode &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt;, una part que podríem
considerar candidata a extreure per començar és el bloc del
&lt;tt class="docutils literal"&gt;switch&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Com que en aquest cas, el procés és una mica més complex que amb
l'exemple del &lt;tt class="docutils literal"&gt;mesAnteriorSeguent()&lt;/tt&gt;, haurem d'anar amb més compte.&lt;/p&gt;
&lt;p&gt;Per començar, hem de detectar quines són les dependències del fragment
de codi a extreure respecte de la resta del mètode. Podem veure que el
bloc del &lt;tt class="docutils literal"&gt;switch&lt;/tt&gt; requereix les variables &lt;tt class="docutils literal"&gt;lloguer&lt;/tt&gt; i
&lt;tt class="docutils literal"&gt;quantitat&lt;/tt&gt;. D'aquestes variables, &lt;tt class="docutils literal"&gt;lloguer&lt;/tt&gt; només és consultada
dins del codi, mentre que &lt;tt class="docutils literal"&gt;quantitat&lt;/tt&gt; és modificada. &lt;tt class="docutils literal"&gt;lloguer&lt;/tt&gt; el
podem passar com a paràmetre amb tranquil·litat. Amb &lt;tt class="docutils literal"&gt;quantitat&lt;/tt&gt;
però, haurem d'anar amb compte. Com que en aquest cas és només una,
podem considerar retornar el seu valor. Donat que &lt;tt class="docutils literal"&gt;quantitat&lt;/tt&gt;
s'inicialitza a 0 a cada volta del bucle i se li assigna el valor dins
del &lt;tt class="docutils literal"&gt;switch&lt;/tt&gt;, podem simplement assignar-li el valor de retorn del
nou mètode que estem definint.&lt;/p&gt;
&lt;p&gt;El codi resultant per &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; podria ser el següent:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Informe de lloguers del client &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="n"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getNif&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="nl"&gt;lloguer:&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="hll"&gt;        &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;quantitatPerLloguer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/span&gt;
        &lt;span class="c1"&gt;// afegeix lloguers freqüents&lt;/span&gt;
        &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;++;&lt;/span&gt;

        &lt;span class="c1"&gt;// afegeix bonificació per dos dies de lloguer de Luxe&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getCategoria&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;Vehicle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LUXE&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;
                &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;++;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="c1"&gt;// composa els resultats d&amp;#39;aquest lloguer&lt;/span&gt;
        &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getMarca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// afegeix informació final&lt;/span&gt;
    &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Import a pagar: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Punts guanyats: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;div class="section" id="exercici-6-quantitat-per-lloguer"&gt;
&lt;h3&gt;Exercici 6: Quantitat per lloguer&lt;/h3&gt;
&lt;p&gt;Implementa el mètode privat &lt;tt class="docutils literal"&gt;Client.quantitatPerLloguer()&lt;/tt&gt; de manera
que el codi resultant continuï passant els jocs de prova.&lt;/p&gt;
&lt;p&gt;Atenció: no intentis fer massa. Simplement cal que moguis el bloc del
&lt;tt class="docutils literal"&gt;switch&lt;/tt&gt; a dins del nou mètode, declaris alguna variable on guardar
l'import i retornis el seu valor al final.&lt;/p&gt;
&lt;p&gt;Fixa't què, donat que el canvi és petit i disposes d'un bon joc de
proves, resulta molt fàcil de corregir els errors que ocasionalment
puguis haver introduït.&lt;/p&gt;
&lt;hr class="docutils" /&gt;
&lt;p&gt;Passem ara a veure un altre pas de refacció, l'anomenat &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/refactoring-moviment-de-metodes.html"&gt;moviment de
mètode&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="programari"></category><category term="java"></category></entry><entry><title>Refactoring: Moviment de mètodes</title><link href="http://apuntstecnics.herokuapp.com/refactoring-moviment-de-metodes.html" rel="alternate"></link><updated>2015-02-11T10:24:42+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-11:refactoring-moviment-de-metodes.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada relitza un nou pas de refacció conegut com a
&lt;em&gt;moviment de mètode&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="moviment-de-metodes"&gt;
&lt;h2&gt;Moviment de mètodes&lt;/h2&gt;
&lt;p&gt;Fixa't ara en el mètode &lt;tt class="docutils literal"&gt;Client.quantitatPerLloguer()&lt;/tt&gt; que acabes de
crear. Tot i que agafa informació d'un lloguer i del vehicle associat,
&lt;strong&gt;no en fa res de la informació del client&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Aquest tipus de situacions ens han de fer sospitar que potser, el
mètode no es troba en el lloc adequat. És a dir, potser no ha de ser
responsabilitat de Client calcular l'import d'un Lloguer concret.&lt;/p&gt;
&lt;p&gt;Quan ens trobem amb aquesta situació, el que toca fer és el que
coneixerem com a &lt;em&gt;moviment de mètode&lt;/em&gt; que consisteix bàsicament en
moure un mètode d'una classe a una altra &lt;a class="footnote-reference" href="#movimentpropietat" id="id1"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Sovint no resulta gens fàcil decidir de bon començament la classe a la
que assignar una responsabilitat concreta. Per aquesta raó és freqüent
que les responsabilitats s'hagin de reassignar amb el temps. Aquest
pas de refacció (&lt;em&gt;moviment de mètode&lt;/em&gt;) pot arribar a resultar, doncs,
força útil.&lt;/p&gt;
&lt;div class="section" id="exercici-7-quantitatperlloguer-a-la-classe-lloguer"&gt;
&lt;h3&gt;Exercici 7. quantitatPerLloguer() a la classe Lloguer&lt;/h3&gt;
&lt;p&gt;Mou el mètode &lt;tt class="docutils literal"&gt;Client.quantitatPerLloguer()&lt;/tt&gt; a
&lt;tt class="docutils literal"&gt;Lloguer.quantitat()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Com sempre, assegura't que els canvis no han trencat res (passa els
jocs de prova)&lt;/p&gt;
&lt;p&gt;Tingues en compte que:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;ara aquest mètode caldrà que accessible des d'una altra classe
(visibilitat)&lt;/li&gt;
&lt;li&gt;com que el mètode ara és de Lloguer, el seu nom antic és redundant.
Per això es proposa reanomenar-lo a &lt;tt class="docutils literal"&gt;quantitat()&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;ara ja no li caldrà rebre el lloguer com a paràmetre. Saps perquè?&lt;/li&gt;
&lt;li&gt;la crida des de &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; serà una mica diferent.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-8-canvis-en-el-diagrama-de-classe"&gt;
&lt;h3&gt;Exercici 8. Canvis en el diagrama de classe&lt;/h3&gt;
&lt;p&gt;Dibuixa com queda el diagrama de classes del sistema després d'aquest
canvi.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-9-canvis-en-el-diagrama-de-sequencia"&gt;
&lt;h3&gt;Exercici 9. Canvis en el diagrama de seqüència&lt;/h3&gt;
&lt;p&gt;Actualitza el diagrama de seqüència que descriu la crida a
&lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; amb els nous canvis que has introduït.&lt;/p&gt;
&lt;hr class="docutils" /&gt;
&lt;p&gt;Trobem el següent pas de refacció &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/refactoring-temporals-per-crides.html"&gt;aquí&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="movimentpropietat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Existeixen altres passos de refacció
relacionats amb el moviment de responsabilitats. Un de molt evident
és el moviment de propietats. La idea és similar de la del moviment
de mètodes: trobes una propietat a una classe quan hauria d'estar a
una altra. El mecanisme d'aplicació d'aquest pas és molt similar
que el de moviment de mètodes.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="programari"></category><category term="java"></category></entry><entry><title>Refactoring: Temporals per crides</title><link href="http://apuntstecnics.herokuapp.com/refactoring-temporals-per-crides.html" rel="alternate"></link><updated>2015-02-11T10:23:42+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-11:refactoring-temporals-per-crides.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada relitza un nou pas de refacció conegut com a
&lt;em&gt;reemplaçament de variable temporal per crida&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="reemplaca-temporal-per-crida"&gt;
&lt;h2&gt;Reemplaça temporal per crida&lt;/h2&gt;
&lt;p&gt;El següent pas de refacció cerca eliminar variables temporals que
només són assignades un cop i substituir-les pel valor assignat allà
on calgui.&lt;/p&gt;
&lt;p&gt;Per exemple, considera el següent fragment de codi:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;preuBase&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;preuUnitari&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;preuBase&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;1000&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;preuBase&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mf"&gt;0.90&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;preuBase&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aquest pas el codificaria com:&lt;/p&gt;
&lt;!-- code-block::java

if (preuBase() &gt; 1000) {
    return preuBase() * 0.90;
} else {
    return preuBase();
} --&gt;
&lt;p&gt;Amb el nou mètode que encapsula l'expressió inicial:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;preuBase&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;preuUnitari&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;La creació del nou mètode és un altre exemple de pas d'&lt;em&gt;extracció de
mètode&lt;/em&gt; que hem vist abans.&lt;/p&gt;
&lt;p&gt;Es pot argumentar que aquesta transformació resulta en un codi menys
eficient en execució. És cert, el preu base passa a calcular-se dos
cops en comptes d'un. En aquest cas, el càlcul és molt lleuger, però
podria ser més costós si incorporés, per exemple, un recorregut d'una
llista d'elements.&lt;/p&gt;
&lt;p&gt;A favor del canvi, podem dir que elimina del codi dependències a
variables temporals. D'aquesta manera pot resultar molt més fàcil
realitzar extraccions de mètodes.&lt;/p&gt;
&lt;p&gt;Recordem que l'eficiència en la llegibilitat/modificabilitat del codi
és normalment molt més desitjable que l'eficiència en l'execució de
codi. Abans de decidir-nos per un codi menys llegible justificant-lo
amb el rendiment em execució, és important tenir molt clar com afecta
al rendiment de l'aplicació. Molts cops ens trobarem que el guany de
rendiment és molt petit. D'altres cops veurem que el codi més clar
permet optimitzacions a més alt nivell.&lt;/p&gt;
&lt;p&gt;En el codi que estem treballant, al mètode &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; hi
trobem la variable &lt;tt class="docutils literal"&gt;quantitat&lt;/tt&gt;.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Informe de lloguers del client &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="n"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getNif&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// afegeix lloguers freqüents&lt;/span&gt;
        &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;++;&lt;/span&gt;

        &lt;span class="c1"&gt;// afegeix bonificació per dos dies de lloguer de Luxe&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getCategoria&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;Vehicle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LUXE&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;
                &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;++;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="c1"&gt;// composa els resultats d&amp;#39;aquest lloguer&lt;/span&gt;
        &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getMarca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
&lt;span class="hll"&gt;            &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;span class="hll"&gt;        &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/span&gt;    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// afegeix informació final&lt;/span&gt;
    &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Import a pagar: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Punts guanyats: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;div class="section" id="exercici-10-opcional-optimitzacio-del-calcul-de-quantitat"&gt;
&lt;h3&gt;Exercici 10: (opcional) Optimització del càlcul de quantitat&lt;/h3&gt;
&lt;p&gt;Encara amb preocupacions per la pèrdua d'eficiència en execució del
pas anterior?&lt;/p&gt;
&lt;p&gt;Et proposo que trobis alguna manera d'aconseguir que el valor tornat
per &lt;tt class="docutils literal"&gt;Lloguer.quantitat()&lt;/tt&gt; només es calculi un cop.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-11-extraccio-del-calcul-de-bonificacions"&gt;
&lt;h3&gt;Exercici 11: Extracció del càlcul de bonificacions&lt;/h3&gt;
&lt;p&gt;De la mateixa manera que hem extret de &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; el càlcul
de l'import de cada lloguer, podem plantejar-nos extreure el càlcul de
les bonificacions.&lt;/p&gt;
&lt;p&gt;En aquest cas, la bonificació es modifica en dos llocs, a banda de
la inicialització, segons es ressalta al codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="hll"&gt;     &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/span&gt;     &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Informe de lloguers del client &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="n"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getNif&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="c1"&gt;// afegeix lloguers freqüents&lt;/span&gt;
&lt;span class="hll"&gt;         &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;++;&lt;/span&gt;
&lt;/span&gt;
         &lt;span class="c1"&gt;// afegeix bonificació per dos dies de lloguer de Luxe&lt;/span&gt;
         &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getCategoria&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;Vehicle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LUXE&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;
                 &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="hll"&gt;             &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;++;&lt;/span&gt;
&lt;/span&gt;         &lt;span class="o"&gt;}&lt;/span&gt;

         &lt;span class="c1"&gt;// composa els resultats d&amp;#39;aquest lloguer&lt;/span&gt;
         &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getMarca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
         &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;

     &lt;span class="c1"&gt;// afegeix informació final&lt;/span&gt;
     &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Import a pagar: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="s"&gt;&amp;quot;Punts guanyats: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Extreu la funcionalitat del càlcul de les bonificacions a un nou
mètode &lt;tt class="docutils literal"&gt;bonificacionsDeLloguer()&lt;/tt&gt; que donat un lloguer retorna la
bonificació corresponent.&lt;/p&gt;
&lt;p&gt;En fer-ho, assegura't que no has trencat res i que guardes la versió
al control de versions.&lt;/p&gt;
&lt;p&gt;El mètode &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; haurà de resultar així:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Informe de lloguers del client &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="n"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getNif&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="hll"&gt;        &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;bonificacionsDeLloguer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/span&gt;        &lt;span class="c1"&gt;// composa els resultats d&amp;#39;aquest lloguer&lt;/span&gt;
        &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getMarca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// afegeix informació final&lt;/span&gt;
    &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Import a pagar: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Punts guanyats: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;hr class="docutils" /&gt;
&lt;p&gt;Passem a veure &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/refactoring-moviment-de-responsabilitat.html"&gt;un altre exemple típic&lt;/a&gt; de refacció.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="programari"></category><category term="java"></category></entry><entry><title>Refactoring: Moviment de responsabilitat</title><link href="http://apuntstecnics.herokuapp.com/refactoring-moviment-de-responsabilitat.html" rel="alternate"></link><updated>2015-02-11T10:22:42+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-11:refactoring-moviment-de-responsabilitat.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada es realitza un nou pas de refacció, tot movent una
responsabilitat (o servei) assignat inicialment a una classe, cap a
una altra.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="moviment-de-responsabilitat"&gt;
&lt;h2&gt;Moviment de responsabilitat&lt;/h2&gt;
&lt;p&gt;De vegades ens trobarem que hem assignat a una classe una
responsabilitat que no li pertoca. En aquest cas, podem aplicar el pas
de refacció &lt;cite&gt;moviment de mètode&lt;/cite&gt; que col·loqui les coses on toca.&lt;/p&gt;
&lt;div class="section" id="exercici-12-reassignant-responsabilitats"&gt;
&lt;h3&gt;Exercici 12. Reassignant responsabilitats&lt;/h3&gt;
&lt;p&gt;Considera si el mètode &lt;cite&gt;bonificacionsDeLloguer&lt;/cite&gt; que hem creat per
l'exercici anterior, correspon realment a la classe on es troba.
Mou-lo allà on creguis oportú fent servir &lt;em&gt;moviment de mètode&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;El codi resultant hauria de permetre que &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; funcioni
amb el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Informe de lloguers del client &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="n"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getNif&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="hll"&gt;        &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;bonificacions&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;/span&gt;        &lt;span class="c1"&gt;// composa els resultats d&amp;#39;aquest lloguer&lt;/span&gt;
        &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getMarca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// afegeix informació final&lt;/span&gt;
    &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Import a pagar: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Punts guanyats: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Nota: ara eliminar la variable temporal &lt;tt class="docutils literal"&gt;bonificacions ``no serà tan
directe com amb ``quantitat&lt;/tt&gt;. Paciència.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-13-diagrama-de-classes-actualitzat"&gt;
&lt;h3&gt;Exercici 13. Diagrama de classes actualitzat&lt;/h3&gt;
&lt;p&gt;Actualitza el diagrama de classes amb la situació actual.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-14-canvis-en-el-diagrama-de-sequencia"&gt;
&lt;h3&gt;Exercici 14. Canvis en el diagrama de seqüència&lt;/h3&gt;
&lt;p&gt;Actualitza el diagrama de seqüència que descriu la crida a
&lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; amb els nous canvis que has introduït.&lt;/p&gt;
&lt;hr class="docutils" /&gt;
&lt;p&gt;Passem a veure com eliminar variables temporals
&amp;lt;{filename}/dev/refactoring.008.rst&amp;gt;`_&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="programari"></category><category term="java"></category></entry><entry><title>Refactoring: Eliminació de variables temporals</title><link href="http://apuntstecnics.herokuapp.com/refactoring-eliminacio-de-variables-temporals.html" rel="alternate"></link><updated>2015-02-11T10:21:42+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-11:refactoring-eliminacio-de-variables-temporals.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada relitza un nou pas de refacció conegut com a
&lt;em&gt;eliminació de variables temporals&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="eliminacio-de-variables-temporals"&gt;
&lt;h2&gt;Eliminació de variables temporals&lt;/h2&gt;
&lt;p&gt;Ja hem discutit la importància d'eliminar variables temporals. Es
tracta de variables que només es poden accedir dins del mètode que les
declara i això promou la creació de mètodes més llargs i complexos.&lt;/p&gt;
&lt;p&gt;A &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; hi ha encara variables temporals que podríem
considerar eliminar. En concret, &lt;tt class="docutils literal"&gt;total&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;bonificacions&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Fixa't que el càlcul d'aquests dos valors, serà necessari també per
realitzar &lt;tt class="docutils literal"&gt;Client.informeHTML()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Totes dues variables temporals acumulen valors obtinguts dels
diferents lloguers. Fixa't com, el bucle es aprofitat per realitzar
tres coses diferents:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;composar la part de l'informe corresponent a cada lloguer&lt;/li&gt;
&lt;li&gt;acumular l'import de cada lloguer&lt;/li&gt;
&lt;li&gt;acumular la bonificació de cada lloguer&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Si bé pot semblar convenient des d'un punt de vista de rendiment,
realitzar aquestes tres coses barrejades en el mateix lloc ens està
obligant a duplicar codi a &lt;tt class="docutils literal"&gt;Client.informeHTML()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;El que farem a continuació és realitzar les tres accions en
recorreguts separats. Sí, recorrerem tres cops els lloguers d'un
client. En el cas del càlcul d'imports i bonificacions, aquests
recorreguts tindran lloc en nous mètodes.&lt;/p&gt;
&lt;p&gt;Si continua preocupant-te el rendiment &lt;a class="footnote-reference" href="#rendimentstring" id="id1"&gt;[1]&lt;/a&gt;, et proposo
que facis una prova de temps abans i després del canvi (posa un nombre
considerable de lloguers) Compara la diferència amb el que et costava
abans codificar &lt;tt class="docutils literal"&gt;Client.informeHTML()&lt;/tt&gt; respecte d'ara (inclou una
estimació del cost de manteniment i d'afegir noves versions com
&lt;tt class="docutils literal"&gt;Client.informeXML()&lt;/tt&gt;)&lt;/p&gt;
&lt;p&gt;Fixa't que amb aquest canvi, la funcionalitat de calcular l'import
total i les bonificacions d'un client estan disponibles per a
qualsevol nou mètode de &lt;tt class="docutils literal"&gt;Client&lt;/tt&gt; que les necessiti. Encara més, si
fem públics els nous mètodes, els usuaris de la classe també en
podrien traure profit.  Planteja't com s'ho farien abans per a poder
calcular aquests valors?  Era quelcom convenient? Perquè?&lt;/p&gt;
&lt;div class="section" id="exercici-15-eliminacio-de-la-variable-total"&gt;
&lt;h3&gt;Exercici 15. Eliminació de la variable &lt;tt class="docutils literal"&gt;total&lt;/tt&gt;&lt;/h3&gt;
&lt;p&gt;Elimina la variable &lt;tt class="docutils literal"&gt;total&lt;/tt&gt; del codi de &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt;. Amb la
nova versió, aquest mètode tindrà el següent aspecte:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Informe de lloguers del client &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="n"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getNif&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="nl"&gt;lloguer:&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;bonificacions&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="c1"&gt;// composa els resultats d&amp;#39;aquest lloguer&lt;/span&gt;
         &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getMarca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;

     &lt;span class="c1"&gt;// afegeix informació final&lt;/span&gt;
&lt;span class="hll"&gt;     &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Import a pagar: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;importTotal&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
&lt;/span&gt;         &lt;span class="s"&gt;&amp;quot;Punts guanyats: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-16-eliminacio-de-la-variable-bonificacions"&gt;
&lt;h3&gt;Exercici 16. Eliminació de la variable &lt;tt class="docutils literal"&gt;bonificacions&lt;/tt&gt;&lt;/h3&gt;
&lt;p&gt;Ara li toca el torn de la variable &lt;tt class="docutils literal"&gt;bonificacions&lt;/tt&gt;. Elimina-la del
codi de &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt;. Amb la nova versió, aquest mètode tindrà
el següent aspecte:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Informe de lloguers del client &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="n"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getNif&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="nl"&gt;lloguer:&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="c1"&gt;// composa els resultats d&amp;#39;aquest lloguer&lt;/span&gt;
         &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getMarca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;

     &lt;span class="c1"&gt;// afegeix informació final&lt;/span&gt;
     &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Import a pagar: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;importTotal&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
&lt;span class="hll"&gt;         &lt;span class="s"&gt;&amp;quot;Punts guanyats: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bonificacionsTotals&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/span&gt;     &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;hr class="docutils" /&gt;
&lt;p&gt;Trobem més passes de refacció a la següent &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/refactoring-altres-passes-de-refaccio.html"&gt;entrada&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="rendimentstring" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Qualsevol realment preocupat pel rendiment faria
bé de revisar primer la conveniència de fer servir la concatenació
de Strings.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="programari"></category><category term="java"></category></entry><entry><title>Refactoring: altres passes de refacció</title><link href="http://apuntstecnics.herokuapp.com/refactoring-altres-passes-de-refaccio.html" rel="alternate"></link><updated>2015-02-11T10:20:42+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-11:refactoring-altres-passes-de-refaccio.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada finalitzarem la nostra introducció a la refacció
amb algunes passes finals.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="altres-passes-de-refaccio"&gt;
&lt;h2&gt;Altres passes de refacció&lt;/h2&gt;
&lt;div class="section" id="una-cosa-per-metode"&gt;
&lt;h3&gt;Una cosa per mètode&lt;/h3&gt;
&lt;p&gt;Encara es podrien fer més passes de refacció. Per exemple, fixa't que
el mètodes &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; fa tres coses separades: composa la
capçalera, el detall de cada lloguer i peu de l'informe.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="c1"&gt;// composa capçalera&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;

    &lt;span class="c1"&gt;// composa detalls&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;

    &lt;span class="c1"&gt;// composa peu&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Els diferents &lt;em&gt;subblocs&lt;/em&gt; es podrien extreure, simplificant encara més
el codi del mètode. És el que hem anomenat &lt;em&gt;extracció de mètode&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;En general, quan ens trobem un mètode que té comentaris o blocs
diferents de codi, podem considerar que fa més d'una cosa i plantejar
l'extracció de mètodes.&lt;/p&gt;
&lt;p&gt;Tornarem a aplicar l'&lt;em&gt;extracció de mètodes&lt;/em&gt; de manera que el codi
següent funcioni:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;composaCapsalera&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
           &lt;span class="n"&gt;composaDetall&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
           &lt;span class="n"&gt;composaPeu&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;On parem? És a dir, fins quan podem estar intentant reduir un mètode?
En general, quan en intentar-ho, no aconseguim millorar la
llegibilitat. Per exemple, podríem reduir el codi anterior a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;composaCapsalera&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
           &lt;span class="n"&gt;composaRestaInforme&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si bé el codi és més reduït (una línia menys), no sembla que hàgim
guanyat gaire en llegibilitat, oi? Aquí, com a tants altres llocs,
haurem de fer servir el nostre sentit comú per decidir.&lt;/p&gt;
&lt;p&gt;Encara podries argumentar que &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; continua fent tres
coses. En aquest cas, podries portar l'argument fins al final i
continuar pensant que aquest mètode també calcula l'import total dels
lloguers... En qualsevol cas, confio en que acceptis que, al menys, el
codi actual de &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; resulta molt més fàcil/ràpid
d'entendre que l'original.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-17-cada-metode-fa-una-unica-cosa"&gt;
&lt;h3&gt;Exercici 17. Cada mètode fa una única cosa&lt;/h3&gt;
&lt;p&gt;Distribueix el mètode &lt;em&gt;Client.informe()&lt;/em&gt; de manera que quedin
separades les funcionalitats de construcció de la capçalera, el detall
i el peu de l'informe, tal i com acabem de veure.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="literals-per-constants"&gt;
&lt;h3&gt;Literals per constants&lt;/h3&gt;
&lt;p&gt;Què vol dir exàctament el &lt;tt class="docutils literal"&gt;30&lt;/tt&gt; al fragment de codi següent?
Té el mateix significat que el &lt;tt class="docutils literal"&gt;30&lt;/tt&gt; que t'apareix a
&lt;tt class="docutils literal"&gt;Client.importTotal()&lt;/tt&gt;?&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="c1"&gt;// composa els resultats d&amp;#39;aquest lloguer&lt;/span&gt;
     &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getMarca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
&lt;span class="hll"&gt;         &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En aquest cas, &lt;tt class="docutils literal"&gt;30&lt;/tt&gt; és el valor multiplicatiu per a aconseguir
convertir l'import a euros. Per exemple, llogar un vehicle bàsic per
un dia suposa &lt;tt class="docutils literal"&gt;3&lt;/tt&gt; unitats de &lt;em&gt;cost&lt;/em&gt; mentre que llogar un vehicle
general també per un dia ens &lt;em&gt;costa&lt;/em&gt; &lt;tt class="docutils literal"&gt;6&lt;/tt&gt;. Si volem saber l'import
que correspon, hem de multiplicar per 30 aquestes quantitats tant per
l'import de cada vehicle com del total. Diríem
doncs que &lt;tt class="docutils literal"&gt;30&lt;/tt&gt; és el valor en euros d'una unitat de cost de lloguer.&lt;/p&gt;
&lt;p&gt;Així, podem declarar la constant següent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;EUROS_PER_UNITAT_DE_COST&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ara, substituïm totes les aparicions de &lt;tt class="docutils literal"&gt;30&lt;/tt&gt; per aquesta constant
com es veu a &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Informe de lloguers del client &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="n"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getNif&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="c1"&gt;// composa els resultats d&amp;#39;aquest lloguer&lt;/span&gt;
         &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getMarca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
&lt;span class="hll"&gt;             &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;EUROS_PER_UNITAT_DE_COST&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/span&gt;     &lt;span class="o"&gt;}&lt;/span&gt;

     &lt;span class="c1"&gt;// afegeix informació final&lt;/span&gt;
     &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Import a pagar: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;importTotal&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="s"&gt;&amp;quot;Punts guanyats: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bonificacionsTotals&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Amb aquest canvi, el codi guanya en llegibilitat doncs és molt més
fàcil entendre què vol dir el 30 allà on s'aplica. Si en un futur hem
de canviar la lògica (ex. el preu per unitat de cost), ens resultarà
molt més fàcil doncs només haurem de tocar un lloc. Fins i tot,
podríem arribar a passar la nova constant a una propietat (o
paràmetre) de manera que la poguéssim modificar sense requerir
recompilar.&lt;/p&gt;
&lt;p&gt;Atenció: malgrat sembli un canvi senzill, cal executar les proves per
si hem trencat alguna cosa.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-18-mes-constants"&gt;
&lt;h3&gt;Exercici 18. Més constants&lt;/h3&gt;
&lt;p&gt;Considera ara el fragment de codi que pertany al mètode
&lt;tt class="docutils literal"&gt;Lloguer.quantitat()&lt;/tt&gt;. Signifiquen el mateix els tres cops que hi
apareix el valor &lt;tt class="docutils literal"&gt;3&lt;/tt&gt;?&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;Vehicle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;BASIC&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mf"&gt;1.5&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En aquest cas, veiem que el primer &lt;tt class="docutils literal"&gt;3&lt;/tt&gt; correspon a la quantitat (o
unitats de cost) que val el lloguer d'un vehicle bàsic entre un i tres
dies. Els altres dos &lt;tt class="docutils literal"&gt;3&lt;/tt&gt; en canvi, corresponen a nombre de dies
inicials amb el mateix preu.&lt;/p&gt;
&lt;p&gt;En aquest exercici se't demana que converteixis tots els literals
numèrics que consideris oportuns del mètode &lt;tt class="docutils literal"&gt;Lloguer.quantitat()&lt;/tt&gt;,
en constants.&lt;/p&gt;
&lt;p&gt;Assegura't que esculls noms adequats i que el resultat no trenca el
funcionament.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-19-reanomenament"&gt;
&lt;h3&gt;Exercici 19. Reanomenament&lt;/h3&gt;
&lt;p&gt;Ara que hem aprofundit més en els conceptes que envolten al càlcul de
l'import del lloguer, ens adonem que el mot &lt;em&gt;quantitat&lt;/em&gt; no és
representatiu del que conté la variable &lt;tt class="docutils literal"&gt;quantitat&lt;/tt&gt; al mètode
&lt;tt class="docutils literal"&gt;Lloguer.quantitat()&lt;/tt&gt;. De fet, el nom del mètode presenta el mateix
problema!&lt;/p&gt;
&lt;p&gt;És quelcom molt habitual. Quan estàs creant un nou mètode fas servir
uns noms el més adequats que pots. Després, vists amb més perspectiva,
te n'adones que els noms inicials no són adequats. Quan no disposes de
jocs de prova automàtics i, a més, el codi està molt embolicat, és
comprensible que no t'atreveixis a fer cap canvi. I si trenques alguna
cosa?&lt;/p&gt;
&lt;p&gt;Però aquí disposes de proves unitàries que es queixaran de seguida.
Millorar el nom dels elements d'un programa és molt més que
aconsellable: els noms formen una part significativa de la
documentació del codi.&lt;/p&gt;
&lt;blockquote&gt;
Millors noms ⇒ més llegibilitat ⇒ més reusabilitat + modificabilitat&lt;/blockquote&gt;
&lt;p&gt;Atenció: Si el mètode pertany a la interfície pública d'una classe que
està fent servir molta gent (ex. les de l'API de Java), un canvi en el
nom pot causar molts problemes &lt;a class="footnote-reference" href="#desenvolupadorsapi" id="id1"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;En aquest exercici se't demana que trobis un nom més adequat pel
mètode &lt;tt class="docutils literal"&gt;Lloguer.quantitat()&lt;/tt&gt; i per la variable &lt;tt class="docutils literal"&gt;quantitat&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-20-l-informe-en-html"&gt;
&lt;h3&gt;Exercici 20. L'informe en HTML&lt;/h3&gt;
&lt;p&gt;Ara que &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; només s'encarrega directament de composar
l'informe, és el moment de fer la versió en HTML.&lt;/p&gt;
&lt;p&gt;Codifica aquest nou mètode de manera que generi un resultat amb la
següent estructura:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nt"&gt;&amp;lt;h1&amp;gt;&lt;/span&gt;Informe de lloguers&lt;span class="nt"&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;p&amp;gt;&lt;/span&gt;Informe de lloguers del client &lt;span class="nt"&gt;&amp;lt;em&amp;gt;&lt;/span&gt;Ken Robinson &lt;span class="nt"&gt;&amp;lt;/em&amp;gt;&lt;/span&gt; (&lt;span class="nt"&gt;&amp;lt;strong&amp;gt;&lt;/span&gt;43092837A&lt;span class="nt"&gt;&amp;lt;/strong&amp;gt;&lt;/span&gt;)&lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;table&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;&amp;lt;strong&amp;gt;&lt;/span&gt;Marca&lt;span class="nt"&gt;&amp;lt;/strong&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&amp;lt;strong&amp;gt;&lt;/span&gt;Model&lt;span class="nt"&gt;&amp;lt;/strong&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&amp;lt;strong&amp;gt;&lt;/span&gt;Import&lt;span class="nt"&gt;&amp;lt;/strong&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;     &lt;span class="nt"&gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;Tata&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;Vista&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;90.0€&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;Wolswagen&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;Passat&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;270.0€&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;Mercedes&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;SLK 2.0&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;360.0€&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/table&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;p&amp;gt;&lt;/span&gt;Import a pagar: &lt;span class="nt"&gt;&amp;lt;em&amp;gt;&lt;/span&gt;720.0€&lt;span class="nt"&gt;&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;p&amp;gt;&lt;/span&gt;Punts guanyats: &lt;span class="nt"&gt;&amp;lt;em&amp;gt;&lt;/span&gt;4&lt;span class="nt"&gt;&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Codifica també les proves unitàries corresponents (potser les pots
intentar construir abans de crear tot el codi!)&lt;/p&gt;
&lt;hr class="docutils" /&gt;
&lt;p&gt;Finalment, passem a veure les &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/refactoring-conclusions.html"&gt;conclusions&lt;/a&gt; d'aquesta introducció&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="desenvolupadorsapi" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;Els desenvolupadors de l'API de Java assumeixen
una responsabilitat molt gran i, tot i que hi deuen dedicar molta
estona a revisar els noms, hi ha alguns que segur haguessin volgut
canviar. Normalment, un cop publicada una interfície, només els
queda l'opció d'afegir un comentari a la documentació, com es pot
veure al següent comentari trobat a la documentació de la classe
&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/awt/font/TextAttribute.html"&gt;java.font.TextAttribute&lt;/a&gt;
:&lt;/p&gt;
&lt;blockquote class="last"&gt;
Note: This attribute is &lt;strong&gt;unfortunately misnamed&lt;/strong&gt;, as it
specifies the face name and not just the family. Thus values
such as &amp;quot;Lucida Sans Bold&amp;quot; will select that face if it exists.
Note, though, that if the requested face does not exist, the
default will be used with regular weight. The &amp;quot;Bold&amp;quot; in the
name is part of the face name, not a separate request that the
font's weight be bold.&lt;/blockquote&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="programari"></category><category term="java"></category></entry><entry><title>Refactoring: conclusions</title><link href="http://apuntstecnics.herokuapp.com/refactoring-conclusions.html" rel="alternate"></link><updated>2015-02-11T10:19:42+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-11:refactoring-conclusions.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Hem arribat al final d'aquesta introducció a la refacció. Fem aquí
unes breus paraules com a conclusió de la feina feta i, sobre tot,
unes indicacions per a ampliar els nostres coneixements en un tema
que, en cas d'aplicar-lo correctament, ens garantirà que la qualitat
del nostre millori cada cop que el revisem.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="recapitulem"&gt;
&lt;h2&gt;Recapitulem&lt;/h2&gt;
&lt;p&gt;Amb uns senzills canvis, hem passat d'un mètode d'unes 50 línies en
les que es barrejaven un munt d'aspectes diversos, a un altre de menys
de 5 que es limita a realitzar la &lt;strong&gt;seva&lt;/strong&gt; tasca: composar l'informe.
Les funcionalitats &amp;quot;sobrants&amp;quot; les hem passades a altres mètodes,
alguns fins i tot els hem mogut a altres classes. A més, hem realitzat
alguns canvis de noms.&lt;/p&gt;
&lt;p&gt;El resultat és un codi molt més modular (hom diria &lt;em&gt;orientat a
objectes&lt;/em&gt;) que permet crear nous formats d'informes de manera molt més
àgil.&lt;/p&gt;
&lt;p&gt;Hem vist només unes poques passes de refacció. Es coneixen moltes més.
Tot i que les presentades en aquesta sèrie d'exercicis ja poden
ajudar-nos a millorar significativament el nostre codi, és possible
que no et vulguis quedar aquí.&lt;/p&gt;
&lt;p&gt;Si és així. Si t'has quedat amb ganes de veure més, et recomano que
aconsegueixis una còpia del fantàstic llibre del &lt;a class="citation-reference" href="#fowler" id="id1"&gt;[FOWLER]&lt;/a&gt; i gaudeixis
de la seva lectura. Malgrat la transformació que he realitzat al seu
exemple inicial per a adaptar-lo al context que persegueixo per a
aquests materials, estic segur que podràs seguir els conceptes
que hi apareixen a la resta de l'exemple i, sobre tot, que aprofitaràs
l'ampli ventall de passos de refacció que recopila.&lt;/p&gt;
&lt;p&gt;Un altre llibre que t'ajudarà a aprofundir en els conceptes de
reanomenament i reducció de llargària de mètodes és el &lt;a class="citation-reference" href="#martin" id="id2"&gt;[MARTIN]&lt;/a&gt; en
els capítols 2 i 3. El conjunt del llibre t'oferirà una visió molt
pràctica del què vol dir un &lt;em&gt;codi net&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="referencies"&gt;
&lt;h2&gt;Referències&lt;/h2&gt;
&lt;table class="docutils citation" frame="void" id="fowler" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[FOWLER]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Fowler, Martin (1999) &lt;em&gt;Refactoring: Improving the Design
of Existing Code&lt;/em&gt;.  Addison-Wesley Professional.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils citation" frame="void" id="martin" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[MARTIN]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Martin, Robert C. (2009) &lt;em&gt;Clean Code: A Handbook of Agile
Software Craftmanship&lt;/em&gt;. Prentice Hall.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="programari"></category><category term="java"></category></entry><entry><title>Pujar notes massivament al Moodle</title><link href="http://apuntstecnics.herokuapp.com/pujar-notes-massivament-al-moodle.html" rel="alternate"></link><updated>2015-02-09T15:11:15+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-09:pujar-notes-massivament-al-moodle.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest petit tutorial mostra com es pot pujar notes i retroaccions des
d'un full de càlcul al Moodle.&lt;/p&gt;
&lt;p&gt;L'exemple que es segueix és la notificació de les notes finals d'una
unitat formativa.&lt;/p&gt;
&lt;p&gt;Objectius:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;poder calcular les notes en un full de càlcul&lt;/li&gt;
&lt;li&gt;poder pujar les notes i comentaris massivament al Moodle (en
comptes d'alumne per alumne)&lt;/li&gt;
&lt;li&gt;poder oferir a cada alumne la seva nota i comentari de manera
individual i privada, respecte la resta d'alumnes.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Per fer-ho ens cal:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;una tasca Moodle&lt;/p&gt;
&lt;p&gt;A l'exemple et mostro com crear-ne una que té com únic a objectiu,
transmetre les notes. És a dir, no pretén recollir cap exercici.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;un full de càlcul amb les notes i retroaccions.&lt;/p&gt;
&lt;p&gt;Veuràs que en el full cal que els alumnes estiguin identificats. A
l'exemple apareixen identificats per correu electrònic, i t'explica
com obtenir-los en cas que no en disposis.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;importació i vinculació&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Et recomano que facis una primera lectura a totes les passes abans de
començar a seguir-les. Això et permetrà tenir clar coses com que cal
disposar les notes en un determinat format (ex. un full de càlcul)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="procediment"&gt;
&lt;h2&gt;Procediment&lt;/h2&gt;
&lt;div class="section" id="la-tasca-moodle"&gt;
&lt;h3&gt;La tasca Moodle&lt;/h3&gt;
&lt;p&gt;En primer lloc entrarem a Moodle. Un cop al nostre curs, activarem
l'edició:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="activa edició" src="http://apuntstecnics.herokuapp.com/images/moodle.01.activa_edicio.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Ara anem a la secció on volem introduir les notes i seleccionem
&amp;quot;afegeix una activitat o un recurs&amp;quot;. Si ja tens una activitat creada i
simplement la vols puntuar, escull-la i saltat les següents passes de
creació.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="afegeix activitat" src="http://apuntstecnics.herokuapp.com/images/moodle.02.afegeix_activitat.png" /&gt;
&lt;/div&gt;
&lt;p&gt;L'activitat que escollirem és de tipus &amp;quot;Tasca&amp;quot;.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="escull tipus d'activitat tasca" src="http://apuntstecnics.herokuapp.com/images/moodle.03.tasca.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Omple el títol i el detall de la tasca. En el cas de l'exemple, estic
aprofitant per afegir-hi una breu conclusió del curs, la descripció
de com he calculat la nota final, i donar ànims per la següent part
del curs.&lt;/p&gt;
&lt;p&gt;És important inhabilitar a la secció &amp;quot;Paràmetres de la tasca&amp;quot; les
dates de lliurament. D'aquesta manera, la tasca quedarà només
disponible per ser consultada i els alumnes no hi podran lliurar res.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="crea nova tasca" src="http://apuntstecnics.herokuapp.com/images/moodle.04.nova_tasca.png" /&gt;
&lt;/div&gt;
&lt;p&gt;És recomanable marcar la tasca com a oculta. D'aquesta manera els
estudiants no hi podran accedir fins que hàgim vist que tot està
correcte.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Marca tasca oculta per seguretat" src="http://apuntstecnics.herokuapp.com/images/moodle.05.oculta.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Ara que ja tenim creada l'activitat, l'obrim:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Obre l'activitat" src="http://apuntstecnics.herokuapp.com/images/moodle.06.entra.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Al final de la pàgina que t'apareix, selecciona l'enllaç de
&amp;quot;Visualitza/Qualifica totes les trameses&amp;quot;.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="visualitza les trameses" src="http://apuntstecnics.herokuapp.com/images/moodle.07.visualitza.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Tot seguit selecciona &amp;quot;Visualitza el butlletí de qualificacions&amp;quot; del
desplegable.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="visualitza el butlletí" src="http://apuntstecnics.herokuapp.com/images/moodle.08.butlleti.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="el-full-de-calcul"&gt;
&lt;h3&gt;El full de càlcul&lt;/h3&gt;
&lt;p&gt;Ara passarem a veure el full de càlcul on tindrem les notes&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="revisem el full de càlcul" src="http://apuntstecnics.herokuapp.com/images/moodle.10.full_calcul.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Els requeriments són:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;una capçalera que descrigui les dades. Et recomano que facis servir
noms que et diguin alguna cosa.&lt;/li&gt;
&lt;li&gt;una columna que permeti identificar els alumnes. Et recomano que
facis servir el correu electrònic per evitar les variants dels noms.&lt;/li&gt;
&lt;li&gt;una columna amb les notes. A l'exemple apareixen sobre 100 i sense
decimals.&lt;/li&gt;
&lt;li&gt;una columna amb la retroacció individual. No és obligatòria però
trobo genial poder dedicar a cada alumne un breu comentari més o
menys personalitzat.&lt;/li&gt;
&lt;li&gt;poden haver-hi altres columnes que ignorarem a l'hora d'importar.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Com? Què no tens els correus electrònics dels teus alumnes? Els pots
extreure del Moodle.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="exporta a csv" src="http://apuntstecnics.herokuapp.com/images/moodle.11.exporta.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Un cop disposis del full de càlcul amb les notes i retroaccions, l'hauràs de guardar com a csv ja que, de moment, Moodle no sap com importar directament des del full de càlcul.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="selecciona format csv" src="http://apuntstecnics.herokuapp.com/images/moodle.13.format_csv.png" /&gt;
&lt;/div&gt;
&lt;p&gt;La següent configuració de csv funciona sense problemes. Amb tot,
Moodle acceptarà d'altres si li indiques a l'hora d'importar.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Parametritza csv" src="http://apuntstecnics.herokuapp.com/images/moodle.14.cometes.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="la-importacio"&gt;
&lt;h3&gt;La importació&lt;/h3&gt;
&lt;p&gt;Ara ja podem importar el fitxer csv al Moodle, per fer-ho, escollirem
al desplegable l'opció &amp;quot;Fitxer CSV&amp;quot; de la secció &amp;quot;Importar&amp;quot; del menú
desplegable:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Importa csv al Moodle" src="http://apuntstecnics.herokuapp.com/images/moodle.09.importa_csv.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Per fer-ho, arrossega el fitxer csv a la caixeta que conté una fletxa
animada.&lt;/p&gt;
&lt;p&gt;Si ho has fet bé, trobaràs el nom del teu fitxer dins la caixeta (ara
sense fletxa)&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Arrossega el fitxer" src="http://apuntstecnics.herokuapp.com/images/moodle.16.arrossegat.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="la-vinculacio"&gt;
&lt;h3&gt;La vinculació&lt;/h3&gt;
&lt;p&gt;Un cop has fet la importació, pots comprovar que les dades siguin les
que esperaves. Si tot és com esperaves, pots passar a fer la
vinculació de les columnes a les dades de la tasca a puntuar.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Vinculació dels camps" src="http://apuntstecnics.herokuapp.com/images/moodle.17.vinculacio.png" /&gt;
&lt;/div&gt;
&lt;p&gt;A la figura anterior s'ha vinculat:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;la columna del full de càlcul &amp;quot;email&amp;quot; amb el camp Moodle &amp;quot;Correu
electrònic&amp;quot;.&lt;/li&gt;
&lt;li&gt;la columna del full de càlcul &amp;quot;nota&amp;quot; amb el camp Moodle &amp;quot;Tasca «nom
que hem posat a la tasca»&amp;quot;&lt;/li&gt;
&lt;li&gt;la columna del full de càlcul &amp;quot;retroacció&amp;quot; amb el camp Moodle
&amp;quot;Retroacció per a Tasca «nom que hem posat a la tasca»&amp;quot;&lt;/li&gt;
&lt;li&gt;la resta de columnes del full de càlcul són ignorades.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="comprovacions-i-finalitzacio"&gt;
&lt;h3&gt;Comprovacions i finalització&lt;/h3&gt;
&lt;p&gt;Tot seguit, consultarem les notes del Moodle per veure si tot ha anat
com esperàvem. En el cas de l'exemple, haig de fer un desplaçament
horitzontal per poder visualitzar la tasca, el que fa perdre la
columna amb el nom. Amb tot, si poses el cursor a sobre, hi pots
consultar el nom i la retroacció de l'alumne:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Comprovació dels resultats" src="http://apuntstecnics.herokuapp.com/images/moodle.18.resultat.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Ara ja només queda marcar com a visible la tasca i quedarà disponible
pels nostres estudiants&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Fem públiques les notes" src="http://apuntstecnics.herokuapp.com/images/moodle.19.mostra.png" /&gt;
&lt;/div&gt;
&lt;p&gt;I ja tenim les notes consultables pels nostres alumnes!&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="util"></category></entry><entry><title>Un primer contacte amb la programació en Java</title><link href="http://apuntstecnics.herokuapp.com/un-primer-contacte-amb-la-programacio-en-java.html" rel="alternate"></link><updated>2015-02-05T16:41:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:un-primer-contacte-amb-la-programacio-en-java.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document té com a objectiu oferir l'estudiant una primera
impressió d'un programa en java tot comparant-lo amb una versió del
programa en un altre llenguatge conegut: el &lt;em&gt;C&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Per a aprofitar al màxim aquesta activitat, caldria tenir alguns
coneixements bàsics del llenguatge C (e.g. directius de
precompil·lació, funcions)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="continguts"&gt;
&lt;h2&gt;Continguts&lt;/h2&gt;
&lt;p&gt;Intenta interpretar les següents versions del mateix programa.&lt;/p&gt;
&lt;div class="section" id="versio-c"&gt;
&lt;h3&gt;Versió C&lt;/h3&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;lt;math.h&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#define PI 3.14159265358979323846264338327&lt;/span&gt;

&lt;span class="cm"&gt;/* calcula l&amp;#39;àrea d&amp;#39;un cercle a partir del seu radi */&lt;/span&gt;
&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calcula_area_cercle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;PI&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;pow&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Càlcul de l&amp;#39;àrea d&amp;#39;un cercle&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Introduïu el radi: &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;scanf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%lg&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;calcula_area_cercle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;L&amp;#39;àrea és %.16lg&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="versio-java"&gt;
&lt;h3&gt;Versió java&lt;/h3&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;CalculaRadi&lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calcula_area&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PI&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pow&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Càlcul de l&amp;#39;àrea d&amp;#39;un cercle&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Introduïu el radi: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;BufferedReader&lt;/span&gt; &lt;span class="n"&gt;reader&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BufferedReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;InputStreamReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;in&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;linia&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;reader&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;readLine&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Double&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseDouble&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;linia&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;  &lt;span class="c1"&gt;// conversió de String a double&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;calcula_area&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot; L&amp;#39;àrea és &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-preguntes-sobre-el-codi"&gt;
&lt;h3&gt;Exercici 1. Preguntes sobre el codi&lt;/h3&gt;
&lt;p&gt;Contesta les següents preguntes sobre el codi que hem vist.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Què fan aquests programes?&lt;/li&gt;
&lt;li&gt;Compara la manera en que cada llenguatge mostra un missatge a
l'usuari.&lt;/li&gt;
&lt;li&gt;Compara la manera en que cada llenguatge obté una resposta de
l'usuari.&lt;/li&gt;
&lt;li&gt;Compara la manera en que cada llenguatge defineix el bloc principal
del programa.&lt;/li&gt;
&lt;li&gt;Compara la manera en que cada llenguatge defineix una funció.&lt;/li&gt;
&lt;li&gt;Perquè la versió en Java no requereix definit la constant &lt;em&gt;PI&lt;/em&gt; i C
sí?&lt;/li&gt;
&lt;li&gt;Quin llenguatge et sembla més fàcil i quin més complex?
Argumenta-ho?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Ritual Hola Món!</title><link href="http://apuntstecnics.herokuapp.com/ritual-hola-mon.html" rel="alternate"></link><updated>2015-02-05T16:40:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:ritual-hola-mon.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document guia l'estudiant a l'edició i execució del seu primer
programa en java.&lt;/p&gt;
&lt;p&gt;Per a poder-lo seguir, cal disposar de:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;jdk&lt;/li&gt;
&lt;li&gt;editor de text&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per simplicitat, la guia pressuposa que el sistema operatiu és Ubuntu
12.04, el JDK és el JDK d'Oracle en versió 7, i l'editor el gedit.  És
perfectament possible seguir aquesta guia amb una configuració
diferent. En aquest cas, queda com exercici, l'adaptació de les passes
al sistema escollit.&lt;/p&gt;
&lt;p&gt;En cas que no es disposi del JDK, es pot considerar la guia
d'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-del-jdk.html"&gt;instal·lació del jdk&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="continguts"&gt;
&lt;h2&gt;Continguts&lt;/h2&gt;
&lt;p&gt;Passem a l'acció! Segueix les passes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;obre un terminal (ex. &amp;lt;ctrl&amp;gt;&amp;lt;alt&amp;gt;t)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;crea una carpeta on treballar i situat dins:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mkdir ~/programacio
&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ~/programacio
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;edita un fitxer anomenat &lt;tt class="docutils literal"&gt;HolaMon.java&lt;/tt&gt; (atenció a les
majúscules)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;gedit HolaMon.java &amp;amp;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;escriu al fitxer el següent contingut:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;  * Programa que saluda al món&lt;/span&gt;
&lt;span class="cm"&gt;  */&lt;/span&gt;
 &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;HolaMon&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hola Món!&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;guarda el document (ex. &amp;lt;ctrl&amp;gt;s), torna al terminal i compila escriu:&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;javac HolaMon.java
&lt;/pre&gt;&lt;/div&gt;
&lt;ol class="arabic simple" start="6"&gt;
&lt;li&gt;si apareix algun error, revisa que el text que has introduït al
fitxer contingui &lt;strong&gt;exactament&lt;/strong&gt; l'indicat. Corregeix el que calgui
i torna a compilar fins que no s'indiqui cap error.&lt;/li&gt;
&lt;li&gt;executa el teu programa&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java HolaMon
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Felicitats! Acabes de realitzar el teu primer programa en Java!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Exercici 1&lt;/strong&gt;: Preguntes sobre el ritual&lt;/p&gt;
&lt;p&gt;Contesta les següents preguntes. Potser et caldrà fer proves amb el
codi de les dues versions:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Perquè creus que pot ser tan habitual que es faci un programa
tipus &amp;quot;hola món!&amp;quot; quan entres a un nou llenguatge?&lt;/li&gt;
&lt;li&gt;Què creus que contenir l'argument args? Com es feia això en C? Què
passa si intentem fer un main() sense arguments com podíem fer a
C?&lt;/li&gt;
&lt;li&gt;Llença una hipòtesi de per què pot ser que no calgui fer quelcom
equivalent al &lt;tt class="docutils literal"&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/tt&gt; de C per poder escriure un
missatge per pantalla.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Primers exercicis en Java</title><link href="http://apuntstecnics.herokuapp.com/primers-exercicis-en-java.html" rel="alternate"></link><updated>2015-02-05T16:39:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:primers-exercicis-en-java.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document ofereix l'estudiant la possibilitat d'accedir a la
sintaxi bàsica del Java, a partir d'una sèrie d'exercicis i pistes.&lt;/p&gt;
&lt;p&gt;Pel seu seguiment es pressuposa coneixements de programació
estructurada i modular, així com de la sintaxi bàsica del llenguatge
C.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;p&gt;Considera les pistes i realitza els exercicis següents.&lt;/p&gt;
&lt;p&gt;No cal preocupar-se, de moment, del control d'errors per entrades de
tipus erroni.  Suposarem que els nostres usuaris sempre introduiran
els valors que els demanem del tipus correcte.&lt;/p&gt;
&lt;div class="section" id="pista-1-el-nom-del-fitxer"&gt;
&lt;h3&gt;Pista 1. El nom del fitxer&lt;/h3&gt;
&lt;p&gt;El fitxer que conté un programa en Java, ha d'anomenar-se exactament
igual que la classe. Així, el programa HolaMon.java tindrà la
següent estructura:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;HolaMon&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="pista-2-el-bloc-principal"&gt;
&lt;h3&gt;Pista 2. El bloc principal&lt;/h3&gt;
&lt;p&gt;la rutina main() del llenguatge C, té la seva equivalència amb&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;NomClasse&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{...}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="pista-3-escriure-per-sortida-estandard"&gt;
&lt;h3&gt;Pista 3. Escriure per sortida estàndard&lt;/h3&gt;
&lt;p&gt;A l'hora d'escriure per sortida estàndard, les següents maneres són
equivalents:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;missatge seguit de salt de línia&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;missatge seguit de salt de línia\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="pista-4-llegir-d-entrada-estandard"&gt;
&lt;h3&gt;Pista 4. Llegir d'entrada estàndard&lt;/h3&gt;
&lt;p&gt;Per llegir d'entrada estàndard, ho tenim una mica més complicat.&lt;/p&gt;
&lt;p&gt;El següent programa mostra com llegir un enter i mostrar el seu
quadrat per sortida estàndard&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;    Descr: programa que demana un número enter i mostra el seu quadrat.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Quadrat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Número: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BufferedReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;InputStreamReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;in&lt;/span&gt;&lt;span class="o"&gt;)).&lt;/span&gt;&lt;span class="na"&gt;readLine&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El valor de &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; al quadrat és &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Atenció: aquest programa no controla el cas que l'usuari escrigui
quelcom que no sigui un número enter. Prova què passa si ho fa.&lt;/p&gt;
&lt;p&gt;Si cada cop que volem llegir quelcom de l'entrada estàndard hem de fer
tot això, a banda de ser quelcom poc eficient tant respecte a l'hora
de codificar com d'executar, ens trobarem amb problemes a l'hora de
redireccionar l'entrada.&lt;/p&gt;
&lt;p&gt;Una manera, raonablement pràctica de resoldre aquest problema pot ser
crear un nou fitxer al directori on tinguem el nostre programa amb els
següents continguts:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;IOUtils&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;BufferedReader&lt;/span&gt; &lt;span class="n"&gt;br&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BufferedReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;InputStreamReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;in&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="c1"&gt;// retorna un enter llegit de entrada estàndard. -1 si error&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;llegeixInt&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;resposta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;resposta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;llegeixStr&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resposta&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="c1"&gt;// retorna un String llegit de entrada estàndard. &amp;quot;&amp;quot; si error.&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;llegeixStr&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resposta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;resposta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;br&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;readLine&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resposta&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Ara, el nostre programa anterior es pot reescriure simplement amb:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;    Descr: programa que demana un número enter i mostra el seu quadrat.&lt;/span&gt;
&lt;span class="cm"&gt;    Nota: requereix IOUtils al package per defecte.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Quadrat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Número: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;IOUtils&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;llegeixInt&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El valor de &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; al quadrat és &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="pista-5-sintaxi-similar-al-c"&gt;
&lt;h3&gt;Pista 5. Sintaxi similar al C&lt;/h3&gt;
&lt;p&gt;La sintaxi del Java està molt inspirada en el llenguatge C. Per
aquesta raó, si no saps com s'escriu alguna cosa en java, prova amb la
sintaxi de C. Si tot i així no te'n surts, és clar, et caldrà una mica
més de cerca.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-preso"&gt;
&lt;h3&gt;Exercici 1. Presó&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani a l'usuari els anys que té amb el
missatge &lt;em&gt;Quants anys té?&lt;/em&gt;. En cas que sigui major d'edat, el programa
li avisarà dient: &lt;em&gt;Atenció: Vosté pot anar a la presó!&lt;/em&gt;. En qualsevol
cas, el programa finalitzarà dient: &lt;em&gt;Aneu amb compte&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Anomena el fitxer amb el codi font &lt;em&gt;Preso.java&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Nota: en aquest cas acceptarem qualsevol valor enter com a edat vàlida.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-mesos"&gt;
&lt;h3&gt;Exercici 2. Mesos&lt;/h3&gt;
&lt;p&gt;Desenvolupeu un programa que demani un mes i un any, i escrigui el mes
anterior i el mes següent.&lt;/p&gt;
&lt;p&gt;Els missatges de petició de l'entrada seran, respectivament: &lt;em&gt;Mes?&lt;/em&gt; i &lt;em&gt;Any?&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, si l’usuari introdueix mes &lt;em&gt;9&lt;/em&gt; i any &lt;em&gt;2009&lt;/em&gt;, el resultat
serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
ant: 8/2009
seg: 10/2009
&lt;/pre&gt;
&lt;p&gt;Nota: en aquest cas, suposarem que sempre ens introduiran mesos i anys
correctes.&lt;/p&gt;
&lt;p&gt;Anomena el fitxer amb el codi font &lt;em&gt;Mesos.java&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-ordena-3"&gt;
&lt;h3&gt;Exercici 3. Ordena 3&lt;/h3&gt;
&lt;p&gt;Desenvolupeu un programa que demani tres números i
escrigui els tres números ordenats creixentment (de menor a major).&lt;/p&gt;
&lt;p&gt;L'entrada es requerirà amb els missatges &lt;em&gt;Primer?&lt;/em&gt;, &lt;em&gt;Segon?&lt;/em&gt; i
&lt;em&gt;Tercer?&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, si els números introduïts són &lt;em&gt;3&lt;/em&gt;, &lt;em&gt;4&lt;/em&gt; i &lt;em&gt;2&lt;/em&gt;, el resultat
serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
2 3 4
&lt;/pre&gt;
&lt;p&gt;Anomena el fitxer amb el codi font &lt;em&gt;Ordena3.java&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="pista-6-comparacio-de-strings"&gt;
&lt;h3&gt;Pista 6. Comparació de strings&lt;/h3&gt;
&lt;p&gt;El següent programa llegeix un string i el compara amb un altre.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;    Descr: programa que demostra la comparació de strings&lt;/span&gt;
&lt;span class="cm"&gt;    Nota: requereix IOUtils al package per defecte.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ComparaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Nom: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;IOUtils&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;llegeixStr&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Torvalds&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;    &lt;span class="c1"&gt;// compara nom amb &amp;quot;Torvalds&amp;quot;&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hey! you&amp;#39;re Linus, right?&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Nice to meet you &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-4-ascensor"&gt;
&lt;h3&gt;Exercici 4. Ascensor&lt;/h3&gt;
&lt;p&gt;Considerem un ascensor d’un edifici amb planta baixa
i dos pisos que tingui els següents botons: ‘pujar 1’, ‘pujar 2’,
‘baixar 1’ i ‘baixar 2’. L’ascensor es comporta, a partir dels botons
esmentats, segons el següent diagrama de transició d’estats:&lt;/p&gt;
&lt;div class="figure align-right"&gt;
&lt;img alt="Diagrama d'estats de l'ascensor" src="http://apuntstecnics.herokuapp.com/images/poo003.img001.ascensor.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Es demana desenvolupar un programa que simuli el funcionament d’aquest
ascensor. El programa demanarà el pis en que es troba i el botó que es
prem, i mostrarà el nou pis. En cas que el botó seleccionat a una
posició determinada de l’ascensor no correspongui amb algun dels
representats amb el diagrama d’estats, l’ascensor mostra un missatge
d'error i es queda al lloc en què estava.&lt;/p&gt;
&lt;p&gt;Els missatges de petició de l'entrada són, respectivament:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Planta? (PB: planta baixa, PP: primer pis, SP: segon pis
Botó? (P1: puja 1, P2: puja 2, B1: baixa 1, B2: baixa 2
&lt;/pre&gt;
&lt;p&gt;Mentre que la sortida s'expressarà simplement indicant la nova planta.&lt;/p&gt;
&lt;p&gt;Per exemple, si l'entrada és: &lt;tt class="docutils literal"&gt;PB&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;P1&lt;/tt&gt;, la sortida serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
PP
&lt;/pre&gt;
&lt;p&gt;En cas d'error, caldrà mostrar els següents missatges:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Planta incorrecta
Botó incorrecte
&lt;/pre&gt;
&lt;p&gt;I cal tenir present que si la planta és incorrecta, ja no se li
demanarà el botó a l'usuari.&lt;/p&gt;
&lt;p&gt;Anomena el fitxer amb el codi font &lt;em&gt;Ascensor.java&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-historic-d-edats"&gt;
&lt;h3&gt;Exercici 5. Històric d'edats&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani el nom de l’usuari, l’edat i l’any
actual. El programa escriurà l’edat que tenia l’usuari a cada any des
del seu naixement i s’acomiadarà. Per exemple, si l’entrada és&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Anna
5
2012
&lt;/pre&gt;
&lt;p&gt;El programa escriurà&lt;/p&gt;
&lt;pre class="literal-block"&gt;
El 2007 va nàixer
El 2008 tenia 1 any
El 2009 tenia 2 anys
El 2010 tenia 3 anys
El 2011 tenia 4 anys
Adéu Anna
&lt;/pre&gt;
&lt;p&gt;L'aplicació no li dirà l'edat que té l'usuàri en
l'any actual, donat que aquesta dada forma part de l'entrada. Per
exemple, si l'usuària ha nascut aquest any, simplement s'acomiadarà.&lt;/p&gt;
&lt;p&gt;Les comprovacions necessàries són: que el nom no estigui buit, que
l'edat i l'any actual siguin enters positius, i que l'any actual sigui
un valor més alt que el de l'edat.&lt;/p&gt;
&lt;p&gt;Es demanaran les dades en l'ordre indicat a l'exemple i, en quan es
detecti un error, es deixarà de demanar més dades.&lt;/p&gt;
&lt;p&gt;Els missatges de petició de dades seran:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Nom?
Edat?
Any actual?
&lt;/pre&gt;
&lt;p&gt;Els missatges d'error seran:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Nom incorrecte
Edat no pot ser negativa
Any actual no pot ser negatiu
Edat o any actual incorrectes
&lt;/pre&gt;
&lt;p&gt;Anomena el fitxer amb el codi font &lt;em&gt;Edats.java&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="pista-7-mentre"&gt;
&lt;h3&gt;Pista 7. Mentre&lt;/h3&gt;
&lt;p&gt;Considera el següent codi&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;    Descr: programa que va demanant paraules fins que l&amp;#39;indiquen &amp;quot;prou&amp;quot; i les&lt;/span&gt;
&lt;span class="cm"&gt;    mostra en majúscules&lt;/span&gt;
&lt;span class="cm"&gt;    Nota: requereix IOUtils al package per defecte.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;PosaMajuscules&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;PARAULA_FIN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;prou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// constant amb la paraula amb que acaba&lt;/span&gt;
        &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;continua&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;continua&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Mot a posar en majúscules (&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;PARAULA_FIN&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot; acaba): &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;mot&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;IOUtils&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;llegeixStr&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARAULA_FIN&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;continua&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El mot &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;mot&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; en majúscules és &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;mot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toUpperCase&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-6-l-ascensor-continu"&gt;
&lt;h3&gt;Exercici 6. L'ascensor continu&lt;/h3&gt;
&lt;p&gt;Ara, el nostre ascensor començarà a la planta baixa i anirà demanant
un botó per canviar de pis. Es comportarà pràcticament igual que la
versió anterior. Ara, és clar, ja no li cal demanar a quin pis es troba.&lt;/p&gt;
&lt;p&gt;Un cop canviat de pis (o indicat l'error) demanarà que premi un nou
botó. I així es quedarà fins que l'usuari indiqui el botó de sortida.&lt;/p&gt;
&lt;p&gt;Aquesta versió incorpora un missatge molt compacte amb el següent
aspecte:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
[xx] P1: puja 1, P2: puja 2, B1: baixa 1, B2: baixa 2, EX: surt
&lt;/pre&gt;
&lt;p&gt;On xx pot ser PB, PP o SP depenent de la planta on es trobi.&lt;/p&gt;
&lt;p&gt;Quan l'usuari demani finalitzar (amb &amp;quot;EX&amp;quot;), es mostrarà el missatge de
comiat &amp;quot;Adéu&amp;quot; i finalitzarà l'execució.&lt;/p&gt;
&lt;p&gt;Anomena el fitxer amb el codi font &lt;em&gt;AscensorContinu.java&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="pista-8-conversions-i-accessos-a-posicions-d-un-string"&gt;
&lt;h3&gt;Pista 8. Conversions i accessos a posicions d'un string&lt;/h3&gt;
&lt;p&gt;Considera el següent codi&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;    Descr.: dibuixa un triangle n cops&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;PARAULA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Triangle&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;    &lt;span class="c1"&gt;// nombre d&amp;#39;arguments passats&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Per favor, indiqueu el &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;nombre de triangles a dibuixar. Ex.&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\tjava Triangle 3&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt; &lt;span class="c1"&gt;// primer argument&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;dibuixa&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;                      &lt;span class="c1"&gt;// crida a la rutina dibuixa()&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;dibuixa&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;       &lt;span class="c1"&gt;// declara la rutina dibuixa()&lt;/span&gt;
        &lt;span class="cm"&gt;/* dibuixa el triangle número num */&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Aquest és el triangle número &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;PARAULA&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARAULA&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;charAt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt; &lt;span class="c1"&gt;// escriu el caràcter a la posició c&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-7-triangles"&gt;
&lt;h3&gt;Exercici 7. Triangles&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani un nombre enter positiu i dibuixi tants
triangles com se li indiqui.&lt;/p&gt;
&lt;p&gt;Intenta evitar la repetició de codi fent servir subrutines.&lt;/p&gt;
&lt;p&gt;Per exemple, si l'entrada és &lt;em&gt;2&lt;/em&gt;, el resultat serà&lt;/p&gt;
&lt;pre class="literal-block"&gt;
.........9.........
........898........
.......78987.......
......6789876......
.....567898765.....
....45678987654....
...3456789876543...
..234567898765432..
.12345678987654321.
0123456789876543210
.........9.........
........898........
.......78987.......
......6789876......
.....567898765.....
....45678987654....
...3456789876543...
..234567898765432..
.12345678987654321.
0123456789876543210
&lt;/pre&gt;
&lt;p&gt;El missatge de petició de l'entrada serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Nombre de triangles?
&lt;/pre&gt;
&lt;p&gt;El missatge d'error si l'entrada no és correcta serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
No puc dibuixar n triangles
&lt;/pre&gt;
&lt;p&gt;On &lt;em&gt;n&lt;/em&gt; correspon al nombre introduït.&lt;/p&gt;
&lt;p&gt;Nota: Si tens la temptació de resoldre el problema via
&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;System.out.println(&amp;quot;.........9.........&amp;quot;);&lt;/span&gt;&lt;/tt&gt; planteja't que passarà
si se't requereix que els símbols a escriure s'han de demanar a
l'usuari.&lt;/p&gt;
&lt;p&gt;Anomena el programa &lt;em&gt;Triangles.java&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Reconeixement d'elements de programació</title><link href="http://apuntstecnics.herokuapp.com/reconeixement-delements-de-programacio.html" rel="alternate"></link><updated>2015-02-05T16:38:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:reconeixement-delements-de-programacio.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document serveix d'orientació a l'estudiant del llenguatge de
programació Java per endinsar-se en la seva sintaxi tot seguint els
&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/nutsandbolts/index.html"&gt;tutorials&lt;/a&gt;
d'ajuda proporcionats pels propis dissenyadors del llenguatge.&lt;/p&gt;
&lt;p&gt;Està format per tres exercicis que requereixen la lectura de diferents
documents per a poder respondre a una sèrie de qüestions.&lt;/p&gt;
&lt;p&gt;Els documents referenciats apareixen en anglès. Es pressuposa que
l'estudiant disposa del coneixement suficient d'aquesta llengua per
realitzar els exercicis. Altrament, es recorda l'existència de
traductors automàtics. És d'esperar que aquestes eines, no sent ni de
lluny perfectes, esperonin l'estudiant a obtenir el necessari domini
de la &lt;em&gt;lingua franca&lt;/em&gt; entre els desenvolupadors d'aplicacions.
&lt;a class="footnote-reference" href="#aprenangles" id="id1"&gt;[1]&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-tipus-primitius-del-java"&gt;
&lt;h3&gt;Exercici 1. Tipus primitius del Java&lt;/h3&gt;
&lt;p&gt;Llegeix les pàgines:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://download.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html"&gt;Primitive Data Types&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://download.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html"&gt;Arrays&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A continuació, contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Fes una taula que relacioni els tipus primitius de que disposa el
Java. Inclou una petita descripció, el rang de valors i el valor
per defecte. Indica, si existeix, el corresponent amb el del
llenguatge C.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;descriu amb les teves paraules el significat de literal. Inclou
exemples teus.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;descriu amb les teves paraules com es declaren i s'accedeixen els
arrays. Compara'ls amb el que coneixies de C. A la teva comparació
inclou avantatges/inconvenients que trobes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;De les següents declaracions, indica si són vàlides i si són
recomanables, i en cas que no, el perquè&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;notes&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;notes&lt;/span&gt;&lt;span class="o"&gt;[];&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;notes&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="n"&gt;notes&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quina diferència hi ha entre declarar una variable de tipus array i crear un array? Com anava això en C?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Per a què serveix arraycopy()? Indica almenys dues raons per les quals és preferible fer servir aquesta funció en comptes de fer la còpia amb un for()&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Fes un programa que:&lt;/p&gt;
&lt;ol class="loweralpha simple"&gt;
&lt;li&gt;crei un vector amb els primers cinc anys a partir del del teu naixement&lt;/li&gt;
&lt;li&gt;fent servir arraycopy() copii del segon al quart any en un altre vector&lt;/li&gt;
&lt;li&gt;mostri els anys del segon vector en ordre invers.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-operadors-del-java"&gt;
&lt;h3&gt;Exercici 2. Operadors del Java&lt;/h3&gt;
&lt;p&gt;Llegeix les pàgines:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://download.oracle.com/javase/tutorial/java/nutsandbolts/opsummary.html"&gt;Summary of Operators&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://download.oracle.com/javase/tutorial/java/nutsandbolts/expressions.html"&gt;Expressions, Statements, and Blocks&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A continuació, contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;indica els operadors que ofereix el Java en format de taula.
Afegeix una descripció amb les teves paraules i compara'ls amb els
que coneixies de C.&lt;/li&gt;
&lt;li&gt;descriu l'ús recomanat dels parèntesis a les expressions de Java&lt;/li&gt;
&lt;li&gt;descriu què és un statement. Prova de trobar una traducció al teu idioma.&lt;/li&gt;
&lt;li&gt;descriu què és un bloc. Compara aquest concepte amb el que coneixes de C.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-control-de-flux-d-execucio"&gt;
&lt;h3&gt;Exercici 3. Control de flux d'execució&lt;/h3&gt;
&lt;p&gt;Llegeix les pàgines de la secció següent:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://download.oracle.com/javase/tutorial/java/nutsandbolts/flow.html"&gt;Control Flow Statements&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A continuació, contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;descriu el funcionament de les estructures condicionals del java
(if, switch) Compara-les amb les del llenguatge C&lt;/li&gt;
&lt;li&gt;descriu el funcionament de les estructures mentre (while)
Compara-les amb les del llenguatge C 3.  descriu el funcionament
de les estructures per (for) Compara-les amb les del llenguatge C.
Fes especial menció del que a la pàgina indicada anomenen
&amp;quot;Enhanced for&amp;quot; o per millorat. L'has vist mai a algun altre
llenguatge? A quin i amb quina notació?&lt;/li&gt;
&lt;/ol&gt;
&lt;hr class="docutils" /&gt;
&lt;table class="docutils footnote" frame="void" id="aprenangles" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En altres paraules, si encara no ets capaç de llegir
anglès tècnic, ja pots posar-te les piles!&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Encapsulació</title><link href="http://apuntstecnics.herokuapp.com/encapsulacio.html" rel="alternate"></link><updated>2015-02-05T16:37:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:encapsulacio.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document és una introducció a un dels conceptes fonamentals de
la programació orientada a objectes: l'encapsulació.&lt;/p&gt;
&lt;p&gt;Pressuposa que l'estudiant té coneixements bàsics de programació en C
i, desitjablement, del concepte de TAD. Considera &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/tipus-abstractes-de-dades.html"&gt;aquesta introducció
al concepte de TAD&lt;/a&gt; (des del
llenguatge C)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="tads-classes-i-encapsulacio"&gt;
&lt;h2&gt;TADs, classes i Encapsulació&lt;/h2&gt;
&lt;p&gt;Llegim a la definició de &lt;a class="reference external" href="http://ca.wikipedia.org/wiki/Tipus_abstracte_de_dades"&gt;TAD de la vikipèdia&lt;/a&gt; :&lt;/p&gt;
&lt;blockquote&gt;
En informàtica, un tipus abstracte de dades (TAD) és una
especificació d'un conjunt de dades i d'un conjunt
d'operacions que poden ser executades sobre el conjunt de
dades. Com a tipus de dades diem que és abstracte en el sentit
que és independent de les possibles implementacions.&lt;/blockquote&gt;
&lt;p&gt;De l'article &lt;a class="reference external" href="http://ca.wikipedia.org/wiki/Classe_%28inform%C3%A0tica%29"&gt;Classe de la viquipèdia&lt;/a&gt; extraiem la següent definició de classe:&lt;/p&gt;
&lt;blockquote&gt;
En programació orientada a objectes, una classe és una construcció
d'un llenguatge de programació usada per agrupar camps relacionats
i mètodes.&lt;/blockquote&gt;
&lt;p&gt;De l'article &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29"&gt;Encapsulation de la Wikipedia&lt;/a&gt; transcrivim:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In a programming language, encapsulation is used to refer to one
of two related but distinct notions, and sometimes to the
combination thereof:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;A language mechanism for restricting access to some of the
object's components.&lt;/li&gt;
&lt;li&gt;A language construct that facilitates the bundling of data with
the methods (or other functions) operating on that data.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;És a dir, per una part tenim el concepte de TAD que ens permet
especificar unes dades i les funcions que les manipulen d'una manera
independent de les possibles implementacions. Per una altra bada,
tenim el concepte de classe que, en POO, ens permet agrupar camps
(dades) i mètodes (funcions) relacionats entre ells. Finalment
disposem del concepte d'&lt;em&gt;encapsulació&lt;/em&gt; que ens parla de mecanismes per
restringir l'accés a alguns elements i facilitar l'agrupació de dades
amb les funcions que operen amb aquestes dades.&lt;/p&gt;
&lt;p&gt;És possible que pugui semblar-te que tot plegat, aquests conceptes
estan parlant del mateix o, si més no, de quelcom molt relacionat. A
veure si amb un petit exemple podem afegir-hi una mica de sentit.&lt;/p&gt;
&lt;div class="section" id="el-triangle-en-c"&gt;
&lt;h3&gt;El Triangle en C&lt;/h3&gt;
&lt;p&gt;Considera el següent programa escrit en C:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer triangle.h&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Definició del tipus Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="cp"&gt;#ifndef TRIANGLE_H&lt;/span&gt;
&lt;span class="cp"&gt;#define TRIANGLE_H&lt;/span&gt;

&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* Assigna valors als atributs d&amp;#39;un triangle */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* Calcula l&amp;#39;àrea d&amp;#39;un triangle. Pressuposa el triangle inicialitzat. */&lt;/span&gt;
&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cp"&gt;#endif&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer triangle.c&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Definició del tipus Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="cp"&gt;#include &amp;quot;triangle.h&amp;quot;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer usatriangle.c&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Programa que calcula l&amp;#39;àrea d&amp;#39;un triangle de base 5 i altura 3&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;quot;triangle.h&amp;quot;&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%g&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Aquest exemple mostra una possible implementació del TAD Triangle.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-observa-el-tad-triangle"&gt;
&lt;h3&gt;Exercici 1. Observa el TAD Triangle&lt;/h3&gt;
&lt;p&gt;Contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Per a què cal a &lt;em&gt;usatriangle.c&lt;/em&gt; fer un include de &lt;em&gt;triangle.h&lt;/em&gt; ?&lt;/li&gt;
&lt;li&gt;On es defineix l'estructura i el tipus &lt;em&gt;Triangle&lt;/em&gt; ?&lt;/li&gt;
&lt;li&gt;&lt;em&gt;usatriangle.c&lt;/em&gt; necessita saber, tal i com està implementat, quina
és l'estructura d'un Triangle?&lt;/li&gt;
&lt;li&gt;En comptes de fer servir &lt;em&gt;inicialitza_triangle()&lt;/em&gt;,
&lt;em&gt;usatriangle.c&lt;/em&gt; podria inicialitzar els valors del triangle
d'alguna altra manera? Com?&lt;/li&gt;
&lt;li&gt;Si canviem la implementació del Triangle de manera
que guardem els valors base i altura en un array de dos
double, indica què caldrà modificar perquè &lt;em&gt;usatriangle.c&lt;/em&gt; pugui
continuar funcionant. El què és més important, quin codi &lt;strong&gt;no&lt;/strong&gt; és
necessari modificar? Perquè creus que això pot ser important?&lt;/li&gt;
&lt;li&gt;En cas que haguérem canviat la implementació de &lt;em&gt;usatriangle.c&lt;/em&gt;
segons la resposta de la pregunta 4, en què hauria canviat la teva
resposta de la pregunta 5? Quin consell donaries als usuaris del
teu TAD Triangle tenint això en compte?&lt;/li&gt;
&lt;li&gt;Perquè creus que cal que &lt;em&gt;inicialitza_triangle()&lt;/em&gt; i
&lt;em&gt;calcula_area_triangle()&lt;/em&gt; indiquin en el seu nom la paraula
&lt;em&gt;triangle&lt;/em&gt;? Pista: què passaria si tinguéssim a l'hora un Triangle
i un Cercle amb similars funcionalitats?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="el-triangle-en-java"&gt;
&lt;h3&gt;El Triangle en Java&lt;/h3&gt;
&lt;p&gt;Considera ara el següent codi que correspon, en certa mesura, al TAD
Triangle vist anteriorment. Ara, en notació Java, direm la classe
Triangle.&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer &lt;em&gt;Triangle.java&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Implementació de la classe Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;base&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/* calcula i retorna l&amp;#39;àrea del triangle */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calculaArea&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer &lt;em&gt;UsaTriangle.java&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/** Classe que calcula l&amp;#39;àrea d&amp;#39;un triangle de base 5 i altura 3 */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaTriangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;calculaArea&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-2-observa-la-classe-triangle"&gt;
&lt;h3&gt;Exercici 2. Observa la classe Triangle&lt;/h3&gt;
&lt;p&gt;Contesta les següents preguntes sobre la classe Triangle.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;La proposta en Java té només dos fitxers en comptes dels tres de C.
Aventura una explicació.&lt;/li&gt;
&lt;li&gt;Quin creus que és l'equivalent de &lt;em&gt;inicialitza_triangle()&lt;/em&gt; de C en
la versió Java? Quines diferències hi trobes? Considera tant la
definició com l'ús.&lt;/li&gt;
&lt;li&gt;L'equivalent de &lt;em&gt;calcula_area_triangle()&lt;/em&gt; sembla molt més directe
en Java, oi? Descriu, però, les diferències que hi trobes tant en
la definició com en l'ús&lt;/li&gt;
&lt;li&gt;On penses que (dins &lt;em&gt;UsaTriangle.java&lt;/em&gt;) se li passa a
&lt;em&gt;calculaArea()&lt;/em&gt; el triangle del que ha de calcular l'àrea?&lt;/li&gt;
&lt;li&gt;Perquè creus que en la versió Java, es diu &lt;em&gt;calculaArea()&lt;/em&gt; i no
&lt;em&gt;calculaAreaTriangle()&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Aventura una raó per la qual &lt;em&gt;Triangle(double, double)&lt;/em&gt; fa servir
&lt;em&gt;this.base = base&lt;/em&gt; tot tenint en compte que &lt;em&gt;calculaArea()&lt;/em&gt;
accedeix directament als atributs sense indicar &lt;em&gt;this&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Prova el següent canvi a &lt;em&gt;UsaTriangle.java&lt;/em&gt;. Afegeix, després de
declarar &lt;em&gt;t&lt;/em&gt; una línia amb &lt;em&gt;t.base = 2;&lt;/em&gt; que, si es comportés com a
C, hauria de canviar el valor de l'atribut &lt;em&gt;base&lt;/em&gt; del triangle. Què
passa? Aventura una explicació pel missatge que t'apareix. Pista: La
clau està en &lt;em&gt;private&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Intenta explicar el concepte d'&lt;em&gt;encapsulació&lt;/em&gt; fent servir els
exemples del TAD Triangle i la classe Triangle. És a dir, descriu
quins mecanismes creus que ofereix Java per a permetre agrupar
dades i funcions, i a l'hora protegir l'accés directe a les dades.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Classes i objectes</title><link href="http://apuntstecnics.herokuapp.com/classes-i-objectes.html" rel="alternate"></link><updated>2015-02-05T16:36:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:classes-i-objectes.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document introdueix l'estudiant de programació orientada a
objectes als conceptes fonamentals de &lt;em&gt;classe&lt;/em&gt; i &lt;em&gt;objecte&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Aquesta introducció es realitza de manera pràctica, guiada amb
exercicis que progressivament incorporen diferents perspectives dels
conceptes a tractar.&lt;/p&gt;
&lt;p&gt;Per al correcte seguiment d'aquests materials, es pressuposa
coneixement bàsic de la sintaxi de les estructures bàsiques del
llenguatge Java, així com de certa experiència en programació
elemental en el llenguatge C. Bàsicament, declaració de variables,
assignació, estructures condicionals i iteratives, declaració i crida
de funcions, i E/S estàndard.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="hola-gat-renat"&gt;
&lt;h2&gt;Hola gat Renat!&lt;/h2&gt;
&lt;p&gt;Ja va sent hora que coneguem un del principals personatges d'aquests
materials.&lt;/p&gt;
&lt;div class="section" id="exercici-1-el-gat-renat-te-set-vides"&gt;
&lt;h3&gt;Exercici 1. El gat Renat té set vides&lt;/h3&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// vides disponibles del gat Renat&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;           &lt;span class="c1"&gt;// declarem la referència al gat&lt;/span&gt;
        &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;   &lt;span class="c1"&gt;// creem la instància del gat Renat.&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al gat Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Copia i executa el codi i contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Quin ha de ser el nom del fitxer que contingui aquest codi perquè
funcioni?&lt;/li&gt;
&lt;li&gt;A quina línia està declarada la variable &lt;tt class="docutils literal"&gt;renat&lt;/tt&gt; que apareix a la
línia 6?&lt;/li&gt;
&lt;li&gt;A quina línia s'assigna el valor que es mostra per pantalla?&lt;/li&gt;
&lt;li&gt;Quin valor apareix si a aquesta línia no s'assigna cap valor?&lt;/li&gt;
&lt;li&gt;Què passaria sí la línia 5 no hi fos? Perquè creus?&lt;/li&gt;
&lt;li&gt;Perquè creus que el comentari de la línia 4 parla de &lt;em&gt;referència&lt;/em&gt;?
Recordes quelcom equivalent en C? Què?&lt;/li&gt;
&lt;li&gt;La línia 5 parla d'&lt;em&gt;instància&lt;/em&gt;. En aquest context, una instància es
pot entendre com el contingut real al que fa referència la variable
&lt;tt class="docutils literal"&gt;renat&lt;/tt&gt;. Es diu que la instància es &lt;em&gt;construeix&lt;/em&gt; amb l'operador
&lt;tt class="docutils literal"&gt;new&lt;/tt&gt; i això implica bàsicament que es reserva espai de memòria
per a allotjar tota la informació relativa a la instància. Què et
sona que pugui comparar-se a això en el llenguatge C?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;El resultat de l'exercici consistirà en el fitxer amb el codi i, al
final d'aquest, en forma de comentaris, cada pregunta amb la seva
resposta.&lt;/p&gt;
&lt;p&gt;No oblidis posar el nom de l'autor/l'autora (el teu és clar), la data
i una petita descripció del contingut, al començament del fitxer.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-el-gat-renat-te-un-accident"&gt;
&lt;h3&gt;Exercici 2. El gat Renat té un accident&lt;/h3&gt;
&lt;p&gt;Podem canviar el nombre de vides del gat Renat simplement afegint les
següents línies al final del main:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;           &lt;span class="c1"&gt;// declarem l&amp;#39;objecte (la referència) al gat&lt;/span&gt;
    &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;   &lt;span class="c1"&gt;// creem la instància del gat Renat.&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Abans el gat Renat tenia &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;  &lt;span class="c1"&gt;// Renat ha tingut un accident&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Ara el gat Renat té &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Modifica la classe GatRenat amb els canvis, executa el codi i contesta
les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Com podem consultar (llegir, obtenir) el valor d'una propietat de
la instància?&lt;/li&gt;
&lt;li&gt;Com podem canviar (escriure, assignar) el valor d'una propietat de
la instància?&lt;/li&gt;
&lt;li&gt;És possible indicar que el gat Renat té -12 vides? Com? És quelcom
desitjable que pugui passar? En cas que es pugui, com ho podries
evitar fent servir els teus coneixements amb el llenguatge C?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-hi-ha-dos-gats-renat"&gt;
&lt;h3&gt;Exercici 3. Hi ha dos gats Renat?&lt;/h3&gt;
&lt;p&gt;Considera ara el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// vides disponibles del gat Renat&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;renat_I&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;               &lt;span class="c1"&gt;// crea un primer gat Renat&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat I té  &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat_II&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;     &lt;span class="c1"&gt;// crea un segon gat Renat!&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat II té &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_II&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;++;&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat I té  &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat II té &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_II&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;renat_II&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// atenció: la instància de Renat II es perd!&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat I té  &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat II té &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_II&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;++;&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat I té  &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat II té &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_II&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Copia i executa el codi i contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Quanta memòria ocupa, com a mínim, una instància de GatRenat?&lt;/li&gt;
&lt;li&gt;Quantes instàncies hi ha de GatRenat tot just executat el codi fins la línia 5 (inclosa)?&lt;/li&gt;
&lt;li&gt;I fins la línia 6?&lt;/li&gt;
&lt;li&gt;I fins la línia 9?&lt;/li&gt;
&lt;li&gt;Perquè les línies 7 i 10 mostren les mateixes vides pels gats Renat
I i Renat II?&lt;/li&gt;
&lt;li&gt;Perquè les línies 13 i 14 mostren diferent nombre de vides pels
gats Renat I i Renat II?&lt;/li&gt;
&lt;li&gt;Què creus que vol dir el comentari de la línia 16?&lt;/li&gt;
&lt;li&gt;Perquè les línies 17 i 18 mostren les mateixes vides pels gats
Renat I i Renat II?&lt;/li&gt;
&lt;li&gt;Perquè les línies 21 i 22 mostren les mateixes vides pels gats
Renat I i Renat II malgrat la instrucció de la línia 20?&lt;/li&gt;
&lt;li&gt;Quantes instàncies hi ha quan s'executa la l'inia 20? Perquè?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-renat-tambe-des-de-fora"&gt;
&lt;h3&gt;Exercici 4. Renat també des de fora&lt;/h3&gt;
&lt;p&gt;Considera ara el següent codi que apareix a un altre fitxer:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaGatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al gat Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Copia el codi en un fitxer al mateix directori que el de l'exercici
anterior i executa'l.&lt;/p&gt;
&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Quin és el nom del fitxer on està definit el punt d'entrada &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; d'aquest programa?&lt;/li&gt;
&lt;li&gt;Ara tenim dos fitxers amb &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;. Com pot saber Java quin és el
&lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; a executar?&lt;/li&gt;
&lt;li&gt;A quin fitxer està definida la classe del gat Renat?&lt;/li&gt;
&lt;li&gt;Quants programes es podrien construir fent ús de la definició del gat Renat?&lt;/li&gt;
&lt;li&gt;Què passaria si el fitxer amb el codi anterior i el que conté la
definició de la classe del Renat estiguessin en directoris
diferents? (prova-ho!)&lt;/li&gt;
&lt;li&gt;Elimina el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; de GatRenat. Continua funcionant UsaGatRenat?
Què ha deixat de poder-se executar?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Per a aquest, com potser ja has imaginat, caldrà lliurar els dos
fitxers. Fes servir la utilitat tar per a agrupar-los.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-renat-te-estat"&gt;
&lt;h3&gt;Exercici 5. Renat té estat&lt;/h3&gt;
&lt;p&gt;El gat Renat pot estar dret, assegut o estirat. Modifica la definició
de la seva classe perquè pugui guardar aquesta informació, fent que
inicialment estigui estirat.&lt;/p&gt;
&lt;p&gt;Crea un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; dins de la definició de la classe, que instanciï un
gat Renat, mostri el nombre de vides i l'estat per defecte, canviï
l'estat a assegut i torni a mostrar el nou estat.&lt;/p&gt;
&lt;p&gt;Crea un altre main() fora de la definició de la classe, que instanciï
un gat Renat, mostri el nombre de vides i l'estat per defecte, canviï
l'estat a dret i torni a mostrar el nou estat.&lt;/p&gt;
&lt;p&gt;Pista: el tipus de dades per codificar l'estat podria ser &lt;tt class="docutils literal"&gt;String&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-el-renat-te-sempre-un-nombre-de-vides-correcte"&gt;
&lt;h3&gt;Exercici 6. El Renat té sempre un nombre de vides correcte!&lt;/h3&gt;
&lt;p&gt;Ja hem comentat abans que deixar una propietat pública perquè tothom pugui modificar-la pot portar a problemes. Per exemple, al gat Renat li podem posar impunement -15 vides.&lt;/p&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// vides disponibles del gat Renat&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;  &lt;span class="c1"&gt;// mètode que retorna el nombre de vides&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// modifica el nombre de vides del gat si el paràmetre vides conté un valor vàlid&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// de moment passem per alt aquest &amp;quot;this&amp;quot;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Què passa si intentes executar el següent codi? Perquè creus?&lt;/li&gt;
&lt;/ol&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaGatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al gat Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;ol class="arabic simple" start="2"&gt;
&lt;li&gt;Què s'està declarant a la línia 3? Així, que pot voler dir &lt;em&gt;mètode&lt;/em&gt;
en notació POO?&lt;/li&gt;
&lt;li&gt;Indica quina sortida genera el següent &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; i explica perquè
és aquesta?&lt;/li&gt;
&lt;/ol&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;   &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
       &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
       &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al gat Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
       &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(-&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
       &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al gat Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
       &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
       &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al gat Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
   &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;ol class="arabic simple" start="4"&gt;
&lt;li&gt;Sense modificar la classe GatRenat, és possible aconseguir que una
instància de GatRenat pugui tenir un nombre de vides negatiu?
Perquè o Com?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-l-estat-del-renat-es-sempre-bo"&gt;
&lt;h3&gt;Exercici 7. L'estat del Renat és sempre bo!&lt;/h3&gt;
&lt;p&gt;Crea els mètodes &lt;em&gt;setters&lt;/em&gt; i &lt;em&gt;getters&lt;/em&gt; necessaris per garantir que
l'estat del Renat sigui sempre correcte, a l'hora que pugui ser
canviat.&lt;/p&gt;
&lt;p&gt;Crea un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que demostri el funcionament dels nous mètodes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-8-com-esta-renat"&gt;
&lt;h3&gt;Exercici 8. Com està Renat?&lt;/h3&gt;
&lt;p&gt;De vegades amb els &lt;em&gt;accessors&lt;/em&gt; (mètodes &lt;em&gt;getters&lt;/em&gt; i &lt;em&gt;setters&lt;/em&gt;) no
resulta pràctic treballar. Així, cal afegir nous mètodes que permetin
un ús més còmode.&lt;/p&gt;
&lt;p&gt;Afegeix al repertori de mètodes del Renat els següents:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean estaViu()&lt;/tt&gt; // cert si encara li queda alguna vida&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean estaDret()&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;boolean estaAssegut()&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;boolean estaEstirat()&lt;/tt&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Crea un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que demostri el funcionament dels nous mètodes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-9-el-gat-renat-esta-ensinistrat"&gt;
&lt;h3&gt;Exercici 9. El gat Renat està ensinistrat!&lt;/h3&gt;
&lt;p&gt;Una de les gràcies de la POO és que podem tractar peces de codi com si
tinguessin una mena de personalitat pròpia. D'això s'en diu de vegades
com la metàfora de la POO. Així, podem imaginar que els objectes ens
realitzen serveis o que els podem donar ordres. Ho visualitzarem amb
el nostre pacient amic Renat.&lt;/p&gt;
&lt;p&gt;Afegeix tres nous mètodes: &lt;tt class="docutils literal"&gt;void aixecat()&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;void seu()&lt;/tt&gt;, i
&lt;tt class="docutils literal"&gt;void estirat()&lt;/tt&gt; de manera que quan vulguem, per exemple, que Renat
s'aixequi simplement li diguem  &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;renat.aixecat();&lt;/span&gt;&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Quan s'executa l'acció, Renat ens dirà el que fa en forma de missatge
per sortida estàndard. Així, la instrucció anterior faria generar per
pantalla el missatge: &lt;tt class="docutils literal"&gt;m'aixeco&lt;/tt&gt;. En cas, però, que ja estigui
en l'estat que se li demana, no mostra cap missatge.&lt;/p&gt;
&lt;p&gt;Crea un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que demostri el funcionament dels nous mètodes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-protegim-encara-mes-l-estat-del-renat"&gt;
&lt;h3&gt;Exercici 10. Protegim encara més l'estat del Renat&lt;/h3&gt;
&lt;p&gt;El fet que l'estat del gat estigui codificat amb un String, no deixa
de ser una incomoditat. Hom es pot equivocar teclejant i la detecció
no és massa senzilla. Has de fer un munt de comprovacions.&lt;/p&gt;
&lt;p&gt;Cerca per la web el concepte de enum en java i tracta de millorar la
definició del Renat creant una enumeració anomenada GatEstat. Afegeix
els següents mètodes&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;void setEstat(String)&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Assigna l'estat a partir d'un String. Si el string no es correspon
amb un estat vàlid, no canvia res. Aquest mètode és pràcticament el
que ja teníem.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;void setEstat(GatEstat)&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Assigna l'estat a partir d'un GatEstat. Sí, té el mateix nom que la
funció anterior. Cerca method overloading o sobrecàrrega de
mètodes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;String getEstatComString()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Retorna l'estat del gat en forma de String&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;GatEstat getEstat()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Retorna l'estat del gat com a GatEstat. Fixa't que ara no podem
posar-li el mateix nom que a l'anterior&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;És probable que et calgui realitzar algun altre canvi en el codi de
mètodes existents. Prova de realitzar-los sense modificar-los la
signatura.&lt;/p&gt;
&lt;p&gt;Perquè creus que el codi de &lt;tt class="docutils literal"&gt;setEstat()&lt;/tt&gt; es tan diferent en
complexitat depenent del tipus paràmetre que rep? Afegeix aquest
comentari al codi del mètode més senzill. Inclou als comentaris una
descripció amb les teves paraules.&lt;/p&gt;
&lt;p&gt;Executa el codi amb un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; del problema anterior. Funciona
sense haver de modificar res? Perquè creus que és així? Quin avantatge
hi trobes? Crea un nou &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; ampliant l'anterior que demostri el
funcionament dels nous mètodes. Afegeix-hi les teves reflexions.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-11-el-gat-renat-sap-parlar-i-callar"&gt;
&lt;h3&gt;Exercici 11. El gat Renat sap parlar i callar&lt;/h3&gt;
&lt;p&gt;De vegades ens pot interessar que Renat &lt;strong&gt;no&lt;/strong&gt; indiqui el que està
fent quan li donem una ordre de canvi d'estat amb els mètodes
&lt;tt class="docutils literal"&gt;aixecat()&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;seu()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;estirat()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Afegeix els següents mètodes a Renat:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;void calla()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Indica a Renat que deixi de dir el que fa. Si ja estava callat, ho
continua estant.&lt;/p&gt;
&lt;p&gt;A partir d'aquest moment, els missatges de moviment (ex.
&amp;quot;m'aixeco&amp;quot;) queden reemplaçats per &amp;quot;...&amp;quot;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;void parla()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Indica a Renat que digui el que fa. És el comportament per defecte.
Si ja estava parlant, ho continua fent.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;boolean potParlar()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Retorna cert quan el Renat pot parlar i fals altrament.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;void miola()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Escriu el missatge &lt;tt class="docutils literal"&gt;MEEEEEEU&lt;/tt&gt; si pot parlar, altrament escriurà &lt;tt class="docutils literal"&gt;...&lt;/tt&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Modifica UsaGatRenat perquè demostri el funcionament d'aquests nous
mètodes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-12-que-he-apres"&gt;
&lt;h3&gt;Exercici 12. Què he aprés?&lt;/h3&gt;
&lt;p&gt;Fes un repàs dels exercicis anteriors. Indica exercici a exercici què
has aprés de nou en fer-lo, o bé quins són els conceptes que
introdueix l'exercici, si ja els coneixies anteriorment. Procura ser
molt concret. Si et cal, ajuda't de (nous) exemples.&lt;/p&gt;
&lt;p&gt;En el cas que no hagis entès algun dels exercicis... bé, aquest cas no
es pot donar ja que, abans de fer aquest exercici t'ajudaràs de les
diferents fonts de suport que tens al teu abast (incloent, és clar,
consultes al teu docent) per arribar a entendre'l.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Procedural vs OO</title><link href="http://apuntstecnics.herokuapp.com/procedural-vs-oo.html" rel="alternate"></link><updated>2015-02-05T16:35:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:procedural-vs-oo.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Els paradigmes de programació modular (procedural) i orientada  a
objectes presenten característiques pròpies. De vegades costa de
trobar equivalència d'un concepte d'un paradigma (normalment POO) a
l'altre.&lt;/p&gt;
&lt;p&gt;Sovint els programadors aprenem a programar des de la
programació procedural, per després &lt;em&gt;desembarcar&lt;/em&gt; a la POO.&lt;/p&gt;
&lt;p&gt;Aquest document ofereix una introducció a la terminologia de la
programació orientada a objectes a partir de la de la programació
estructurada i modular.&lt;/p&gt;
&lt;p&gt;Es pressuposa coneixements dels conceptes bàsics de programació
estructurada i modular, de programació en llenguatge C i unes primeres
nocions de sintaxi pròpia de java.&lt;/p&gt;
&lt;p&gt;Per poder realitzar els exercicis d'aquest document caldrà disposar
d'un compilador de C (per exemple la versió 4.6.x de gcc) i un jdk
(per exemple la versió 1.7.x d'Oracle)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="comparacio-dels-dos-paradigmes"&gt;
&lt;h2&gt;Comparació dels dos paradigmes&lt;/h2&gt;
&lt;p&gt;Quan volem desenvolupar un programa amb el paradigma procedural,
normalment ens preocupem de decidir:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;quina és la informació d'entrada&lt;/li&gt;
&lt;li&gt;què hem de fer amb aquesta informació&lt;/li&gt;
&lt;li&gt;quina és la sortida que s'espera&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A partir d'aquesta informació definim una sèrie de variables on
allotjar la informació d'entrada i de sortida, i on deixar resultats
intermedis. A més a més, definim una sèrie de procediments
(subrutines, accions, funcions) que manipulen aquestes variables fins
a obtenir els valors de sortida esperats.&lt;/p&gt;
&lt;div class="section" id="tads"&gt;
&lt;h3&gt;TADs&lt;/h3&gt;
&lt;p&gt;Amb el temps, anem veient que algunes dades i procediments associats a
aquestes, es van repetint en diferents programes. Per exemple, sovint
ens trobem amb la necessitat de manipular diferents aspectes de les
&lt;em&gt;dates&lt;/em&gt; tot i que en alguns programes fem servir només per calcular
edats, mentre que en d'altres en fem servir càlculs de distància en el
temps. Així, implementem el concepte de tipus abstracte de dades (TAD)
on ajuntem una representació de les dades amb els seus procediments
associats.&lt;/p&gt;
&lt;p&gt;Considerem, per exemple, el següent TAD escrit en C:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer triangle.h&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Definició del TAD Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="cp"&gt;#ifndef TRIANGLE_H&lt;/span&gt;
&lt;span class="cp"&gt;#define TRIANGLE_H&lt;/span&gt;

&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* Assigna valors als atributs d&amp;#39;un triangle */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* Calcula l&amp;#39;àrea d&amp;#39;un triangle. Pressuposa el triangle inicialitzat. */&lt;/span&gt;
&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cp"&gt;#endif&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer triangle.c&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Implementació del TAD Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="cp"&gt;#include &amp;quot;triangle.h&amp;quot;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Amb aquesta implementació del TAD Triangle, podríem fer servir
triangles en diferents programes. Es pot considerar &lt;em&gt;abstracte&lt;/em&gt; perquè
els programes que el facin servir poden utilitzar les funcions del TAD
sense necessitat de conèixer la definició de les dades. Així, el TAD
podria ser modificat en un futur, afegint-hi noves funcionalitats (ex.
&lt;tt class="docutils literal"&gt;double calcula_perimetre_triangle(Triangle t)&lt;/tt&gt;) o bé canviar la
representació de les dades a un format que es pugui trobar més adequat
com ara un array de dos &lt;tt class="docutils literal"&gt;double&lt;/tt&gt; &lt;a class="footnote-reference" href="#arrayadequat" id="id1"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="classes"&gt;
&lt;h3&gt;Classes&lt;/h3&gt;
&lt;p&gt;En una primera aproximació, podríem entendre la programació
orientada a objectes com una mena d'&lt;em&gt;evolució&lt;/em&gt; dels TADs.&lt;/p&gt;
&lt;p&gt;En notació POO, un TAD seria equiparable a una &lt;em&gt;classe&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Les classes agrupen dades i procediments que, en notació POO es
coneixen com a &lt;em&gt;propietats&lt;/em&gt; i &lt;em&gt;mètodes&lt;/em&gt; respectivament. Ens referirem
a les propietats i mètodes d'una classe com a &lt;em&gt;membres&lt;/em&gt; de la classe.&lt;/p&gt;
&lt;p&gt;L'exemple del TAD Triangle, el traduïriem a Java, per exemple amb:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Implementació de la classe Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;base&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/* calcula i retorna l&amp;#39;àrea del triangle */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calculaArea&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En aquesta implementació veiem que tant la definició de les dades (el
&lt;tt class="docutils literal"&gt;struct&lt;/tt&gt; de C) com els procediments, apareixen en el mateix bloc de
codi (entre les claus que segueixen a &lt;tt class="docutils literal"&gt;public class Triangle&lt;/tt&gt;)&lt;/p&gt;
&lt;p&gt;La paraula clau &lt;tt class="docutils literal"&gt;class&lt;/tt&gt; de la línia 5, indica que el que ve a
continuació és el nom de la classe que s'està definint.&lt;/p&gt;
&lt;p&gt;Les línies 6 i 7 declaren les &lt;em&gt;propietats&lt;/em&gt; base i altura, metre que
els blocs iniciats a les línies 9 i 15 defineixen els mètodes
associats a la classe Triangle.&lt;/p&gt;
&lt;p&gt;Acompanyant a la definició de la classe i dels seus membres, veiem que
apareixen &lt;tt class="docutils literal"&gt;public&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;private&lt;/tt&gt;. Es tracta d'uns modificadors que
en Java permeten definir l'accessibilitat a aquesta classe i als seus
membres. Pel que respecta a aquest document introductori, &lt;em&gt;public&lt;/em&gt;
indica que la classe o el membre pot ser accedit per tothom, mentre
que &lt;em&gt;private&lt;/em&gt; limita l'accés a només el bloc on estigui definit el
membre &lt;a class="footnote-reference" href="#modificadorsdacces" id="id2"&gt;[2]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;El conjunt membres públics d'una classe formen el que es coneix com a
&lt;em&gt;interfície&lt;/em&gt; de la classe. Mentre es mantingui la mateixa interfície,
o com a molt, s'ampliï amb nous membres, els programes que fan servir
la classe han de poder continuar funcionant sense canvis: potser el
benefici més important de l'encapsulació.&lt;/p&gt;
&lt;p&gt;També cal esmentar que el mètode que es defineix a la línia 9 és una
mica especial. Per començar, no retorna cap tipus (ni tant sols
&lt;tt class="docutils literal"&gt;void&lt;/tt&gt;) i té el mateix nom de la classe. A aquests mètodes se'ls
anomena &lt;em&gt;constructors&lt;/em&gt; i tenen unes característiques especials que
queden fora dels objectius d'aquest text. &lt;a class="footnote-reference" href="#constructors" id="id3"&gt;[3]&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="objectes-instancies-i-referencies"&gt;
&lt;h3&gt;Objectes, instàncies i referències&lt;/h3&gt;
&lt;p&gt;Disposant de la definició d'un TAD, a l'igual que amb la definició
d'una classe, en realitat no disposem de cap dada d'aquest
tipus/classe. Per a aconseguir una dada d'aquest tipus/classe, ens
caldrà crear-la.&lt;/p&gt;
&lt;p&gt;En C, ho fem simplement dient:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Amb aquesta instrucció, el compilador reserva l'espai requerit per
allotjar tota la informació relativa a un triangle. Podem anomenar a
aquest espai com &lt;em&gt;instància&lt;/em&gt; del tipus triangle, i des del nostre
programa ens referirem amb el nom &lt;em&gt;t&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Aquest espai, donat que ha estat reservat pel propi compilador, serà
retornat automàticament en finalitzar el bloc on està definida.&lt;/p&gt;
&lt;p&gt;Per inicialitzar aquesta instància, si volem respectar el TAD, farem
servir la funció &lt;tt class="docutils literal"&gt;inicialitza_triangle()&lt;/tt&gt;, per exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En java, aquesta &lt;em&gt;instanciació&lt;/em&gt; es realitzaria mitjançant:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;La primera línia &lt;strong&gt;no&lt;/strong&gt; instància. Només declara una variable (o
referència) a una instància (també coneguda com a &lt;em&gt;objecte&lt;/em&gt;) de tipus
Triangle. Fins que no s'executa la segona línia, no es reserva espai
per la nova instància.&lt;/p&gt;
&lt;p&gt;Java, però, ens ofereix la possibilitat de compactar totes dues passes
(declaració i instanciació) en una sola línia:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En tot cas, és molt important tenir clar que aquesta instrucció es
composa de dues passes.&lt;/p&gt;
&lt;p&gt;A Java, com a molts altres llenguatges orientats a objectes, tots els
objectes es creen de manera dinàmica. És a dir, cal indicar
explícitament que es creï la instància (es reservi memòria per a
allotjar-la) i això té lloc en temps d'execució i no de compilació com
passa en C.&lt;/p&gt;
&lt;p&gt;C, és clar, també permet declarar dades dinàmicament. Per exemple,
podem crear un triangle de manera dinàmica fent servir quelcom similar
a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;*)&lt;/span&gt; &lt;span class="n"&gt;malloc&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sizeof&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;D'aquesta manera ens acostem molt més al que passa en Java. En aquest
cas, però, la instància referenciada per la variable t ja no ha estat
creada pel compilador i ens tocarà alliberar &lt;em&gt;explícitament&lt;/em&gt; el seu espai
quan ja no la necessitem. Això ho farem, per exemple, amb
&lt;tt class="docutils literal"&gt;free(t)&lt;/tt&gt;. Afortunadament, en Java, no ens caldrà preocupar-nos
d'alliberar explícitament la instància creada per &lt;tt class="docutils literal"&gt;new&lt;/tt&gt; perquè Java
(de fet un procés anomenat &lt;em&gt;recolector d'escombraries&lt;/em&gt; o &lt;em&gt;garbage
collector&lt;/em&gt;) ja se n'encarrega per nosaltres.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="us-dels-procediments-i-dels-metodes"&gt;
&lt;h3&gt;Ús dels procediments i dels mètodes&lt;/h3&gt;
&lt;p&gt;Per poder cridar a un procediment en C, simplement fem:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Veiem que al procediment li passem com a argument el triangle del que
ha de calcular l'àrea. És clar, la visió procedimental parteix de la
base que tenim un conjunt de dades a manipular i uns procediments que
la manipulen. El nom escollit per la funció
&lt;tt class="docutils literal"&gt;calcula_area_triangle()&lt;/tt&gt; ja implica que estem donant-li l'ordre de
calcular a &lt;em&gt;algú&lt;/em&gt;, probablement al programa. Ens cal indicar al nom
que es tracta del càlcul sobre un triangle, donat que també podríem
estar treballant al mateix programa amb un altre TAD anomenat
&lt;em&gt;Quadrat&lt;/em&gt; que tingués una funció equivalent pel càlcul de l'àrea (ex.
&lt;tt class="docutils literal"&gt;calcula_area_quadrat()&lt;/tt&gt;) Si ambdós es diguessin &lt;tt class="docutils literal"&gt;calcula_area()&lt;/tt&gt;
el compilador no sabria a quin dels dos procediments ens referim i
generaria un error.&lt;/p&gt;
&lt;p&gt;En Java, això no ens passa. El mètode està associat a la classe dins
del bloc que defineix la classe. Per poder-lo cridar, ens caldrà fer
referència d'alguna manera a la classe. La crida equivalent en Java
seria:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;calcula_area&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixem-nos que &lt;em&gt;t&lt;/em&gt; no se li passa com a argument dins dels parèntesis
de la crida, sinó que apareix abans del nom del mètode separat
d'aquest per un punt. Aquesta notació és la mateixa que fa servir C
per a poder accedir als camps d'un &lt;em&gt;struct&lt;/em&gt; i bé a implicar que, per
Java, tant les propietats com els mètodes formen part de la definició
de la classe. És a dir, són &lt;em&gt;membres&lt;/em&gt; de la classe.&lt;/p&gt;
&lt;p&gt;El mètode &lt;tt class="docutils literal"&gt;calcula_area()&lt;/tt&gt; queda associat a la classe &lt;em&gt;Triangle&lt;/em&gt; pel
fet que el tipus de la variable &lt;em&gt;t&lt;/em&gt; és &lt;em&gt;Triangle&lt;/em&gt;. A l'hora,
&lt;tt class="docutils literal"&gt;calcula_area()&lt;/tt&gt; sap de quin triangle concret ha de calcular l'àrea
perquè està associat a &lt;em&gt;t&lt;/em&gt; en ser cridat.&lt;/p&gt;
&lt;p&gt;Es podria entendre com si es fes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;calcula_area&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;    &lt;span class="c1"&gt;// no compila en Java!&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;És a dir, la crida indica per una banda la classe en que es defineix
el mètode, i per una altra la instància a la que s'ha d'aplicar el
mètode. &lt;a class="footnote-reference" href="#pythonsiaccepta" id="id4"&gt;[4]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;A la crida a un mètode d'un objecte, en POO també se la coneix com a
&lt;em&gt;enviament de missatge&lt;/em&gt;, on el tipus del missatge el defineix el propi
mètode, mentre que el contingut del missatge es codifica en els
arguments que se li passa.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="programacio-orientada-a-objectes"&gt;
&lt;h3&gt;Programació orientada a objectes&lt;/h3&gt;
&lt;p&gt;Ara que hem fet una ullada a part de la nomenclatura de la programació
orientada a objectes, no ens hauria d'estranyar que aquest paradigma
entengui els programes com un conjunt d'objectes que interactuen entre
si, en comptes d'una llista d'instruccions que manipulen dades.&lt;/p&gt;
&lt;p&gt;Cada objecte és capaç de rebre i enviar missatges a altres objectes
(mitjançant crides a mètodes), processar dades, i en general mostrar
un comportament depenent de la seva lògica (el codi dels mètodes), el
seu estat (el valor de les seves propietats) i l'entorn en que es mou
(els arguments dels missatges i altres dades &amp;quot;globals&amp;quot; com per exemple
el contingut del buffer de teclat).&lt;/p&gt;
&lt;p&gt;Les dades dels programes ben orientats a objectes, solen estar
&amp;quot;protegides&amp;quot; de l'accés de codi que no sigui el que ofereixen els
mètodes de la classe.&lt;/p&gt;
&lt;p&gt;Cada classe sol tenir unes &lt;em&gt;responsabilitats&lt;/em&gt; molt concretes i
relacionades amb la classe, i minimitza la dependència amb altres
classes. Això permet reutilitzar les classes en contexts molt
diferents.&lt;/p&gt;
&lt;p&gt;Cada mètode, idealment, realitza una única responsabilitat de la
classe a la que pertany. Els mètodes solen contenir poques
instruccions ja que, quan la responsabilitat requereix moltes passes,
normalment es divideix en &amp;quot;subresponsabilitats&amp;quot; més petites a
realitzar per altres mètodes.&lt;/p&gt;
&lt;p&gt;El punt d'entrada (la funció &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;) d'un programa orientat a
objectes, sol ser un mètode (que compleix alguns requisits com ara
tenir un nom concret) de la classe que representa el &amp;quot;programa
principal&amp;quot;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-objectes-instancies-i-referencies"&gt;
&lt;h3&gt;Exercici 1. Objectes, instàncies i referències&lt;/h3&gt;
&lt;p&gt;Compara amb les teves paraules aquests tres conceptes (són el mateix?,
com es relacionen entre si?)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-el-tad-quadrat"&gt;
&lt;h3&gt;Exercici 2. El TAD Quadrat&lt;/h3&gt;
&lt;p&gt;Desenvolupa el TAD Quadrat en llenguatge C, amb les operacions
equivalents al TAD Triangle vist anteriorment.&lt;/p&gt;
&lt;p&gt;Crea un nou programa principal anomenat &lt;tt class="docutils literal"&gt;usafigures.c&lt;/tt&gt; que, fent
servir els dos TADs, calculi l'àrea d'un triangle de base 5 i altura
3, i la d'un quadrat de costat 5. Pots fer servir el següent exemple
com a plantilla:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Fitxer: usatriangle.c&lt;/span&gt;
&lt;span class="cm"&gt; * Programa que calcula l&amp;#39;àrea d&amp;#39;un triangle de base 5 i altura 3&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;quot;triangle.h&amp;quot;&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%g&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Recorda que amb gcc pots crear l'executable d'aquest codi amb la
comanda:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;gcc -o usatriangle usatriangle.c triangle.c
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-la-classe-quadrat"&gt;
&lt;h3&gt;Exercici 3. La classe Quadrat&lt;/h3&gt;
&lt;p&gt;Desenvolupa la classe Quadrat en llenguatge Java, amb les operacions
equivalents a la classe Triangle vista anteriorment.&lt;/p&gt;
&lt;p&gt;Crea una nova classe anomenada &lt;tt class="docutils literal"&gt;UsaFigures&lt;/tt&gt; que realitzi un càlcul
equivalent al de &lt;tt class="docutils literal"&gt;usafigures.c&lt;/tt&gt; de l'exercici anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-identificacio-d-elements"&gt;
&lt;h3&gt;Exercici 4. Identificació d'elements&lt;/h3&gt;
&lt;p&gt;Recupera el codi de les tres classes que has fet servir en l'exercici
anterior. Col·loca-ho tot en un mateix document i indica quines línies
contenen algun dels següents conceptes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;declaració de classe&lt;/li&gt;
&lt;li&gt;declaració de propietat&lt;/li&gt;
&lt;li&gt;declaració de mètode&lt;/li&gt;
&lt;li&gt;declaració de variable&lt;/li&gt;
&lt;li&gt;instanciació&lt;/li&gt;
&lt;li&gt;lectura de propietat&lt;/li&gt;
&lt;li&gt;escriptura de propietat&lt;/li&gt;
&lt;li&gt;crida a mètode&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per exemple, considera:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Implementació de la classe Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;     &lt;span class="c1"&gt;// declaració de classe&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;    &lt;span class="c1"&gt;// declaració de propietat&lt;/span&gt;

&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-5-estatic-vs-dinamic"&gt;
&lt;h3&gt;Exercici 5. Estàtic vs dinàmic&lt;/h3&gt;
&lt;p&gt;Descriu amb les teves paraules la diferència entre la creació estàtica
i dinàmica d'instàncies. Argumenta a favor i en contra de cada opció.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-opcional-creacio-dinamica-d-instancies-d-un-tad-en-c"&gt;
&lt;h3&gt;Exercici 6. (opcional) Creació dinàmica d'instàncies d'un TAD en C&lt;/h3&gt;
&lt;p&gt;Realitza una nova versió del codi dels programes que apareixen a
l'exercici del TAD Quadrat. En aquest cas, aconsegueix que les
instàncies de les figures siguin creades dinàmicament en comptes
d'estàticament.&lt;/p&gt;
&lt;p&gt;Aquest exercici, tot i sent opcional, és molt recomanable per a
arribar a entendre el funcionament d'instanciació de llenguatges com
Java.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;hr class="docutils" /&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="arrayadequat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En aquest exemple tan bàsic, probablement no és
molt més adequat fer servir un array que deixar base i altura com
estan. L'exemple, però, hauria de permetre veure que el canvi
d'implementació de les dades no afecta als programes usuaris del
TAD (a banda de requerir recompilació, és clar)&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="modificadorsdacces" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si tens preses per saber què hi ha al darrera
d'aquests mots en Java, pots consultar el que diuen els seus
dissenyadors al tutorial de Java sobre &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html"&gt;els modificadors&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="constructors" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Pels impacients, podeu mirar al tutorial de java
què diuen sobre &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html"&gt;els constructors&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="pythonsiaccepta" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Hi ha llenguatges que accepten les dues
notacions. Per exemple, Python requereix explicitar la instància
com a primer paràmetre dels mètodes, i després permet realitzar
crides tant a partir de la instància com a partir de la classe.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Constructors (part I)</title><link href="http://apuntstecnics.herokuapp.com/constructors-part-i.html" rel="alternate"></link><updated>2015-02-05T16:34:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:constructors-part-i.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document introdueix els &lt;em&gt;constructors&lt;/em&gt;, un tipus especial de
bloc de codi que en programació orientada a objectes és cridat la
creació d'una nova instància d'una classe, i que té la funció de
preparar la instància per a ser utilitzada.&lt;/p&gt;
&lt;p&gt;Es tracta d'una primera aproximació al concepte que no tracta
característiques més avançades com la relació amb l'herència. Aquests
elements seran tractats posteriorment a la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/constructors-part-ii.html"&gt;segona part&lt;/a&gt; d'aquest document.&lt;/p&gt;
&lt;p&gt;Aquesta introducció comença amb una secció &lt;em&gt;teòrica&lt;/em&gt; que descriu els
constructors (i destructors), per després continuar amb l'anàlisi
d'exercicis en Java.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Atenció&lt;/strong&gt; La secció teòrica pot resultar molt complexa per qui mai
no ha estat exposat a la gestió explícita de memòria dinàmica. Si és
el teu cas, intenta aproximar-te-hi amb ment oberta.&lt;/p&gt;
&lt;p&gt;Es pressuposa que s'ha seguit els continguts de &lt;a class="reference external" href="poo006.classes_objectes.rst"&gt;classes i objectes&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="constructors-i-destructors"&gt;
&lt;h2&gt;Constructors i destructors&lt;/h2&gt;
&lt;p&gt;Un aspecte important, pels programes en execució, és la reserva i
posterior alliberament de memòria necessària per a poder fer encabir
dinàmicament les dades que manipulen.&lt;/p&gt;
&lt;p&gt;Considerem per exemple, la implementació d'una &lt;em&gt;llista dinàmica&lt;/em&gt; d'enllaç simple,
sovint es realitza amb una estructura (Node) que conté almenys dos
camps (el valor a guardar per un element de la llista i un apuntador
al següent node). Normalment ens cal disposar d'un apuntador al primer
node, i el darrer node apunta convenientment a un valor nul.&lt;/p&gt;
&lt;p&gt;La següent imatge esquematitza una llista d'aquestes amb dos elements.&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="Dos elements" src="http://apuntstecnics.herokuapp.com/images/poo008.img001.llistadin_doselem.png" /&gt;
&lt;/div&gt;
&lt;p&gt;En cas que hi vulguem afegir un nou node, ens cal realitzar les
següents passes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;strong&gt;reservar&lt;/strong&gt; l'espai pel nou node&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;inicialitzar&lt;/strong&gt; els valors del nou node. Com a mínim l'apuntador a
següent node, que farem apuntar al node que correspongui de la
llista, o bé a &lt;em&gt;null&lt;/em&gt; si ha de ser el nou darrer.&lt;/li&gt;
&lt;li&gt;reassignar l'apuntador del node de la llista que ha de ser anterior
al nou node, per què tingui com a següent el nou node.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;El resultat final queda representat per la següent imatge:&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="Tres elements" src="http://apuntstecnics.herokuapp.com/images/poo008.img002.llistadin_treselem.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Per una altra banda, quan volem eliminar un element de la llista, les
passes que hem de fer són:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;fer que el punter a següent node del node anterior al que volem
eliminar, passi a apuntar al node següent del node que volem
eliminar.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;alliberar&lt;/strong&gt; l'espai ocupat pel node a eliminar.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;El resultat final queda:&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="Menys elements" src="http://apuntstecnics.herokuapp.com/images/poo008.img003.llistadin_menyselem.png" /&gt;
&lt;/div&gt;
&lt;p&gt;De les operacions vistes en aquest exemple, podem dir que tot node de
la llista ha de ser:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;strong&gt;creat&lt;/strong&gt;: &lt;em&gt;reserva de memòria&lt;/em&gt; per a allotjar-lo i &lt;em&gt;inicialització&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;destruït&lt;/strong&gt;: &lt;em&gt;alliberament&lt;/em&gt; de la memòria reservada un cop sabem
que no ens cal tornar a fer-lo servir.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;En Java, la creació d'una nova instància la realitzem mitjançant
l'expressió &lt;tt class="docutils literal"&gt;new &lt;span class="pre"&gt;«Constructor»(«args»)&lt;/span&gt;&lt;/tt&gt; on «Constructor» coincideix
amb el nom de la classe i «args» corresponen als valors
d'inicialització (sovint no hi ha cap).&lt;/p&gt;
&lt;p&gt;La destrucció en Java &lt;strong&gt;no&lt;/strong&gt; es realitza explícitament (a diferència
d'altres llenguatges OO com ara C++) &lt;a class="footnote-reference" href="#javafinalize" id="id1"&gt;[2]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Java (com molts altres llenguatges OO) disposen d'un procés de baixa
prioritat anomenat &lt;em&gt;recolector d'escombraries&lt;/em&gt; (&lt;em&gt;Garbage Collector&lt;/em&gt;)
que se n'encarrega d'anar alliberant aquells espais de memòria que ja
no estan referenciats per ningú. El llenguatge no ens ofereix manera
d'influenciar a aquest procés &lt;a class="footnote-reference" href="#javagc" id="id2"&gt;[3]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;En tot cas &lt;strong&gt;sí&lt;/strong&gt; podem ajudar al &lt;em&gt;Garbage Collector&lt;/em&gt;. Si disposem
d'una instància que ocupa &lt;strong&gt;molta&lt;/strong&gt; memòria i sabem que ja no la
necessitem més al nostre programa, sempre podem assignar totes les
seves referències a &lt;tt class="docutils literal"&gt;null&lt;/tt&gt;. D'aquesta manera, el &lt;em&gt;Garbage Collector&lt;/em&gt;
sabrà de seguida que ja no cal i podrà actuar en conseqüència.
Considera el següent exemple:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="n"&gt;ClasseGrossa&lt;/span&gt; &lt;span class="n"&gt;cg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ClasseGrossa&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// instància que ocupa molt&lt;/span&gt;
&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;           &lt;span class="c1"&gt;// usem la instància tot el que la necessitem&lt;/span&gt;
&lt;span class="n"&gt;cg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;      &lt;span class="c1"&gt;// eliminem la referència a la instància&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-1-construccio-del-gat-renat"&gt;
&lt;h2&gt;Exercici 1. Construcció del gat Renat&lt;/h2&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// vides disponibles del gat Renat&lt;/span&gt;

    &lt;span class="c1"&gt;// constructor per defecte&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// constructor específic&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// canvia el nombre de vides si el nou valor és vàlid&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;megaRenat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;A Mega Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;megaRenat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Executa el programa i respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;A quina línia es posa el valor de vides de la instància creada a la 26?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A quina línia es posa el valor de vides de la instància creada a la 28?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Els blocs que s'inicien a les línies 5 i 8 semblen mètodes però hi
ha algunes diferències amb un mètode convencional. Quines són?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Què et suggereixen els comentaris de les línies 4 i 7?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quan s'executa el codi dels blocs iniciats a les línies 5 i 8.
Ajuda't, si et cal, de &lt;em&gt;xivatos&lt;/em&gt; &lt;a class="footnote-reference" href="#xivato" id="id3"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Elimina o comenta la línia 5. Continua funcionant el codi? Perquè
creus?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Substitueix el codi del bloc de la línia 8 pel següent i descriu
què passa a l'hora d'executar:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c1"&gt;// constructor específic&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;     &lt;span class="c1"&gt;// o també this.setVides(vides);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Per a què creus que serveix el &lt;tt class="docutils literal"&gt;this()&lt;/tt&gt;?&lt;/p&gt;
&lt;p&gt;Pista: posa un &lt;em&gt;xivato&lt;/em&gt; al constructor per defecte i compara que
passa en executar el codi quan &lt;tt class="docutils literal"&gt;this()&lt;/tt&gt; hi és, i quan el treus.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-el-gat-renat-pot-neixer-silenciosament"&gt;
&lt;h2&gt;Exercici 2. El gat Renat pot néixer silenciosament&lt;/h2&gt;
&lt;p&gt;Crea una nova versió de la classe GatRenat a partir de la que
incorporava la possibilitat de parlar i callar.&lt;/p&gt;
&lt;p&gt;En aquesta ocasió, la classe permetrà ser inicialitzada de manera que
parli o calli. Cal però, evitar que codi que ja funcionava amb la
versió anterior, deixi de fer-ho amb aquesta.&lt;/p&gt;
&lt;p&gt;Per defecte, el gat Renat &lt;em&gt;naixerà&lt;/em&gt; podent parlar i dirà &amp;quot;He nascut!&amp;quot;
en el moment de la seva creació. En cas, però, que es construeixi
silenciós, no dirà res en nàixer.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-lentorn-operatiu-del-gat-renat"&gt;
&lt;h2&gt;Exercici 3. L’entorn operatiu del gat Renat&lt;/h2&gt;
&lt;p&gt;Desenvolupa un nou programa que ofereixi a l’usuari la possibilitat
d’interaccionar amb el gat Renat (inclòs el silenciar-lo i fer-lo
tornar a parlar).&lt;/p&gt;
&lt;p&gt;El programa mostrarà com a &amp;quot;prompt&amp;quot; &lt;tt class="docutils literal"&gt;[Renat]:&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Les ordres que se li podran donar seran:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;com estàs?
aixeca’t
seu
estira’t
miola
calla
parla
adèu
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;L'entorn no distingirà entre majúscules i minúscules.&lt;/p&gt;
&lt;p&gt;En cas que la comanda introduïda per l'usuari no coincideixi amb
alguna d'aquestes, l'entorn respondrà amb el missatge &amp;quot;com?&amp;quot; i
continuarà demanant noves comandes.&lt;/p&gt;
&lt;p&gt;Inicialment el gat Renat parlarà i estarà estirat.&lt;/p&gt;
&lt;p&gt;Quan se li demani com està, si pot parlar, dirà &lt;tt class="docutils literal"&gt;estic «estat»&lt;/tt&gt; (per
exemple, &lt;tt class="docutils literal"&gt;estic estirat&lt;/tt&gt;), altrament respondrà amb &lt;tt class="docutils literal"&gt;...&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Quan se li digui &lt;tt class="docutils literal"&gt;adèu&lt;/tt&gt;, si pot parlar respondrà amb &lt;tt class="docutils literal"&gt;adèu&lt;/tt&gt;,
altrament també s'acomiadarà silenciosament amb un &lt;tt class="docutils literal"&gt;...&lt;/tt&gt;. En tots
dos casos finalitzarà.&lt;/p&gt;
&lt;p&gt;Per la resta de comandes, el programa respondrà amb el que respongui
el gat.&lt;/p&gt;
&lt;p&gt;Crea un joc de proves que permeti comprovar el funcionament de
cadascuna de les opcions. El joc de proves estarà format per dos
fitxers, un amb les comandes d'entrada i un amb la sortida esperada.&lt;/p&gt;
&lt;p&gt;El d'entrada començarà amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;com estàs?
aixeca&amp;#39;t
«...»
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;El de sortida començarà amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;He nascut!
[Renat] estic estirat
[Renat] m&amp;#39;aixeco
[Renat] «...»
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nota: en cas que ens descuidem de finalitzar al fitxer d'entrada amb
&amp;quot;adèu&amp;quot;, és molt probable que ens surti un error d'execució del tipus
&lt;tt class="docutils literal"&gt;java.lang.NullPointerException&lt;/tt&gt;. El problema és que la lectura de
l'entrada estàndard ens returna &lt;tt class="docutils literal"&gt;null&lt;/tt&gt; en comptes d'un string buit.
Caldrà només continuar quan llegim res que no sigui null. És clar, si
arribem a null finalitzarem l'execució però no ens acomiadarem de
l'usuari. Faltaria més!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-la-classe-hora"&gt;
&lt;h2&gt;Exercici 4. La classe Hora&lt;/h2&gt;
&lt;p&gt;Implementa la classe Hora amb les propietats (privades) hora, minut i
segon de tipus enter, i els accessors (públics) que assegurin que
l'hora és sempre vàlida.&lt;/p&gt;
&lt;p&gt;Per defecte, l'hora correspondrà a &lt;tt class="docutils literal"&gt;0:00:00&lt;/tt&gt;, però la classe oferirà
els mecanismes necessaris per a inicialitzar una hora amb algun altre
valor &lt;em&gt;vàlid&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Afegeix els següents mètodes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void incrementa()&lt;/tt&gt;: fa que l'hora tingui un segon més&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void seguent(int)&lt;/tt&gt;: fa que l'hora s'incrementi en el nombre de segons indicats&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void decrementa()&lt;/tt&gt;: fa que l'hora tingui un segon menys&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void decrementa(int)&lt;/tt&gt;: fa que l'hora es decrementi en el nombre de segons indicats&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;int compareTo(Hora)&lt;/tt&gt;: compara amb l'hora indicada i retorna &amp;lt;0 si és menor que la indicada, 0 si són iguals i &amp;gt;0 si és més gran que la indicada.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String toString()&lt;/tt&gt;: retorna un string amb l'hora en format h:mm:ss.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Desenvolupa una funció &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que demani a l'usuari les dades de
tres hores i, fent servir la classe Hora, les mostri ordenades
creixentment.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Notes / pistes&lt;/strong&gt;&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;En cas que un constructor específic es trobi amb un o més
paràmetres no vàlids, inicialitzarà la instància amb els valors per
defecte.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Per escriure el 0 inicial als minuts i segons quan el valor és
menor de 10, es pot fer servir el mètode &lt;a class="reference external" href="https://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html"&gt;System.out.format()&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Per si vas justet de temps:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;#39;%d %02d %05d%n&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;O més compacte:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;#39;%d %1$02d %1$05d%n&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-la-classe-persona"&gt;
&lt;h2&gt;Exercici 5. La classe Persona&lt;/h2&gt;
&lt;p&gt;Implementa la classe Persona amb les propietats nom, cognoms, any de
naixement i any de defunció protegides amb inicialitzadors i
accessors, que respectin les següents regles:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;l'any de naixement haurà de ser sempre un enter positiu&lt;/li&gt;
&lt;li&gt;l'any de defunció només pot ser -1, per representar que la persona
encara és viva, o bé un valor superior o igual al de l'any de
naixement. En cap cas, però, es permetrà a l'usuari de la classe
indicar explícitament el valor -1 per l'any de defunció. Per
corregir l'estat d'una persona i indicar que està viva, caldrà fer
servir el mètode &lt;tt class="docutils literal"&gt;setViu()&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;cap persona pot no tenir nom, cognoms o any de naixement.&lt;/li&gt;
&lt;li&gt;les persones poden ser inicialitzades vives o no.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;El càlcul de l'edat es realitzarà únicament a partir de l'any de
naixement i serà, per tant, aproximat (no disposem del mes i el dia).&lt;/p&gt;
&lt;p&gt;Per saber l'any actual, podem fer servir el següent codi:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;anyAct&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Calendar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getInstance&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Calendar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;YEAR&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Desenvolupa un main() que demani a l'usuari les dades d'una persona
(incloent la de defunció si és el cas), construeixi una instància de
Persona amb aquestes dades i indiqui:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;si la persona és difunta: l'edat a la que va arribar&lt;/li&gt;
&lt;li&gt;si la persona està encara viva: l'edat actual&lt;/li&gt;
&lt;/ul&gt;
&lt;hr class="docutils" /&gt;
&lt;table class="docutils footnote" frame="void" id="xivato" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;Un &lt;em&gt;xivato&lt;/em&gt; és un missatge, normalment escrit per sortida
estàndard, que permet saber que s'ha passat per alguna línia de codi.&lt;/p&gt;
&lt;p&gt;Es tracta d'una pràctica senzilla i eficaç per realitzar proves de
codi quan no es disposa d'un depurador (o no es pot/vol fer
servir).&lt;/p&gt;
&lt;p&gt;Solen ser molt més efectius quan incorporen certa informació de
context. Per exemple, trobar-se:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;per aquí 1
per aquí 2
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;és molt menys informatiu vistós que un:&lt;/p&gt;
&lt;div class="last"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;XXX GatRenat.setVides(-12): entra amb vides inicials 7
XXX GatRenat.setVides(-12): surt amb vides finals 7
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="javafinalize" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si bé els objectes Java disposen del
mètode &lt;tt class="docutils literal"&gt;finalize()&lt;/tt&gt;, es tracta d'un mètode per especificar accions
de neteja i no per decidir quan una instància ha de ser alliberada.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="javagc" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;De fet si que podem fer una crida a
&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;Runtime.getRuntime().gc()&lt;/span&gt;&lt;/tt&gt; o &lt;tt class="docutils literal"&gt;System.gc()&lt;/tt&gt; què, com diu
l'especificació del mètode, &lt;em&gt;suggereix&lt;/em&gt; a la màquina virtual de
Java a dedicar esforços per recuperar la memòria disponible, tot i
que serà cridat de manera automàtica cada cop que la màquina
virtual ho trobi necessari.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Membres d'instància i de classe</title><link href="http://apuntstecnics.herokuapp.com/membres-dinstancia-i-de-classe.html" rel="alternate"></link><updated>2015-02-05T16:33:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:membres-dinstancia-i-de-classe.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Tot i que habitualment els membres que definim a les nostres classes,
estan orientats a cada instància concreta de la classe, hi ha
ocasions en que ens cal disposar de mètodes o/i propietats que facin
referència a tota la classe i no a una instància concreta d'aquesta.&lt;/p&gt;
&lt;p&gt;En aquest document es discuteix aquesta possibilitat en forma de
membres d'instància i de classe.&lt;/p&gt;
&lt;p&gt;Com a &lt;em&gt;extra&lt;/em&gt; se li afegeix el concepte de &lt;em&gt;final&lt;/em&gt; què,
simplificant-ho molt, permet indicar que quelcom és constant.&lt;/p&gt;
&lt;p&gt;Es pressuposa que s'ha seguit els continguts de &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/classes-i-objectes.html"&gt;classes i objectes&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-metodes-de-classe"&gt;
&lt;h2&gt;Exercici 1. Mètodes de classe&lt;/h2&gt;
&lt;p&gt;Fins ara, tots els mètodes que hem programat depenien d'una instància
per a funcionar. Tots? Bé, potser només fins on hem estat conscients.&lt;/p&gt;
&lt;p&gt;Per cridar-los, ens calia indicar «referència a la instància».«nom del
mètode» o, des del codi d'un mètode de la classe també podíem
directament cridar el nom del mètode.&lt;/p&gt;
&lt;p&gt;Per exemple, a la classe Hora, el mètode d'incrementar un segon
requeria una instància d'hora a qui aplicar-lo. Dèiem&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;incrSeg&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ara bé, imagina que volguéssim comprovar que els valors d'una hora són
vàlids abans d'assignar-los a una instància de Hora. El mètode podria
ser quelcom semblant a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;esValida&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{...}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aquest mètode, però, no requeriria l'accés a l'estat de cap instància
de Hora, i amb qualsevol instància de Hora hauria de donar el mateix
resultat. Per a poder-lo usar, ens caldria, però, crear una instància
que probablement no la voldrem per res més. Per exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;esValida&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per a solucionar aquest tipus de situacions, la POO ens ofereix la
possibilitat de distingir mètodes de classe de mètodes d'instància.
Aquest de esValida() seria clarament un mètode de classe ja que no depèn
de cap instància per a ser executat.&lt;/p&gt;
&lt;p&gt;Java ens permet indicar que un mètode és de classe amb la paraula
reservada static. Així, el mètode &lt;tt class="docutils literal"&gt;esValida()&lt;/tt&gt; tindria el següent aspecte&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;esValida&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{...}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per a ser utilitzat, a banda de com abans, també podríem fer-ho d'una
manera més eficient amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;esValida&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que ara, en comptes de cridar al mètode des d'una instància, ho
fem directament a partir de la classe!&lt;/p&gt;
&lt;p&gt;Ara potser comença a tenir sentit la paraula &lt;tt class="docutils literal"&gt;static&lt;/tt&gt; del
&lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;, oi?&lt;/p&gt;
&lt;p&gt;En aquest exercici es demana que ampliïs la classe Hora amb els
mètodes estàtics:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean esValida(int, int, int)&lt;/tt&gt;: retorna true si i només sí les
hores, minuts i segons indicats, en aquest ordre, pels paràmetres,
corresponen a una combinació vàlida per una hora.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;int compareTo(Hora, Hora)&lt;/tt&gt;: retorna -1 si la primera hora és
menor que (anterior a) la segona, 0 si són iguals i 1 si la primera
és més gran que (posterior a) la segona.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;Hora duplica(Hora)&lt;/tt&gt;: retorna una nova instància de la classe Hora
amb els mateixos valors per les propietats de l'hora rebuda.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Aquest últim retorna una nova instància de Hora amb els mateixos
valors de la que rep.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-propietats-de-classe"&gt;
&lt;h2&gt;Exercici 2. Propietats de classe&lt;/h2&gt;
&lt;p&gt;Les propietats també poden ser de classe.&lt;/p&gt;
&lt;p&gt;Un dels exemples més típics és el de portar el comptador de quantes instàncies d'una classe s'han creat.&lt;/p&gt;
&lt;p&gt;Considera el següent codi, executa'l i intenta entendre el perquè de la sortida&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* Demostració d&amp;#39;ús de membres de classe */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;numInstancies&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// constructor per defecte incrementa el nombre d&amp;#39;instàncies&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;numInstancies&lt;/span&gt;&lt;span class="o"&gt;++;&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Creat un nou gat Renat. Ja van &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;numInstancies&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getNumInstancies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// retorna el nombre d&amp;#39;instàncies creades fins el moment&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;numInstancies&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Gat Renat amb &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Inicialment el nombre d&amp;#39;instàncies és: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNumInstancies&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="c1"&gt;// crea uns quants GatRenat per demostrar l&amp;#39;ús de membres estàtics&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="na"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;    &lt;span class="c1"&gt;// canviem les vides només per distingir-los&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Tenim: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; amb &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="na"&gt;getNumInstancies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; germanets&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="c1"&gt;// tornem a demanar a cadascun quants germans té&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;I si tornem a demanar-los quants germans tenen, ens diuen:&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; amb &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="na"&gt;getNumInstancies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; germanets&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Demostra que l'has entès realitzant la següent modificació al codi:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;cada gat haurà de tenir un número identificador que indiqui en quin
ordre va nàixer respecte els seus germans.&lt;/li&gt;
&lt;li&gt;Aquest identificador es podrà demanar (amb el mètode &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;get«X»()&lt;/span&gt;&lt;/tt&gt;),
però no modificar; i apareixerà a la cadena retornada pel mètode
&lt;tt class="docutils literal"&gt;toString()&lt;/tt&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Nota: la darrera crida a &lt;tt class="docutils literal"&gt;println()&lt;/tt&gt; es podria escriure més
simple, sense necessitat de cridar explícitament al mètode
&lt;tt class="docutils literal"&gt;toString()&lt;/tt&gt;. Considera:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; amb &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
    &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="na"&gt;getNumInstancies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; germanets&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;El mètode &lt;tt class="docutils literal"&gt;toString()&lt;/tt&gt; té la particularitat de ser cridat
(implícitament) en alguns contextos on s'espera un String, com ara en
aquesta concatenació de Strings que passem a &lt;tt class="docutils literal"&gt;println()&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-propietats-finals"&gt;
&lt;h2&gt;Exercici 3. Propietats finals&lt;/h2&gt;
&lt;p&gt;La paraula clau final pot ser aplicada a diferents elements.&lt;/p&gt;
&lt;p&gt;L'aplicació a classes té a veure amb el concepte d'herència que no es
tracta en aquest document.&lt;/p&gt;
&lt;p&gt;L'aplicació a mètodes sovint està també relacionada amb l'herència. Un
altre ús és per l'eficiència: el compilador pot substituir les crides
al mètode final pel seu codi (&lt;em&gt;inline call&lt;/em&gt;). Tot i que teòricament
Java sap quan ha de fer aquestes substitucions, es recomana només
indicar final per temes d'eficiència a mètodes molt breus o el codi
podria tornar-se massa gran. En aquestes primeres etapes
d'aprenentatge de la POO i de Java, no cal que ens preocupem d'aquest
tipus d'optimització.&lt;/p&gt;
&lt;p&gt;L'aplicació a paràmetres permet indicar que el paràmetre no pot
canviar el seu valor dins del codi (paràmetres &lt;em&gt;read-only&lt;/em&gt;) De la
mateixa manera, si indiquem que una variable és final, només li podrem
assignar valor un sol cop.&lt;/p&gt;
&lt;p&gt;L'aplicació a propietats permet indicar que la propietat només pot
rebre un valor un cop en tota l'execució. És una mena de constant de
la instància. En cas que hi afegim &lt;tt class="docutils literal"&gt;static&lt;/tt&gt;, la constant és de la
classe.&lt;/p&gt;
&lt;p&gt;També podem afegir &lt;em&gt;final&lt;/em&gt; a una variable. El comportament és el
mateix que amb les propietats: el compilador només permet assignar un
cop a la variable.&lt;/p&gt;
&lt;p&gt;Nota: en cas que la propietat o variable referenciï a una instància
mutable (que els valors de les seves propietats puguin ser
modificats), fer que la propietat/variable sigui final &lt;strong&gt;no&lt;/strong&gt;
converteix la instància referenciada en immutable, només impedeix que
la referència canviï a una altra instància. Per exemple:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;canviaI&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;canviaA&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;nova&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nova&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// error de compilació&lt;/span&gt;
                    &lt;span class="c1"&gt;// &amp;quot;error: cannot assign a value to final variable a&amp;quot;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Per a aquest exercici es demana que trobis una manera d'aplicar el
concepte de propietat final a la teva resposta del problema anterior.&lt;/p&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Relacions entre classes</title><link href="http://apuntstecnics.herokuapp.com/relacions-entre-classes.html" rel="alternate"></link><updated>2015-02-05T16:32:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:relacions-entre-classes.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En la programació orientada a objectes, els programes es composen de
classes que interaccionen les unes amb les altres. Aquesta interacció
de les classes es realitza en funció de la relació que tenen aquestes
classes entre si.&lt;/p&gt;
&lt;p&gt;Aquest document explora aquestes relacions amb una excepció important,
&lt;em&gt;l'herència&lt;/em&gt;, que serà abordada en un altre document.&lt;/p&gt;
&lt;p&gt;Aquesta introducció es realitza de manera pràctica, a partir de
l'anàlisi de dos exercicis.&lt;/p&gt;
&lt;p&gt;Es pressuposa coneixement de creació i construcció de classes en
Java.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-el-picarol"&gt;
&lt;h2&gt;Exercici 1. El Picarol&lt;/h2&gt;
&lt;p&gt;Definició: Quan una classe A usa els serveis (membres públics) d'una
altra B, es diu que hi ha una &lt;em&gt;dependència&lt;/em&gt; entre la classe A i la B.
Quan B pateix algun canvi en la seva interfície, A podria requerir ser
modificat.&lt;/p&gt;
&lt;p&gt;Definició: Es diu que una classe A &lt;em&gt;agrega&lt;/em&gt; una classe B quan té una
dependència de B, de manera que l'existència de B és independent de la
de A. És a dir la instància de B pot ser creada abans que la de A i
&amp;quot;sobreviure&amp;quot; després de A. Es diu que A usa (uses-a) B&lt;/p&gt;
&lt;p&gt;Aquesta relació de dependència es coneix com a &lt;strong&gt;agregació&lt;/strong&gt;. En java,
s'implementa normalment amb una propietat de l'objecte agregat. En cas
d'haver de duplicar una instància de la classe A, les dues instàncies
farien referència a la mateixa instància de la classe B.&lt;/p&gt;
&lt;p&gt;Considera la classe Picarol que ofereix el servei (mètode) &lt;tt class="docutils literal"&gt;sona()&lt;/tt&gt;
que de moment, simplement escriu per pantalla el missatge
&amp;quot;clink-clink&amp;quot;.&lt;/p&gt;
&lt;p&gt;Ara el nostre gat Renat, si li pengem un picarol, cada cop que es
mogui (s'aixeca, seu o s'estira), farà sonar el picarol
amb independència de si el gat calla o parla.&lt;/p&gt;
&lt;p&gt;Es demana:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;implementa la classe Picarol amb el mètode &lt;em&gt;sona()&lt;/em&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;amplia la classe del gat Renat amb els següents mètodes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean tePicarol()&lt;/tt&gt;: cert si té un picarol assignat. Inicialment no en té.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;posaPicarol(Picarol)&lt;/tt&gt;: assigna un picarol. Si en tenia un, el
substitueix pel nou&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;Picarol treuPicarol()&lt;/tt&gt;: retorna el picarol i l'elimina. Si no en
tenia cap, retorna null.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;crea una nova versió de l'entorn operatiu del gat Renat, que
ofereixi les noves comandes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;posa&amp;#39;t picarol
treu-te picarol
tens picarol?
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En cas que ja tingui un picarol i li demanin posar-se un altre
respondrà amb &amp;quot;ja tinc picarol&amp;quot;. En canvi, si no en tenia i se li
demana treure'l dirà &amp;quot;no en tinc cap de picarol&amp;quot;. A la pregunta si té
picarol contestarà &amp;quot;sí&amp;quot; o &amp;quot;no&amp;quot; segons correspongui. Cal tenir present
que si Renat no pot parlar, en comptes d'aquests missatges dirà
l'habitual &amp;quot;...&amp;quot;.&lt;/p&gt;
&lt;p&gt;Crea un joc de proves que mostri el funcionament d'aquestes noves
funcionalitats així com el fet que sona quan el gat es mou.&lt;/p&gt;
&lt;p&gt;Atenció: el Gat Renat &lt;strong&gt;no&lt;/strong&gt; ha de ser responsable de crear la
instància de cap Picarol! És quelcom que els seus usuaris li donaran,
si ho estimen oportú.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-els-ulls-del-gat-renat"&gt;
&lt;h2&gt;Exercici 2. Els ulls del gat Renat&lt;/h2&gt;
&lt;p&gt;Definició: Es diu que una classe A es &lt;em&gt;composa&lt;/em&gt; d'una altra B quan
existeix una dependència de A a B com a l'agregació, però en aquest
cas, la instància de B està completament lligada a la de A. Es diu
també B forma part de A i que A té (has-a) B.&lt;/p&gt;
&lt;p&gt;Aquesta relació de dependència es coneix com &lt;strong&gt;composició&lt;/strong&gt;. En java,
la implementació és molt similar a la de la relació d'agregació: amb
una propietat. La diferència consisteix en el fet que la creació de la
instància (on es fa el new) és dins de la classe A. En cas que
haguéssim de duplicar una instància de la classe A, hauríem també de
duplicar la instància de la classe B.&lt;/p&gt;
&lt;p&gt;Implementa la classe UllDeGat. Un UllDeGat pot estar obert o tancat i
ofereix els mètodes &lt;tt class="docutils literal"&gt;obret()&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;tancat()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;boolean
estasObert()&lt;/tt&gt;. En obrir-se els ulls &lt;strong&gt;sempre&lt;/strong&gt; fa el soroll &amp;quot;nyeek&amp;quot; i
en tancar-se &lt;strong&gt;sempre&lt;/strong&gt; fa el soroll &amp;quot;plonx&amp;quot;. Evidentment, si demanem
obrir quan els ulls ja es troben oberts, no en farà res. Inicialment
l'ull estarà tancat per defecte i no farà soroll de tancament en
néixer.&lt;/p&gt;
&lt;p&gt;Amplia la classe GatRenat de manera que ara tingui &lt;strong&gt;dos&lt;/strong&gt; ulls. Els
ulls estaran oberts o tancats depenent de l'estat del gat. Si el gat
està dret, tots dos ulls estaran oberts. Si està assegut, l'ull dret
estarà obert i l'esquerre estarà tancat. Quan està estirat, tots dos
ulls estaran tancats. Per facilitar la prova, el gat sempre començarà
a obrir/tancar l'ull esquerre abans que el dret.&lt;/p&gt;
&lt;p&gt;Crea un joc de proves que tingui com a entrada el joc de proves
que vas crear quan l'entorn no considerava ni ulls ni picarol, i la
sortida quedi adaptada als sorolls dels ulls. El joc de proves hauria
de ser vàlid tan per l'entorn que considerava el picarol com per
l'anterior, sense requerir cap canvi en ambdós programes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="tot-plegat"&gt;
&lt;h2&gt;Tot plegat&lt;/h2&gt;
&lt;p&gt;Respecte les dues relacions que acabem de veure, considerarem que:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;la relació d'agregació es un tipus de relació feble entre dues
classes.&lt;/p&gt;
&lt;p&gt;Presenta les següents característiques:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;el component pot ser accedit directament sense que calgui passar
per la instància que l'agrega.&lt;/li&gt;
&lt;li&gt;el component pot sobreviure la instància que l'agrega.&lt;/li&gt;
&lt;li&gt;el mateix component podria ser agregat per més d'una instància&lt;/li&gt;
&lt;li&gt;la instància que agrega el component normalment no té
responsabilitats sobre aquest: per exemple, no sol ser
l'encarregada de crear-lo.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;la relació de composició és molt més forta que la d'agregació.&lt;/p&gt;
&lt;p&gt;Algunes característiques:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;la instància que conté el component, es considera &lt;em&gt;propietària&lt;/em&gt;
d'aquest.&lt;/li&gt;
&lt;li&gt;els component són elements (part) del propietari.&lt;/li&gt;
&lt;li&gt;el component forma part de l'estat del propietari. És a dir, un
canvi en l'estat del component resulta en un canvi d'estat del
composat.&lt;/li&gt;
&lt;li&gt;el component només pot ser accedit a partir del contenidor. Es diu
que el component està encapsulat pel propietari. Sovint, la classe
contenidora no ofereix mecanismes per obtenir el component (get),
especialment quan aquest sigui mutable.&lt;/li&gt;
&lt;li&gt;el temps de vida del component queda liminat al del propietari. És
a dir, quan desaparegui la instància del propietari, també ho farà
la del component.&lt;/li&gt;
&lt;li&gt;el propietari és responsable dels seus components: per exemple, el
crea.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-ampliacio-la-llista-dinamica-en-java"&gt;
&lt;h2&gt;Exercici 3. (ampliació) La llista dinàmica en Java&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Atencio&lt;/strong&gt;: Aquest és un exercici d'ampliació. Encara que opcional,
pot resultar molt interessant per a aquells estudiants que no hagin
pogut treballar amb memòria dinàmica de manera explícita (ex. amb el
llenguatge C)&lt;/p&gt;
&lt;p&gt;Implementa en Java la llista dinàmica vista a la secció &lt;strong&gt;Constructors
i Destructors&lt;/strong&gt; de la introducció als &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/constructors-part-i.html"&gt;constructors&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Et caldran tres classes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Node: tindrà dos propietats: &lt;em&gt;valor&lt;/em&gt; que per simplificar serà un
string, i &lt;em&gt;seguent&lt;/em&gt; que serà de tipus Node (sí, com la classe!) i
que per defecte valdrà null.&lt;/p&gt;
&lt;p&gt;La classe oferirà la possibilitat d'accedir a les dues propietats
(get/set) i inicialitzar-les totes dues, una o cap, en el moment de
la seva construcció.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Llista: tindrà una propietat: &lt;em&gt;primer&lt;/em&gt; de tipus Node que
inicialment apuntarà a null.&lt;/p&gt;
&lt;p&gt;Oferirà els mètodes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void afegir(int, String)&lt;/tt&gt;: afegeix un nou node a la posició de
la llista indicada pel primer paràmetre i el valor expressat pel
segon. En cas que la posició especificada sigui més gran que el
nombre d'elements a la llista, simplement es col·locarà el nou
element al final. Altrament, es desplaçaran convenientment tots
els nodes de la llista per fer encabir el nou a la posició
requerida.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void eliminar(int)&lt;/tt&gt;: elimina el node situat a la posició
indicada pel paràmetre. Si la posició és superior al nombre
d'elements de la llista, no fa res.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void elimina(String)&lt;/tt&gt;: elimina tots els nodes que el valor
coincideixi amb el del paràmetre. Si no hi ha cap, no fa res.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String toString()&lt;/tt&gt;: retorna una representació de la llista en
forma de String. Així, si la llista conté els valors &amp;quot;Hola&amp;quot;, &amp;quot;i&amp;quot;,
&amp;quot;adéu&amp;quot;, aquest mètode retornarà el String &amp;quot;[Hola -&amp;gt; i -&amp;gt; adéu]&amp;quot;. Si
està buida, retornarà simplement &amp;quot;[]&amp;quot;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;UsaLlista: disposarà d'un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que construirà una llista,
afegirà els valors &amp;quot;Hola&amp;quot;, &amp;quot;i&amp;quot;, adéu&amp;quot;, i després els eliminarà un a
un començant pel primer. A cada pas, mostrarà el contingut de la
llista per sortida estàndard. El resultat hauria de ser quelcom
molt similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;[]
[Hola]
[Hola -&amp;gt; i]
[Hola -&amp;gt; i -&amp;gt; adéu]
[i -&amp;gt; adéu]
[adéu]
[]
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-repte-les-urpes-del-gat-renat"&gt;
&lt;h2&gt;Exercici 4. (repte) Les Urpes del gat Renat&lt;/h2&gt;
&lt;p&gt;Et proposo aquest exercici d'ampliació dels conceptes que hem
treballat en aquest tema.&lt;/p&gt;
&lt;p&gt;Atenció: aquest problema és un &lt;strong&gt;repte&lt;/strong&gt;. La part més difícil és, com
sol passar, entendre el que es demana. Ah! Encara que ho sembli, no et
caldrà multifil (&lt;em&gt;multithread&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;Implementa la classe UrpesDeGat i modifica GatRenat segons el diagrama
de classes:&lt;/p&gt;
&lt;p&gt;El funcionament de UrpesDeGat és el següent:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Inicialment les urpes estan esmolades al 100% i s'estan desgastant&lt;/li&gt;
&lt;li&gt;Quan criden el servei esmola(), les urpes comencen a esmolar-se. El
màxim, és clar, és un 100%.&lt;/li&gt;
&lt;li&gt;Quan criden el servei desgasta(), les urpes comencen a
desgastar-se. El mínim, és clar, és un 0%&lt;/li&gt;
&lt;li&gt;Quan es demana el canvi a esmolant o desgastant, o bé quan es
demana el grau d'esmolat es recalcula el grau d'esmolament a partir
del temps que portava esmolant-se o desgastant-se des del darrer
recàlcul, i per cada 1 milisegon se li suma/resta un 1%
d'esmolament.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;El gat Renat tindrà urpes, és clar. I fixa't que ara el gat Renat
tindrà un nou estat possible (caminant). Quan el gat estigui en un
estat que no sigui caminant, les seves urpes estaran desgastant-se i,
quan estigui caminant, en canvi, les urpes estaran esmolant-se. En cas
que les urpes estiguin totalment desgastades, el gat Renat deixarà de
fer-nos cas a les ordres de canvi d'estat i es posarà a caminar fins
que el grau d'esmolament sigui al menys 20%.&lt;/p&gt;
&lt;p&gt;Prova la nova versió del gat Renat amb el seu entorn operatiu, tot
realitzant els canvis que consideris oportuns per a mostrar les noves
funcionalitats.&lt;/p&gt;
&lt;p&gt;Com a pista/ajut per a treballar aquest exercici, considera el següent
codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* Demostració d&amp;#39;ús del temps */&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Calendar&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;momentNaixement&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// ens guardem el moment del naixement&lt;/span&gt;
        &lt;span class="n"&gt;momentNaixement&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Calendar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getInstance&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getTimeInMillis&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="c1"&gt;// ens esperem una estoneta perquè es pensin que costa molt crear un gat&lt;/span&gt;
        &lt;span class="n"&gt;esperatUnaEstona&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;esperatUnaEstona&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// fa que el programa es detengui una estona pseudoaleatòria&lt;/span&gt;
        &lt;span class="c1"&gt;// De moment, no cal que intentis entendre com ho fa això&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;tempsEspera&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;random&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;lang&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Thread&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sleep&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tempsEspera&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;InterruptedException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="nf"&gt;getTempsViu&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// retorna el nombre de milisegons que porta viu&lt;/span&gt;
        &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;actual&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Calendar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getInstance&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getTimeInMillis&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;actual&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;momentNaixement&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Gat Renat amb &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides.  Porta viu &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getTempsViu&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; milisegons&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// crea uns quants GatRenat per demostrar com passa el temps&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="na"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="c1"&gt;// tornem a veure el temps que porten vius&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;I si tornem mirar:&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Herència</title><link href="http://apuntstecnics.herokuapp.com/herencia.html" rel="alternate"></link><updated>2015-02-05T16:31:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:herencia.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Si es pregunta pel concepte més &lt;em&gt;representatiu&lt;/em&gt; de la programació
orientada a objectes, amb pocs dubtes sortiria el d'&lt;strong&gt;herència&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Ja hem vist un parell de relacions entre classes: &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/relacions-entre-classes.html"&gt;la agregació i la
composició&lt;/a&gt;. L'herència és una
altra relació de dependència entre dues classes.&lt;/p&gt;
&lt;p&gt;Aquest document introdueix el concepte d'herència i explora algunes de
les repercussions més visibles en la programació orientada a objectes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="l-herencia"&gt;
&lt;h2&gt;L'herència&lt;/h2&gt;
&lt;p&gt;Què tenen en comú en Renat, el Garfield, el Misifú, i en Tom (company
del Jerry)? Doncs tots ells tenen quatre potes amb urpes i ullals,
miolen, respiren, mengen sardines, empaiten ratolins... en definitiva:
són gats.&lt;/p&gt;
&lt;p&gt;I, què tenen en comú els gats, els gossos i els ratolins? Doncs que
respiren, mengen... en definitiva: són animals. Però també són éssers
vius, mamífers terrestres, de sang calenta, amb endoesquelet...&lt;/p&gt;
&lt;p&gt;Cadascuna de les diferents categories (classes) a les que pertany en
Renat, li ofereix un conjunt de característiques. En Renat hereta
necessitat de menjar per ser ésser viu, de respirar per ser animal, un
esquelet intern per ser un animal amb endoesquelet, urpes i ullals per
ser felí, etc.&lt;/p&gt;
&lt;p&gt;Diem que Renat és un gat (is-a). I com que els gats són felins, en
Renat és un felí. I com que els felins són animals, en Renat és un
animal. És a dir, la relació is-a és transitiva:&lt;/p&gt;
&lt;blockquote&gt;
Si A és subclasse de B, i B és subclasse de C, llavors A és subclasse de C&lt;/blockquote&gt;
&lt;p&gt;El següent diagrama mostra una jerarquia &lt;em&gt;parcial&lt;/em&gt; dels animals.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Jerarquia d'animals" src="http://apuntstecnics.herokuapp.com/images/poo011.img001.jerarquia_animals.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Al diagrama, les &lt;em&gt;caixes&lt;/em&gt; amb nom representen classes, mentre que les
fletxetes (totes amb nom &lt;em&gt;és un&lt;/em&gt;) representen la relació d'herència
entre dues classes. La classe d'on parteix la fletxa és la que hereta
de la classe destinació de la fletxa.&lt;/p&gt;
&lt;p&gt;Quan una classe A hereta d'una classe B, es diu que:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;A és un B&lt;/li&gt;
&lt;li&gt;A estén B&lt;/li&gt;
&lt;li&gt;A especialitza a B&lt;/li&gt;
&lt;li&gt;A concreta B&lt;/li&gt;
&lt;li&gt;B generalitza a A&lt;/li&gt;
&lt;li&gt;A és subclasse de B&lt;/li&gt;
&lt;li&gt;B és superclasse d'A&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Al diagrama veiem també casos en que una classe estén més d'una
superclasse. Per exemple, els felins són a l'hora carnívors i
mamífers.  Això permet que un felí tingui a l'hora característiques de
Carnívor (ex. menja carn), i a l'hora les de mamífer (ex. alleta les
seves cries).&lt;/p&gt;
&lt;p&gt;D'aquesta possibilitat de disposar de més d'una superclasse pertanyent
a jerarquies diferents, se'n diu &lt;em&gt;herència múltiple&lt;/em&gt; i es produeix
quan :&lt;/p&gt;
&lt;blockquote&gt;
A estén B i A estén C però B no estén C ni C estén B&lt;/blockquote&gt;
&lt;p&gt;Així, tenim que els gats són a l'hora mamífers i carnívors (per ser
felins). El diagrama ens mostra que els gossos són també mamífers i
carnívors, però no són felins. Això explica que, com els gats, mengin
carn (per ser carnívors) i alletin les seves cries (per ser mamífers)
però, a diferència dels gats, no tinguin urpes (per no ser felins).
Això exemplifica el fet que cada classe dins la jerarquia afegeix
característiques particulars a les seves subclasses.&lt;/p&gt;
&lt;div class="section" id="herencia-a-java"&gt;
&lt;h3&gt;Herència a Java&lt;/h3&gt;
&lt;p&gt;En el cas concret de Java:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;Indica l'especialització amb la paraula clau extends.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Renat&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;No admet herència múltiple: cada classe pot ser (i de fet és) només
subclasse d'una única classe &lt;a class="footnote-reference" href="#javainterfaces" id="id1"&gt;[3]&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Al final de la jerarquia, la classe més general és &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quan no s'indica res, en definir una classe, estén per defecte
&lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;. És a dir, és equivalent definir:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Gat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;que definir-ho com:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Gat&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;Object&lt;/tt&gt; aporta una sèrie de característiques a totes les classes de
java, per exemple, el mètode toString(). Mireu la descripció
completa dels membres d'&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html"&gt;Object&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="visualitzacio-del-concepte-d-extensio"&gt;
&lt;h3&gt;Visualització del concepte d'extensió&lt;/h3&gt;
&lt;p&gt;La interfície pública d'una classe està formada per tots els membres
públics que defineix la classe, més tots els membres públics
&lt;a class="footnote-reference" href="#protected" id="id2"&gt;[7]&lt;/a&gt; que hereta.&lt;/p&gt;
&lt;p&gt;Considerem el següent diagrama:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="herència" src="http://apuntstecnics.herokuapp.com/images/poo011.img002.herencia.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Veiem que la classe Felí defineix els membres &lt;em&gt;mf1&lt;/em&gt; i &lt;em&gt;mf2&lt;/em&gt;.  Aquests
membres, en virtut de la relació d'herència, queden inclosos entre els
membres de Gat i de Pantera. Així Gat disposa dels membres que
defineix &lt;em&gt;mg1&lt;/em&gt; i &lt;em&gt;mg2&lt;/em&gt;, més els heretats &lt;em&gt;mf1&lt;/em&gt; i &lt;em&gt;mf2&lt;/em&gt;. És clar, Gat no
disposa dels membres definits per altes subclasses de Felí, com ara el
&lt;em&gt;mp1&lt;/em&gt; que defineix Pantera, tot i que comparteix amb aquesta els membres
de Felí.&lt;/p&gt;
&lt;p&gt;Finalment, Renat, en ser un Gat disposa dels membres &lt;em&gt;mr1&lt;/em&gt;, &lt;em&gt;mr2&lt;/em&gt;
(propis), més &lt;strong&gt;tots&lt;/strong&gt; els de Gat (&lt;em&gt;mg1&lt;/em&gt;, &lt;em&gt;mg2&lt;/em&gt;, &lt;em&gt;mf1&lt;/em&gt; i &lt;em&gt;mf2&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;El diagrama permet visualitzar gràficament el concepte d'extensió
d'una classe. Gat estén els membres de Felí amb els membres propis. És
a dir, Gat inclou &lt;em&gt;tota&lt;/em&gt; la definició de Felí, i a més a més, estén
aquesta amb nous continguts.&lt;/p&gt;
&lt;p&gt;Concretem una mica. Suposem que disposem de les següents
definicions de classe:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Feli&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Menjar&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Nyam Nyam &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Gat&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Feli&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;miola&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;MEEEEEEU&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaGat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;miola&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Menjar&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En aquest exemple podem observar com, des de la classe &lt;em&gt;UsaGat&lt;/em&gt; podem
accedir a un membre de &lt;em&gt;Gat&lt;/em&gt; (el mètode &lt;em&gt;menja()&lt;/em&gt;) que no ha estat
definit a &lt;em&gt;Gat&lt;/em&gt; sinó a la seva superclasse &lt;em&gt;Feli&lt;/em&gt;. Fixem-nos en que
l'accés a un mètode heretat de &lt;em&gt;Gat&lt;/em&gt; des de &lt;em&gt;UsaGat&lt;/em&gt; és idèntic a
l'accés a un mètode definit per &lt;em&gt;Gat&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="comportaments-especifics"&gt;
&lt;h3&gt;Comportaments específics&lt;/h3&gt;
&lt;p&gt;El fet que una subclasse hereti tots els membres d'una superclasse no
vol dir que la subclasse s'hagi de comportar exàctament igual que la
superclasse a l'hora d'executar els serveis que hereta.&lt;/p&gt;
&lt;p&gt;Per exemple, el nostre amic Renat és un gat molt especial. Només menja
després de netejar-se les urpes. Suposem que Renat hereta els mètodes
&lt;tt class="docutils literal"&gt;void menja(Menjar)&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;void netejaUrpes()&lt;/tt&gt;. Així el codi
(parcial) tindria el següent aspecte:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;extens&lt;/span&gt; &lt;span class="n"&gt;Feli&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Menjar&lt;/span&gt; &lt;span class="n"&gt;menjar&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;netejaUrpes&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Menjar&lt;/span&gt; &lt;span class="n"&gt;menjar&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;netejaUrpes&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;menjar&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixem-nos que, si Renat no fa res diferent amb el mètode
&lt;em&gt;netejaUrpes()&lt;/em&gt;, no cal que el torni a definir. Tota instància de
GatRenat, en ser cridat el mètode &lt;em&gt;netejaUrpes()&lt;/em&gt; executarà
directament el mètode de la superclasse de GatRenat. En aquest cas
Gat. Podria passar, com de fet passa en aquest exemple, que Gat heretés
aquest mètode de la seva superclasse Felí. Cap problema els membres de
la superclasse de la meva superclasse, són també els meus membres!&lt;/p&gt;
&lt;p&gt;En canvi, en definir el mètode &lt;em&gt;menja(Menjar)&lt;/em&gt;, qualsevol crida
que es faci a una instància de GatRenat cridarà aquest mètode i no el
de Gat!&lt;/p&gt;
&lt;p&gt;Anem a analitzar el codi de &lt;tt class="docutils literal"&gt;GatRenat.menja(Menjar)&lt;/tt&gt;. La
primera instrucció és una crida a un mètode &amp;quot;propi&amp;quot;. Bé,
&lt;tt class="docutils literal"&gt;netejaUrpes()&lt;/tt&gt; no és un mètode definit per GatRenat. Amb tot, com
que l'hereta, el pot considerar com seu. Fins i tot podria cridar-lo
amb un &lt;tt class="docutils literal"&gt;this.netejaUrpes()&lt;/tt&gt;!.&lt;/p&gt;
&lt;p&gt;Per poder accedir a membres de la superclasse no cal que fem res
especial. Podem accedir-hi com si haguessin estat declarats a la
subclasse &lt;a class="footnote-reference" href="#superprivat" id="id3"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;No passa el mateix amb la segona instrucció. La idea que volem
implementar és que, quan s'ha netejat les urpes, Renat menja com ho
faria qualsevol altre gat.  No pot cridar directament, però, al mètode
&lt;tt class="docutils literal"&gt;menja(Menjar)&lt;/tt&gt;, perquè altrament estaria fent una crida al
mètode que està redefinint.  En aquest cas seria una crida recursiva
que acabaria d'una manera poc dessitjable (amb la pila d'execució
plena i el gat sense arribar a menjar!)&lt;/p&gt;
&lt;p&gt;El problema és que el mètode &lt;tt class="docutils literal"&gt;menja(Menjar)&lt;/tt&gt; heretat pel
GatRenat, ha quedat &lt;em&gt;ocultat&lt;/em&gt; per la nova definició del mètode a dins
de GatRenat.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="ocultacio-i-redefinicio"&gt;
&lt;h3&gt;Ocultació i redefinició&lt;/h3&gt;
&lt;p&gt;El cas d'ocultació (&lt;em&gt;hidding&lt;/em&gt;) ja ens l'hem trobat. Per exemple,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest exemple, la propietat &lt;tt class="docutils literal"&gt;vides&lt;/tt&gt; queda amagada pel paràmetre
amb el mateix nom. La paraula clau &lt;tt class="docutils literal"&gt;this&lt;/tt&gt; ens permet accedir a la
propietat.&lt;/p&gt;
&lt;p&gt;En el cas del mètode &lt;tt class="docutils literal"&gt;menja(Menjar)&lt;/tt&gt; l'ocultació correspon a
una redefinició del mètode que es coneix també com &lt;em&gt;overriding&lt;/em&gt;
&lt;a class="footnote-reference" href="#overridingoverwriting" id="id4"&gt;[2]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Per a accedir des de la subclasse, a membres de la superclasse
redefinits (&lt;em&gt;overrided&lt;/em&gt;) fem servir la paraula clau &lt;tt class="docutils literal"&gt;super&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;De fet, podríem fer servir &lt;tt class="docutils literal"&gt;super&lt;/tt&gt; per a accedir a membres &lt;em&gt;no&lt;/em&gt;
redefinits de la superclasse, de la mateixa manera que podem fer
servir opcionalment el &lt;tt class="docutils literal"&gt;this&lt;/tt&gt; per a referenciar membres pròpis quan
el nom no ha estat ocultat pel d'un paràmetre o variable local.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;      &lt;span class="c1"&gt;// redefinició de m()&lt;/span&gt;
        &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="c1"&gt;// no cal començar amb super, que no és un constructor!&lt;/span&gt;
        &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;

        &lt;span class="c1"&gt;// puc cridar a f() de diferents maneres&lt;/span&gt;
        &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;f&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;f&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;

        &lt;span class="c1"&gt;// però...&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;       &lt;span class="c1"&gt;// és una crida recursiva! compte!&lt;/span&gt;
        &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;            &lt;span class="c1"&gt;// li passa el mateix que a l&amp;#39;anterior!&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="l-herencia-no-permesa"&gt;
&lt;h3&gt;L'herència no permesa&lt;/h3&gt;
&lt;p&gt;De vegades ens pot interessar que una classe no permeti tenir
subclasses. Això pot passar, per exemple, quan la nostra classe és
immutable (el valor de les seves propietats es manté des de
l'assignació). No voldrem que una subclasse pugui permetre perdre
aquesta condició d'immutabilitat.&lt;/p&gt;
&lt;p&gt;Això, que pot semblar una mica estrany si no coneixem el concepte de
&lt;em&gt;polimorfisme&lt;/em&gt;, és quelcom que ha preocupat suficientment als
desenvolupadors de classes com String, com per voler trobar una manera
d'evitar-ho.&lt;/p&gt;
&lt;p&gt;Evitar-ho és molt simple: declares la classe &lt;em&gt;final&lt;/em&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// error de compilació&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Per cert, també pots fer que no es pugui redefinir un mètode de la
mateixa manera: fent-lo &lt;em&gt;final&lt;/em&gt;. Això pot repercutir en una certa
millora d'eficiència en alguns casos (generalment també relacionats
amb el polimorfisme)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="l-herencia-no-desitjada"&gt;
&lt;h3&gt;L'herència no desitjada&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Nota&lt;/strong&gt;: aquesta secció és opcional en una primera visita a la POO.
És perfectament raonable que te la saltis.&lt;/p&gt;
&lt;p&gt;De vegades pot passar que heretem coses que no volem.&lt;/p&gt;
&lt;p&gt;Considera per exemple el cas de l'ornitorinc. Es tracta d'un mamífer.
Sí, té un aspecte una mica... peculiar com es pot començar a apreciar
a la foto &lt;a class="footnote-reference" href="#ornitorinc" id="id5"&gt;[4]&lt;/a&gt;. Aquest animaló d'Australia fa servir ous per
reproduir-se, és verinós, té bec d'ànec, cua de castor i potes de
llúdria. Ah!  l'alletament de les cries es realitza a través de porus
a la pell en comptes de fer servir mamelles, no fos que semblés normal
en alguna cosa... Amb tot, no és una mena de &lt;em&gt;pokemon&lt;/em&gt; sinó què és
real i...  és un mamífer!.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="L'ornitorinc" src="http://apuntstecnics.herokuapp.com/images/poo011.img003.ornitorinc.png" /&gt;
&lt;/div&gt;
&lt;p&gt;És clar, si tens una classe Mamífer ben construïda per la &lt;strong&gt;immensa&lt;/strong&gt;
majoria dels mamífers, probablement l'ornitorinc la posarà molt a
prova!&lt;/p&gt;
&lt;p&gt;Tornem a la POO. Què fem quan heretem un membre que no ens interessa
oferir? Si hem de ser puristes, ens hauríem de replantejar tota la
jerarquia de classes. Com que això no sempre és possible, des de Java
ens queden poques opcions.&lt;/p&gt;
&lt;p&gt;Si el membre heretat era una propietat pública, la podem ocultar
creant una nova propietat a la subclasse amb el mateix nom i
visibilitat privada. Ara tindrem dues còpies de la propietat però al
menys no serà accessible, i si accedim a la instància considerant-la
de la superclasse &lt;a class="footnote-reference" href="#polimorfisme" id="id6"&gt;[6]&lt;/a&gt; encara hi accedirem a la propietat
heretada!&lt;/p&gt;
&lt;p&gt;Si és un mètode públic, no podem fer el mateix que amb una propietat,
perquè l'estem redefinint amb una visibilitat més restrictiva i el
compilador ens retornarà l'error &lt;tt class="docutils literal"&gt;attempting to assign weaker access
privileges; was public&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;El que farem serà:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;documentar a la nostra classe que el membre heretat no es suporta.&lt;/li&gt;
&lt;li&gt;ocultar el membre heretat amb una versió pròpia&lt;/li&gt;
&lt;li&gt;fer que el cos del mètode redefinit llenci l'excepció
&lt;tt class="docutils literal"&gt;UnsuportedOperationException&lt;/tt&gt;. &lt;a class="footnote-reference" href="#excepcions" id="id7"&gt;[5]&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;És a dir, avisarem als desenvolupadors que vulguin fer servir la
nostra classe, que el mètode no està suportat, i en cas que tot i
així l'intentin fer servir, farem que en executar el seu codi se
n'adonin que anàvem seriosament.&lt;/p&gt;
&lt;p&gt;Atenció: aquestes mesures tindran repercussions desagradables si la
nostra classe es fa servir en un context &lt;em&gt;polimòrfic&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-la-classe-gat"&gt;
&lt;h3&gt;Exercici 1. La classe Gat&lt;/h3&gt;
&lt;p&gt;Desenvolupa la classe Gat que contingui tota la funcionalitat de la
classe Renat amb ulls, i que a més permeti definir el nom del gat de
cada instància.&lt;/p&gt;
&lt;p&gt;La classe Gat disposarà del mètode &lt;tt class="docutils literal"&gt;String comEtDius()&lt;/tt&gt; que ens
retornarà el seu nom. No es permetrà crear-ne cap instància sense
nom! (Pista: constructor)&lt;/p&gt;
&lt;p&gt;Finalment, per provar la classe Gat executem el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Descripció: Classe que comprova el funcionament de classe Gat&lt;/span&gt;
&lt;span class="cm"&gt; * Crea tants gats com li ho indiquin els paràmetres de la línia&lt;/span&gt;
&lt;span class="cm"&gt; * de comandes, els pregunta com estan i el seu nom, i mostra els&lt;/span&gt;
&lt;span class="cm"&gt; * resultats per pantalla.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Vector&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaGat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Provador de gats&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;llistaDeGats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="c1"&gt;// crea la llista de gats passats per paràmetre&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nl"&gt;nom:&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;llistaDeGats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hem creat &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;llistaDeGats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;size&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;llistaDeGats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;size&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; gat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; gats&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="nl"&gt;gat:&lt;/span&gt; &lt;span class="n"&gt;llistaDeGats&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;comEtDius&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;estat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getEstatComString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; diu que està &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;estat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Ara el Garbage Collector acabarà amb tots els gats. Ha Ha Ha!&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Executant-lo amb l'ordre&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java UsaGat RenatJR Misifú Garfield &amp;gt; sortida.out
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ens haurà de generar el següent contingut dins del fitxer
&lt;tt class="docutils literal"&gt;sortida.out&lt;/tt&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Provador de gats
RenatJR: he nascut
Misifú: he nascut
Garfield: he nascut
Hem creat 3 gats
El gat RenatJR diu que està estirat
El gat Misifú diu que està estirat
El gat Garfield diu que està estirat
Ara el Garbage Collector acabarà amb tots els gats. Ha Ha Ha!
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nota: el tipus Vector&amp;lt;Gat&amp;gt; és un vector de gats. Pots trobar
l'especificació dels mètodes de la classe &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; a la documentació
oficial de la API de Java. Tot i que la notació pot semblar-te una
mica confosa, simplement està dient que el vector és de gats i no de
cap altra classe. Considera l'exemple com a introducció al concepte de
&lt;em&gt;genèrics&lt;/em&gt; que treballarem posteriorment.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-el-gat-renat-es-un-gat"&gt;
&lt;h3&gt;Exercici 2. El gat Renat és un Gat&lt;/h3&gt;
&lt;p&gt;Modifica la classe GatRenat de manera que ara sigui una subclasse de Gat.&lt;/p&gt;
&lt;p&gt;Copia literalment el programa de l'exercici de l'entorn del Gat Renat
que funcionava amb el gat Renat amb ulls i fes les proves
corresponents. Ho hauràs fet bé si tot funciona i no has hagut de
modificar de cap manera el codi de l'entorn.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-qui-miola"&gt;
&lt;h3&gt;Exercici 3. Qui miola?&lt;/h3&gt;
&lt;p&gt;Ja sabem que el nostre amic Renat és especial en moltes coses. Una
d'elles és a l'hora de miolar. En comptes de fer &amp;quot;MEEEEEEU&amp;quot; com tots els
gats, en Renat fa &amp;quot;MARRAMEEEEEEU&amp;quot;.&lt;/p&gt;
&lt;p&gt;Desenvolupa un nou programa anomenat &lt;em&gt;Mioladors&lt;/em&gt; que creï una instància
del gat Renat i una altra d'un gat genèric anomenat &lt;em&gt;Misifú&lt;/em&gt;
(assegura't que poden parlar).&lt;/p&gt;
&lt;p&gt;Un cop creats, el programa cridarà al mètode &lt;tt class="docutils literal"&gt;miola()&lt;/tt&gt; de tots dos
gats de manera que la sortida indiqui el nom del gat i el resultat de
miolar.&lt;/p&gt;
&lt;p&gt;Respon amb un comentari dins del codi de &lt;em&gt;Mioladors&lt;/em&gt; el perquè de la
sortida de cada crida al &amp;quot;mateix&amp;quot; mètode.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-l-amic-garfield"&gt;
&lt;h3&gt;Exercici 4. L'amic Garfield&lt;/h3&gt;
&lt;p&gt;Al gat Renat li ha sorgit un competidor: l'amic Garfield. En Garfield
és també un gat però afegeix el mètode &lt;tt class="docutils literal"&gt;fesEntremaliadures()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Per no embolicar-la massa, les entremaliadures del Garfield
consistiran en dir una paraulota a escollir aleatòriament d'una llista
de com a mínim 10 elements.&lt;/p&gt;
&lt;p&gt;Crea una nova versió de l'entorn operatiu del gat Renat que permeti
gestionar tant el Renat com el Garfield. Evidentment només permetrà
demanar fer entremaliadures al Garfield.&lt;/p&gt;
&lt;p&gt;L'entorn simplement crearà una instància dels dos gat i les comandes
es prefixaran amb el nom del gat en qüestió.&lt;/p&gt;
&lt;p&gt;Per exemple, si es vol que s'aixequi Garfield, escriurem:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Garfield aixeca&amp;#39;t
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Mentre que si el que volem és que calli Renat, ho especificarem amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Renat calla
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pista: pel tema de les paraulotes, considera el següent codi&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Random&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
 &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaRandom&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;Random&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Random&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
             &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;abs&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nextInt&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
             &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
         &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;hr class="docutils" /&gt;
&lt;p&gt;Notes:&lt;/p&gt;
&lt;table class="docutils footnote" frame="void" id="superprivat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Des d'una classe podem accedir directament a un
membre de la seva superclasse, sempre i quan aquest no hagi estat
redefinit a la subclasse (&lt;em&gt;overrided&lt;/em&gt;) ni hagi estat definit a la
superclasse com a &lt;tt class="docutils literal"&gt;private&lt;/tt&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="overridingoverwriting" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;De vegades, trobarem que en comptes d' &lt;em&gt;overriding&lt;/em&gt;
es refereixen a aquest concepte com a &lt;em&gt;overwriting&lt;/em&gt;. La diferència pot ser
subtil, però existeix. Es diu que quelcom &lt;em&gt;overwrites&lt;/em&gt; una altra cosa quan la
reemplaça completament de manera que ja deixi d'existir la reemplaçada. Podríem
fer servir com a sinònim el terme &lt;em&gt;reemplaça&lt;/em&gt;. Quan la substitució d'una cosa
per una altra té només efecte en alguns casos i no en tots (és a dir, hi ha
casos en que encara es podria fer servir l'anterior) llavors es parla d'
&lt;em&gt;overriding&lt;/em&gt;. En el cas concret en que una subclasse redefineix un mètode que
hereda de la superclasse, la definició original del mètode de la superclasse
encara és usable per altres subclasses que no l'hagin redefinit.&lt;/p&gt;
&lt;p class="last"&gt;Com a traducció podríem fer servir &lt;em&gt;sobreescriure&lt;/em&gt; per &lt;em&gt;overwrite&lt;/em&gt; i
i &lt;em&gt;anteposar&lt;/em&gt; per &lt;em&gt;override&lt;/em&gt;.&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="javainterfaces" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;Java no ofereix herència múltiple per evitar
certs problemes que hi apareixen quan es permet heredar de
múltiples superclasses. Els curiosos podeu cercar el concepte del
&lt;em&gt;Deadly Diamond of Death&lt;/em&gt; per exemple a
&lt;a class="reference external" href="http://es.wikipedia.org/wiki/Problema_del_diamante"&gt;http://es.wikipedia.org/wiki/Problema_del_diamante&lt;/a&gt;&lt;/p&gt;
&lt;p class="last"&gt;Java ofereix, però, un altre mecanisme anomenat &lt;em&gt;interface&lt;/em&gt; que
permet heredar &lt;em&gt;contractes&lt;/em&gt; o signatures de mètodes de múltiples
fonts.&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="ornitorinc" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Foto obtinguda de &lt;a class="reference external" href="http://commons.wikimedia.org"&gt;Wikimedia commons&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="excepcions" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id7"&gt;[5]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si encara no coneixes les excepcions, no t'amoïnis,
que arribaran aviat.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="polimorfisme" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id6"&gt;[6]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Estudiarem més endavant, el concepte de polimorfisme.
En poques paraules, és la possibilitat de fer servir una instància
considerant-la d'un tipus diferent del que és (per exemple, com la
seva superclasse)&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="protected" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[7]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Per ser precisos, hereta tots els mèmbres no privats
de la superclasse. Aquesta puntualització tindrà més sentit quan
coneguem el concepte de &lt;em&gt;visibilitat&lt;/em&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Constructors (part II)</title><link href="http://apuntstecnics.herokuapp.com/constructors-part-ii.html" rel="alternate"></link><updated>2015-02-05T16:30:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:constructors-part-ii.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document és una breu recapitulació dels constructors en java.&lt;/p&gt;
&lt;p&gt;Tots els continguts d'aquest document ja han aparegut en altres
documents, especialment a la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/constructors-part-i.html"&gt;primera part de constructors&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="constructors"&gt;
&lt;h2&gt;Constructors&lt;/h2&gt;
&lt;p&gt;Un constructor és un tipus especial de bloc de codi que en programació
orientada a objectes és cridat la creació d'una nova instància d'una
classe, i que té la funció de preparar la instància per a ser
utilitzada.&lt;/p&gt;
&lt;div class="section" id="definicio-de-constructors"&gt;
&lt;h3&gt;Definició de constructors&lt;/h3&gt;
&lt;p&gt;Per a definir un constructor en Java, hem de crear una &lt;em&gt;mena&lt;/em&gt; de
mètode amb les següents particularitats:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;la signatura del &amp;quot;mètode&amp;quot; no ha d'especificar cap tipus de retorn, ni
tant sols &lt;tt class="docutils literal"&gt;void&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;el nom del &amp;quot;mètode* ha de coincidir amb el de la classe.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En podem crear zero o més constructors per una classe, amb
independència de la seva visibilitat (ex. públics o privats)&lt;/p&gt;
&lt;p&gt;Un exemple de creació de constructors pot ser:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;        &lt;span class="c1"&gt;// una propietat per a il·lustrar la&lt;/span&gt;
                            &lt;span class="c1"&gt;// inicialització amb constructors&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;B&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;            &lt;span class="c1"&gt;// definició d&amp;#39;un constructor sense paràmetres&lt;/span&gt;
        &lt;span class="n"&gt;val&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;     &lt;span class="c1"&gt;// un altre constructor&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;val&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;     &lt;span class="c1"&gt;// incialització de la propietat&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;sval&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="c1"&gt;// i un altre&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;val&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sval&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Com qualsevol altre mètode, el constructor pot ser sobrecarregat
(&lt;em&gt;overloaded&lt;/em&gt;). La única condició és que la llista de tipus dels
arguments ha de ser diferent a cada constructor.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="us-de-constructors"&gt;
&lt;h3&gt;Ús de constructors&lt;/h3&gt;
&lt;p&gt;En Java, la creació d'una nova instància la realitzem mitjançant
l'expressió &lt;tt class="docutils literal"&gt;new &lt;span class="pre"&gt;«Constructor»(«args»)&lt;/span&gt;&lt;/tt&gt; on «Constructor» coincideix
amb el nom de la classe i «args» corresponen als valors
d'inicialització (de vegades no hi ha cap).&lt;/p&gt;
&lt;p&gt;El resultat d'aquesta expressió és una referència a la nova instància
acabada de crear. Sovint aquest resultat és assignat a una variable
del mateix tipus (classe) que a la que pertany el constructor. Ex.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;De vegades pot passar que no ens interessi guardar la referència a la
instància, sinó que només estiguem interessats en executar algun
mètode i després oblidar-nos-en.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaA&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;A&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;    &lt;span class="c1"&gt;// executa el mètode i &amp;quot;oblida&amp;quot; la instància&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fins i tot, pot ser que la instància només ens interessi per passar-li a
algun altre objecte.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaB&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;   &lt;span class="c1"&gt;// passa al constructor de B una nova instància d&amp;#39;A&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Per finalitzar, també és possible fer tot això en qualsevol context que
esperi una instància d'una superclasse de la classe del constructor.
Aquest punt es considera amb molt més detall en el tema de
&lt;a class="reference external" href="poo013.polimorfisme.rst"&gt;polimorfisme&lt;/a&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaB&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixat que al mètode f() de UsaB es crea una instància de B i se li
assigna a una referència de tipus A.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="constructor-per-defecte"&gt;
&lt;h3&gt;Constructor per defecte&lt;/h3&gt;
&lt;p&gt;Al constructor sense paràmetres se li anomena sovint &lt;em&gt;constructor per
defecte&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Si definim una classe sense explicitar cap constructor, Java ens
crearà el constructor per defecte. Per exemple, considerem la classe:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aquest codi és equivalent a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;B&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixem-nos que el constructor no defineix cap instrucció dins del seu cos.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="this"&gt;
&lt;h3&gt;this()&lt;/h3&gt;
&lt;p&gt;Per referir-nos al constructor de la nostra instància podem fer servir
la instrucció:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;On «args» és la llista d'arguments que passem al constructor (pot ser
cap).&lt;/p&gt;
&lt;p&gt;Hem de complir però una condició: la crida a &lt;tt class="docutils literal"&gt;this()&lt;/tt&gt; només pot
estar a la primera línia del cos d'un constructor.&lt;/p&gt;
&lt;p&gt;Aquesta possibilitat ens permet reaprofitar el codi entre
constructors. Per exemple, suposem que tenim una classe que ofereix la
possibilitat d'inicialitzar una o més propietats, mentre que la resta
queden amb valors per defecte.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;enter&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;caracter&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;A&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;A&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;enter&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;caracter&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="super"&gt;
&lt;h3&gt;super()&lt;/h3&gt;
&lt;p&gt;Per referir-nos al constructor de la superclasse, farem servir:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Al igual que amb &lt;tt class="docutils literal"&gt;this()&lt;/tt&gt;, la crida a &lt;tt class="docutils literal"&gt;super()&lt;/tt&gt; ha de ser la
primera instrucció del constructor. Només pot haver una crida a un
constructor.&lt;/p&gt;
&lt;p&gt;En cas que no afegim una crida a un constructor des del nostre
constructor, Java ens afegirà una: al constructor per defecte de la
superclasse.&lt;/p&gt;
&lt;p&gt;Per exemple, considera els següent codi:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;  &lt;span class="c1"&gt;// cos del constructor buit&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;equival a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;De fet, el constructor per defecte de B a l'exemple anterior, podria
contenir instruccions al cos. Sempre i quan no fossin una crida a un
constructor, afegir &lt;tt class="docutils literal"&gt;super()&lt;/tt&gt; com a primera instrucció continuaria
sent equivalent.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Atenció&lt;/strong&gt;: En cas que la superclasse (en el cas de l'exemple
A) no disposi de constructor per defecte, es converteix en
obligatori declarar almenys un constructor i fer la crida des d'aquest
a un constructor vàlid. A l'exemple anterior, considerem el cas en que
la definició de &lt;em&gt;A&lt;/em&gt; fos la següent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// no es disposa de constructor per defecte!&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest cas, les definicions anteriors de la classe B
fallarien en temps de compilació. Per solucionar-ho caldria, o afegir
el constructor per defecte a &lt;em&gt;A&lt;/em&gt; o bé definir a &lt;em&gt;B&lt;/em&gt;
els constructors que facin referència al constructor específic de
la seva superclasse&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// cal passar algun valor enter!&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="visibilitat"&gt;
&lt;h3&gt;Visibilitat&lt;/h3&gt;
&lt;p&gt;Com qualsevol altre mètode, es pot definir la visibilitat d'un constructor.&lt;/p&gt;
&lt;p&gt;En cas que declarem un constructor com a privat, només es podrà fer
servir des de la pròpia classe. És típic especificar constructors
privats en implementacions del patró &lt;a class="reference external" href="http://ca.wikipedia.org/wiki/Patr%C3%B3_singleton"&gt;singleton&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-resum-de-constructors"&gt;
&lt;h3&gt;Exercici 1. Resum de constructors&lt;/h3&gt;
&lt;p&gt;Construeix un esquema/resum amb els diferents aspectes que has vist
dels constructors. Afegeix exemples propis que els il·lustrin.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Polimorfisme</title><link href="http://apuntstecnics.herokuapp.com/polimorfisme.html" rel="alternate"></link><updated>2015-02-05T16:29:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:polimorfisme.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document introdueix al concepte de &lt;em&gt;polimorfisme&lt;/em&gt;. Es tracta
d'una de les conseqüències més útils de l'herència i altres relacions
jeràrquiques.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;Polimorfisme&lt;/h2&gt;
&lt;div class="section" id="definicio"&gt;
&lt;h3&gt;Definició&lt;/h3&gt;
&lt;p&gt;Una possible definició del polimorfisme és: possibilitat que
ofereixen alguns llenguatges de programació de fer servir dades de
diferents tipus d'una manera uniforme.&lt;/p&gt;
&lt;p&gt;De les diferents &amp;quot;varietats&amp;quot; de polimorfisme que els teòrics
discuteixen, en aquest context ens és útil considerar:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;em&gt;polimorfisme de funcions&lt;/em&gt;: mètodes que poden ser aplicats a diferents
tipus d'arguments. És el que aconseguim, per exemple, amb la
sobrecàrrega de mètodes en Java. Ex.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;     &lt;span class="c1"&gt;// versió amb enter&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;    &lt;span class="c1"&gt;// versió amb caràcter&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;       &lt;span class="c1"&gt;// usa la versió amb enter&lt;/span&gt;
        &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;     &lt;span class="c1"&gt;// usa la versió amb caràcter&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;em&gt;polimòrfisme de subclasses&lt;/em&gt;: una variable declarada d'una
determinada classe A, pot fer referència a instàncies de la classe
A, però també de qualsevol classe B que tingui a A com a
avantpassat &lt;a class="footnote-reference" href="#avantpassat" id="id2"&gt;[1]&lt;/a&gt;. Ex.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;C&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;            &lt;span class="c1"&gt;// referència de tipus A&lt;/span&gt;
        &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;    &lt;span class="c1"&gt;// instància de tipus A&lt;/span&gt;
        &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;    &lt;span class="c1"&gt;// instància de tipus B assignada a una referència de tipus A&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="b-es-un-a-pero-a-no-es-un-b"&gt;
&lt;h3&gt;B és un A però A no és un B&lt;/h3&gt;
&lt;p&gt;EL polimorfisme de subclasses ens permet fer servir una variable de
la superclasse per referenciar una instància de la subclasse, però
&lt;strong&gt;no&lt;/strong&gt; a l'inrevés.&lt;/p&gt;
&lt;p&gt;El següent dibuix intenta mostrar-ho gràficament.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Metàfora dels cucurutxos" src="http://apuntstecnics.herokuapp.com/images/poo013.img001.cucurutxos.png" /&gt;
&lt;/div&gt;
&lt;p&gt;A la imatge veiem com un suport (&lt;em&gt;variable&lt;/em&gt;) per cucurutxos de tipus
(&lt;em&gt;classe&lt;/em&gt;) A, pot subjectar (&lt;em&gt;referenciar&lt;/em&gt;) cucurutxos (&lt;em&gt;instàncies&lt;/em&gt;) de
tipus A. Aquest mateix suport, és capaç de subjectar cucurutxos que
estenen el tipus A. En canvi, amb el suport pels cucurutxos de tipus
B, els de tipus A ens &lt;strong&gt;caurien&lt;/strong&gt; a terra!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="assignacio-tardana"&gt;
&lt;h3&gt;Assignació tardana&lt;/h3&gt;
&lt;p&gt;L'&lt;em&gt;assignació tardana&lt;/em&gt; (o &lt;em&gt;late binding&lt;/em&gt;) és la determinació del tipus
de dades/mètode que realment s'executarà és realitza en temps
d'execució i no en la compilació.&lt;/p&gt;
&lt;p&gt;Per exemple, considerem:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;C&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;El codi que finalment es cridarà en la línia 7 sembla que podria ser
determinat en temps de compilació: no hauria de ser el definit pel
mètode &lt;tt class="docutils literal"&gt;A.m()&lt;/tt&gt;?. En canvi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// redefinició de m()&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;n&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// un altre mètode&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;C&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="k"&gt;instanceof&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;   &lt;span class="c1"&gt;// comprova si a és instància de B&lt;/span&gt;
             &lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;         &lt;span class="c1"&gt;// considera a com un B&lt;/span&gt;
             &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;n&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;              &lt;span class="c1"&gt;// ara ja puc accedir a B.n()&lt;/span&gt;
             &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;n&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;         &lt;span class="c1"&gt;// també ho puc fer directament&lt;/span&gt;
         &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;g&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
         &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En aquest segon exemple, la situació no està tan clara. Quin mètode
s'executarà a la línia 10? El del mètode definit a la línia 2 o el de
la 5?&lt;/p&gt;
&lt;p&gt;El compilador no té manera de saber-ho, així que serà la màquina
virtual qui ho determinarà, en funció del tipus de la instància que
finalment estigui rebent &lt;tt class="docutils literal"&gt;C.f(A)&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;A la línia 11 fem servir l'operador &lt;em&gt;instanceof&lt;/em&gt;. Aquest operador ens
retornarà True si, en temps d'execució, el primer operand resulta ser
una instància del tipus del segon operand (o bé d'una subclasse
d'aquest) &lt;a class="footnote-reference" href="#instanceof" id="id3"&gt;[3]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Sovint &lt;em&gt;late binding&lt;/em&gt; es traduït també per &lt;em&gt;assignació dinàmica&lt;/em&gt;, per
contrapossar-ho a l'&lt;em&gt;assignació estàtica&lt;/em&gt; que oferiria el compilador
(si pogués).&lt;/p&gt;
&lt;p&gt;Per cert, aquesta flexibilitat té un preu: es paga amb la velocitat
d'execució. Si estàs desenvolupant un codi on l'eficiència sigui
crítica i saps que un mètode no serà redefinit per una subclasse, pots
facilitar la feina al compilador fent servir &lt;tt class="docutils literal"&gt;final&lt;/tt&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;C&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Amb aquest darrer exemple, el compilador &lt;em&gt;sí&lt;/em&gt; sap quin serà el codi
que s'executarà. Això sí, no intentis crear una subclasse B com la de
fa dos exemples perquè el compilador es queixarà!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="si-pero-quin-metode-es-crida"&gt;
&lt;h3&gt;Sí però... quin mètode es crida&lt;/h3&gt;
&lt;p&gt;Quan ens enfrontem per primer cop al polimorfisme, una de les
dificultats més grans és saber com es realitza finalment aquesta
assignació tardana.&lt;/p&gt;
&lt;p&gt;Per exemple:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;superclasse&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;

 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;  &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;subclasse&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;sm&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// una mena d&amp;#39;àlies de A.m()&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;

 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;C&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;       &lt;span class="c1"&gt;// escriu: superclasse&lt;/span&gt;
         &lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;       &lt;span class="c1"&gt;// escriu: subclasse&lt;/span&gt;
         &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;  &lt;span class="c1"&gt;// escriu... subclasse!&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;       &lt;span class="c1"&gt;// escriu... subclasse!&lt;/span&gt;
         &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sm&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;      &lt;span class="c1"&gt;// escriu: superclasse&lt;/span&gt;

         &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// error de compilació&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sm&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;      &lt;span class="c1"&gt;// error de compilació&lt;/span&gt;
         &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;sm&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// error d&amp;#39;execució&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En l'exemple veiem que a la màquina virtual no hi ha manera de fer-li
executar el mètode definit per A des d'una instància de B (excepte
fent servir l'&amp;quot;&lt;em&gt;àlies&lt;/em&gt;&amp;quot; &lt;tt class="docutils literal"&gt;B.sm()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;L'exemple afegeix, a mode de repàs, alguns errors típics dels que
s'inicien amb aquests temes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="liskov"&gt;
&lt;h3&gt;Liskov&lt;/h3&gt;
&lt;p&gt;El principi de substitució de &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Barbara_Jane_Liskov"&gt;Liskov&lt;/a&gt; diu que:&lt;/p&gt;
&lt;blockquote&gt;
una herència entre dues classes està correctament definida si
&lt;strong&gt;sempre&lt;/strong&gt; es pot fer servir una instància de la subclasse allà on
el programa espera una instància de la superclasse.&lt;/blockquote&gt;
&lt;p&gt;Un exemple típic d'herència incorrecta &lt;a class="footnote-reference" href="#herenciaincorrecta" id="id5"&gt;[2]&lt;/a&gt; és entre
Quadrat i Rectangle (o també Cercle i Oval). Suposa que tens les
següents classes:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Rectangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Rectangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;base&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getBase&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getAltura&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setBase&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;base&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setAltura&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;

 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Quadrat&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Rectangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Quadrat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;costat&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;costat&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;costat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getCostat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;getBase&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setCostat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;costat&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;setBase&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;costat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
         &lt;span class="n"&gt;setAltura&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;costat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Malgrat que, en principi, una herència com aquesta pot semblar una
bona idea (especialment si els «...» inclouen molt de codi, en
realitat amaga una desagradable sorpresa. Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaRectangles&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;rectangles&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
         &lt;span class="n"&gt;rectangles&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
         &lt;span class="n"&gt;rectangles&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Quadrat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
         &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Rectangle&lt;/span&gt; &lt;span class="nl"&gt;r:&lt;/span&gt; &lt;span class="n"&gt;rectangles&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
             &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setBase&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getBase&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// encongeix la base&lt;/span&gt;
         &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En &lt;tt class="docutils literal"&gt;UsaRectangles.f()&lt;/tt&gt; aconseguim que la instància de Quadrat
referenciada per &lt;tt class="docutils literal"&gt;rectangles[1]&lt;/tt&gt; acabi tenint un quadrat de costat 3
i 4!. És a dir, hem aconseguit &lt;em&gt;petar&lt;/em&gt; la coherència de la classe i
tot fent-la servir &amp;quot;legalment&amp;quot;.&lt;/p&gt;
&lt;p&gt;El problema de l'exemple és que un quadrat &lt;strong&gt;no&lt;/strong&gt; es pot considerar un
rectangle en tots els contexts on s'espera que es comporti
correctament un rectangle (ex. quan encongim un dels seus costats)&lt;/p&gt;
&lt;p&gt;En resum, abans de crear una subclasse B d'una classe A, assegurem-nos
que podem dir que tot B &lt;strong&gt;és un&lt;/strong&gt; A. No n'hi ha prou amb que &lt;em&gt;algun&lt;/em&gt; B
és un A, o tot B s'&lt;em&gt;assembla&lt;/em&gt; a A, o &lt;em&gt;és pràcticament un&lt;/em&gt; A &lt;em&gt;excepte
per&lt;/em&gt;..., etc. Els &lt;em&gt;ornitorincs&lt;/em&gt; en POO a la llarga es paguen cars. No
diguis després que no se t'ha avisa't!.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-analisi-d-errors-tipics"&gt;
&lt;h2&gt;Exercici 1. Anàlisi d'errors típics&lt;/h2&gt;
&lt;p&gt;Torna a considerar el codi de l'exemple que apareix a la secció &lt;a class="reference internal" href="#si-pero-quin-metode-es-crida"&gt;Sí
però... quin mètode es crida&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Redacta un breu document en que expliquis el perquè de cada sortida o
error de les instruccions de la funció &lt;tt class="docutils literal"&gt;C.f()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, per la línia 13 es podria dir:&lt;/p&gt;
&lt;blockquote&gt;
Línia 13.  &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;a.m();&lt;/span&gt;&lt;/tt&gt; escriu &lt;em&gt;superclasse&lt;/em&gt; perquè &lt;tt class="docutils literal"&gt;a&lt;/tt&gt; fa
referència a una instància de tipus &lt;tt class="docutils literal"&gt;A&lt;/tt&gt; i aquesta inclou el
mètode &lt;tt class="docutils literal"&gt;void m()&lt;/tt&gt;.&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-molts-gats"&gt;
&lt;h2&gt;Exercici 2. Molts gats&lt;/h2&gt;
&lt;p&gt;Ja se sap, deixes entrar un gat a casa i aviat convida els seus
amics...&lt;/p&gt;
&lt;p&gt;Modifiquem la classe Gat per què el seu constructor mostri el missatge
&amp;quot;«nom»: he nascut!&amp;quot; a menys que es crei com a silenciós.&lt;/p&gt;
&lt;p&gt;Modifica el codi de la classe UsaGat que inclou l'exercici 1 dels
continguts d'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/herencia.html"&gt;herència&lt;/a&gt; de
manera que &lt;em&gt;main()&lt;/em&gt; afegeixi sempre a Renat i a Garfield a la llista.
En crearà una instància de gat per cada nom que rebi per línia de
comandes. En cas que per la línia de comandes es demani al Renat o al
Garfield, indicarà amb un warning que aquests dos ja hi són a la
gàbia.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-l-entorn-operatiu-dels-gats"&gt;
&lt;h2&gt;Exercici 3. L'entorn operatiu dels gats&lt;/h2&gt;
&lt;p&gt;Ara que tenim una quantitat considerable de gats, necessitem disposar
d'un sistema flexible per a poder-los &amp;quot;manipular&amp;quot;.&lt;/p&gt;
&lt;p&gt;Així, crearem una nova versió de l'entorn operatiu dels Gats amb les
següents modificacions.&lt;/p&gt;
&lt;p&gt;El &lt;em&gt;prompt&lt;/em&gt; de l'entorn serà:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;[Gats]:
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Les ordres que se li podran donar, seran:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;crea gat «nom»
mata gat «nom»
llista gats
«nom» com estàs?
«nom» aixeca’t
«nom» seu
«nom» estira&amp;#39;t
«nom» miola
adéu
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Substituirem, es clar «nom» pel nom del gat en qüestió.&lt;/p&gt;
&lt;p&gt;Els missatges que generarà seran:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Creat el gat «nom».
Ja existeix un gat amb el nom «nom».
Matat el gat «nom».
No hi ha cap gat amb el nom «nom».
Els gats de la llista són: «nom», «nom», ..., «nom».
No hi ha cap gat a la llista.
«nom» diu: estic dret.
«nom» diu: estic assegut.
«nom» diu: estic estirat.
«nom» diu: fet.
«nom» diu: ja estava dret.
«nom» diu: ja estava assegut.
«nom» diu: ja estava estirat.
No entenc el missatge.
Adéu.
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Inicialment el programa afegirà automàticament una instància dels gats
Renat i Garfield a la llista de gats. Aquests podran ser eliminats com
qualsevol altre i no s'oferirà a l'usuari la possibilitat d'accedir a
membres de subclasse que no pertanyin a l'hora a la superclasse.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pista&lt;/strong&gt;: en cas que tinguis problemes per extreure la informació de
l'entrada de l'usuari, et proposo que facis una ullada a &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/resources/ComandaText.java"&gt;aquest codi&lt;/a&gt;. Estudia el mètode
&lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; per entendre el seu funcionament.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-l-entorn-operatiu-dels-animals"&gt;
&lt;h2&gt;Exercici 4. L'entorn operatiu dels animals&lt;/h2&gt;
&lt;p&gt;Els amics dels gats potser estaran satisfets amb l'entorn dels gats,
però, que em dius dels amics dels gossos?&lt;/p&gt;
&lt;p&gt;En aquest problema, es demana implementar les classes Animal i Gos.&lt;/p&gt;
&lt;p&gt;Els gossos, pel que respecta a aquest exercici, són molt semblants als
gats. Únicament no miolen. En canvi sí borden. Per aquesta raó, la
classe Animal disposarà del mètode &lt;tt class="docutils literal"&gt;fesSoroll()&lt;/tt&gt; que els Gats
implementaran cridant a &lt;tt class="docutils literal"&gt;miola()&lt;/tt&gt; i els gossos a &lt;tt class="docutils literal"&gt;borda()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Realitza els canvis que siguin necessaris a la classe Gat, de manera
que no calgui modificar cap de les seves subclasses ni cap dels
programes dels exercicis anteriors.&lt;/p&gt;
&lt;p&gt;Finalment implementa un entorn operatiu d'animals, similar al dels
gats però que permeti explotar les funcionalitats que ofereixen els
animals.&lt;/p&gt;
&lt;p&gt;El &lt;em&gt;prompt&lt;/em&gt; de l'entorn serà: &lt;tt class="docutils literal"&gt;[Animals]:&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Les ordres que se li podran donar, seran les mateixes que les de
l'exercici anterior, i a més:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;crea gos «nom»
mata gos «nom»
mata animal «nom»
llista gossos
llista animals
«nom» borda
«nom» fes soroll
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Substituirem, es clar «nom» pel nom del gat en qüestió.&lt;/p&gt;
&lt;p&gt;Els missatges que generarà seran:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Creat el gos «nom».
Ja existeix un animal amb el nom «nom».
Matat el gos «nom».
No hi ha cap gos amb el nom «nom».
No hi ha cap animal amb el nom «nom».
Els gossos de la llista són: «nom», «nom», ..., «nom».
Els animals de la llista són: «nom», «nom», ..., «nom».
No hi ha cap gos a la llista.
No hi ha cap animal a la llista.
«nom» no és cap gat per miolar.
«nom» no és cap gos per bordar.
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Inicialment no hi haurà cap animal a la llista.&lt;/p&gt;
&lt;p&gt;Pista: tot i que pots fer servir l'operador &lt;em&gt;instanceof&lt;/em&gt;, també pots
considerar fer servir tres llistes, una per gats, una altra per gos i
la tercera per animals en general. Si estàs preocupat per que això
pugui representar una duplicació d'informació, recorda que en realitat
d'un mateix gat només tindràs una instància, amb una referència a la
llista d'animals i una altra a la de gats.&lt;/p&gt;
&lt;/div&gt;
&lt;hr class="docutils" /&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="avantpassat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;(B és subclasse de A, o bé d'una classe C que tingui a A com a
avantpassat)&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="herenciaincorrecta" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Sorprenentment, aquestes exemples els
trobarem a molts textos (i cursos) d'introducció a la programació
orientada a objectes, pel concepte d'herència!&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="instanceof" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;No tothom està gaire d'acord amb l'ús &amp;quot;indiscriminat&amp;quot;
del &lt;em&gt;instanceof&lt;/em&gt;. Mira per exemple l'article &lt;a class="reference external" href="http://www.javapractices.com/topic/TopicAction.do?Id=31"&gt;Beware of instanceof
operator&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Paquets i empaquetats</title><link href="http://apuntstecnics.herokuapp.com/paquets-i-empaquetats.html" rel="alternate"></link><updated>2015-02-05T16:28:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:paquets-i-empaquetats.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document aprofita un senzill joc de paraules per a introduir dos
conceptes diferents:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;l'organització de classes en &lt;em&gt;packages&lt;/em&gt; pel seu ús en altres
programes&lt;/li&gt;
&lt;li&gt;l'agrupació de codi en paquets per la seva distribució&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Veuràs que es tracta de dos utilitats del llenguatge. Hi trobaràs un
exercici per a cadascuna d'elles, i un extra per a practicar-les a
l'hora.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-comprensio-dels-packages-en-java"&gt;
&lt;h2&gt;Exercici 1. Comprensió dels &lt;em&gt;packages&lt;/em&gt; en Java&lt;/h2&gt;
&lt;p&gt;Els &lt;em&gt;packages&lt;/em&gt; en Java permeten organitzar els nostres programes. Es
corresponen amb els directoris del sistema de fitxers. Entre altres
coses, ofereixen un mecanisme per a evitar les col·lisions de noms.&lt;/p&gt;
&lt;p&gt;Llegeix la &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/package/index.html"&gt;lliçó sobre packages&lt;/a&gt;
dels tutorials de java, i contesta les següents preguntes en un
document senzill però llegible.&lt;/p&gt;
&lt;p&gt;Es recomana fer una lectura &amp;quot;guiada&amp;quot; per les preguntes. És a dir,
primer llegir la primera pregunta, trobar contestació, llegir la
següent, etc. D'aquesta manera probablement es podrà &lt;em&gt;saltar&lt;/em&gt; el
material de la lliçó pel que encara no estem del tot preparats.&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Segons el tutorial, per a què tres coses serveix un &lt;em&gt;package&lt;/em&gt;?
Perquè, fins ara, no l'hem hagut de fer servir en la definició de
les nostres classes?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Defineix amb les teves paraules què és un &lt;em&gt;package&lt;/em&gt; en Java.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;En quin &lt;em&gt;package&lt;/em&gt; es troben les classes fonamentals de Java, com
ara &lt;em&gt;String&lt;/em&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Com s'indica que una classe pertany a un &lt;em&gt;package&lt;/em&gt;? Indica la o les
sentències necessàries pel &lt;em&gt;package&lt;/em&gt; org.estudi_poo.«el teu
nom» (per exemple, &lt;em&gt;org.estudi_poo.anna&lt;/em&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A quants packages pot pertànyer una mateixa classe?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Què pot aparèixer abans de les sentències que indiquen el &lt;em&gt;package&lt;/em&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quantes classes públiques poden aparèixer en un mateix fitxer de
codi?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;És recomanable incloure més d'una classe en un mateix fitxer de
codi?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Desenvolupa la classe HolaPackage que pertany al &lt;em&gt;package&lt;/em&gt; anterior i
que està formada d'un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que simplement escriu per sortida
estàndard el missatge: &amp;quot;Hola des del &lt;em&gt;package&lt;/em&gt; «nom del package»&amp;quot;.
Inclou el codi en aquest document.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quina visibilitat tindrà una classe no declarada com a pública?
&lt;a class="footnote-reference" href="#packageprivate" id="id1"&gt;[1]&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A quin &lt;em&gt;package&lt;/em&gt; pertanyen les classes quan no se li declara
explícitament cap?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quina condició s'ha de complir per a poder utilitzar en un mateix
codi, dues classes amb exactament el mateix nom?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Què ens recomanen per evitar que dos desenvolupadors creïn
&lt;em&gt;packages&lt;/em&gt; amb exactament el mateix nom?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;De quines tres maneres es pot fer servir un membre públic d'un
&lt;em&gt;package&lt;/em&gt;? Posa un exemple de cada considerant la classe GatRenat
que es troba al &lt;em&gt;package&lt;/em&gt; &lt;tt class="docutils literal"&gt;org.gatsdelmon&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Què vol dir que els &lt;em&gt;packages&lt;/em&gt; no estan relacionats jeràrquicament?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quin nom recomanen pel fitxer on col·locar el codi font d'una
classe? En quin directori recomanen col·locar el fitxer?
Il·lustra-ho amb un exemple considerant la classe GatRenat que
pertany al &lt;em&gt;package&lt;/em&gt; &lt;tt class="docutils literal"&gt;org.gatsdelmon&lt;/tt&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Suposa que tens GatRenat.class del &lt;em&gt;package&lt;/em&gt; &lt;tt class="docutils literal"&gt;org.gatsdelmon&lt;/tt&gt; ben
col·locat al següent directori &lt;tt class="docutils literal"&gt;~/estudi/poo/&lt;/tt&gt; indica que ha de
contenir la variable de sistema &lt;tt class="docutils literal"&gt;CLASSPATH&lt;/tt&gt; perquè puguem
executar el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; de GatRenat (en cas que en tingués) fent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java org.gatsdelmon.GatRenat
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;L'opció &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-d&lt;/span&gt; «path»&lt;/tt&gt; de &lt;tt class="docutils literal"&gt;javac&lt;/tt&gt; ens permet especificar una
destinació diferent pels &lt;tt class="docutils literal"&gt;.class&lt;/tt&gt;. Fent servir aquesta opció,
col·loca els &lt;tt class="docutils literal"&gt;.class&lt;/tt&gt; en un directori diferent d'on estan
els fonts, i canvia convenientment &lt;tt class="docutils literal"&gt;CLASSPATH&lt;/tt&gt; de manera que es
pugui executar GatRenat amb la comanda del punt anterior. Indica la
comanda completa de compilació que has fet servir, i el contingut
del teu &lt;tt class="docutils literal"&gt;CLASSPATH&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Canvia el missatge del HolaPackage.java de manera que mostri el
resultat de la crida a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getProperty&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;java.class.path&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Recompila i executa. Què es mostra?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Crea la classe Salutator amb el següent contingut i afegeix-la al
&lt;em&gt;package&lt;/em&gt; org.estudi_poo.«el teu nom»&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Salutator&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kd"&gt;private&lt;/span&gt;   &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;varPrivada&lt;/span&gt;   &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt;    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;varPublica&lt;/span&gt;   &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="kd"&gt;protected&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;varProtegida&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
               &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;varPackage&lt;/span&gt;   &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;saluda&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Salutator diu: Hola Món!&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Des del &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; de la classe HolaPackage afegeix una crida al
mètode saluda() de Salutator, i mostra el valor de totes les
propietats de Salutator que es puguin &amp;quot;veure&amp;quot; des de HolaPackage
(pots fer-ho amb prova i error).
Indica perquè és possible veure les variables que es poden i perquè
no es pot les que no es poden. &lt;a class="footnote-reference" href="#packageprivate" id="id2"&gt;[1]&lt;/a&gt;
Inclou el codi d'ambdues classes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Crea ara una nova versió de HolaPackage, aquest cop dins del
&lt;em&gt;package&lt;/em&gt; org.estudi_poo.knuth&lt;/p&gt;
&lt;p&gt;Modifica el que calgui perquè pugui accedir a la classe Salutator
del &lt;em&gt;package&lt;/em&gt; org.estudi_poo.«el teu nom»&lt;/p&gt;
&lt;p&gt;Indica perquè es poden/es deixa de poder accedir a membres del teu
Salutator des de l'HolaPackage del mestre Knuth.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Crea una nova versió de Salutator, aquest cop dins del &lt;em&gt;package&lt;/em&gt; de
Knuth i canvia el codi de saluda() per&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;saluda&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Knuth diu: Hola Món!&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Modifica HolaPackage de Knuth de manera que faci una crida a
saluda() del Salutator teu i a continuació del Salutator de Knuth.&lt;/p&gt;
&lt;p&gt;Inclou el codi de les dues classes de Knuth.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-fitxers-jar"&gt;
&lt;h2&gt;Exercici 2. Fitxers jar&lt;/h2&gt;
&lt;p&gt;Java ens ofereix la possibilitat d'empaquetar el nostre codi en un sol
fitxer que anomena jar. Empaquetant d'aquesta manera, podem distribuir
còmodament i eficient la nostra aplicació.&lt;/p&gt;
&lt;p&gt;En aquest problema construirem un fitxer jar de la nostra aplicació
HolaPackage (la del nostre paquet no la de Knuth) realitzada a
l'exercici anterior.&lt;/p&gt;
&lt;p&gt;Com que el que realitzarem és molt bàsic, si tens interès en conèixer
més detalls d'aquesta eina, pots considerar el &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/deployment/jar/index.html"&gt;tutorial d'oracle pel
jar&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;En qualsevol cas, segueix les passes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Col·locat al directori que conté la base del teu package (és a dir
la carpeta que conté org/ si has seguit els exemples anteriors)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Executa la següent comanda:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;jar cvf elteunom.jar org/estudi_poo/«elteunom»/*.class
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Copia el fitxer resultant a /tmp i fes&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;unzip elteunom.jar
&lt;span class="nv"&gt;$ &lt;/span&gt;cat META-INF/MANIFEST.MF
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Hauria d'aparèixer quelcom semblant a:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Manifest-Version: 1.0
Created-By: 1.6.0_15 (Sun Microsystems Inc.)
&lt;/pre&gt;
&lt;p&gt;En un moment veurem per a què serveix aquest fitxer.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Ara, si intentes executar el teu programa veuràs que no es pot&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java -jar elteunom.jar
Failed to load Main-Class manifest attribute from
elteunom.jar
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;El problema està en que no hem indicat al .jar la classe principal
de la nostra aplicació. Per fer-ho, hem de completar el fitxer
&lt;tt class="docutils literal"&gt;MANIFEST.MF&lt;/tt&gt; que hem vist abans.&lt;/p&gt;
&lt;p&gt;El manifest és un fitxer que conté informació de l'aplicació
guardada en el fitxer jar. Aquesta informació pot ser molt variada
com ara control de versió, el classpath, o la signatura
electrònica. De moment, ens interessarem en indicar la classe
principal (la que conté el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Edita un fitxer de text (per exemple amb nom manifest.txt) i
inclou-hi el següent contingut:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Main-Class: org.estudi_poo.«elteunom».HolaPackage
                                                    &amp;lt;--- salt de línia
&lt;/pre&gt;
&lt;p&gt;Assegura't que el fitxer acaba amb un salt de línia, o no
interpretarà bé el contingut.&lt;/p&gt;
&lt;p&gt;Ara construeix el jar amb la comanda (vigila on has posat manifest.txt)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;jar cvfm «elteunom».jar «camí al manifest»/manifest.txt org/estudi_poo/«elteunom»/*.class
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I executa el teu programa&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java -jar «elteunom».jar
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Torna a mirar el contingut del fitxer &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;META-INF/MANIFEST.MF&lt;/span&gt;&lt;/tt&gt; que
ara hauria de contenir una nova línia&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;D'aquest exercici no cal que lliuris res!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-entorn-operatiu-dels-animals-jar"&gt;
&lt;h2&gt;Exercici 3. Entorn operatiu dels animals.jar&lt;/h2&gt;
&lt;p&gt;Modifica l'exercici de l'entorn operatiu dels animals de manera que
ara totes les classes pertanyin al package
&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;org.estudi_poo.«elteunom».animals&lt;/span&gt;&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Empaqueta-ho tot a un .jar que permeti executar l'entorn directament.
Lliura el .jar amb els .class i els fitxers font.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="packageprivate" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;[1]&lt;/td&gt;&lt;td&gt;&lt;em&gt;(&lt;a class="fn-backref" href="#id1"&gt;1&lt;/a&gt;, &lt;a class="fn-backref" href="#id2"&gt;2&lt;/a&gt;)&lt;/em&gt; Aquesta pregunta pot resultar una mica difícil si
encara no tens més que nocions del concepte de &lt;em&gt;visibilitat&lt;/em&gt; en Java.
Consell: fes el que puguis ara i, quan ja sàpigues més de visibilitats,
torna i revisa-ho. El primer intent t'ajudarà a entendre millor la
visibilitat i els &lt;em&gt;packages&lt;/em&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Visibilitat</title><link href="http://apuntstecnics.herokuapp.com/visibilitat.html" rel="alternate"></link><updated>2015-02-05T16:27:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:visibilitat.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;A continuació trobaràs una petita guia per obtenir una visió precisa
del control d'accés en el llenguatge de programació Java.&lt;/p&gt;
&lt;p&gt;El document consta d'un únic exercici que et dirigirà a una secció del
tutorial &amp;quot;oficial&amp;quot; de java, i a partir d'una sèrie de preguntes
concretes, t'ajudarà a plantejar-te els punts més rellevants del
document, i del tema.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-visibilitat"&gt;
&lt;h2&gt;Exercici Visibilitat&lt;/h2&gt;
&lt;p&gt;Llegeix l'article &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html"&gt;Controlling Access to Members of a Class&lt;/a&gt;
i contesta les preguntes que apareixen a continuació.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;per a què serveix un modificador de nivell d'accés?&lt;/li&gt;
&lt;li&gt;quants nivells de control d'accés n'hi ha a java. Indica què afecta
cadascun d'ells&lt;/li&gt;
&lt;li&gt;quins modificadors es poden indicar a la definició d'una classe?&lt;/li&gt;
&lt;li&gt;puc indicar que una classe és privada amb &lt;em&gt;private&lt;/em&gt;?&lt;/li&gt;
&lt;li&gt;quins són els modificadors que es poden indicar per una propietat
d'una classe? i sinó s'indica cap?&lt;/li&gt;
&lt;li&gt;quins són els modificadors que es poden indicar per un mètode d'una
classe? i sinó s'indica cap?&lt;/li&gt;
&lt;li&gt;suposa que tens una propietat a una superclasse marcada com a
&lt;em&gt;public&lt;/em&gt; i extens la superclasse amb una subclasse que pertany a un
altre &lt;em&gt;package&lt;/em&gt;. Pot un mètode de la subclasse accedir a la
propietat directament?&lt;/li&gt;
&lt;li&gt;suposa que tens una propietat a una superclasse marcada com a
protected i extens la superclasse amb una subclasse que pertany a
un altre &lt;em&gt;package&lt;/em&gt;. Pot un mètode de la subclasse accedir a la
propietat directament?&lt;/li&gt;
&lt;li&gt;suposa que tens una propietat a una superclasse marcada com a
&lt;em&gt;private&lt;/em&gt; i extens la superclasse amb una subclasse que pertany a
un altre &lt;em&gt;package&lt;/em&gt;. Pot un mètode de la subclasse accedir a la
propietat directament?&lt;/li&gt;
&lt;li&gt;suposa que tens una propietat a una superclasse marcada com a
&lt;em&gt;package&lt;/em&gt; i extens la superclasse amb una subclasse que pertany a
un altre &lt;em&gt;package&lt;/em&gt;. Pot un mètode de la subclasse accedir a la
propietat directament?&lt;/li&gt;
&lt;li&gt;amb quin modificador es pot evitar que un membre d'una classe no
pugui accedir a una propietat de la mateixa classe?&lt;/li&gt;
&lt;li&gt;com es podria permetre canviar el valor d'una propietat d'una
classe marcada com a &lt;em&gt;private&lt;/em&gt;, des d'un mètode d'una altra classe
que no es troba a la jerarquia ni al &lt;em&gt;package&lt;/em&gt; de la primera ?&lt;/li&gt;
&lt;li&gt;explica el valor 'Y' de la columna Gamma de l'exemple.&lt;/li&gt;
&lt;li&gt;explica el valor 'N' de la columna Beta de l'exemple.&lt;/li&gt;
&lt;li&gt;quin és el modificador que recomanen usar per defecte a l'article?
Perquè creus?&lt;/li&gt;
&lt;li&gt;quin és el modificador que recomanen evitar per defecte a
l'article? Quina raó donen? I llavors, perquè ells mateixos el fan
servir als seus exemples?&lt;/li&gt;
&lt;li&gt;perquè creus que és segur marcar com a &lt;em&gt;public&lt;/em&gt; les constants?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Classes abstractes</title><link href="http://apuntstecnics.herokuapp.com/classes-abstractes.html" rel="alternate"></link><updated>2015-02-05T16:26:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:classes-abstractes.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document introdueix l'alumne de programació orientada a
objectes al concepte de classe abstracta. Està estructurat en una
primera visió teòrica del concepte, per després oferir uns exercicis
que permetin donar-li un sentit pràctic.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;Classes abstractes&lt;/h2&gt;
&lt;p&gt;A una jerarquia de classes, es pressuposa que la superclasse és més
&lt;em&gt;abstracta&lt;/em&gt; que la subclasse. Sovint recollim els elements comuns
d'unes classes i els agrupem en una superclasse (per exemple, la
classe Animal és creada a partir d'elements comuns de Gat i Gos).&lt;/p&gt;
&lt;p&gt;Quan la raó principal de crear una classe és per actuar com a
agrupador d'elements comuns de les seves subclasses, però no es pretén
que existeixin instàncies d'aquesta classe, aquesta classe li diem
classe abstracta.&lt;/p&gt;
&lt;p&gt;A l'exemple dels animals, té sentit instanciar un Gat o un Gos. En
podem fer coses amb ells com, demanar-los que miolin o que bordin (que
facin soroll). Quina &amp;quot;pinta&amp;quot; té però una instància d'Animal? Quin
soroll ha de fer un animal quan se li demani &lt;tt class="docutils literal"&gt;fesSoroll()&lt;/tt&gt;?&lt;/p&gt;
&lt;p&gt;D'una classe abstracta no es poden fer instàncies, però poden contenir
qualsevol dels elements que una classe &amp;quot;normal&amp;quot; tingui permès. A més a
més, pot fer servir el modificador abstract per a indicar mètodes que
han de ser implementats per les subclasses. En el moment que una
classe fa servir el modificador abstract en algun dels seus mètodes,
es torna abstracta.&lt;/p&gt;
&lt;p&gt;En cas que tots els mètodes d'una classe siguin abstractes, és
preferible fer servir el concepte d'interface que veurem més endavant.&lt;/p&gt;
&lt;p&gt;Una subclasse d'una classe abstracta pot ser també abstracta.
Simplement cal no implementar algun dels mètodes de la superclasse.&lt;/p&gt;
&lt;p&gt;Considerem el clàssic exemple de les figures geomètriques. Les figures
geomètriques, com ara cercles, quadrats, triangles..., tenen alguns
elements en comú. Per exemple, totes elles ocupen un àrea i se'ls pot
mesurar el perímetre. En paraules de la POO, totes les figures
disposen de dos mètodes: getArea() i getPerimetre() que retornen
respectivament l'àrea i el perímetre corresponents a la figura.&lt;/p&gt;
&lt;p&gt;És a dir, les classes Cercle i Rectangle serien subclasses de la
classe Figura. Ara bé, com calculem l'àrea d'una instància de la
classe Figura? No té sentit, oi? Per tant, la classe Figura seria una
classe abstracta.&lt;/p&gt;
&lt;p&gt;La implementació de la classe Figura vindria a ser quelcom similar a:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;abstract&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Figura&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;abstract&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;getArea&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;abstract&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;getPerimetre&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixa't en l'ús del modificador abstract als diferents mètodes.&lt;/p&gt;
&lt;p&gt;La implementació de la classe Cercle podria ser:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Cercle&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Figura&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Cercle&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Cercle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;radi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;getArea&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pow&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getRadi&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PI&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;getPerimetre&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PI&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;getRadi&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;getRadi&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixat en que l'herència s'indica exactament igual que amb una
superclasse no abstracta (concreta)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-figures"&gt;
&lt;h2&gt;Exercici 1. Figures&lt;/h2&gt;
&lt;p&gt;Implementaren un package anomenat
&lt;em&gt;org.estudi_poo.«elteunom».figures&lt;/em&gt; que contindrà diferents
figures geomètriques. De moment només: cercle (que ja el tens),
rectangle, quadrat i triangle.&lt;/p&gt;
&lt;p&gt;Nota: si et passa pel cap, venç la temptació de fer Quadrat una
subclasse de Rectangle (recorda el principi de Liskov)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-entorn-d-animals-abstractes"&gt;
&lt;h2&gt;Exercici 2. Entorn d'Animals abstractes&lt;/h2&gt;
&lt;p&gt;Torna a considerar l'exercici de &lt;em&gt;l'entorn operatiu dels animals&lt;/em&gt; del
tema de &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/polimorfisme.html"&gt;polimorfisme&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Modifica la jerarquia d'animals de manera que ara la classe Animal
sigui abstracta. Segurament l'únic mètode que necessites construir com
a &lt;em&gt;abstract&lt;/em&gt; és el de &lt;tt class="docutils literal"&gt;Animal.fesSoroll()&lt;/tt&gt;. Fixa't que ja no et
caldrà fer res estrany com deixar el cos del mètode en blanc, ja que
ara ni tindrà cos! Té més sentit, no?&lt;/p&gt;
&lt;p&gt;Si ho vas fer bé, tota la resta hauria de compilar i executar sense
més canvi. Altrament, analitza si és raonable fer els canvis que
t'obliga aquesta nova versió.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-mes-animals"&gt;
&lt;h2&gt;Exercici 3. Més animals&lt;/h2&gt;
&lt;p&gt;Se't proposa ara crear una nova jerarquia d'animals. Per les
necessitats de l'exercici, el que farem serà simplificar la classe
Animal de l'exercici anterior. Evidentment, no s'espera que aquesta
versió sigui compatible amb exercicis previs, eh?&lt;/p&gt;
&lt;p&gt;En aquest cas, Animal únicament tindrà els següents mètodes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;Animal(String nom)&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String getNom()&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String moute()&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String menja()&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String fesSoroll()&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String dorm()&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Fixa't que tant el constructor, com &lt;tt class="docutils literal"&gt;getNom()&lt;/tt&gt; poden ser
implementats perfectament per la classe abstracta Animal, mentre que
la resta són específics de cada animal concret.&lt;/p&gt;
&lt;p&gt;Implementa les subclasses d'animal Gat, Gos, Canari i Lleo, de manera
que es pugui executar el següent codi.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;estudi_poo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="n"&gt;elteunom&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;animals&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Vector&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaAnimals&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;llistaAnimals&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="c1"&gt;// crea uns quants animals&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Fido&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Canari&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Piolin&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Lleo&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Bonifaci&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="c1"&gt;// fa que tots els animals facin les diferents accions&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt; &lt;span class="nl"&gt;a:&lt;/span&gt; &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt;     &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;moute&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; fa: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; fa: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fesSoroll&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; fa: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;dorm&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En executar-lo, cal que es generi el següent resultat per sortida
estàndard:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Fido camina
Fido fa: nyam nyam
Fido fa: bof bof
Fido fa: ZZZzzzz
Renat camina
Renat fa: myam myam
Renat fa: meww
Renat fa: ZZZzzzz
Piolin vola
Piolin fa: pyam pyam
Piolin fa: piu piu
Piolin fa: pi-pi-pi-pi
Bonifaci camina
Bonifaci fa: gram gram
Bonifaci fa: grrrr
Bonifaci fa: ZRrrrrr
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Avís&lt;/strong&gt;: és possible que trobis problemes per a adaptar codi
d'exercicis previs que aparentment s'assemblen a les classes d'aquest.
Com que hi ha prou canvis (ex. les instàncies de les classes i
subclasses d'Animal, mai no mostren missatges per sortida estàndard
sinó que el retornen) és recomanable començar tot el codi d'aquest
exercici des de zero.&lt;/p&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Interfaces</title><link href="http://apuntstecnics.herokuapp.com/interfaces.html" rel="alternate"></link><updated>2015-02-05T16:25:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:interfaces.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document ofereix una breu introducció al concepte
d'&lt;em&gt;interface&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Es tracta d'un mecanisme molt flexible que permet definir el
comportament de les classes, de tal manera que de vegades puguem
arribar a no necessitar conèixer amb quina classe concreta estem
treballant mentre tinguem clar que respon al comportament que esperem.&lt;/p&gt;
&lt;p&gt;El tema s'inicia amb l'anàlisi de les possibilitats d'implementació
d'un cas concret en forma d'exercici. Tot seguit es fa una discussió
més teòrica, per acabar amb uns exercicis que permeten posar en
pràctica els continguts.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="animals-de-companyia"&gt;
&lt;h2&gt;Animals de companyia&lt;/h2&gt;
&lt;p&gt;Considera la jerarquia de l'exercici dels animals abstractes.&lt;/p&gt;
&lt;p&gt;Imagina que ara volguéssim implementar els mètodes propis d'un animal
de companyia (&lt;tt class="docutils literal"&gt;siguesAmistos()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;juga()&lt;/tt&gt;)&lt;/p&gt;
&lt;p&gt;Pensa en les diferents possibilitats i considera els seus avantatges i
inconvenients:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;implementar els mètodes a la classe Animal&lt;/li&gt;
&lt;li&gt;indicar els mètodes com a abstractes a la classe Animal i
implementar-los a les subclasses&lt;/li&gt;
&lt;li&gt;Col·loca els mètodes només allà on tenen sentit (ex. al Gos i al
Gat)&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="section" id="proposta-de-respostes"&gt;
&lt;h3&gt;Proposta de respostes&lt;/h3&gt;
&lt;p&gt;No les miris fins que no hagis intentat donar una resposta pròpia!&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;implementar els mètodes a la classe Animal&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;PROS:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;totes les subclasses d'Animal hereten automàticament els mètodes&lt;/li&gt;
&lt;li&gt;no cal modificar les subclasses existents ni adaptar les futures&lt;/li&gt;
&lt;li&gt;les subclasses poden ser usades polimòrficament com a animals de
companyia&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;CONS:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;un lleó com a animal de companyia?&lt;/li&gt;
&lt;li&gt;tots els animals juguen igual?&lt;/li&gt;
&lt;/ul&gt;
&lt;ol class="arabic simple" start="2"&gt;
&lt;li&gt;indicar els mètodes com a abstractes a la classe Animal i
implementar-los a les subclasses&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;PROS:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;permet evitar el segon problema de la primera opció: els diferents
animals podran implementar els mètodes a la seva manera.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;CONS:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;cal modificar totes les subclasses (fins i tot les que no
corresponen a animals de companyia)&lt;/li&gt;
&lt;li&gt;queda lleig: sí, encara que no faci res, un Lleó indica (amb la seva
interfície) que ofereix el mètode siguesAmistos()&lt;/li&gt;
&lt;/ul&gt;
&lt;ol class="arabic simple" start="3"&gt;
&lt;li&gt;Col·loca els mètodes només allà on tenen sentit (ex. al Gos i al Gat)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;PROS:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;no cal preocupar-se de lleons llepant-te la cara en arribar a casa&lt;/li&gt;
&lt;li&gt;no cal modificar res de les classes que no són animals de companyia&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;CONS:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;no podem fer servir polimorfisme amb les subclasses que són animals
de companyia&lt;/li&gt;
&lt;li&gt;com que no hi ha cap &amp;quot;contracte&amp;quot; cada subclasse pot anomenar els
mètodes de diferent manera: ex. siguesBonGosset() en comptes de
siguesAmistos()&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Sembla com si necessitéssim una altra superclasse per Gos i Gat?&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="multiples-superclasses"&gt;
&lt;h2&gt;Múltiples superclasses?&lt;/h2&gt;
&lt;p&gt;A això s'anomena herència múltiple i, com a aquestes alçades
probablement ja sabràs, Java no l'admet! En canvi, ens ofereix una
alternativa anomenada &lt;em&gt;interface&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Una &lt;em&gt;interface&lt;/em&gt; de Java especifica un conjunt de constants i signatures
de mètodes que hauran de ser definits per qualsevol classe que
implementi la &lt;em&gt;interface&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Un dels avantatges de les &lt;em&gt;interfaces&lt;/em&gt; és la possibilitat de
desenvolupar independentment peces de codi que només es comprometen a
respectar &lt;em&gt;un contracte&lt;/em&gt;: la implementació de la &lt;em&gt;interface&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Donat que una classe pot implementar un nombre indefinit d'&lt;em&gt;interfaces&lt;/em&gt;,
aquest mecanisme resol parcialment l'aparent limitació del Java amb
l'herència múltiple.&lt;/p&gt;
&lt;p&gt;Considerem el següent exemple adaptat del &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/"&gt;tutorial oficial de Java&lt;/a&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="nc"&gt;Conduible&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
   &lt;span class="c1"&gt;// declaracions de constants (si escau)&lt;/span&gt;
   &lt;span class="c1"&gt;// signatures dels mètodes&lt;/span&gt;
   &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;gira&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Direction&lt;/span&gt; &lt;span class="n"&gt;direccio&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;   &lt;span class="c1"&gt;// Un enumerat amb els valors LEFT i RIGHT&lt;/span&gt;
              &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;velocitatInicial&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;velocitatFinal&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
   &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;canviaCarril&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Direction&lt;/span&gt; &lt;span class="n"&gt;direccio&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;velocitatInicial&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;velocitatFinal&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
   &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;senyalitzaGir&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Direction&lt;/span&gt; &lt;span class="n"&gt;direccio&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;activar&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
   &lt;span class="c1"&gt;// més signatures de mètodes&lt;/span&gt;
   &lt;span class="c1"&gt;// ...&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixa't que les signatures dels mètodes no tenen claus i finalitzen amb
punt i coma. Et sona, oi?&lt;/p&gt;
&lt;p&gt;Per a fer servir la &lt;em&gt;interface&lt;/em&gt; Conduible podem implementar:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Seat600&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;Conduible&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
   &lt;span class="c1"&gt;// mètodes definits per Conduible&lt;/span&gt;
   &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;senyalitzaGir&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Direction&lt;/span&gt; &lt;span class="n"&gt;direccio&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;activar&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="c1"&gt;//codi per activar i desactivar els intermitents del Seat 600&lt;/span&gt;
      &lt;span class="c1"&gt;// ...&lt;/span&gt;
   &lt;span class="o"&gt;}&lt;/span&gt;
   &lt;span class="c1"&gt;// ...&lt;/span&gt;
   &lt;span class="c1"&gt;// altres membres de la classe independents de la interface i&lt;/span&gt;
   &lt;span class="c1"&gt;// no visibles als usuaris d&amp;#39;aquesta&lt;/span&gt;
   &lt;span class="c1"&gt;// ...&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixa't que, per a implementar una &lt;em&gt;interface&lt;/em&gt;, ho indiquem amb
implements. Per altra banda, implementar un mètode de la &lt;em&gt;interface&lt;/em&gt;
implica simplement escriure el mètode incloent el cos.&lt;/p&gt;
&lt;p&gt;Per què la classe implementi correctament una &lt;em&gt;interface&lt;/em&gt; cal que
implementi &lt;strong&gt;tots&lt;/strong&gt; els mètodes especificats per la &lt;em&gt;interface&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="classes-subclasses-classes-abstractes-interfaces"&gt;
&lt;h2&gt;Classes, subclasses, classes abstractes, &lt;em&gt;interfaces&lt;/em&gt;?&lt;/h2&gt;
&lt;p&gt;Recepta per a decidir si vols una classe, una subclasse, una classe
abstracta o una &lt;em&gt;interface&lt;/em&gt;.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Si de la teva nova classe només pots dir que és un &lt;em&gt;Object&lt;/em&gt; (&lt;em&gt;is a&lt;/em&gt;),
llavors fes una classe concreta&lt;/li&gt;
&lt;li&gt;Si la teva nova classe correspon a una versió més específica d'una
altra existent, fes una subclasse (recorda el principi de
substitució de Liskov)&lt;/li&gt;
&lt;li&gt;Si et cal realitzar una plantilla per a un conjunt de classes i
disposes d'algun codi que totes les subclasses podrien fer servir,
i no t'interessa que es pugui instanciar aquesta classe, crea una
classe abstracta&lt;/li&gt;
&lt;li&gt;Si et cal definir un rol al que altres classes hagin de jugar, amb
independència de la posició d'aquestes a l'arbre jeràrquic, fes-ho
amb una interfície.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-la-interficie-d-animals-de-companyia"&gt;
&lt;h2&gt;Exercici 1. La interfície d'animals de companyia&lt;/h2&gt;
&lt;p&gt;Defineix la interfície AnimalDeCompanyia amb els mètodes &lt;tt class="docutils literal"&gt;String
siguesAmistos()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;String juga()&lt;/tt&gt;. Fes que Gos i Gat implementin
la interfície (Canari no cal)&lt;/p&gt;
&lt;p&gt;Aconsegueix que funcioni el codi següent:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.estudi_poo.&lt;/span&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="n"&gt;elteunom&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;animals&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Vector&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaAnimals&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;llistaAnimals&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;AnimalDeCompanyia&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;llistaAnimalsDeCompanyia&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;AnimalDeCompanyia&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="c1"&gt;// crea uns quants animals&lt;/span&gt;
        &lt;span class="n"&gt;Gos&lt;/span&gt; &lt;span class="n"&gt;gos&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Fido&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gos&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimalsDeCompanyia&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gos&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimalsDeCompanyia&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Canari&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Piolin&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Lleo&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Bonifaci&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="c1"&gt;// fa que tots els animals facin coses&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt;     &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;moute&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; fa: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; fa: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fesSoroll&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; fa: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;dorm&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="c1"&gt;// fa que tots els animals de companyia facin coses&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;AnimalDeCompanyia&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;llistaAnimalsDeCompanyia&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(((&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt;     &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;siguesAmistos&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(((&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt;     &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;juga&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;!-- XXX TODO: review todolist --&gt;
&lt;p&gt;En executar, el codi anterior ha de generar el següent resultat per
sortida estàndard:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Fido camina
Fido fa: nyam nyam
Fido fa: bof bof
Fido fa: ZZZzzzz
Renat camina
Renat fa: myam myam
Renat fa: meww
Renat fa: ZZZzzzz
Piolin vola
Piolin fa: pyam pyam
Piolin fa: piu piu
Piolin fa: pi-pi-pi-pi
Bonifaci camina
Bonifaci fa: gram gram
Bonifaci fa: grrrr
Bonifaci fa: ZRrrrrr
Fido et llepa la cara
Fido busca una pilota
Renat es frega amb la teva cama
Renat esgarrapa el teu sofa
&lt;/pre&gt;
&lt;div class="section" id="pistes"&gt;
&lt;h3&gt;Pistes:&lt;/h3&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;class Gos extends Animal implements AnimalDeCompanyia { ... }&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;AnimalDeCompanyia.getNom()&lt;/tt&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Excepcions</title><link href="http://apuntstecnics.herokuapp.com/excepcions.html" rel="alternate"></link><updated>2015-02-05T16:24:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:excepcions.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquests continguts introdueixen el mecanisme de control d'excepcions
en el llenguatge Java.&lt;/p&gt;
&lt;p&gt;Els conceptes que es treballen són: control d'errors, excepcions, captura
d'excepcions (&lt;em&gt;try&lt;/em&gt;/&lt;em&gt;catch&lt;/em&gt;/&lt;em&gt;finally&lt;/em&gt;), llançament d'excepcions (&lt;em&gt;throw&lt;/em&gt;),
excepcions predefinides, creació d'excepcions personalitzades&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="control-d-excepcions"&gt;
&lt;h2&gt;Control d'excepcions&lt;/h2&gt;
&lt;p&gt;Una excepció és un esdeveniment (&lt;em&gt;event&lt;/em&gt;) que representa una condició anormal
en l’execució d’un programa i que atura el flux normal d’execució.&lt;/p&gt;
&lt;p&gt;Les excepcions permeten a les aplicacions detectar i donar resposta situacions
d’error de manera controlada (sense penjar-se)&lt;/p&gt;
&lt;p&gt;Considerem l’exemple de la classe &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;                   &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getHora&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;            &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                     &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getMinut&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;           &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                     &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getSegon&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;           &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                     &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;      &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                     &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setMinut&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;     &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                     &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setSegon&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;     &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                     &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;        &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;         &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Imaginem que volem controlar que els valors que ens introdueixen els
mètodes set siguin correctes.&lt;/p&gt;
&lt;p&gt;Una manera seria la següent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;  &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;D’aquesta manera només hi acceptem hores vàlides.&lt;/p&gt;
&lt;p&gt;El problema és que el programa usuari no té manera de saber que ha
introduït un valor no vàlid!&lt;/p&gt;
&lt;p&gt;Una solució pot ser fer que el mètode cridat retorni informació sobre
el resultat de la seva execució:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/** retorna true si s&amp;#39;ha assignat satisfactòriament */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;  &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;correcte&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;correcte&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;correcte&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Que podem usar d’una manera similar a:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Assignada l&amp;#39;hora correctament&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error assignant l&amp;#39;hora&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Però el nostre programa s’ha fet força més llarg i menys llegible.&lt;/p&gt;
&lt;p&gt;Considerem el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hora.setHora(&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;) valor fora de rang&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Que usarem:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;224&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error assignant l&amp;#39;hora: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Aquest codi genera la sortida:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Error assignant l&amp;#39;hora: java.lang.Exception: Hora.setHora(224) valor fora de rang
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;D'aquesta manera aconseguim que els mètodes set assegurin l'hora
correcta.&lt;/p&gt;
&lt;p&gt;Però, què passa amb el constructor? Tal i com el tenim es
pot crear una hora no vàlida! Doncs fem que generi una excepció si
algun paràmetre no és correcte.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;setMinut&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;setSegon&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Totes les excepcions a Java hereten de la &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html"&gt;classe Throwable&lt;/a&gt;.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Jerarquia de la classe Throwable" src="http://apuntstecnics.herokuapp.com/images/poo018.img001.throwable.png" /&gt;
&lt;/div&gt;
&lt;p&gt;La funció de la classe &lt;tt class="docutils literal"&gt;Throwable&lt;/tt&gt; és indicar que les seves
subclasses poden ser llençades. Ja hem vist signatures de funcions amb
&lt;tt class="docutils literal"&gt;throws&lt;/tt&gt;, oi?&lt;/p&gt;
&lt;p&gt;Podem classificar les excepcions de Java en dos tipus: les que
requereixen ser gestionades explícitament (per exemple amb un bloc
&lt;em&gt;try&lt;/em&gt;/&lt;em&gt;catch&lt;/em&gt;) i les que no requereixen d'aquesta gestió explícita.&lt;/p&gt;
&lt;p&gt;Les excepcions que no requereixen de gestió explícita són les classes
&lt;tt class="docutils literal"&gt;Error&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;RuntimeException&lt;/tt&gt; i les seves subclasses. Aquestes
excepcions representen situacions d'error del sistema de les que
normalment no s'espera que el programa es recuperi. Considera per
exemple les subclasses &lt;tt class="docutils literal"&gt;VirtualMachineError&lt;/tt&gt; i
&lt;tt class="docutils literal"&gt;ClassCastException&lt;/tt&gt; que indiquen, respectivament, que la màquina
virtual de Java s'ha trencat, i que el codi està intentant fer un
&lt;em&gt;cast&lt;/em&gt; incorrecte.&lt;/p&gt;
&lt;p&gt;La gestió explícita de les excepcions és revisada pel compilador.
Aquest no deixarà passar un codi que no gestioni les excepcions
adequadament. Hi ha dues maneres de gestionar una excepció:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;envoltar el codi que pot generar una excepció en un bloc &lt;tt class="docutils literal"&gt;try {}&lt;/tt&gt; i
capturar l'excepció amb una clàusula &lt;tt class="docutils literal"&gt;catch (E e)&lt;/tt&gt; on &lt;tt class="docutils literal"&gt;E&lt;/tt&gt; ha de ser del
tipus d'excepció a gestionar o bé una superclasse d'aquesta (mira
l'exercici &amp;quot;Subclasses d'Exception&amp;quot; per a més detalls).&lt;/li&gt;
&lt;li&gt;indicar al mètode que conté el codi que pot generar l'excepció, que
pot llençar (&lt;em&gt;throws&lt;/em&gt;) una excepció del tipus a gestionar o bé una
superclasse d'aquesta (mira l'exercici &amp;quot;Subclasses d'Exception&amp;quot;
per a més detalls).&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Una advertència abans que comencis a pensar en usar excepcions a tort
i a dret: cal tenir present que el mecanisme de excepcions pot
representar una certa càrrega a algunes versions de la màquina virtual
de Java. Els blocs &lt;em&gt;try&lt;/em&gt;/&lt;em&gt;catch&lt;/em&gt; no tenen cap problema. És a dir, el seu
ús no afegeix cap sobrecàrrega important a l'execució dels teus programes. En
canvi, l'expressió &lt;tt class="docutils literal"&gt;throw&lt;/tt&gt; no resulta tan barata. La màquina virtual ha
de crear un &lt;em&gt;try&lt;/em&gt;/&lt;em&gt;catch&lt;/em&gt; apropiat en temps d'execució entre altres coses.&lt;/p&gt;
&lt;p&gt;La recomanació és que llencis excepcions &lt;em&gt;només&lt;/em&gt; en situacions
excepcionals, al menys quan l'eficiència sigui important. Per exemple,
si has de recórrer molts cops una llista d'elements, sovint resultarà
més eficient anar comprovant a cada iteració si en queden més que
aturar el recorregut en arribar a l'excepció.&lt;/p&gt;
&lt;p&gt;Si tens curiositat pots mirar discussions com aquesta de
&lt;a class="reference external" href="http://stackoverflow.com/questions/299068/how-slow-are-java-exceptions"&gt;stackoverflow&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-hora-amb-excepcions"&gt;
&lt;h3&gt;Exercici 1. Hora amb excepcions&lt;/h3&gt;
&lt;p&gt;Desenvolupeu la classe Hora amb control d'excepcions per tots els
mètodes que puguin generar un error. Incloeu un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que
comprovi cadascun dels mètodes que puguin generar excepcions.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-main-amb-excepcions"&gt;
&lt;h3&gt;Exercici 2. &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; amb excepcions&lt;/h3&gt;
&lt;p&gt;El mètode &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; pot també generar excepcions. Aquestes seran
recollides per l'interpret de java&lt;/p&gt;
&lt;p&gt;Substitueix la funció &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; del programa anterior per la següent.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argM&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
        &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;argH&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;argM&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;argS&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Creada l&amp;#39;hora &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;ha capturat l&amp;#39;excepció &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;  &lt;span class="c1"&gt;// tornem a llençar l&amp;#39;excepció&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;executa tant si hi ha com si no hi ha excepció&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;executa en finalitzar si no hi ha excepció&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Comprova el resultat d'executar amb diferents paràmetres: amb menys de
tres paràmetres, amb paràmetres textuals (ex. java Hora un dos tres),
amb paràmetres fora de rang, amb paràmetres correctes.&lt;/p&gt;
&lt;p&gt;Descriu amb les teves paraules la funcionalitat representa la clàusula
finally{} Se t'acut alguna utilitat? Sinó, troba una per la web!&lt;/p&gt;
&lt;p&gt;El codi mostra el resultat de e.toString() però hi ha més maneres
d'obtenir informació de l'excepció. Descriu amb les teves paraules què
fan els mètodes d'Exception getMessage(), getStackTrace() i
printStackTrace().&lt;/p&gt;
&lt;p&gt;Fixat que el codi llença l'excepció directament amb un&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;  &lt;span class="c1"&gt;// tornem a llençar l&amp;#39;excepció&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Què passaria si substitueixes aquesta línia per la següent? (considera
la informació del constructor a la API de Java)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Exception capturada&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;  &lt;span class="c1"&gt;// tornem a llençar l&amp;#39;excepció&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-renat-amb-excepcions"&gt;
&lt;h3&gt;Exercici 3. Renat amb excepcions&lt;/h3&gt;
&lt;p&gt;Crea una nova versió de la classe la classe GatRenat de manera que les
operacions que puguin donar lloc a error (ex. assignar un nombre de
vides negatiu) disposin d'excepcions. Modifica el programa
&lt;tt class="docutils literal"&gt;EntornGatRenat&lt;/tt&gt; de manera que tracti aquestes excepcions.&lt;/p&gt;
&lt;p&gt;Nota: Fes servir la versió de GatRenat de l'exercici 2 de la secció de
&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/relacions-entre-classes.html"&gt;relacions&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-excepcions-amb-recursos"&gt;
&lt;h3&gt;Exercici 4. Excepcions amb recursos&lt;/h3&gt;
&lt;p&gt;Des de la versió 7 de Java, existeix una variant d'ús del &lt;em&gt;try&lt;/em&gt;. Es
diu &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html"&gt;try amb recursos&lt;/a&gt;
i permet especificar recursos com a arguments de &lt;em&gt;try&lt;/em&gt;. Quan fem
servir aquest format, el compilador de Java afegirà el codi necessari
per tancar els recursos tant si es produeix excepció o no.&lt;/p&gt;
&lt;p&gt;El format és:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;llista&lt;/span&gt; &lt;span class="n"&gt;de&lt;/span&gt; &lt;span class="n"&gt;recursos&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;processament&lt;/span&gt; &lt;span class="n"&gt;dels&lt;/span&gt; &lt;span class="n"&gt;recursos&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Un recurs és una instància d'una classe que implementi la interfície
&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html"&gt;java.lang.AutoCloseable&lt;/a&gt;. Per
tant, en podem fins i tot crear-ne de nous.&lt;/p&gt;
&lt;p&gt;El que ens ofereix és la possibilitat de no haver de tancar el recurs.  Amb els
coneixements que ja hem vist abans, podíem resoldre-ho amb un &lt;em&gt;finally&lt;/em&gt; Això
equival a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;obrir&lt;/span&gt; &lt;span class="n"&gt;recursos&lt;/span&gt;
    &lt;span class="n"&gt;processament&lt;/span&gt; &lt;span class="n"&gt;dels&lt;/span&gt; &lt;span class="n"&gt;recursos&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;tancar&lt;/span&gt; &lt;span class="n"&gt;recursos&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Considera el següent codi que defineix la nostra versió de la comanda
&lt;em&gt;cat&lt;/em&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.BufferedReader&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.FileReader&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Vector&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;CatMeu&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="nf"&gt;llegeix_fitxer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;linies&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BufferedReader&lt;/span&gt; &lt;span class="n"&gt;br&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BufferedReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;FileReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;)))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;linia&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;linia&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;br&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;readLine&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;linia&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Ops: s&amp;#39;ha produït una excepció: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getMessage&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toArray&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;size&lt;/span&gt;&lt;span class="o"&gt;()]);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Indica un o més paràmetres&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;llegeix_fitxer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;linia&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;linia&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;linia&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Línia [%d]: &amp;#39;%s&amp;#39;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linia&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;linia&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Pots executar aquest codi des del mateix directori on tinguis el seu
codi font, fent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java CatMeu fitxerinexistent1 CatMeu.java fitxerinexistent2
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;De manera que puguis veure:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;dos missatges amb excepcions de fitxer o directori no existent&lt;/li&gt;
&lt;li&gt;el contingut del fitxer CatMeu.java.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="es-demana"&gt;
&lt;h4&gt;Es demana&lt;/h4&gt;
&lt;p&gt;Analitza aquest codi fins que et familiaritzis amb el seu
funcionament. A continuació, desenvolupa un programa anomenat
&lt;em&gt;MostraImports&lt;/em&gt; tal que:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;processi la llista d'arguments que se li passin&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;ignori sense cap missatge aquells paràmetres que no siguin fitxers
amb codi font java (per simplicitat, els que no tinguin extensió
.java)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;per cada fitxer .java, que mostri la llista d'imports que conté o el
missatge &amp;quot;Cap import&amp;quot; si no conté cap.&lt;/p&gt;
&lt;p&gt;Per exemple:&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java MostraImports fitxerinexistent CatMeu.java
CatMeu.java:
    java.io.BufferedReader
    java.io.FileReader
    java.io.IOException
    java.util.Vector
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;fes servir el &lt;em&gt;try&lt;/em&gt; amb recursos.&lt;/li&gt;
&lt;li&gt;recorda que la classe &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html"&gt;String&lt;/a&gt; disposa de
moltes utilitats per a poder consultar i extreure parts d'un string.&lt;/li&gt;
&lt;li&gt;no cal que consideris el cas &lt;em&gt;import static&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-subclasses-d-exception"&gt;
&lt;h3&gt;Exercici 5. Subclasses d'Exception&lt;/h3&gt;
&lt;p&gt;Exception no deixa de ser una classe més i com a tal, podem trobar la
seva documentació a
&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html"&gt;http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;A la secció &amp;quot;Direct known subclasses&amp;quot; hi trobem les subclasses
d'Exception que ens ofereix la API. Per exemple hi trobem la ja
coneguda IOException.&lt;/p&gt;
&lt;p&gt;Potser trobar-ne una que sigui més propera al significat de les
nostres excepcions no sempre és fàcil ni possible. Per sort, en podem
crear de noves.&lt;/p&gt;
&lt;p&gt;Considerem el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;HoraNoValidaException&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;HoraNoValidaException&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;missatge&lt;/span&gt;&lt;span class="o"&gt;){&lt;/span&gt;
    &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Excepció Hora no vàlida: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;missatge&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;i&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;                  &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;HoraNoValidaException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;setMinut&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;setSegon&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;   &lt;span class="c1"&gt;// altres mètodes&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;HoraNoValidaException&lt;/span&gt;  &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HoraNoValidaException&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hora.setHora(&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;) valor fora de rang&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;   &lt;span class="c1"&gt;// altres mètodes&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argM&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
            &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;argH&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;argM&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;argS&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Creada l&amp;#39;hora &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;HoraNoValidaException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;ha capturat una excepció d&amp;#39;hora: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;ha capturat una excepció no d&amp;#39;hora: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;  &lt;span class="c1"&gt;// tornem a llençar l&amp;#39;excepció&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;executa tant si hi ha com si no hi ha excepció&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;executa en finalitzar si no hi ha excepció&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;div class="section" id="id1"&gt;
&lt;h4&gt;Es demana&lt;/h4&gt;
&lt;p&gt;Crea una nova classe anomenada &lt;tt class="docutils literal"&gt;Data&lt;/tt&gt; que disposi dels atributs
&lt;tt class="docutils literal"&gt;dia&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;mes&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;any&lt;/tt&gt;, amb els mètodes get/set i constructors que
assegurin que tota instància creada conté una data correcta. Altrament
generarà l'excepció &lt;tt class="docutils literal"&gt;DataNoValidaException&lt;/tt&gt;&lt;/p&gt;
&lt;!-- XXX TODO: indica que, malgrat 'any' és una paraula reservada,
getAny() no ho és. Cal que facin servir aquests noms per facilitar
la correcció automàtica. --&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-embolicant-una-excepcio"&gt;
&lt;h3&gt;Exercici 6. Embolicant una excepció&lt;/h3&gt;
&lt;p&gt;Crea la classe &lt;tt class="docutils literal"&gt;DataHora&lt;/tt&gt; què conté una &lt;tt class="docutils literal"&gt;Data&lt;/tt&gt; i una &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; (exercicis
anteriors) privades.&lt;/p&gt;
&lt;p&gt;La classe &lt;tt class="docutils literal"&gt;DataHora&lt;/tt&gt; oferirà mètodes per a accedir directament als
valors de les propietats de &lt;tt class="docutils literal"&gt;Data&lt;/tt&gt; i de &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; com si fossin seus.
En cas que es produeixi alguna excepció específica de &lt;tt class="docutils literal"&gt;Data&lt;/tt&gt; o de
&lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; en fer servir les classes dels seus atributs, la classe
&lt;tt class="docutils literal"&gt;DataHora&lt;/tt&gt; &amp;quot;traduirà&amp;quot; l'excepció a una pròpia &lt;tt class="docutils literal"&gt;DataHoraException&lt;/tt&gt;
que permetrà incloure l'excepció original en el seu constructor.&lt;/p&gt;
&lt;p&gt;Inclou un &lt;em&gt;main()&lt;/em&gt; similar al de l'exercici anterior, per poder provar
el funcionament.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Generics</title><link href="http://apuntstecnics.herokuapp.com/generics.html" rel="alternate"></link><updated>2015-02-05T16:23:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:generics.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document és una introducció als &lt;em&gt;genèrics&lt;/em&gt; de Java, a partir de
diferents qüestions respecte els continguts de la &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/index.html"&gt;lliçó Generics&lt;/a&gt; de
&amp;quot;The Java Tutorials&amp;quot;. No es cobreixen, però, tots els continguts
d'aquest &lt;em&gt;tutorial&lt;/em&gt;. Amb tot, t'animo a llegir el contingut sencer de
manera que disposis d'una visió més global del tema.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;Genèrics&lt;/h2&gt;
&lt;div class="section" id="el-mon-sense-generics"&gt;
&lt;h3&gt;El món sense genèrics&lt;/h3&gt;
&lt;p&gt;En versions antigues de Java (abans de la versió Java SE 5.0) ja
estaven disponibles algunes classes per a agrupar objectes.
Per exemple, &lt;tt class="docutils literal"&gt;java.util.Vector&lt;/tt&gt; implementa un &lt;em&gt;array&lt;/em&gt; d'objectes que
pot ampliar o reduir la seva mida per a adaptar-se a les dades que
conté.&lt;/p&gt;
&lt;p&gt;El mètode per a afegir una nova entrada al final del vector era &lt;tt class="docutils literal"&gt;boolean
add(Object o)&lt;/tt&gt;. Donat que tota classe és descendent de &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;, el
resultat és que podíem afegir instàncies de qualsevol classe.&lt;/p&gt;
&lt;p&gt;El mètode &lt;tt class="docutils literal"&gt;Object get(int index)&lt;/tt&gt; ens permetia recuperar un element
del vector a partir de la seva posició.&lt;/p&gt;
&lt;p&gt;Un exemple d'ús seria:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Vector&lt;/span&gt; &lt;span class="n"&gt;estol&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;estol&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;estol&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;    &lt;span class="c1"&gt;// hem de fer el cast&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En principi això pot semblar que no és cap problema. Només una
incomoditat haver de fer un &lt;em&gt;cast&lt;/em&gt; quan ja sabem el tipus de tots els
elements que hi guardem al vector.&lt;/p&gt;
&lt;p&gt;El problema es troba en la detecció d'errors. En cas que hi hagi
error de tipus (que el que ens retorna el vector no sigui realment un
gat) no ens assabentem fins que no executem el programa. El compilador
no en sap res de tipus i se'n refia de nosaltres quan li concretem el
tipus amb un &lt;em&gt;cast&lt;/em&gt;. En programes molt més complexos que a l'exemple,
això pot portar a que l'error no es detecti fins que, després de molt
de temps d'ús, el programa es penja per una condició que mai abans
s'havia produït.&lt;/p&gt;
&lt;p&gt;Per oferir la possibilitat de detectar aquest tipus d'error en temps
de compilació, al Java SE 5.0 es van introduir els &lt;em&gt;genèrics&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-perque-generics"&gt;
&lt;h3&gt;Exercici 1. Perquè genèrics&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/why.html"&gt;Why generics&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Què permeten els genèrics?&lt;/li&gt;
&lt;li&gt;En que s'assemblen els &lt;em&gt;paràmetres formals&lt;/em&gt; als &lt;em&gt;paràmetres de
tipus&lt;/em&gt;?&lt;/li&gt;
&lt;li&gt;En que es diferencien els &lt;em&gt;paràmetres formals&lt;/em&gt; dels
&lt;em&gt;paràmetres de tipus&lt;/em&gt;?&lt;/li&gt;
&lt;li&gt;Descriu amb les teves paraules, tres avantatges de l'ús de genèrics
al nostre codi.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-classes-generiques"&gt;
&lt;h3&gt;Exercici 2. Classes genèriques&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/types.html"&gt;Generic Types&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Què és un &lt;em&gt;tipus genèric&lt;/em&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Considera l'exemple de la versió simple de la classe &lt;tt class="docutils literal"&gt;Box&lt;/tt&gt;
(secció &lt;em&gt;A Simple Box Class&lt;/em&gt;).  Indica perquè no hi podem afegir
tipus primitius però sí qualsevol altre element.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Un altre cop sobre la caixa simple: desenvolupa un programa
anomenat &lt;tt class="docutils literal"&gt;CaixaDeGats&lt;/tt&gt; que creï una caixa (&lt;tt class="docutils literal"&gt;Box&lt;/tt&gt;), hi
afegeixi un gat Renat &lt;a class="footnote-reference" href="#renat" id="id2"&gt;[1]&lt;/a&gt; i després el recuperi i mostri el
seu nom per sortida estàndard.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Considera la secció &lt;em&gt;Invoking and Instantiating a Generic Type&lt;/em&gt;. De
quina manera es declara una referència d'una classe genèrica? De
quina manera s'instancia una classe genèrica?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Considera ara la versió de la caixa genèrica que apareix a la
secció &lt;em&gt;A Generic Version of the Box Class&lt;/em&gt;. Desenvolupa una nova
versió de &lt;tt class="docutils literal"&gt;CaixaDeGats&lt;/tt&gt; que faci servir aquesta nova versió
genèrica de la classe &lt;tt class="docutils literal"&gt;Box&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;És obligatori anomenar als paràmetres de tipus amb una &lt;tt class="docutils literal"&gt;T&lt;/tt&gt;? Si és
que no, hi trobes alguna raó per fer servir aquest nom?  ----&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Indica una manera alternativa d'escriure el següent codi a partir
de Java SE 7&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Box&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;gatBox&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Box&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A la secció &lt;em&gt;Multiple Type Parameters&lt;/em&gt; veiem un exemple
d'&lt;em&gt;interface&lt;/em&gt; i de classe genèrics amb més d'un paràmetre de tipus.
Es podria fer servir &lt;tt class="docutils literal"&gt;T&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;S&lt;/tt&gt; en comptes de &lt;tt class="docutils literal"&gt;K&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;V&lt;/tt&gt;?
Perquè creus que han fet servir &lt;tt class="docutils literal"&gt;K&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;V&lt;/tt&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-metodes-generics"&gt;
&lt;h3&gt;Exercici 3. Mètodes genèrics&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/methods.html"&gt;Generic Methods&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Què és un mètode genèric?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Els mètodes genèrics han de ser sempre estàtics?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Considera el següent codi que fa servir les classes &lt;tt class="docutils literal"&gt;Util&lt;/tt&gt; i
&lt;tt class="docutils literal"&gt;Pair&lt;/tt&gt; d'aquest article:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Payme&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Gos&lt;/span&gt; &lt;span class="n"&gt;gos1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Fido&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Gos&lt;/span&gt; &lt;span class="n"&gt;gos2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Rantanplan&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Gos&lt;/span&gt; &lt;span class="n"&gt;gos3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Fido&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;gat1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;gos1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;gat1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;gos1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;p1(%s,%s) == p2(%s,%s) -&amp;gt; %s\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getKey&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getKey&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt;
                &lt;span class="n"&gt;Util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;compare&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;p3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;gat1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;gos2&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;p1(%s,%s) == p3(%s,%s) -&amp;gt; %s\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getKey&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getKey&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt;
                &lt;span class="n"&gt;Util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;compare&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p3&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;p4&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;gat1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;gos3&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;p1(%s,%s) == p4(%s,%s) -&amp;gt; %s\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getKey&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p4&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getKey&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p4&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt;
                &lt;span class="n"&gt;Util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;compare&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p4&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Executa'l i descriu el perquè de cada línia del resultat.&lt;/p&gt;
&lt;p&gt;En cas de que no disposis de les classes Gat i Gos, simplement
crea una versió mínima que permeti l'execució d'aquest codi.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-generics-i-herencia"&gt;
&lt;h3&gt;Exercici 4. Genèrics i herència&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/inheritance.html"&gt;Generics, Inheritance, and Subtypes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Perquè, si tenim el mètode següent&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;domestica&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;són vàlides les següents crides? &lt;a class="footnote-reference" href="#animal" id="id3"&gt;[2]&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;domestica&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
&lt;span class="n"&gt;domestica&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Fido&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Perquè, si tenim el mètode següent&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;domestica&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;no és vàlid el següent codi?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;domesticaGats&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;domestica&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Perquè a l'exemple que apareix a la secció &lt;em&gt;Generic Classes and
Subtyping&lt;/em&gt;, &lt;tt class="docutils literal"&gt;PayloadList&amp;lt;String, Integer&amp;gt;&lt;/tt&gt; és subclasse de
&lt;tt class="docutils literal"&gt;List&amp;lt;String&amp;gt;&lt;/tt&gt;? Penses que també ho seria &lt;tt class="docutils literal"&gt;PayloadList&amp;lt;Integer,
String&amp;gt;&lt;/tt&gt;? Perquè?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;TestGen1&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%s &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;al&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;();&lt;/span&gt;
        &lt;span class="n"&gt;al&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hola&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;al&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;adéu&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;al&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Perquè funciona la crida &lt;tt class="docutils literal"&gt;mostra(al)&lt;/tt&gt; malgrat es fa servir
&lt;tt class="docutils literal"&gt;ArrayList&amp;lt;String&amp;gt;&lt;/tt&gt; i no &lt;tt class="docutils literal"&gt;List&amp;lt;String&lt;/tt&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;TestGen2&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%s &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;al&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;();&lt;/span&gt;
        &lt;span class="n"&gt;al&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hola&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;al&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;adéu&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;al&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Perquè &lt;strong&gt;no&lt;/strong&gt; funciona la crida &lt;tt class="docutils literal"&gt;mostra(al)&lt;/tt&gt; malgrat &lt;tt class="docutils literal"&gt;String&lt;/tt&gt;
és un &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-delimitacio-de-parametres-de-tipus"&gt;
&lt;h3&gt;Exercici 5. Delimitació de paràmetres de tipus&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/bounded.html"&gt;Bounded Type Parameters&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Considera la següent classe&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt; &lt;span class="n"&gt;animal&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt; &lt;span class="n"&gt;animal&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;animal&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;animal&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt; &lt;span class="nf"&gt;getEngabiat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;animal&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;I el següent codi que la prova:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Test&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;e1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Misteri&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;e2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;e1: %s\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getEngabiat&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;e2: %s\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getEngabiat&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Descriu que implica el contingut entre &amp;lt;&amp;gt; a la definició de
la classe &lt;tt class="docutils literal"&gt;Engabiat&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Perquè funciona &lt;tt class="docutils literal"&gt;Test&lt;/tt&gt;? Prova-ho!&lt;/p&gt;
&lt;p&gt;En cas de no disposar de les classes &lt;tt class="docutils literal"&gt;Animal&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;Gat&lt;/tt&gt;, crea una
versió de cada de manera que funcioni &lt;tt class="docutils literal"&gt;Test&lt;/tt&gt; (recorda un Gat &lt;strong&gt;és
un&lt;/strong&gt; Animal)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Funcionaria si la instanciació fes servir el &amp;quot;truc&amp;quot; del diamant per
demanar que el compilador infereixi el tipus?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Prova-ho. Que afegeixis alguna explicació del perquè del resultat
en aquesta pregunta és opcional.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Funcionaria si la declaració de &lt;tt class="docutils literal"&gt;Engabiat&lt;/tt&gt; fos la següent?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Perquè?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Ara que ja saps aquest concepte, proposa una modificació de la
classe &lt;tt class="docutils literal"&gt;TestGen2&lt;/tt&gt; del darrer exemple de l'exercici anterior, de
manera que funcioni el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; tal i com apareix a l'exemple.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;!-- private  static &lt;T extends Object&gt; void mostra(ArrayList&lt;T&gt; l) --&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-contenidors-amb-herencia"&gt;
&lt;h3&gt;Exercici 6. Contenidors amb herència&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/upperBounded.html"&gt;Upper Bounded Wildcards&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.ArrayList&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Animtest&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;?&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;la&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;la&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%s &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;aa&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;();&lt;/span&gt;
        &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Mishifú&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Gos&lt;/span&gt; &lt;span class="n"&gt;gos1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Fido&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;aa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;aa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat2&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;aa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gos1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;aa&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;ag&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;();&lt;/span&gt;
        &lt;span class="n"&gt;ag&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;ag&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat2&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ag&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Perquè funciona la primera crida a &lt;tt class="docutils literal"&gt;mostra()&lt;/tt&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Perquè funciona la segona crida a &lt;tt class="docutils literal"&gt;mostra()&lt;/tt&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Què vol dir l'interrogant (&lt;tt class="docutils literal"&gt;?&lt;/tt&gt;) a la definició del paràmetre
&lt;tt class="docutils literal"&gt;la&lt;/tt&gt; de &lt;tt class="docutils literal"&gt;mostra()&lt;/tt&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Funcionaria aquest codi si la definició fos simplement?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;?&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;la&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Perquè?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Què hauríem de canviar perquè funcionés sense l'interrogant. Ex.
&lt;tt class="docutils literal"&gt;void mostra(T animal)&lt;/tt&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A partir de les respostes de les dues preguntes anteriors, indica
quin avantatge es desprèn de l'ús de &lt;em&gt;wildcards&lt;/em&gt; en aquest exemple.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;!-- private static &lt;T extends Animal&gt; void mostra(ArrayList&lt;T&gt; la) { --&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-limitacions-dels-generics"&gt;
&lt;h3&gt;Exercici 7. Limitacions dels genèrics&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/restrictions.html"&gt;Restrictions on Generics&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Descriu amb les teves paraules i de manera resumida cadascuna de les
limitacions que apareixen en aquest article.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;hr class="docutils" /&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="renat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En cas que no disposis d'aquesta classe, fes servir
simplement un String.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="animal" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Pots suposar que Gat i Gos són subclasses d'animal.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;!-- XXX TODO: revisa todolist --&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Contenidors ordenats</title><link href="http://apuntstecnics.herokuapp.com/contenidors-ordenats.html" rel="alternate"></link><updated>2015-02-05T16:22:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:contenidors-ordenats.html</id><summary type="html">&lt;!-- XXX TODO: check todo list --&gt;
&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document introdueix diferents maneres de agrupar informació de
manera seqüencial en un objecte Java.&lt;/p&gt;
&lt;p&gt;La línia general és la comparació de les diferents estructures segons
eficiència, de manera que permetin fer-se una idea de en quins casos
una solució es preferible a una altra.&lt;/p&gt;
&lt;p&gt;Comença amb una discussió respecte l'ús dels Strings i s'introdueix
&lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;A continuació es consideren els &lt;tt class="docutils literal"&gt;Arrays&lt;/tt&gt; i la classe alternativa &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Finalment es comparen tres estructures seqüèncials: &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;,
&lt;tt class="docutils literal"&gt;ArrayList&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;LinkedList&lt;/tt&gt; basat en l'article &lt;a class="reference external" href="http://onjava.com/pub/a/onjava/2001/05/30/optimization.html"&gt;The Performance of
Java's Lists&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="strings"&gt;
&lt;h2&gt;Strings&lt;/h2&gt;
&lt;p&gt;La classe &lt;tt class="docutils literal"&gt;String&lt;/tt&gt; és una de les primeres que coneixem en Java.
Resulta una classe molt útil i és especialment estimada pel nous
programadors de Java que venen de llenguatges com ara C.&lt;/p&gt;
&lt;p&gt;La classe String presenta, però, un problema que cal tenir present:
baix rendiment en les modificacions.&lt;/p&gt;
&lt;p&gt;El problema és que en Java, els Strings són immutables. Això vol dir
que un cop creats, no podem modificar el seu valor. Mentre que per a
moltes aplicacions dels Strings, això no representa cap problema, per
altres pot suposar un alentiment important en l'execució.&lt;/p&gt;
&lt;p&gt;Per exemple, imagina que ens cal posar en majúscules la inicial d'un
String. La manera que ens ofereix la classe és crear un nou String a
partir de dues peces de l'original, per exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;paraula&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;paraula&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;paraula&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;toUpperCase&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;paraula&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;o potser una mica millor&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;paraula&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;paraula&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Character&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toUpperCase&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;paraula&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;charAt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;paraula&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En qualsevol dels dos casos, estem creant dos o més Strings, mentre
que en C ho hagéssim resolt amb un econòmic:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;paraula&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]=&lt;/span&gt;&lt;span class="n"&gt;toupper&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;paraula&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per millorar el rendiment, hi ha diferents possibilitats.
Malauradament no hi ha una resposta única per decidir &lt;em&gt;la manera més
eficient sempre&lt;/em&gt;. Per tant, cal analitzar cas a cas depenent de l'ús
que fem dels Strings.&lt;/p&gt;
&lt;div class="section" id="proves-de-rendiment"&gt;
&lt;h3&gt;Proves de rendiment&lt;/h3&gt;
&lt;p&gt;Analitzem quan ens costa realitzar alguna tasca amb Strings. Per
exemple, suposa que ens interessa construir un String a partir
d'afegir-hi substrings al començament. El codi podria ser quelcom
similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;mida&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;str&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;A&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Una manera habitual de comprovar quan costa realitzar una certa tasca es
comptant el temps que passa des de que se la crida fins que acaba
l'execució. Per exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;tempsInicial&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nanoTime&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="err"&gt;«&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;analitzar&lt;/span&gt; &lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;tempsFinal&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nanoTime&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Cal tenir present que diferents execucions sobre la mateixa prova
ofereixen resultats diferents. Hi ha diferents raons, des de la
càrrega de l'equip en el moment de la prova fins als optimitzadors que
disposi la implementació de Java que estiguem fent servir.&lt;/p&gt;
&lt;p&gt;Per aquesta raó, pot ser adequat
realitzar la prova vàries vegades i calcular la desviació tipus per
tenir una idea de la dispersió de les mesures.&lt;/p&gt;
&lt;p&gt;Simplificant-ho molt, si per una prova concreta els resultat mig de
rendiment d'una estructura es troba dins del rang definit pel resultat
mig +/- la desviació tipus d'una altra estructura, podríem deduir que
el rendiment de les dues estructures no és significativament diferent
per a aquella prova.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-comparacio-string"&gt;
&lt;h3&gt;Exercici 1. Comparació String&lt;/h3&gt;
&lt;p&gt;En aquest primer exercici compararem el rendiment de composar un
String des de l'inici (&lt;tt class="docutils literal"&gt;str = &amp;quot;A&amp;quot; + str;&lt;/tt&gt;) i des del final (&lt;tt class="docutils literal"&gt;str =
str + &amp;quot;A&amp;quot;;&lt;/tt&gt;)&lt;/p&gt;
&lt;p&gt;Realitza 5 proves de cadascuna de les dues opcions amb mides de 10,
1000 i 100000. Calcula la mitja i la desviació tipus i omple
una taula com la següent:&lt;/p&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="35%" /&gt;
&lt;col width="22%" /&gt;
&lt;col width="22%" /&gt;
&lt;col width="22%" /&gt;
&lt;/colgroup&gt;
&lt;thead valign="bottom"&gt;
&lt;tr&gt;&lt;th class="head"&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class="head"&gt;10&lt;/th&gt;
&lt;th class="head"&gt;1000&lt;/th&gt;
&lt;th class="head"&gt;100000&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;String inserció ini&lt;/td&gt;
&lt;td&gt;xxxx (yyyy)&lt;/td&gt;
&lt;td&gt;xxxx (yyyy)&lt;/td&gt;
&lt;td&gt;xxxx (yyyy)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;String inserció fin&lt;/td&gt;
&lt;td&gt;xxxx (yyyy)&lt;/td&gt;
&lt;td&gt;xxxx (yyyy)&lt;/td&gt;
&lt;td&gt;xxxx (yyyy)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;On &lt;tt class="docutils literal"&gt;xxxx&lt;/tt&gt; indica la mitja i &lt;tt class="docutils literal"&gt;(yyyy)&lt;/tt&gt; la desviació tipus.&lt;/p&gt;
&lt;p&gt;També caldrà que aportis algunes dades de l'equip on executes les
proves: processador, versió del SO, versió de jre.&lt;/p&gt;
&lt;p&gt;En un equip GNU/Linux, pots obtenir aquestes dades (i més) amb les
comandes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;$ lshw &lt;span class="pre"&gt;-class&lt;/span&gt; cpu &lt;span class="pre"&gt;-class&lt;/span&gt; memory&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;$ uname &lt;span class="pre"&gt;-a&lt;/span&gt;&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;$ java &lt;span class="pre"&gt;-version&lt;/span&gt;&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per fer-ho fàcil, pots afegir a l'informe directament el resultat
d'aquestes crides.&lt;/p&gt;
&lt;p&gt;Finalment afegeix al teu informe una interpretació dels resultats que
inclogui, com a mínim, si si hi trobes una diferència significativa en
les dues maneres de composar el String.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pistes&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;Per calcular la mitja d'un &lt;tt class="docutils literal"&gt;long[]&lt;/tt&gt; pots fer servir:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calculaMitja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;

    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Per calcular la desviació tipus d'un &lt;tt class="docutils literal"&gt;long[]&lt;/tt&gt; pots fer servir:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calculaDesviacio&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;desviacio&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;mitja&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;calculaMitja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;desviacio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;desviacio&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;mitja&lt;/span&gt; &lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;quadrats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;quadrats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;quadrats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;desviacio&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;desviacio&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;quadrats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;quadrats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sqrt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Donat que hauràs de preparar més d'un informe com aquest, es
recomanable que preparis una mena de plantilla amb les següents
seccions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;Dades de la prova&lt;/p&gt;
&lt;p&gt;Inclou com a mínim: descripció, autor i data de la prova.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Resultats de la prova&lt;/p&gt;
&lt;p&gt;La taula de resultats.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Interpretació dels resultats&lt;/p&gt;
&lt;p&gt;La teva interpretació dels resultats segons et demani l'enunciat.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Descripció de l'equip&lt;/p&gt;
&lt;p&gt;Informació de l'equip, SO i JRE.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="preparant-l-entorn-de-proves-de-rendiment"&gt;
&lt;h3&gt;Preparant l'entorn de proves de rendiment&lt;/h3&gt;
&lt;p&gt;Com que haurem de realitzar l'anàlisi de rendiment en diverses
ocasions, ens pot ser interessant preparar alguna mena d'entorn de
proves de rendiment que ens faciliti la feina.&lt;/p&gt;
&lt;p&gt;Un entorn senzill per realitzar proves de rendiment podria tenir el
següent aspecte:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Entorn de proves" src="http://apuntstecnics.herokuapp.com/images/poo020.img001.entorn_proves.png" /&gt;
&lt;/div&gt;
&lt;p&gt;La classe &lt;tt class="docutils literal"&gt;Tester&lt;/tt&gt; permetria, a partir del mètode &lt;tt class="docutils literal"&gt;test(String,
Testable)&lt;/tt&gt;, comprovar el temps d'execució d'un mètode tenint en
comptes diferents mides de prova i generaria un conjunt d'estadístics
resultants: bàsicament temps mig d'execució de les &lt;em&gt;num_proves&lt;/em&gt; i
desviació tipus per cadascuna de les mides de prova.&lt;/p&gt;
&lt;p&gt;Depenent de la potència de la teva màquina, potser voldràs fer més o
menys proves, o amb mides més grans o més petits. Per aquesta raó
&lt;tt class="docutils literal"&gt;Tester&lt;/tt&gt; ofereix diferents maneres d'inicialitzar-lo. Es proposa com
a valors per defecte de &lt;em&gt;num_proves&lt;/em&gt; el 5 i per &lt;em&gt;mides&lt;/em&gt; 10, 1000,
10000.&lt;/p&gt;
&lt;p&gt;&lt;tt class="docutils literal"&gt;Tester&lt;/tt&gt; fa servir la &lt;em&gt;interface&lt;/em&gt; &lt;tt class="docutils literal"&gt;Testable&lt;/tt&gt; que especifica dos
mètodes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;setMida(int mida)&lt;/tt&gt; permet especificar la mida de la prova. El
temps requerit per executar aquest mètode no computa amb el càlcul
total. D'aquesta manera, aquest mètode és adequat per realitzar
tasques d'inicialització de la prova.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;crida()&lt;/tt&gt;. Aquest serà el mètode que cridarà &lt;tt class="docutils literal"&gt;Tester&lt;/tt&gt; amb
cadascuna de les mides.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-l-entorn-de-proves-de-rendiment"&gt;
&lt;h3&gt;Exercici 2. L'entorn de proves de rendiment&lt;/h3&gt;
&lt;p&gt;Munta l'entorn de proves descrit abans.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pista&lt;/strong&gt;: potser voldràs aïllar la prova real de la resta dels
càlculs i preparacions estadístiques amb un codi similar a:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="nf"&gt;realitzaProva&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Testable&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mida&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setMida&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mida&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// la preparació no compta en el temps&lt;/span&gt;
    &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;tempsInicial&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nanoTime&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;crida&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;tempsFinal&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nanoTime&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tempsFinal&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;tempsInicial&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Torna a passar les proves de l'exercici 1 tot fent servir el teu nou
entorn de proves i omple la taula amb els nous resultats.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-stringbuilder-en-insercio"&gt;
&lt;h3&gt;Exercici 3. &lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt; en inserció&lt;/h3&gt;
&lt;p&gt;Considera la classe &lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt; (consulta l'&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html"&gt;API de
StringBuilder&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;Prepara les següents proves amb aquesta classe i compara-les amb les
que has obtingut fins ara amb String:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;StringBuilder amb constructor per defecte inserint a l'inici (&lt;tt class="docutils literal"&gt;insert(0, &amp;quot;A&amp;quot;)&lt;/tt&gt;)&lt;/li&gt;
&lt;li&gt;StringBuilder amb constructor per defecte inserint al final (&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;append(&amp;quot;A&amp;quot;)&lt;/span&gt;&lt;/tt&gt;)&lt;/li&gt;
&lt;li&gt;StringBuilder construït amb &lt;tt class="docutils literal"&gt;StringBuilder(int capacity)&lt;/tt&gt; i
inserint a l'inici.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Omple una taula amb els resultats i elabora un petit informe que
compari el que has obtingut. Inclou a l'informe una comparativa amb
els resultats obtinguts amb Strings.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-stringbuilder-en-modificacio"&gt;
&lt;h3&gt;Exercici 4. &lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt; en modificació&lt;/h3&gt;
&lt;p&gt;Posarem novament a prova les classes &lt;tt class="docutils literal"&gt;String&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt;.
Aquest cop, construirem amb el mètode &lt;tt class="docutils literal"&gt;setMida(int)&lt;/tt&gt; un
&lt;tt class="docutils literal"&gt;String&lt;/tt&gt; / &lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt; tot de &amp;quot;A&amp;quot;s, i al mètode &lt;tt class="docutils literal"&gt;crida()&lt;/tt&gt;
simplement passarem, caràcter per caràcter, a minúscules.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pista&lt;/strong&gt;: El codi de test per &lt;tt class="docutils literal"&gt;String&lt;/tt&gt; podria ser similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;mida&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;str&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;Character&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toLowerCase&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;charAt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Omple una taula amb els resultats obtinguts i elabora un breu informe
comparant els resultats.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-string-vs-stringbuilder"&gt;
&lt;h3&gt;Exercici 5. &lt;tt class="docutils literal"&gt;String&lt;/tt&gt; vs &lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt;&lt;/h3&gt;
&lt;p&gt;A partir dels resultats que has obtingut, prepara un petit resum en el
que indicaràs en quins casos és preferible fer servir
&lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt; i en quins en tindrem prou amb &lt;tt class="docutils literal"&gt;String&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Nota: tingues en comptes que per a fer servir el resultat de
&lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt; probablement haurem de passar-lo a &lt;tt class="docutils literal"&gt;String&lt;/tt&gt;.
Potser voldràs comprovar quin cost té fer-ho per elaborar les teves
conclusions.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="arrays"&gt;
&lt;h2&gt;Arrays&lt;/h2&gt;
&lt;p&gt;Els &lt;em&gt;arrays&lt;/em&gt; són una manera senzilla d'agrupar dades d'un mateix tipus
en forma de seqüència.&lt;/p&gt;
&lt;p&gt;A la secció anterior hem analitzat un tipus d'&lt;em&gt;array&lt;/em&gt; particular
(seqüència de caràcters) encapsulat dins la classe &lt;tt class="docutils literal"&gt;String&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;En aquesta secció, analitzarem el rendiment d'aquesta estructura i
veurem algunes maneres d'optimitzar-la.&lt;/p&gt;
&lt;div class="section" id="exercici-6-copia-d-arrays"&gt;
&lt;h3&gt;Exercici 6. Còpia d'&lt;em&gt;arrays&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;Construirem una prova que donat un &lt;em&gt;array&lt;/em&gt; (de diferents mides) de
valors enters (ex. de 1 a mida de la prova), calculem quan de temps
ens costa copiar els valors a un altre &lt;em&gt;array&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Farem servir dues aproximacions:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&amp;quot;a ma&amp;quot;: amb un bucle copiarem un a un cada valor de l'&lt;em&gt;array&lt;/em&gt;
inicial al final.&lt;/li&gt;
&lt;li&gt;automàtic: farem servir la utilitat &lt;tt class="docutils literal"&gt;System.arraycopy()&lt;/tt&gt;
(consulteu l'&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/System.html"&gt;API d'arraycopy()&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Elabora una taula de resultats i un informe comparatiu.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Recomanació&lt;/strong&gt;: fes servir la classe &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; (mira l'&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/index.html?java/lang/System.html"&gt;API de
Integer&lt;/a&gt;)
en comptes del tipus primitiu &lt;tt class="docutils literal"&gt;int&lt;/tt&gt; si vols estalviar-te feina per
un exercici posterior.  Si disposes de prou temps, pots també fer les
dues opcions, de manera que podràs comprovar el rendiment de la
creació massiva d'objectes en Java.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="operacions-costoses-amb-arrays"&gt;
&lt;h3&gt;Operacions costoses amb &lt;em&gt;arrays&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;Fer servir &lt;em&gt;arrays&lt;/em&gt; sol ser convenient si volem una agrupació
seqüèncial d'elements del mateix tipus amb un accés directe ràpid (per
consultes i modificacions), que només s'amplia afegint nous elements
al final i, sobretot, del que coneixem la mida màxima (nombre màxim
d'elements que contindrà) en el moment de la creació.&lt;/p&gt;
&lt;p&gt;Quan les operacions que hem de realitzar amb l'&lt;em&gt;array&lt;/em&gt; inclouen
inserció o eliminació d'elements en qualsevol punt de l'&lt;em&gt;array&lt;/em&gt;, tenim
un problema. Ens cal &amp;quot;moure&amp;quot; els elements cap a un costat i cap a
l'altre.&lt;/p&gt;
&lt;p&gt;Quan la mida total de la seqüència ens és desconeguda o pot variar
significativament (creixent i decreixent) al llarg del seu ús, el
problema és encara &amp;quot;pitjor&amp;quot;: ens trobem amb la complexitat d'anar
ampliant o/i encongint l'&lt;em&gt;array&lt;/em&gt;.  La manera habitual sol ser, crear
un nou &lt;em&gt;array&lt;/em&gt; amb la nova mida i copiar-hi les dades. Com que
l'operació és costosa, sovint es deixa un cert marge d'espai
disponible per a ampliacions.&lt;/p&gt;
&lt;p&gt;Java ens ofereix una classe que ens fa totes aquestes operacions sense
haver-les d'implementar nosaltres. Consulta l'&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/index.html?java/lang/System.html"&gt;API de Vector&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-rendiment-de-vector"&gt;
&lt;h3&gt;Exercici 7. Rendiment de &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;&lt;/h3&gt;
&lt;p&gt;Defineix una prova per poder comparar el rendiment de la classe
&lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; amb l'ús dels &lt;em&gt;arrays&lt;/em&gt; analitzat al'exercici anterior.&lt;/p&gt;
&lt;p&gt;Com que &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; només pot emmagatzemar objectes (no tipus
primitius), declara un &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; de &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; amb el constructor
&lt;tt class="docutils literal"&gt;Vector(int initialCapacity)&lt;/tt&gt; i omple'l amb els valors dels enters,
per exemple amb &lt;tt class="docutils literal"&gt;add()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Les dues variants de còpia seran:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&amp;quot;a mà&amp;quot;: com amb la primera d'&lt;em&gt;arrays&lt;/em&gt; copiarem element a element
fent servir un bucle.&lt;/li&gt;
&lt;li&gt;automàtic: fent servir el constructor &lt;tt class="docutils literal"&gt;Vector(Collection&amp;lt;? extends
E&amp;gt; c)&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Com sempre, omple la taula de resultats i elabora un informe
comparatiu. Inclou la comparativa amb els resultats de l'exercici
anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-8-opcional-operacions-de-vector"&gt;
&lt;h3&gt;Exercici 8. [opcional] Operacions de &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;&lt;/h3&gt;
&lt;p&gt;Si disposes de prou temps, pot ser un bon exercici implementar i
comparar algunes de les funcionalitats que ens ofereix &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Aquestes poden ser:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;inserció dels valors d'un &lt;em&gt;array&lt;/em&gt;/&lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; des del principi&lt;/p&gt;
&lt;p&gt;Requereix la implementació del desplaçament cap al final de la
seqüència a cada inserció.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;eliminat dels valors d'un &lt;em&gt;array&lt;/em&gt;/&lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; des del principi&lt;/p&gt;
&lt;p&gt;Requereix la implementació del desplaçament cap a l'inici de la
seqüència de la resta d'elements.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;ampliació de l'espai&lt;/p&gt;
&lt;p&gt;A partir d'un &lt;em&gt;array&lt;/em&gt;/&lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; amb unes dimensions inicials
determinades (i comunes) i un increment també comú, implementar una
prova que permeti anar incrementant les seqüències de manera que
requereixin fer l'increment de mida vàries vegades.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Disposes de quelcom més que idees per implementar alguna d'aquestes
funcionalitats a l'article &lt;a class="reference external" href="http://onjava.com/pub/a/onjava/2001/05/30/optimization.html"&gt;The Performance of Java's Lists&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="llistes"&gt;
&lt;h2&gt;Llistes&lt;/h2&gt;
&lt;p&gt;A la secció anterior hem analitzat diferents maneres d'agrupar
informació d'un mateix tipus en forma de seqüència, fins a arribar a
la classe &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; que ens ofereix un bon nombre de funcionalitats
ja implementades.&lt;/p&gt;
&lt;p&gt;Tot i sent molt convenient, la classe &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; presenta alguns
problemes de rendiment en determinades situacions. Per aquesta raó,
els desenvolupadors de l'API de Java han inclòs altres classes.&lt;/p&gt;
&lt;p&gt;En aquesta secció n'analitzarem bàsicament les classes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;ArrayList&lt;/tt&gt;: &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html"&gt;API ArrayList&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;LinkedList&lt;/tt&gt;: &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html"&gt;API LinkedList&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Nota&lt;/strong&gt;: normalment a la programació orientada a objectes, amb
l'encapsulació es pretén ocultar informació sobre la implementació
interna de les classes. En aquest cas, els dissenyadors de l'API de
Java s'estan saltant aquest principi donant-nos pistes de com estan
implementades aquestes classes. La raó principal es resumeix amb la
paraula &lt;strong&gt;rendiment&lt;/strong&gt;. El coneixement de la implementació interna
d'aquestes classes permet els programadors de Java decidir-se per la
classe que millor s'ajusta a les necessitats del programa que està
realitzant.&lt;/p&gt;
&lt;div class="section" id="exercici-9-insercio-sequencial"&gt;
&lt;h3&gt;Exercici 9. Inserció seqüencial&lt;/h3&gt;
&lt;p&gt;Defineix una prova amb les tres classe de manera que inserim una
seqüència de &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; al final (&lt;tt class="docutils literal"&gt;add()&lt;/tt&gt;)&lt;/p&gt;
&lt;p&gt;Per &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;ArrayList&lt;/tt&gt; farem dues versions:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;amb el constructor per defecte&lt;/li&gt;
&lt;li&gt;amb el constructor que permet inicialitzar l'espai que requerirà la
prova.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per &lt;tt class="docutils literal"&gt;LinkedList&lt;/tt&gt; només en fem una perquè la seva implementació
interna la fa insensible a saber la mida final.&lt;/p&gt;
&lt;p&gt;És a dir, en total hi ha 5 variants: dues per &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;, dues per
&lt;tt class="docutils literal"&gt;ArrayList&lt;/tt&gt; i una per &lt;tt class="docutils literal"&gt;LinkedList&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-consulta-sequencial"&gt;
&lt;h3&gt;Exercici 10. Consulta seqüèncial&lt;/h3&gt;
&lt;p&gt;Defineix una prova amb les tres classe de manera que inicialment
disposem d'una seqüència creixent de &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; i la ordeni
decreixement amb el mètode de la bombolla.&lt;/p&gt;
&lt;p&gt;Recorda que aquest mètode d'ordenació es basa en anar comparant dos a
dos i intercanviant els valors que no es troben en ordre, fent
passades per tots els elements fins que no hi ha més canvis.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-11-consulta-aleatoria"&gt;
&lt;h3&gt;Exercici 11. Consulta aleatòria&lt;/h3&gt;
&lt;p&gt;Aquest conjunt de proves persegueix comprovar el rendiment de les tres
estructures que estem analitzant quan s'accedeix de manera aleatòria
(no seqüencial).&lt;/p&gt;
&lt;p&gt;Omplirem inicialment les seqüències de manera creixent amb &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;La prova consisteix en mesurar quan costa mostrar tots els valors
començant per cada posició múltiple de tres, per continuar amb els
anteriors fins (sense incloure) l'anterior múltiple de tres.  Serien
les posicions 0, 3, 2, 1, 6, 5, 4, 9, 8, 7, ...&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-12-insercio-aleatoria"&gt;
&lt;h3&gt;Exercici 12. Inserció aleatòria&lt;/h3&gt;
&lt;p&gt;En aquesta ocasió, realitzarem la prova d'inserir dades a instàncies
de les diferents classes que estem analitzant. Aquest cop, però, no
inserirem les dades de manera seqüencial, sinó que ho farem sempre des
del punt mig.&lt;/p&gt;
&lt;p&gt;Per tant, el primer element l'inserirem a la posició 0. El segon a la
0 també (1 element / 2 resulta 0). El tercer element anirà a la
posició 1 (2 / 2 fa 1). El quart va a la 1 ( 3/2 fa 1). El cinqué a la
2 (4 / 2 fa 2) i així...&lt;/p&gt;
&lt;p&gt;Per &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;ArrayList&lt;/tt&gt; farem dues versions: una amb el
constructor per defecte i l'altra inicialitzant-les amb la mida
màxima.&lt;/p&gt;
&lt;p&gt;En total doncs, tindrem cinc proves, dues per &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;, dues per
&lt;tt class="docutils literal"&gt;ArrayList&lt;/tt&gt; i una per &lt;tt class="docutils literal"&gt;LinkedList&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-13-modificacio-aleatoria"&gt;
&lt;h3&gt;Exercici 13. Modificació aleatòria&lt;/h3&gt;
&lt;p&gt;Per la realització d'aquest conjunt de proves, et caldrà implementar
l'algoritme d'ordenació &lt;em&gt;quicksort&lt;/em&gt; (mira per exemple la proposta de
&lt;a class="reference external" href="http://www.vogella.com/articles/JavaAlgorithmsQuicksort/article.html"&gt;vogela&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Per començar, tenint en comptes que les tres classes que estem
comparant implementen la interfície &lt;tt class="docutils literal"&gt;List&lt;/tt&gt;, adapta l'algorisme de
manera que el mètode &lt;tt class="docutils literal"&gt;sort()&lt;/tt&gt; disposi (també) de la següent
signatura:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;sort&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Un cop el tinguis funcionant (fes alguna prova simple), munta les
proves de manera que els valors de cada seqüència s'inicialitzi en ordre
decreixent, i mesura quan li costa a l'algorisme d'ordenació processar
instàncies de cadascuna de les tres classes de manera que les deixi
ordenades creixentment.&lt;/p&gt;
&lt;p&gt;Donat que &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; implementa la &lt;em&gt;interface&lt;/em&gt; &lt;tt class="docutils literal"&gt;Comparable&lt;/tt&gt;,
afegeix a l'estudi l'anàlisi fent servir &lt;tt class="docutils literal"&gt;Collections.sort(List&amp;lt;T&amp;gt;
list)&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;En total, doncs, hauràs de fer sis proves: dues per cadascuna de les
classes que estem comparant.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-14-buidat"&gt;
&lt;h3&gt;Exercici 14. Buidat&lt;/h3&gt;
&lt;p&gt;Aquest conjunt de proves requereix inicialitzar les seqüències amb
&lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; seqüencials.&lt;/p&gt;
&lt;p&gt;El que es mesurarà és el temps que costa per cada classe buidar tots
els elements segons els següents criteris:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;eliminant sempre el primer (cua)&lt;/li&gt;
&lt;li&gt;eliminant sempre el darrer (pila)&lt;/li&gt;
&lt;li&gt;eliminant sempre el del punt mig&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En total són nou proves (tres per classe)&lt;/p&gt;
&lt;p&gt;Opcionalment se't proposa que avaluïs les classes &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/ArrayDeque.html"&gt;ArrayDeque&lt;/a&gt;
i &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/Stack.html"&gt;Stack&lt;/a&gt; per
comprovar si aquestes classes ofereixen avantatge eliminant el primer
o el darrer respectivament)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-15-resum"&gt;
&lt;h3&gt;Exercici 15. Resum&lt;/h3&gt;
&lt;p&gt;A partir dels resultats obtinguts amb els exercicis anteriors, elabora
un informe en el que, per cada opció, indiquis en quins casos d'ús
és recomanable escollir-la i en quins casos és preferible no fer-ho.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Conjunts en Java</title><link href="http://apuntstecnics.herokuapp.com/conjunts-en-java.html" rel="alternate"></link><updated>2015-02-05T16:21:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:conjunts-en-java.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document introdueix l'agrupació d'informació sense ordre en un
objecte Java. Per fer-ho, descriu l'important concepte d'&lt;em&gt;igualtat&lt;/em&gt;
des de la perspectiva del llenguatge.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="conjunts"&gt;
&lt;h2&gt;Conjunts&lt;/h2&gt;
&lt;p&gt;Entendrem com &lt;em&gt;conjunt&lt;/em&gt; una agrupació d'objectes en alguna classe
contenidora que implementi la &lt;em&gt;interface&lt;/em&gt; &lt;tt class="docutils literal"&gt;Set&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;De entre les característiques particulars dels conjunts destacarem el
fet que no accepten elements repetits i que no es poden fer
assumpcions en l'ordre en que es recuperen els elements introduïts.&lt;/p&gt;
&lt;p&gt;El següent diagrama UML és una representació parcial de les classes i
&lt;em&gt;interfaces&lt;/em&gt; que ofereix l'API de Java per donar suport al concepte de
conjunts.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Jerarquia de HashSet" src="http://apuntstecnics.herokuapp.com/images/poo021.img001.hashset.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Algunes de les operacions principals de la &lt;em&gt;interface&lt;/em&gt; &lt;tt class="docutils literal"&gt;Set&lt;/tt&gt; són:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean add(E e)&lt;/tt&gt;: afegeix l'element &lt;tt class="docutils literal"&gt;e&lt;/tt&gt; al conjunt sempre i
quant no s'hi trobi ja. En cas que s'afegeixi, retorna &lt;tt class="docutils literal"&gt;true&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;int size()&lt;/tt&gt;: retorna el nombre d'elements dins el conjunt.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean remove(Object o)&lt;/tt&gt;: elimina l'element &lt;tt class="docutils literal"&gt;o&lt;/tt&gt; del conjunt si
hi era, i retorna &lt;tt class="docutils literal"&gt;true&lt;/tt&gt; en cas que l'hagi pogut eliminar.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean contains(Object o)&lt;/tt&gt;: retorna &lt;tt class="docutils literal"&gt;true&lt;/tt&gt; si el conjunt
inclou l'objecte &lt;tt class="docutils literal"&gt;o&lt;/tt&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Mira l'&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/Set.html"&gt;API de Set&lt;/a&gt; per a
més detalls.&lt;/p&gt;
&lt;p&gt;Per recórrer tots els elements d'un conjunt, donat que implementen
&lt;em&gt;Iterable&lt;/em&gt;, podem fer servir el bucle &lt;em&gt;foreach&lt;/em&gt;. Per exemple&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Set&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nl"&gt;s:&lt;/span&gt; &lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Tal i com està definit el codi anterior, no podem fer cap assumpció de
l'ordre en que apareixeran els elements del conjunt de &lt;em&gt;Strings&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Una de les implementacions de conjunts és &lt;tt class="docutils literal"&gt;HashSet&lt;/tt&gt;. Serà la que
farem servir pels següents exercicis.&lt;/p&gt;
&lt;div class="section" id="exercici-1-gestio-d-un-conjunt-de-strings"&gt;
&lt;h3&gt;Exercici 1. Gestió d'un conjunt de Strings&lt;/h3&gt;
&lt;p&gt;Implementa un programa que permeti mantenir un conjunt de &lt;em&gt;Strings&lt;/em&gt;.
Les opcions disponibles seran:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;a «string»&lt;/tt&gt;: afegeix el String al conjunt si no existia.&lt;/p&gt;
&lt;p&gt;Si el pot afegir indica &lt;tt class="docutils literal"&gt;Afegit «string»&lt;/tt&gt; altrament indica &lt;tt class="docutils literal"&gt;Ja
existeix «string»&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;e «string»&lt;/tt&gt;: consulta si el String es troba al conjunt. Indica
&lt;tt class="docutils literal"&gt;Existeix «string»&lt;/tt&gt; o &lt;tt class="docutils literal"&gt;No existeix «string»&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;r «string»&lt;/tt&gt;: elimina el String del conjunt si existia.&lt;/p&gt;
&lt;p&gt;Si el pot eliminar indica &lt;tt class="docutils literal"&gt;Eliminat «string»&lt;/tt&gt; altrament indica
&lt;tt class="docutils literal"&gt;No existeix «string»&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;b&lt;/tt&gt;         : buida el conjunt. Demana confirmació si hi ha al
menys un element a eliminar amb &lt;tt class="docutils literal"&gt;Eliminar «n» element/s? (s/N)&lt;/tt&gt;.
Si no hi ha cap element, indica &lt;tt class="docutils literal"&gt;Conjunt buit&lt;/tt&gt;.  Finalment, i en
qualsevol dels casos, indica el nombre d'elements eliminats amb
&lt;tt class="docutils literal"&gt;Eliminats «n» element/s&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;q&lt;/tt&gt;         : mostra el nombre d'elements al conjunt amb el
missatge: &lt;tt class="docutils literal"&gt;Nombre d'elements: «n»&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;m&lt;/tt&gt;         : mostra tots els elements del conjunt separats per
coma i entre cometes dobles, o &lt;tt class="docutils literal"&gt;Conjunt buit&lt;/tt&gt; si no hi ha cap
element.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;x&lt;/tt&gt;         : finalitza l'execució.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="igualtat"&gt;
&lt;h2&gt;Igualtat&lt;/h2&gt;
&lt;p&gt;Què vol dir que dos objectes siguin iguals?&lt;/p&gt;
&lt;p&gt;Probablement, estarem d'acord amb que dos objectes són iguals si fan
referència a la mateixa instància, oi? És clar, és la identitat la que
està en joc!&lt;/p&gt;
&lt;p&gt;Són iguals però, dos cadenes de caràcters que, no ocupant la mateixa
posició de memòria, contenen el mateix (ex. &amp;quot;hola&amp;quot;)? Sembla què és
quelcom que esperaríem, oi?&lt;/p&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;EnvoltaString: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;hola&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\&amp;quot; == \&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\&amp;quot; -&amp;gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\&amp;quot;.equals(\&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\&amp;quot;) -&amp;gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;)));&lt;/span&gt;
        &lt;span class="c1"&gt;//&lt;/span&gt;
        &lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; == &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; -&amp;gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.equals(&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;) -&amp;gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esb&lt;/span&gt;&lt;span class="o"&gt;)));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;El codi anterior té com a sortida:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&amp;quot;hola&amp;quot; == &amp;quot;hola&amp;quot; -&amp;gt; false
&amp;quot;hola&amp;quot;.equals(&amp;quot;hola&amp;quot;) -&amp;gt; true
EnvoltaString: hola == EnvoltaString: hola -&amp;gt; false
EnvoltaString: hola.equals(EnvoltaString: hola) -&amp;gt; false
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Com ja sabem, per comparar &lt;em&gt;Strings&lt;/em&gt; en Java, ens hem vist obligats a
fer servir el mètode &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Aquest mètode l'hereta tota classe que definim de la classe &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;.
A l'exemple, però, no sembla funcionar per altres objectes
com ara &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;El problema deu trobar al mètode &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt;. On està definit el codi
de &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; que s'executa a la darrera línia de l'exemple?&lt;/p&gt;
&lt;p&gt;A &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt; és clar. Però lògicament a &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt; no li podem demanar que
sàpiga com comparar totes i cadascuna de les seves subclasses!&lt;/p&gt;
&lt;p&gt;Imagina-t'ho només amb &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;. Quan hauria de considerar que
dos &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; són iguals? Quan els seus valors són iguals (segons
&lt;tt class="docutils literal"&gt;String.equals()&lt;/tt&gt;)? Quan siguin iguals independents de majúscules i
minúscules?&lt;/p&gt;
&lt;p&gt;Nosaltres decidim què fa iguals a dues instàncies de &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;
i, per tant, nosaltres haurem de desenvolupar el codi per
comparar-les.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;EnvoltaString: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;hola&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; == &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; -&amp;gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.equals(&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;) -&amp;gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esb&lt;/span&gt;&lt;span class="o"&gt;)));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixa't que sobreescrivim &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; de manera que, en rebre un altre &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;, indiqui cert si els valors són iguals segons &lt;tt class="docutils literal"&gt;String.equals()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;La sortida d'aquest programa, com era d'esperar, serà:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;EnvoltaString: hola == EnvoltaString: hola -&amp;gt; false
EnvoltaString: hola.equals(EnvoltaString: hola) -&amp;gt; true
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-2-envoltastring-indiferent-a-majuscules-i-minuscules"&gt;
&lt;h3&gt;Exercici 2. EnvoltaString indiferent a majúscules i minúscules&lt;/h3&gt;
&lt;p&gt;Modifica la classe &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; de manera que consideri iguals
dos &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; quan els seus valors coincideixen sense tenir en
compte majúscules i minúscules.&lt;/p&gt;
&lt;p&gt;De fet, no hem redefinit completament el &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; de &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;. Només l'hem sobrecarregat quan el paràmetre sigui un &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Què passaria si provéssim el següent?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;()));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest cas cridaria a &lt;tt class="docutils literal"&gt;Object.equals()&lt;/tt&gt; i respondria
adequadament. Si volguéssim controlar-ho més podríem definir
&lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; com:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt; &lt;span class="k"&gt;instanceof&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;  &lt;span class="c1"&gt;// si ja no és ni un EnvoltaString malament&lt;/span&gt;
        &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(((&lt;/span&gt;&lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-3-envoltastring-es-compara-amb-strings"&gt;
&lt;h3&gt;Exercici 3. EnvoltaString és compara amb Strings&lt;/h3&gt;
&lt;p&gt;Modifica la classe &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; de manera que permeti comparar un
&lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; també amb un String i que en aquest cas,
&lt;tt class="docutils literal"&gt;EnvoltaString.equals(String)&lt;/tt&gt; sigui cert si el paràmetre és
igual al valor del &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Planteja dues versions, amb una que no faci servir &lt;tt class="docutils literal"&gt;instanceof&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="no-hi-ha-prou-amb-equals"&gt;
&lt;h3&gt;No hi ha prou amb &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt;&lt;/h3&gt;
&lt;p&gt;Si les coses fossin tan fàcils com redefinir el mètode &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt;,
Java seria massa avorrit.&lt;/p&gt;
&lt;p&gt;Considera la classe &lt;a class="reference external" href="http://java.sun.com/javase/7/docs/api/java/util/HashSet.html"&gt;java.util.HashSet&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Segons la seva documentació, aquesta classe implementa un conjunt
d'elements en el que les operacions bàsiques (afegir, eliminar,
comptar i cercar) tenen un cost constant.&lt;/p&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.HashSet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;  &lt;span class="c1"&gt;// aquest no l&amp;#39;afegirà perquè està repetit&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="nl"&gt;i:&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Trobat l&amp;#39;enter: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Una possible sortida seria:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Trobat l&amp;#39;enter: 0
Trobat l&amp;#39;enter: 1
Trobat l&amp;#39;enter: 2
Trobat l&amp;#39;enter: 3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest cas, els valors han sortit ordenats però no podem esperar
això sempre d'una classe conjunt.&lt;/p&gt;
&lt;p&gt;Ara bé, que passarà amb una classe feta per nosaltres?&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.HashSet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// definim una classe interna que encapsula un Integer&lt;/span&gt;
    &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Enter&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt; &lt;span class="nl"&gt;i:&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Trobat l&amp;#39;enter: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En negreta veiem els canvis principals. Ara, el nostre
&lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; disposa d'un valor de tipus Integer, de constructors
adequats per a incialitzar-lo i d'un mètode &lt;tt class="docutils literal"&gt;toString()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Per altra banda, el &lt;tt class="docutils literal"&gt;HashSet&lt;/tt&gt; ara és de &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; i no de &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Funcionarà el programa? La sortida pot ser:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Trobat l&amp;#39;enter: 1
Trobat l&amp;#39;enter: 3
Trobat l&amp;#39;enter: 2
Trobat l&amp;#39;enter: 2
Trobat l&amp;#39;enter: 0
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;No et deixis confondre per l'ordre de la sortida. Si a tu et surt un
altre, recorda que els conjunts no es basen en un ordre concret.&lt;/p&gt;
&lt;p&gt;El punt crític està en el fet que el valor 2 està repetit! No viola
això el què ha de ser un conjunt?&lt;/p&gt;
&lt;p&gt;Però, com s'ho pot fer &lt;tt class="docutils literal"&gt;HashSet&lt;/tt&gt; per saber que dos Enter són iguals?&lt;/p&gt;
&lt;p&gt;És clar, el problema està en que Enter no té implementat equals()&lt;/p&gt;
&lt;p&gt;Fem-ho doncs&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.HashSet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// definim una classe interna que encapsula un Integer&lt;/span&gt;
    &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Enter&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt; &lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt; &lt;span class="nl"&gt;i:&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Trobat l&amp;#39;enter: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Funcionarà?&lt;/p&gt;
&lt;p&gt;Doncs no. Tenim el mateix resultat! Perquè?&lt;/p&gt;
&lt;p&gt;Tot plegat, té a veure amb un mètode heretat de &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt; anomenat
&lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Mirem el que ens diu la documentació d'&lt;a class="reference external" href="http://java.sun.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29"&gt;aquest mètode&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[&lt;tt class="docutils literal"&gt;int hashcode()&lt;/tt&gt;] Returns a hash code value for the object.
This method is supported for the benefit of hashtables such as
those provided by java.util.Hashtable.&lt;/p&gt;
&lt;p&gt;The general contract of hashCode is:&lt;/p&gt;
&lt;p&gt;Whenever it is invoked on the same object more than once during an
execution of a Java application, the hashCode method must
consistently return the same integer, provided no information used
in equals comparisons on the object is modified. This integer need
not remain consistent from one execution of an application to
another execution of the same application.&lt;/p&gt;
&lt;p&gt;If two objects are equal according to the equals(Object) method,
then calling the hashCode method on each of the two objects must
produce the same integer result.&lt;/p&gt;
&lt;p&gt;It is not required that if two objects are unequal according to
the equals(java.lang.Object) method, then calling the hashCode
method on each of the two objects must produce distinct integer
results. However, the programmer should be aware that producing
distinct integer results for unequal objects may improve the
performance of hashtables.&lt;/p&gt;
&lt;p&gt;As much as is reasonably practical, the hashCode method defined by
class Object does return distinct integers for distinct objects.
(This is typically implemented by converting the internal address
of the object into an integer, but this implementation technique
is not required by the JavaTM programming language.)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Considera que modifiquem el main() anterior amb el següent:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt; &lt;span class="nl"&gt;i:&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Trobat l&amp;#39;enter: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; amb hashCode: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Genera la següent sortida&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Trobat l&amp;#39;enter: 1 amb hashCode: 8152936
Trobat l&amp;#39;enter: 3 amb hashCode: 5538765
Trobat l&amp;#39;enter: 2 amb hashCode: 10039797
Trobat l&amp;#39;enter: 2 amb hashCode: 23660326
Trobat l&amp;#39;enter: 0 amb hashCode: 32716405
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que els dos &amp;quot;2&amp;quot; tenen valors diferents de &lt;tt class="docutils literal"&gt;hashCode&lt;/tt&gt;!&lt;/p&gt;
&lt;p&gt;El problema, però, té una fàcil solució: redefinint &lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt; per
la nostra classe.&lt;/p&gt;
&lt;p&gt;Per exemple, considera:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Enter&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt; &lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fàcil, oi? Aprofitem el &lt;tt class="docutils literal"&gt;hashCode&lt;/tt&gt; de &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; que hem de suposar
que està ben definit, i ja està. Doncs... encara no funciona!&lt;/p&gt;
&lt;p&gt;La sortida ara és:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Trobat l&amp;#39;enter: 0 amb hashCode: 0
Trobat l&amp;#39;enter: 1 amb hashCode: 1
Trobat l&amp;#39;enter: 2 amb hashCode: 2
Trobat l&amp;#39;enter: 2 amb hashCode: 2
Trobat l&amp;#39;enter: 3 amb hashCode: 3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;És a dir, els &lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt; dels dos '2' són iguals. Perquè no
funciona doncs?&lt;/p&gt;
&lt;p&gt;A veure, repassem, tenim redefinit &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt;. El
primer retorna cert si, i només si, els valors són iguals segons
&lt;tt class="docutils literal"&gt;Integer.equals()&lt;/tt&gt; mentre que el segon retorna un enter diferent
depenent del valor (que amb &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; semblava funcionar)&lt;/p&gt;
&lt;p&gt;Pensem...&lt;/p&gt;
&lt;p&gt;Posem un &lt;em&gt;xivato&lt;/em&gt; als nostres mètodes i mirem que passa&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.HashSet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;EnvoltaString: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;EnvoltaString.equals(): this=&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\taltre=&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;EnvoltaString.hashCode(): this=&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="nl"&gt;i:&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Trobat el EnvoltaString: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; amb hashCode: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Ens hauria de sortir el &lt;em&gt;xivato&lt;/em&gt; cada cop que algú (&lt;tt class="docutils literal"&gt;HashSet&lt;/tt&gt;) cridi
a aquestes funcions.&lt;/p&gt;
&lt;p&gt;Però la resposta és:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Enter.hashCode(): this=0
Enter.hashCode(): this=1
Enter.hashCode(): this=2
Enter.hashCode(): this=3
Enter.hashCode(): this=2
Enter.hashCode(): this=0
Trobat l&amp;#39;enter: 0 amb hashCode: 0
Enter.hashCode(): this=1
Trobat l&amp;#39;enter: 1 amb hashCode: 1
Enter.hashCode(): this=2
Trobat l&amp;#39;enter: 2 amb hashCode: 2
Enter.hashCode(): this=2
Trobat l&amp;#39;enter: 2 amb hashCode: 2
Enter.hashCode(): this=3
Trobat l&amp;#39;enter: 3 amb hashCode: 3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que crida &lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt; dos cops per element. Primer en
introduir-lo i després per extreure'l.&lt;/p&gt;
&lt;p&gt;Fixa't també que ni rastre de la crida a &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt;!&lt;/p&gt;
&lt;p&gt;Perquè no la fa? Perquè no crida a &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; per comprovar si són
elements iguals?&lt;/p&gt;
&lt;p&gt;Pensa abans de continuar llegint!&lt;/p&gt;
&lt;p&gt;Per a aquells que encara no ho hàgiu vist, el problema està en que
&lt;tt class="docutils literal"&gt;HashSet&lt;/tt&gt; crida a &lt;tt class="docutils literal"&gt;equals(Object)&lt;/tt&gt; i no a &lt;tt class="docutils literal"&gt;equals(Enter)&lt;/tt&gt; !&lt;/p&gt;
&lt;p&gt;Per a arreglar-ho, haurem de programar &lt;tt class="docutils literal"&gt;equals(Object)&lt;/tt&gt; en comptes
de &lt;tt class="docutils literal"&gt;equals(Enter)&lt;/tt&gt;. Sí, no sembla massa elegant des de la
perspectiva OO, oi?. De moment és el que tenim.&lt;/p&gt;
&lt;p&gt;Per exemple:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.HashSet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="cm"&gt;/* definim una classe interna que encapsula un Integer */&lt;/span&gt;
    &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Enter&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Enter.equals(): this=&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\taltre=&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt; &lt;span class="k"&gt;instanceof&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(((&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Enter.hashCode(): this=&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt; &lt;span class="nl"&gt;i:&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Trobat l&amp;#39;enter: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; amb hashCode: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Ara la sortida és&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Enter.hashCode(): this=0
Enter.hashCode(): this=1
Enter.hashCode(): this=2
Enter.hashCode(): this=3
Enter.hashCode(): this=2
Enter.equals(): this=2      altre=2
Enter.hashCode(): this=0
Trobat l&amp;#39;enter: 0 amb hashCode: 0
Enter.hashCode(): this=1
Trobat l&amp;#39;enter: 1 amb hashCode: 1
Enter.hashCode(): this=2
Trobat l&amp;#39;enter: 2 amb hashCode: 2
Enter.hashCode(): this=3
Trobat l&amp;#39;enter: 3 amb hashCode: 3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que a &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; només se'l crida un cop.&lt;/p&gt;
&lt;p&gt;Quan? Pensa-ho abans de continuar llegint!&lt;/p&gt;
&lt;p&gt;Evidentment és a l'hora d'inserir un element que coincideix amb un
&lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt; d'un altre ja existent.&lt;/p&gt;
&lt;p&gt;En tot cas, fixa't que finalment hem aconseguit el nostre objectiu:
que un conjunt no repeteixi elements d'un tipus definit per nosaltres!&lt;/p&gt;
&lt;p&gt;En resum: quan l'usuari de la teva classe hagi de poder comparar la
igualtat d'instàncies d'aquesta, redefineix també el mètode
&lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt; i assegura't que &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; accepta &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-una-colla-de-gats"&gt;
&lt;h3&gt;Exercici 4. Una colla de gats&lt;/h3&gt;
&lt;p&gt;Crea una nova versió de la classe Gat que permeti a un
&lt;tt class="docutils literal"&gt;HashSet&amp;lt;Gat&amp;gt;&lt;/tt&gt; funcionar correctament.&lt;/p&gt;
&lt;p&gt;Considerarem que un gat és igual a un altre si, i només si, els seus
noms són iguals.&lt;/p&gt;
&lt;p&gt;Fes una classe &lt;tt class="docutils literal"&gt;TestGatSet&lt;/tt&gt; similar a la classe &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;
vista a l'exemple que afegeixi a un &lt;tt class="docutils literal"&gt;HashSet&amp;lt;Gat&amp;gt;&lt;/tt&gt; cinc instàncies
de Gat tals que:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;donades dues instàncies de gat qualsevol d'entre les cinc
(referenciem amb &lt;tt class="docutils literal"&gt;g1&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;g2&lt;/tt&gt;) és fals &lt;tt class="docutils literal"&gt;g1 == g2&lt;/tt&gt;. És a dir,
les cinc provenen de cinc crides a &lt;tt class="docutils literal"&gt;new Gat(nom)&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;existeixen dues instàncies de gat d'entre les cinc (i només dues)
tals que &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;g1.getNom().equals(g2.getNom())&lt;/span&gt;&lt;/tt&gt;. És a dir, únicament
dos dels gats tenen el mateix nom. De la mateixa manera que
&lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;fes que la sortida de &lt;tt class="docutils literal"&gt;TestGatSet&lt;/tt&gt; mostri
clarament que no hi ha cap gat repetit (és a dir, amb nom repetit).&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Mapes I</title><link href="http://apuntstecnics.herokuapp.com/mapes-i.html" rel="alternate"></link><updated>2015-02-05T16:20:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:mapes-i.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document correspon a la primera part de l'estudi del concepte
d'associació &lt;em&gt;clau-valor&lt;/em&gt; que aquí anomenarem &lt;em&gt;mapes&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;La introducció no és directa. Abans d'arribar-hi, presenta un cas
d'estudi &lt;a class="footnote-reference" href="#refheadfirst" id="id1"&gt;[1]&lt;/a&gt; — una petita aplicació per gestionar un
celler de vins &lt;a class="footnote-reference" href="#consumresponsable" id="id2"&gt;[2]&lt;/a&gt; — i segueix l'evolució del seu
desenvolupament des dels primers requeriments fins deixar un disseny
preparat pels canvis previsibles que ofereix el context per a aplicar
el tema principal del document.&lt;/p&gt;
&lt;p&gt;En aquesta primera part s'estableixen les bases que permetran treure
profit d'una de les maneres d'usar els mapes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="la-botiga-de-vi"&gt;
&lt;h2&gt;La botiga de vi&lt;/h2&gt;
&lt;p&gt;La senyora Estrella d'Argent és propietària d'una reconeguda botiga de
vi a la ciutat especialitzada en vins de taula catalans. Fins ara,
arribaves a la botiga i li descrivies les característiques que
voldries que tingués el vi que cercaves, i quasi bé sempre la Sra.
Estrella sortia de la rebotiga amb una o més ampolles que satisfeien
els teus desitjos.&lt;/p&gt;
&lt;p&gt;Ara però, la Sra. Estrella comença a fer-se gran i hi el seu nebot li
ajuda a col·locar les ampolles al magatzem. El problema és que
d'aquesta manera la Sra. Estrella no se'n recorda on para cada vi quan
el client li demana. La seva germana, la Gualda, li ha comentat que
coneix un equip de desenvolupadors molt trempats (nosaltres) que li
podrien fer una aplicació a mida per ajudar-la amb els estocs de vi.&lt;/p&gt;
&lt;div class="section" id="exercici-1-cerques-de-vi"&gt;
&lt;h3&gt;Exercici 1. Cerques de vi&lt;/h3&gt;
&lt;p&gt;En aquest exercici, implementarem una primera versió de l'aplicació de
gestió d'estocs de la botiga de la Sra. Estrella.&lt;/p&gt;
&lt;p&gt;Així, el nostre model inicial es representa amb el diagrama de classes
següent:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama inicial de classes de la Botiga" src="http://apuntstecnics.herokuapp.com/images/poo022.img001.botiga.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Les propietats que ens interessen de moment d'un vi
&lt;a class="footnote-reference" href="#simplificacions" id="id3"&gt;[3]&lt;/a&gt; són:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;ref: un nr. de referència intern de la botiga. Ex. &lt;tt class="docutils literal"&gt;2012010043&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;nom: el nom oficial del producte. Ex. &lt;tt class="docutils literal"&gt;Roura blanc&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;preu: l'import a la venda (en euros i sense iva)&lt;/li&gt;
&lt;li&gt;lloc: la localització del producte al magatzem. Ex. &lt;tt class="docutils literal"&gt;al fons
prestatge vermell&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;celler: el celler que el produeix. Ex. &lt;tt class="docutils literal"&gt;Juan Antonio Pérez Roura&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;origen: la denominació d'origen. Ex. &lt;tt class="docutils literal"&gt;Alella&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;varietat: la varietat del raïm &lt;a class="footnote-reference" href="#varietatraim" id="id4"&gt;[4]&lt;/a&gt;. Ex. &lt;tt class="docutils literal"&gt;sauvignon&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;tipus: el tipus de vi. Ex. &lt;tt class="docutils literal"&gt;blanc&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;collita: l'any de collita. Ex. &lt;tt class="docutils literal"&gt;2012&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Alguns detalls d'implementació:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;El mètode &lt;tt class="docutils literal"&gt;Botiga.afegeix(Vi)&lt;/tt&gt;, en cas que ja existeixi un
vi amb el mateix nr. de referència (atribut &lt;tt class="docutils literal"&gt;ref&lt;/tt&gt;), genera
l'excepció &lt;tt class="docutils literal"&gt;BotigaException&lt;/tt&gt; que estén directament
&lt;tt class="docutils literal"&gt;java.lang.Exception&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El mètode &lt;tt class="docutils literal"&gt;Vi Botiga.obte(ref)&lt;/tt&gt;, en cas que no
existeixi cap vi amb el nr. de referència indicat, genera
l'excepció &lt;tt class="docutils literal"&gt;BotigaException&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El mètode &lt;tt class="docutils literal"&gt;List&amp;lt;Vi&amp;gt; Botiga.cerca(Vi)&lt;/tt&gt;, retorna la
llista de vins que acompleixen tots els camps no nuls del
vi que rep. En cas que no trobi cap vi que respongui a
les especificacions, retorna una llista buida.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El tipus &lt;em&gt;integer&lt;/em&gt; pot ser representat per un &lt;tt class="docutils literal"&gt;long&lt;/tt&gt; o un &lt;tt class="docutils literal"&gt;int&lt;/tt&gt;
depenent del context. Per exemple, per l'any de collita probablement
en tindrem prou amb un &lt;tt class="docutils literal"&gt;int&lt;/tt&gt;, mentre que per la referència ens
serà interessant disposar d'un &lt;tt class="docutils literal"&gt;long&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El tipus &lt;em&gt;Money&lt;/em&gt; pot ser representat en Java pel tipus &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html"&gt;BigDecimal&lt;/a&gt;
arrodonint a dos decimals.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El següent esquema de codi, tot i sent incomplet i no gaire elegant,
pot ajudar a fer-te una idea de com podria funcionar.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Botiga&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Botiga&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;existeix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;ref&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Botiga.existeix() no implementat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;afegeix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;BotigaException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Botiga.afegeix() no completat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="nf"&gt;obte&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;ref&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;BotigaException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Botiga.obte() no implementat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/* retorna la llista de vins que s&amp;#39;ajusten a la espec */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nf"&gt;cerca&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="c1"&gt;// ignorem ref perquè és únic&lt;/span&gt;

            &lt;span class="c1"&gt;// comprova nom&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;())))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;continue&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="c1"&gt;// comprova preu màxim&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getPreu&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getPreu&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;compareTo&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getPreu&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;continue&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="c1"&gt;// comprova lloc&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLloc&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;(!&lt;/span&gt; &lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLloc&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLloc&lt;/span&gt;&lt;span class="o"&gt;())))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;continue&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="c1"&gt;// «...» comprova la resta&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Botiga.cerca() no completat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// l&amp;#39;afegim donat ha passat tots els filtres&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Podem provar la Botiga amb el següent codi (també incomplet)&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaBotiga&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="cm"&gt;/* afegeix uns vins */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;inicialitzaBotiga&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Botiga&lt;/span&gt; &lt;span class="n"&gt;botiga&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;

        &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2010010003&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Roura blanc&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;6.06&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;prestatge blau&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Juan Antonio Pérez Roura&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Alella&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;sauvignon&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;blanc&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2011100042&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Cercium 2009&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;5.65&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;prestatge verd amunt&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Mas Llunes Vinyes i Cellers&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Empordà&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;samsó&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;negre&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="mi"&gt;2009&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2011090002&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Masia Serra - IO 2008&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;13.50&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;prestatge verd amunt&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Masia Serra&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Empordà&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;garnatxa&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;negre&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="mi"&gt;2008&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="nl"&gt;v:&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;botiga&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;afegeix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BotigaException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/* defineix una especificació de vi */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="nf"&gt;creaEspec&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;   &lt;span class="c1"&gt;// sense nr. de ref perquè és únic&lt;/span&gt;
                &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;       &lt;span class="c1"&gt;// no importa el nom&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;10.50&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="c1"&gt;// com a molt fins a aquest preu&lt;/span&gt;
                &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;       &lt;span class="c1"&gt;// no importa el lloc&lt;/span&gt;
                &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;       &lt;span class="c1"&gt;// no importa el celler&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Empordà&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;  &lt;span class="c1"&gt;// la denominació d&amp;#39;origen sí importa&lt;/span&gt;
                &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;       &lt;span class="c1"&gt;// no importa la varietat&lt;/span&gt;
                &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;       &lt;span class="c1"&gt;// no importa el tipus&lt;/span&gt;
                &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;          &lt;span class="c1"&gt;// no importa l&amp;#39;any&lt;/span&gt;
                &lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/* mostra la llista de vins trobats */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostraVins&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;size&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;No s&amp;#39;ha trobat cap Vi&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;ha trobat les següents coincidències:&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="nl"&gt;v:&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                        &lt;span class="s"&gt;&amp;quot;Vi: %s\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                        &lt;span class="s"&gt;&amp;quot;\tNom : %s\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                        &lt;span class="s"&gt;&amp;quot;\tPreu: %s\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                        &lt;span class="s"&gt;&amp;quot;\tLloc: %s\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                        &lt;span class="s"&gt;&amp;quot;\t«...»\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                        &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRef&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt;
                        &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt;
                        &lt;span class="n"&gt;NumberFormat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getCurrencyInstance&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getPreu&lt;/span&gt;&lt;span class="o"&gt;()),&lt;/span&gt;
                        &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLloc&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;
                        &lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Botiga&lt;/span&gt; &lt;span class="n"&gt;botiga&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Botiga&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;inicialitzaBotiga&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;botiga&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="n"&gt;espec&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;creaEspec&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;botiga&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;cerca&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostraVins&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;L'exercici consisteix en completar el codi que falta per que el
programa &lt;tt class="docutils literal"&gt;UsaBotiga&lt;/tt&gt; funcioni.&lt;/p&gt;
&lt;p&gt;Comprova que estigui donant els resultats esperats.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-protegint-la-classe-vi"&gt;
&lt;h3&gt;Exercici 2. Protegint la classe Vi&lt;/h3&gt;
&lt;p&gt;Això de fer servir Strings com a tipus de les propietats és sovint una
mala idea. Què passa si diem que la denominació d'origen és &amp;quot;Alella&amp;quot;,
&amp;quot;alella&amp;quot;, o fins i tot &amp;quot;Aleya&amp;quot;?&lt;/p&gt;
&lt;p&gt;Alguns d'aquests problemes els podem resoldre comparant només la
versió diguem en majúscules, però d'altres...&lt;/p&gt;
&lt;p&gt;A aquest exercici hauràs de millorar el disseny de la classe Vi
de manera que:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;el nom i el celler continuïn sent de tipus String, però en les
cerques no es tindrà present les majúscules i minúscules
&lt;a class="footnote-reference" href="#caractersespecials" id="id5"&gt;[6]&lt;/a&gt;. A més a més, les cerques seran parcials i
per tant, el String buit (&amp;quot;&amp;quot;) serà tractat equivalentment a &lt;tt class="docutils literal"&gt;null&lt;/tt&gt;.
Considera el mètode &lt;tt class="docutils literal"&gt;String.contains()&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;Les localitzacions puguin ser: prestatge blau, prestatge verd amunt,
prestatge verd a baix, prestatge vermell, i altre.&lt;/li&gt;
&lt;li&gt;La denominació d'origen pugui ser (com a mínim &lt;a class="footnote-reference" href="#minimdo" id="id6"&gt;[5]&lt;/a&gt;):
Penedès, Terra Alta, Catalunya, Tarragona, Conca de Barberà,
Costers del Segre, Empordà, Montsant, Priorat, Alella, Pla de
Bages, i altre.&lt;/li&gt;
&lt;li&gt;La varietat pugui ser (com a mínim): Garnatxa, Malvasia, Monestrell,
Moscatell, Parellada, Samsó, Macabeu, Xarel·lo, Sauvignon, i altre.&lt;/li&gt;
&lt;li&gt;El tipus de vi pugui ser: blanc, negre, rosat, i altre.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Els valors &lt;em&gt;altre&lt;/em&gt; que apareixen a tots aquests enumerats permetran
indicar un valor no nul en els casos no contemplats a l'enumerat.&lt;/p&gt;
&lt;p&gt;Els accents i altres &amp;quot;floritures&amp;quot; de la nostra llengua poden
posar entrebancs a l'estructura &lt;tt class="docutils literal"&gt;enum&lt;/tt&gt; de Java. Considera el següent
codi d'exemple, que permetria fer ús del mètode &lt;tt class="docutils literal"&gt;toString()&lt;/tt&gt; per a
poder mostrar correctament un valor de les possibles varietats&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;enum&lt;/span&gt; &lt;span class="n"&gt;Varietat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;GARNATXA&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Garnatxa&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
    &lt;span class="n"&gt;SAMSO&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Samsó&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;XARELLO&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Xarel·lo&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;descr&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// descripció en format llegible&lt;/span&gt;
    &lt;span class="n"&gt;Varietat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;descr&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;descr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;descr&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;descr&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Malgrat tot, hem deixat algunes de les propietats &amp;quot;obertes&amp;quot; a rebre
valors poc adequats (ex.  un preu negatiu). A més, les propietats que
mantenim com a Strings, tot i havent eliminat el tema de
majúscules/minúscules, continuen patint de problemes a l'hora de
cercar (molt notablement ús d'accents). De moment ens despreocuparem
d'aquestes situacions.&lt;/p&gt;
&lt;p&gt;Evidentment, ara caldrà canviar la resta de classes per a adaptar-les
a aquestes modificacions.&lt;/p&gt;
&lt;p&gt;Crea una nova versió del &lt;tt class="docutils literal"&gt;UsaBotiga&lt;/tt&gt; amb el següent codi
d'inicialització:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;inicialitzaBotiga&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Botiga&lt;/span&gt; &lt;span class="n"&gt;botiga&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;

    &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2010010003&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;Roura blanc&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;6.06&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
            &lt;span class="n"&gt;Localitzacio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PRESTATGE_BLAU&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;Juan Antonio Pérez Roura&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Origen&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ALELLA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Varietat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SAUVIGNON&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Tipus&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;BLANC&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2011100042&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;Cercium 2009&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;5.65&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
            &lt;span class="n"&gt;Localitzacio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PRESTATGE_VERD_AMUNT&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;Mas Llunes Vinyes i Cellers&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Origen&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;EMPORDA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Varietat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SAMSO&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Tipus&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;NEGRE&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="mi"&gt;2009&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2011090002&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;Masia Serra - IO 2008&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;13.50&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
            &lt;span class="n"&gt;Localitzacio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PRESTATGE_VERD_AMUNT&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;Masia Serra&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Origen&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;EMPORDA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Varietat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;GARNATXA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Tipus&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;NEGRE&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="mi"&gt;2008&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="nl"&gt;v:&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;botiga&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;afegeix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BotigaException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Considera també la nova versió del mètode &lt;tt class="docutils literal"&gt;creaEspec()&lt;/tt&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="nf"&gt;creaEspec&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;              &lt;span class="c1"&gt;// sense nr. de ref perquè és únic&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;                    &lt;span class="c1"&gt;// no importa el nom&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;10.50&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="c1"&gt;// com a molt fins a aquest preu&lt;/span&gt;
            &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;                  &lt;span class="c1"&gt;// no importa el lloc&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;                    &lt;span class="c1"&gt;// no importa el celler&lt;/span&gt;
            &lt;span class="n"&gt;Origen&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;EMPORDA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;        &lt;span class="c1"&gt;// la denominació d&amp;#39;origen sí importa&lt;/span&gt;
            &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;                  &lt;span class="c1"&gt;// no importa la varietat&lt;/span&gt;
            &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;                  &lt;span class="c1"&gt;// no importa el tipus&lt;/span&gt;
            &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;                     &lt;span class="c1"&gt;// no importa l&amp;#39;any&lt;/span&gt;
            &lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Finalment, assegura't que crides el mètode &lt;tt class="docutils literal"&gt;Botiga.cerca(espec)&lt;/tt&gt;
perquè et surti el mateix resultat que a l'exercici anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-millorant-el-disseny-de-la-botiga-de-vins"&gt;
&lt;h3&gt;Exercici 3. Millorant el disseny de la botiga de vins&lt;/h3&gt;
&lt;p&gt;Amb els canvis de l'exercici anterior hem millorat força la usabilitat
de l'aplicació.&lt;/p&gt;
&lt;p&gt;Hi ha, però, un element que &amp;quot;canta&amp;quot;: per cercar els vins, el mètode
&lt;tt class="docutils literal"&gt;Botiga.cerca()&lt;/tt&gt; requereix un Vi. El vi que li passem, però, &lt;strong&gt;no
és&lt;/strong&gt; exactament un &lt;tt class="docutils literal"&gt;Vi&lt;/tt&gt;. Per exemple, no té nr. de referència, el
preu no és tampoc el preu real del vi sinó un màxim, i molt
probablement no li indicarem la localització bàsicament perquè és
probablement un dels objectius principals de la cerca
&lt;a class="footnote-reference" href="#finsaracercadaloc" id="id7"&gt;[7]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Quan dissenyem aplicacions orientades a objectes, hem de tenir clar
que aquests tipus d'incoherències tard o d'hora ens portaran
problemes.&lt;/p&gt;
&lt;p&gt;El cert és que, com ja ho diu bé el nom del seu paràmetre, el mètode
&lt;tt class="docutils literal"&gt;cerca()&lt;/tt&gt; espera una especificació de vi i &lt;strong&gt;no&lt;/strong&gt; un vi!.  Si el
concepte d'&lt;em&gt;especificació de vi&lt;/em&gt; sembla tenir tanta rellevància,
potser ja va sent hora que li reconeguem, no?&lt;/p&gt;
&lt;p&gt;Tenint en compte tot plegat, millorem el nostre disseny afegint la
classe &lt;tt class="docutils literal"&gt;ViEspec&lt;/tt&gt; segons el següent diagrama.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes amb l'especificació de Vins" src="http://apuntstecnics.herokuapp.com/images/poo022.img002.espec.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Ara que les especificacions de Vi no disposen de preu, el mètode
&lt;tt class="docutils literal"&gt;cerca()&lt;/tt&gt; ha d'oferir dues versions per mantenir la funcionalitat de
cercar fins a un màxim de preu. En concret, el substituirem pels
mètodes &lt;tt class="docutils literal"&gt;cerca(ViEspec)&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;cerca(ViEspec, preuMax)&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Crea una nova versió de l'aplicació de manera que inclogui aquests
canvis.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-la-botiga-de-vins-amplia-l-oferta"&gt;
&lt;h3&gt;Exercici 4. La botiga de vins amplia l'oferta&lt;/h3&gt;
&lt;p&gt;La Sra. Estrella està encantada amb l'aplicació que li
hem fet per a la seva botiga de vins. Li funciona tan bé que vol
ampliar la seva oferta al món del cava.&lt;/p&gt;
&lt;p&gt;El cava és força semblant al vi: té un nr. de referència i un preu. Es
col·loca en un lloc del magatzem, i té nom i celler. En quant a les
varietats de raïm amb les que es fan el cava, podem considerar un
subconjunt de les que s'utilitzen per l'elaboració del vi.&lt;/p&gt;
&lt;p&gt;El cava presenta, però, les següents diferències respecte el vi:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;al cava no se li indica la collita &lt;a class="footnote-reference" href="#collitacava" id="id8"&gt;[9]&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;hi ha algunes denominacions d'origen pròpies del cava que no
comparteix amb el vi. En concret, les denominacions típiques del
cava són: Alt Penedès i Tarragonès.&lt;/li&gt;
&lt;li&gt;Tampoc no coincideix amb la tipologia dels vins. Els tipus de cava
són: Brut Nature, Extra Brut, Brut, Extra Sec, Sec, Semisec, i Dolç.
Com sempre, afegirem l'opció &amp;quot;altre&amp;quot; per deixar la porta oberta a
altres possibilitats.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Com que són poques, afegirem les denominacions pròpies del cava a les
del vi, i deixarem a mans dels experts la correcta associació.&lt;/p&gt;
&lt;p&gt;En el cas de la tipologia no aplicarem la mateixa solució que amb les
denominacions perquè són força més. Així que ens tocarà crear la
classe &lt;tt class="docutils literal"&gt;TipusCava&lt;/tt&gt; i reanomenar l'antic &lt;tt class="docutils literal"&gt;Tipus&lt;/tt&gt; per &lt;tt class="docutils literal"&gt;TipusVi&lt;/tt&gt;
amb els mateixos valors que abans.&lt;/p&gt;
&lt;p&gt;El diagrama corresponent seria:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes amb Cava" src="http://apuntstecnics.herokuapp.com/images/poo022.img003.cava.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Amb aquest disseny ens trobem què &lt;a class="footnote-reference" href="#canvisdisseny" id="id9"&gt;[8]&lt;/a&gt;:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;s'ha evitat duplicar el mètode &lt;tt class="docutils literal"&gt;existeix()&lt;/tt&gt; amb un
&lt;tt class="docutils literal"&gt;existeixVi()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;existeixCava()&lt;/tt&gt; basant-se en que els nr. de
referència són identificatius entre tots dos tipus de productes de
la botiga.&lt;/li&gt;
&lt;li&gt;el mètode &lt;tt class="docutils literal"&gt;afegeix()&lt;/tt&gt; queda sobrecarregat ja que amb el tipus del
paràmetre podem decidir si hem d'afegir a una o altra llista.&lt;/li&gt;
&lt;li&gt;amb la resta de mètodes, però, no podem fer servir aquesta tècnica
perquè no podem decidir el tipus de sortida a partir del de
l'entrada. Això ens obliga a disposar de mètodes diferents amb codi
pràcticament idèntic.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En tot cas, ara ens toca realitzar els canvis que calguin a la nostra
aplicació de manera que integri el nou producte.&lt;/p&gt;
&lt;p&gt;Per la creació d'un cava, pots fer servir:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Cava&lt;/span&gt; &lt;span class="n"&gt;cava&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Cava&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2009100004&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
        &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;12.10&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
        &lt;span class="n"&gt;Localitzacio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PRESTATGE_VERMELL&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Marfil escumós blanc de negre brut&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Alella vinícola&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;Origen&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ALELLA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;Varietat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;GARNATXA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;TipusCava&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;BRUT&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-5-pero-no-teniem-herencia-a-la-poo"&gt;
&lt;h3&gt;Exercici 5. Però... no teníem herència a la POO?&lt;/h3&gt;
&lt;p&gt;Segur que ja te n'havies adonat. Aquest disseny no està fent us
d'un dels mecanismes més paradigmàtics de la programació orientada a
objectes: l'herència. Això fa que hi hagi un munt de informació
duplicada.&lt;/p&gt;
&lt;p&gt;Millora el disseny anterior fent servir les següents pistes:&lt;/p&gt;
&lt;p&gt;Pista 1. Fixa't què tenen en comú el vi i el cava. Sí, tots dos són
elements líquids produïts amb matèries primeres similars, amb una
certa quantitat d'alcohol que la Sra. Estrella ven embotellats.
Va, no ens emboliquem. Què tal simplement dir que són &lt;em&gt;begudes&lt;/em&gt;?.&lt;/p&gt;
&lt;p&gt;Pista 2. No tan ràpid! Moltes de les propietats de les classes Vi i
Cava, en realitat les contenen a partir d'altres classes (ex. ViEspec)
Per tant, potser no resulta tant adequat posar a Beguda atributs com
ara el nom de la beguda.&lt;/p&gt;
&lt;p&gt;Pista 3. Per cert, té sentit permetre instanciar una beguda en
general? No hauríem de permetre només instàncies de Vi i de Cava?&lt;/p&gt;
&lt;p&gt;Pista 4. Què tenen en comú les especificacions de Vi i de Cava? No
sembla que ja hem fet quelcom similar fa un moment?&lt;/p&gt;
&lt;p&gt;Pista 5. Malgrat la botiga podria funcionar amb una única llista de
begudes, potser resultarà convenient disposar d'una llista per cada
classe de begudes.&lt;/p&gt;
&lt;p&gt;Pista 6. Considera el següent diagrama UML com a referència dels
canvis que has d'implementar.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes amb herència" src="http://apuntstecnics.herokuapp.com/images/poo022.img004.basic.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="la-botiga-de-vi-es-redissenya"&gt;
&lt;h2&gt;La botiga de vi es redissenya&lt;/h2&gt;
&lt;p&gt;Tot i que aquest darrer disseny presenta clares millores respecte els
anteriors, encara hi trobem algunes pegues:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;la Sra. Estrella podria estar interessada en realitzar cerques amb
independència de si és vi o cava? Pensa que potser només li estan
demanant per un determinat celler i no importa si és vi o cava.  La
versió actual permetria fàcilment (i elegantment) afegir aquesta
funcionalitat?&lt;/li&gt;
&lt;li&gt;el nostre codi presenta força duplicació. Per exemple, les
classes Vi i Cava pràcticament són idèntiques excepte pel nom.
Aquest problema s'accentua més en el cas que afegim un nou producte
com ara el &lt;em&gt;vi d'agulla&lt;/em&gt; que té els mateixos atributs que el vi
estàndard (o de taula)&lt;/li&gt;
&lt;li&gt;el nostre codi presenta una certa resistència a canvis raonables.
Les classes són altament dependents entre si. Tant que pràcticament
qualsevol canvi afecta a la major part de les classes.&lt;ol class="arabic"&gt;
&lt;li&gt;Què costaria afegir un nou atribut a les begudes? Per exemple,
imagina que ens interessa afegir la &lt;em&gt;graduació&lt;/em&gt; a les diferents
begudes? Un detall com aquest ens obliga a canviar pràcticament
&lt;strong&gt;totes&lt;/strong&gt; les classes!&lt;/li&gt;
&lt;li&gt;Què costaria afegir noves begudes a la botiga?  Per exemple,
imagina que volem incorporar el &lt;em&gt;vi d'agulla&lt;/em&gt;. Quantes classes es
veuen afectades? És desitjable? Com afecta al problema de
duplicació de codi?&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Anem a veure com podem resoldre, o si més no alleugerir, aquests
problemes al nostre disseny.&lt;/p&gt;
&lt;div class="section" id="exercici-6-flexibilitzant-el-disseny-per-nous-atributs"&gt;
&lt;h3&gt;Exercici 6. Flexibilitzant el disseny per nous atributs&lt;/h3&gt;
&lt;p&gt;Sabem que el nostre disseny, tal i com està, ens obliga a realitzar
canvia a la majoria de les classes simplement per afegir un atribut
nou.&lt;/p&gt;
&lt;p&gt;Considera la nova propietat del vi &lt;tt class="docutils literal"&gt;graduacio&lt;/tt&gt; amb les possibilitats
&lt;em&gt;alta&lt;/em&gt;, &lt;em&gt;mitjana&lt;/em&gt;, &lt;em&gt;baixa&lt;/em&gt;, &lt;em&gt;sense alcohol&lt;/em&gt;, i &lt;em&gt;altre&lt;/em&gt;; i el mètode
get corresponent.&lt;/p&gt;
&lt;p&gt;Fes una revisió ràpida i apunta totes les classes que requereixen ser
modificades per a integrar aquest canvi.&lt;/p&gt;
&lt;p&gt;El problema està en que totes les classes són molt interdependents. I
l'objectiu seria trobar un disseny que ens permeti evitar modificar
tantes coses per cada canvi a les propietats.&lt;/p&gt;
&lt;p&gt;Segueix els següents passos:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Abans de començar a codificar, dibuixa un diagrama UML que faràs
servir com a guió per realitzar els canvis que se t'indiquen a
continuació.&lt;/li&gt;
&lt;li&gt;canvia el constructor de les diferents begudes de manera que rebin
directament una especificació en comptes de les seves propietats.
Aquest canvi permetrà independitzar les classes de begudes de les
propietats que les especifiquen.
Ofereix també un &lt;tt class="docutils literal"&gt;getEspec()&lt;/tt&gt; que permeti recuperar
l'especificació &lt;a class="footnote-reference" href="#especinmutable" id="id10"&gt;[10]&lt;/a&gt; . Ja no caldrà la resta de
mètodes com ara &lt;tt class="docutils literal"&gt;Vi.getNom()&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;canvia els mètodes &lt;tt class="docutils literal"&gt;Botiga.cerca()&lt;/tt&gt; de manera que aquest delegui
la comparació de especificacions a un nou mètode &lt;tt class="docutils literal"&gt;boolean
BegudaEspec.coincideix(BegudaEspec)&lt;/tt&gt; qui farà realment la
comparació de les propietats que formen part de l'especificació.&lt;/li&gt;
&lt;li&gt;modifica el codi de prova perquè sigui capaç de funcionar amb els
nous constructors.&lt;/li&gt;
&lt;li&gt;afegeix ara la nova propietat. Apuntat en quantes classes cal ara
fer canvis.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Fixa't que amb aquest nou disseny, afegir una nova propietat a
l'especificació d'un vi només obliga a canviar &lt;tt class="docutils literal"&gt;ViEspec&lt;/tt&gt; i, és clar,
allà on es construeixin les seves instàncies. Fixat que ara moltes
classes com ara &lt;tt class="docutils literal"&gt;Vi&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;Botiga&lt;/tt&gt; se n'han de preocupar!.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-el-celler-creix"&gt;
&lt;h3&gt;Exercici 7. El celler creix&lt;/h3&gt;
&lt;p&gt;Ja sabem que la Sra. Estrella no es quedarà pas amb només vi i cava. Ens
toca ampliar l'oferta a nous productes: el vi generós, el vi d'agulla
i el vi gasificat.&lt;/p&gt;
&lt;p&gt;El vi generós presenta una tipologia pròpia amb els valors: ranci,
fondellol, mistela, dolç, mut negre, mut blanc i vimblanc. A
banda, té una propietat nova per indicar el licor que el fa &amp;quot;generós&amp;quot;.
La propietat &lt;em&gt;licor&lt;/em&gt; pot tenir els valors: reforçat, generós, sec i
altre. Per la resta, coincideix amb el vi de taula (el que ja tractava
la nostra aplicació)&lt;/p&gt;
&lt;p&gt;El vi d'agulla és en tot, igual al vi de taula. El vi gasificat només
presenta les propietats genèriques de BegudaEspec.&lt;/p&gt;
&lt;p&gt;Ajudat d'un diagrama UML per descriure el que has d'implementar.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;hr class="docutils" /&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="refheadfirst" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;El cas que seguirem està inspirat en els exemples
trobats al llibre &lt;a class="reference external" href="http://www.headfirstlabs.com/books/hfooad/"&gt;Head First Object Oriented Analysis and Design&lt;/a&gt; de l'editorial
O'Reilly de novembre de 2006. Es tracta d'un llibre de seguiment
agradable que et recomano si vols aprofundir en aquest tema.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="consumresponsable" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;L'autor vol deixar clar des de bon començament
que, amb l'ús de begudes alcohòliques en els següents exercicis, de
cap manera pretén incitar al seu consum.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="simplificacions" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Donat que el vi disposa d'una varietat
impressionant de característiques i matisos, en aquest exercici ens
veiem forçats a fer importants simplificacions. Si entens molt de
vins, espero que sàpigues acceptar-les.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="varietatraim" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Suposarem que només hi ha una varietat de raïm
per vi. Si tens temptacions d'afegir una llista de varietats, et
proposo que ho deixis per la darrera versió.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="minimdo" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id6"&gt;[5]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Per simplicitat, s'ha eliminat accents i altres
caràcters especials. Si la denominació d'origen del teu vi favorit
no es troba aquí, estàs convidat a afegir-la. Aquesta possibilitat
d'ampliació és vàlida per a qualsevol altre llista de l'enunciat.
Intenta, però, no treure'n d'existents encara que no t'agradin.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="caractersespecials" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[6]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Potser voldràs posar-te a prova i fer que la
comparació ignori caràcters especials com ara accents.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="finsaracercadaloc" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id7"&gt;[7]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;És cert, fins ara havíem inclós la
localització a l'algorisme de cerca. No és l'error de disseny més
greu que hem comés aquí. En tot cas, algú podria argumentar que
potser pugui tenir sentit cercar per aquest paràmetre. Si
l'argument convenç l'Estrella, podrem recuperar aquesta
funcionalitat amb un mècanisme similar al que fem servir per
controlar el preu màxim.  Perquè no dins de &lt;tt class="docutils literal"&gt;ViEspec&lt;/tt&gt;? Segur que
quan acabis aquest exercici ja podràs trobar la resposta sense
ajut.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="canvisdisseny" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id9"&gt;[8]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;És molt probable que a aquestes alçades de curs ja
vegis molt clar com millorar aquest disseny. Amb tot, et proposo
que el segueixis tal i com es demana i tinguis una mica de
paciència.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="collitacava" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id8"&gt;[9]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;D'acord, segurament sí s'indica la collita pels més
entesos en cava. Per fer més ric l'exemple suposarem que la gent
sol mirar l'any pel vi i no pel cava.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="especinmutable" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id10"&gt;[10]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Donat que les especificacions són immutables, no
ens hem de preocupar de guardar i lliurar-ne còpies.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Mapes II</title><link href="http://apuntstecnics.herokuapp.com/mapes-ii.html" rel="alternate"></link><updated>2015-02-05T16:19:11+01:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2015-02-05:mapes-ii.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document correspon a la segona i darrera part de l'estudi del
concepte d'associació &lt;em&gt;clau-valor&lt;/em&gt; que aquí anomenem &lt;em&gt;mapes&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Pressuposa que s'ha seguit la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/mapes-i.html"&gt;primera part&lt;/a&gt;. De fet, la numeració dels
exercicis d'aquesta part és consecutiva respecte les anteriors.&lt;/p&gt;
&lt;p&gt;En aquesta segona part reprenem el desenvolupament de la botiga de
vins de la Sra. Estrella a partir del darrer exercici de la primera
part.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="un-disseny-discutible"&gt;
&lt;h2&gt;Un disseny discutible&lt;/h2&gt;
&lt;p&gt;Ens havíem quedat amb un disseny de la botiga de vins de la Sra.
Estrella similar al que descriu el següent diagrama.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes amb la botiga de Vins" src="http://apuntstecnics.herokuapp.com/images/poo023.img001.inicial.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Com podem veure, cada cop que hem d'afegir una nova beguda hem de
crear un mínim de dues classes: la de la beguda i la de la seva
especificació. Sovint el contingut d'aquestes classes és idèntic al
d'altres existents com per exemple les especificacions de Vi i
ViGasificat. De fet, el codi de Vi, Cava, etc. té poc més que un
constructor! És pitjor en el cas del vi gasificat, que no afegeix cap
atribut als genèrics de beguda. Amb tot hem de crear la classe buida
perquè funcioni tot plegat! A més a més, ens ha tocat modificar Botiga
per a afegir un mecanisme de cerca per cada beguda i el mètode per a
afegir una instància de beguda a l'inventari!&lt;/p&gt;
&lt;p&gt;És clar que tot plegat sembla un problema de tipus copy&amp;amp;paste que, amb
l'ajut d'un &amp;quot;mico picatecles&amp;quot; &lt;a class="footnote-reference" href="#picatecles" id="id1"&gt;[1]&lt;/a&gt; i una mica de paciència
corregint els petits errors que se li escapin al mico... Però, també
podem aspirar a un disseny millor, no?&lt;/p&gt;
&lt;p&gt;Convenim doncs que tot plegat és un disseny que, veient les ànsies
d'ampliació de la Sra. Estrella, convindrà revisar, oi?&lt;/p&gt;
&lt;p&gt;Per a adreçar una solució a aquests problemes de disseny,
(re)considerarem els següents elements: interfaces, encapsulació,
canvi i enumerats.&lt;/p&gt;
&lt;div class="section" id="interfaces"&gt;
&lt;h3&gt;1. interfaces.&lt;/h3&gt;
&lt;p&gt;Quan implementem el nostre codi contra una interface en comptes d'una
classe, el fem automàticament més flexible donat que podem fer servir
diferents classes que implementen la interface sense modificar-lo.
Fins i tot aquelles classes que encara no han estat programades!&lt;/p&gt;
&lt;p&gt;Per exemple, imagina que tens la següent jerarquia:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes pels jugadors" src="http://apuntstecnics.herokuapp.com/images/poo023.img002.jugadors.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Imagina que has d'implementar la classe Equip que té un mètode
anomenat &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;afegeixJugador(«?»)&lt;/span&gt;&lt;/tt&gt; que permet afegir un jugador a
l'equip.  Quin penses que serà el tipus més adequat per al paràmetre
d'aquest mètode? En fem un per cada tipus de jugador (ex.
&lt;tt class="docutils literal"&gt;JugadorFutbol&lt;/tt&gt;) o un de sol per Jugador?.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="encapsulacio"&gt;
&lt;h3&gt;2. encapsulació&lt;/h3&gt;
&lt;p&gt;Sí, ja n'hem parlat a fartar. L'encapsulació és aquell mecanisme que
amaga la implementació interna d'un element, a la que només es pot
accedir mitjançant un conjunt de mètodes/serveis. Aquest mecanisme ens
ofereix diferents avantatges ja coneguts com ara la facilitat de
reutilització de codi, la modificabilitat de la implementació interna
sense afectar al codi que la fa servir, i l'assegurament de la
integritat de les dades internes.&lt;/p&gt;
&lt;p&gt;Un altre avantatge, del que potser no hem fet tan d'èmfasi fins ara,
és que pot permetre protegir el nostre codi de canvis innecessaris. La
idea bàsica és que intentarem aïllar les parts del nostre codi que més
difícilment variaran d'aquelles que ho faran més probablement. És a
dir, &lt;strong&gt;encapsularem allò que varia&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, imaginem que tenim la classe Pintor amb la següent
descripció:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes dels pintors" src="http://apuntstecnics.herokuapp.com/images/poo023.img003.pintor.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Podem pensar que els diferents estils de pintors (impressionistes,
cubistes, surrealistes, etc.) prepararan els cavallets i netejaran els
pinzells de la mateixa manera &lt;a class="footnote-reference" href="#pintura" id="id2"&gt;[2]&lt;/a&gt;. En canvi, a l'hora de pintar, cadascú
farà servir una manera molt diferent depenent del seu estil.&lt;/p&gt;
&lt;p&gt;Haurem, per tant, de trobar un disseny que permeti mantenir fixa la
part que no varia, i que a l'hora faci molt fàcil ampliar/modificar la
part que sí varia.&lt;/p&gt;
&lt;p&gt;Podem implementar Pintor com una classe abstracta. On
&lt;tt class="docutils literal"&gt;preparaCavallet()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;netejaPinzells()&lt;/tt&gt; estiguin implementades i
&lt;tt class="docutils literal"&gt;pinta()&lt;/tt&gt; sigui abstracta. Així, cada estil de pintor pot estendre
aquesta classe i implementar el mètode &lt;tt class="docutils literal"&gt;pinta()&lt;/tt&gt; de la manera
corresponent al seu estil. Podria funcionar, tot i que això impediria
que alguns estils de pintor poguessin pertànyer a una altra jerarquia
si els calgués (herència simple)&lt;/p&gt;
&lt;p&gt;Fixa't, però, en aquesta altra proposta:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes amb proposta amb interface" src="http://apuntstecnics.herokuapp.com/images/poo023.img004.pintura.png" /&gt;
&lt;/div&gt;
&lt;p&gt;On &lt;tt class="docutils literal"&gt;Pintor.pinta()&lt;/tt&gt; podria ser quelcom similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;pinta&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;estil&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;estil&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pinta&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aquesta solució no &amp;quot;malgasta&amp;quot; herència. A més a més, podem instanciar
directament la classe Pintor en comptes d'estar forçat a fer servir
les seves subclasses. Fixa't que Pintor està implementat contra una
interface i no contra una classe concreta. Això li dóna una gran
flexibilitat ja que pot funcionar fins i tot amb estils que encara
estan per descobrir!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="canvi"&gt;
&lt;h3&gt;3. canvi&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;The only constant is change, continuing change, inevitable change,
that is the dominant factor in society today. No sensible decision
can be made any longer without taking into account not only the
world as it is, but the world as it will be.&lt;/p&gt;
&lt;p class="attribution"&gt;&amp;mdash;Isaac Asimov&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;La qüestió no és si el nostre disseny d'avui haurà de canviar o no,
sinó &lt;strong&gt;quan&lt;/strong&gt; ho haurà de fer. Per a fer el nostre codi més resistent
al canvi, un dels &amp;quot;trucs&amp;quot; ben coneguts és assegurar-nos que cada
classe tingui un &lt;em&gt;únic punt de canvi&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, considera la següent classe:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Cotxe&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;arrenca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;atura&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;  &lt;span class="o"&gt;{}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;canviaRodes&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Roda&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;rodesNoves&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;condueix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloc&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;neteja&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't en tot el que arriba a fer aquesta classe. A banda de saber com
arrencar i aturar el cotxe, també ha de conèixer com canviar les
rodes, sobre la neteja, i com ha de ser conduït. Tot plegat, un munt
de punts de possible canvi. L'haurem de modificar si varia el
sistema de collat de les rodes, o la manera de conduir del conductor o
de rentar la tapisseria.&lt;/p&gt;
&lt;p&gt;Si la teva classe té massa punts de canvi és que probablement està
fent massa coses. Solucionar-ho és tan simple com dividir les
funcionalitats en més classes. Per exemple, considera el disseny&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Cotxe&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;arrenca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;atura&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;  &lt;span class="o"&gt;{}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;NetejaCotxes&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;neteja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Cotxe&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Conductor&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;condueix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Cotxe&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Lloc&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Mecanic&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;canviaRodes&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Cotxe&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Roda&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;rodesNoves&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que el nou disseny fa que cada classe tingui un mínim de punts
de canvi.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="enum"&gt;
&lt;h3&gt;4. enum&lt;/h3&gt;
&lt;p&gt;Els enumerats en java són en realitat un tipus especial de classe que
indica les instàncies possibles.&lt;/p&gt;
&lt;p&gt;Com una classe qualsevol, té la possibilitat de definir els seus
propis atributs i mètodes i, també, implementar interfaces. De fet,
tot enum ve, de fàbrica, implementant dues interfaces
java.io.Serializable i java.lang.Comparable.&lt;/p&gt;
&lt;p&gt;Considera el següent codi d'exemple:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Codi d&amp;#39;exemple per mostrar el funcionament dels enums&lt;/span&gt;
&lt;span class="cm"&gt; * Es pot trobar informació detallada per exemple a:&lt;/span&gt;
&lt;span class="cm"&gt; *    http://download.oracle.com/javase/1.5.0/docs/guide/language/enums.html&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ExempleUsEnum&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// recorrem els valors de Intercanvi com si fossin Codificat&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Codificat&lt;/span&gt; &lt;span class="nl"&gt;teCodi:&lt;/span&gt; &lt;span class="n"&gt;Intercanvi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;values&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;teCodi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getCodi&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="cm"&gt;/* seria més eficient fer el següent codi recorrent els valors&lt;/span&gt;
&lt;span class="cm"&gt;             * de Intercanvi amb elements de tipus Intercanvi, però en aquest&lt;/span&gt;
&lt;span class="cm"&gt;             * cas no veuríem que podem tractar-los com a Codificat */&lt;/span&gt;
            &lt;span class="n"&gt;Intercanvi&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Intercanvi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fromCodi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El codi de &amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;#39; és &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* una interface senzilla per a tot allò que disposi d&amp;#39;un codi numèric */&lt;/span&gt;
&lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="nc"&gt;Codificat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getCodi&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Un enum és bàsicament una classe que indica les instàncies possibles,&lt;/span&gt;
&lt;span class="cm"&gt; * amb el seu constructor i els seus membres. */&lt;/span&gt;
&lt;span class="kd"&gt;enum&lt;/span&gt; &lt;span class="n"&gt;Intercanvi&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;Codificat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;ALTRES&lt;/span&gt;      &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;    &lt;span class="c1"&gt;// entre parèntesis els atributs del constructor&lt;/span&gt;
    &lt;span class="n"&gt;COMPRES&lt;/span&gt;     &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;VENDES&lt;/span&gt;      &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;INTERCANVIS&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;    &lt;span class="c1"&gt;// el &amp;#39;;&amp;#39; és requerit en aquest cas!&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// aquí va la declaració dels atributs del constructor&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="nf"&gt;Intercanvi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;codi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;  &lt;span class="c1"&gt;// el constructor&lt;/span&gt;

    &lt;span class="c1"&gt;// redefinim el toString()&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;toLowerCase&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// una manera d&amp;#39;obtenir el valor corresponent a un codi.&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Intercanvi&lt;/span&gt; &lt;span class="nf"&gt;fromCodi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Intercanvi&lt;/span&gt; &lt;span class="nl"&gt;e:&lt;/span&gt; &lt;span class="n"&gt;Intercanvi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;values&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getCodi&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// implementació del mètode definit a la interface&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getCodi&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Amb la seva sortida&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;El codi de &amp;#39;altres&amp;#39; és 0
El codi de &amp;#39;compres&amp;#39; és 1
El codi de &amp;#39;vendes&amp;#39; és 2
El codi de &amp;#39;intercanvis&amp;#39; és 4
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="redissenyant-la-botiga"&gt;
&lt;h2&gt;Redissenyant la botiga&lt;/h2&gt;
&lt;p&gt;De vegades passa que les decisions que prenem ens porten a camins
tortuosos. Hi ha una dita hindú que diu:&lt;/p&gt;
&lt;blockquote&gt;
No importa quan de temps portis caminant per un camí, si te
n'adones que no va allà on vols, fes mitja volta!&lt;/blockquote&gt;
&lt;p&gt;Doncs bé, amb els quatre punts vists anteriorment ens toca analitzar
com podríem aplicar-los al redisseny de la botiga de begudes de la
Sra. Estrella.&lt;/p&gt;
&lt;div class="section" id="exercici-8-els-tipus-de-beguda"&gt;
&lt;h3&gt;Exercici 8. Els tipus de beguda&lt;/h3&gt;
&lt;p&gt;Un dels problemes que té el nostre disseny és que les classes de les
diferents begudes no fan pràcticament res diferent entre si. En
realitat, només les posem per indicar distingir cada tipus de beguda.&lt;/p&gt;
&lt;p&gt;Normalment creem noves classes per implementar comportaments que no
tenen les existents, però en aquest cas, la classe Vi fa el mateix que
Cava, és a dir, únicament contenir una especificació de beguda.&lt;/p&gt;
&lt;p&gt;Perquè no afegir una nova propietat a Beguda que sigui TipusBeguda (un
enum amb VI, CAVA...  podria fer un bon paper) Com que totes les
classes &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;«...»Espec&lt;/span&gt;&lt;/tt&gt; són descendents de &lt;tt class="docutils literal"&gt;BegudaEspec&lt;/tt&gt;, podem tenir
accés a les diferents especificacions sense gaires problemes, oi?&lt;/p&gt;
&lt;p&gt;Això sí, ara Beguda s'ha de poder instanciar, és clar!&lt;/p&gt;
&lt;p&gt;On posarem el tipus de beguda, a Beguda o a BegudaEspec?
&lt;a class="footnote-reference" href="#redundanttipus" id="id3"&gt;[3]&lt;/a&gt; Una posiblitat seria:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;afegeix una propietat a cada especificació concreta que
guardi el tipus de beguda a la que correspon l'especificació. Pensa
si cal que cada instància tingui el seu propi tipus i si aquest pot
variar.&lt;/li&gt;
&lt;li&gt;afegeix un mètode a BegudaEspec que retorni el tipus de beguda.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Fixa't també que ara que ja no distingim com a classes els diferents
tipus de begudes, hi ha un munt de mètodes de la classe Botiga que es
simplifiquen.&lt;/p&gt;
&lt;p&gt;Defineix el UML amb aquests canvis i implementa'ls.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-9-tantes-especificacions-fan-nosa"&gt;
&lt;h3&gt;Exercici 9. Tantes especificacions fan nosa!&lt;/h3&gt;
&lt;p&gt;D'acord, ens hem carregat les subclasses de beguda i, amb elles,
una bona part de la complexitat del nostre disseny.&lt;/p&gt;
&lt;p&gt;Encara, però, no hem resolt el tema de les especificacions. Cada cop
que volem afegir una nova beguda ens cal tenir en compte la seva
especificació.&lt;/p&gt;
&lt;p&gt;Pensa: l'especificació d'una beguda no deixa de ser un conjunt més o
menys variable de propietats de beguda com ara el nom, l'origen,
etc.  I una propietat no deixa de ser un nom i un valor. El nom
identifica la propietat i és únic respecte a la resta de propietats.
Per exemple la propietat origen pot tenir el valor Origen.PENEDES.&lt;/p&gt;
&lt;p&gt;Seria possible guardar aquest conjunt de propietats en algun
contenidor? Hi ha alguna classe que ens ofereixi la possibilitat
d'afegir parells (clau, valor)? La resposta és SÍ! En un &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html"&gt;Map&lt;/a&gt;.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Jerarquia de classes de HashMap" src="http://apuntstecnics.herokuapp.com/images/poo023.img005.hashmap.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Alguns dels mètodes que ens caldran:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;boolean containsKey(Object)&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Retorna cert si el mapa conté la clau especificada.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;V get(Object)&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Retorna el valor associat a la clau especificada al paràmetre o
null si no conté cap valor associat a la clau.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;V put(K, V)&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Associa la clau al valor i retorna l'antic valor associat a
aquesta clau (null si no n'hi havia)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;De moment, escollirem la classe &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html"&gt;HashMap&lt;/a&gt;.
Un tipus de Map amb un accés als elements força eficient.&lt;/p&gt;
&lt;p&gt;Abans de començar a codificar, com sempre, dibuixa el diagrama UML amb
els nous canvis. Et servirà de guia per no perdre't.&lt;/p&gt;
&lt;p&gt;Alguns dels canvis que haurem de fer:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;crear un nou enumerat anomenat TipusPropietat amb valors com ara
NOM, ORIGEN, etc.&lt;/li&gt;
&lt;li&gt;crear una interface anomenada PropietatBeguda. Planteja't si cal
que especifiqui algun mètode.&lt;/li&gt;
&lt;li&gt;fer que els diferents enums (compte amb propietats com ara el nom
o la collita) de les propietats implementin la interface
PropietatBeguda.&lt;/li&gt;
&lt;li&gt;substituir les propietats de BegudaEspec per un nou membre
HashMap&amp;lt;TipusPropietat, PropietatBeguda&amp;gt; amb les propietats de la
classe... bé, decideix si el posem a Beguda o a BegudaEspec. Pista:
pensa què afegeix ara la classe BegudaEspec.&lt;/li&gt;
&lt;li&gt;afegir a Beguda (o a BegudaEspec si encara la mantens) la
possibilitat d'accedir als valors de les diferents propietats que
l'especifiquen. És a dir, ens cal algun mètode que ens permeti
substituir l'antic &lt;tt class="docutils literal"&gt;getNom()&lt;/tt&gt;. La proposta és implementar un
&lt;tt class="docutils literal"&gt;PropietatBeguda getPropietat(TipusPropietat)&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;modificar la resta d'elements perquè funcionin amb aquests canvis.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;Nota&lt;/em&gt;: Potser t'hauràs adonat que ara no tenim un mecanisme fiable
per a assegurar-nos de que cada tipus de beguda presenti totes les
propietats que li correspon i només aquestes. Et proposo que de moment
acceptis aquesta feblesa del sistema i, si tens interès, miris de
solucionar-lo com una de les millores addicionals que et proposa el
següent exercici.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-opcional-millores-addicionals"&gt;
&lt;h3&gt;Exercici 10. (opcional) Millores addicionals&lt;/h3&gt;
&lt;p&gt;En cas que t'hagis quedat amb les ganes, aquest exercici et permet
tancar alguns punts que han quedat oberts amb el disseny final de
l'exercici anterior.&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Fer que la comprovació de coincidència permeti ignorar també els
caràcters especials com ara accents i els espais de més. A més, que
permeti acceptar aquelles entrades que continguin alguna de les
paraules que s'introdueixin. Ex. si l'especificació cercada del
celler indica &amp;quot;Joan Juán&amp;quot;, aquesta nova versió acceptarà &amp;quot;Juan
Antonio Pérez Roura&amp;quot;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Afegir un nou mètode de cerca que permeti l'ús d'expressions
regulars per a aquells atributs textuals (com ara nom i celler).
Aquesta és una ampliació molt fàcil, tenint en comptes que disposem
de &lt;tt class="docutils literal"&gt;String.matches(regex)&lt;/tt&gt;, però potser et servirà com a
introducció a aquesta potent tècnica de manipulació de strings.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El disseny de l'exercici anterior, deixa sense comprovar que les
especificacions que s'afegeixen a una beguda realment corresponguin
al tipus de beguda que estan especificant. Per exemple, a un Cava
se li podria passar perfectament una especificació sense nom o bé
amb graduació.&lt;/p&gt;
&lt;p&gt;Aquesta proposta d'ampliació, hauria de generar una excepció en cas
que l'especificació no contingui tots i només aquells atributs que
corresponen a una beguda del tipus que estan especificant. Pista:
TipusBeguda podria disposar d'una llista d'atributs requerits per
cada tipus, o fins i tot disposar d'un mètode que accepti una
especificació i comprovi si conté els elements que toquen.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Se t'acut alguna altra millora?&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;hr class="docutils" /&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="picatecles" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si aquesta expressió de &amp;quot;mico picatecles&amp;quot; t'ha
semblat despectiva contra la noble professió d'aquells que
programen sense utilitzar el cervell... tens tota la raó, és
despectiva. Si el cim al que aspires professionalment és aquest,
estàs perdent el temps amb aquests exercicis i, probablement, amb
aquest cicle.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="pintura" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si en saps molt de pintura, per favor accepta-ho com a
simplificació per a entendre el concepte.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="redundanttipus" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Tenint en comptes que Beguda disposa de
l'especificació i que aquesta hauria de ser del tipus que correspon
a la beguda, probablement incloure aquesta propietat a Beguda
resultaria redundant o, com a molt, tindria una funció merament de
comprovació d'errors, especialment durant la creació de la beguda.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Tutorial d'instal·lació del JDK</title><link href="http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-del-jdk.html" rel="alternate"></link><updated>2014-09-09T23:57:30+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2014-09-09:tutorial-dinstallacio-del-jdk.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document descriu la instal·lació del JDK (Java Development Kit)
de Oracle a un sistema Ubuntu.&lt;/p&gt;
&lt;p&gt;Tot i que probablement altres implementacions (com ara OpenJDK) i
altres versions anteriors (ex. la 6) podrien servir perfectament pels
requeriments del curs, farem servir la versió 7 del JDK d'Oracle.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="installacio"&gt;
&lt;h2&gt;Instal·lació&lt;/h2&gt;
&lt;p&gt;Les següents instruccions permeten la instal·lació del JDK d'Oracle a
un Ubuntu 12.04.&lt;/p&gt;
&lt;p&gt;Si penses instal·lar-ho a un sistema diferent, considera seguir les
instruccions de la &lt;a class="reference external" href="http://www.oracle.com/technetwork/java/javase/downloads"&gt;pàgina oficial&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Els usuaris d'Ubuntu, disposem d'un repositori on trobem un paquet que
ens automatitza la instal·lació.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;sudo add-apt-repository ppa:webupd8team/java
You are about to add the following PPA to your system:
 Oracle Java &lt;span class="o"&gt;(&lt;/span&gt;JDK&lt;span class="o"&gt;)&lt;/span&gt; Installer &lt;span class="o"&gt;(&lt;/span&gt;automatically downloads and installs Oracle JDK7&lt;span class="o"&gt;)&lt;/span&gt;. There are no actual Java files in this PPA. More info: http://www.webupd8.org/2012/01/install-oracle-java-jdk-7-in-ubuntu-via.html
 More info: https://launchpad.net/~webupd8team/+archive/java
Press &lt;span class="o"&gt;[&lt;/span&gt;ENTER&lt;span class="o"&gt;]&lt;/span&gt; to &lt;span class="k"&gt;continue &lt;/span&gt;or ctrl-c to cancel adding it
«...»
&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get update
&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get install oracle-java7-installer
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest moment ja hauríem de tenir instal·lat el jdk 7 a la nostra
màquina. Pot passar, però, que encara no estigui enllaçada la nova
versió. Ho comprovarem fent&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java -version
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si ens surt quelcom similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;java version &amp;quot;1.7.0_05&amp;quot;
Java(TM) SE Runtime Environment (build 1.7.0_05-b05)
Java HotSpot(TM) Server VM (build 23.1-b03, mixed mode)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ja estem. Altrament caldrà seleccionar aquesta versió. És fàcil:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;sudo update-alternatives --config java
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Que ens generarà quelcom similar a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Hi ha 3 possibilitats per a l&amp;#39;alternativa java (que proveeix /usr/bin/java).

  Selecció    Camí                                          Prioritat  Estat
------------------------------------------------------------
  0            /usr/lib/jvm/java-7-oracle/jre/bin/java         1062      mode automàtic
  1            /usr/lib/jvm/java-6-openjdk-i386/jre/bin/java   1061      mode manual
* 2            /usr/lib/jvm/java-6-sun/jre/bin/java            63        mode manual
  3            /usr/lib/jvm/java-7-oracle/jre/bin/java         1062      mode manual

Premeu retorn per a mantenir l&amp;#39;opció per defecte[*], o introduïu un número de selecció: 3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En el cas de l'exemple, cal escollir &lt;tt class="docutils literal"&gt;0&lt;/tt&gt; o &lt;tt class="docutils literal"&gt;3&lt;/tt&gt; doncs són les
opcions que apunten a la versió 7 acabada d'instal·lar. Escollirem
&lt;tt class="docutils literal"&gt;0&lt;/tt&gt; per deixar al sistema d'alternatives que decideixi l'opció en
cas que tornem a instal·lar o eliminem algun paquet.&lt;/p&gt;
&lt;p&gt;Ara, hauríem de disposar dels programes &lt;tt class="docutils literal"&gt;javac&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;java&lt;/tt&gt; en la
darrera versió. Podem fer una darrera comprovació amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;javac -version
javac 1.7.0_45
&lt;span class="nv"&gt;$ &lt;/span&gt;java -version
java version &lt;span class="s2"&gt;&amp;quot;1.7.0_45&amp;quot;&lt;/span&gt;
Java&lt;span class="o"&gt;(&lt;/span&gt;TM&lt;span class="o"&gt;)&lt;/span&gt; SE Runtime Environment &lt;span class="o"&gt;(&lt;/span&gt;build 1.7.0_45-b18&lt;span class="o"&gt;)&lt;/span&gt;
Java HotSpot&lt;span class="o"&gt;(&lt;/span&gt;TM&lt;span class="o"&gt;)&lt;/span&gt; 64-Bit Server VM &lt;span class="o"&gt;(&lt;/span&gt;build 24.45-b08, mixed mode&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
</summary><category term="java"></category></entry><entry><title>Tutorial d'instal·lació de Eclipse</title><link href="http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-de-eclipse.html" rel="alternate"></link><updated>2014-09-09T22:59:30+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2014-09-09:tutorial-dinstallacio-de-eclipse.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document descriu una manera d'instal·lar l'IDE Eclipse a un
sistema Ubuntu. Per les característiques particulars de l'aplicació
Eclipse, aquestes instruccions haurien de funcionar sense gaires
canvis a altres sistemes operatius.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="installacio"&gt;
&lt;h2&gt;Instal·lació&lt;/h2&gt;
&lt;p&gt;Per la realització d'una instal·lació de Eclipse seguirem les següents
passes des d'una consola:&lt;/p&gt;
&lt;ol class="arabic" start="0"&gt;
&lt;li&gt;&lt;p class="first"&gt;Abans d'instal·lar Eclipse&lt;/p&gt;
&lt;p&gt;Donat que Eclipse és una aplicació java, caldrà disposar d'una
màquina virtual (JVM) al nostre sistema per a poder-la executar.&lt;/p&gt;
&lt;p&gt;Tot i que virtualment podríem fer servir altres implementacions
(ex. OpenJDK o gcj), seguirem el &lt;a class="reference external" href="http://www.eclipse.org/forums/index.php/t/161212/"&gt;consell&lt;/a&gt; del
fòrum d'Eclipse i farem servir el JDK d'Oracle.&lt;/p&gt;
&lt;p&gt;Per altra banda, instal·larem la versió 7 de Java, la darrera
disponible en el moment en que es va elaborar aquesta guia (juliol
2012)&lt;/p&gt;
&lt;p&gt;Com que la llicència del jdk d'Oracle (abans Sun) va canviant el
grau d'&lt;em&gt;obertura&lt;/em&gt; des de la perspectiva d'algunes distribucions
(com ara Ubuntu), és possible (de fet probable) que no disposem de
cap versió instal·lada o que aquesta no sigui la desitjada.&lt;/p&gt;
&lt;p&gt;Per a assegurar-nos que el nostre sistema disposa de la versió del
JDK que volem, podem fer quelcom similar a:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ sudo update-alternatives --config java
&lt;/pre&gt;
&lt;p&gt;Si ens respon quelcom similar a:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
update-alternatives: error: no alternatives for java.
&lt;/pre&gt;
&lt;p&gt;o bé quelcom que no inclou la versió desitjada com ara:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Hi ha 2 possibilitats per a l'alternativa java (que proveeix /usr/bin/java).

  Selecció    Camí                                          Prioritat  Estat
------------------------------------------------------------
* 0            /usr/lib/jvm/java-6-openjdk-i386/jre/bin/java   1061      mode automàtic
  1            /usr/lib/jvm/java-6-sun/jre/bin/java            63        mode manual
&lt;/pre&gt;
&lt;p&gt;caldrà instal·lar java. Trobareu una guia breu per Ubuntu &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-del-jdk.html"&gt;aquí&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Obtenció de l'Eclipse&lt;/p&gt;
&lt;p&gt;Si l'ús que hem de fer d'aquest IDE és molt introductori, podríem
fer servir la versió d'Eclipse que es troba als repositoris
d'Ubuntu, malgrat queda molt endarrerida respecte la darrera versió
que es troba al lloc oficial del IDE:
&lt;a class="reference external" href="http://www.eclipse.org/downloads/"&gt;http://www.eclipse.org/downloads/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;En el moment en que es va escriure aquesta guia, la
darrera versió disponible era la 4.2, mentre que la dels
repositoris anaven encara per la 3.7.&lt;/p&gt;
&lt;p&gt;Aquesta guia proposa la instal·lació de la darrera versió
disponible per desenvolupadors de java &amp;quot;Eclipse IDE for Java
Developers&amp;quot;.&lt;/p&gt;
&lt;p&gt;D'aquesta manera ens trobarem un fitxer anomenat quelcom similar a:
./eclipse-java-juno-linux-gtk.tar.gz&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Instal·lació de l'IDE&lt;/p&gt;
&lt;p&gt;L'aplicació Eclipse és una mica particular en relació a d'altres,
en el sentit que la seva instal·lació consisteix en simplement
descomprimir el paquet i executar l'IDE.&lt;/p&gt;
&lt;p&gt;Així, escollirem el directori on volem que quedi instal·lada
l'aplicació. Per exemple, &lt;tt class="docutils literal"&gt;~/soft&lt;/tt&gt;. Així, podem fer servir
quelcom similar a:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ mkdir -p ~/soft
$ mv eclipse-java-juno-linux-gtk.tar.gz ~/soft
$ cd ~/soft
$ tar xzvf eclipse-java-juno-linux-gtk.tar.gz
&lt;/pre&gt;
&lt;p&gt;Amb això, ja podem executar eclipse&lt;/p&gt;
&lt;pre class="literal-block"&gt;
~/soft/ $ eclipse/eclipse
&lt;/pre&gt;
&lt;p&gt;En cas que aparegui un missatge d'error com ara:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Missatge d'error amb la màquina virtual de Java" src="http://apuntstecnics.herokuapp.com/images/eclipse001.error_jdk.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Vol dir que hi ha algun problema amb la màquina virtual de Java.
En aquest cas, intentem, si més no, reinstal·lar-la.&lt;/p&gt;
&lt;p&gt;Per comoditat, es pot crear algun llançador. Per exemple, per poder
executar-ho des de línia de comandes, pot ser còmode:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
    $ cd ~
    $ mkdir -p bin
    $ cd bin
    $ cat &amp;gt; eclipse.sh &amp;lt;&amp;lt; EOF
    &amp;gt; #! /bin/sh
    &amp;gt; ~/soft/eclipse/eclipse &amp;amp;
    &amp;gt; EOF
    $ chmod u+x eclipse.sh

i, des de qualsevol lloc ::

    $ eclipse.sh
&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Configuració del directori de treball&lt;/p&gt;
&lt;p&gt;En arrancar, Eclipse ens demanarà un lloc on deixar els projectes
Eclipse amb que treballem (&lt;em&gt;workspace&lt;/em&gt;). Escollirem un directori
que ens sigui còmode.&lt;/p&gt;
&lt;p&gt;Serà aquí on podrem trobar els fitxers que es generin amb els
nostres projectes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Una prova ràpida&lt;/p&gt;
&lt;p&gt;Per defecte, Eclipse s'instal·la per construir aplicacions en
java.&lt;/p&gt;
&lt;p&gt;Aprofitant que no hem de fer res especial, farem una primera prova
de l'entorn creant un &amp;quot;original&amp;quot; programa de salutació al món.&lt;/p&gt;
&lt;p&gt;Anirem a File -&amp;gt; New -&amp;gt; Java Project, definirem el nom del projecte
(ex. HolaMon) i deixarem la resta d'opcions per defecte. Quan ja ho
tenim tot, premem &lt;em&gt;Finish&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Amb això, Eclipse ens ha creat el projecte HolaMon amb diferents
carpetes i recursos.&lt;/p&gt;
&lt;p&gt;Anem ara a File -&amp;gt; New -&amp;gt; Class, i al quadre de text &lt;tt class="docutils literal"&gt;Name:&lt;/tt&gt; hi
introduïm &amp;quot;HolaMon&amp;quot;. Marquem el quadre de selecció &lt;tt class="docutils literal"&gt;public static
void main(String[] args)&lt;/tt&gt; de la secció &lt;tt class="docutils literal"&gt;Which method stubs would
you like to create?&lt;/tt&gt; i, deixant la resta d'opcions amb els valors
per defecte premem &lt;em&gt;Finish&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;En aquest moment ens apareixerà una finestra amb un aspecte similar
al següent:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Aspecte de l'entorn gràfic d'Eclipse" src="http://apuntstecnics.herokuapp.com/images/eclipse001.img001.holamon.png" /&gt;
&lt;/div&gt;
&lt;p&gt;A la subfinestra més ampla (a la dreta), hi trobem un editor amb el
codi del nostre projecte. Eclipse ens ha creat un primer esquema de
la classe HolaMon que hem demanat crear.&lt;/p&gt;
&lt;p&gt;Ara, allà on posa &lt;tt class="docutils literal"&gt;// TODO &lt;span class="pre"&gt;Auto-generated&lt;/span&gt; method stub&lt;/tt&gt; escriurem
&lt;tt class="docutils literal"&gt;Sys&lt;/tt&gt;. A continuació, farem &amp;lt;ctrl&amp;gt;-&amp;lt;espai&amp;gt; i podrem veure que
Eclipse ens ofereix una llista de suggeriments per completar la
paraula que estem escrivint (navegable amb el cursor) juntament amb
documentació corresponent a la proposta de compleció
sel·leccionada. Farem &amp;lt;enter&amp;gt; per completar.&lt;/p&gt;
&lt;p&gt;Continuem escrivint un punt &lt;tt class="docutils literal"&gt;.&lt;/tt&gt; i observem que ens apareix una
llista de possibilitats per a continuar que podem navegar amb el
cursor. Si escrivim ara una lletra (ex. &lt;tt class="docutils literal"&gt;o&lt;/tt&gt;) reduirà les
propostes a aquelles que comencen amb &amp;quot;o&amp;quot;. Escollirem l'única opció
disponible (&lt;tt class="docutils literal"&gt;out&lt;/tt&gt;) i tornarem a escriure un punt. Ens apareix una
nova llista amb la primera opció &lt;tt class="docutils literal"&gt;println(String x)&lt;/tt&gt;. Justament
la funció que ens interessa. L'escollim amb &amp;lt;enter&amp;gt; i ens
autocompleta a la funció &lt;tt class="docutils literal"&gt;System.out.println()&lt;/tt&gt; deixant-nos el
cursor dins dels parèntesis amb el nom d'una variable &lt;tt class="docutils literal"&gt;x&lt;/tt&gt; i
informant-nos del possible tipus de dades que hi podem ficar dins.
Substituirem la &lt;tt class="docutils literal"&gt;x&lt;/tt&gt; per la cadena &lt;tt class="docutils literal"&gt;&amp;quot;Hola &lt;span class="pre"&gt;Món!\n&amp;quot;&lt;/span&gt;&lt;/tt&gt; i farem
&amp;lt;enter&amp;gt;. Eclipse col·loca el cursor al final de la sentència.
Acabem amb un punt i coma la línia.&lt;/p&gt;
&lt;p&gt;Si tot està correcte (Eclipse ens avisaria en cas contrari) podem
ja executar el nostre programa. Run -&amp;gt; Run. Eclipse ens demana si
volem guardar els canvis (ens permet marcar autoguardar si volem).
En fer &lt;em&gt;OK&lt;/em&gt;  ens apareix una nova subfinestra a la part inferior on
es veu el resultat de l'execució del programa. Eclipse s'ha fet
càrrec de compilar i executar el nostre codi.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Ja tenim disponible l'Eclipse.&lt;/p&gt;
&lt;/div&gt;
</summary></entry><entry><title>Configuració d'Eclipse per C/C++</title><link href="http://apuntstecnics.herokuapp.com/configuracio-declipse-per-cc.html" rel="alternate"></link><updated>2014-09-09T22:58:30+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2014-09-09:configuracio-declipse-per-cc.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document descriu la preparació de Eclipse com a IDE de
desenvolupament en C/C++ al sistema operatiu Ubuntu 12.04.
Probablement les passes seran similars a altres sistemes operatius,
distribucions i versions. En tot cas, pots fer una ullada a la
&lt;a class="reference external" href="href=&amp;quot;http://wiki.eclipse.org/CDT/User/FAQ&amp;quot;"&gt;documentació oficial del projecte&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Abans de començar, comprova que no disposes ja de la instal·lació del
plugin CDT. Ho pots fer, per exemple, intentant crear un nou projecte
C++ a partir de &lt;tt class="docutils literal"&gt;File &lt;span class="pre"&gt;-&amp;gt;&lt;/span&gt; New &lt;span class="pre"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="pre"&gt;Project...&lt;/span&gt;&lt;/tt&gt;. Si al quadre que
apareix hi trobem una secció anomenada &lt;tt class="docutils literal"&gt;C/C++&lt;/tt&gt; i hi podem crear un
projecte C, podem ignorar la resta d'aquesta guia perquè ja el tenim
instal·lat!&lt;/p&gt;
&lt;p&gt;Instal·larem el plug-in &lt;a class="reference external" href="href=&amp;quot;http://www.eclipse.org/cdt/&amp;quot;"&gt;CDT&lt;/a&gt;
(C/C++ Development Tooling)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="installacio"&gt;
&lt;h2&gt;Instal·lació&lt;/h2&gt;
&lt;p&gt;Realitzarem la instal·lació tot seguint les següents passes.&lt;/p&gt;
&lt;div class="section" id="el-compilador"&gt;
&lt;h3&gt;1. El compilador&lt;/h3&gt;
&lt;p&gt;Donat que el projecte CDT no ofereix el compilador de C/C++,
haurem d'instal·lar un nosaltres. A l'Ubuntu el més probable és que
el tinguem ja. Ho podem comprovar amb:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ g++ --version
g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
$ make --version
GNU Make 3.81
Copyright (C) 2006  Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.

This program built for i686-pc-linux-gnu
&lt;/pre&gt;
&lt;p&gt;En cas d'error amb la primera comanda, caldrà instal·lar el
compilador. En cas d'error amb &lt;tt class="docutils literal"&gt;make&lt;/tt&gt;, comprovarem si &lt;tt class="docutils literal"&gt;gmake&lt;/tt&gt;
sí està disponible. Altrament, haurem d'instal·lar-ho.  Donat que
aquestes instruccions van més enllà dels objectius d'aquesta petita
guia, caldrà cercar les instruccions corresponents pel sistema
operatiu objectiu.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="installem-el-plug-in"&gt;
&lt;h3&gt;2. Instal·lem el plug-in&lt;/h3&gt;
&lt;p&gt;Naveguem pels menus &lt;tt class="docutils literal"&gt;Help &lt;span class="pre"&gt;-&amp;gt;&lt;/span&gt; Install New &lt;span class="pre"&gt;Software...&lt;/span&gt;&lt;/tt&gt; i al quadre de
diàleg que emergeix premem el botó &lt;tt class="docutils literal"&gt;add&lt;/tt&gt;. Ens apareix un nou quadre
de diàleg amb els camps de text &lt;tt class="docutils literal"&gt;Name&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;Location&lt;/tt&gt;. Al primer li
posarem &lt;strong&gt;CDT&lt;/strong&gt; i al segon
&lt;strong&gt;http://download.eclipse.org/tools/cdt/releases/juno&lt;/strong&gt;&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Instal·lació del pluguin CDT" src="http://apuntstecnics.herokuapp.com/images/eclipse002.add_CDT.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Potser li costarà una estona, però si tot va bé acabarà mostrant
dues entrades anomenades &lt;tt class="docutils literal"&gt;CDT Main Features&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;CDT Optional
Features&lt;/tt&gt;. Desplegarem la primera (fent clic sobre el triangle que
apareix abans de cada entrada) i escollirem la primera de les
subentrades que hi apareixen: &lt;strong&gt;C/C++ Development Tools&lt;/strong&gt;.
&lt;strong&gt;Important&lt;/strong&gt;: no és adequat seleccionar-ho tot! Hi ha dependències
que potser faran que no ens funcioni l'aplicació.&lt;/p&gt;
&lt;p&gt;Farem &lt;tt class="docutils literal"&gt;Next&lt;/tt&gt; dos cops i, si estem d'acord amb els termes de la
llicència d'ús &lt;a class="footnote-reference" href="#noaggree" id="id1"&gt;[1]&lt;/a&gt; , sel·leccionem l'opció &lt;strong&gt;I accept the
terms of license aggreement&lt;/strong&gt;, premem &lt;tt class="docutils literal"&gt;Finish&lt;/tt&gt; i esperem una
estoneta.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Acceptació dels terminis i llicència d'Eclipse" src="http://apuntstecnics.herokuapp.com/images/eclipse002.aggreement_CDT.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Finalment haurem de reiniciar Eclipse i, en rearrancar, ja tindrem
el plug-in disponible.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="provem-la-installacio"&gt;
&lt;h3&gt;3. Provem la instal·lació&lt;/h3&gt;
&lt;p&gt;Naveguem &lt;tt class="docutils literal"&gt;File &lt;span class="pre"&gt;-&amp;gt;&lt;/span&gt; New &lt;span class="pre"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="pre"&gt;Project...&lt;/span&gt;&lt;/tt&gt; i hi escollim &lt;cite&gt;C Project`&lt;/cite&gt;.&lt;/p&gt;
&lt;p&gt;Anomenem el projecte quelcom similar a &amp;quot;HolaCDT&amp;quot; a la localització per
defecte i de tipus &lt;strong&gt;Empty Project&lt;/strong&gt; i fem &lt;tt class="docutils literal"&gt;següent&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Al quadre de diàleg &lt;tt class="docutils literal"&gt;Select Configurations&lt;/tt&gt; premem el botó
&lt;tt class="docutils literal"&gt;Advanced &lt;span class="pre"&gt;settings...&lt;/span&gt;&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Al quadre de diàleg &lt;tt class="docutils literal"&gt;Properties for HolaCDT&lt;/tt&gt; naveguem per l'arbre
d'opcions &lt;tt class="docutils literal"&gt;C/C++ General&lt;/tt&gt;-&amp;gt; &lt;tt class="docutils literal"&gt;Code Analysis&lt;/tt&gt; -&amp;gt; &lt;tt class="docutils literal"&gt;Launching&lt;/tt&gt; i
marquem l'opció &lt;tt class="docutils literal"&gt;Run with build&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Si ens demana que si volem obrir la perspectiva associada a CDT,
direm que Sí.&lt;/p&gt;
&lt;p&gt;Seleccionem ara crear un nou fitxer font (&lt;tt class="docutils literal"&gt;File&lt;/tt&gt; -&amp;gt; &lt;tt class="docutils literal"&gt;New&lt;/tt&gt; -&amp;gt; &lt;tt class="docutils literal"&gt;Source
File&lt;/tt&gt;), li posem com a nom holacdt.c i finalitzem l'ajudant amb el
botó &lt;tt class="docutils literal"&gt;Finish&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Escrivim ara el codi del nostre programa després de la capçalera
que ens han generat automàticament.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include&amp;lt;stdio.h&amp;gt;&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hola CDT!&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finalment executem el programa amb &lt;tt class="docutils literal"&gt;Run &lt;span class="pre"&gt;-&amp;gt;&lt;/span&gt; Run&lt;/tt&gt;. Ens demanarà si
volem guardar els canvis. Un cop guardats, compilarà i enllaçarà el
codi per nosaltres, i finalment ens mostrarà el resultat a la vista
anomenada &lt;tt class="docutils literal"&gt;Console&lt;/tt&gt; que probablement apareixerà sota l'àrea de
l'editor. &lt;a class="footnote-reference" href="#launchfailed" id="id2"&gt;[2]&lt;/a&gt;&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Resultat d'execució de *holacdt.c*" src="http://apuntstecnics.herokuapp.com/images/eclipse002.img003.holacdt_final.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="anotacions"&gt;
&lt;h2&gt;Anotacions&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="noaggree" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si no estem d'acord amb els termes de la llicència,
tot i estant en el nostre dret, tenim un problema per continuar
seguint aquesta guia.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="launchfailed" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En cas que aparegui un missatge d'error indicant
&lt;tt class="docutils literal"&gt;Launch failed.&amp;nbsp; Binary not found&lt;/tt&gt; és que ens hem deixat de
configurar l'opció de &lt;tt class="docutils literal"&gt;Run with build&lt;/tt&gt; a les propietats del
projecte. Encara podem arreglar-ho sense haver de començar. Només
ens cal indicar-li a Eclipse quin és el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que ha
d'executar. Per fer-ho, guardarem el projecte (&lt;tt class="docutils literal"&gt;File&lt;/tt&gt; -&amp;gt; &lt;tt class="docutils literal"&gt;Save''
o &lt;span class="pre"&gt;``ctrl-s&lt;/span&gt;&lt;/tt&gt;), construïm el projecte amb (&lt;tt class="docutils literal"&gt;Project&lt;/tt&gt; -&amp;gt; &lt;tt class="docutils literal"&gt;Build
all&lt;/tt&gt; o &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;ctrl-b&lt;/span&gt;&lt;/tt&gt;) i creem la configuració amb &lt;tt class="docutils literal"&gt;Run&lt;/tt&gt; -&amp;gt; &lt;tt class="docutils literal"&gt;Run
&lt;span class="pre"&gt;configurations...&lt;/span&gt;&lt;/tt&gt;) Al quadre de diàleg que ens apareix,
seleccionarem &lt;tt class="docutils literal"&gt;C/C++ Application&lt;/tt&gt; i si no ens apareix dins el
nostre projecte &lt;tt class="docutils literal"&gt;HolaCDT Debug&lt;/tt&gt; premem el botó de &lt;tt class="docutils literal"&gt;New&lt;/tt&gt;. Ara,
en el nostre projecte premem &lt;tt class="docutils literal"&gt;Search &lt;span class="pre"&gt;Project...&lt;/span&gt;&lt;/tt&gt; i escollim
l'executable &lt;tt class="docutils literal"&gt;holaCDT&lt;/tt&gt;. Acceptem i premem &lt;tt class="docutils literal"&gt;Run&lt;/tt&gt; i tot plegat
hauria de funcionar ara.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</summary></entry><entry><title>Glossari de conceptes d'Eclipse</title><link href="http://apuntstecnics.herokuapp.com/glossari-de-conceptes-declipse.html" rel="alternate"></link><updated>2014-09-09T22:57:30+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2014-09-09:glossari-de-conceptes-declipse.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Tal i com ens indiquen a la &lt;a class="reference external" href="http://www.eclipse.org/home/newcomers.php"&gt;introducció de benvinguda&lt;/a&gt;,&lt;/p&gt;
&lt;blockquote&gt;
eclipse és una comunitat orientada a la construcció d'una
plataforma de desenvolupament extensible i altres elements de
suport per tot el cicle de vida del programari.&lt;/blockquote&gt;
&lt;p&gt;Amb més de 200 projectes, Eclipse és molt més que un IDE de
desenvolupament en Java.&lt;/p&gt;
&lt;p&gt;L'element d'Eclipse amb el que interaccionarem és el &lt;em&gt;Workbench&lt;/em&gt; o
&lt;em&gt;taula de treball&lt;/em&gt;. De fet, la majoria de les vegades, quan estem
parlant d'Eclipse en realitat ens referim al Workbench.&lt;/p&gt;
&lt;p&gt;Aquest document conté un petit glossari dels conceptes bàsics que
apareixen en aquest Workbench.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="glossari"&gt;
&lt;h2&gt;Glossari&lt;/h2&gt;
&lt;p&gt;Workspace&lt;/p&gt;
&lt;blockquote&gt;
El workspace o &lt;em&gt;espai de treball&lt;/em&gt; és la carpeta on es guarda tot
el que treballem amb l'Eclipse.&lt;/blockquote&gt;
&lt;p&gt;Workbench&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;El Workbench o &lt;em&gt;taula de treball&lt;/em&gt; és una finestra de l'aplicació
Eclipse. Ofereix una o més perspectives.&lt;/p&gt;
&lt;p&gt;Poden haver més d'un workbench simultàniament.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Àrees del Workbench&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Al Workbench ens hi trobem dos tipus d'àrea: els &lt;strong&gt;editors&lt;/strong&gt; i les
&lt;strong&gt;vistes&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Les àrees a Eclipse disposen de barres d'eines independents, poden
ser maximitzades, minimitzades, redimensionades, col·locades a
diferents posicions del Workbench, duplicades, etc.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Editor&lt;/p&gt;
&lt;blockquote&gt;
Un editor és un dels tipus d'àrea del Workbench. Els editors
permeten crear, editar i guardar fitxers.&lt;/blockquote&gt;
&lt;p&gt;Vista&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Una vista és un dels dos tipus d'àrea del Workbench. Les vistes
ofereixen una representació estructurada de la informació
relacionada amb un fitxer, un projecte o d'altres recursos, i
sovint ens permetrà navegar entre aquesta informació i fins i tot
manipular-la.&lt;/p&gt;
&lt;p&gt;Eclipse ofereix una bona varietat de vistes. Per exemple, &lt;em&gt;Project
explorer&lt;/em&gt;, &lt;em&gt;search&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Perspectives&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Eclipse permet definir el conjunt de vistes a mostrar al
Workbench, així com la seva distribució i els elements que
apareixeran a la barra principal d'eines i alguns menús.
Aquestes definicions es fan en forma de &lt;em&gt;perspectives&lt;/em&gt;.
Existeixen perspectives predefinides que poden ser
utilitzades, però també modificades, i es poden definir de
noves.&lt;/p&gt;
&lt;p&gt;Exemples de perspectives predefinides són &lt;em&gt;java&lt;/em&gt; i &lt;em&gt;debug&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;En cas que hàgim modificat una perspectiva i vulguem tornar a
la versió inicial, hi ha disponible una opció de &lt;em&gt;reset&lt;/em&gt; i
tornem a la versió guardada de la perspectiva. Podem també
guardar els nostres canvis a una perspectiva per defecte i
també crear-ne de noves.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
</summary></entry><entry><title>Tutorial d'instal·lació de NetBeans</title><link href="http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-de-netbeans.html" rel="alternate"></link><updated>2014-09-09T22:56:30+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2014-09-09:tutorial-dinstallacio-de-netbeans.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document descriu una manera d'instal·lar l'IDE NetBeans a un
sistema Ubuntu.&lt;/p&gt;
&lt;p&gt;Atenció: La instal·lació a altres sistemes operatius no hauria de
resultar gaire més complexa.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="installacio"&gt;
&lt;h2&gt;Instal·lació&lt;/h2&gt;
&lt;p&gt;Per la realització d'una instal·lació de NetBeans seguirem les
següents passes des d'una consola:&lt;/p&gt;
&lt;ol class="arabic" start="0"&gt;
&lt;li&gt;&lt;p class="first"&gt;Abans d'instal·lar NetBeans&lt;/p&gt;
&lt;p&gt;Donat que NetBeans és una aplicació java, caldrà disposar d'una
màquina virtual (JVM) al nostre sistema per a poder-la instal·lar.&lt;/p&gt;
&lt;p&gt;Si encara no la tens instal·lada, pots seguir el &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-de-eclipse.html"&gt;pas 0 de la guia
d'instal·lació d'Eclipse&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Obtenció del NetBeans&lt;/p&gt;
&lt;p&gt;El NetBeans podria ser instal·lat des del centre de programari que
ofereix l'Ubuntu. Amb tot, en el moment en que s'escrivia aquesta
guia, la versió empaquetada disponible era la 7.0.1, mentre que la
darrera publicada era la 7.2.&lt;/p&gt;
&lt;p&gt;Tot i que, probablement, no trobarem cap diferència entre les dues
versions per un ús no professional de l'IDE, en aquesta guia es
proposa realitzar la instal·lació de la darrera versió.&lt;/p&gt;
&lt;p&gt;Per tant, caldrà anar al lloc oficial de NetBeans (netbeans.org) a
la secció de descàrregues (des de la pàgina principal hi ha un
enllaç directe a la descàrrega de la darrera versió)&lt;/p&gt;
&lt;p&gt;Ara escollim idioma i plataforma (probablement la proposta per
defecte serà la correcta), i escollim la descàrrega de la versió
Java SE (la més bàsica) donat que més endavant podrem afegir altres
complements com indica la pàgina al final.&lt;/p&gt;
&lt;p&gt;Es descarregarà l'instal·lador, un script d'uns 83 Mb.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Instal·lació del NetBeans&lt;/p&gt;
&lt;p&gt;La instal·lació del NetBeans a partir de l'instal·lador descarregat
és molt fàcil. Simplement cal executar l'instal·lador i anar
seguint les instruccions.&lt;/p&gt;
&lt;p&gt;Per executar l'instal·lador podem, per exemple, anar al directori
on l'hem descarregat i fer:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ bash netbeans-7-2-ml-javase-linux.sh
&lt;/pre&gt;
&lt;p&gt;Ens caldrà, a banda d'acceptar una sèrie d'acords de llicències,
definir el directori on instal·lar NetBeans i el JDK. Per exemple,
podem escollir el directori &lt;tt class="docutils literal"&gt;~/soft/netbeans7.2&lt;/tt&gt; i el jdk per
defecte.&lt;/p&gt;
&lt;p&gt;En acabar, continuarà descarregant i finalment instal·larà
l'aplicació.&lt;/p&gt;
&lt;p&gt;Per comoditat, es pot crear algun llançador. Per exemple, per poder
executar-ho des de línia de comandes, pot ser còmode:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ cd ~
$ mkdir -p bin
$ cd bin
$ cat &amp;gt; netbeans.sh &amp;lt;&amp;lt; EOF
&amp;gt; #! /bin/sh
&amp;gt; ~/soft/netbeans-7.2/bin/netbeans &amp;amp;
&amp;gt; EOF
$ chmod u+x netbeans.sh
&lt;/pre&gt;
&lt;p&gt;i, des de qualsevol lloc&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ netbeans.sh
&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Una prova ràpida&lt;/p&gt;
&lt;p&gt;Per defecte, NetBeans s'instal·la per construir aplicacions en
java.&lt;/p&gt;
&lt;p&gt;Aprofitant que no hem de fer res especial, farem una primera prova
de l'entorn creant un &amp;quot;original&amp;quot; programa de salutació al món.&lt;/p&gt;
&lt;p&gt;Anirem a Fitxer -&amp;gt; Nou projecte i escollirem els valors per defecte
(Categoria Java i Projectes Java Aplication) Farem &lt;em&gt;Següent&lt;/em&gt; i
escollirem un nom de projecte (ex. HolaMon) i un lloc on deixar el
projecte (potser l'opció per defecte ja ens està bé) Quan ja ho
tenim tot, premem &lt;em&gt;Finalitzar&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;En aquest moment ens apareixerà una finestra amb un aspecte similar
al següent:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Projecte HolaMon a Netbeans" src="http://apuntstecnics.herokuapp.com/images/netbeans001.holamon.png" /&gt;
&lt;/div&gt;
&lt;p&gt;A la subfinestra més ampla (a la dreta), hi trobem un editor amb el
codi del nostre projecte. NetBeans ens ha autocompletat una sèrie
d'elements per nosaltres. Entre d'altres, ens ha afegit el nostre
nom, i ens ha creat un primer esquema de la classe HolaMon que hem
demanat crear.&lt;/p&gt;
&lt;p&gt;Ara, allà on posa &lt;tt class="docutils literal"&gt;// TODO code application logic here&lt;/tt&gt;
escriurem &lt;tt class="docutils literal"&gt;Sys&lt;/tt&gt;. A continuació, farem &amp;lt;ctrl&amp;gt;-&amp;lt;espai&amp;gt; i podrem
veure que NetBeans ens ofereix, no només com continuar la paraula
que estem escrivint, sinó també documentació corresponent a la
proposta de compleció. Farem &amp;lt;enter&amp;gt; per completar.&lt;/p&gt;
&lt;p&gt;Continuem escrivint un punt &lt;tt class="docutils literal"&gt;.&lt;/tt&gt; i observem que ens apareix una
llista de possibilitats per a continuar que podem navegar amb el
cursor. Escollirem &lt;tt class="docutils literal"&gt;out&lt;/tt&gt; i tornarem a escriure un punt. Ens
apareix una nova llista. Aquest cop, començarem a escriure &lt;tt class="docutils literal"&gt;pri&lt;/tt&gt;
i observarem que ens porta a les paraules que comencen amb &amp;quot;pri&amp;quot;.
Escollirem la primera i ens autocompletarà a la funció
&lt;tt class="docutils literal"&gt;System.out.print()&lt;/tt&gt; deixant-nos el cursor dins dels parèntesis i
informant-nos del possible tipus de dades que hi podem ficar dins.
Escriurem entre cometes &lt;tt class="docutils literal"&gt;&amp;quot;Hola &lt;span class="pre"&gt;Món!\n&amp;quot;&lt;/span&gt;&lt;/tt&gt; i farem &amp;lt;enter&amp;gt;. NetBeans
col·loca el cursor al final de la sentència.&lt;/p&gt;
&lt;p&gt;Si tot està correcte (NetBeans ens avisaria en cas contrari) podem
ja executar el nostre programa. Execució -&amp;gt; Executar projecte
(HolaMon) i ens apareix una nova subfinestra a la part inferior on
es veu el resultat de l'execució del programa. NetBeans s'ha fet
càrrec de guardar, compilar i executar el nostre codi.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Ja tenim disponible el NetBeans!&lt;/p&gt;
&lt;/div&gt;
</summary></entry><entry><title>Exercicis de repàs de programació</title><link href="http://apuntstecnics.herokuapp.com/exercicis-de-repas-de-programacio.html" rel="alternate"></link><updated>2013-08-30T23:57:00+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2013-08-30:exercicis-de-repas-de-programacio.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;A continuació trobaràs una llista d'exercicis bàsics. Intenta'ls
realitzar amb qualsevol llenguatge de programació o, fins i tot, amb
pseudocodi.&lt;/p&gt;
&lt;p&gt;El valor d'aquests exercicis està en la correcció a classe. Per tant,
fes un esforç per què les teves respostes siguin llegibles.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-la-preso"&gt;
&lt;h3&gt;Exercici 1. La presó&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani a la usuària els anys que té amb el
missatge &lt;em&gt;Quants anys té?&lt;/em&gt;. En cas que sigui major d'edat, el programa
li avisarà dient: &lt;em&gt;Atenció: Vosté pot anar a la presó!&lt;/em&gt;. En qualsevol
cas, el programa finalitzarà dient: &lt;em&gt;Aneu amb compte&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Nota: en aquest cas acceptarem qualsevol valor enter com a edat vàlida.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-mesos"&gt;
&lt;h3&gt;Exercici 2. Mesos&lt;/h3&gt;
&lt;p&gt;Desenvolupeu un programa que demani un mes i un any, i escrigui el mes
anterior i el mes següent.&lt;/p&gt;
&lt;p&gt;Els missatges de petició de l'entrada seran, respectivament: &lt;em&gt;Mes?&lt;/em&gt; i &lt;em&gt;Any?&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, si l’usuari introdueix mes &lt;em&gt;9&lt;/em&gt; i any &lt;em&gt;2009&lt;/em&gt;, el resultat
serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
ant: 8/2009
seg: 10/2009
&lt;/pre&gt;
&lt;p&gt;Nota: en aquest cas, suposarem que sempre ens introduiran mesos i anys
correctes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-ordena-3"&gt;
&lt;h3&gt;Exercici 3. Ordena 3&lt;/h3&gt;
&lt;p&gt;Desenvolupeu un programa que demani tres números i
escrigui els tres números ordenats creixentment (de menor a major).&lt;/p&gt;
&lt;p&gt;L'entrada es requerirà amb els missatges &lt;em&gt;Primer?&lt;/em&gt;, &lt;em&gt;Segon?&lt;/em&gt; i
&lt;em&gt;Tercer?&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, si els números introduïts són &lt;em&gt;3&lt;/em&gt;, &lt;em&gt;4&lt;/em&gt; i &lt;em&gt;2&lt;/em&gt;, el resultat
serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
2 3 4
&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-ascensor"&gt;
&lt;h3&gt;Exercici 4. Ascensor&lt;/h3&gt;
&lt;p&gt;Considerem un ascensor d’un edifici amb planta baixa
i dos pisos que tingui els següents botons: ‘pujar 1’, ‘pujar 2’,
‘baixar 1’ i ‘baixar 2’. L’ascensor es comporta, a partir dels botons
esmentats, segons el següent diagrama de transició d’estats:&lt;/p&gt;
&lt;div class="figure align-right"&gt;
&lt;img alt="Diagrama d'estats de l'ascensor" src="http://apuntstecnics.herokuapp.com/images/poo003.img001.ascensor.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Es demana desenvolupar un programa que simuli el funcionament d’aquest
ascensor. El programa demanarà el pis en que es troba i el botó que es
prem, i mostrarà el nou pis. En cas que el botó seleccionat a una
posició determinada de l’ascensor no correspongui amb algun dels
representats amb el diagrama d’estats, l’ascensor mostra un missatge
d'error i es queda al lloc en què estava.&lt;/p&gt;
&lt;p&gt;Els missatges de petició de l'entrada són, respectivament:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Planta? (PB: planta baixa, PP: primer pis, SP: segon pis
Botó? (P1: puja 1, P2: puja 2, B1: baixa 1, B2: baixa 2
&lt;/pre&gt;
&lt;p&gt;Mentre que la sortida s'expressarà simplement indicant la nova planta.&lt;/p&gt;
&lt;p&gt;Per exemple, si l'entrada és: &lt;tt class="docutils literal"&gt;PB&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;P1&lt;/tt&gt;, la sortida serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
PP
&lt;/pre&gt;
&lt;p&gt;En cas d'error, caldrà mostrar els següents missatges:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Planta incorrecta
Botó incorrecte
&lt;/pre&gt;
&lt;p&gt;I cal tenir present que si la planta és incorrecta, ja no se li
demanarà el botó a la usuària.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-historic-d-edats"&gt;
&lt;h3&gt;Exercici 5. Històric d'edats&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani el nom de la usuària, l’edat i l’any
actual. El programa escriurà l’edat que tenia la usuària a cada any des
del seu naixement i s’acomiadarà. Per exemple, si l’entrada és&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Anna
5
2012
&lt;/pre&gt;
&lt;p&gt;El programa escriurà&lt;/p&gt;
&lt;pre class="literal-block"&gt;
El 2007 va nàixer
El 2008 tenia 1 any
El 2009 tenia 2 anys
El 2010 tenia 3 anys
El 2011 tenia 4 anys
Adéu Anna
&lt;/pre&gt;
&lt;p&gt;El programa no li dirà l'edat que té la usuària en l'any actual, donat
que aquesta dada forma part de l'entrada. Per exemple, si la usuària
ha nascut aquest any, simplement s'acomiadarà.&lt;/p&gt;
&lt;p&gt;Les comprovacions necessàries són: que el nom no estigui buit, que
l'edat i l'any actual siguin enters positius, i que l'any actual sigui
un valor més alt que el de l'edat.&lt;/p&gt;
&lt;p&gt;Es demanaran les dades en l'ordre indicat a l'exemple i, en quan es
detecti un error, es deixarà de demanar més dades.&lt;/p&gt;
&lt;p&gt;Els missatges de petició de dades seran:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Nom?
Edat?
Any actual?
&lt;/pre&gt;
&lt;p&gt;Els missatges d'error seran:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Nom incorrecte
Edat no pot ser negativa
Any actual no pot ser negatiu
Edat o any actual incorrectes
&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-l-ascensor-continu"&gt;
&lt;h3&gt;Exercici 6. L'ascensor continu&lt;/h3&gt;
&lt;p&gt;Ara, el nostre ascensor començarà a la planta baixa i anirà demanant
un botó per canviar de pis. Es comportarà pràcticament igual que la
versió anterior. Ara, és clar, ja no li cal demanar a quin pis es troba.&lt;/p&gt;
&lt;p&gt;Un cop canviat de pis (o indicat l'error) demanarà que premi un nou
botó. I així es quedarà fins que la usuària indiqui el botó de sortida.&lt;/p&gt;
&lt;p&gt;Aquesta versió incorpora un missatge molt compacte amb el següent
aspecte:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
[xx] P1: puja 1, P2: puja 2, B1: baixa 1, B2: baixa 2, EX: surt
&lt;/pre&gt;
&lt;p&gt;On xx pot ser PB, PP o SP depenent de la planta on es trobi.&lt;/p&gt;
&lt;p&gt;Quan la usuària demani finalitzar (amb &amp;quot;EX&amp;quot;), es mostrarà el missatge de
comiat &amp;quot;Adéu&amp;quot; i finalitzarà l'execució.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-comptar-a-s"&gt;
&lt;h3&gt;Exercici 7. Comptar 'A's&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani un string (pot ser buit!) i
mostri el nombre de ‘A’ que apareguin al string. És a dir, si
l’entrada és ‘XAXAAXAX’ la sortida serà 4.&lt;/p&gt;
&lt;p&gt;Es demana que es construeixi una funció que, donat el string
d'entrada, retorni el nombre de caràcters 'A'.&lt;/p&gt;
&lt;p&gt;Nota: Per simplicitat, considera només majúscules.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-8-comptar-a-s-consecutives"&gt;
&lt;h3&gt;Exercici 8. Comptar 'A's consecutives&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani un string i
mostri el nombre de ‘A’ consecutives que apareguin a l’string. És considera una 'A' consecutiva si l'anterior també era una 'A'. És a dir, si l’entrada és ‘XXAXXAAXXAAAAX’ la sortida serà 4.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-9-comptar-a-s-no-consecutives"&gt;
&lt;h3&gt;Exercici 9. Comptar 'A's no consecutives&lt;/h3&gt;
&lt;p&gt;Com l'exercici anterior, però aquest cop es mostrarà el nombre de 'A's
no consecutives. És a dir, si l’entrada és ‘XXAXXAAXXAAAX’ la sortida
serà 3.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-triangles"&gt;
&lt;h3&gt;Exercici 10. Triangles&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani un nombre enter positiu i dibuixi
tants triangles com se li indiqui.&lt;/p&gt;
&lt;p&gt;Intenta evitar la repetició de codi fent servir subrutines.&lt;/p&gt;
&lt;p&gt;Per exemple, si l'entrada és &lt;em&gt;2&lt;/em&gt;, el resultat serà&lt;/p&gt;
&lt;pre class="literal-block"&gt;
.........9.........
........898........
.......78987.......
......6789876......
.....567898765.....
....45678987654....
...3456789876543...
..234567898765432..
.12345678987654321.
0123456789876543210
.........9.........
........898........
.......78987.......
......6789876......
.....567898765.....
....45678987654....
...3456789876543...
..234567898765432..
.12345678987654321.
0123456789876543210
&lt;/pre&gt;
&lt;p&gt;El missatge de petició de l'entrada serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Nombre de triangles?
&lt;/pre&gt;
&lt;p&gt;El missatge d'error si l'entrada no és correcta serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
No puc dibuixar n triangles
&lt;/pre&gt;
&lt;p&gt;On &lt;em&gt;n&lt;/em&gt; correspon al nombre introduït.&lt;/p&gt;
&lt;p&gt;Nota: Si tens la temptació de resoldre el problema via
&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;printf(&amp;quot;.........9.........&amp;quot;);&lt;/span&gt;&lt;/tt&gt; planteja't que passarà si se't
requereix que els símbols a escriure s'han de demanar a la usuària.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary></entry><entry><title>Tipus Abstractes de Dades</title><link href="http://apuntstecnics.herokuapp.com/tipus-abstractes-de-dades.html" rel="alternate"></link><updated>2013-08-30T23:42:00+02:00</updated><author><name>Moisès Gómez Girón</name></author><id>tag:apuntstecnics.herokuapp.com,2013-08-30:tipus-abstractes-de-dades.html</id><summary type="html">&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquests continguts presenten el concepte de &lt;em&gt;Tipus Abstracte de Dades&lt;/em&gt;
o més conegut com a TAD.&lt;/p&gt;
&lt;p&gt;Els TADs són bàsicament una agrupació de dades i processos que actuen
sobre aquestes, de manera que l'usuari de les dades (un altre
programa, és clar) no tingui perquè conèixer la implementació interna
d'aquestes. Així, en cas que es trobin maneres més eficients de
codificar les dades, es poden realitzar els canvis sense requerir que
els usuaris d'aquestes hagin de modificar el seu codi.&lt;/p&gt;
&lt;p&gt;Per introduir-nos als TADs, farem servir un exemple conductor:
treballarem amb hores. Inicialment farem servir els components d'una
hora (les hores, minuts i segons) per separat. A continuació
estudiarem ara la possibilitat d'agrupar aquests components sota
un mateix identificador. Avançarem amb aquesta idea per crear els
nostres propis tipus de dades fins a arribar a l'agrupació d'aquestes
amb operacions que les manipulen: els TADs.&lt;/p&gt;
&lt;p&gt;Amb la complexitat creixent dels nostres programes, començarà a tenir
sentit separar els programes en fitxers, i de seguida que el nombre de
fitxers comenci a créixer, ens caldrà algun mecanisme per gestionar la
compilació. Tot plegat, ho veurem introduït a la part final d'aquest
tema.&lt;/p&gt;
&lt;p&gt;Els exercicis que apareixen en aquest document estan classificats amb
zero o més asteriscs. Si disposes de prou temps, ignora les marques i
realitza els exercicis en l'ordre en que apareixen. En cas contrari
considera primer els exercicis sense marques. Els exercicis amb un
asterisc són exercicis per practicar i si has fet els exercicis de que
depenen, no haurien de resultar-te gaire difícils. Els exercicis amb
dos asteriscs presenten una complexitat una mica superior, normalment
de tipus algorísmic.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="estructures"&gt;
&lt;h2&gt;Estructures&lt;/h2&gt;
&lt;p&gt;De vegades ens trobem que un grup de variables, no necessàriament del
mateix tipus, estan tan relacionades entre si que ens trobem
pràcticament sempre declarant-les juntes, passant-les com a paràmetre
juntes, etc.&lt;/p&gt;
&lt;div class="section" id="exercici-1-un-segon-mes"&gt;
&lt;h3&gt;Exercici 1. Un segon més&lt;/h3&gt;
&lt;p&gt;Desenvolupa un procediment que, donada una hora representada per tres
enters hora, minut i segon, calculi el resultat d'afegir un segon a
l'hora.&lt;/p&gt;
&lt;p&gt;Completa el següent codi perquè compili i s'executi sense cap
missatge. Evidentment, no es val modificar el codi de
&lt;tt class="docutils literal"&gt;valida_resultat()&lt;/tt&gt; ni de &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include&amp;lt;stdio.h&amp;gt;&lt;/span&gt;

&lt;span class="cm"&gt;/* Donada una hora d&amp;#39;origen formada per tres enters ho, mo i so,&lt;/span&gt;
&lt;span class="cm"&gt;   calcula l&amp;#39;hora corresponent a sumar-li un segon a aquesta hora&lt;/span&gt;
&lt;span class="cm"&gt;   origen i deixa el resultat en l&amp;#39;hora calculada composada per&lt;/span&gt;
&lt;span class="cm"&gt;   les referències a enter hc, mc i sc. Pressuposa que l&amp;#39;hora d&amp;#39;origen&lt;/span&gt;
&lt;span class="cm"&gt;   és correcta i apareix en format 24h. */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                             &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Valida el resultat trobat a partir de l&amp;#39;esperat.&lt;/span&gt;
&lt;span class="cm"&gt; * En cas de discrepància, mostra un missatge d&amp;#39;error indicant l&amp;#39;hora esperada&lt;/span&gt;
&lt;span class="cm"&gt; * i l&amp;#39;hora trobada */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="n"&gt;mt&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error: &lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s"&gt; esperat %d:%d:%d&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s"&gt; trobat  %d:%d:%d&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;     &lt;span class="cm"&gt;/* compoments de l&amp;#39;hora origen    */&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;     &lt;span class="cm"&gt;/* compoments de l&amp;#39;hora esperada  */&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;     &lt;span class="cm"&gt;/* compoments de l&amp;#39;hora calculada */&lt;/span&gt;

    &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="agrupacio-en-arrays"&gt;
&lt;h3&gt;Agrupació en arrays&lt;/h3&gt;
&lt;p&gt;T'has fixat quants cops hem de passar a l'hora els diferents elements
que composen una hora? Està clar que ens cal poder agrupar aquests
conceptes d'hora, minut i segon.&lt;/p&gt;
&lt;p&gt;Ho podríem fer mitjançant un array d'enters, on la primera posició fos
l'hora, la segona el minut i la tercera el segon. Això és possible
perquè els tres components d'una hora són del mateix tipus.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-incrementa-segons-amb-un-array-d-hora"&gt;
&lt;h3&gt;Exercici 2. Incrementa segons amb un array d'hora&lt;/h3&gt;
&lt;p&gt;Desenvolupa una versió de l'exercici anterior, on els diferents
components d'una hora apareguin codificats en forma d'array.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h3&gt;Estructures&lt;/h3&gt;
&lt;p&gt;Si bé la manera de resoldre el problema amb un array pot ser
acceptable per a aquest tipus de problemes en que tots els components
són del mateix tipus, no sempre serà així.&lt;/p&gt;
&lt;p&gt;Per aquesta raó, considera ara el següent codi&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include&amp;lt;stdio.h&amp;gt;&lt;/span&gt;

&lt;span class="cm"&gt;/* definició de l&amp;#39;estructura Hora */&lt;/span&gt;
&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* assigna els valors h, m i s als components de la referència a Hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa valors correctes. */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Donada una hora d&amp;#39;origen calcula l&amp;#39;hora corresponent a&lt;/span&gt;
&lt;span class="cm"&gt;   sumar-li un segon i deixa el resultat en l&amp;#39;hora calculada.&lt;/span&gt;
&lt;span class="cm"&gt;   Pressuposa que l&amp;#39;hora d&amp;#39;origen és correcta i apareix en format 24h. */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Valida el resultat trobat a partir de l&amp;#39;esperat.&lt;/span&gt;
&lt;span class="cm"&gt; * En cas de discrepància, mostra un missatge d&amp;#39;error indicant l&amp;#39;hora esperada&lt;/span&gt;
&lt;span class="cm"&gt; * i l&amp;#39;hora trobada */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error: &lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s"&gt; esperat %d:%d:%d&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s"&gt; trobat  %d:%d:%d&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="cm"&gt;/* declara les hores origen, esperada i calculada */&lt;/span&gt;

    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixa't que:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;El bloc iniciat a la línia 4 declara un nou tipus de dades anomenat
&lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; que està format per tres &lt;em&gt;camps&lt;/em&gt; enters.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;La línia 37 declara tres variables de tipus &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;La línia 41 passa dues variables de tipus &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; com arguments de
la crida a una subrutina. La primera la passa per valor i la segona
per referència.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A la línia 29 es mostra com, a partir del nom d'una variable de
tipus &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; es pot accedir als valors dels seus camps. La forma
general és&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;variable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;nom_camp&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A la línia 13 es mostra com accedir a un camp a partir de la
referència a una variable de tipus &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt;. La forma
general és&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;variable&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;nom_camp&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;És a dir, accedirem als camps de manera diferent si disposem de la
variable o d'una referència a aquesta.&lt;/p&gt;
&lt;p&gt;De fet, la notació amb fletxeta és en realitat una &lt;em&gt;comoditat&lt;/em&gt; que
ens ofereix el llenguatge. Podem fer servir l'asterisc per
derreferenciar la variable i accedir directament als seus camps
mitjançant el punt&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per cert, en aquest cas podem copiar directament els valors dels camps
d'una Hora en una altra:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Malauradament no podrem fer el mateix amb la comparació
(ex. &lt;tt class="docutils literal"&gt;if (he != ht) &lt;span class="pre"&gt;«...»&lt;/span&gt;&lt;/tt&gt;) En tot cas, no es recomanable que facis
servir aquesta assignació directa en cas que algun dels camps sigui un
punter (ex. un string) ja que et trobaràs amb que només es copia
l'adreça. En resum: millor fes-te un procediment que dupliqui el
contingut de la teva estructura en una altra.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-incrementa-l-hora-amb-estructura"&gt;
&lt;h3&gt;Exercici 3. Incrementa l'hora amb estructura&lt;/h3&gt;
&lt;p&gt;Completa el codi anterior de manera que compili i executi sense cap
missatge.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-el-tipus-data"&gt;
&lt;h3&gt;Exercici 4**. El tipus Data&lt;/h3&gt;
&lt;p&gt;Implementa un nou tipus de dades anomenat &lt;tt class="docutils literal"&gt;Data&lt;/tt&gt; que estigui
composat de tres enters: dia, mes i any.&lt;/p&gt;
&lt;p&gt;Desenvolupa un programa similar al de l'exercici anterior que permeti
provar una funció anomenada &lt;tt class="docutils literal"&gt;incrementa_dia_a_data()&lt;/tt&gt; en els
casos rellevants.&lt;/p&gt;
&lt;p&gt;Nota: sí, has de considerar els diferents dies que té cada mes i els
anys de traspàs. Serà acceptable que consideris com a any de traspàs
qualsevol any múltiple de 4. No serà precís però sí ràpid
d'implementar.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-el-tipus-persona"&gt;
&lt;h3&gt;Exercici 5*. El tipus Persona&lt;/h3&gt;
&lt;p&gt;No hi ha cap raó per què una estructura no pugui tenir camps amb tipus
de dades diferents. Fins i tot aquest podria ser un tipus definit per
nosaltres.&lt;/p&gt;
&lt;p&gt;Defineix el tipus &lt;tt class="docutils literal"&gt;Persona&lt;/tt&gt; que té un camp nom i un camp data de
naixement.&lt;/p&gt;
&lt;p&gt;Completa el següent codi de manera que compili i executi sense cap
missatge&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include&amp;lt;stdio.h&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&amp;lt;string.h&amp;gt;&lt;/span&gt;

&lt;span class="cm"&gt;/* definició d&amp;#39;estructura/es */&lt;/span&gt;
&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;

&lt;span class="cm"&gt;/* assigna els valors h, m i s als components de la referència a Hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa valors correctes. */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;assigna_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;dia&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mes&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;any&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* mostra una data per sortida estàndard en format d/m/a */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;mostra_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Donada dues Dates, retorna cert quan les dues coincideixen en dia i mes */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;es_aniversari_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="n"&gt;d1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="n"&gt;d2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Donat un nom i una data, copia els valors a la persona */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;assigna_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Persona&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Donada una Persona i una Data, retorna si és l&amp;#39;aniversari de la persona&lt;/span&gt;
&lt;span class="cm"&gt; * en aquesta data. */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;es_aniversari_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Persona&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* mostra la persona per sortida estàndard&lt;/span&gt;
&lt;span class="cm"&gt; * El format és [nom: «nom», dn: «data naixement»] */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;mostra_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Persona&lt;/span&gt; &lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Persona&lt;/span&gt; &lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;assigna_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2013&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;data_avui&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;assigna_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Joan&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;es_aniversari_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error: es_aniversari_persona(&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;, &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;) retorna fals&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;assigna_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2013&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;data_avui&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;assigna_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Marta&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;es_aniversari_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error: es_aniversari_persona(&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;, &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;) retorna cert&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;assigna_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2013&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;data_avui&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;assigna_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Pau&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt; &lt;span class="n"&gt;es_aniversari_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error: es_aniversari_persona(&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;, &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;) retorna fals&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Pista: recorda que l'assignació d'un string no es pot fer directament
en C. Per això la inclusió de &lt;tt class="docutils literal"&gt;string.h&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-data-i-hora"&gt;
&lt;h3&gt;Exercici 6*. Data i Hora&lt;/h3&gt;
&lt;p&gt;Defineix ara el tipus &lt;tt class="docutils literal"&gt;DataHora&lt;/tt&gt; que estarà format per dos camps
de tipus &lt;tt class="docutils literal"&gt;Data&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; respectivament.&lt;/p&gt;
&lt;p&gt;Implementa la següent subrutina&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* Donada una DataHora d&amp;#39;origen calcula el valor corresponent a&lt;/span&gt;
&lt;span class="cm"&gt;   sumar-li un segon i deixa el resultat en la DataHora calculada.&lt;/span&gt;
&lt;span class="cm"&gt;   Pressuposa que els valors d&amp;#39;origen són correctes. */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;incrementa_segon_a_datahora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DataHora&lt;/span&gt; &lt;span class="n"&gt;dho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;DataHora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;dhc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Implementa un programa que permeti comprovar el funcionament d'aquesta
subrutina, incloent totes les comprovacions realitzades a exercicis
previs d'Hora i de Data.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="tads"&gt;
&lt;h2&gt;TADs&lt;/h2&gt;
&lt;p&gt;És probable que ja t'hagis fixat en que algunes subrutines
acompanyen als tipus que hem definit. Si és així, felicitats, t'has
adonat pel teu compte d'un concepte molt important a l'hora de
reutilitzar codi: l'&lt;em&gt;abstracció&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;El concepte d'abstracció implica la definició de tipus i les
operacions associades a aquests, de manera que si fem servir sempre
aquestes operacions no ens haurem de preocupar de la implementació
interna del tipus.&lt;/p&gt;
&lt;p&gt;Quan el nostre tipus ve acompanyat de les operacions (subrutines) per
manipular-lo, de manera que es pugui fer servir sense preocupar-se per
la seva implementació interna, direm que és un &lt;em&gt;Tipus Abstracte de
Dades&lt;/em&gt; o &lt;em&gt;TAD&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Això ens ofereix almenys els següents avantatges:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;millora la reutilització de codi&lt;/p&gt;
&lt;p&gt;Si un tipus està tan ben definit que disposem de totes les
operacions necessàries per manegar-lo, el podrem fer servir en
altres contexts.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;facilita el control d'errors.&lt;/p&gt;
&lt;p&gt;Donat que només es pot modificar els valors interns del nostre TAD
mitjançant les operacions que oferim, sabem que si variables del
TAD tenen un valor erroni, aquest l'haurem assignat nosaltres des
de les nostres operacions. No cal cercar tant, oi?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;independitza de la implementació&lt;/p&gt;
&lt;p&gt;Com que el codi que fa servir aquests tipus abstractes no accedeix
mai a la implementació interna del tipus, podem canviar aquesta
implementació amb tranquil·litat de que el codi que abans
funcionava continuarà fent-ho, si no afegim nous errors i mantenim
la signatura de les subrutines.&lt;/p&gt;
&lt;p&gt;Per a què podem voler canviar la implementació d'un tipus ja
definit? doncs per exemple per fer-lo més eficient, o per afegir
noves funcionalitats.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="section" id="exercici-4-el-tad-hora"&gt;
&lt;h3&gt;Exercici 4. El TAD Hora&lt;/h3&gt;
&lt;p&gt;Les següents subrutines sobre l'estructura Hora podrien permetre un ús
&lt;em&gt;abstracte&lt;/em&gt; d'aquesta, de manera que si canviem la implementació (ex.
implementem les hores, minuts i segons en array d'enters), no calgui
modificar els programes que facin servir &lt;em&gt;només&lt;/em&gt; les subrutines.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* assigna els valors que composen l&amp;#39;hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Retorna 0 si algun dels valors és incorrecte */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;assigna_valors_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* assigna el valor de les hores a l&amp;#39;hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Retorna 0 si el valor és incorrecte */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;assigna_hores_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* assigna el valor dels minuts a l&amp;#39;hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Retorna 0 si el valor és incorrecte */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;assigna_minuts_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* assigna el valor dels segons a l&amp;#39;hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Retorna 0 si el valor és incorrecte */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;assigna_segons_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* Retorna 0 si hi ha algun error en algun dels valors considerant-los&lt;/span&gt;
&lt;span class="cm"&gt; * components d&amp;#39;una Hora */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;valida_valors_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* Retorna 0 si hi ha algun error en algun dels valors de l&amp;#39;Hora. */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;valida_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* retorna les hores d&amp;#39;una Hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa valors correctes de l&amp;#39;hora */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;obte_hores_de_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* retorna els minuts d&amp;#39;una Hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa valors correctes de l&amp;#39;hora */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;obte_minuts_de_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* retorna els segons d&amp;#39;una Hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa valors correctes de l&amp;#39;hora */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;obte_segons_de_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* incrementa un segon a l&amp;#39;hora d&amp;#39;origen i deixa el resultat a l&amp;#39;hora&lt;/span&gt;
&lt;span class="cm"&gt; * calculda.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa valors correctes de l&amp;#39;hora d&amp;#39;origen */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* converteix l&amp;#39;hora en un string amb format h:m:s&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa que hi ha prou espai reservat a dest */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;convert_hora_a_string&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="p"&gt;[]);&lt;/span&gt;

&lt;span class="cm"&gt;/* compara dues hores. Retorna cert si les dues hores són iguals.&lt;/span&gt;
&lt;span class="cm"&gt; * És a dir, contenen els mateixos valors */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;compara_hores&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* copia els valors d&amp;#39;una hora en una altra de manera que les dues&lt;/span&gt;
&lt;span class="cm"&gt; * hores siguin iguals. */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;duplica_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;origen&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;desti&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* incrementa l&amp;#39;hora ho en un segon i deixa el resultat a hd.&lt;/span&gt;
&lt;span class="cm"&gt;   En cas que l&amp;#39;hora fos 23:59:59, retorna 1, altrament retorna 0. */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;incr_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hd&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;El codi anterior només inclou la signatura de les subrutines. Algunes
ja les teníem implementades encara que de manera lleugerament
diferent. Per exemple, &lt;em&gt;assigna_valors_a_hora()&lt;/em&gt; abans es deia
&lt;em&gt;assigna_valors()&lt;/em&gt;, i &lt;em&gt;incr_segon_a_hora()&lt;/em&gt; abans no retornava res.&lt;/p&gt;
&lt;p&gt;Completa el codi de totes les funcions i modifica el codi de les
funcions &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;valida_resultat()&lt;/tt&gt; de l'exercici 3, de manera
que faci servir les subrutines anteriors en comptes d'accedir
directament als camps de l'estructura &lt;em&gt;Hora&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Nota: fixa't que moltes d'aquestes subrutines no les necessitem per
aquest &lt;em&gt;main()&lt;/em&gt;. Potser en altres aplicacions apareixerà la
necessitat.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="mes-d-un-fitxer"&gt;
&lt;h2&gt;Més d'un fitxer&lt;/h2&gt;
&lt;p&gt;Ara ja disposem del concepte de TAD. No trobes, però, que és una mica
incòmode a l'hora de reutilitzar codi? És clar, cada cop que vull fer
servir el TAD Hora, em cal copiar i enganxar tot el codi en el fitxer
on tinc el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;. No és gaire àgil, no...&lt;/p&gt;
&lt;p&gt;El que ens cal és trobar una manera de col·locar el codi del TAD en un
fitxer i demanar al compilador de C que l'&lt;em&gt;inclogui&lt;/em&gt; amb el codi del
nostre programa.&lt;/p&gt;
&lt;div class="section" id="exercici-5-el-tad-hora-amb-mes-d-un-fitxer"&gt;
&lt;h3&gt;Exercici 5. El TAD Hora amb més d'un fitxer&lt;/h3&gt;
&lt;p&gt;Segueix les passes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;copia el codi de l'exercici 7 en un nou lloc.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;crea els fitxers: &lt;tt class="docutils literal"&gt;tad_hora.h&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;mou el codi amb la definició del tipus Hora i la signatura de les
subrutines (incloent comentaris) a &lt;tt class="docutils literal"&gt;tad_hora.h&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;mou el codi amb el cos de les subrutines a &lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;mou la resta de subrutines (&lt;tt class="docutils literal"&gt;valida_resultat()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;) al
fitxer &lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;després de la capçalera de &lt;tt class="docutils literal"&gt;tad_hora.h&lt;/tt&gt; (perquè li has posat una
capçalera, oi?) afegeix les següents línies:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#ifndef TAD_HORA_H   &lt;/span&gt;&lt;span class="cm"&gt;/* permet garantir que no s&amp;#39;ha inclós abans */&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#define TAD_HORA_H&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per altra banda, com a darrera línia afegeix la següent&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#endif    &lt;/span&gt;&lt;span class="cm"&gt;/* ve de ifndef TAD_HORA_H */&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aquestes línies, com diu el comentari, permeten que només es pugui
incloure un cop. Més endavant veurem què vol dir això.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;després de la capçalera de &lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt;, i abans d'altres
&lt;em&gt;includes&lt;/em&gt;, afegeix la línia&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include &amp;quot;tad_hora.h&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que va amb cometes dobles en comptes dels habituals angles.&lt;/p&gt;
&lt;p&gt;Com que en aquest fitxer hi apareix codi que fa servir, per
exemple, el &lt;tt class="docutils literal"&gt;printf()&lt;/tt&gt;, et caldrà afegir els &lt;em&gt;includes&lt;/em&gt;
necessaris.&lt;/p&gt;
&lt;p&gt;Nota també que aquest fitxer no té funció &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;compila &lt;tt class="docutils literal"&gt;tad_hora.h&lt;/tt&gt; i corregeix els errors que hi puguin haver&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;gcc -Wall -c tad_hora.h
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que fem servir l'opció &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-c&lt;/span&gt;&lt;/tt&gt; que indica a &lt;tt class="docutils literal"&gt;gcc&lt;/tt&gt; que
únicament intenti compilar (sense enllaçar).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;compila &lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt; i corregeix els errors que hi puguin haver&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;gcc -Wall -c tad_hora.c
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Sí, novament no volem enllaçar.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;inclou la capçalera del tad hora en el fitxer amb el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;
(suposem que es diu «usa_hora.c») i compila'l de la següent manera:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;gcc -Wall tad_hora.c usa_hora.c
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;executa el fitxer resultant de la manera habitual.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;El resultat quedaria representat pel diagrama següent:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="El TAD Hora" src="http://apuntstecnics.herokuapp.com/images/prg016.img001.tad_hora.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-canvi-implementacio-del-tad-hora"&gt;
&lt;h3&gt;Exercici 6. Canvi implementació del tad Hora&lt;/h3&gt;
&lt;p&gt;Comprovem ara que podem canviar la implementació interna d'un tipus
abstracte sense afectar els programes que el fan servir.&lt;/p&gt;
&lt;p&gt;En concret, modifica el tipus de dades Hora de manera que ara tingui
el següent aspecte:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt; &lt;span class="cm"&gt;/* codifica hores, minuts i segons a cada posició */&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Modifica el que calgui a &lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt;, torna a compilar i executar
&lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt; sense modificar el seu codi.&lt;/p&gt;
&lt;p&gt;Fixa't el que acabes de fer: has modificat completament la
implementació de Hora però no t'ha calgut modificar el codi que la
fa servir.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-el-tad-data"&gt;
&lt;h3&gt;Exercici 10**. El TAD Data&lt;/h3&gt;
&lt;p&gt;Defineix el TAD Data amb operacions similars a les del TAD Hora. Crea
un &lt;tt class="docutils literal"&gt;UsaData.c&lt;/tt&gt; similar al &lt;tt class="docutils literal"&gt;UsaHora.c&lt;/tt&gt;. Probablement ja el tens fet
en un exercici anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-11-el-tad-datahora"&gt;
&lt;h3&gt;Exercici 11*. El TAD DataHora&lt;/h3&gt;
&lt;p&gt;Defineix ara el TAD DataHora.&lt;/p&gt;
&lt;p&gt;Fixa't que el nou TAD oferirà subrutines que simplement cridaran a
subrutines dels TADs que conté. Per exemple,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;obte_hores_de_datahora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DataHora&lt;/span&gt; &lt;span class="n"&gt;dh&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;obte_hores_de_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dh&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Posa especial compte en que DataHora &lt;strong&gt;no&lt;/strong&gt; accedeixi directament a
les implementacions de Data ni d'Hora. Recorda que aquestes podrien
canviar i no volem haver de modificar més codi de l'imprescindible.&lt;/p&gt;
&lt;p&gt;Afegeix un codi &lt;tt class="docutils literal"&gt;usa_datahora.c&lt;/tt&gt; que faci quelcom similar a
&lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt;. Probablement ja el tens fet en un exercici anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="la-utilitat-make"&gt;
&lt;h2&gt;La utilitat make **&lt;/h2&gt;
&lt;p&gt;Quan el nombre de fitxers creix, apareix la necessitat de simplificar
la seva gestió. Per exemple, per generar l'executable, fins ara només
ens ha calgut fer servir &lt;tt class="docutils literal"&gt;gcc&lt;/tt&gt; tot indicant-li no més de tres
fitxers font a compilar. Què passa però quan en comptes de tres en
tenim trenta, o trescents...?&lt;/p&gt;
&lt;p&gt;Hi ha una utilitat molt habitual en el desenvolupament en C anomenada
&lt;tt class="docutils literal"&gt;make&lt;/tt&gt;. De fet, &lt;tt class="docutils literal"&gt;make&lt;/tt&gt; pot ser utilitzada per gestionar arxius que
tinguin algun tipus de dependència entre si.&lt;/p&gt;
&lt;p&gt;Si fem &lt;tt class="docutils literal"&gt;man make&lt;/tt&gt; , ens dirà que es tracta d'una utilitat per a
mantenir un grup de programes, i que el seu propòsit és determinar
automàticament quines peces d'un programa gran necessiten ser
recompilades i llençar les comandes per recompilar-les.&lt;/p&gt;
&lt;p&gt;Un fitxer anomenat &lt;tt class="docutils literal"&gt;Makefile&lt;/tt&gt; defineix les dependències, de manera
que només amb &lt;tt class="docutils literal"&gt;make&lt;/tt&gt; podem tenir l'executable apunt.&lt;/p&gt;
&lt;p&gt;Veiem un petit exemple amb el programa &lt;tt class="docutils literal"&gt;usa_hora&lt;/tt&gt;. Segueix les
passes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Crea una nova carpeta i copia-hi els fitxers &lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt;,
&lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;tad_hora.h&lt;/tt&gt; desenvolupats a l'exercici 7.&lt;/li&gt;
&lt;li&gt;Crea un fitxer amb el nom &lt;tt class="docutils literal"&gt;Makefile&lt;/tt&gt; dins del nou directori i
afegeix el següent contingut. Atenció: assegura't que fas servir un
tabulador per indentar&lt;/li&gt;
&lt;/ol&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;# Makefile: usa_hora&lt;/span&gt;
&lt;span class="cp"&gt;# Descr:    Construeix l&amp;#39;aplicació usa_hora&lt;/span&gt;

&lt;span class="n"&gt;cflags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Wall&lt;/span&gt;
&lt;span class="n"&gt;cc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gcc&lt;/span&gt;

&lt;span class="nl"&gt;all:&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;

&lt;span class="nl"&gt;usa_hora:&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cflags&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;

&lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cflags&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;

&lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cflags&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;

&lt;span class="nl"&gt;clean:&lt;/span&gt;
    &lt;span class="n"&gt;rm&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;*~&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gz&lt;/span&gt;

&lt;span class="nl"&gt;tar:&lt;/span&gt;
    &lt;span class="n"&gt;tar&lt;/span&gt; &lt;span class="n"&gt;czvf&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gz&lt;/span&gt; &lt;span class="n"&gt;Makefile&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Ara escriu a consola&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;make
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Amb aquesta comanda es llençaran les següents comandes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;gcc -Wall -c usa_hora.c
gcc -Wall -c tad_hora.c
gcc -Wall usa_hora.o tad_hora.o -o usa_hora
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si tornem a executar &lt;tt class="docutils literal"&gt;make&lt;/tt&gt; ens dirà quelcom similar a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;make: Nothing to be &lt;span class="k"&gt;done for&lt;/span&gt; &lt;span class="sb"&gt;`&lt;/span&gt;all&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;.
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ara modifiquem &lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt;, o simplement el podem &amp;quot;tocar&amp;quot; amb&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;touch usa_hora.c
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si tornem a fer &lt;tt class="docutils literal"&gt;make&lt;/tt&gt; trobarem que només compila &lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt;
però no &lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt; ja que ha detectat que el seu font no ha estat
modificat&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;make
gcc -Wall -c usa_hora.c
gcc -Wall usa_hora.o tad_hora.o -o usa_hora
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;D'una manera coherent, &lt;tt class="docutils literal"&gt;make&lt;/tt&gt; compilarà el que correspongui depenent
dels fitxers modificats:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;touch tad_hora.c
&lt;span class="nv"&gt;$ &lt;/span&gt;make
gcc -Wall -c tad_hora.c
gcc -Wall usa_hora.o tad_hora.o -o usa_hora
&lt;span class="nv"&gt;$ &lt;/span&gt;touch tad_hora.h
&lt;span class="nv"&gt;$ &lt;/span&gt;make
gcc -Wall -c usa_hora.c
gcc -Wall -c tad_hora.c
gcc -Wall usa_hora.o tad_hora.o -o usa_hora
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Podem llegir el nostre fitxer &lt;tt class="docutils literal"&gt;Makefile&lt;/tt&gt; de la següent manera:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;línies 1 i 2: capçalera descriptiva (sí aquí també cal!)&lt;/li&gt;
&lt;li&gt;línies 4 i 5: definició de variables. Per exemple, només ens caldria
canviar els valors assignats a &lt;tt class="docutils literal"&gt;cflags&lt;/tt&gt; per a definir noves
opcions de compilació.&lt;/li&gt;
&lt;li&gt;línia 7: definició de l'objectiu principal &lt;tt class="docutils literal"&gt;all&lt;/tt&gt; que demana que
estigui disponible el fitxer &lt;tt class="docutils literal"&gt;usa_hora&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;línia 9: per a aconseguir el fitxer &lt;tt class="docutils literal"&gt;usa_hora&lt;/tt&gt; ens cal obtenir els
fitxers &lt;tt class="docutils literal"&gt;usa_hora.o&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;tad_hora.o&lt;/tt&gt;. Si &lt;tt class="docutils literal"&gt;usa_hora&lt;/tt&gt; no existeix
o bé presenta una data &lt;strong&gt;anterior&lt;/strong&gt; a la d'algun d'aquests dos
fitxers, llavors s'executarà la comanda de la línia 10 (indentada
amb un tabulador) que en substituir les variables pels seus valors,
es traduiria per&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;gcc -Wall usa_hora.o tad_hora.o -o usa_hora
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;línies 11 i 14: indiquen com aconseguir els subobjectius requerits
per l'objectiu &lt;tt class="docutils literal"&gt;usa_hora&lt;/tt&gt;. Bàsicament requereix que els fitxers
objecte (&lt;tt class="docutils literal"&gt;.o&lt;/tt&gt;)tinguin una data posterior als fitxers font (&lt;tt class="docutils literal"&gt;.c&lt;/tt&gt;
i &lt;tt class="docutils literal"&gt;.h&lt;/tt&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;línies 16 i 19: defineixen objectius independents al principal
(&lt;tt class="docutils literal"&gt;all&lt;/tt&gt;)&lt;/p&gt;
&lt;p&gt;La utilitat &lt;tt class="docutils literal"&gt;make&lt;/tt&gt; ens permet disposar d'altres &lt;em&gt;objectius&lt;/em&gt; a
banda del principal. Per exemple, el nostre &lt;tt class="docutils literal"&gt;Makefile&lt;/tt&gt; disposa de
l'objectiu &lt;tt class="docutils literal"&gt;clean&lt;/tt&gt;. Si l'executem ens eliminarà tots els fitxers
temporals&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;  &lt;span class="nv"&gt;$ &lt;/span&gt;make clean

També disposa de l&lt;span class="s1"&gt;&amp;#39;opció tar que genera un paquet amb tots els&lt;/span&gt;
&lt;span class="s1"&gt;fitxers font de l&amp;#39;&lt;/span&gt;aplicació
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;make tar
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Hi ha moltes altres possibilitats amb el &lt;tt class="docutils literal"&gt;make&lt;/tt&gt;.  Amb el que hem
vist, però, tenim una primera idea de les possibilitats de l'eina. Si
tens interès en aprofundir-hi més, pots consultar per exemple el
&lt;a class="reference external" href="http://www.gnu.org/software/make/manual/make.html"&gt;manual oficial de make&lt;/a&gt;.&lt;/p&gt;
&lt;div class="section" id="exercici-7-makefile-pel-tad-punt"&gt;
&lt;h3&gt;Exercici 7. Makefile pel TAD punt&lt;/h3&gt;
&lt;p&gt;Desenvolupa el TAD d'un punt que permeti manipular punts en dos
dimensions (x, y). El TAD oferirà operacions per a assignar i obtenir
cada coordenada i sumar dos punts deixant el resultat en un tercer.
Crea un &lt;tt class="docutils literal"&gt;usa_punt.c&lt;/tt&gt; que creï dos punts amb valors demanats a
l'usuari i mostri el resultat de sumar-los.&lt;/p&gt;
&lt;p&gt;Finalment, crea un Makefile adequat.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-13-makefile-pel-tad-data"&gt;
&lt;h3&gt;Exercici 13*. Makefile pel TAD Data&lt;/h3&gt;
&lt;p&gt;Desenvolupa un &lt;tt class="docutils literal"&gt;Makefile&lt;/tt&gt; adequat pel TAD Data i el programa
&lt;tt class="docutils literal"&gt;usa_data&lt;/tt&gt; de l'exercici 10.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-14-makefile-pel-tad-datahora"&gt;
&lt;h3&gt;Exercici 14*. Makefile pel TAD DataHora&lt;/h3&gt;
&lt;p&gt;Desenvolupa un &lt;tt class="docutils literal"&gt;Makefile&lt;/tt&gt; adequat pel TAD DataHora i el programa
&lt;tt class="docutils literal"&gt;usa_datahora&lt;/tt&gt; de l'exercici 11.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</summary><category term="C"></category></entry></feed>