<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Apunts tècnics</title><link>http://apuntstecnics.herokuapp.com/</link><description></description><atom:link href="http://apuntstecnics.herokuapp.com/feeds/moises-gomez-giron.rss.xml" rel="self"></atom:link><lastBuildDate>Sat, 14 Mar 2015 21:19:09 +0100</lastBuildDate><item><title>SGBD Objecte-Relacional</title><link>http://apuntstecnics.herokuapp.com/sgbd-objecte-relacional.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquests continguts ofereixen una introducció als Sistemes Gestors de
Bases de Dades Objecte-Relacional.&lt;/p&gt;
&lt;p&gt;Hi trobaràs la definició i contextualització d'aquests tipus de SGBDs.&lt;/p&gt;
&lt;p&gt;Al final de l'entrada, et presento el SGBD que farem servir en aquest
curs.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="sgbd-que"&gt;
&lt;h2&gt;SGBD-&lt;em&gt;què?&lt;/em&gt;&lt;/h2&gt;
&lt;p&gt;Veiem algunes definicions com a recordatori:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;em&gt;base de dades&lt;/em&gt; és una col·lecció de dades organitzada d'una manera
coherent, de manera que pugui ser accedida per una aplicació.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;un &lt;em&gt;sistema de gestió de bases de dades&lt;/em&gt; (SGBD) és una aplicació que
permet l'administració de bases de dades, de l'organització de les
dades i de les dades pròpiament.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Una &lt;em&gt;transacció&lt;/em&gt; és una operació unitària sobre una base de dades,
tractada d'una manera coherent, fiable i independent d'altres
transaccions. Tot i que pot consistir en diverses operacions
individuals, la transacció ha de ser realitzada completament o bé no
realitzada. És a dir, no pot ser executada parcialment.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;em&gt;ACID&lt;/em&gt;, acrònim anglès de les paraules &lt;em&gt;Atomicity&lt;/em&gt;, &lt;em&gt;Consistency&lt;/em&gt;,
&lt;em&gt;Isolation&lt;/em&gt; i &lt;em&gt;Durability&lt;/em&gt; implica un conjunt de propietats que ha
de complir un SGBD per garantir la fiabilitat de les transaccions.&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Atomicitat: assegura que una transacció és un &lt;em&gt;tot o res&lt;/em&gt;. Una
transacció o bé finalitza correctament i confirma o bé no deixa
cap rastre de la seva execució.&lt;/li&gt;
&lt;li&gt;Consistència: garanteix que l'execució de qualsevol transacció
no violarà cap les regles definides a la base de dades.&lt;/li&gt;
&lt;li&gt;Aïllament: el resultat d'executar transaccions de manera
concurrent ha de ser el mateix que si l'execució hagués estat
seqüencial.&lt;/li&gt;
&lt;li&gt;Durabilitat: un cop confirmada una transacció, aquesta propietat
ens assegura que el seu resultat es mantindrà fins i tot en el
cas de fallada del sistema.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El &lt;em&gt;model relacional&lt;/em&gt; és una manera d'estructurar la informació en
bases de dades basada en lògica de primer ordre, un sistema
descriptiu formal. L'estructura es basa en &lt;em&gt;tuples&lt;/em&gt; (llistes
ordenades d'elements o &lt;em&gt;camps&lt;/em&gt;) agrupades en relacions o &lt;em&gt;taules&lt;/em&gt;.
Sovint ens referim a les tuples com &lt;em&gt;registres&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Direm SGBDR a un SGBD que gestiona bases de dades definides fent
servir el model relacional. De fet, en l'actualitat és tan comú que
es respecti aquest model, que dient SGBD&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Es coneix com a &lt;em&gt;normalització&lt;/em&gt; al procés d'organitzar els camps i
taules d'una base de dades de manera que es minimitzi redundàncies
i dependències. Tot i que hi ha més, es considera que una base de
dades està normalitzada si acompleix les primeres tres formes
normals:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;1FN: es diu que una taula està en primera forma normal si
disposa d'una clau primària no nula que permet identificar cada
registre &lt;a class="footnote-reference" href="#nfmes" id="id1"&gt;[1]&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;2FN: tots els camps de un registre que no són clau depenen de la
clau primària en el seu conjunt. És a dir, que no depenen d'altres
camps que no siguin tots els que formen la clau primària.&lt;/li&gt;
&lt;li&gt;3FN: tot camp que no sigui clau no ha dependre de cap altre camp
a banda dels que formen la clau primària.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Tot i que un SGBDR és suficient per a moltes (potser &lt;em&gt;la majoria de
les&lt;/em&gt;) necessitats de gestió de dades que puguin tenir les nostres
aplicacions, presenta algunes febleses.&lt;/p&gt;
&lt;p&gt;Una de les crítiques freqüents que trobarem és: en normalitzar, sovint
ens trobem forçats a crear taules que no es corresponen amb entitats
del món real. Per exemple, pensa en com cal implementar les relacions
M:N.&lt;/p&gt;
&lt;p&gt;Però potser la limitació més &lt;em&gt;incòmoda&lt;/em&gt; del model relacional és la
dificultat que ofereix a comunicar-se amb aplicacions basades en el
paradigma &amp;quot;de moda&amp;quot;: l'orientació a objectes. És el que es coneix com
a &lt;em&gt;bretxa&lt;/em&gt; o &lt;em&gt;impedance mismatch&lt;/em&gt; entre els dos models. Bàsicament:&lt;/p&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="53%" /&gt;
&lt;col width="47%" /&gt;
&lt;/colgroup&gt;
&lt;thead valign="bottom"&gt;
&lt;tr&gt;&lt;th class="head"&gt;El model Orientat a Objectes&lt;/th&gt;
&lt;th class="head"&gt;El model relacional&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;transitori (&lt;em&gt;transient&lt;/em&gt;)&lt;/td&gt;
&lt;td&gt;persistent&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;p class="first"&gt;classes&lt;/p&gt;
&lt;p class="last"&gt;inclou comportament&lt;/p&gt;
&lt;/td&gt;
&lt;td&gt;&lt;p class="first"&gt;taules&lt;/p&gt;
&lt;p class="last"&gt;només dades&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;p class="first"&gt;jerarquia de classes&lt;/p&gt;
&lt;p class="last"&gt;inclou herència&lt;/p&gt;
&lt;/td&gt;
&lt;td&gt;&lt;p class="first"&gt;esquema de la BD&lt;/p&gt;
&lt;p class="last"&gt;inclou claus foranes&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;herència&lt;/td&gt;
&lt;td&gt;!&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;propietats / atributs&lt;/td&gt;
&lt;td&gt;columnes / camps&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;instància&lt;/td&gt;
&lt;td&gt;tuples / files / registres&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;atribut d'instància&lt;/td&gt;
&lt;td&gt;camp&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;identitat implícita (punter)&lt;/td&gt;
&lt;td&gt;identitat explícita (clau primària)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;referències&lt;/td&gt;
&lt;td&gt;claus foranes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;referències unidireccionals&lt;/td&gt;
&lt;td&gt;referències bidireccionals&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;amb ordre (seqüèncial)&lt;/td&gt;
&lt;td&gt;sense ordre&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;missatges / interfície&lt;/td&gt;
&lt;td&gt;!&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;centrat en el comportament&lt;/td&gt;
&lt;td&gt;centrat en les dades&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;navegació seguint referències&lt;/td&gt;
&lt;td&gt;operació en conjunt&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;agrupació basada en el comportament&lt;/td&gt;
&lt;td&gt;agrupació basada en les dades&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;mètodes&lt;/td&gt;
&lt;td&gt;&lt;em&gt;stored procedures&lt;/em&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;dades i comportament fortament acoblats&lt;/td&gt;
&lt;td&gt;&lt;em&gt;triggers&lt;/em&gt; i restriccions&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;ocultació de dades, encapsulació&lt;/td&gt;
&lt;td&gt;!&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;A partir d'aquesta bretxa, es van dissenyar bases de dades orientades
a objecte per incorporar un mecanisme de persistència a les
aplicacions orientades a objecte.&lt;/p&gt;
&lt;p&gt;Per diferents raons, els SGBDOOs (SGBD Orientats a Objectes) no han
acabat de quallar en la industria del desenvolupament. Segurament es
explicable pel fet que el model relacional tingui una sòlida base
matemàtica i, probablement, la disponibilitat del llenguatge SQL per
realitzar consultes amb independència del llenguatge de programació.&lt;/p&gt;
&lt;p&gt;Amb tot, les necessitats d'afegir funcionalitats orientades a objecte
es manté. Així apareix el model &lt;em&gt;objecte-relacional&lt;/em&gt; com un pas
intermedi entre els SGBDR i els SGBDOOs.&lt;/p&gt;
&lt;p&gt;Podem veure el model objecte-relacional com una
extensió del model relacional amb conceptes del paradigma d'orientació
a objectes.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Relació entre el model relacional i l'objecte relacional" src="http://apuntstecnics.herokuapp.com/images/postgresql001.img001.ordbms_uml.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Un gestor de bases de dades objecte-relacional (SGBDOR) és una
extensió d'un SGBDR amb el suport de les funcionalitats d'orientació a
objectes. Algunes d'aquestes funcionalitats són: suport a tipus
definits per l'usuari (&lt;em&gt;UDT&lt;/em&gt;), tipus complexos (agregats),
col·leccions (arrays) i herència.&lt;/p&gt;
&lt;p&gt;Michael Stonebraker en el seu llibre &amp;quot;Object-Relational DBMSs: The
Next Great Wave&amp;quot; ens ofereix aquesta taula per aclarir els conceptes:&lt;/p&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="37%" /&gt;
&lt;col width="31%" /&gt;
&lt;col width="33%" /&gt;
&lt;/colgroup&gt;
&lt;thead valign="bottom"&gt;
&lt;tr&gt;&lt;th class="head"&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class="head"&gt;dades bàsiques&lt;/th&gt;
&lt;th class="head"&gt;dades complexes&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;&lt;em&gt;amb consultes&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;SGBDR&lt;/td&gt;
&lt;td&gt;SGBDOR&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;em&gt;sense consultes&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;SF&lt;/td&gt;
&lt;td&gt;SGBDOO&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Al mercat hi ha marques amb prou prestigi com ara Oracle, PostGreSQL,
Informix i Microsoft SQL Server, que afirmen que els seus SGBDs són
SGBDORs. Amb tot, les funcionalitats OR no han tingut, de moment, una
excessiva penetració en el desenvolupament. Una de les raons, de ben
segur, és la falta de consens entre els fabricants a l'hora de
desenvolupar aquestes funcionalitats, si tenim en compte que sovint
les aplicacions cerquen independència del SGBD.&lt;/p&gt;
&lt;p&gt;Amb tot, es d'esperar que amb el temps, aquesta tecnologia acabi
madurant fins un estat en el que els principals fabricants es posin
d'acord com (més o menys) ja ho van fer en el seu dia amb la
implementació del ara estàndard SQL.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="postgresql"&gt;
&lt;h2&gt;PostGreSQL&lt;/h2&gt;
&lt;p&gt;De entre els SGBDORs que hi ha al mercat, treballarem amb PostGreSQL.&lt;/p&gt;
&lt;p&gt;Com diuen de si mateixos a la seva &lt;a class="reference external" href="http://www.postgresql.org/docs/9.1/static/intro-whatis.html"&gt;documentació&lt;/a&gt;,
PostGreSQL és SGBDOR de codi obert que implementa una gran part de
l'estàndard SQL i ofereix moltes funcionalitats, com ara: consultes
complexes, claus foranies, triggers, vistes, integritat transaccional,
control de multiversions concurrents... PostGreSQL pot ser ampliat per
l'usuari de diferents maneres com per exemple afegint tipus de dades,
funcions, operadors, mètodes d'indexació, llenguatges procedurals...
Gràcies a la seva llicència, pot ser usat, modificat i distribuït per
tothom sense cap cost, per qualsevol propòsit (comercial inclòs). A
més, disposa d'una extensa i cuidada documentació accessible des de la
seva web &lt;a class="reference external" href="http://www.postgresql.org/"&gt;postgresql.org&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="nfmes" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;La formulació original incloïa més característiques com
ara l'atomicitat dels camps. Com que hi ha certa controvèrsia amb
les interpretacions, aquí obviarem aquests detalls.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 21:19:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:sgbd-objecte-relacional.html</guid><category>PostGreSQL</category></item><item><title>Instal·lació de PostGreSQL</title><link>http://apuntstecnics.herokuapp.com/installacio-de-postgresql.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquesta guia descriu, pas a pas, una instal·lació bàsica del Sistema
Gestor de Bases de Dades (SGBD) &lt;em&gt;PostGreSQL&lt;/em&gt; sobre una màquina virtual
amb un servidor Ubuntu.&lt;/p&gt;
&lt;p&gt;Es recomana la instal·lació del servidor de &lt;em&gt;PostGreSQL&lt;/em&gt; a una màquina
independent de la màquina de treball però connectada a aquesta.
D'aquesta manera les proves que es realitzin s'acostaran més a una
manera de treballar més &lt;em&gt;real&lt;/em&gt;.  Per simplicitat/economia, es proposa
que el servidor sigui una màquina virtual.&lt;/p&gt;
&lt;p&gt;En aquest document suposarà que disposes d'una màquina Ubuntu que
hostatjarà la màquina virtual d'un servidor Ubuntu gestionada per
l'aplicació de virtualització &lt;a class="reference external" href="https://www.virtualbox.org/"&gt;*VirtualBox*&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Pel cas que no coneguis l'aplicació &lt;em&gt;VirtualBox&lt;/em&gt; o/i com crear una
màquina virtual, aquest document et donarà unes breus indicacions per
a aconseguir configurar quelcom usable.&lt;/p&gt;
&lt;p&gt;En el cas que prefereixis fer servir algun altre sistema operatiu o bé
una aplicació de virtualització diferent, no hauries de tenir gaires
problemes per a seguir el principal objectiu d'aquest document: la
instal·lació d'un servidor &lt;em&gt;PostGreSQL&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="creacio-de-la-maquina-virtual"&gt;
&lt;h2&gt;Creació de la màquina virtual&lt;/h2&gt;
&lt;p&gt;A continuació es presenta una breu guia per a crear una màquina
virtual amb el servidor des d'un equip Ubuntu.&lt;/p&gt;
&lt;div class="section" id="installacio-del-virtualbox"&gt;
&lt;h3&gt;Instal·lació del VirtualBox&lt;/h3&gt;
&lt;p&gt;A la pàgina &lt;a class="reference external" href="https://www.virtualbox.org/wiki/Linux_Downloads"&gt;Download VirtualBox for Linux Hosts&lt;/a&gt; hi trobaràs
diferents maneres d'instal·lar el &lt;em&gt;VirtualBox&lt;/em&gt; a una màquina GNU/Linux.&lt;/p&gt;
&lt;p&gt;Instal·la l'aplicació a la màquina on realitzaràs les pràctiques
d'aquest document (a partir d'ara &lt;em&gt;amfitrió&lt;/em&gt;). Si l'amfitrió és un
Ubuntu 12.04, les instruccions següents t'ho permetran fàcilment:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Afegeix el repositori&lt;/p&gt;
&lt;p&gt;Afegeix la següent línia al final del fitxer
&lt;tt class="docutils literal"&gt;/etc/apt/sources.list&lt;/tt&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;deb http://download.virtualbox.org/virtualbox/debian precise contrib
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Registra la clau pública d'Oracle:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;wget -q http://download.virtualbox.org/virtualbox/debian/oracle_vbox.asc -O- &lt;span class="p"&gt;|&lt;/span&gt; sudo apt-key add -
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Actualitza la base de dades de apt i instal·la l'aplicació:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get update
&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get install virtualbox-4.3
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Arrenca l'aplicació:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;VirtualBox &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="creacio-del-servidor"&gt;
&lt;h3&gt;Creació del servidor&lt;/h3&gt;
&lt;p&gt;A continuació trobaràs unes instruccions per a crear una màquina
virtual bàsica i instal·lar-li un servidor d'Ubuntu. Si saps el que
estàs fent, hauries de poder realitzar-ho d'altres maneres sense que
això afecti l'objectiu d'aquesta lliçó.&lt;/p&gt;
&lt;p&gt;Ara crearem ara una màquina virtual amb un &lt;em&gt;Ubuntu Server&lt;/em&gt;. Segueix
les passes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Descarrega la imatge amb l'instal·lador del servidor d'Ubuntu.&lt;/p&gt;
&lt;p&gt;Descarrega la imatge d'una versió del servidor d'Ubuntu a la pàgina
&lt;a class="reference external" href="http://www.ubuntu.com/download/server"&gt;Download Ubuntu Server&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Crea una nova màquina virtual&lt;/p&gt;
&lt;p&gt;Arrenca &lt;em&gt;VirtualBox&lt;/em&gt; i selecciona &lt;em&gt;Màquina-&amp;gt;Nova&lt;/em&gt; (o &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;ctrl-N&lt;/span&gt;&lt;/tt&gt;)&lt;/p&gt;
&lt;p&gt;Indica un nom per la màquina (ex. &lt;tt class="docutils literal"&gt;Ubuntu PostGreSQL&lt;/tt&gt;) de tipus
&lt;tt class="docutils literal"&gt;Linux&lt;/tt&gt; i versió &lt;tt class="docutils literal"&gt;Ubuntu&lt;/tt&gt;. Reserva la memòria recomanada i crea
un nou disc virtual de tipus VDI, ubicat de forma dinàmica i amb la
ubicació i mida que se't proposin. És a dir, accepta tots els
valors que et proposen per defecte.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Enllaça la imatge del servidor amb la nova màquina virtual&lt;/p&gt;
&lt;p&gt;Per fer-ho, segueix &lt;em&gt;Màquina-&amp;gt;Paràmetres-&amp;gt;Emmagatzematge&lt;/em&gt;, clica
sobre la icona del CD a l'àrbre d'emmagatzematge i tot seguit a la
mateixa icona però a la secció d'atributs. Al desplegable,
selecciona la opció de &lt;em&gt;Selecciona una imatge de CD/DVD virtual&lt;/em&gt; i
navega fins a seleccionar el fitxer amb la imatge que t'has
descarregat.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Arrenca la màquina i instal·la el sistema operatiu.&lt;/p&gt;
&lt;p&gt;Segueix &lt;em&gt;Màquina-&amp;gt;Inicia&lt;/em&gt; i segueix les instruccions per instal·lar
el servidor d'Ubuntu.&lt;/p&gt;
&lt;p&gt;En cas que no tinguis familiaritat amb la instal·lació no gràfica
d'un sistema operatiu com l'Ubuntu Server, simplement escull idioma
&lt;a class="footnote-reference" href="#idiomaangles" id="id1"&gt;[1]&lt;/a&gt; i selecciona &lt;em&gt;Install Ububtu Server&lt;/em&gt;. Selecciona
els valors que consideris adequats (el del teclat potser voldràs
que te l'intenti detectar l'instal·lador)&lt;/p&gt;
&lt;p&gt;A continuació creat un usuari &lt;em&gt;sudoer&lt;/em&gt; i posa-li una contrasenya
que puguis recordar. Aquí suposarem &lt;em&gt;usuarivm&lt;/em&gt;. També et caldrà
definir un nom de la màquina.  Aquí suposarem &lt;em&gt;vm&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Continua amb la resta d'opcions fins la creació de les particions.
Normalment el valor proposat hauria de ser adequat. Amb la secció
de creació de particions escull la primera opció &lt;em&gt;Guided - use
entire disk&lt;/em&gt; (sense LVM) i accepta la taula de particions que
t'ofereixi.&lt;/p&gt;
&lt;p&gt;Ara espera a que s'instal·li el sistema operatiu.&lt;/p&gt;
&lt;p&gt;Hi haurà algunes preguntes que requeriran de la teva interacció. La
major part de les vegades podràs seleccionar l'opció per defecte
fins que arribis a la instal·lació de paquets de la secció
&lt;em&gt;Software selection&lt;/em&gt;. Si et vols evitar la instal·lació posterior
del servidor de &lt;em&gt;PostGreSQL&lt;/em&gt; i del de SSH (per exemple per fer login
remotament), pots aprofitar i marcar &lt;em&gt;OpenSSH Server&lt;/em&gt; i &lt;em&gt;PostgreSQL
database&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;No és imprescindible instal·lar el servidor de ssh, però pot
resultar-te molt més còmode establir sessió des d'una consola a
l'amfitrió que teclejar directament a la màquina virtual. Com tot,
va a gustos.  Si no vas marcar el paquet OpenSSH, però t'interessa
més endavant, el podràs instal·lar amb un:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get install openssh-server
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Un cop instal·lat el sistema operatiu, torna a arrencar la màquina. Per exemple, amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;sudo shutdown -r now
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Entra amb el teu usuari &lt;em&gt;sudoer&lt;/em&gt; (si has seguit el nom d'aquesta
guia, serà &lt;em&gt;usuarivm&lt;/em&gt;) i actualitza (si tens temps) el programari
amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get uptdate
usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get upgrade
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Canvia la connexió de la xarxa&lt;/p&gt;
&lt;p&gt;El mode de connexió NAT ens permet accedir a l'exterior (internet)
des de la màquina virtual. Ens limita, però, l'accés des de la
màquina host al servidor: precisament el que més ens interessa.&lt;/p&gt;
&lt;p&gt;Per aquesta raó, canviarem el tipus de connexió a un altre que ens
ajudi al nostre objectiu. Escollirem el mode &lt;em&gt;Adaptador de només
amfitrió&lt;/em&gt; de manera que l'accés a la màquina virtual quedi
restringit a la nostra màquina i altres possibles màquines virtuals
que s'executin sobre aquesta.&lt;/p&gt;
&lt;p&gt;Per fer-ho, segueix les següents passes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;finalitza l'execució de la màquina virtual&lt;/li&gt;
&lt;li&gt;des de la finestra principal de &lt;em&gt;VirtualBox&lt;/em&gt;, selecciona
&lt;em&gt;Fitxer-&amp;gt;Preferències-&amp;gt;Xarxa-&amp;gt;Xarxes de només amfitrió&lt;/em&gt; i fes
clic al botó lateral (dreta) que apareix amb un '+' (amb
llegenda &lt;em&gt;Âfegeix xarxa de només anfitrió&lt;/em&gt;). Això t'incorporarà
&lt;em&gt;vboxnet0&lt;/em&gt;, un servidor DHCP que ofereix per defecte
&lt;em&gt;VirtualBox&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;des de la finestra principal de &lt;em&gt;VirtualBox&lt;/em&gt;, selecciona
&lt;em&gt;Màquina-&amp;gt;Paràmetres-&amp;gt;Xarxa&lt;/em&gt; i a
&lt;em&gt;Connectat a:&lt;/em&gt; canvia el valor de NAT per &lt;em&gt;Adaptador de només
amfitrió&lt;/em&gt; &lt;a class="footnote-reference" href="#adaptadorpont" id="id2"&gt;[2]&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Cal tenir en compte que en arrencar de nou la màquina virtual
haurem perdut l'accés cap a l'exterior. Si et cal per algun motiu,
pots provar, per exemple, d'assignar a la màquina virtual una
interfície de xarxa addicional amb NAT &lt;a class="footnote-reference" href="#config2interf" id="id3"&gt;[3]&lt;/a&gt;. Pels
objectius d'aquest document, no serà necessari.&lt;/p&gt;
&lt;p&gt;Ara, pots consultar la informació de xarxa a la màquina virtual:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;ifconfig eth0
eth0      Link encap:Ethernet  HWaddr 08:00:27:f8:47:05
          inet addr:192.168.56.101  Bcast:192.168.56.255  Mask:255.255.255.0
          inet6 addr: fe80::a00:27ff:fef8:4705/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:48 errors:0 dropped:0 overruns:0 frame:0
          TX packets:46 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:8041 &lt;span class="o"&gt;(&lt;/span&gt;8.0 KB&lt;span class="o"&gt;)&lt;/span&gt;  TX bytes:6805 &lt;span class="o"&gt;(&lt;/span&gt;6.8 KB&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;També des de la màquina amfitrió, on comprovarem que &lt;em&gt;VirtualBox&lt;/em&gt; ens
ha creat una nova interfície anomenada &lt;em&gt;vboxnet0&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;ifconfig vboxnet0
vboxnet0  Link encap:Ethernet  HWaddr 0a:00:27:00:00:00
          inet addr:192.168.56.1  Bcast:192.168.56.255  Mask:255.255.255.0
          inet6 addr: fe80::800:27ff:fe00:0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:68 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 &lt;span class="o"&gt;(&lt;/span&gt;0.0 B&lt;span class="o"&gt;)&lt;/span&gt;  TX bytes:11577 &lt;span class="o"&gt;(&lt;/span&gt;11.5 KB&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Podem ara, per exemple, connectar-nos a la màquina virtual amb una
sessió &lt;tt class="docutils literal"&gt;ssh&lt;/tt&gt; des d'una consola de l'amfitrió:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;ssh usuarivm@192.168.56.101
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id4"&gt;
&lt;h2&gt;Instal·lació de PostGreSQL&lt;/h2&gt;
&lt;p&gt;Aquesta secció només considera-la en el cas que no hagis ja instal·lat
el &lt;em&gt;PostGreSQL&lt;/em&gt; com una de les col·leccions d'aplicacions durant la
instal·lació del SO.&lt;/p&gt;
&lt;p&gt;La instal·lació del servidor de &lt;em&gt;PostGreSQL&lt;/em&gt; en la configuració
proposada no podria ser gaire més senzilla. Assegura't però que ho fas
a la màquina virtual i no a la amfitriona! :&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get install postgresql
&lt;/pre&gt;&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Segurament no t'instal·larà la darrera versió de &lt;em&gt;PostGreSQL&lt;/em&gt;, però al
menys serà una estable i suficient pels objectius d'aquesta lliçó.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="configuracio-de-postgresql"&gt;
&lt;h2&gt;Configuració de PostGreSQL&lt;/h2&gt;
&lt;p&gt;En instal·lar &lt;em&gt;PostGreSQL&lt;/em&gt;, ens ha creat usuari &lt;em&gt;postgres&lt;/em&gt; i la base
de dades &lt;em&gt;template1&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;En cas que sigui necessari, canviarem la contrasenya de &lt;em&gt;postgres&lt;/em&gt;
amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;sudo passwd postgres
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per defecte, PostGreSQL configura l'accés local perquè sigui realitzat
des d'un usuari del sistema operatiu. Tot i que es pot canviar,
acceptarem aquest comportament per defecte.&lt;/p&gt;
&lt;p&gt;Així, crearem un nou usuari al sistema. Ho farem sense donar-li
possibilitats de logar-se:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;sudo useradd -s /sbin/nologin usuaribd
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Creem ara un usuari regular i una nova base de dades. Farem:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;su - postgres
postgres@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;psql
&lt;span class="nv"&gt;$ &lt;/span&gt;psql
psql &lt;span class="o"&gt;(&lt;/span&gt;9.3.6&lt;span class="o"&gt;)&lt;/span&gt;
Type &lt;span class="s2"&gt;&amp;quot;help&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; help.
&lt;span class="nv"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="c"&gt;# CREATE USER usuaribd WITH PASSWORD &amp;#39;toPSikr3t&amp;#39;;&lt;/span&gt;
CREATE ROLE
&lt;span class="nv"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="c"&gt;# CREATE DATABASE testbd;&lt;/span&gt;
CREATE DATABASE
&lt;span class="nv"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="c"&gt;# GRANT ALL PRIVILEGES ON DATABASE testbd to usuaribd;&lt;/span&gt;
GRANT
&lt;span class="nv"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="c"&gt;#\q&lt;/span&gt;
postgres@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;exit&lt;/span&gt;
&lt;span class="nb"&gt;logout&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nota: és possible que el primer cop que sortim de &lt;em&gt;psql&lt;/em&gt; ens generi un
missatge com ara:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
could not save history to file
&amp;quot;/var/lib/postgresql/.psql_history&amp;quot;: No such file or directory
&lt;/pre&gt;
&lt;p&gt;Si és així, el podem ignorar amb tranquil·litat.&lt;/p&gt;
&lt;p&gt;Evidentment pots escollir el nom de la base de dades, el d'usuari i la
clau que t'agradin. Recorda que si la configuració de xarxa de la
teva màquina virtual és la que se't proposa en aquest document, només
es podrà accedir a aquesta des de la teva màquina amfitrió.&lt;/p&gt;
&lt;p&gt;Accedim a la nova base de dades amb el nou usuari fent servir:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;psql -U usuaribd -d testbd -h localhost
Password &lt;span class="k"&gt;for&lt;/span&gt; user usuaribd:
psql &lt;span class="o"&gt;(&lt;/span&gt;9.3.6&lt;span class="o"&gt;)&lt;/span&gt;
SSL connection &lt;span class="o"&gt;(&lt;/span&gt;cipher: DHE-RSA-AES256-SHA, bits: 256&lt;span class="o"&gt;)&lt;/span&gt;
Type &lt;span class="s2"&gt;&amp;quot;help&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; help.

&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;&lt;span class="se"&gt;\q&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per a accedir des d'una màquina fora de la que conté el servidor, per
exemple del nostre amfitrió &lt;a class="footnote-reference" href="#nossh" id="id5"&gt;[4]&lt;/a&gt;, ens caldrà fer algunes
modificacions a la configuració per defecte de &lt;em&gt;PostGreSQL&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;El canvi requereix la modificació de dos fitxers de configuració que
es trobaran a &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;/etc/postgresql/«X.Y»&lt;/span&gt;&lt;/tt&gt; on «X.Y» correspon a la versió
que hagis instal·lat de &lt;em&gt;PostGreSQL&lt;/em&gt;. En el meu cas la &lt;tt class="docutils literal"&gt;9.3&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;El primer fitxer a modificar és
&lt;tt class="docutils literal"&gt;/etc/postgresql/9.3/main/pg_hba.conf&lt;/tt&gt;. Cal localitzar les següents
línies&lt;/p&gt;
&lt;pre class="literal-block"&gt;
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
&lt;/pre&gt;
&lt;p&gt;Tot just a sota, hi afegirem la següent línia &lt;a class="footnote-reference" href="#editordef" id="id6"&gt;[5]&lt;/a&gt;&lt;/p&gt;
&lt;pre class="literal-block"&gt;
host    all             all             192.168.56.0/24        md5
&lt;/pre&gt;
&lt;p&gt;A continuació, modificarem el fitxer &lt;tt class="docutils literal"&gt;/etc/postgresql/9.3/main/postgresql.conf&lt;/tt&gt;. Hi localitzarem la secció &lt;em&gt;Connection settings&lt;/em&gt; i descomentarem la línia que conté&lt;/p&gt;
&lt;pre class="literal-block"&gt;
# listen_addresses = 'localhost'          # what IP address(es) to listen on;
&lt;/pre&gt;
&lt;p&gt;de manera que aparegui com:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
listen_addresses = '*'          # what IP address(es) to listen on;
&lt;/pre&gt;
&lt;p&gt;Ara reiniciem el servidor de &lt;em&gt;PostGreSQL&lt;/em&gt; amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usuarivm@vm:~&lt;span class="nv"&gt;$ &lt;/span&gt;sudo service postgresql restart
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finalment provarem la connexió remota. Per simplicitat, farem servir
la consola de &lt;tt class="docutils literal"&gt;psql&lt;/tt&gt; des de l'amfitrió.&lt;/p&gt;
&lt;p&gt;A la màquina amfitrió ens
caldrà probablement instal·lar el client de &lt;em&gt;PostGreSQL&lt;/em&gt;. Ho podem fer
simplement amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get install postgresql-client
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ara ja podem fer una prova des de l'amfitrió:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;psql -U usuaribd -d testbd -h 192.168.56.101
Password &lt;span class="k"&gt;for&lt;/span&gt; user usuaribd:
psql &lt;span class="o"&gt;(&lt;/span&gt;9.3.6&lt;span class="o"&gt;)&lt;/span&gt;
SSL connection &lt;span class="o"&gt;(&lt;/span&gt;cipher: DHE-RSA-AES256-GCM-SHA384, bits: 256&lt;span class="o"&gt;)&lt;/span&gt;
Type &lt;span class="s2"&gt;&amp;quot;help&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; help.

&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\q&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si tot ha anat bé, ja disposem d'un servidor &lt;em&gt;PostGreSQL&lt;/em&gt; en
funcionament amb un usuari i una base de dades amb els que podrem
estudiar el funcionament d'aquest SGBD.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="idiomaangles" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En aquest cas, l'idioma és només per
l'instal·lador. De seguida et demanarà l'idioma del SO. Et recomano
que mantinguis l'anglés de manera que no hagis de barallar-te amb
la instal·lació de diferents paquets de traducció.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="adaptadorpont" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Pot ser temptador fer servir l'opció d'&lt;em&gt;Adaptador
pont&lt;/em&gt;. Si et trobes però a una xarxa amb molts equips, tingues en
compte que aquesta opció consumirà una IP del servidor DHCP. A més,
les comunicacions entre la màquina virtual i l'amfitrió seran més
lentes donat que cal que surtin físicament.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="config2interf" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;En cas que vulguis configurar més d'una interfície
de xarxa, és possible que no sigui suficient amb configurar els dos
adaptadors al &lt;em&gt;VirtualBox&lt;/em&gt;. Hauràs de configurar la màquina virtual
de manera que reconegui la nova interfície. Per fer-ho, considera
afegir les següents línies al final de
&lt;tt class="docutils literal"&gt;/etc/network/interfaces&lt;/tt&gt;&lt;/p&gt;
&lt;pre class="last literal-block"&gt;
auto eth1
iface eth1 inet dhcp
&lt;/pre&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="nossh" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Per favor, no et confonguis amb el fet d'estar-te
connectant des d'una sessió &lt;em&gt;ssh&lt;/em&gt;. Tot i que la connexió &lt;em&gt;ssh&lt;/em&gt;
l'estàs realitzant des de la màquina anfitriona, la connexió al
servidor de &lt;em&gt;PostGreSQL&lt;/em&gt; l'estàs realitzant des de la màquina
virtual.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="editordef" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id6"&gt;[5]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Per editar, el servidor us ofereix dos editors: el
&lt;em&gt;vi&lt;/em&gt; i el &lt;em&gt;nano&lt;/em&gt;. Si no saps manegar-te amb el primer, els ajuts
del segon t'haurien de ser suficients.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 21:18:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:installacio-de-postgresql.html</guid><category>PostGreSQL</category></item><item><title>Breu guia de psql</title><link>http://apuntstecnics.herokuapp.com/breu-guia-de-psql.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada trobaràs una breu guia de les comandes que
probablement necessitaràs durant aquest curs per fer anar &lt;em&gt;psql&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Pots venir a mirar aquesta guia cada cop que necessitis fer una
consulta ràpida. El primer cop, però, et recomano que li facis una
ullada ràpida i responguis els exercicis, per a tenir una idea de què
hi pots trobar.&lt;/p&gt;
&lt;p&gt;En la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/primeres-passes-amb-la-consola-psql.html"&gt;següent entrada&lt;/a&gt; gran part del que
apareix en aquesta guia cobrarà sentit. Mentrestant, et proposo que
facis proves pel teu compte. Encara que no tinguis res a la base de
dades, t'ajudarà a familiaritzar-te amb l'aplicació.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="guia-basica-de-comandes-de-psql"&gt;
&lt;h2&gt;Guia bàsica de comandes de &lt;em&gt;psql&lt;/em&gt;&lt;/h2&gt;
&lt;div class="section" id="per-entrar-i-per-sortir"&gt;
&lt;h3&gt;Per entrar i per sortir&lt;/h3&gt;
&lt;p&gt;Ens connectarem a la base de dades &lt;em&gt;testbd&lt;/em&gt; que es troba al servidor
&lt;em&gt;192.168.56.101&lt;/em&gt; amb l'usuari &lt;em&gt;usuaribd&lt;/em&gt; escrivint al terminal
&lt;a class="footnote-reference" href="#contrasenya" id="id1"&gt;[1]&lt;/a&gt; (ens demanarà contrasenya):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;psql -U usuaribd -d testbd -h 192.168.56.101
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per sortir de la consola de &lt;em&gt;psql&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\q&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="per-aconseguir-ajuda"&gt;
&lt;h3&gt;Per aconseguir ajuda&lt;/h3&gt;
&lt;p&gt;En realitat, amb aquesta secció podria donar per finalitzada aquesta
breu guia. La consola &lt;em&gt;psql&lt;/em&gt; disposa d'un sistema d'ajut molt complet.&lt;/p&gt;
&lt;p&gt;Obtenim ajuda sobre el programa &lt;em&gt;psql&lt;/em&gt; amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;psql --help
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Obtenim ajuda sobre comandes &lt;em&gt;psql&lt;/em&gt; amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\?&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Obtenim ajuda sobre comandes &lt;em&gt;sql&lt;/em&gt; amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\h&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si volem una comanda concreta, simplement l'afegim a continuació:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\h&lt;/span&gt; SELECT
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="per-carregar-el-contingut-d-un-fitxer"&gt;
&lt;h3&gt;Per carregar el contingut d'un fitxer&lt;/h3&gt;
&lt;p&gt;Des de terminal:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;psql -U usuaribd -d testbd -h 192.168.56.101 &amp;lt; fitxer.sql
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;o també&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;psql -U usuaribd -d testbd -h 192.168.56.101 -f fitxer.sql
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Des de consola &lt;em&gt;psql&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\i&lt;/span&gt; fitxer.sql
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="per-guardar-el-resultat-d-una-consulta-en-un-fitxer"&gt;
&lt;h3&gt;Per guardar el resultat d'una consulta en un fitxer&lt;/h3&gt;
&lt;p&gt;Guardarem la sortida de&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\o&lt;/span&gt; fitxer.sql
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per recuperar la sortida en la consola:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\o&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="consultar-objectes-de-la-base-de-dades"&gt;
&lt;h3&gt;Consultar objectes de la base de dades&lt;/h3&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="21%" /&gt;
&lt;col width="79%" /&gt;
&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;\d&lt;/td&gt;
&lt;td&gt;mostra tables, seqüències, vistes i indexos&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;\dt&lt;/td&gt;
&lt;td&gt;mostra les tables&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;\dt clients&lt;/td&gt;
&lt;td&gt;mostra els detalls de la taula &lt;em&gt;clients&lt;/em&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;\dt+ clients&lt;/td&gt;
&lt;td&gt;mostra &lt;strong&gt;més&lt;/strong&gt; detalls sobre la taula &lt;em&gt;clients&lt;/em&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;\dt cl*&lt;/td&gt;
&lt;td&gt;mostra els detalls de les taules que comencen amb &lt;em&gt;cl&lt;/em&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;\d clients&lt;/td&gt;
&lt;td&gt;mostra la descripció de la taula &lt;em&gt;clients&lt;/em&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-massa-linies"&gt;
&lt;h3&gt;Exercici 1. Massa línies&lt;/h3&gt;
&lt;p&gt;Què passa quan el resultat d'una comanda sobrepassa el nombre de
línies que tenim disponibles a la finestra des de la que estem
treballant?&lt;/p&gt;
&lt;p&gt;Pista: fes que la finestra del terminal mostri un màxim de 10 línies i
demana la llista de totes les comandes &lt;em&gt;sql&lt;/em&gt; que enten &lt;em&gt;postgresql&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-les-taules-vip"&gt;
&lt;h3&gt;Exercici 2. Les taules &lt;em&gt;vip&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;Amb quina comanda psql podem veure la llista de les taules que
el seu nom finalitza amb &amp;quot;vip&amp;quot;.&lt;/p&gt;
&lt;p&gt;La comanda hauria de mostrar taules amb els següents noms:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;CLIENTS_VIP&lt;/li&gt;
&lt;li&gt;COMANDES_VIP&lt;/li&gt;
&lt;li&gt;TAULAVIP&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-help"&gt;
&lt;h3&gt;Exercici 3. Help!&lt;/h3&gt;
&lt;p&gt;Et toca investigar una mica en l'ajut de &lt;em&gt;psql&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Indica amb quina &lt;strong&gt;única&lt;/strong&gt; comanda podríem executar el contingut del
fitxer &lt;em&gt;entrada.sql&lt;/em&gt; i deixar el resultat en el fitxer &lt;em&gt;sortida.sql&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="contrasenya" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;ens demanarà contrasenya. A l'exemple hem fet servir
&lt;em&gt;pass&lt;/em&gt;. No és gaire segura, però en la configuració que et proposen
els apunts, no representa un gran problema.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 21:17:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:breu-guia-de-psql.html</guid><category>PostGreSQL</category></item><item><title>Primeres passes amb la consola psql</title><link>http://apuntstecnics.herokuapp.com/primeres-passes-amb-la-consola-psql.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada començarem a treballar amb la consola de &lt;em&gt;psql&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="primeres-passes"&gt;
&lt;h2&gt;Primeres passes&lt;/h2&gt;
&lt;p&gt;En aquesta secció farem una ràpida in introducció a la consola
&lt;em&gt;psql&lt;/em&gt;, una de les possibles portes de comunicació amb PostGreSQL.&lt;/p&gt;
&lt;p&gt;Si no ho has fet encara, instal·lat el PostGreSQL. Pressuposaré que
estàs seguint les passes descrites al document &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/installacio-de-postgresql.html"&gt;d'instal·lació de
PostGreSQL&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Segueix les passes:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
# connecta a la base de dades de prova
$ psql -U usuaribd -d testbd -h 192.168.56.101
Password for user usuaribd:
psql (9.1.8)
SSL connection (cipher: DHE-RSA-AES256-SHA, bits: 256)
Type &amp;quot;help&amp;quot; for help.

testbd=&amp;gt; -- això és un comentari
testbd=&amp;gt; -- comprova l'usuari amb el que t'has connectat
testbd=&amp;gt; SELECT current_user;
 current_user
--------------
 usuaribd
(1 row)

testbd=&amp;gt; -- no distingeix majúscules
testbd=&amp;gt; select CURRENT_USER;
 current_user
--------------
 usuaribd
(1 row)

testbd=&amp;gt; -- un càlcul simple
SELECT 5 * 2 + 1 AS resultat;
 resultat
----------
       11
(1 row)

testbd=&amp;gt; -- amb més d'una línia \p mostra la línia introduïda i \g o ; l'executa
testbd=&amp;gt; SELECT
5 * 2
testbd-&amp;gt; \p
select
5 * 2
testbd-&amp;gt; + 1
testbd-&amp;gt; AS resultat
testbd-&amp;gt; \p
select
5 * 2
+ 1
AS resultat
testbd-&amp;gt; \g
 resultat
----------
       11
(1 row)

testbd=&amp;gt; -- per obtenir ajuda
testbd=&amp;gt; \?
General
  \copyright             show PostgreSQL usage and distribution terms
  \g [FILE] or ;         execute query (and send results to file or |pipe)
  \h [NAME]              help on syntax of SQL commands, * for all commands
  \q                     quit psql

Query Buffer
  \e [FILE] [LINE]       edit the query buffer (or file) with external editor
  \ef [FUNCNAME [LINE]]  edit function definition with external editor
  \p                     show the contents of the query buffer
  \r                     reset (clear) the query buffer
  \s [FILE]              display history or save it to file
  \w FILE                write query buffer to file

Input/Output
  \copy ...              perform SQL COPY with data stream to the client host
  \echo [STRING]         write string to standard output
  \i FILE                execute commands from file
  \o [FILE]              send all query results to file or |pipe
  \qecho [STRING]        write string to query output stream (see \o)

Informational
  (options: S = show system objects, + = additional detail)
  \d[S+]                 list tables, views, and sequences
  \d[S+]  NAME           describe table, view, sequence, or index
«...»
&lt;/pre&gt;
&lt;p&gt;De vegades ens resultarà més còmode editar les nostres comandes en un
fitxer i demanar a &lt;em&gt;psql&lt;/em&gt; que ens les executi. O podem fer
interactivament des del propi &lt;em&gt;psql&lt;/em&gt; amb &lt;tt class="docutils literal"&gt;\i&lt;/tt&gt; però també sense que
calgui entrar.&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ echo &amp;quot;SELECT current_user;&amp;quot; &amp;gt; currentuser.sql
$ psql -U usuaribd -d testbd -h 192.168.56.101 -f currentuser.sql
Password for user usuaribd:
 current_user
--------------
 usuaribd
(1 row)
&lt;/pre&gt;
&lt;p&gt;Altres vegades el que ens interessarà serà guardar en un fitxer el
resultat d'una consulta&lt;/p&gt;
&lt;pre class="literal-block"&gt;
testbd=&amp;gt; SELECT current_user \g /tmp/currentuser.sql
testbd=&amp;gt; \q
$ cat /tmp/currentuser.sql
 current_user
--------------
 usuaribd
(1 row)
&lt;/pre&gt;
&lt;p&gt;Tot i que hi ha altres eines disponibles, fins i tot gràfiques, que
t'ajudaran a fer la majoria de les tasques d'administració amb el teu
PostgreSQL, aconseguir una certa habilitat en l'ús de la consola
&lt;em&gt;psql&lt;/em&gt; de segur et pagarà la pena.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-funcions-de-sistema"&gt;
&lt;h3&gt;Exercici 1. Funcions de sistema&lt;/h3&gt;
&lt;p&gt;Desenvolupa una taula amb els continguts de la taula &lt;em&gt;9.47 Session
Information Functions&lt;/em&gt; que apareix a &lt;a class="reference external" href="http://www.postgresql.org/docs/9.1/static/functions-info.html"&gt;9.3. System Information
Functions&lt;/a&gt; tot
afegint una nova columna amb el resultat d'executar-ho al teu
servidor.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-tipus-basics-de-dades"&gt;
&lt;h3&gt;Exercici 2. Tipus bàsics de dades&lt;/h3&gt;
&lt;p&gt;Desenvolupa una taula amb la descripció dels tipus de dades bàsics que
apareixen al capítol 8 sobre &lt;a class="reference external" href="http://www.postgresql.org/docs/9.1/static/datatype.html"&gt;tipus de dades&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Només cal que incloguis els tipus bàsics que apareixen sota les
seccions 8.1 fins la 8.6.
Evidentment, si tens interès, pots afegir-ne d'altres.&lt;/p&gt;
&lt;p&gt;Afegeix, per cada tipus, una referència al manual (la url) on apareix
i una descripció amb les teves paraules de les variacions.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 21:16:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:primeres-passes-amb-la-consola-psql.html</guid><category>PostGreSQL</category></item><item><title>Comparació models relacional i objecte-relacionals (primera part)</title><link>http://apuntstecnics.herokuapp.com/comparacio-models-relacional-i-objecte-relacionals-primera-part.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document compara la modelització de dades des de dues
perspectives:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;el model Relacional&lt;/li&gt;
&lt;li&gt;el model Objecte-Relacional.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Els continguts estan orientats al sistema gestor de bases de dades
objecte-relacional (SGBDOR) PostGreSQL. Tot i que les idees generals
haurien de ser traduïbles a altres SGBDOR, en l'actualitat, els
SGBDORs més importants no s'han posat d'acord en la interpretació de
les funcionalitats. Això implica que trobaràs diferències importants
depenent del fabricant.&lt;/p&gt;
&lt;p&gt;Tot i que PostGreSQL ofereix un suport extens a PL/SQL, en aquests
continguts ens centrarem en el emmagatzemament de dades i deixarem de
moment la manipulació d'aquestes.&lt;/p&gt;
&lt;p&gt;Aquesta és la primera part de la comparació. Hi trobaràs un breu repàs
del SQL del model relacional. La part afegida pel model
Objecte-Relacional queda a la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/comparacio-models-relacional-i-objecte-relacionals-segona-part.html"&gt;segona part&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Per seguir aquests continguts, es pressuposa que saps com gestionar
taules, fer consultes i inserir, modificar i eliminar-hi elements.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="model-relacional"&gt;
&lt;h2&gt;Model Relacional&lt;/h2&gt;
&lt;p&gt;En aquesta secció es presenten les entitats de que es composa
l'exemple &lt;a class="footnote-reference" href="#exempleclassic" id="id1"&gt;[1]&lt;/a&gt; a implementar.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama d'Entitat Relació del cas d'estudi" src="http://apuntstecnics.herokuapp.com/images/postgresql005.img001.der.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Com ja saps, el model relacional guarda les dades en taules tot
cercant minimitzar redundàncies.&lt;/p&gt;
&lt;p&gt;Les taules de l'exemple &lt;a class="footnote-reference" href="#convencioder" id="id2"&gt;[2]&lt;/a&gt; CLIENTS, COMERCIALS,
COMANDES, LINIES_COMANDA, i PRODUCTES.&lt;/p&gt;
&lt;p&gt;Els atributs de cada entitat formaran les columnes de les diferents
taules.&lt;/p&gt;
&lt;p&gt;Fixa't que cada part de l'adreça (carrer, codi postal, ciutat,
país) queda emmagatzemat en la seva pròpia columna. Hi ha adreces a
les taules de CLIENTS i COMANDES. Per la primera, l'adreça correspon a
la de facturació. La de COMANDES correspon a la de lliurament.&lt;/p&gt;
&lt;p&gt;En el cas dels telèfons, per tenir-ne més d'un la taula CLIENTS ha de
disposar d'una columna per cada telèfon. No és massa &lt;em&gt;elegant&lt;/em&gt; ja que
si en tenim menys de telèfons, hem de posar &lt;em&gt;nulls&lt;/em&gt;, i si són més hem
de modificar la taula.&lt;/p&gt;
&lt;p&gt;Per altra banda, el model reflexa que hi ha alguns clients que tenen
un comercial associat. Es tracta de clients importants als que
l'empresa destina un comercial. Com que un comercial pot tenir N
clients als que fa el seguiment, mentre que un client pot tenir 0 o 1
comercial associat, aquesta relació ens donarà alguns problemes a
l'hora de codificar-la en el model relacional. En concret, ens
obligarà o renunciar al control d'integritat d'una clau forana que en
alguns casos, haurà de poder ser nul, o bé a crear una taula
addicional que enllaci els clients VIPs amb el comercial associat.
Aquí optarem per aquesta via &lt;a class="footnote-reference" href="#alternativesherencia" id="id3"&gt;[3]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Finalment, fixat que la relació entre la comanda i els productes
requerits, fa servir una &lt;em&gt;entitat feble&lt;/em&gt; (LINIES_COMANDA) que
emmagatzema aquesta relació i afegeix alguna informació (quantitat de
producte).&lt;/p&gt;
&lt;div class="section" id="la-taula-clients"&gt;
&lt;h3&gt;La taula Clients&lt;/h3&gt;
&lt;p&gt;Crearem la taula CLIENTS amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;PRIMARY&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;tractament&lt;/span&gt; &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;cognoms&lt;/span&gt; &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;carrer&lt;/span&gt; &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;codi_postal&lt;/span&gt; &lt;span class="nb"&gt;VARCHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;ciutat&lt;/span&gt; &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;pais&lt;/span&gt; &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;telefon_1&lt;/span&gt; &lt;span class="nb"&gt;VARCHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;telefon_2&lt;/span&gt; &lt;span class="nb"&gt;VARCHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;telefon_3&lt;/span&gt; &lt;span class="nb"&gt;VARCHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Tot i que PostGreSQL ens ofereix el tipus SERIAL per generar una clau
primària que s'autocalculi per cada client, aquí farem servir INTEGER
per simplicitat. Si tens intenció d'afegir moltes entrades pots fer
servir BIG INTEGER.&lt;/p&gt;
&lt;p&gt;No cal indicar que &lt;em&gt;id&lt;/em&gt; és NOT NULL. PostGreSQL ho marca en el moment
que sap que és una clau primària.&lt;/p&gt;
&lt;p&gt;També notem que la majoria de camps els declarem de tipus TEXT per no
haver-nos de preocupar per les mides. Tenint en compte que PostGreSQL
fa una implementació força eficient d'aquest tipus de dades, potser
només ens hauríem de preocupar del camp &lt;em&gt;tractament&lt;/em&gt; que contindrà
valors com ara &lt;em&gt;Sr.&lt;/em&gt;, &lt;em&gt;Sra.&lt;/em&gt;, etc. Per simplicitat et proposo que ho
deixem així.&lt;/p&gt;
&lt;p&gt;En el moment que llencis aquesta comanda, PostGreSQL respondrà amb&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index &lt;span class="s2"&gt;&amp;quot;clients_pkey&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; table &lt;span class="s2"&gt;&amp;quot;clients&amp;quot;&lt;/span&gt;
CREATE TABLE
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Amb això ens està avisant que ha creat un índex per la taula CLIENTS.
És un element que en altres SGBDs queda amagat i que PostGreSQL
explicita perquè ofereix la possibilitat de fer-ho d'altres maneres.
Per cert, en cas que vulguis desfer-te de la taula (&lt;tt class="docutils literal"&gt;DROP TABLE
CLIENTS;&lt;/tt&gt;) PostGreSQL es farà càrrec també d'eliminar els índexs i
altres elements que hagi creat per tu &lt;a class="footnote-reference" href="#compteambheretats" id="id4"&gt;[4]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;En cas que tinguis interès en revisar la descripció de la taula que
has creat, pots fer-ho des de &lt;tt class="docutils literal"&gt;psql&lt;/tt&gt; amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\d&lt;/span&gt; CLIENTS
             Table &lt;span class="s2"&gt;&amp;quot;public.clients&amp;quot;&lt;/span&gt;
   Column    &lt;span class="p"&gt;|&lt;/span&gt;         Type          &lt;span class="p"&gt;|&lt;/span&gt; Modifiers
-------------+-----------------------+-----------
 id          &lt;span class="p"&gt;|&lt;/span&gt; integer               &lt;span class="p"&gt;|&lt;/span&gt; not null
 tractament  &lt;span class="p"&gt;|&lt;/span&gt; text                  &lt;span class="p"&gt;|&lt;/span&gt;
 nom         &lt;span class="p"&gt;|&lt;/span&gt; text                  &lt;span class="p"&gt;|&lt;/span&gt;
 cognoms     &lt;span class="p"&gt;|&lt;/span&gt; text                  &lt;span class="p"&gt;|&lt;/span&gt;
 carrer      &lt;span class="p"&gt;|&lt;/span&gt; text                  &lt;span class="p"&gt;|&lt;/span&gt;
 codi_postal &lt;span class="p"&gt;|&lt;/span&gt; character varying&lt;span class="o"&gt;(&lt;/span&gt;20&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;
 ciutat      &lt;span class="p"&gt;|&lt;/span&gt; text                  &lt;span class="p"&gt;|&lt;/span&gt;
 pais        &lt;span class="p"&gt;|&lt;/span&gt; text                  &lt;span class="p"&gt;|&lt;/span&gt;
 telefon_1   &lt;span class="p"&gt;|&lt;/span&gt; character varying&lt;span class="o"&gt;(&lt;/span&gt;20&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;
 telefon_2   &lt;span class="p"&gt;|&lt;/span&gt; character varying&lt;span class="o"&gt;(&lt;/span&gt;20&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;
 telefon_3   &lt;span class="p"&gt;|&lt;/span&gt; character varying&lt;span class="o"&gt;(&lt;/span&gt;20&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;
Indexes:
    &lt;span class="s2"&gt;&amp;quot;clients_pkey&amp;quot;&lt;/span&gt; PRIMARY KEY, btree &lt;span class="o"&gt;(&lt;/span&gt;id&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-la-taula-comercials"&gt;
&lt;h3&gt;Exercici 1. La taula COMERCIALS&lt;/h3&gt;
&lt;p&gt;Implementa la taula COMERCIALS.&lt;/p&gt;
&lt;p&gt;Anomena a la clau primària &lt;tt class="docutils literal"&gt;id&lt;/tt&gt; i declara-la exactament igual que a
CLIENTS. Això permetrà mantenir la coherència amb la resta de les
definicions que venen a continuació.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="els-clients-vip"&gt;
&lt;h3&gt;Els clients VIP&lt;/h3&gt;
&lt;p&gt;Com hem comentat abans, crearem una taula addicional per enllaçar els
clients especials amb el seu comercial associat&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;VIP_COMERCIAL&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id_client&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;REFERENCES&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;id_comercial&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;REFERENCES&lt;/span&gt; &lt;span class="n"&gt;COMERCIALS&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="la-taula-comandes"&gt;
&lt;h3&gt;La taula COMANDES&lt;/h3&gt;
&lt;p&gt;La taula COMANDES presenta una particularitat: la clau forana.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;COMANDES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;PRIMARY&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;id_client&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;REFERENCES&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;data_comanda&lt;/span&gt; &lt;span class="k"&gt;TIMESTAMP&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;carrer&lt;/span&gt; &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;codi_postal&lt;/span&gt; &lt;span class="nb"&gt;VARCHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;ciutat&lt;/span&gt; &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;pais&lt;/span&gt; &lt;span class="nb"&gt;TEXT&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En quan a la data, fixa't que apareix com a TIMESTAMP. És una manera
eficient de guardar les dates (incloent l'hora) i PostGreSQL ens
ofereix diferents funcions per a tractar aquest tipus. Mira el &lt;a class="reference external" href="http://www.postgresql.org/docs/9.1/static/datatype-datetime.html"&gt;manual
de TIMESTAMP&lt;/a&gt;
per més detalls.&lt;/p&gt;
&lt;p&gt;També fixat que aquesta taula també es veu obligada a disposar de
camps per cada element que forma una adreça. Probablement aquesta
sigui la mateixa que la del client, però de vegades els clients tenen
una adreça diferent per lliurar que per facturar.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-la-taula-productes"&gt;
&lt;h3&gt;Exercici 2. La taula PRODUCTES&lt;/h3&gt;
&lt;p&gt;Implementa la taula PRODUCTES. Considera únicament que el estoc és un
INTEGER i el preu un NUMERIC(10,2) que implica valors fins a 10 dígits
(comptant decimals) i fins a dos posicions decimals.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="la-taula-amb-les-linies-de-comanda"&gt;
&lt;h3&gt;La taula amb les línies de comanda&lt;/h3&gt;
&lt;p&gt;La taula LINIES_COMANDA presenta una altra particularitat, una clau
primària composta. Ho podem indicar de la següent manera:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;LINIES_COMANDA&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id_comanda&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;REFERENCES&lt;/span&gt; &lt;span class="n"&gt;COMANDES&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;id_producte&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;REFERENCES&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="k"&gt;PRIMARY&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id_comanda&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="afegim-productes"&gt;
&lt;h3&gt;Afegim productes&lt;/h3&gt;
&lt;p&gt;Inserim ara algunes dades a la taula PRODUCTES&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10001&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;producte nr. 10001&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;101&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;01&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10002&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;producte nr. 10002&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;102&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10003&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;producte nr. 10003&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;103&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10004&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;producte nr. 10004&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;104&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10005&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;producte nr. 10005&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;105&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;05&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10006&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;producte nr. 10006&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;106&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10007&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;producte nr. 10007&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;107&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;07&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10008&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;producte nr. 10008&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;108&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;08&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't com els strings apareixen envoltats amb cometes simples, i els
preus separen els decimals amb punt.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-alguns-clients"&gt;
&lt;h3&gt;Exercici 3. Alguns clients&lt;/h3&gt;
&lt;p&gt;Afegeix uns quants clients. Assegura't que hi apareixen al menys els
clients amb identificador 20001 i 20002.&lt;/p&gt;
&lt;p&gt;Intenta posar dades diferents per a cada camp de cada client. Això
facilitarà molt les proves que facis.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-algunes-comandes"&gt;
&lt;h3&gt;Exercici 4. Algunes comandes&lt;/h3&gt;
&lt;p&gt;Inserirem ara algunes comandes. En concret, volem com a mínim tres.
Una pel client 20001 i dues pel client 20002.&lt;/p&gt;
&lt;p&gt;Aquí tens la primera &amp;quot;de regal&amp;quot;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;COMANDES&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;30001&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;20001&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;2013-01-01 12:01:01&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't com introdueix la data. En realitat PostGreSQL accepta molts
formats per introduir dates. Fem servir aquest perquè resulta clar.&lt;/p&gt;
&lt;p&gt;Per altra banda, està inserint el valor NULL als camps de l'adreça.
Podem suposar que l'aplicació que faci servir aquesta base de dades
considerarà que NULL aquí implica la mateixa adreça que apareix al
client.&lt;/p&gt;
&lt;p&gt;Completa les insercions que falten. Intenta que al menys una d'elles
no correspongui a la mateixa adreça (és a dir, no contingui NULLs)&lt;/p&gt;
&lt;p&gt;Finalment afegeix algunes línies de comanda per cada comanda, de
manera que tinguis comandes amb una, dues i més de dues línies. Ja
que tens prou productes, intenta no repetir-ne cap a una mateixa
comanda.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-alguns-clients-vip"&gt;
&lt;h3&gt;Exercici 5. Alguns clients VIP&lt;/h3&gt;
&lt;p&gt;Insereix un comercial amb identificador 40001 i associa'l al client
20001.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="algunes-consultes"&gt;
&lt;h3&gt;Algunes consultes&lt;/h3&gt;
&lt;p&gt;En el model relacional, les consultes (&lt;em&gt;queries&lt;/em&gt;) es realitzen amb la
commanda SELECT.&lt;/p&gt;
&lt;p&gt;Alguns exemples:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Llista de les quantitats de producte que ha comprat els tres clients
que més n'han comprat:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="k"&gt;c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;client&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;producte&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;quantitat&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="k"&gt;c&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;COMANDES&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;cmd&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;LINIES_COMANDA&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;
&lt;span class="k"&gt;WHERE&lt;/span&gt;   &lt;span class="k"&gt;c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;id_client&lt;/span&gt;        &lt;span class="k"&gt;AND&lt;/span&gt;
        &lt;span class="n"&gt;cmd&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id_comanda&lt;/span&gt;   &lt;span class="k"&gt;AND&lt;/span&gt;
        &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id_producte&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;
&lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="k"&gt;DESC&lt;/span&gt;
&lt;span class="k"&gt;LIMIT&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Llista de l'import total que cada client ha comprat&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="k"&gt;c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;client&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;preu&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="k"&gt;c&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;COMANDES&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;cmd&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PRODUCTES&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;LINIES_COMANDA&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;
&lt;span class="k"&gt;WHERE&lt;/span&gt;   &lt;span class="k"&gt;c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;id_client&lt;/span&gt;        &lt;span class="k"&gt;AND&lt;/span&gt;
        &lt;span class="n"&gt;cmd&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id_comanda&lt;/span&gt;   &lt;span class="k"&gt;AND&lt;/span&gt;
        &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id_producte&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;
&lt;span class="k"&gt;GROUP&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="k"&gt;c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;llista de clients amb més d'una comanda&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;  &lt;span class="k"&gt;SELECT&lt;/span&gt;  &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39; &amp;#39;&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;cognoms&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;client&lt;/span&gt;
  &lt;span class="k"&gt;FROM&lt;/span&gt;    &lt;span class="n"&gt;clients&lt;/span&gt;
  &lt;span class="k"&gt;WHERE&lt;/span&gt;   &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="k"&gt;IN&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
              &lt;span class="k"&gt;SELECT&lt;/span&gt;   &lt;span class="n"&gt;id_client&lt;/span&gt;
              &lt;span class="k"&gt;FROM&lt;/span&gt;     &lt;span class="n"&gt;comandes&lt;/span&gt;
              &lt;span class="k"&gt;GROUP&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;id_client&lt;/span&gt;
              &lt;span class="k"&gt;HAVING&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
          &lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="n"&gt;Fixa&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;t en l&amp;#39;&lt;/span&gt;&lt;span class="err"&gt;ú&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="n"&gt;de&lt;/span&gt; &lt;span class="o"&gt;``||``&lt;/span&gt; &lt;span class="n"&gt;per&lt;/span&gt; &lt;span class="n"&gt;concatenar&lt;/span&gt; &lt;span class="n"&gt;strings&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Llista dels clients VIPs amb el seu comercial associat&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;  &lt;span class="n"&gt;CLIENTS&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cognoms&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;, &amp;#39;&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;client&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;COMERCIALS&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt;    &lt;span class="n"&gt;CLIENTS&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;COMERCIALS&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;VIP_COMERCIAL&lt;/span&gt;
&lt;span class="k"&gt;WHERE&lt;/span&gt;   &lt;span class="n"&gt;CLIENTS&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;VIP_COMERCIAL&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id_client&lt;/span&gt;
  &lt;span class="k"&gt;AND&lt;/span&gt;   &lt;span class="n"&gt;COMERCIALS&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;VIP_COMERCIAL&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id_comercial&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-els-clients-de-barcelona"&gt;
&lt;h3&gt;Exercici 6. Els clients de Barcelona&lt;/h3&gt;
&lt;p&gt;Dissenya una consulta que retorni totes les dades dels clients de la
ciutat de Barcelona.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-els-clients-amb-un-segon-telefon"&gt;
&lt;h3&gt;Exercici 7. Els clients amb un segon telèfon&lt;/h3&gt;
&lt;p&gt;Dissenya una consulta que retorni totes les dades dels clients que
tinguin definit el segon telèfon (camp &lt;em&gt;telefon_2&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Atenció&lt;/em&gt;: considerarem que un telèfon no està definit per un de dos
motius: perquè valgui NULL o pergue valgui la cadena buida ('').&lt;/p&gt;
&lt;p&gt;Pista: &lt;em&gt;IS [NOT] NULL&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-8-adreces-diferents"&gt;
&lt;h3&gt;Exercici 8. Adreces diferents&lt;/h3&gt;
&lt;p&gt;Dissenya una consulta que retorni totes les comandes que tinguin
l'adreça de lliurament diferent de la de facturació del client
corresponent.&lt;/p&gt;
&lt;p&gt;La consulta tornarà només els identificadors de client i de comanda.
El resultat generat reanomenarà els resultats amb &lt;em&gt;client_nr&lt;/em&gt; i
&lt;em&gt;comanda_nr&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Pista: &lt;em&gt;AS&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-9-el-millor-client"&gt;
&lt;h3&gt;Exercici 9. ★ El millor client&lt;/h3&gt;
&lt;p&gt;Dissenya una consulta que retorni el nom i cognoms del client que ens
hagi fet més despesa (import total de totes les seves comandes).&lt;/p&gt;
&lt;p&gt;Nota: aquesta consulta és una mica més complexa que les anteriors, eh?&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-el-producte-mes-comprat"&gt;
&lt;h3&gt;Exercici 10. ★ El producte més comprat&lt;/h3&gt;
&lt;p&gt;Dissenya una consulta que retorni el nom del producte més comprat.&lt;/p&gt;
&lt;p&gt;Nota: aquesta consulta és també una mica més complexa, eh?&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-11-modifiquem-dades"&gt;
&lt;h3&gt;Exercici 11. Modifiquem dades&lt;/h3&gt;
&lt;p&gt;Defineix una comanda que modifiqui el segon telèfon i el codi postal
del client 20001 a les dades teves.&lt;/p&gt;
&lt;p&gt;Encara que no te'n recordis de la sintaxi concreta, no t'hauria de ser
difícil de trobar.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-12-eliminem-dades"&gt;
&lt;h3&gt;Exercici 12. Eliminem dades&lt;/h3&gt;
&lt;p&gt;Defineix una comanda sql que elimini tots els productes que no
apareguin a cap comanda i tinguin un preu superior a 10.07.&lt;/p&gt;
&lt;p&gt;Encara que no te'n recordis de la sintaxi concreta, no t'hauria de ser
difícil de trobar.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-13-comandes-dificils"&gt;
&lt;h3&gt;Exercici 13. Comandes difícils&lt;/h3&gt;
&lt;p&gt;Defineix les especificacions d'un mínim de 5 comandes sql &lt;strong&gt;no
trivials&lt;/strong&gt; sobre aquest model de dades, i proporciona al menys una
solució per cadascuna.&lt;/p&gt;
&lt;p&gt;Crea un informe en el que aparegui el contingut de les diferents
taules implicades a les teves comandes i, per cadascuna, indica
quina és la sortida que t'ha donat.&lt;/p&gt;
&lt;p&gt;Et poso exemples d'algunes especificacions de companys anteriors. No
t'hi has de basar, però potser et serveixen d'inspiració
&lt;a class="footnote-reference" href="#potserlesteves" id="id5"&gt;[5]&lt;/a&gt;.&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;id del client que ha comprat més productes diferents (productes amb
diferent id)&lt;/li&gt;
&lt;li&gt;comptar quantes comandes tenen més d'una linia de comanda.&lt;/li&gt;
&lt;li&gt;Algunes comandes tenen camps de direcció buit i volem completar-los
per tant caldrà obtenir la informació del client.  Volem el nom,
cognom i tractament (en un format més llegible) i telefons dels
clients que tinguin alguna comanda amb algun camp buit, inclourem la
id de la comanda també.  Cal endreçar els resultats per la id del
client i en cas de tenir més d'una comanda per client, per la id de
comanda.&lt;/li&gt;
&lt;li&gt;Mostra el nom del comercial i la suma dels diners gastats pels
clients de cada comercial durant els últims 30 dies endreçats de mes
a menys.&lt;/li&gt;
&lt;li&gt;Mostrar els clients (id i ciutat) que hagin comprat menys de 6
unitats (o cap unitat) de productes que valguin menys de 5€. Cal
mostrar també aquells clients que no hagin comprat cap unitat de
productes de menys de 5€.&lt;/li&gt;
&lt;li&gt;Som el responsable de l'empresa. Les nostres ventes estan baixant i
els plans d'acció que hem aplicat no han donat resultat. Hem de
començar a pensar en reduir la nostra plantilla de comercials. És
per això que es demana una query que ens retorni: els comercials (id
i nom complet) que tinguin clients que que no hagin fet cap compra
en la darrera setmana, i també els comercials amb clients que hagin
fet compres en la darrera setmana però l'import total de totes les
compres no superi els 50€.&lt;/li&gt;
&lt;li&gt;Presentar en dos registros en formato horizontal.  En el primer
registro mostrar cuantos productos se han vendido con el precio
mayor que la media de los productos vendidos. En el caso de
encontrar más de una vez el mismo producto solo se contará una vez.
En el segundo registro presentar todos los datos de la tabla
&amp;quot;productes&amp;quot;, de aquellos productos seleccionados en el primer caso.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-14-opcional-les-consultes-d-anys-anteriors"&gt;
&lt;h3&gt;Exercici 14. (opcional) Les consultes d'anys anteriors&lt;/h3&gt;
&lt;p&gt;Prova de resoldre les consultes dels companys d'anys anteriors.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="exempleclassic" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Sí, es tracta de l'exemple clàssic que segurament
ja has trobat a més d'un lloc. Recorda, és més fàcil entendre nous
conceptes fent servir contexts coneguts.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="convencioder" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;En aquest document es fan servir algunes
convencions en els noms per evitar confusions amb la modelització en
classes. En particular, els noms de les entitats/taules apareix en
majúscules i plural (CLIENTS implica una taula que conté un conjunt
de clients) A banda, les claus primàries a cada entitat es diuen
simplement &lt;em&gt;id&lt;/em&gt; mentre que les forànees porten com a sufix el nom
de l'entitat (aquest cop en singular i minúscules)&lt;/p&gt;
&lt;p class="last"&gt;Trobaràs defensors de diferents convencions, i potser tu ja tens la
teva manera favorita d'anomenar les coses. Et recomano però que, al
menys per serguir aquests exemples, facis servir aquestes
que et proposo.&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="alternativesherencia" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si en comptes d'una referència a una altra
entitat, haguéssim hagut simplement de posar un valor com ara un
string amb el nom del comercial, o bé només ens calgués aquí les
dades del comercial (no hi hagués cap altra taula amb una una
forana a COMERCIALS) ho haguéssim resolt segurament amb valors
nuls.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="compteambheretats" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Amb la versió que estem fent servir aquí, és
possible que no funcioni automàticament amb casos menys provats com
per exemple amb l'herència.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="potserlesteves" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[5]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Potser et pensaràs que són les consultes més
&lt;em&gt;xungues&lt;/em&gt; que em van lliurar. En realitat les he escollides a
l'atzar! T'imagines mirar d'aquí uns anys aquests materials i
trobar-te una de les teves consultes?&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 21:15:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:comparacio-models-relacional-i-objecte-relacionals-primera-part.html</guid><category>PostGreSQL</category></item><item><title>Comparació models relacional i objecte-relacionals (segona part)</title><link>http://apuntstecnics.herokuapp.com/comparacio-models-relacional-i-objecte-relacionals-segona-part.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document correspon a la segona part de la comparació entre els
models relacionals i Objecte-relacional (mira la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/comparacio-models-relacional-i-objecte-relacionals-primera-part.html"&gt;primera part&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;En aquesta segona part, es tracta la perspectiva Objecte-Relacional.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="model-objecte-relacional"&gt;
&lt;h2&gt;Model Objecte-Relacional&lt;/h2&gt;
&lt;p&gt;A la secció anterior hem fet un petit repàs de les possibilitats que
&lt;em&gt;PostGreSQL&lt;/em&gt; ens ofereix com a SGBD relacional. En aquesta considerarem
algunes de les possibilitats que ens ofereix com a SGBD
objecte-relacional.&lt;/p&gt;
&lt;p&gt;Excepte per lleugeres diferències, l'apartat anterior seria comú a
altres SBGDs que hi ha al mercat, com ara Oracle. A partir d'ara, les
diferències s'amplifiquen fins a trobar-nos que els diferents SGBDs
que s'auto denominen Objecte-Relacionals presenten una diversitat
d'interpretacions que de vegades no tenen ni traducció als altres.&lt;/p&gt;
&lt;div class="section" id="el-model-des-de-la-perspectiva-oo"&gt;
&lt;h3&gt;El model des de la perspectiva OO&lt;/h3&gt;
&lt;p&gt;El següent diagrama de classes UML mostra una possible representació
del model anterior en forma de classes.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Possible diagrama de classes del cas d'estudi" src="http://apuntstecnics.herokuapp.com/images/postgresql005.img002.uml.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Algunes de les diferències més notables són:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;En comptes de representar les diferents parts que formen una adreça
en forma de camps no relacionats dins de diferents taules, el model
OO agrupa aquestes dades i manega el concepte d'&lt;em&gt;adreça&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;El model relacional ja podria haver fet quelcom similar, tot
definint una entitat ADRECES i fent que les taules usuàries CLIENTS
i COMMANDES en fessin referència.&lt;/p&gt;
&lt;p&gt;Amb tot, una adreça ens apareix de manera natural com un tipus de
dades, encara que compost, com podria ser una data.&lt;/p&gt;
&lt;p&gt;Cada SGBDOR ofereix mecanismes per definir aquests tipus de dades
definits per l'usuari (&lt;em&gt;UDT&lt;/em&gt;: &lt;em&gt;User Defined Type&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;Per altra banda, tot i que el model inicial ens forçava a definir
tota la informació del carrer en una única línia, de vegades algunes
adreces són més complicades i requereixen més d'una línia. Una
llista de línies de carrer ens permetria més comoditat a l'hora de
d'emmagatzemar aquestes dades. Novament, el model relacional ens
permetria fer-ho per exemple separant el contingut de cada línia per
un caràcter especial (ex. &lt;tt class="docutils literal"&gt;\n&lt;/tt&gt;). Encara que efectiva, no és una
manera còmoda ni per guardar-la ni per usar-la posteriorment.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El cas de la llista de telèfons és un cas similar al de les línies
d'especificació del carrer, en aquest cas, però, sembla que cada
element té una mica més d'entitat per separat. Al cap i a la fi,
normalment voldrem mostrar juntes totes les línies del carrer,
mentre que cada telèfon podria tenir un ús especial.&lt;/p&gt;
&lt;p&gt;Ho podríem &amp;quot;arreglar&amp;quot; des de la perspectiva purament relacional,
definint dues noves taules (TELEFONS i TELEFONS_CLIENT) de manera
que TELEFONS_CLIENT emmagatzemés la relació M:N entre CLIENTS i
TELEFONS. Complex, oi?&lt;/p&gt;
&lt;p&gt;Una de les crítiques que rep el model relacional és que obliga a
crear un munt d'entitats que no corresponen a cap concepte de la
realitat, només per a permetre normalitzar les dades.&lt;/p&gt;
&lt;p&gt;En el model de classes proposat, aprofitant que disposem de la
classe Telèfon, podem afegir més informació com ara el prefix del
país i el tipus de telèfon (mòbil, fax, fix, ...)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Les dades que formen part del nom del client (tractament, nom i
cognoms) són un cas similar al de l'adreça i el telèfon.&lt;/p&gt;
&lt;p&gt;Respecte el tractament, ara fa servir un enumerat per controlar la
validesa  Amb el model relacional hauríem pogut crear una taula amb
els diferents valors possibles i fer una clau forana des de CLIENTS.
Tota una taula per poc més de quatre valors...&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Les entitats principals CLIENTS, COMANDES i PRODUCTES es
converteixen en classes en un model purament orientat a objectes.
Malauradament els SGBDORs en general, i &lt;em&gt;PostGreSQL&lt;/em&gt; en particular,
encara no ofereixen mecanismes prou còmodes per implementar
relacions d'agregació. Per més detalls, considera l'anàlisi de
&lt;a class="citation-reference" href="#eessaar" id="id1"&gt;[Eessaar]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Tot plegat, per les entitats principals aquest document no
considerarà la implementació a la base de dades en forma de UDT sinó
com a taules estàndard.&lt;/p&gt;
&lt;p&gt;Com a norma general, et proposo que consideris la definició d'un nou
tipus per a aquells conceptes què puguis voler manipular de la
manera que ho fas amb un String. Fixa't que amb un String potser
pots tenir interès en les parts individuals (caràcters) que el
formen, però probablement no t'interessarà disposar d'una taula amb
tots els strings que facin servir la resta d'entitats. En tot cas,
aquesta serà l'aproximació que prenem en aquest document.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;La taula amb les línies de comanda, és un artifici que sovint ens
veiem forçats a muntar en el model Relacional per definir relacions
M:N.&lt;/p&gt;
&lt;p&gt;Potser resultaria molt més natural poder disposar d'una llista de
línies de comanda &lt;em&gt;dins&lt;/em&gt; de cada comanda.&lt;/p&gt;
&lt;p&gt;En aquest cas, ens caldria definir un tipus compost que contindria
una clau forana a PRODUCTES. El problema està en que, a hores d'ara,
&lt;em&gt;PostGreSQL&lt;/em&gt; no ofereix la possibilitat d'indicar restriccions en els
UDTs. Per aquesta raó, haurem de mantenir la taula LINIES−COMANDA.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El cas dels clients VIP, en un model orientat a objectes es podria
resoldre amb una relació d'herència. Un client VIP és una extensió
d'un client estàndard. Amb el model relacional ens havíem vist
obligats a crear una taula intermèdia per evitar claus foranies
nul·les en cas de clients estàndard &lt;a class="footnote-reference" href="#nocaliaherencia" id="id2"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;El DER resultant el representa el següent diagrama:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama d'entitat-relació amb objecte-relacional" src="http://apuntstecnics.herokuapp.com/images/postgresql005.img003.der_or.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="l-enumerat-pel-tractament"&gt;
&lt;h3&gt;L'enumerat pel tractament&lt;/h3&gt;
&lt;p&gt;Podem definir l'enumeració Tractament de la següent manera&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TYPE&lt;/span&gt; &lt;span class="n"&gt;Tractament&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;ENUM&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;Sr.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;Sra.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;Srta.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;Dr.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;Dra.&amp;#39;&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Podem consultar els detalls del tipus amb&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\d&lt;/span&gt;T+ tractament
                         List of data types
 Schema &lt;span class="p"&gt;|&lt;/span&gt;    Name    &lt;span class="p"&gt;|&lt;/span&gt; Internal name &lt;span class="p"&gt;|&lt;/span&gt; Size &lt;span class="p"&gt;|&lt;/span&gt; Elements &lt;span class="p"&gt;|&lt;/span&gt; Description
--------+------------+---------------+------+----------+-------------
 public &lt;span class="p"&gt;|&lt;/span&gt; tractament &lt;span class="p"&gt;|&lt;/span&gt; tractament    &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;4&lt;/span&gt;    &lt;span class="p"&gt;|&lt;/span&gt; Sr.     +&lt;span class="p"&gt;|&lt;/span&gt;
        &lt;span class="p"&gt;|&lt;/span&gt;            &lt;span class="p"&gt;|&lt;/span&gt;               &lt;span class="p"&gt;|&lt;/span&gt;      &lt;span class="p"&gt;|&lt;/span&gt; Sra.    +&lt;span class="p"&gt;|&lt;/span&gt;
        &lt;span class="p"&gt;|&lt;/span&gt;            &lt;span class="p"&gt;|&lt;/span&gt;               &lt;span class="p"&gt;|&lt;/span&gt;      &lt;span class="p"&gt;|&lt;/span&gt; Srta.   +&lt;span class="p"&gt;|&lt;/span&gt;
        &lt;span class="p"&gt;|&lt;/span&gt;            &lt;span class="p"&gt;|&lt;/span&gt;               &lt;span class="p"&gt;|&lt;/span&gt;      &lt;span class="p"&gt;|&lt;/span&gt; Dr.     +&lt;span class="p"&gt;|&lt;/span&gt;
        &lt;span class="p"&gt;|&lt;/span&gt;            &lt;span class="p"&gt;|&lt;/span&gt;               &lt;span class="p"&gt;|&lt;/span&gt;      &lt;span class="p"&gt;|&lt;/span&gt; Dra.     &lt;span class="p"&gt;|&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; row&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-l-enumerat-pel-tipus-de-telefon"&gt;
&lt;h3&gt;Exercici 1. L'enumerat pel tipus de telèfon&lt;/h3&gt;
&lt;p&gt;Et toca a tu definir l'enumerat pels diferents tipus de telèfon.
Anomena l'enumerat com a &lt;tt class="docutils literal"&gt;TipusTelefon&lt;/tt&gt;. L'enumerat hauria de
contenir, com a mínim els valors &lt;tt class="docutils literal"&gt;mòbil&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;fax&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;fix&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="el-tipus-telefon"&gt;
&lt;h3&gt;El tipus Telèfon&lt;/h3&gt;
&lt;p&gt;Podem definir el nou tipus (classe) Telefon fent servir el concepte de
dades compostes de &lt;em&gt;PostGreSQL&lt;/em&gt;, de la següent manera&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TYPE&lt;/span&gt; &lt;span class="n"&gt;Telefon&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;tipus&lt;/span&gt;   &lt;span class="n"&gt;TipusTelefon&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;pref&lt;/span&gt;    &lt;span class="nb"&gt;VARCHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;num&lt;/span&gt;     &lt;span class="nb"&gt;VARCHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest cas, podem tornar a veure els detalls del nou tipus de la mateixa
manera que consultàvem els detalls d'una taula:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\d&lt;/span&gt; Telefon
      Composite &lt;span class="nb"&gt;type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;public.telefon&amp;quot;&lt;/span&gt;
 Column &lt;span class="p"&gt;|&lt;/span&gt;         Type          &lt;span class="p"&gt;|&lt;/span&gt; Modifiers
--------+-----------------------+-----------
 tipus  &lt;span class="p"&gt;|&lt;/span&gt; tipustelefon          &lt;span class="p"&gt;|&lt;/span&gt;
 pref   &lt;span class="p"&gt;|&lt;/span&gt; character varying&lt;span class="o"&gt;(&lt;/span&gt;4&lt;span class="o"&gt;)&lt;/span&gt;  &lt;span class="p"&gt;|&lt;/span&gt;
 num    &lt;span class="p"&gt;|&lt;/span&gt; character varying&lt;span class="o"&gt;(&lt;/span&gt;16&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que estem fent servir &lt;em&gt;TipusTelefon&lt;/em&gt; directament com el tipus de
dades de la propietat &lt;em&gt;tipus&lt;/em&gt; de &lt;em&gt;Telefon&lt;/em&gt;. Fàcil no?&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-el-tipus-denominacio"&gt;
&lt;h3&gt;Exercici 2. El tipus Denominació&lt;/h3&gt;
&lt;p&gt;Defineix la classe &lt;em&gt;Denominacio&lt;/em&gt;. Fixa't que conté un enumerat definit
per nosaltres.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-el-tipus-adreca"&gt;
&lt;h3&gt;Exercici 3. El tipus Adreça&lt;/h3&gt;
&lt;p&gt;Defineix la classe &lt;em&gt;Adressa&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Aquesta classe presenta la particularitat de l'array de strings al
carrer. Llegeix la següent secció sobre la taula de CLIENTS per
&lt;em&gt;inspirar-te&lt;/em&gt; en com crear el nou tipus.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="la-taula-clients"&gt;
&lt;h3&gt;La taula CLIENTS&lt;/h3&gt;
&lt;p&gt;Ara que ja disposem dels nous tipus, tornarem a declarar la taula
CLIENTS de la següent forma:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;clients&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;PRIMARY&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="n"&gt;Denominacio&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;adr&lt;/span&gt; &lt;span class="n"&gt;Adressa&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;telefons&lt;/span&gt; &lt;span class="n"&gt;Telefon&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't en l'ús dels nous tipus, incloent l'array de telèfons.&lt;/p&gt;
&lt;p&gt;Nota: segurament et serà més còmode eliminar la versió anterior de la
taula (&lt;tt class="docutils literal"&gt;DROP TABLE CLIENTS&lt;/tt&gt;) que intentar modificar-la a base de
&lt;tt class="docutils literal"&gt;ALTER TABLE&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-la-taula-comandes"&gt;
&lt;h3&gt;Exercici 4. La taula COMANDES&lt;/h3&gt;
&lt;p&gt;Defineix la taula COMANDES de manera que ara disposi dels nous tipus
que hem creat.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-la-taula-comercials"&gt;
&lt;h3&gt;Exercici 5. La taula COMERCIALS&lt;/h3&gt;
&lt;p&gt;Defineix la taula COMERCIALS.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="la-taula-clients-vip"&gt;
&lt;h3&gt;La taula CLIENTS_VIP&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;PostGreSQL&lt;/em&gt; ens ofereix la possibilitat d'especificar una relació
d'herència entre dues entitats amb la clau &lt;em&gt;INHERITS&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per implementar l'herència podem fer:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;CLIENTS_VIP&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id_comercial&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;REFERENCES&lt;/span&gt; &lt;span class="n"&gt;COMERCIALS&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;INHERITS&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CLIENTS&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't què passa si fas:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="se"&gt;\d&lt;/span&gt; clients_vip
       Table &lt;span class="s2"&gt;&amp;quot;public.clients_vip&amp;quot;&lt;/span&gt;
    Column    &lt;span class="p"&gt;|&lt;/span&gt;    Type     &lt;span class="p"&gt;|&lt;/span&gt; Modifiers
--------------+-------------+-----------
 id           &lt;span class="p"&gt;|&lt;/span&gt; integer     &lt;span class="p"&gt;|&lt;/span&gt; not null
 nom          &lt;span class="p"&gt;|&lt;/span&gt; denominacio &lt;span class="p"&gt;|&lt;/span&gt;
 adr          &lt;span class="p"&gt;|&lt;/span&gt; adressa     &lt;span class="p"&gt;|&lt;/span&gt;
 telefons     &lt;span class="p"&gt;|&lt;/span&gt; telefon&lt;span class="o"&gt;[]&lt;/span&gt;   &lt;span class="p"&gt;|&lt;/span&gt;
 id_comercial &lt;span class="p"&gt;|&lt;/span&gt; integer     &lt;span class="p"&gt;|&lt;/span&gt;
Foreign-key constraints:
    &lt;span class="s2"&gt;&amp;quot;clients_vip_id_comercial_fkey&amp;quot;&lt;/span&gt; FOREIGN KEY &lt;span class="o"&gt;(&lt;/span&gt;id_comercial&lt;span class="o"&gt;)&lt;/span&gt; REFERENCES comercials&lt;span class="o"&gt;(&lt;/span&gt;id&lt;span class="o"&gt;)&lt;/span&gt;
Inherits: clients
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A CLIENTS_VIP els apareix &lt;strong&gt;tots&lt;/strong&gt; els camps de CLIENTS.&lt;/p&gt;
&lt;p&gt;Malauradament l'herència a la versió que estem fent servir de
&lt;em&gt;PostGreSQL&lt;/em&gt; no està completament suportada. La taula que estén &lt;strong&gt;no
hereta&lt;/strong&gt; restriccions com ara la clau primària i les claus foranes.
Això fa que es pugui produir situacions &lt;em&gt;aberrants&lt;/em&gt; com que dos
clients puguin tenir el mateix identificador, o bé que no es pugui
crear una comanda per un client vip malgrat l'identificador d'aquest
sembla existir segons les &lt;em&gt;selects&lt;/em&gt;. En aquests materials simplement
ignorarem el problema, però caldrà que el tinguis en compte en cas
que tinguis interès en fer servir aquesta funcionalitat en producció.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="inserir-clients"&gt;
&lt;h3&gt;Inserir clients&lt;/h3&gt;
&lt;p&gt;La inserció de clients, com és d'esperar, requerirà alguns canvis.
Així la inserció tindria un aspecte similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt;
&lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10001&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="k"&gt;ROW&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Sr.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Pepito&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Grillo&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="k"&gt;ROW&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;ARRAY&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;C/ Càspita, nr.1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Polígon Industrial Guarapunzo&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
            &lt;span class="s1"&gt;&amp;#39;08080&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Alifardi&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Guinea Bisau&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="k"&gt;CAST&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
                &lt;span class="nb"&gt;ARRAY&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;ROW&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;mòbil&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;0034&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;933333333&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                      &lt;span class="k"&gt;ROW&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;fax&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;0034&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;933333334&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
                &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;Telefon&lt;/span&gt;&lt;span class="p"&gt;[])&lt;/span&gt;
       &lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;per introduir un valor d'un tipus complex, ho farem mitjançant la
paraula clau &lt;tt class="docutils literal"&gt;ROW&lt;/tt&gt; seguida, entre parèntesis, dels valors dels
diferents camps del tipus separats amb coma.&lt;/p&gt;
&lt;p&gt;En molts casos, podem obviar la paraula &lt;tt class="docutils literal"&gt;ROW&lt;/tt&gt;. Mira la &lt;a class="reference external" href="http://www.postgresql.org/docs/9.1/static/sql-expressions.html#SQL-SYNTAX-ROW-CONSTRUCTORS"&gt;secció
4.2.13 del manual&lt;/a&gt;
per més detalls.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;de manera similar, per introduir un array farem servir la paraula
clau &lt;tt class="docutils literal"&gt;ARRAY&lt;/tt&gt; seguida, entre claudàtors, pels diferents elements
que conformen l'array tot separant-los amb coma.&lt;/p&gt;
&lt;p&gt;També aquí disposem d'una versió més compacta, expressant els valors
de l'array entre claus (&lt;tt class="docutils literal"&gt;{}&lt;/tt&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;en el cas de l'array de telèfons, ens caldrà fer un &lt;em&gt;cast&lt;/em&gt; per
indicar a &lt;em&gt;PostGreSQL&lt;/em&gt; de quin tipus de dades està format l'array.
Això ho fem amb &lt;tt class="docutils literal"&gt;CAST( &lt;span class="pre"&gt;«...»&lt;/span&gt; AS &lt;span class="pre"&gt;Telefon[])&lt;/span&gt;&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Novament &lt;em&gt;PostGreSQL&lt;/em&gt; ens ofereix una manera més compacta
d'escriure-ho amb l'operador de cast &lt;tt class="docutils literal"&gt;::&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Les possibilitats de compactació que ens ofereix el &lt;em&gt;PostGreSQL&lt;/em&gt; fan una
mica més críptiques les expressions. Això fa que no siguin gaire
adequades en un primer contacte amb el SGBD.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-algunes-comandes"&gt;
&lt;h3&gt;Exercici 6. Algunes comandes&lt;/h3&gt;
&lt;p&gt;Insereix les dades necessàries per que quedin enregistrades les
comandes de tres clients.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-alguns-comercials"&gt;
&lt;h3&gt;Exercici 7. Alguns comercials&lt;/h3&gt;
&lt;p&gt;Insereix alguns comercials. Ens caldrà al menys un amb l'id 40001.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="inserir-clients-vip"&gt;
&lt;h3&gt;Inserir clients VIP&lt;/h3&gt;
&lt;p&gt;La inserció de clients VIP, malgrat hem definit la taula com una
extensió de clients, és molt similar a la inserció a una taula
&lt;em&gt;convencional&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;CLIENTS_VIP&lt;/span&gt;
&lt;span class="k"&gt;VALUES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10002&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="k"&gt;ROW&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Sra.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Pepita&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Grilla&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="k"&gt;ROW&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;ARRAY&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;C/ Càspita, nr.2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Polígon Industrial Guarapunzo&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
            &lt;span class="s1"&gt;&amp;#39;08080&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Alifardi&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Guinea Bisau&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="nb"&gt;ARRAY&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;ROW&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;mòbil&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;0034&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;933333335&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
              &lt;span class="k"&gt;ROW&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;fax&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;0034&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;933333336&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)]::&lt;/span&gt;&lt;span class="n"&gt;Telefon&lt;/span&gt;&lt;span class="p"&gt;[],&lt;/span&gt;
        &lt;span class="mi"&gt;40001&lt;/span&gt;
       &lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Un cop disposem d'aquest client VIP, podem comprovar què:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;es troba a CLIENTS_VIP&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT * FROM CLIENTS_VIP&lt;span class="p"&gt;;&lt;/span&gt;
  id   &lt;span class="p"&gt;|&lt;/span&gt;         nom          &lt;span class="p"&gt;|&lt;/span&gt;                                            adr                                             &lt;span class="p"&gt;|&lt;/span&gt;                     telefons                      &lt;span class="p"&gt;|&lt;/span&gt; id_comercial
-------+----------------------+--------------------------------------------------------------------------------------------+---------------------------------------------------+--------------
 &lt;span class="m"&gt;10002&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;Sra.,Pepita,Grilla&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;{&amp;quot;&amp;quot;C/ Càspita, nr.2&amp;quot;&amp;quot;,&amp;quot;&amp;quot;Polígon Industrial Guarapunzo&amp;quot;&amp;quot;}&amp;quot;&lt;/span&gt;,08080,Alifardi,&lt;span class="s2"&gt;&amp;quot;Guinea Bisau&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;(mòbil,0034,933333335)&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;(fax,0034,933333336)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;        40001
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; row&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;es troba a CLIENTS&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT * FROM CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
  id   &lt;span class="p"&gt;|&lt;/span&gt;         nom          &lt;span class="p"&gt;|&lt;/span&gt;                                            adr                                             &lt;span class="p"&gt;|&lt;/span&gt;                     telefons
-------+----------------------+--------------------------------------------------------------------------------------------+---------------------------------------------------
 &lt;span class="m"&gt;10001&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;Sr.,Pepito,Grillo&lt;span class="o"&gt;)&lt;/span&gt;  &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;{&amp;quot;&amp;quot;C/ Càspita, nr.1&amp;quot;&amp;quot;,&amp;quot;&amp;quot;Polígon Industrial Guarapunzo&amp;quot;&amp;quot;}&amp;quot;&lt;/span&gt;,08080,Alifardi,&lt;span class="s2"&gt;&amp;quot;Guinea Bisau&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;(mòbil,0034,933333333)&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;(fax,0034,933333334)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="m"&gt;10002&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;Sra.,Pepita,Grilla&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;{&amp;quot;&amp;quot;C/ Càspita, nr.2&amp;quot;&amp;quot;,&amp;quot;&amp;quot;Polígon Industrial Guarapunzo&amp;quot;&amp;quot;}&amp;quot;&lt;/span&gt;,08080,Alifardi,&lt;span class="s2"&gt;&amp;quot;Guinea Bisau&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;(mòbil,0034,933333335)&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;(fax,0034,933333336)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per cert, si volem saber només els clients que no són VIP, &lt;em&gt;PostGreSQL&lt;/em&gt;
ens ofereix &lt;tt class="docutils literal"&gt;ONLY&lt;/tt&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT * FROM ONLY CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
  id   &lt;span class="p"&gt;|&lt;/span&gt;         nom         &lt;span class="p"&gt;|&lt;/span&gt;                                            adr                                             &lt;span class="p"&gt;|&lt;/span&gt;                     telefons
-------+---------------------+--------------------------------------------------------------------------------------------+---------------------------------------------------
 &lt;span class="m"&gt;10001&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;Sr.,Pepito,Grillo&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;{&amp;quot;&amp;quot;C/ Càspita, nr.1&amp;quot;&amp;quot;,&amp;quot;&amp;quot;Polígon Industrial Guarapunzo&amp;quot;&amp;quot;}&amp;quot;&lt;/span&gt;,08080,Alifardi,&lt;span class="s2"&gt;&amp;quot;Guinea Bisau&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;(mòbil,0034,933333333)&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;(fax,0034,933333334)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; row&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Malauradament, com ja hem comentat, la implementació actual de
&lt;em&gt;PostGreSQL&lt;/em&gt; permet alguns usos no adequats. Per exemple, podrem inserir
un client vip amb un id ja disponible tant a CLIENTS com a
CLIENTS_VIP, donat que en realitat no disposem de cap clau primària a
CLIENTS_VIP. També podríem inserir només els camps de CLIENTS i
&lt;em&gt;PostGreSQL&lt;/em&gt; afegirà automàticament nulls als camps que faltin.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-8-alguns-clients-vip"&gt;
&lt;h3&gt;Exercici 8. Alguns clients VIP&lt;/h3&gt;
&lt;p&gt;Insereix un mínim de tres clients VIP.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="seleccionar-clients"&gt;
&lt;h3&gt;Seleccionar clients&lt;/h3&gt;
&lt;p&gt;Ja hem vist abans que podem accedir als camps de tipus complex i
d'array com amb qualsevol altre camp. Per exemple&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT nom FROM CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
         nom
----------------------
 &lt;span class="o"&gt;(&lt;/span&gt;Sr.,Pepito,Grillo&lt;span class="o"&gt;)&lt;/span&gt;
 &lt;span class="o"&gt;(&lt;/span&gt;Sra.,Pepita,Grilla&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't, però, que els valors dels atributs surten agrupats. Si els
volem separats, podem fer&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT &lt;span class="o"&gt;(&lt;/span&gt;nom&lt;span class="o"&gt;)&lt;/span&gt;.* FROM CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
  tr  &lt;span class="p"&gt;|&lt;/span&gt;  nom   &lt;span class="p"&gt;|&lt;/span&gt; cognoms
------+--------+---------
 Sr.  &lt;span class="p"&gt;|&lt;/span&gt; Pepito &lt;span class="p"&gt;|&lt;/span&gt; Grillo
 Sra. &lt;span class="p"&gt;|&lt;/span&gt; Pepita &lt;span class="p"&gt;|&lt;/span&gt; Grilla
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;De manera individual els seleccionarem indicant el nom de l'atribut&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT &lt;span class="o"&gt;(&lt;/span&gt;nom&lt;span class="o"&gt;)&lt;/span&gt;.cognoms &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;, &amp;#39;&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;nom&lt;span class="o"&gt;)&lt;/span&gt;.nom FROM CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
    ?column?
----------------
 Grillo, Pepito
 Grilla, Pepita
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En el cas dels arrays, podem accedir simplement amb&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT telefons FROM CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
                     telefons
---------------------------------------------------
 &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;(mòbil,0034,933333333)&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;(fax,0034,933333334)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;(mòbil,0034,933333335)&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;(fax,0034,933333336)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;O especificant un rang&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT telefons&lt;span class="o"&gt;[&lt;/span&gt;1:2&lt;span class="o"&gt;]&lt;/span&gt; FROM CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
                     telefons
---------------------------------------------------
 &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;(mòbil,0034,933333333)&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;(fax,0034,933333334)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;(mòbil,0034,933333335)&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;(fax,0034,933333336)&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per defecte, els arrays es defineixen a partir del 1 i no del 0.&lt;/p&gt;
&lt;p&gt;Disposem d'algunes utilitats per saber les dimensions d'un array
&lt;a class="footnote-reference" href="#dimensions" id="id3"&gt;[2]&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; -- la longitut de l&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;array telèfons per la primera dimensió
&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT ARRAY_LENGTH&lt;span class="o"&gt;(&lt;/span&gt;telefons, 1&lt;span class="o"&gt;)&lt;/span&gt; FROM CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
 array_length
--------------
            2
            2
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; -- la posició superior per la primera dimensió
&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT ARRAY_UPPER&lt;span class="o"&gt;(&lt;/span&gt;telefons, 1&lt;span class="o"&gt;)&lt;/span&gt; FROM CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
 array_upper
-------------
           2
           2
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; -- la posició inferior per la primera dimensió
&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT ARRAY_LOWER&lt;span class="o"&gt;(&lt;/span&gt;telefons, 1&lt;span class="o"&gt;)&lt;/span&gt; FROM CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
 array_lower
-------------
           1
           1
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; -- les dimensions dels arrays
&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT ARRAY_DIMS&lt;span class="o"&gt;(&lt;/span&gt;telefons&lt;span class="o"&gt;)&lt;/span&gt; FROM CLIENTS&lt;span class="p"&gt;;&lt;/span&gt;
 array_dims
------------
 &lt;span class="o"&gt;[&lt;/span&gt;1:2&lt;span class="o"&gt;]&lt;/span&gt;
 &lt;span class="o"&gt;[&lt;/span&gt;1:2&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per exemple, la següent consulta ens retorna tots els clients amb 2 o
més telèfons&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt; &lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;ARRAY_LENGTH&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;telefons&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;La següent consulta mostra els clients pels que el seu darrer telèfon
és un fax&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt; &lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;telefons&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;ARRAY_LENGTH&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;telefons&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)]).&lt;/span&gt;&lt;span class="n"&gt;tipus&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;fax&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En cas que el que necessitem sigui cercar dins dels valors d'un array,
podem fer servir la funció &lt;tt class="docutils literal"&gt;unnest()&lt;/tt&gt; que ens expansiona els valors
de l'array en un conjunt de registres. Per exemple, la següent
consulta ens retorna tots aquells clients que tinguin fax&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="k"&gt;DISTINCT&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;UNNEST&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;telefons&lt;/span&gt;&lt;span class="p"&gt;)).&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;
      &lt;span class="k"&gt;FROM&lt;/span&gt;   &lt;span class="n"&gt;CLIENTS&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;INTERN&lt;/span&gt;
&lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;tipus&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;fax&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't com, en aquest exemple:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;extraiem els telèfons en files amb &lt;tt class="docutils literal"&gt;UNNEST()&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;com que els telèfons són de tipus complex, demanem que apareguin els
atributs com a columnes amb el &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;(«camp»).*&lt;/span&gt;&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;tot plegat ho definim com a l'origen de la consulta, que ara disposa
de les columnes: id, tipus, pref i num.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Trobaràs totes les possibilitats que t'ofereix &lt;em&gt;PostGreSQL&lt;/em&gt; a la secció
&lt;a class="reference external" href="http://www.postgresql.org/docs/9.1/static/arrays.html"&gt;8.14 Arrays&lt;/a&gt;
i un resum de les funcions i operadors amb arrays a la secció &lt;a class="reference external" href="http://www.postgresql.org/docs/9.1/static/functions-array.html"&gt;9-17.
Array Functions and Operators&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="modificar-un-valor-d-un-atribut"&gt;
&lt;h3&gt;Modificar un valor d'un atribut&lt;/h3&gt;
&lt;p&gt;Podem modificar els atributs d'un camp complex d'una manera molt
similar a com els consultem&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;UPDATE&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt; &lt;span class="k"&gt;SEt&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Pepet&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cognoms&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Grill&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;10001&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixat com, en aquest cas, no fem servir parèntesis amb el nom del
camp.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="modificar-valors-dins-d-un-array"&gt;
&lt;h3&gt;Modificar valors dins d'un array&lt;/h3&gt;
&lt;p&gt;La modificació d'un dels valors d'un array la podem fer indicant
l'índex de l'array. Per exemple, la següent comanda modifica la
primera línia del carrer del client 10001&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;UPDATE&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt; &lt;span class="k"&gt;SET&lt;/span&gt; &lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;C/ Càspita, S/N&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;10001&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Imagina, però, que el que vols és afegir un element més a l'array. La
següent comanda&lt;/p&gt;
&lt;p&gt;Podem afegir al final o al principi d'un array fent servir les funcions
&lt;tt class="docutils literal"&gt;array_append()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;array_prepend()&lt;/tt&gt;. La comanda següent, afegeix
una línia nova al final de les línies del carrer d'un client&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;UPDATE&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt;
&lt;span class="k"&gt;SET&lt;/span&gt; &lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;array_append&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Sector A&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;10001&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per inserir en un punt intermedi, haurem de composar l'array. Per
exemple, la següent comanda afegeix nova línia a la segona posició de
l'array del carrer d'un client&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;UPDATE&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt;
&lt;span class="k"&gt;SET&lt;/span&gt; &lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ARRAY_CAT&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;ARRAY&lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Nau del Pepet&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                         &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ARRAY_LENGTH&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)])&lt;/span&gt;
&lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;10001&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per eliminar un valor d'un array, procedirem de manera similar. Per
exemple, eliminarem la primera i darrera línies de carrer d'un client
amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;UPDATE&lt;/span&gt; &lt;span class="n"&gt;CLIENTS&lt;/span&gt;
&lt;span class="k"&gt;SET&lt;/span&gt; &lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ARRAY_LENGTH&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;adr&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;carrer&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;10001&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-9-un-nou-telefon"&gt;
&lt;h3&gt;Exercici 9. Un nou telèfon&lt;/h3&gt;
&lt;p&gt;Ens informen que el client amb id 10001 té un nou telèfon de tipus
fix. És el 0034 933100131.&lt;/p&gt;
&lt;p&gt;Escriu les comandes que permetrien:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;comprovar si aquest client ja disposa d'aquest telèfon. Han de
coincidir totes les dades per que es considerin iguals.&lt;/li&gt;
&lt;li&gt;inserir el nou telèfon al començament de la llista&lt;/li&gt;
&lt;li&gt;inserir el nou telèfon al final de la llista&lt;/li&gt;
&lt;li&gt;inserir el nou telèfon al el penúltim de la llista&lt;/li&gt;
&lt;li&gt;reemplaçar tots els telèfons fixos que disposi el client, per
aquest. No importa l'ordre en què quedin i es pot incloure més
d'una comanda.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-canvi-de-codi-postal"&gt;
&lt;h3&gt;Exercici 10. Canvi de codi postal&lt;/h3&gt;
&lt;p&gt;Ens comuniquen que les adreces que apareixien sota el codi postal
08020 del país Espanya, s'han assignat ara al codi postal 08021.&lt;/p&gt;
&lt;p&gt;Desenvolupa la comanda (o comandes) necessàries per registrar aquesta
modificació a la nostra base de dades.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-11-una-consulta-complexa"&gt;
&lt;h3&gt;Exercici 11. Una consulta complexa&lt;/h3&gt;
&lt;p&gt;Volem saber els clients que han fet comandes a lliurar a la
mateixa ciutat que la de l'adreça del client, i que hagin comprat un
mínim de 10 productes amb preu superior a 10€ durant el darrer mes (30
dies).&lt;/p&gt;
&lt;p&gt;Pista:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;testbd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; SELECT DATE &lt;span class="s1"&gt;&amp;#39;2013-04-08&amp;#39;&lt;/span&gt; - INTERVAL &lt;span class="s1"&gt;&amp;#39;1 month&amp;#39;&lt;/span&gt; &amp;lt; DATE &lt;span class="s1"&gt;&amp;#39;2013-04-08&amp;#39;&lt;/span&gt; AS abans&lt;span class="p"&gt;;&lt;/span&gt;
 abans
-------
 t
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; row&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-12-comandes-dificils"&gt;
&lt;h3&gt;Exercici 12. Comandes difícils&lt;/h3&gt;
&lt;p&gt;Defineix les especificacions d'un mínim de 5 comandes sql &lt;strong&gt;no
trivials&lt;/strong&gt; sobre aquest model de dades, i proporciona al menys una
solució per cadascuna.&lt;/p&gt;
&lt;p&gt;Crea un informe en el que aparegui el contingut de les diferents
taules implicades a les teves comandes i, per cadascuna, indica
quina és la sortida que t'ha donat.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Important&lt;/strong&gt;: Assegurat que totes les consultes que proposes
requereixen la comprensió d'un o més dels elements Objecte-Relacionals
que hem treballat en aquest document.&lt;/p&gt;
&lt;p&gt;Et poso exemples d'algunes especificacions de companys anteriors. No
t'hi has de basar, però potser et serveixen d'inspiració.&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Mostrar en ordre alfabètic els cognoms dels clients que tinguin com
a mínim un telèfon mòbil&lt;/li&gt;
&lt;li&gt;Cambia el tratamiento por Dr del cliente con codigo postal 08080 que
mas ha gastado&lt;/li&gt;
&lt;li&gt;Volem saber el nom (en format cognoms+', '+nom) i el/s telèfon/s
d'aquells clients que gasten de mitjana en les seves comandes per
sobre de la comanda mitjana.&lt;/li&gt;
&lt;li&gt;Mostrar els id's dels clients (gènere masculí) que hagin gastat més
de 200€ en els últims 5 mesos que tinguin com a mínim un telèfon
mòbil de contacte.&lt;/li&gt;
&lt;li&gt;D'entre els clients vip, mostra els Japonesos que s'han gastat més
de 100 euros en total Mostra el nom, cognoms i tractament dels
clients, la xifra gastada y el seu comercial associat Comanda:&lt;/li&gt;
&lt;li&gt;Mostra aquelles comandes amb tots els seus camps així com la
quantitat de carrers que figurin en l'adreça, si es que hi ha que
han tingut lloc en el darrer lustre i s'ha indicat l'adreça&lt;/li&gt;
&lt;li&gt;Selecionar  los clientes que tengan telefono fijo, no sean de
Espanya y su teléfono comienze por 93 y termine por 31&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-13-opcional-les-consultes-d-anys-anteriors"&gt;
&lt;h3&gt;Exercici 13. (opcional) Les consultes d'anys anteriors&lt;/h3&gt;
&lt;p&gt;Prova de resoldre les consultes dels companys d'anys anteriors.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="referencies"&gt;
&lt;h2&gt;Referències&lt;/h2&gt;
&lt;table class="docutils citation" frame="void" id="eessaar" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[Eessaar]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;&amp;quot;&lt;a class="reference external" href="http://www.wseas.us/e-library/conferences/2006cscc/papers/534-523.pdf"&gt;Whole-Part Relationships in the Object-Relational Databases&lt;/a&gt;&amp;quot;
de Erki Eessaar&lt;/p&gt;
&lt;p class="last"&gt;Anàlisi de diferents maneres d'implementar una relació d'agregació
en un SGBDOR.&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="nocaliaherencia" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;De fet, en aquest cas, probablement podríem
eliminar la necessitat de distingir els clients VIP donat que només
té la referència al comercial, fent que simplement el comercial
disposi de la llista de clients. Mantindrem, però, l'herència ja
que ens interessa veure com ho s'implementa en el model OR i, a
l'hora, volem mantenir la simplicitat de l'exemple.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="dimensions" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;em&gt;PostGreSQL&lt;/em&gt; permet definir arrays multidimensionals.
Donat que en aquest document només veurem d'unidimensionals, a
l'argument de dimensió d'algunes de les funcions hi trobaràs sempre
un 1.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 21:14:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:comparacio-models-relacional-i-objecte-relacionals-segona-part.html</guid><category>PostGreSQL</category></item><item><title>Introducció al MongoDB</title><link>http://apuntstecnics.herokuapp.com/introduccio-al-mongodb.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document ofereix una breu introducció a MongoDB.&lt;/p&gt;
&lt;p&gt;Per a la realització d'alguns dels exercicis, es requereixen
coneixements de programació en Java i del Model Relacional.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="mongodb"&gt;
&lt;h2&gt;MongoDB&lt;/h2&gt;
&lt;p&gt;MongoDB a la seva &lt;a class="reference external" href="http://www.mongodb.org/"&gt;pàgina principal&lt;/a&gt; es
defineix com una base de dades documental. És programari lliure i està
escrita en C++. &lt;a class="reference external" href="http://www.mongodb.com/leading-nosql-database"&gt;Segons ells mateixos&lt;/a&gt;, és el principal
gestor de bases de dades &lt;em&gt;NoSQL&lt;/em&gt; del mercat.&lt;/p&gt;
&lt;p&gt;A la &lt;a class="reference external" href="http://docs.mongodb.org/manual/core/introduction/"&gt;introducció a MongoDB&lt;/a&gt;, ens detallen
que MongoDB ens ofereix:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;alt rendiment: les dades es guarden sovint en el mateix (o molt
similar) format amb que les manipulen els programes. A més, MongoDB
ofereix un sistema d'indexació molt flexible per accelerar les
consultes.&lt;/li&gt;
&lt;li&gt;alta disponibilitat: MongoDB ofereix mecanismes de replicació de les
dades amb recuperació automàtica de caigudes i redundància de dades.&lt;/li&gt;
&lt;li&gt;escalat automàtic: ens ofereix un mecanisme de distribució de dades
automatitzat (&lt;em&gt;sharding&lt;/em&gt;) que ens permet que les nostres dades
creixin sense limitacions &lt;a class="footnote-reference" href="#limitacionsharding" id="id1"&gt;[2]&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A MongoDB, els registres es coneixen com a &lt;em&gt;documents&lt;/em&gt;, o també com a
&lt;em&gt;objectes&lt;/em&gt;. Un document és bàsicament un conjunt de parells
clau-valor, en format &lt;a class="reference external" href="http://json.org/"&gt;JSON&lt;/a&gt; (JavaScript Object
Notation), un format lleuger per l'intercanvi de dades &lt;a class="footnote-reference" href="#bson" id="id2"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Molt breument, un objecte JSON està composat per una llista de parells
clau-valor entre claus ('{' i '}'). Cada parell està format per una
clau de tipus string, el caràcter ':' i el valor associat a la clau.
Els valors poden ser un string, un número, un booleà (&lt;em&gt;true&lt;/em&gt; o
&lt;em&gt;false&lt;/em&gt;), el valor &lt;em&gt;null&lt;/em&gt;, una seqüència de valors entre claudàtors
('[' i ']'), o un altre objecte JSON.&lt;/p&gt;
&lt;p&gt;Però deixem d'imaginar. Veiem ja un exemple concret d'objecte JSON:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;títol&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Two Suns&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;grup&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Bat for Lashes&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;data&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;2009-04-03&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;gèneres&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Art Rock&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;cantants&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Natasha Khan&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;cançons&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;Glass&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s2"&gt;&amp;quot;Sleep Alone&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s2"&gt;&amp;quot;Moon and Moon&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s2"&gt;&amp;quot;Daniel&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s2"&gt;&amp;quot;Peace of Mind&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s2"&gt;&amp;quot;Siren Song&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s2"&gt;&amp;quot;Pearl&amp;#39;s Dream&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s2"&gt;&amp;quot;Good Love&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s2"&gt;&amp;quot;Two Planets&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s2"&gt;&amp;quot;Travelling Woman&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;cançó&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;The Big Sleep&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;cantant&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Scott Walker&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
                &lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Així, &amp;quot;títol&amp;quot;:&amp;quot;Two Suns&amp;quot; és un exemple de clau-valor on &amp;quot;títol&amp;quot; és la
clau i &amp;quot;Two Suns&amp;quot; el valor. En el cas de la clau &amp;quot;cançons&amp;quot;, el seu
valor és un &lt;em&gt;array&lt;/em&gt;. En aquest cas, tots els valors de l'array són
strings corresponents als títols de les cançons cantades per la
cantant del grup (Natasha Khan), excepte la darrera cançó que apareix
com un altre document JSON on s'especifica tant el nom de la cançó com
el del cantant que la canta.&lt;/p&gt;
&lt;p&gt;Fixa't també en els elements &amp;quot;gèneres&amp;quot; i &amp;quot;cantants&amp;quot;. Tots dos tenen un
únic element, malgrat la clau sembla indicar que poden haver-ne més.
Més endavant veurem que el tipus del valor d'una clau pot canviar molt
fàcilment. Així, &amp;quot;cantants&amp;quot; podria passar a tenir una llista de
cantants, mentre que gèneres podria haver passat a ser un únic string
especificant el gènere.&lt;/p&gt;
&lt;p&gt;Tot plegat, ofereix una gran flexibilitat
a l'hora de representar dades sense la rigidesa d'estructura que
imposaria el model relacional.&lt;/p&gt;
&lt;p&gt;A banda, els documents o objectes troben una fàcil correspondència amb
els tipus de molts llenguatges de programació.&lt;/p&gt;
&lt;div class="section" id="exercici-1-un-altre-album"&gt;
&lt;h3&gt;Exercici 1. Un altre àlbum&lt;/h3&gt;
&lt;p&gt;Crea un document amb l'estructura de l'exemple, amb dades d'algun
àlbum musical que t'agradi (o detestis)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-la-classe-album"&gt;
&lt;h3&gt;Exercici 2. La classe Àlbum&lt;/h3&gt;
&lt;p&gt;Defineix la classe &lt;em&gt;Album&lt;/em&gt; en Java, que presenti les
propietats que apareixen al document anterior. Inclou els mètodes
d'accés.&lt;/p&gt;
&lt;p&gt;Evidentment Java disposa de tipus de dades que poden ser més
adequats per representar alguns dels valors que apareixen al document
JSON (ex. la data)&lt;/p&gt;
&lt;p&gt;Podem ignorar el cas de les cançons no cantades per la cantant
principal, de manera que la propietat &amp;quot;cançons&amp;quot; només guardi els
títols de les cançons. És clar, si vols filar més prim, pots crear la
classe Cançó, amb el nom de la cançó i del cantant.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-els-albums-al-model-relacional"&gt;
&lt;h3&gt;Exercici 3. Els àlbums al model relacional&lt;/h3&gt;
&lt;p&gt;Al model relacional clàssic (no l'anomenat model objecte-relacional),
no disposem d'arrays als camps. Normalment ho resoldrem amb taules
addicionals relacionant-les amb 1:N.&lt;/p&gt;
&lt;p&gt;En aquest exercici se't demana que facis una proposta de model
relacional per a poder guardar les dades de diferents àlbums.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-un-json-pels-correus-electronics"&gt;
&lt;h3&gt;Exercici 4. Un JSON pels correus electrònics&lt;/h3&gt;
&lt;p&gt;Un correu electrònic (simplificat) està format per les següents dades:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;un tema (el subject o títol del missatge)&lt;/li&gt;
&lt;li&gt;una data d'enviament&lt;/li&gt;
&lt;li&gt;una adreça origen&lt;/li&gt;
&lt;li&gt;una o més adreces de destinació&lt;/li&gt;
&lt;li&gt;un cos (el text del missatge)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Inventat unes dades concretes d'un correu electrònic simplificat com
el descrit anteriorment, i defineix un document JSON que contingui
aquestes dades.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-introduccio-de-dades-a-mongodb"&gt;
&lt;h3&gt;Exercici 5. Introducció de dades a MongoDB&lt;/h3&gt;
&lt;p&gt;En aquest exercici introduirem algunes dades a MongoDB.
Si no tens accés a un servidor de MongoDB, pots
instal·lar-te'l al teu equip tot seguint aquestes &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/guia-dinstallacio-de-mongodb.html"&gt;instruccions
d'instal·lació&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Atenció: no et preocupis pels detalls de les comandes que et proposa
aquest exercici. Simplement intenta entendre què estan fent per a tu.
Més endavant disposaràs d'explicacions més detallades.&lt;/p&gt;
&lt;p&gt;Crea un fitxer de text anomenat &lt;em&gt;albums.js&lt;/em&gt; i escriu-hi un mínim de
dos àlbums (el de l'exemple i el de l'exercici anterior) Comprova
visualment que els dos documents apareixen complets al fitxer (ex. que
no falta el darrer claudàtor)&lt;/p&gt;
&lt;p&gt;Incorpora les dades al servidor amb la comanda:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mongoimport --jsonArray -d &lt;span class="nb"&gt;test&lt;/span&gt; -c albums --drop &amp;lt; albums.js
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Comprova que has introduït les dades correctament.&lt;/p&gt;
&lt;p&gt;Primer entra a la shell de MongoDB:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mongo
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A continuació, comprova que s'ha creat la nova col·lecció anomenada
&amp;quot;albums&amp;quot; amb la comanda:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&amp;gt; show collections
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Hauria d'aparèixer llistada al menys la col·lecció &amp;quot;albums&amp;quot;.&lt;/p&gt;
&lt;p&gt;Consulta ara les dades de la col·lecció &amp;quot;albums&amp;quot; amb la
comanda:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&amp;gt; db.albums.find().pretty()
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si estàs veient les dues entrades que has introduït, felicitats. Has
poblat i consultat les teves primeres dades a MongoDB. Altrament,
revisa el que has fet per trobar l'error. Probablement és un problema
amb el contingut del fitxer d'entrada. No tinguis por de tornar a
llençar la comanda d'importació. L'opció '--drop' netejarà qualsevol
dada prèvia de la col·lecció.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="articles-d-aquesta-colleccio"&gt;
&lt;h2&gt;Articles d'aquesta col·lecció&lt;/h2&gt;
&lt;p&gt;T'he preparat els següents articles per a facilitar la teva
introducció a MongoDB.&lt;/p&gt;
&lt;p&gt;Et recomano que els segueixis de manera seqüencial i que realitzis els
exercicis que hi trobaràs. En general t'haurien de resultar molt
senzills, tant per realitzar com per comprovar que els has fet
correctament, doncs estan dissenyats per comprovar que has entès cada
punt treballat. Si no estàs segur d'alguna cosa, pregunta
&lt;a class="footnote-reference" href="#iestiguisaclasse" id="id3"&gt;[3]&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/guia-dinstallacio-de-mongodb.html"&gt;Guia d'instal·lació&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Una breu guia per a orientar-te en la instal·lació de MongoDB&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/introduccio-a-la-shell-de-mongodb.html"&gt;Introducció a la Shell&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;MongoDB ofereix un entorn interactiu de comandes (shell). Aquest
article el presenta.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/consultes-basiques-amb-mongodb.html"&gt;Consultes bàsiques&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Comença aprenent a realitzar les consultes més elementals amb
MongoDB.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/consultes-amb-criteri.html"&gt;Consultes amb criteri&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Amplia els teus recursos per a afinar les consultes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/comptar-documents.html"&gt;Comptar documents&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;En aquest breu article aprendràs a fer una consulta bàsica per
conèixer &lt;em&gt;quants&lt;/em&gt; documents en comptes de &lt;em&gt;quins&lt;/em&gt; documents.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/seleccio-de-camps.html"&gt;Selecció de camps&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Aconsegueix només la informació dels camps que t'interessin.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/operadors-de-selleccio.html"&gt;Operadors de sel·lecció&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Aprèn a realitzar consultes més sofisticades com ara, que considerin
rangs de valors.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/ordre-dels-resultats.html"&gt;Ordre dels resultats&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;En aquest article aprendràs com controlar en quin ordre et lliurarà
MongoDB els resultats.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/insercio-de-documents.html"&gt;Inserció de documents&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Més detall sobre la inserció de documents.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/eliminacio-de-documents.html"&gt;Eliminació de documents&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Com desfer-te dels documents que ja no t'interessen.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/modificacio-de-dades.html"&gt;Modificació de dades&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Com modificar continguts dels documents enregistrats.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/subdocuments.html"&gt;Subdocuments&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Els documents poden contenir elements que a l'hora són també
documents. En aquest article tindràs oportunitat d'entendre tant la
utilitat com la manera de manegar-ho.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/arrays.html"&gt;Arrays&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Els documents poden contenir elements que no són un valor únic sinó
una llista de valors. Aprèn com va això en aquest article.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/disseny-de-colleccions.html"&gt;Disseny de col·leccions&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Unes pinzellades que t'ajudin a prendre decisions de disseny dels
teus primers models de dades en MongoDB.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;hr class="docutils" /&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="bson" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Internament, MongoDB emmagatzema les dades en una versió
ampliada de JSON, anomenada BSON. Pots trobar més informació al
respecte en l'article &lt;a class="reference external" href="http://www.mongodb.com/json-and-bson"&gt;JSON and BSON&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="limitacionsharding" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Evidentment, no tindras limitacions per crèixer si
tens un pressupost il·limitat per contractar/muntar nous servidors.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="iestiguisaclasse" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Em temo que aquest oferiment només el puc
adreçar als meus alumnes i durant el curs actual. Si no és el teu
cas, sempre pots intentar contactar amb mi (trobaràs el meu correu
al peu d'aquesta pàgina).  Et demano, però, paciència i comprensió.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 21:13:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:introduccio-al-mongodb.html</guid><category>mongoDB</category></item><item><title>Guia d'instal·lació de MongoDB</title><link>http://apuntstecnics.herokuapp.com/guia-dinstallacio-de-mongodb.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquesta guia descriu pas a pas la instal·lació de la darrera versió de
MongoDB sobre un sistema operatiu Debian o similar.&lt;/p&gt;
&lt;p&gt;Si el teu sistema operatiu és un altre o bé vols fer servir una
instal·lació més automatitzada, pots seguir les indicacions de la
&lt;a class="reference external" href="http://docs.mongodb.org/manual/installation/"&gt;pàgina oficial&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Aquestes instruccions no requereixen de permís de superusuari i estan
orientades a oferir un servidor de MongoDB usable per a realitzar
proves en local.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="installacio"&gt;
&lt;h2&gt;Instal·lació&lt;/h2&gt;
&lt;p&gt;Descarrega la darrera versió (&lt;em&gt;Production Release&lt;/em&gt;) &lt;a class="footnote-reference" href="#darreraversio" id="id1"&gt;[1]&lt;/a&gt;
a &lt;a class="reference external" href="http://www.mongodb.org/downloads"&gt;la secció d'instal·lació de MongoDB&lt;/a&gt;.  Probablement t'interessarà la
Linux 64-bit i el pots descarregar a &lt;tt class="docutils literal"&gt;~/Baixades&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Desempaqueta el fitxer descarregat (com ara
mongodb-linux-x86_64-2.4.9.tgz):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mkdir -p ~/apps
&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ~/apps
&lt;span class="nv"&gt;$ &lt;/span&gt;tar xzvf ~/Baixades/mongodb-linux-x86_64-2.4.9.tgz
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Afegeix-lo a la variable &lt;tt class="docutils literal"&gt;PATH&lt;/tt&gt; per a poder fer servir els
programes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$PATH&lt;/span&gt;:~/apps/mongodb-linux-x86_64-2.4.9/bin
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nota: pots afegir-ho al teu ~/.bashrc si vols que es mantingui en
futures execucions.&lt;/p&gt;
&lt;p&gt;Per defecte, MongoDB espera que existeixin els següents directoris:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;/data
/data/db
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquesta instal·lació evitarem &lt;em&gt;embrutar&lt;/em&gt; l'arrel del nostre sistema
de fitxers i, a l'hora, la necessitat de disposar de privilegis
d'administrador. Així, crearem l'espai per les dades a la carpeta del
nostre usuari. Evidentment, si no tens cap problema amb l'opció per
defecte, endavant amb un &lt;tt class="docutils literal"&gt;sudo mkdir &lt;span class="pre"&gt;-p&lt;/span&gt; /data/db&lt;/tt&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mkdir -p ~/data/db
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ara ja podem llençar el servidor &lt;a class="footnote-reference" href="#llensador" id="id2"&gt;[2]&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mongod --dbpath ~/data
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;O, si has creat la carpeta al lloc per defecte, simplement:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mongod
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nota: el pots aturar en qualsevol moment, per exemple amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;killall mongod
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per defecte, el servidor escoltarà al port 27017. Et proposo que de
moment no ho canviïs a menys que tinguis alguna bona raó &lt;a class="footnote-reference" href="#raocanvi" id="id3"&gt;[3]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Arrencarem ara la shell que ens ofereix MongoDB per provar que
funciona. Obre una altra consola i simplement escriu:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mongo
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si tot ha anat bé, hauries de tenir un nou prompt en forma de &lt;strong&gt;&amp;gt;&lt;/strong&gt;
&lt;a class="footnote-reference" href="#mongoerror" id="id4"&gt;[4]&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mongo
MongoDB shell version: 2.4.9
connecting to: &lt;span class="nb"&gt;test&lt;/span&gt;
&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Escriu la següent comanda per saber a quina base de dades s'ha
connectat:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&amp;gt; db
test
&amp;gt; exit
bye
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per defecte, la mongo shell es connecta a la base de dades &lt;tt class="docutils literal"&gt;test&lt;/tt&gt;.
Així que si has vist aquesta resposta, és que tot ha anat correcte.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="darreraversio" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En el moment de preparar aquesta guia la darrera
versió disponible era la 2.4.9.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="llensador" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;És possible que trobis incòmode estar indicant la
carpeta de les dades cada cop que arrenquis el servidor. Et proposo
que creis un llençador (potser al mateix mongodb/bin) amb el
següent contingut:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="lineno"&gt;1 &lt;/span&gt;  &lt;span class="c"&gt;#! /bin/bash&lt;/span&gt;
&lt;span class="lineno"&gt;2 &lt;/span&gt;  &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Llençador de mongod&amp;quot;&lt;/span&gt;
&lt;span class="lineno"&gt;3 &lt;/span&gt;  &lt;span class="nv"&gt;a&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;pidof mongod&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="lineno"&gt;4 &lt;/span&gt;  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$a&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="lineno"&gt;5 &lt;/span&gt;  &lt;span class="k"&gt;then&lt;/span&gt;
&lt;span class="lineno"&gt;6 &lt;/span&gt;      mongod --dbpath ~/data/ &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
&lt;span class="lineno"&gt;7 &lt;/span&gt;  &lt;span class="k"&gt;else&lt;/span&gt;
&lt;span class="lineno"&gt;8 &lt;/span&gt;      &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Ja està en execució amb pid &lt;/span&gt;&lt;span class="nv"&gt;$a&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="lineno"&gt;9 &lt;/span&gt;  &lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p class="last"&gt;Qui sap? Potser en un futur li vols afegir altres opcions, com ara
un altre port.&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="raocanvi" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Una bona raó per canviar pot ser perquè estàs
instal·lant el servidor de MongoDB en una màquina virtual.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="mongoerror" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;En cas que no hagis arrencat correctament el
servidor, trobaràs una resposta similar a la següent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;$ mongo
MongoDB shell version: 2.4.9
connecting to: test
Fri Jan 31 18:39:53.104 Error: couldn&amp;#39;t connect to server 127.0.0.1:27017 at src/mongo/shell/mongo.js:145
exception: connect failed
&lt;/pre&gt;&lt;/div&gt;
&lt;p class="last"&gt;Arrenca el servidor i torna a provar.&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 21:12:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:guia-dinstallacio-de-mongodb.html</guid><category>mongoDB</category></item><item><title>Introducció a la shell de MongoDB</title><link>http://apuntstecnics.herokuapp.com/introduccio-a-la-shell-de-mongodb.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;A aquesta guia hi trobaràs la descripció d'ús de la &lt;em&gt;shell&lt;/em&gt; de MongoDB
i altres utilitats d'introducció i bolcat de dades des de línia de
comanda que ofereix el paquet de MongoDB que vàrem instal·lar a &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/guia-dinstallacio-de-mongodb.html"&gt;la
guia anterior&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Aquest article t'ofereix una guia ràpida per les eines principals que
farem servir a la resta d'aquesta sèrie d'articles.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="la-shell-de-mongodb"&gt;
&lt;h2&gt;La &lt;em&gt;shell&lt;/em&gt; de MongoDB&lt;/h2&gt;
&lt;p&gt;La &lt;em&gt;shell&lt;/em&gt; de MongoDB és un programa que ens ofereix la possibilitat
de connectar i interaccionar amb un servidor MongoDB.&lt;/p&gt;
&lt;p&gt;Si has arrencar el servidor de MongoDB (mongod) amb les opcions
indicades a la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/guia-dinstallacio-de-mongodb.html"&gt;guia d'instal·lació&lt;/a&gt;  pots arrencar la shell
simplement executant &lt;a class="footnote-reference" href="#opcionsdefecte" id="id1"&gt;[1]&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mongo
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ara disposes d'un prompt '&amp;gt;'&lt;/p&gt;
&lt;p&gt;Per defecte, mongo es connecta a la base de dades 'test'. Ho pots
comprovar escrivint:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&amp;gt; db
test
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;em&gt;db&lt;/em&gt; és una variable de la shell que conté una referència a la base de
dades activa.&lt;/p&gt;
&lt;p&gt;Es poden consultar les bases de dades disponibles, amb qualsevol de
les dues commandes següents:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&amp;gt; show databases
&amp;gt; show dbs
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pots canviar de base de dades amb la següent comanda:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&amp;gt; use unaaltrabd
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En cas que unaaltrabd no existeixi, automàticament queda creada!. De
fet, no és del tot cert això, ja que quedarà permanentment creada a
partir del moment que hi inserim alguna dada.&lt;/p&gt;
&lt;p&gt;Les bases de dades distribueixen aquestes en &lt;em&gt;col·leccions&lt;/em&gt;. Així com
una base de dades de MongoDB correspon amb força fidelitat amb una
base de dades del model relacional, una col·lecció es podria traduir
com a taula.&lt;/p&gt;
&lt;p&gt;Podem consultar la llista de col·leccions de la base de dades actual
amb la comanda:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&amp;gt; show collections
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si no et surt cap de col·lecció i et trobes a la base de dades &amp;quot;test&amp;quot;,
és probable que encara no hagis realitzat tots els exercicis de
l'article &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/introduccio-al-mongodb.html"&gt;generalitats&lt;/a&gt;.&lt;/p&gt;
&lt;div class="section" id="exercici-1-on-es-la-meva-base-de-dades"&gt;
&lt;h3&gt;Exercici 1. On és la meva base de dades?&lt;/h3&gt;
&lt;p&gt;Des de la shell de MongoDB, següeix les següents instruccions, tot
guardant les commandes que facis servir a un document de text.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;mostra la llista de bases de dades&lt;/li&gt;
&lt;li&gt;canvia a la base de dades &lt;em&gt;unabdinexistent&lt;/em&gt;. Si ja existia, canvia
el nom per algun que no existeixi encara.&lt;/li&gt;
&lt;li&gt;comprova que et trobes realment a la nova base de dades&lt;/li&gt;
&lt;li&gt;torna a mostrar la llista de bases de dades&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Finalment, respon a les següents preguntes (inclou pregunta i resposta
al document de text on has anat guardant les comandes)&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;la nova base de dades es troba a la llista de bases de dades?&lt;/li&gt;
&lt;li&gt;perquè?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-ajuda"&gt;
&lt;h3&gt;Exercici 2. Ajuda&lt;/h3&gt;
&lt;p&gt;La shell de MongoDB ens ofereix la comanda &lt;em&gt;help&lt;/em&gt; que ens dóna una
visió ràpida de les possibilitats de la interfície.&lt;/p&gt;
&lt;p&gt;Aquest exercici et requereix que investiguis una mica amb aquesta
comanda per contestar les següents preguntes. No et limitis amb
respondre (ex. SI o NO), indica la comanda completa que t'ha permet
arribar a la teva conclusió.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Amb quina tecla podem fer autocompleció d'una comanda? (pista: &lt;em&gt;key
shortcuts&lt;/em&gt;)&lt;/li&gt;
&lt;li&gt;Podem accedir a comandes prèvies? (&lt;em&gt;command history&lt;/em&gt;)&lt;/li&gt;
&lt;li&gt;Com podem saber el directori des del que s'ha llençat la shell?
(pista: &lt;em&gt;admin&lt;/em&gt;)&lt;/li&gt;
&lt;li&gt;Com podem obtenir la data i hora actual del sistema? (pista:
&lt;em&gt;miscel·lània&lt;/em&gt;)&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-un-interpret-de-javascript"&gt;
&lt;h3&gt;Exercici 3. Un intèrpret de JavaScript&lt;/h3&gt;
&lt;p&gt;La shell de MongoDB inclou un intèrpret de JavaScript!&lt;/p&gt;
&lt;p&gt;Ho podem comprovar de la següent manera:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
     &lt;span class="nx"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="mi"&gt;3&lt;/span&gt;
&lt;span class="mi"&gt;4&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;D'aquesta manera, podem per exemple introduir dades a una col·lecció.
Executa el següent codi:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;prova&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;insert&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;});&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ara comprovarem que s'ha creat la col·lecció &lt;em&gt;prova&lt;/em&gt; (recordes la
comanda?)&lt;/p&gt;
&lt;p&gt;A continuació, mirarem el contingut de la col·lecció amb la comanda:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;prova&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({},{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;No està malament, oi?&lt;/p&gt;
&lt;p&gt;Vinga, et toca a tu. Crea la col·lecció &lt;em&gt;novaprova&lt;/em&gt; i afegeix-hi 10
documents. Els documents segueixen una sèrie on els tres primers
presentarien els següents continguts (no et preocupis de l'ordre dels
elements):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;num&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;num&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;num&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Recorda registrar totes les comandes i resultats d'aquest exercici en
un document com a resposta.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="importar-exportar"&gt;
&lt;h2&gt;Importar/exportar&lt;/h2&gt;
&lt;p&gt;El paquet de MongoDB bé amb algunes utilitats per afegir i extreure
dades de les col·leccions/bases de dades.&lt;/p&gt;
&lt;p&gt;Per importar i exportar les dades d'una col·lecció, disposem de les
utilitats &lt;a class="footnote-reference" href="#metodesimportacio" id="id2"&gt;[3]&lt;/a&gt;:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;$ mongoimport&lt;/li&gt;
&lt;li&gt;$ mongoexport&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Hi ha d'altres utilitats més adients per necessitats com ara còpies de
seguretat &lt;a class="footnote-reference" href="#metodesbackup" id="id3"&gt;[4]&lt;/a&gt;. No les tractarem en aquest article.&lt;/p&gt;
&lt;p&gt;La utilitat mongoimport permet importar continguts en format JSON i
CSV &lt;a class="footnote-reference" href="#tambetsv" id="id4"&gt;[2]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Un exemple típic d'ús és:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mongoimport --jsonArray -d calaix -c albums --drop &amp;lt; albums.js
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest exemple:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;--jsonArray: permet que mongoimport accepti les dades JSON amb un
format &amp;quot;maco&amp;quot;, és a dir, indentades per a facilitar la lectura
humana.&lt;/li&gt;
&lt;li&gt;-d: (o també --database) permet especificar la base de dades. En el
cas de l'exemple, la base de dades es diu &lt;em&gt;calaix&lt;/em&gt;. Si no
l'especifiquem, per defecte les insereix a &lt;em&gt;test&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;-c: (o també --collection) permet especificar la col·lecció on
deixar les dades. En el cas de l'exemple la col·lecció és &lt;em&gt;albums&lt;/em&gt;.
Si no especifiquem la col·lecció, el programa es queixa.&lt;/li&gt;
&lt;li&gt;--drop: fa que mongoimport elimini la col·lecció (si ja existia)
abans d'importar-hi les dades. Això evitarà que hi hagi informació
duplicada.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Hi ha altres opcions disponibles. Fes servir la següent comanda per
una primera ullada o consulta la documentació de MongoDB &lt;a class="reference external" href="http://docs.mongodb.org/manual/reference/program/mongoimport/"&gt;al respecte&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mongoimport --help
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En cas de que disposis de dades a una col·lecció, les pots extreure
amb la utilitat &lt;em&gt;mongoexport&lt;/em&gt;. Per exemple, les dades importades a
l'exemple d'ús de la utilitat mongoimport, es podrien exportar amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mongoexport -d calaix -c albums &amp;gt; calaix.albums.js
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-4-diff-import-js-export-js"&gt;
&lt;h3&gt;Exercici 4. diff import.js export.js&lt;/h3&gt;
&lt;p&gt;Crea un fitxer anomenat import.js amb el següent contingut:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;b&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;c&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;3&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;b&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;3&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;c&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;3&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;b&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;4&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;c&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;4&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;b&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;c&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;6&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Importa el contingut del fitxer a la base de dades &lt;em&gt;dadesvaluoses&lt;/em&gt; i
la col·lecció &lt;em&gt;imprescindibles&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Exporta ara les dades acabades d'introduir al fitxer &lt;em&gt;export.js&lt;/em&gt; i
compara el contigut respecte al de &lt;em&gt;import.js&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Hi ha alguna diferència entre el contingut dels dos fitxers? Quina?&lt;/p&gt;
&lt;p&gt;Prova d'importar el fitxer &lt;em&gt;export.js&lt;/em&gt; (fes servir l'opció --drop) i
torna a treure el contingut de la col·lecció a un altre fitxer (ex.
&lt;em&gt;nouexport.js&lt;/em&gt;) Hi trobes alguna diferència ara entre els continguts
de &lt;em&gt;export.js&lt;/em&gt; i &lt;em&gt;nouexport.js&lt;/em&gt;?&lt;/p&gt;
&lt;p&gt;Importa dos cops el contingut de &lt;em&gt;import.js&lt;/em&gt; (la primera amb l'opció
--drop i la segona sense).
Exporta el contingut a &lt;em&gt;exportduplicat.js&lt;/em&gt;. Quants cops apareix un
document amb el valor de la clau &amp;quot;a&amp;quot; igual a 1?&lt;/p&gt;
&lt;p&gt;Importa ara dos cops el contingut de &lt;em&gt;export.js&lt;/em&gt;. Novament, la primera
vegada fes servir l'opció --drop, metre que la segona vegada no.
Exporta el contingut a &lt;em&gt;exportnoduplicat.js&lt;/em&gt;. Quants cops apareix un
document amb el valor de la clau &amp;quot;a&amp;quot; igual a 1?&lt;/p&gt;
&lt;p&gt;Si estàs seguint els articles en l'ordre proposat, és probable que
encara no hagis estudiat el concepte d'identificador de document a
MongoDB. Amb tot, és possible que puguis fer servir coneixements de
bases de dades del model relacional. Intenta aventurar una explicació
als resultats que has trobat en aquest exercici.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="opcionsdefecte" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En cas que el servidor no estigui al &lt;em&gt;localhost&lt;/em&gt;
o hagis canviat el port, o altres canvis, et caldrà indicar aquesta
informació a la crida de la shell de MongoDB.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="tambetsv" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;De fet, també admet el format TSV (Tab Separated
Values) que és una mena de CSV on la separació es fa amb caràcters
de tabulació en comptes de comes.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="metodesimportacio" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Hi trobaràs molta més informació a l'article
&lt;a class="reference external" href="http://docs.mongodb.org/manual/core/import-export/"&gt;Import and Export MongoDB Data&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="metodesbackup" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Per si tens interés en aprofundir amb els mètodes
de còpia de seguretat, a la guia oficial de MongoDB hi trobaràs
l'article &lt;a class="reference external" href="http://docs.mongodb.org/manual/core/backups/"&gt;MongoDB Backups Methods&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 21:11:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:introduccio-a-la-shell-de-mongodb.html</guid><category>mongoDB</category></item><item><title>Consultes bàsiques amb MongoDB</title><link>http://apuntstecnics.herokuapp.com/consultes-basiques-amb-mongodb.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquest article estudiarem com podem obtenir la informació
emmagatzemada a una col·lecció en MongoDB.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="consulta"&gt;
&lt;h2&gt;Consulta&lt;/h2&gt;
&lt;p&gt;La raó principal de guardar les dades és poder-les recuperar
posteriorment. Quan guardem les dades a una base de dades,
probablement voldrem que aquesta recuperació sigui acceptablement
flexible i eficient.&lt;/p&gt;
&lt;p&gt;Recordarem que el llenguatge SQL ens ofereix la comanda de consulta
&lt;em&gt;SELECT&lt;/em&gt;. Es tracta d'una comanda que ens permet especificar amb molta
precisió i flexibilitat allò que volem consultar de la base de dades.&lt;/p&gt;
&lt;p&gt;Considera la següent consulta SQL que demana &lt;strong&gt;tots&lt;/strong&gt; els registres de
la taula &lt;em&gt;quadrats&lt;/em&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;quadrats&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="el-metode-find"&gt;
&lt;h3&gt;El mètode &lt;em&gt;find&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;MongoDB disposa del mètode &lt;em&gt;find&lt;/em&gt; i el seu parent &lt;em&gt;findOne&lt;/em&gt;. Si bé,
&lt;em&gt;find&lt;/em&gt; no ofereix totes les possibilitats de &lt;em&gt;SELECT&lt;/em&gt; &lt;a class="footnote-reference" href="#impacients" id="id1"&gt;[1]&lt;/a&gt;,
ens pot resultar molt còmode per la seva senzillesa d'ús.&lt;/p&gt;
&lt;p&gt;La sintàxi de consulta més propera a l'exemple anterior, en MongoDB
seria:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;quadrats&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si llencem però aquesta consulta, el més probable és que no obtinguem
cap resultat.&lt;/p&gt;
&lt;p&gt;En primer lloc, ens caldrà disposar d'alguna dada per a poder fer
consultes. Farem servir una tècnica similar a la que ja vam utilitzar a
l'article on introduíem la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/introduccio-a-la-shell-de-mongodb.html"&gt;shell de MongoDB&lt;/a&gt; :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;quadats&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;drop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;quadrats&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;insert&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;valor_&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)});&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;No et preocupis de moment pel detall de les dues línies anteriors.
Simplement eliminen la col·lecció &lt;em&gt;quadrats&lt;/em&gt; (si existia) i la tornen
a crear de nou, tot afegint-hi 100 entrades.&lt;/p&gt;
&lt;p&gt;Ara ja podem llençar la consulta amb possibilitats d'obtenir
resultats.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;quadrats&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943ee&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943ef&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943f0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943f1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_3&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943f2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_4&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943f3&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_5&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;25&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943f4&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_6&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;36&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943f5&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_7&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;49&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943f6&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_8&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943f7&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_9&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;81&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943f8&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_10&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943f9&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_11&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;121&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943fa&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_12&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;144&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943fb&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_13&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;169&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943fc&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_14&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;196&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943fd&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_15&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;225&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943fe&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_16&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943ff&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_17&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;17&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;289&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd5294400&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_18&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;324&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd5294401&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_19&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;361&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nx"&gt;Type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;it&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nx"&gt;more&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;ha aparegut un camp que no havíem introduït amb la clau &lt;em&gt;_id&lt;/em&gt;.
En breu, MongoDB ens genera un identificador de manera automàtica si
no li especifiquem nosaltres un. El tipus d'identificador es
&lt;em&gt;ObjectID&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Molt probablement els valors del camp &lt;em&gt;_id&lt;/em&gt; que t'apareguin a tu
seran diferents dels meus. És molt raonable.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;ha llistat només 20 entrades, encara que hi haurien d'haver 100. La
darrera línia ens dóna la pista amb el missatge &lt;em&gt;Escriu &amp;quot;it&amp;quot; per
més&lt;/em&gt;. Si escrivim &lt;em&gt;it&lt;/em&gt; ens mostrarà els 20 documents següents:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;it&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd5294402&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_20&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;400&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd5294403&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_21&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;441&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd5294415&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_39&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;39&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1521&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nx"&gt;Type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;it&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nx"&gt;more&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aquesta paginació la proveeix la shell de MongoDB.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;la manera de cridar a &lt;em&gt;find&lt;/em&gt; pot resultar una mica peculiar. Això és
perquè la comanda &lt;em&gt;find&lt;/em&gt; és en realitat un &lt;em&gt;mètode&lt;/em&gt; de la col·lecció
&lt;em&gt;quadrats&lt;/em&gt;. La col·lecció és, a la seva vegada, una propietat de
l'objecte &lt;em&gt;db&lt;/em&gt; que, recordem, no és més que una referència a la base
de dades en ús (inicialment &lt;em&gt;test&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;Podem consultar quin aspecte té la implementació del mètode &lt;em&gt;find&lt;/em&gt;
fent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;quadrats&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;
&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="nx"&gt;query&lt;/span&gt; &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;fields&lt;/span&gt; &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;limit&lt;/span&gt; &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;skip&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;batchSize&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;options&lt;/span&gt; &lt;span class="p"&gt;){&lt;/span&gt;
    &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;cursor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;DBQuery&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_mongo&lt;/span&gt; &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_db&lt;/span&gt; &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt; &lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_fullName&lt;/span&gt; &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;_massageObject&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="nx"&gt;query&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;fields&lt;/span&gt; &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;limit&lt;/span&gt; &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;skip&lt;/span&gt; &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;batchSize&lt;/span&gt; &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;options&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getQueryOptions&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;connObj&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getMongo&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;readPrefMode&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;connObj&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getReadPrefMode&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;readPrefMode&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;cursor&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;readPref&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;readPrefMode&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;connObj&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getReadPrefTagSet&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;cursor&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aviat veurem què volen dir alguns dels paràmetres disponibles
d'aquest mètode.&lt;/p&gt;
&lt;p&gt;Si la teva curiositat no et deixa esperar, pots consultar la resta
de mètodes disponibles a la secció &lt;a class="reference external" href="http://docs.mongodb.org/manual/reference/method/js-collection/"&gt;Collection Methods&lt;/a&gt;
de la documentació oficial de MongoDB.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-al-cub"&gt;
&lt;h3&gt;Exercici 1. Al cub&lt;/h3&gt;
&lt;p&gt;Crea la col·lecció &lt;em&gt;cubs&lt;/em&gt; i afegeix el cub dels primers 50 nombres
naturals. Finalment llença una consulta per veure els resultats.&lt;/p&gt;
&lt;p&gt;Pista: un dels documents que retorni la consulta hauria de
contenir les següents dades (amb altres valors en compte
dels interrogants):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;????????????????????????&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;cub&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="el-metode-findone"&gt;
&lt;h3&gt;El mètode &lt;em&gt;findOne&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;Sovint consultarem les dades d'una col·lecció només per fer-nos una
idea de quin aspecte tenen els seus continguts. MongoDB ens ofereix el
mètode &lt;em&gt;findOne&lt;/em&gt; per a aquest tipus de situacions.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;quadrats&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;findOne&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943ee&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que el document és el primer que ens oferia &lt;em&gt;find&lt;/em&gt;. Ara però,
apareix més llegible, amb els camps indentats.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-un-dels-cubs"&gt;
&lt;h3&gt;Exercici 2. Un dels cubs&lt;/h3&gt;
&lt;p&gt;Construeix una consulta que et permeti veure un element de la
col·lecció &lt;em&gt;cubs&lt;/em&gt; que vas crear en l'exercici anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="el-metode-pretty"&gt;
&lt;h3&gt;El mètode &lt;em&gt;pretty&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;A una llista de resultats d'una consulta &lt;em&gt;find&lt;/em&gt; se li pot aplicar el
mètode &lt;em&gt;pretty&lt;/em&gt;. Per exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;quadrats&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="nx"&gt;pretty&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943ee&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943ef&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;D'aquesta manera, també podem obtenir els documents indentats com amb
&lt;em&gt;findOne&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-cubs-macos"&gt;
&lt;h3&gt;Exercici 3. Cubs macos&lt;/h3&gt;
&lt;p&gt;Realitza una consulta a la col·lecció &lt;em&gt;cubs&lt;/em&gt; que et mostri les dades
formatades de manera més &lt;em&gt;maca&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="el-metode-limit"&gt;
&lt;h3&gt;El mètode &lt;em&gt;limit&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;Un altre mètode que es pot aplicar al resultat d'una consulta &lt;em&gt;find&lt;/em&gt;
és &lt;em&gt;limit&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, la següent crida seria equivalent a fer servir &lt;em&gt;findOne&lt;/em&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;quadrats&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="nx"&gt;pretty&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="nx"&gt;limit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943ee&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Seria l'equivalent de SQL&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;quadrats&lt;/span&gt; &lt;span class="k"&gt;LIMIT&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-cinc-cubs"&gt;
&lt;h3&gt;Exercici 4. Cinc cubs&lt;/h3&gt;
&lt;p&gt;Construeix una consulta que et mostri únicament cinc documents de la
col·lecció &lt;em&gt;cubs&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="el-metode-skip"&gt;
&lt;h3&gt;El mètode &lt;em&gt;skip&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;No sempre ens interessen els primers elements que apareixen a una
consulta amb &lt;em&gt;find&lt;/em&gt;. Per a poder-nos saltar un nombre de documents
concret, disposem del mètode &lt;em&gt;skip&lt;/em&gt;. Per exemple,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;quadrats&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="nx"&gt;skip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943f8&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_10&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943f9&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_11&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;121&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943fa&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_12&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;144&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943fb&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_13&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;169&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943fc&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_14&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;196&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943fd&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_15&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;225&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't com, en aquest cas, hem obtingut els documents posteriors als
10 primers.&lt;/p&gt;
&lt;p&gt;Com segurament imagines, &lt;em&gt;skip&lt;/em&gt; pot ser utilitzat conjuntament amb
&lt;em&gt;limit&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&amp;gt; db.quadrats.find().skip(2).limit(4)
{ &amp;quot;_id&amp;quot; : ObjectId(&amp;quot;5300f707d661d6bcd52943f0&amp;quot;), &amp;quot;nom&amp;quot; : &amp;quot;valor_2&amp;quot;, &amp;quot;val&amp;quot; : 2, &amp;quot;quadrat&amp;quot; : 4 }
{ &amp;quot;_id&amp;quot; : ObjectId(&amp;quot;5300f707d661d6bcd52943f1&amp;quot;), &amp;quot;nom&amp;quot; : &amp;quot;valor_3&amp;quot;, &amp;quot;val&amp;quot; : 3, &amp;quot;quadrat&amp;quot; : 9 }
{ &amp;quot;_id&amp;quot; : ObjectId(&amp;quot;5300f707d661d6bcd52943f2&amp;quot;), &amp;quot;nom&amp;quot; : &amp;quot;valor_4&amp;quot;, &amp;quot;val&amp;quot; : 4, &amp;quot;quadrat&amp;quot; : 16 }
{ &amp;quot;_id&amp;quot; : ObjectId(&amp;quot;5300f707d661d6bcd52943f3&amp;quot;), &amp;quot;nom&amp;quot; : &amp;quot;valor_5&amp;quot;, &amp;quot;val&amp;quot; : 5, &amp;quot;quadrat&amp;quot; : 25 }
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-retalla-quadrats"&gt;
&lt;h3&gt;Exercici 5. Retalla quadrats&lt;/h3&gt;
&lt;p&gt;Considera un altre cop la col·lecció &lt;em&gt;quadrats&lt;/em&gt; que vam poblar a
l'inici d'aquest article.&lt;/p&gt;
&lt;p&gt;Crea una consulta que mostri els tres documents a partir d'aquell que
té com a quadrat el valor 400. El resultat començarà amb el valor 20
per la clau &lt;em&gt;val&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Pistes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;no et compliquis gaire amb aquest exercici. Simplement s'espera que
facis una consulta i miris en quina posició apareix el quadrat amb
valor 400. A partir d'aquest salta conseqüentment i limita.&lt;/li&gt;
&lt;li&gt;si en comptes de tres, t'hagués demanat quatre documents, el darrer
hagués estat el document amb el parell &lt;tt class="docutils literal"&gt;&amp;quot;nom&amp;quot;: &amp;quot;valor_23&amp;quot;&lt;/tt&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-consulta-de-combinacions"&gt;
&lt;h3&gt;Exercici 6. Consulta de combinacions&lt;/h3&gt;
&lt;p&gt;Crearem la col·lecció &lt;em&gt;combinacions5x3&lt;/em&gt; que contindrà les combinacions
de cinc elements agafats de 3 en 3 i sense repeticions.&lt;/p&gt;
&lt;p&gt;Farem servir les següents comandes a la shell de MongoDB:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;combinacions5x3&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;drop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;a&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nx"&gt;a&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nx"&gt;a&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;b&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nx"&gt;b&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nx"&gt;b&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;c&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nx"&gt;c&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nx"&gt;c&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;a&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="nx"&gt;b&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nx"&gt;a&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="nx"&gt;c&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nx"&gt;b&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="nx"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;combinacions5x3&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;insert&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;a&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nx"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;b&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nx"&gt;b&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;c&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nx"&gt;c&lt;/span&gt;&lt;span class="p"&gt;});&lt;/span&gt; &lt;span class="p"&gt;}}}}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Com amb el cas dels quadrats, no et preocupis si no entens del tot
aquestes comandes.&lt;/p&gt;
&lt;p&gt;Construeix una consulta que mostri els cinc documents de
&lt;em&gt;combinacions5x3&lt;/em&gt; a partir del 10é. És a dir, cal que et &lt;em&gt;saltis&lt;/em&gt; els
deu primers i que només n'agafis 5. Ah! Mira que els resultats es
vegin &lt;em&gt;macos&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-skip-limit-o-limit-skip"&gt;
&lt;h3&gt;Exercici 7. &lt;em&gt;skip().limit()&lt;/em&gt; o &lt;em&gt;limit().skip()&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;T'has plantejat si l'ordre en que s'apliquen aquests dos mètodes té
alguna repercussió en el resultat?&lt;/p&gt;
&lt;p&gt;És a dir, la següent consulta seria diferent/equivalent a l'anterior?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;quadrats&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="nx"&gt;limit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;skip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Comprova-ho.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-8-multiples-skip-i-limit"&gt;
&lt;h3&gt;Exercici 8. Múltiples &lt;em&gt;skip&lt;/em&gt; i &lt;em&gt;limit&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;Comprova què passa quan encadenes més d'un &lt;em&gt;skip&lt;/em&gt; o més d'un &lt;em&gt;limit&lt;/em&gt; a
la mateixa consulta.&lt;/p&gt;
&lt;p&gt;Per exemple, són equivalents les següents dues consultes?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;quadrats&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="nx"&gt;skip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;skip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;limit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;quadrats&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="nx"&gt;skip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;limit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Descriu què passa tant per &lt;em&gt;skip&lt;/em&gt; com per &lt;em&gt;limit&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="impacients" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Pels impacients val a dir que &lt;em&gt;find&lt;/em&gt; es complementa
amb altres comandes que ofereix MongoDB de manera que aconseguirem
pràcticament la mateixa funcionalitat que amb &lt;em&gt;SELECT&lt;/em&gt;. On
pràcticament l'has de llegir com: tenint en compte les diferències
entre el model relacional i el documental, allà on es poden
comparar la funcionalitat serà la mateixa, i allà on no, de vegades
en &amp;quot;guanya&amp;quot; un i de vegades l'altre.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 21:10:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:consultes-basiques-amb-mongodb.html</guid><category>mongoDB</category></item><item><title>Consultes amb criteri</title><link>http://apuntstecnics.herokuapp.com/consultes-amb-criteri.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Amb el que hem vist a la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/consultes-basiques-amb-mongodb.html"&gt;secció anterior&lt;/a&gt; ja sabem com consultar les
dades d'una col·lecció, veure-les d'una manera maca, limitar el nombre
de documents i saltar-nos els primers si no ens interessen.&lt;/p&gt;
&lt;p&gt;Podem entendre els mètodes &lt;em&gt;skip&lt;/em&gt; i &lt;em&gt;limit&lt;/em&gt; com eines per &amp;quot;tallar&amp;quot;
l'inici i final de la llista retornada.&lt;/p&gt;
&lt;p&gt;A aquesta secció obtindrem encara més control sobre quins documents
ens interessa, tot especificant característiques que han d'acomplir.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="seleccio-segons-un-criteri"&gt;
&lt;h2&gt;Selecció segons un criteri&lt;/h2&gt;
&lt;p&gt;En SQL disposem de la clàusula &lt;em&gt;WHERE&lt;/em&gt; per a poder discriminar els
registres que ens interessen d'una consulta.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;quadrats&lt;/span&gt; &lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;valor_2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En MongoDB ho especifiquem afegint un paràmetre al mètode &lt;em&gt;find&lt;/em&gt;.
Aquest paràmetre és de tipus... document!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;quadrats&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5300f707d661d6bcd52943f0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;valor_2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;val&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;quadrat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-1-qui-te-el-quadrat-4"&gt;
&lt;h3&gt;Exercici 1. Qui té el quadrat 4?&lt;/h3&gt;
&lt;p&gt;Construeix una consulta que retorni el document (o documents) que
continguin el valor 4 per la clau &lt;em&gt;quadrat&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-una-base-de-dades-de-persones"&gt;
&lt;h3&gt;Exercici 2. Una base de dades de persones&lt;/h3&gt;
&lt;p&gt;Malauradament, la col·lecció &lt;em&gt;quadrats&lt;/em&gt; que tan bé ens ha anat per a
introduir les consultes anteriors, resulta massa limitada per que
aquest tipus de consultes tinguin sentit. Així que crearem una
col·lecció amb una mica més de gràcia.&lt;/p&gt;
&lt;p&gt;Introdueix les següents dades a la col·lecció &lt;em&gt;persones&lt;/em&gt;
&lt;a class="footnote-reference" href="#dadesinventades" id="id1"&gt;[2]&lt;/a&gt; dins de la base de dades &lt;em&gt;test&lt;/em&gt; (pista:
&lt;em&gt;mongoimport&lt;/em&gt;)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Júlia Galceran Buscart&amp;quot;&lt;/span&gt;  &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;27&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;monjo/a&amp;quot;&lt;/span&gt;           &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;      &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Irene Ruíz Cloquell&amp;quot;&lt;/span&gt;     &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;44&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;  &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2500&lt;/span&gt;   &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Marc Hernández Muñoz&amp;quot;&lt;/span&gt;    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;34&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;docent&amp;quot;&lt;/span&gt;            &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1200&lt;/span&gt;   &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Iker Fernández Fijo&amp;quot;&lt;/span&gt;     &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;fotògraf/a&amp;quot;&lt;/span&gt;        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2200&lt;/span&gt;   &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Iker Navarro López&amp;quot;&lt;/span&gt;      &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;35&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;  &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2800&lt;/span&gt;   &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Cristina Navarro Sánchez&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;director/a&amp;quot;&lt;/span&gt;        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;120000&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Alexia López Fabrelle&amp;quot;&lt;/span&gt;   &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;equilibrista&amp;quot;&lt;/span&gt;      &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3900&lt;/span&gt;   &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Pol Fernández García&amp;quot;&lt;/span&gt;    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;34&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;  &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1800&lt;/span&gt;   &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Carla Fernández Balló&amp;quot;&lt;/span&gt;   &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pintor/a&amp;quot;&lt;/span&gt;          &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2400&lt;/span&gt;   &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Pau Romero Vilchez&amp;quot;&lt;/span&gt;      &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;psicòleg/psicòloga&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2200&lt;/span&gt;   &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pots descarregar el fitxer &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/resources/persones01.json"&gt;d'aquest enllaç&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Un cop introduïdes, escriu una consulta que et mostri tots els
desenvolupadors/desenvolupadores.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="seleccio-amb-mes-d-un-criteri"&gt;
&lt;h3&gt;Selecció amb més d'un criteri&lt;/h3&gt;
&lt;p&gt;Imagina que t'interessa disposar de totes les persones que siguin
desenvolupadores amb una edat de 35 anys. La consulta seria:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;35&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530110cb37dd0ec3059698f7&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Iker Navarro López&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;35&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2800&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;És a dir, per a afegir més d'un criteri, simplement hem d'afegir les
diferents claus i valors esperats dins el document que passem com a
argument a &lt;em&gt;find&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530110cb37dd0ec3059698f4&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Irene Ruíz Cloquell&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;44&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530110cb37dd0ec3059698f7&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Iker Navarro López&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;35&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530110cb37dd0ec3059698fa&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Pol Fernández García&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;34&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-mes-d-un-criteri-a-sql"&gt;
&lt;h3&gt;Exercici 3. Més d'un criteri a SQL&lt;/h3&gt;
&lt;p&gt;Proposa una traducció amb SQL de la consulta anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-desenvolupadors-de-34-anys"&gt;
&lt;h3&gt;Exercici 4. Desenvolupadors de 34 anys?&lt;/h3&gt;
&lt;p&gt;Construeix una consulta que retorni els desenvolupadors amb 34 anys.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-persones-amb-34-o-amb-44-anys"&gt;
&lt;h3&gt;Exercici 5. Persones amb 34 o amb 44 anys?&lt;/h3&gt;
&lt;p&gt;Què passa quan repeteixes la clau a una consulta? Imagina que la
consulta que presentem té els següents criteris:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;34&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;44&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En principi, una consulta com aquesta podria ser interessant si i
només si MongoDB l'entengués com a &amp;quot;vull les persones que tinguin 34
&lt;strong&gt;o&lt;/strong&gt; 44 anys d'edat&amp;quot; &lt;a class="footnote-reference" href="#ornoand" id="id2"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Atenció: més endavant veurem com podem demanar documents amb un o
altre valor. Aquest exercici només pretén que siguis conscient del
comportament de MongoDB en aquestes situacions.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="ornoand" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;És clar, voldríem &lt;strong&gt;OR&lt;/strong&gt; i no &lt;strong&gt;AND&lt;/strong&gt;. Si no ho veus
clar, penso que és important que li donis alguna volta o, si més
no, que &lt;em&gt;discretament&lt;/em&gt; demanis algú que t'ho aclareixi.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="dadesinventades" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Els noms i la resta de dades que apareixen en
aquest fitxer són inventades. Han estat generades automàticament a
partir de llistats oficials de noms i cognoms que diferents
organismes fan públics a la web. Insisteixo: qualsevol semblança
amb la realitat &lt;strong&gt;és pura coincidència&lt;/strong&gt;. És a dir, que no em
vingui ningú queixant-se de que el seu nom apareix al llistat i que
li he posat un sou massa baix.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 21:09:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:consultes-amb-criteri.html</guid><category>mongoDB</category></item><item><title>Comptar documents</title><link>http://apuntstecnics.herokuapp.com/comptar-documents.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquesta breu secció ens mostra com podem demanar a MongoDB que ens
calculi &lt;em&gt;quants&lt;/em&gt; documents en comptes de &lt;em&gt;quins&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="comptar-elements"&gt;
&lt;h2&gt;Comptar elements&lt;/h2&gt;
&lt;p&gt;De vegades podem estar interessats en conèixer quants documents hi ha
disponibles a una col·lecció.&lt;/p&gt;
&lt;p&gt;Recordem la manera de SQL:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="k"&gt;COUNT&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;La manera en que MongoDB resol aquesta funcionalitat és amb el mètode
&lt;em&gt;count&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Així, per comptar quants documents hi ha a la col·lecció &lt;em&gt;persones&lt;/em&gt;
farem:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;count&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="mi"&gt;10&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;O si estem interessats en saber quants desenvolupadors hi ha:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;count&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;professió&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;desenvolupador/a&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="mi"&gt;3&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-1-quants-tenen-21-anys"&gt;
&lt;h3&gt;Exercici 1. Quants tenen 21 anys?&lt;/h3&gt;
&lt;p&gt;Construeix una consulta que retorni el nombre de persones que tenen 21
anys.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-quants-desenvolupadors-cobren-2800"&gt;
&lt;h3&gt;Exercici 2. Quants desenvolupadors cobren 2800€?&lt;/h3&gt;
&lt;p&gt;Construeix una consulta que retorni el nombre de
desenvolupadors/desenvolupadores que cobren 2800€&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-comptar-a-tort-i-a-dret"&gt;
&lt;h3&gt;Exercici 3. Comptar a tort i a dret&lt;/h3&gt;
&lt;p&gt;Respon a les següents preguntes, tot afegint les comandes i resultats
de la shell de MongoDB que t'han permès comprovar la teva resposta.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Què passa si demanem comptar els documents d'una col·lecció
inexistent?&lt;/li&gt;
&lt;li&gt;Què passa si demanem comptar els documents que acompleixen un valor
per una clau que no disposa cap document de la col·lecció?&lt;/li&gt;
&lt;li&gt;Què passa si demanem comptar els documents que acompleixen dos
valors diferents per una mateixa clau?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 21:08:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:comptar-documents.html</guid><category>mongoDB</category></item><item><title>Selecció de camps</title><link>http://apuntstecnics.herokuapp.com/seleccio-de-camps.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Ara que sabem com podem seleccionar els documents que ens interessa,
potser que ens comencem a plantejar com discriminar quins camps ens
calen de les consultes.&lt;/p&gt;
&lt;p&gt;SQL ens ofereix la possibilitat d'especificar a la clàusula &lt;em&gt;SELECT&lt;/em&gt;
quins són els camps que volem. Per exemple,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;professio&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest article aprendrem com fer l'equivalent amb MongoDB.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="limitar-els-camps"&gt;
&lt;h2&gt;Limitar els camps&lt;/h2&gt;
&lt;p&gt;El primer paràmetre de &lt;em&gt;find&lt;/em&gt; ens permet &amp;quot;retallar horitzontalment&amp;quot;
els resultats. És a dir, ens quedem només amb els documents que
coincideixen amb els valors indicats.&lt;/p&gt;
&lt;p&gt;El mètode &lt;em&gt;find&lt;/em&gt; accepta un segon paràmetre que ens ofereix la
possibilitat de &amp;quot;retallar verticalment&amp;quot;, és a dir, podrem quedar-nos
només amb els &lt;em&gt;camps&lt;/em&gt; que ens interessin.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Representació de la selecció horitzontal i vertical" src="http://apuntstecnics.herokuapp.com/images/mongodb.008.img001.seleccio_find.png" /&gt;
&lt;/div&gt;
&lt;p&gt;A aquest segon camp se li sol anomenar &lt;em&gt;projecció&lt;/em&gt;, amb el sentit que
el resultat no són les dades originals sinó una &amp;quot;projecció&amp;quot; (si vols,
l'&amp;quot;ombra&amp;quot;) d'aquestes.&lt;/p&gt;
&lt;p&gt;La figura anterior mostra el resultat de la consulta:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;professió&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;desenvolupador/a&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;nom&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;edat&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que indiquem els camps que volem que apareguin simplement amb
el seu nom i com a valor &lt;em&gt;true&lt;/em&gt;. De fet, podem posar un 1 en comptes
de &lt;em&gt;true&lt;/em&gt; però he preferit indicar-ho així per fer-ho més evident.&lt;/p&gt;
&lt;p&gt;Si executes la comanda anterior, hauràs vist que el resultat no és
exàctament el que apareix a la figura. La consulta &lt;em&gt;real&lt;/em&gt; mostra també
el camp &lt;em&gt;_id&lt;/em&gt;. La clau dels documents apareix per defecte, per a
poder-la ocultar, haurem d'indicar-ho explícitament:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;professió&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;desenvolupador/a&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;_id&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;nom&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;edat&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Irene Ruíz Cloquell&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;44&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Iker Navarro López&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;35&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Pol Fernández García&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;34&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En cas que vulguem mostrar tots els camps excepte l'identificador,
no cal que afegim cada clau a la projecció. Hi haurà prou amb què
indiquem que no volem l'identificador.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;professió&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;desenvolupador/a&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;_id&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Irene Ruíz Cloquell&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;44&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2500&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Iker Navarro López&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;35&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2800&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Pol Fernández García&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;34&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1800&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Una cosa més, si volem mostrar tots els documents, simplement hem de
deixar el camp de sel·lecció (el primer camp del &lt;em&gt;find&lt;/em&gt;) amb el
document buit: {}.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;_id&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;nom&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;edat&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-1-quadrats-retallats"&gt;
&lt;h3&gt;Exercici 1. Quadrats retallats&lt;/h3&gt;
&lt;p&gt;Defineix una consulta que mostri només els camps &lt;em&gt;val&lt;/em&gt; i &lt;em&gt;quadrat&lt;/em&gt; de
la col·lecció &lt;em&gt;quadrats&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-retalls-confosos"&gt;
&lt;h3&gt;Exercici 2. Retalls confosos&lt;/h3&gt;
&lt;p&gt;Comprova què passa si indiques a la projeccció que una mateixa clau
sigui mostrada i no mostrada a l'hora.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 21:07:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:seleccio-de-camps.html</guid><category>mongoDB</category></item><item><title>Operadors de sel·lecció</title><link>http://apuntstecnics.herokuapp.com/operadors-de-selleccio.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En els exemples de selecció que hem vist fins ara, fixa't que sempre
demanàvem que la clau especificada tingués un valor concret.&lt;/p&gt;
&lt;p&gt;Com ens ho podem fer per, per exemple, demanar totes les persones que
siguin més grans de 21 anys?&lt;/p&gt;
&lt;p&gt;En aquest article veurem com realitzar consultes fent servir els
&lt;a class="reference external" href="http://docs.mongodb.org/manual/reference/operator/query/"&gt;operadors de selecció.&lt;/a&gt; més
habituals.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="operadors-de-comparacio"&gt;
&lt;h2&gt;Operadors de comparació&lt;/h2&gt;
&lt;p&gt;La següent taula resumeix els operadors de comparació que veurem:&lt;/p&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="9%" /&gt;
&lt;col width="2%" /&gt;
&lt;col width="89%" /&gt;
&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;operador&lt;/td&gt;
&lt;td&gt;&amp;nbsp;&lt;/td&gt;
&lt;td&gt;Descripció&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;$gt&lt;/td&gt;
&lt;td&gt;&amp;gt;&lt;/td&gt;
&lt;td&gt;Entrades amb el valor &lt;strong&gt;més gran&lt;/strong&gt; que l'especificat.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;$gte&lt;/td&gt;
&lt;td&gt;&amp;gt;=&lt;/td&gt;
&lt;td&gt;Entrades amb el valor &lt;strong&gt;més gran o igual&lt;/strong&gt; a l'especificat.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;$lt&lt;/td&gt;
&lt;td&gt;&amp;lt;&lt;/td&gt;
&lt;td&gt;Entrades amb el valor &lt;strong&gt;més petit&lt;/strong&gt; que l'especificat.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;$lte&lt;/td&gt;
&lt;td&gt;&amp;lt;=&lt;/td&gt;
&lt;td&gt;Entrades amb el valor &lt;strong&gt;més petit o igual&lt;/strong&gt; que l'especificat.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;$ne&lt;/td&gt;
&lt;td&gt;!=&lt;/td&gt;
&lt;td&gt;Entrades amb el valor &lt;strong&gt;diferent&lt;/strong&gt; de l'especificat.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Per mantenir l'estructura de documents json, a MongoDB expressem els
operadors de comparació d'una manera una mica peculiar:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$gt&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;35&lt;/span&gt;&lt;span class="p"&gt;}})&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530110cb37dd0ec3059698f4&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Irene Ruíz Cloquell&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;44&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2500&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530110cb37dd0ec3059698f8&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Cristina Navarro Sánchez&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;director/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;120000&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que aquesta consulta equivaldria a la de SQL &lt;a class="footnote-reference" href="#sqlmesclar" id="id1"&gt;[1]&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;persones&lt;/span&gt; &lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;edat&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;35&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-1-no-volem-els-vells"&gt;
&lt;h3&gt;Exercici 1. No volem els vells&lt;/h3&gt;
&lt;p&gt;Composa una consulta que retorni només les persones menors de 21 anys.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-be-21-no-es-tan-vell"&gt;
&lt;h3&gt;Exercici 2. Bé, 21 no és tan vell&lt;/h3&gt;
&lt;p&gt;Composa una consulta que retorni només les persones menors o iguals a
21 anys.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-un-rang-de-valors"&gt;
&lt;h3&gt;Exercici 3. Un rang de valors&lt;/h3&gt;
&lt;p&gt;Composa una consulta que retorni les persones més grans de 21 anys i
menors de 35.&lt;/p&gt;
&lt;p&gt;Pista:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$lt&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;$gt&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;&lt;span class="p"&gt;}}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-un-altre-rang"&gt;
&lt;h3&gt;Exercici 4. Un altre rang&lt;/h3&gt;
&lt;p&gt;Composa una consulta que retorni les persones més grans de 35 anys i
menors de 21.&lt;/p&gt;
&lt;p&gt;Pista: hauries de ser capaç de saber el resultat d'aquesta consulta
sense necessitat d'executar-la, fins i tot si canvien els documents de
la col·lecció.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-no-m-agrada-el-34"&gt;
&lt;h3&gt;Exercici 5. No m'agrada el 34&lt;/h3&gt;
&lt;p&gt;Composa una consulta que retorni totes les persones que no tenen 34
anys.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-un-rang-menys-un"&gt;
&lt;h3&gt;Exercici 6. Un rang menys un&lt;/h3&gt;
&lt;p&gt;Composa una consulta que retorni totes les persones d'edat entre 21 i
35 (ambdues incloses) excepte les que tinguin 34 anys.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-joves-ben-pagats"&gt;
&lt;h3&gt;Exercici 7. Joves ben pagats&lt;/h3&gt;
&lt;p&gt;Composa una consulta que retorni totes les persones fins a com a molt
25 anys que cobrin com a mínim 2000€. Ah! No ens interessa saber
l'identificador en aquest cas.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="els-operadors-in-i-nin"&gt;
&lt;h2&gt;Els operadors $in i $nin&lt;/h2&gt;
&lt;p&gt;L'operador &lt;strong&gt;$in&lt;/strong&gt; ens permet especificar documents amb un
valor dins d'una llista.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$in&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;docent&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]}})&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff5a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Irene Ruíz Cloquell&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;44&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2500&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff5b&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Marc Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;34&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;docent&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1200&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff5d&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Iker Navarro López&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;35&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2800&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff60&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Pol Fernández García&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;34&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1800&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per la seva banda, &lt;strong&gt;$nin&lt;/strong&gt; ens permet especificar tot just el
contrari: documents amb un valor fora d'una llista:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$nin&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;docent&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]}})&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff59&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Júlia Galceran Buscart&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;27&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;monjo/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff5c&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Iker Fernández Fijo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;fotògraf/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2200&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff5e&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Cristina Navarro Sánchez&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;director/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;120000&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff5f&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Alexia López Fabrelle&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;equilibrista&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3900&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff61&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Carla Fernández Balló&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;pintor/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2400&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff62&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Pau Romero Vilchez&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;psicòleg/psicòloga&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2200&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-8-professions-amb-maxim-d-edat"&gt;
&lt;h3&gt;Exercici 8. Professions amb màxim d'edat&lt;/h3&gt;
&lt;p&gt;Composa una consulta que retorni totes les persones de com a màxim 40
anys, que es dediquin al desenvolupament, a la docència o a la
fotografia.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-9-professions-amb-minim-d-edat"&gt;
&lt;h3&gt;Exercici 9. Professions amb mínim d'edat&lt;/h3&gt;
&lt;p&gt;Composa una consulta que retorni totes les persones de com a mínim 40
anys, que &lt;strong&gt;no&lt;/strong&gt; es dediquin al desenvolupament, a la docència o a la
fotografia.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="l-operador-or"&gt;
&lt;h2&gt;L'operador $or&lt;/h2&gt;
&lt;p&gt;Ara ja sabem trobar documents amb valors iguals a un donat, o bé dins
d'un rang. Fins i tot, sabem descartar documents amb un determinat
valor.  Però, què passaria si volguéssim tenir documents amb rangs
discontinus o amb més d'un valor descartat?&lt;/p&gt;
&lt;p&gt;La resposta és l'operador &lt;em&gt;$or&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;El següent exemple, ens mostra com podem consultar les persones que
siguin pintores o bé equilibristes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt; &lt;span class="nx"&gt;$or&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pintor/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;equilibrista&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}]&lt;/span&gt; &lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff5f&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Alexia López Fabrelle&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;equilibrista&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3900&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff61&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Carla Fernández Balló&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;pintor/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2400&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't com s'indiquen les diferents opcions vàlides: dins d'una llista
de documents emmarcada amb [] i separades per coma.&lt;/p&gt;
&lt;p&gt;Evidentment, podem afegir a la llista tants documents com ens calgui,
i cada document podria tenir especificades més d'una clau.&lt;/p&gt;
&lt;p&gt;Podríem també aconseguir un rang de valors discontinu. Per exemple,
imagina que ens interessen les persones menors de 20 anys i les més
grans de 40.&lt;/p&gt;
&lt;p&gt;Si fem el següent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;edat&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$lte&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="nx"&gt;edat&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$gte&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="p"&gt;}})&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff5a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Irene Ruíz Cloquell&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;44&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2500&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff5e&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Cristina Navarro Sánchez&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;director/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;120000&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ja sabem que en repetir una clau, agafarà la darrera. No ens val.&lt;/p&gt;
&lt;p&gt;En canvi amb &lt;em&gt;$or&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;$or&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;[{&lt;/span&gt;&lt;span class="nx"&gt;edat&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$lte&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;}},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;edat&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$gte&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="p"&gt;}}]})&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff5a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Irene Ruíz Cloquell&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;44&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2500&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff5c&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Iker Fernández Fijo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;fotògraf/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2200&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff5e&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Cristina Navarro Sánchez&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;director/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;120000&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff5f&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Alexia López Fabrelle&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;equilibrista&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3900&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff61&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Carla Fernández Balló&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;pintor/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2400&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff62&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Pau Romero Vilchez&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;psicòleg/psicòloga&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2200&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finalment, imagina que volem totes les persones que no siguin
desenvolupadores ni directores. Ho farem molt fàcilment amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;$or&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;[{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$ne&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$ne&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;director/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}}]})&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff59&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Júlia Galceran Buscart&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;27&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;monjo/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff5a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Irene Ruíz Cloquell&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;44&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2500&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff5b&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Marc Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;34&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;docent&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1200&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff5c&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Iker Fernández Fijo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;fotògraf/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2200&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff5d&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Iker Navarro López&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;35&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2800&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff5e&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Cristina Navarro Sánchez&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;director/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;120000&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff5f&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Alexia López Fabrelle&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;equilibrista&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3900&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff60&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Pol Fernández García&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;34&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1800&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff61&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Carla Fernández Balló&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;pintor/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2400&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;530a3c8eccf61c71a3e8ff62&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Pau Romero Vilchez&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;psicòleg/psicòloga&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2200&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ops! Què ha passat? Ens ha retornat &lt;strong&gt;totes&lt;/strong&gt; les entrades!&lt;/p&gt;
&lt;p&gt;És clar, si una persona és desenvolupadora, no acompleix la primera
condició, però &lt;strong&gt;sí&lt;/strong&gt; la segona.&lt;/p&gt;
&lt;p&gt;Bé, espero que no hagis caigut en la trampa. Evidentment resoldrem
aquest tipus de consultes amb &lt;strong&gt;$nin&lt;/strong&gt; tal i com hem vist a la secció
anterior.&lt;/p&gt;
&lt;div class="section" id="exercici-10-sou-alt-o-edat-baixa"&gt;
&lt;h3&gt;Exercici 10. Sou alt o edat baixa&lt;/h3&gt;
&lt;p&gt;Composa una consulta que retorni les persones que, o bé tinguin com a
màxim 21 anys, o bé tinguin un sou com a mínim de 2000€.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-11-desenvolupadors-amb-sou-alt-o-joves"&gt;
&lt;h3&gt;Exercici 11. Desenvolupadors amb sou alt o joves&lt;/h3&gt;
&lt;p&gt;Composa una consulta que retorni les persones que, o bé tinguin com a
màxim 21 anys, o bé es dediquin al desenvolupament amb un sou com a
mínim de 2000€.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-12-no-m-agraden-els-de-44"&gt;
&lt;h3&gt;Exercici 12. No m'agraden els de 44&lt;/h3&gt;
&lt;p&gt;Composa una consulta que retorni les persones que, o bé tinguin com a
màxim 21 anys, o bé es dediquin al desenvolupament amb un sou com a
mínim de 2000€. En tot cas, que no aparegui ningú amb 44 anys.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="sqlmesclar" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Sí, la versió SQL aquí queda més compacta i llegible.
En favor de MongoDB cal dir que és coherent amb la resta del seu
disseny i què, en altres situacions, aquesta notació serà més
llegible que la corresponent a SQL.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 21:06:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:operadors-de-selleccio.html</guid><category>mongoDB</category></item><item><title>Ordre dels resultats</title><link>http://apuntstecnics.herokuapp.com/ordre-dels-resultats.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Fins ara hem vist com consultar dades, amb la possibilitat de
filtrar-les i només rebre aquelles que volem. No hem parlat gens de en
quin ordre les volem. Aquesta és la finalitat del mètode &lt;em&gt;sort&lt;/em&gt; i
presentar-te'l ho és d'aquest article.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="dades-ordenades"&gt;
&lt;h2&gt;Dades ordenades&lt;/h2&gt;
&lt;p&gt;Considera els resultats de la següent consulta:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Irene Ruíz Cloquell&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2500&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Iker Navarro López&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2800&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Pol Fernández García&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1800&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Tot i que a tu et podrien sortir amb un ordre diferent, fixa't com el
resultat són els documents requerits però amb un ordre aparentment
independent de les claus sol·licitades.&lt;/p&gt;
&lt;p&gt;Suposa que ens interessés disposar de les dades en ordre ascendent de
sou. Fixa't en la següent consulta:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;}).&lt;/span&gt;&lt;span class="nx"&gt;sort&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;sou&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Pol Fernández García&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1800&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Irene Ruíz Cloquell&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2500&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Iker Navarro López&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2800&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;El mètode &lt;em&gt;sort&lt;/em&gt; rep un document on la clau correspon a claus dels
documents de la col·lecció consultada, i el valor és:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;1: per indicar ordre ascendent&lt;/li&gt;
&lt;li&gt;-1: per indicar ordre descendent&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Així, simplement canviant el signe, tenim l'ordre canviat:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;}).&lt;/span&gt;&lt;span class="nx"&gt;sort&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;sou&lt;/span&gt;&lt;span class="o"&gt;:-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Iker Navarro López&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;     &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2800&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Irene Ruíz Cloquell&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2500&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Pol Fernández García&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1800&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Podríem estar interessats en controlar l'ordre d'altres claus. Al
següent exemple ampliarem la consulta a tots els documents i ordenarem
primer per sou i després per edat:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;}).&lt;/span&gt;&lt;span class="nx"&gt;sort&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Cristina Navarro Sánchez&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;director/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;          &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;120000&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Alexia López Fabrelle&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;     &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;equilibrista/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;      &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3900&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Iker Navarro López&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;        &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;35&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2800&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Irene Ruíz Cloquell&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;       &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;44&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2500&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Carla Fernández Balló&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;     &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;pintor/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;            &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2400&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Iker Fernández Fijo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;       &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;fotògraf/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;          &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2200&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Pau Romero Vilchez&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;        &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;psicòleg/psicòloga&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2200&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Pol Fernández García&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;      &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;34&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1800&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Marc Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;      &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;34&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;docent&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;              &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1200&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Júlia Galceran Buscart&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;27&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;monjo/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;             &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-1-primer-els-grans"&gt;
&lt;h3&gt;Exercici 1. Primer els grans&lt;/h3&gt;
&lt;p&gt;Composa una consulta que retorni les persones per ordre d'edat, de
manera que la primera sigui la més gran i la darrera la més jove.&lt;/p&gt;
&lt;p&gt;Fes que només apareguin el nom i l'edat.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-primer-els-joves"&gt;
&lt;h3&gt;Exercici 2. Primer els joves&lt;/h3&gt;
&lt;p&gt;Composa una consulta que retorni les persones per ordre d'edat, de
manera que la primera sigui la més jove i la darrera la més gran.&lt;/p&gt;
&lt;p&gt;Si més d'una persona té la mateixa edat, fes que primer surti la que
tingui el sou més alt.&lt;/p&gt;
&lt;p&gt;Fes que només apareguin el nom, l'edat i el sou.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="aprofitar-l-ordre-per-filtar"&gt;
&lt;h2&gt;Aprofitar l'ordre per filtar&lt;/h2&gt;
&lt;p&gt;Tot conjugant el &lt;em&gt;sort&lt;/em&gt; amb &lt;em&gt;skip&lt;/em&gt; i &lt;em&gt;limit&lt;/em&gt; ens permet aconseguir
consultes com ara, &amp;quot;les tres persones amb millor sou&amp;quot; o &amp;quot;les dues
persones més joves després de la més jove&amp;quot;.&lt;/p&gt;
&lt;p&gt;De seguida et mostraré com fer-les, però et recomano que les intentis
fer pel teu compte abans de continuar llegint. Et permetrà comprovar
si estàs agafant la filosofia de MongoDB.&lt;/p&gt;
&lt;div class="section" id="les-tres-persones-amb-millor-sou"&gt;
&lt;h3&gt;Les tres persones amb millor sou&lt;/h3&gt;
&lt;p&gt;Per a aconseguir aquesta consulta simplement cal ordenar per sou
(primer el més alt) i quedar-te amb només tres.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="nx"&gt;sort&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;}).&lt;/span&gt;&lt;span class="nx"&gt;limit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-les-2-persones-que-cobren-menys"&gt;
&lt;h3&gt;Exercici 3. Les 2 persones que cobren menys&lt;/h3&gt;
&lt;p&gt;Composa una consulta que retorni les dues persones amb el sou més
baix.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-les-4-persones-menys-joves"&gt;
&lt;h3&gt;Exercici 4. Les 4 persones menys joves&lt;/h3&gt;
&lt;p&gt;Composa una consulta que retorni només les quatre persones amb més
edat.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="les-dues-persones-mes-joves-despres-de-la-mes-jove"&gt;
&lt;h3&gt;Les dues persones més joves després de la més jove&lt;/h3&gt;
&lt;p&gt;Aquesta consulta ens requereix fer servir també el mètode &lt;em&gt;skip&lt;/em&gt; amb
el que ens saltarem la més persona més jove.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="nx"&gt;sort&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;}).&lt;/span&gt;&lt;span class="nx"&gt;skip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;limit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;53038dcd06facaddfaf743a3&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Carla Fernández Balló&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;pintor/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2400&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;53038dcd06facaddfaf7439e&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Iker Fernández Fijo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;fotògraf/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2200&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-skip-limit-o-limit-skip"&gt;
&lt;h3&gt;Exercici 5. skip-limit o limit-skip&lt;/h3&gt;
&lt;p&gt;Comprova què passa si intercanvies l'ordre entre &lt;em&gt;skip&lt;/em&gt; i &lt;em&gt;limit&lt;/em&gt; a la
consulta anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-ordre-dels-metodes"&gt;
&lt;h3&gt;Exercici 6. ordre dels mètodes&lt;/h3&gt;
&lt;p&gt;Comprova que passa si canvies l'ordre de &lt;em&gt;sort&lt;/em&gt; a la consulta
anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-no-volem-les-mes-joves"&gt;
&lt;h3&gt;Exercici 7. No volem les més joves&lt;/h3&gt;
&lt;p&gt;Composa una consulta que retorni totes les persones excepte les dues
més joves.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-8-ni-docents-ni-el-mes-gran"&gt;
&lt;h3&gt;Exercici 8. Ni docents ni el més gran&lt;/h3&gt;
&lt;p&gt;Composa una consulta que retorni totes les persones que no siguin
docents. Per cert, no ens interessa la més gran.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 21:05:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:ordre-dels-resultats.html</guid><category>mongoDB</category></item><item><title>Inserció de documents</title><link>http://apuntstecnics.herokuapp.com/insercio-de-documents.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquesta secció serà breu. Parlarem de com introduir dades a MongoDB.&lt;/p&gt;
&lt;p&gt;Ja hem introduït algunes dades a articles anteriors per a poder
realitzar les consultes. Amb tot, el tema presenta un punt amb
identificadors que, sense ser complex, val la pena considerar.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;Inserció de documents&lt;/h2&gt;
&lt;p&gt;Per inserir el document &lt;em&gt;doc&lt;/em&gt; a la col·lecció &lt;em&gt;col&lt;/em&gt;, simplement
farem:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;col&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;insert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;doc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest cas &lt;em&gt;doc&lt;/em&gt; pot ser un document en format json com els que hem
vist fins ara.&lt;/p&gt;
&lt;p&gt;Si la col·lecció no existia dins de la base de dades actual, MongoDB
la crea sense més.&lt;/p&gt;
&lt;p&gt;Per assegurar-nos que una col·lecció no existeix, ja sabem que podem
consultar-la a la llista amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;show&lt;/span&gt; &lt;span class="nx"&gt;collections&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;També hem pogut veure com eliminar una col·lecció:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;col&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;drop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aquesta comanda ens retornarà &lt;em&gt;true&lt;/em&gt; en cas que realment hagi eliminat
la col·lecció.&lt;/p&gt;
&lt;div class="section" id="exercici-1-companys-de-classe"&gt;
&lt;h3&gt;Exercici 1. Companys de classe&lt;/h3&gt;
&lt;p&gt;Crea la seqüència de comandes necessària per a crear la col·lecció
&lt;em&gt;companys&lt;/em&gt; a la base de dades per defecte.&lt;/p&gt;
&lt;p&gt;Dels companys de classe guardarem el nom, els dos cognoms, l'edat, el
nr. de telèfon i el correu electrònic (en total cinc claus per
document)&lt;/p&gt;
&lt;p&gt;Decideix els noms de les claus, i afegeix al menys 5 companys a la
col·lecció.&lt;/p&gt;
&lt;p&gt;Atenció: pots inventar-te les dades, excepte el nom i cognoms
&lt;a class="footnote-reference" href="#foradeclasse" id="id2"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="identificador"&gt;
&lt;h3&gt;Identificador&lt;/h3&gt;
&lt;p&gt;En el moment que introduïm un document, MongoDB li assigna un
identificador amb la clau &amp;quot;_id&amp;quot; i de tipus &lt;em&gt;ObjectID&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;De vegades, les nostres dades ja tenen un identificador natural (e.g.
la matrícula d'un vehicle) i podem voler fer servir aquest
identificador en comptes d'un altre.&lt;/p&gt;
&lt;p&gt;Considera les diferències al següent exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cotxes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;insert&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;matrícula&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;4312DKH&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;marca&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Toyota&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;model&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Yaris&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;any&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cotxes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5311cda6325b3c533aac6508&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;matrícula&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;4312DKH&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;marca&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Toyota&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;model&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Yaris&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;any&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2007&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cotxes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;drop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="kc"&gt;true&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cotxes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;insert&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;4312DKH&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;marca&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Toyota&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;model&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Yaris&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;any&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cotxes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;4312DKH&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;marca&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Toyota&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;model&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Yaris&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;any&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2007&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Com pots observar, la segona introducció fa que el document obtingui
la matrícula com a identificador en comptes del &lt;em&gt;ObjectId&lt;/em&gt; que ens ha
afegit MongoDB a tots els exemples que hem vist fins ara.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-la-colleccio-d-usuaris"&gt;
&lt;h3&gt;Exercici 2. La col·lecció d'usuaris&lt;/h3&gt;
&lt;p&gt;Crea una nova col·lecció anomenada &lt;em&gt;usuaris&lt;/em&gt; que contingui la següent
informació de cada usuari:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;nom i cognoms&lt;/li&gt;
&lt;li&gt;nom d'usuari (username)&lt;/li&gt;
&lt;li&gt;correu electrònic&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Inventa't dades per a composar tres documents per a aquesta col·lecció
i insereix-los-hi.&lt;/p&gt;
&lt;p&gt;Fes que el correu electrònic sigui l'identificador.&lt;/p&gt;
&lt;p&gt;Construeix una consulta que permeti veure el resultat de la inserció.&lt;/p&gt;
&lt;p&gt;Trobes adequat que el correu electrònic sigui identificador? Perquè?&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="l-identificador-es-unic"&gt;
&lt;h3&gt;L'identificador és únic&lt;/h3&gt;
&lt;p&gt;Doncs com probablement t'hauràs pogut imaginar, el valor de la clau
&lt;em&gt;_id&lt;/em&gt; ha de ser únic dins de la col·lecció.&lt;/p&gt;
&lt;p&gt;Potser fins ara no ens havíem adonat ja que la majoria dels exemples
que hem treballat no especificaven l'identificador, fent que MongoDB
en generés un automàticament. Però sí, &lt;em&gt;_id&lt;/em&gt; ha de contenir un valor
&lt;strong&gt;únic&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;El pots considerar com la &lt;em&gt;primary key&lt;/em&gt; al model relacional.&lt;/p&gt;
&lt;p&gt;Veiem com MongoDB, que normalment no es queixa ni per afegir
a una col·lecció inexistent, es queixa en intentar inserir un document
amb identificador repetit:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cotxes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;insert&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;4312DKH&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;marca&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Toyota&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;model&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Yaris&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;any&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="nx"&gt;E11000&lt;/span&gt; &lt;span class="nx"&gt;duplicate&lt;/span&gt; &lt;span class="nx"&gt;key&lt;/span&gt; &lt;span class="nx"&gt;error&lt;/span&gt; &lt;span class="nx"&gt;index&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;test&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cotxes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;$_id_&lt;/span&gt;  &lt;span class="nx"&gt;dup&lt;/span&gt; &lt;span class="nx"&gt;key&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;4312DKH&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ops! Peta! Bé, com era d'esperar, oi?&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-repetir-un-objectid"&gt;
&lt;h3&gt;Exercici 3. Repetir un ObjectID&lt;/h3&gt;
&lt;p&gt;Acabem de veure com MongoDB es queixa quan intentem afegir un document
amb la clau _id d'un que ja es troba a la col·lecció. Ho hem fet amb
una clau que nosaltres hem generat, la matrícula.&lt;/p&gt;
&lt;p&gt;En aquest exercici hauràs de mostrar com fas que MongoDB es queixi de
clau duplicada amb un valor de &lt;em&gt;_id&lt;/em&gt; que hagi generat el propi
MongoDB.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Pista&lt;/em&gt;: simplement escull una col·lecció amb &lt;em&gt;_id&lt;/em&gt; generats per
MongoDB, copia el valor de la clau d'algun dels documents que
contingui i composa una comanda d'inserció amb un document que tingui
aquest valor com a &lt;em&gt;_id&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="inserir-mes-d-un-document"&gt;
&lt;h3&gt;Inserir més d'un document&lt;/h3&gt;
&lt;p&gt;Podem inserir més d'un document amb una sola crida a &lt;em&gt;insert&lt;/em&gt;. Ho
farem aprofitant que les llistes (&lt;em&gt;arrays&lt;/em&gt;) també són documents vàlids
per a MongoDB.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cotxes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;insert&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;matrícula&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;4312DKH&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="nx"&gt;marca&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Toyota&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="nx"&gt;model&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Yaris&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;          &lt;span class="nx"&gt;any&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;matrícula&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;3100CID&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="nx"&gt;marca&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Seat&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;     &lt;span class="nx"&gt;model&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Leon&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;           &lt;span class="nx"&gt;any&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2006&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;matrícula&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;0001FOC&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="nx"&gt;marca&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Audi&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;     &lt;span class="nx"&gt;model&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Q3&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;             &lt;span class="nx"&gt;any&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2014&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;matrícula&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;B1234GI&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="nx"&gt;marca&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Simca&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;    &lt;span class="nx"&gt;model&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;           &lt;span class="nx"&gt;any&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1969&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;matrícula&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5656DHA&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="nx"&gt;marca&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Toyota&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="nx"&gt;model&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Land Cruiser&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="nx"&gt;any&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2009&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't com els documents apareixen llistats entre claudàtors i
separats per comes.&lt;/p&gt;
&lt;p&gt;Potser et resultarà curiós que el darrer també porti coma. MongoDB ho
accepta per facilitar la programació, però compte que no tots els
drivers disponibles en sabran treure profit.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-la-colleccio-d-usuaris-un-altre-cop"&gt;
&lt;h3&gt;Exercici 4. La col·lecció d'usuaris un altre cop&lt;/h3&gt;
&lt;p&gt;Torna a realitzar l'exercici de la col·lecció d'usuaris. Aquest cop
insereix tots els documents amb una única crida al mètode &lt;em&gt;insert&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Assegura't que no hi ha cap dada abans d'inserir (ja saps, elimina la
col·lecció) i comprova que els documents s'han inserit correctament.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="foradeclasse" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si estàs seguint aquests materials pel teu compte,
sense companys, no et diré res si també t'inventes el nom dels
companys.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 21:04:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:insercio-de-documents.html</guid><category>mongoDB</category></item><item><title>Eliminació de documents</title><link>http://apuntstecnics.herokuapp.com/eliminacio-de-documents.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquest breu article analitzarem les maneres que tenim d'eliminar
dades de MongoDB.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="eliminacio-de-dades"&gt;
&lt;h2&gt;Eliminació de dades&lt;/h2&gt;
&lt;p&gt;Com ja hem vist en articles anteriors, eliminem una col·lecció fent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cotxes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;drop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si el que volem, però, és eliminar un element concret, ho farem amb el
mètode &lt;em&gt;remove&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Considera la següent seqüència:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cotxes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;count&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;marca&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Audi&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cotxes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;remove&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;marca&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Audi&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cotxes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;count&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;marca&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Audi&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="mi"&gt;0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Com pots observar, abans de cridar &lt;em&gt;remove&lt;/em&gt; hi havia un Audi a la
col·lecció. Un cop cridat &lt;em&gt;remove&lt;/em&gt; ja no en queda cap.&lt;/p&gt;
&lt;p&gt;El mètode &lt;em&gt;remove&lt;/em&gt; rep un document que descriu els criteris de
sel·lecció dels elements a eliminar. Realitza la mateixa funció que el
primer paràmetre del mètode &lt;em&gt;find&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;El mètode &lt;em&gt;remove&lt;/em&gt; no ens retorna cap informació de quants elements ha
esborrat. De fet, no ens diu si ha tingut algun èxit. Així, si
executem un altre cop l'eliminació d'Audis, ens trobem amb el següent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cotxes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;remove&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;marca&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Audi&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cotxes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;count&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;marca&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Audi&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="mi"&gt;0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A l'exemple anterior, &lt;em&gt;remove&lt;/em&gt; només ha eliminat un document. Si la
cerca hagués donat com a resultat més d'un document, n'hagués eliminat
tots ells:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cotxes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;count&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;marca&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Toyota&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cotxes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;remove&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;marca&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Toyota&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cotxes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;count&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;marca&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Toyota&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="mi"&gt;0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Podem eliminar tots els elements de la col·lecció amb la següent
crida:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cotxes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;remove&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;O equivalentment:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cotxes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;remove&lt;/span&gt;&lt;span class="p"&gt;({})&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Atenció&lt;/strong&gt;: malgrat el resultat pot semblar el mateix, no és
equivalent eliminar la col·lecció amb &lt;em&gt;drop&lt;/em&gt;. Si has d'eliminar tots
els elements d'una col·lecció, sovint serà més eficient eliminar la
col·lecció &lt;a class="footnote-reference" href="#dropvsremove" id="id1"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Finalment, podem eliminar la base de dades sencera fent servir
el mètode &lt;em&gt;dropDatabase&lt;/em&gt;. La següent crida eliminarà la base de dades
referenciada per &lt;em&gt;db&lt;/em&gt; &lt;strong&gt;sense demanar cap confirmació!&lt;/strong&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="lineno"&gt; 1 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;show&lt;/span&gt; &lt;span class="nx"&gt;dbs&lt;/span&gt;
&lt;span class="lineno"&gt; 2 &lt;/span&gt;&lt;span class="nx"&gt;politica&lt;/span&gt;    &lt;span class="mf"&gt;0.203125&lt;/span&gt;&lt;span class="nx"&gt;GB&lt;/span&gt;
&lt;span class="lineno"&gt; 3 &lt;/span&gt;&lt;span class="nx"&gt;test&lt;/span&gt;        &lt;span class="mf"&gt;0.203125&lt;/span&gt;&lt;span class="nx"&gt;GB&lt;/span&gt;
&lt;span class="lineno"&gt; 4 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;use&lt;/span&gt; &lt;span class="nx"&gt;politica&lt;/span&gt;
&lt;span class="lineno"&gt; 5 &lt;/span&gt;&lt;span class="nx"&gt;switched&lt;/span&gt; &lt;span class="nx"&gt;to&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt; &lt;span class="nx"&gt;politica&lt;/span&gt;
&lt;span class="lineno"&gt; 6 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;
&lt;span class="lineno"&gt; 7 &lt;/span&gt;&lt;span class="nx"&gt;politica&lt;/span&gt;
&lt;span class="lineno"&gt; 8 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;show&lt;/span&gt; &lt;span class="nx"&gt;collections&lt;/span&gt;
&lt;span class="lineno"&gt; 9 &lt;/span&gt;&lt;span class="nx"&gt;politics&lt;/span&gt;
&lt;span class="lineno"&gt;10 &lt;/span&gt;&lt;span class="nx"&gt;system&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;indexes&lt;/span&gt;
&lt;span class="lineno"&gt;11 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;politics&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;count&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="lineno"&gt;12 &lt;/span&gt;&lt;span class="mi"&gt;2394&lt;/span&gt;
&lt;span class="lineno"&gt;13 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;dropDatabase&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="lineno"&gt;14 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;dropped&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;politica&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;ok&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt;15 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;
&lt;span class="lineno"&gt;16 &lt;/span&gt;&lt;span class="nx"&gt;politica&lt;/span&gt;
&lt;span class="lineno"&gt;17 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;show&lt;/span&gt; &lt;span class="nx"&gt;collections&lt;/span&gt;
&lt;span class="lineno"&gt;18 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;politics&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;count&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="lineno"&gt;19 &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="lineno"&gt;20 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;show&lt;/span&gt; &lt;span class="nx"&gt;dbs&lt;/span&gt;
&lt;span class="lineno"&gt;21 &lt;/span&gt;&lt;span class="nx"&gt;test&lt;/span&gt;        &lt;span class="mf"&gt;0.203125&lt;/span&gt;&lt;span class="nx"&gt;GB&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A la seqüència anterior podem observar què:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Fins la línia 12: la base de dades en ús es diu &lt;em&gt;politica&lt;/em&gt;, inclou
la col·lecció &lt;em&gt;politics&lt;/em&gt; que conté 2394 entrades.&lt;/li&gt;
&lt;li&gt;A la línia 13 demanem l'eliminació de la base de dades. MongoDB ens
confirma aquesta eliminació amb la línia 9.&lt;/li&gt;
&lt;li&gt;La resta de línies ens permeten comprovar què, malgrat com és
habitual MongoDB no es queixa en consultar sobre objectes
inexistents, ja no tenim cap col·lecció ni documents disponibles a
la base de dades &lt;em&gt;politica&lt;/em&gt;. Fins al punt que &lt;em&gt;politica&lt;/em&gt; ni tant
sols apareix llistada entre les bases de dades del sistema.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="exercici-1-eliminant-els-professionals-no-remunerats"&gt;
&lt;h3&gt;Exercici 1. Eliminant els professionals no remunerats&lt;/h3&gt;
&lt;p&gt;Recupera la col·lecció de &lt;em&gt;persones&lt;/em&gt; que hem treballat anteriorment.&lt;/p&gt;
&lt;p&gt;Si l'has perduda, pots importar les dades &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/resources/persones01.json"&gt;d'aquest fitxer&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Composa una crida que elimini totes les persones sense sou (sou == 0)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-eliminant-els-vells"&gt;
&lt;h3&gt;Exercici 2. Eliminant els vells&lt;/h3&gt;
&lt;p&gt;Composa una comanda que elimini totes aquelles persones que tinguin 40
anys o més.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-acabem-amb-els-pobres-docents"&gt;
&lt;h3&gt;Exercici 3. Acabem amb els pobres docents&lt;/h3&gt;
&lt;p&gt;Elimina tots els docents que cobrin menys de 1500€ de la col·lecció
&lt;em&gt;persones&lt;/em&gt; &lt;a class="footnote-reference" href="#reivindicacio" id="id2"&gt;[2]&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="dropvsremove" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;El mètode &lt;em&gt;remove&lt;/em&gt; elimina els elements d'un en un.
MongoDB ha de reindexar per cada eliminació. En canvi, amb &lt;em&gt;drop&lt;/em&gt;,
la col·lecció és eliminada juntament amb els seus índexs.&lt;/p&gt;
&lt;p class="last"&gt;Índexs? Bé, per què siguin ràpids de trobar, les dades són
indexades.  Per defecte, MongoDB crea un índex per &lt;em&gt;_id&lt;/em&gt; però es
poden crear més de manera manual. Si tens interès per aquest tema,
considera la entrada &lt;a class="reference external" href="http://docs.mongodb.org/manual/core/indexes/"&gt;Index Concepts&lt;/a&gt; a la documentació
oficial de MongoDB.&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="reivindicacio" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Sí, ja sé que no és una novetat aquests dies això
de carregar-se els pobres docents. Confio en la teva
condescendència amb aquesta petita &lt;em&gt;llicència reivindicativa&lt;/em&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 21:03:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:eliminacio-de-documents.html</guid><category>mongoDB</category></item><item><title>Modificació de dades</title><link>http://apuntstecnics.herokuapp.com/modificacio-de-dades.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Fins el moment, hem vist com consultar, afegir i eliminar documents
d'una base de dades MongoDB. Ens queda només una operació bàsica: la
modificació de dades ja introduïdes.&lt;/p&gt;
&lt;p&gt;Aquest és el tema de l'article que estàs llegint.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;Modificació de dades&lt;/h2&gt;
&lt;p&gt;El mètode &lt;em&gt;update&lt;/em&gt; ens permet realitzar canvis a les dades introduïdes
a una col·lecció.&lt;/p&gt;
&lt;p&gt;Aquest mètode, tal i com descriuen a la &lt;a class="reference external" href="http://docs.mongodb.org/manual/reference/method/db.collection.update/"&gt;documentació oficial&lt;/a&gt;,
ofereix la següent signatura:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;db.«col·lecció».update(
    «consulta»,
    «modificació»,
    «modificadors»
)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En breu:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;La &lt;em&gt;consulta&lt;/em&gt; és un document que descriu els criteris de sel·lecció
dels elements a modificar. Realitza la mateixa funció que el primer
paràmetre del mètode &lt;em&gt;find&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;La &lt;em&gt;modificació&lt;/em&gt; és també un document. En aquest cas descriu els
canvis a realitzar.&lt;/li&gt;
&lt;li&gt;Els &lt;em&gt;modificadors&lt;/em&gt; són opcionals i permeten concretar determinats
aspectes de la modificació.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Veiem un exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="lineno"&gt; 1 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;findOne&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Marc Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="lineno"&gt; 2 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="lineno"&gt; 3 &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5345b1c54882ee6c0e36cefe&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="lineno"&gt; 4 &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Marc Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="lineno"&gt; 5 &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;34&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="lineno"&gt; 6 &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;docent&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="lineno"&gt; 7 &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1200&lt;/span&gt;
&lt;span class="lineno"&gt; 8 &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 9 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="lineno"&gt;10 &lt;/span&gt;    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Marc Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="lineno"&gt;11 &lt;/span&gt;    &lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="lineno"&gt;12 &lt;/span&gt;        &lt;span class="nx"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Martina Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="lineno"&gt;13 &lt;/span&gt;        &lt;span class="nx"&gt;edat&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;76&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="lineno"&gt;14 &lt;/span&gt;        &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;docent&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="lineno"&gt;15 &lt;/span&gt;        &lt;span class="nx"&gt;sou&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;852&lt;/span&gt;
&lt;span class="lineno"&gt;16 &lt;/span&gt;    &lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="lineno"&gt;17 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;findOne&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Martina Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="lineno"&gt;18 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="lineno"&gt;19 &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5345b1c54882ee6c0e36cefe&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="lineno"&gt;20 &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Martina Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="lineno"&gt;21 &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;76&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="lineno"&gt;22 &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;docent&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="lineno"&gt;23 &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;852&lt;/span&gt;
&lt;span class="lineno"&gt;24 &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Observa com el document de consulta és el mateix pel &lt;em&gt;find&lt;/em&gt; (línia 1)
que pel &lt;em&gt;update&lt;/em&gt; (línia 10).&lt;/p&gt;
&lt;p&gt;El canvi realitzat reflecteix alguns canvis que ha experimentat
l'antic senyor Marc Hernández:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;un canvi de nom. Ara es diu &lt;em&gt;Martina&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;un canvi d'edat. És que el temps passa volant &lt;a class="footnote-reference" href="#edatjubilacio" id="id2"&gt;[1]&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;la professió es manté però el sou es redueix.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;La darrera consulta permet comprovar que els canvis s'han realitzat
correctament. Fixa't que l'identificador del document és el mateix.&lt;/p&gt;
&lt;div class="section" id="exercici-1-els-canvis-del-sr-hernandez"&gt;
&lt;h3&gt;Exercici 1. Els canvis del Sr. Hernández&lt;/h3&gt;
&lt;p&gt;Torna a carregar les dades del fitxer de &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/resources/persones01.json"&gt;persones&lt;/a&gt;, tot eliminant els canvis que
hagis pogut realitzar en exercicis anteriors. Modifica el document del
Sr. Hernández tal i com es descriu a l'exemple anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-la-nostra-religiosa-es-fa-desenvolupadora-web"&gt;
&lt;h3&gt;Exercici 2. La nostra religiosa es fa desenvolupadora web&lt;/h3&gt;
&lt;p&gt;Recupera la col·lecció de &lt;em&gt;persones&lt;/em&gt; que hem treballat anteriorment.&lt;/p&gt;
&lt;p&gt;Modifica les dades de la monja Júlia Galceran de manera que
reflecteixin els següents canvis:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;el seu 1er cognom, &lt;em&gt;Galceran&lt;/em&gt; conté un error. Ha de ser &lt;em&gt;Galcerán&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;tot just després de registrar-se a la nostra col·lecció, la Júlia es
va matricular al cicle de Desenvolupament d'Aplicacions Web. Dos
anys més tard el va finalitzar. Va trobar una feina relativament ben
pagada (&lt;strong&gt;3200&lt;/strong&gt; €) com a desenvolupadora web (per favor, manté la
forma genèrica &amp;quot;&lt;strong&gt;desenvolupador/a&lt;/strong&gt;&amp;quot;) i va penjar els hàbits.&lt;/li&gt;
&lt;li&gt;l'edat d'ara és 29 anys. Sí, ho va aprovar tot a la primera.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="quan-no-totes-les-claus-pateixen-canvi"&gt;
&lt;h3&gt;Quan no totes les claus pateixen canvi&lt;/h3&gt;
&lt;p&gt;Als exemples anteriors, el segon paràmetre de &lt;em&gt;update&lt;/em&gt; inclou &lt;strong&gt;totes&lt;/strong&gt;
les claus del document.&lt;/p&gt;
&lt;p&gt;Has provat què passa si no les especifiques totes? Fixa't en el
següent exemple:&lt;/p&gt;
&lt;p&gt;Fixa't en el següent exemple:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;findOne&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Martina Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5345b1c54882ee6c0e36cefe&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Martina Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;76&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;docent&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;852&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Martina Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;sou&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3250&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;findOne&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Martina Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kc"&gt;null&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;findOne&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5345b1c54882ee6c0e36cefe&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)})&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5345b1c54882ee6c0e36cefe&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3250&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;La modificació de la línia 9 intenta reflectir el fet que la Sra.
Hernández ha decidit deixar la docència i passar a treballar com a
desenvolupadora amb un sou més competitiu.&lt;/p&gt;
&lt;p&gt;Però quan consultem el seu registre, veiem que alguna cosa no ha anat
com s'esperava.&lt;/p&gt;
&lt;p&gt;En tornar-la a demanar (línia 12) ens respon amb un &lt;em&gt;null&lt;/em&gt;. Amb tot,
si la demanem per l'identificador &lt;a class="footnote-reference" href="#elteucasseradiferent" id="id3"&gt;[2]&lt;/a&gt; (línia 14),
sí que apareix un document amb les dades especificades al &lt;em&gt;update&lt;/em&gt;
pero sense d'altres com ara el nom. De fet, excepte per
l'identificador, el document de la Sra.  Hernández ha perdut tots els
camps que no apareixien a la modificació!&lt;/p&gt;
&lt;p&gt;El mètode &lt;em&gt;update&lt;/em&gt; considera que el que volem és reemplaçar el
document original (excepte la clau) pel document que se li proporciona
al segon paràmetre.&lt;/p&gt;
&lt;p&gt;No sempre ens interessarà haver d'especificar tots els camps per
modificar-ne només un (imagina si només vols actualitzar l'edat).
Sortosament, &lt;em&gt;update&lt;/em&gt; ens ofereix una alternativa: utilitzar
&lt;a class="reference external" href="http://docs.mongodb.org/manual/reference/operator/update/"&gt;operadors de modificació&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Considera la següent seqüència:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;findOne&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Martina Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5345b1c54882ee6c0e36cefe&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Martina Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;76&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;docent&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;852&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Martina Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$set&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;sou&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3250&lt;/span&gt; &lt;span class="p"&gt;}})&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;findOne&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Martina Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5345b1c54882ee6c0e36cefe&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;76&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Martina Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3250&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Inicialment recuperem la &amp;quot;destrossa&amp;quot; feta al registre de la Sra.
Hernández.&lt;/p&gt;
&lt;p&gt;A partir de la línia 17 llencem la petició de canvi. Aquest cop, però,
fixa't que no estem indicant directament el document amb els canvis
com a segon paràmetre de &lt;em&gt;update&lt;/em&gt;. En canvi, apareix &lt;em&gt;$set&lt;/em&gt;. Es tracta
d'un operador de canvi que permet indicar la substitució del valor de
les claus que apareguin al document que el segueix.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-a-la-julia-li-pugen-el-sou"&gt;
&lt;h3&gt;Exercici 3. A la Júlia li pugen el sou&lt;/h3&gt;
&lt;p&gt;Modifica el sou de Júlia, de manera que ara passi a cobrar 3525€ en
comptes dels 3200€ anteriors.&lt;/p&gt;
&lt;p&gt;Especifica al segon paràmetre de &lt;em&gt;update&lt;/em&gt; només el nou valor del sou.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="altres-operadors-de-modificacio"&gt;
&lt;h3&gt;Altres operadors de modificació&lt;/h3&gt;
&lt;p&gt;A banda de &lt;em&gt;$set&lt;/em&gt; hi ha més operadors de modificació disponibles.
Podem, per exemple, reanomenar una clau amb &lt;em&gt;$rename&lt;/em&gt; o fins i tot
eliminar-ne la clau amb &lt;em&gt;$unset&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Un canvi molt habitual que ens pot interessar és el d'incrementar (o
decrementar) un valor numèric. Per exemple, imagina que volem pujar-li
el sou de la Sra. Hernández en 200€. Podem consultar el seu sou actual
amb &lt;em&gt;find&lt;/em&gt;, sumar-li 200 (mentalment?) i després fer una crida a
&lt;em&gt;update&lt;/em&gt; especificant amb &lt;em&gt;$set&lt;/em&gt; el nou valor per la clau &lt;em&gt;sou&lt;/em&gt;. O
també podem fer el següent:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;update&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Martina Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$inc&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;200&lt;/span&gt; &lt;span class="p"&gt;}})&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;findOne&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Martina Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5345b1c54882ee6c0e36cefe&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;76&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Martina Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3450&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixa't en l'ús de l'operador &lt;em&gt;$inc&lt;/em&gt;: és molt similar al de &lt;em&gt;$set&lt;/em&gt;, oi?
I a l'igual que amb &lt;em&gt;$set&lt;/em&gt;, &lt;em&gt;update&lt;/em&gt; manté la resta de camps.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-actualitza-l-edat-de-la-julia"&gt;
&lt;h3&gt;Exercici 4. Actualitza l'edat de la Júlia&lt;/h3&gt;
&lt;p&gt;Ha passat un any. Incrementa l'edat de la Júlia.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Nota&lt;/em&gt;: deixa que sigui MongoDB qui se n'encarregui del càlcul de
l'antiga edat més 1.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="quants-documents-es-modifiquen"&gt;
&lt;h3&gt;Quants documents es modifiquen?&lt;/h3&gt;
&lt;p&gt;Apa, siguem corporatius: pugem-li el sou 100€ a tots els
desenvolupadors que tenim a la col·lecció &lt;em&gt;persones&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;La crida seria quelcom similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="lineno"&gt; 1 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;sou&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="lineno"&gt; 2 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Irene Ruíz Cloquell&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2500&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 3 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Iker Navarro López&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2800&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 4 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Pol Fernández García&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1800&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 5 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Martina Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3450&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 6 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Júlia Galcerán Buscart&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3200&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 7 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;update&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$inc&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;sou&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;}})&lt;/span&gt;
&lt;span class="lineno"&gt; 8 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;sou&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="lineno"&gt; 9 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Iker Navarro López&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2800&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt;10 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Pol Fernández García&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1800&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt;11 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Martina Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3450&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt;12 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Júlia Galcerán Buscart&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3200&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt;13 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Irene Ruíz Cloquell&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2600&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Què ha passat? Sembla que la Irene (línies 2 i 13) ha estat la
&lt;strong&gt;única&lt;/strong&gt; que ha vist pujat el seu sou! &lt;a class="footnote-reference" href="#resultatspodencanviar" id="id4"&gt;[3]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;No era això el que esperàvem, o com a mínim, el que volíem.&lt;/p&gt;
&lt;p&gt;El mètode &lt;em&gt;update&lt;/em&gt;, per defecte, només modifica &lt;strong&gt;un únic&lt;/strong&gt; registre
&lt;a class="footnote-reference" href="#bromesdelsmongodb" id="id5"&gt;[4]&lt;/a&gt;.  Si vols més, li ho has d'indicar al paràmetre
&lt;em&gt;modificadors&lt;/em&gt; que hem estat ignorant fins ara.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="lineno"&gt;1 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;update&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$inc&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;sou&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;}},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;multi&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="lineno"&gt;2 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;sou&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="lineno"&gt;3 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Pol Fernández García&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1900&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt;4 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Martina Hernández Muñoz&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3550&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt;5 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Júlia Galcerán Buscart&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3300&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt;6 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Irene Ruíz Cloquell&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2700&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt;7 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Iker Navarro López&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2900&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Bé, ara sí que ha aplicat els canvis a tothom.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-corregeix-el-canvi-erroni"&gt;
&lt;h3&gt;Exercici 5. Corregeix el canvi erroni&lt;/h3&gt;
&lt;p&gt;Quan no sabíem de l'existència de &lt;em&gt;multi&lt;/em&gt;, hem incrementat el sou d'un
desenvolupador/a però no de la resta. En el meu cas ha estat la Irene,
però en el teu podria ser diferent. Després els hem incrementat a tots
el sou, incloent al primer.&lt;/p&gt;
&lt;p&gt;Com que això no és el que volíem, construeix una crida a &lt;em&gt;update&lt;/em&gt; que
permeti recuperar el sou que li pertoca a aquell que li vas
incrementar.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Pista&lt;/em&gt;: decrementar 100 és com incrementar -100.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-actualitza-l-edat"&gt;
&lt;h3&gt;Exercici 6. Actualitza l'edat&lt;/h3&gt;
&lt;p&gt;Construeix una crida a &lt;em&gt;update&lt;/em&gt; que incrementi l'edat en un any a
totes les persones.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="edatjubilacio" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;L'edat potser et sembla molt elevada per a un
docent si estàs llegint aquests materials poc després que els hagi
publicat. Tal i com van les coses, però, és possible que d'ací uns
anys ja no sembli tan exagerada.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="elteucasseradiferent" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Recorda que a tu molt probablement et
sortirà un identificador diferent.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="resultatspodencanviar" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Atenció: és probable que a la teva prova,
sigui una altra l'entrada que quedi modificada.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="bromesdelsmongodb" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Potser estàs pensant que és una mica estrany
que &lt;em&gt;update&lt;/em&gt; no modifiqui tots els documents que acompleixin la
cerca. Més quan &lt;em&gt;remove&lt;/em&gt; sí que té aquest comportament.
Curiosament, &lt;em&gt;remove&lt;/em&gt; disposa d'un paràmetre opcional anomenat
&lt;em&gt;justOne&lt;/em&gt; que permet indicar justament l'oposat al &lt;em&gt;multi&lt;/em&gt; de
&lt;em&gt;update&lt;/em&gt;. Bé, jo també m'ho pregunto.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 21:02:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:modificacio-de-dades.html</guid><category>mongoDB</category></item><item><title>Subdocuments</title><link>http://apuntstecnics.herokuapp.com/subdocuments.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Fins ara, als exemples amb que hem treballat les claus tenien sempre
com a valor un número o un string.&lt;/p&gt;
&lt;p&gt;MongoDB ens permet que el valor pugui ser també un altre document.
Veurem aquí el com.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;Subdocuments&lt;/h2&gt;
&lt;p&gt;De vegades, ens interessarà guardar valors complexos per a algunes
claus.&lt;/p&gt;
&lt;p&gt;Per exemple, considera una adreça postal al territori espanyol. Els
elements que habitualment guardem es podrien resumir en:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;carrer: carrer, plaça o vía.&lt;/li&gt;
&lt;li&gt;població: barri, aldea o entitat inferior de població.&lt;/li&gt;
&lt;li&gt;codi postal: cinc dígits on els 2 primers indiquen la província i la resta a la localitat o districte.&lt;/li&gt;
&lt;li&gt;localitat&lt;/li&gt;
&lt;li&gt;província: encara que el codi postal ja la inclou&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Veiem alguns exemples en format json:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;carrer&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;      &lt;span class="s2"&gt;&amp;quot;Únic S/N&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;població&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;Berrós Jussà&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;cp&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;          &lt;span class="s2"&gt;&amp;quot;25597&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;localitat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;   &lt;span class="s2"&gt;&amp;quot;La Guingueta d&amp;#39;Àneu&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;província&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;   &lt;span class="s2"&gt;&amp;quot;Lleida&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;carrer&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;      &lt;span class="s2"&gt;&amp;quot;Carrer de la Selva de Mar, 211&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;cp&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;          &lt;span class="s2"&gt;&amp;quot;08020&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;localitat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;   &lt;span class="s2"&gt;&amp;quot;Barcelona&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;província&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;   &lt;span class="s2"&gt;&amp;quot;Barcelona&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que al segon exemple &lt;em&gt;població&lt;/em&gt; apareix buida. Recorda que a
MongoDB els documents són molt flexibles. Fins i tot podríem guardar a
la mateixa col·lecció el codi postal uns cops amb valors numèrics,
d'altres amb strings o fins, etc. Per simplicitat, els exemples que
treballarem en aquests articles no barrejaran tipus i mantindran una
estructura homogènia en tots els documents d'una col·lecció
&lt;a class="footnote-reference" href="#perquesimplifica" id="id2"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Ara és quan bé la part interessant. Imagina que vols assignar una
adreça a una persona &lt;a class="footnote-reference" href="#collecciopersones" id="id3"&gt;[2]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Evidentment podem afegir al registre de la persona els diferents camps
que composen l'adreça:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;         &lt;span class="s2"&gt;&amp;quot;Jordi Navarro Cucurella&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;        &lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;   &lt;span class="s2"&gt;&amp;quot;alcalde&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;         &lt;span class="mi"&gt;320&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;carrer&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;      &lt;span class="s2"&gt;&amp;quot;Únic S/N&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;població&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;Berrós Jussà&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;cp&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;          &lt;span class="s2"&gt;&amp;quot;25597&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;localitat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;   &lt;span class="s2"&gt;&amp;quot;La Guingueta d&amp;#39;Àneu&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;província&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;   &lt;span class="s2"&gt;&amp;quot;Lleida&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Què passaria, però, si necessitéssim dues adreces? Per exemple,
la nostra aplicació podria requerir una adreça d'enviament i una de
facturació.&lt;/p&gt;
&lt;p&gt;D'acord, sempre podem fer camps de l'estil &lt;em&gt;carrerfact&lt;/em&gt; i &lt;em&gt;carrerenv&lt;/em&gt;.
Tot i que hi ha moltes aplicacions funcionant així, espero que estaràs
d'acord que, com a mínim, no resulta gaire elegant.&lt;/p&gt;
&lt;p&gt;Intentem una nova via: incloure les dades de l'adreça com a valor
d'&lt;strong&gt;un&lt;/strong&gt; camp de persona. El resultat tindria el següent aspecte:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;         &lt;span class="s2"&gt;&amp;quot;Jordi Navarro Cucurella&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;        &lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;   &lt;span class="s2"&gt;&amp;quot;alcalde&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;         &lt;span class="mi"&gt;320&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;adreça&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;      &lt;span class="p"&gt;{&lt;/span&gt;
                        &lt;span class="s2"&gt;&amp;quot;carrer&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;      &lt;span class="s2"&gt;&amp;quot;Únic S/N&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="s2"&gt;&amp;quot;població&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;Berrós Jussà&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="s2"&gt;&amp;quot;cp&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;          &lt;span class="s2"&gt;&amp;quot;25597&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="s2"&gt;&amp;quot;localitat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;   &lt;span class="s2"&gt;&amp;quot;La Guingueta d&amp;#39;Àneu&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="s2"&gt;&amp;quot;província&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;   &lt;span class="s2"&gt;&amp;quot;Lleida&amp;quot;&lt;/span&gt;
                    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-1-persones-adrecades"&gt;
&lt;h3&gt;Exercici 1. Persones adreçades&lt;/h3&gt;
&lt;p&gt;Elimina, si et cal, l'antiga col·lecció de &lt;em&gt;persones&lt;/em&gt; i crea una de
nova amb el document de l'exemple anterior.&lt;/p&gt;
&lt;p&gt;Afegeix al menys tres nous registres amb el nom de companys que seguin
a prop teu a classe (incloent el teu nom entre ells). Inventa't la
resta de les dades si et cal.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="seleccio-segons-un-camp-d-un-subdocument"&gt;
&lt;h3&gt;Selecció segons un camp d'un subdocument&lt;/h3&gt;
&lt;p&gt;El mètode &lt;em&gt;find&lt;/em&gt; ens permet especificar subcamps tant al document de
sel·lecció (primer argument) com al de projecció (segon argument). Per
exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="lineno"&gt; 1 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="lineno"&gt; 2 &lt;/span&gt;    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;adreça.província&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Lleida&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="lineno"&gt; 3 &lt;/span&gt;    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;adreça.província&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 4 &lt;/span&gt;  &lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;pretty&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="lineno"&gt; 5 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="lineno"&gt; 6 &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Jordi Navarro Cucurella&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="lineno"&gt; 7 &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;adreça&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="lineno"&gt; 8 &lt;/span&gt;        &lt;span class="s2"&gt;&amp;quot;província&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Lleida&amp;quot;&lt;/span&gt;
&lt;span class="lineno"&gt; 9 &lt;/span&gt;    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt;10 &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Tant a la sel·lecció com a la projecció hem especificat el subcamp a
partir del nom de la clau i el nom del subcamp separats amb un punt
(&lt;em&gt;adreça.provícia&lt;/em&gt;). Fins ara, si la clau no contenia cap caràcter
&lt;em&gt;especial&lt;/em&gt;, podíem ometre les cometes (ex. Fixa't com a la línia 3 no
posem entre cometes ni el nom ni l'identificador). Amb els subcamps
&lt;em&gt;sempre&lt;/em&gt; haurem de fer servir les cometes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-practica-de-consulta-de-subcamps"&gt;
&lt;h3&gt;Exercici 2. Practica de consulta de subcamps&lt;/h3&gt;
&lt;p&gt;A partir de les dades que has introduït a l'exercici anterior (on
hauria d'haver com a mínim 4 entrades), composa una consulta que
mostri la segona persona més jove de la col·lecció.&lt;/p&gt;
&lt;p&gt;En volem saber només el nom, l'edat, la professió, el codi postal i la
localitat.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="modificacio-del-valor-d-un-camp-d-un-subdocument"&gt;
&lt;h3&gt;Modificació del valor d'un camp d'un subdocument&lt;/h3&gt;
&lt;p&gt;No esperis gaires novetats en aquest apartat. Pel mètode &lt;em&gt;update&lt;/em&gt;
l'especificació d'un subcamp es realitza igual que per a &lt;em&gt;find&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Així, si volem canviar el carrer del Sr. Jordi Navarro dels exemples
anteriors, farem:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Jordi Navarro Cucurella&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$set&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;adreça.carrer&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Carretera d&amp;#39;Àneu, 21 5é 1ra&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-el-sr-navarro-canvia-de-poble"&gt;
&lt;h3&gt;Exercici 3. El Sr. Navarro canvia de poble&lt;/h3&gt;
&lt;p&gt;El Sr. Navarro, dels exemples anteriors, s'ha fet alcalde d'un poble
del costat &lt;em&gt;Esterri d'Àneu&lt;/em&gt;. Ara la seva nova adreça és:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;carrer: Major, 6&lt;/li&gt;
&lt;li&gt;població: Esterri d'Àneu&lt;/li&gt;
&lt;li&gt;codi posta: 25580&lt;/li&gt;
&lt;li&gt;localitat: Esterri d'Àneu&lt;/li&gt;
&lt;li&gt;província: Lleida&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ah! No et pensis que el Jordi fa les coses perquè sí. Amb el canvi,
també ha millorat les seves condicions econòmiques. Ara passa a cobrar
372€!&lt;/p&gt;
&lt;p&gt;Aprofitarem per corregir un petit error amb les dades anteriors. La
professió del Sr. Navarro no està normalitzada. Si et fixes, hem
volgut mantenir les versions masculina i femenina a la resta de
professions. Així, canviarem la professió per &lt;em&gt;alcalde/ssa&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-estudiants-amb-sou"&gt;
&lt;h3&gt;Exercici 4. Estudiants amb sou?&lt;/h3&gt;
&lt;p&gt;Importa les dades d'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/resources/persones02.json"&gt;aquest fitxer&lt;/a&gt; a la col·lecció &lt;em&gt;persones&lt;/em&gt;
&lt;a class="footnote-reference" href="#dadesficticies" id="id4"&gt;[3]&lt;/a&gt;.  Assegura't que elimines les dades anteriors.&lt;/p&gt;
&lt;p&gt;El Molt Honorable President de la Generalitat de Catalunya ha tingut
accés a les dades de la col·lecció &lt;em&gt;persones&lt;/em&gt; i s'ha quedat preocupat
pel reduït nombre d'estudiants a la província de Lleida.&lt;/p&gt;
&lt;p&gt;Per mirar de promocionar l'estudi en aquests territori, i donat que li
sobraven uns eurillos &lt;a class="footnote-reference" href="#ningushocreuaixo" id="id5"&gt;[4]&lt;/a&gt;, ha decidit oferir un sou
de 100€ als estudiants amb adreça a Lleida.&lt;/p&gt;
&lt;p&gt;Crea una crida al mètode &lt;em&gt;update&lt;/em&gt; que permeti satisfer la decisió del
Molt Honorable.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-fusio-de-codis-postals"&gt;
&lt;h3&gt;Exercici 5. Fusió de codis postals&lt;/h3&gt;
&lt;p&gt;Per alguna raó administrativa que se'ns escapa, els codis postals
d'algunes localitats lleidatanes han estat agrupats en un: el 25264.&lt;/p&gt;
&lt;p&gt;Construeix una crida a &lt;em&gt;update&lt;/em&gt; que modifiqui els registres amb codi
postal 25133, 25749 i 25282, de manera que passin a tenir el codi
postal unificat.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Pista&lt;/em&gt;: el nombre d'entrades resultants amb codi postal 25264 haurà
de ser 4.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="perquesimplifica" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Aquesta és una simplificació per a aquests
materials. MongoDB es manega d'una manera molt senzilla amb
aquestes variacions.  Malauradament, les limitacions de temps de la
unitat formativa a la que estan adreçats aquests materials obliguen
a retallar molts aspectes resolts a MongoDB. Per exemple, la
possibilitat de comprovar si una clau existeix en un document
concret, consultar quin és el tipus del seu valor, o simplement
eliminar-la document.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="collecciopersones" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Hem treballat amb la col·lecció &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/resources/persones02.json"&gt;persones&lt;/a&gt; en articles anteriors.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="dadesficticies" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Les dades que apareixen a aquest fitxer són
fictícies. Si bé les adreces són reals (corresponen a ajuntaments
catalans), les dades de persones que tenen associades han estat
generades aleatòriament.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="ningushocreuaixo" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Recorda que aquests exercicis maneguen dades
fictícies.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 21:01:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:subdocuments.html</guid><category>mongoDB</category></item><item><title>Arrays</title><link>http://apuntstecnics.herokuapp.com/arrays.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Hem vist fins ara que els valors que es poden associar a una clau d'un
document de MongoDB poden ser strings, nombres, altres documents
(subdocuments). També hi podem afegir una llista (o &lt;em&gt;array&lt;/em&gt;) de
valors.&lt;/p&gt;
&lt;p&gt;En aquest article ens introduïrem a l'ús dels &lt;em&gt;arrays&lt;/em&gt; en MongoDB.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="valors-de-tipus-array"&gt;
&lt;h2&gt;Valors de tipus array&lt;/h2&gt;
&lt;!-- XXX TODO: exemple massa xungo per començar. A més cal fer un
diagrama per les comandes a l'article d'update --&gt;
&lt;p&gt;Ja ens ha aparegut algun exemple d'array a articles anteriors. En
rescatarem un d'ells:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="lineno"&gt; 1 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="lineno"&gt; 2 &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;529a3f2b255c0122ce5280ba&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="lineno"&gt; 3 &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;data&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;2014/03/21&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="lineno"&gt; 4 &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;client&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;  &lt;span class="s2"&gt;&amp;quot;Irene Ruíz Cloquell&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="lineno"&gt; 5 &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;línies&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="lineno"&gt; 6 &lt;/span&gt;        &lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="lineno"&gt; 7 &lt;/span&gt;            &lt;span class="s2"&gt;&amp;quot;quantitat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;3.70&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="lineno"&gt; 8 &lt;/span&gt;            &lt;span class="s2"&gt;&amp;quot;producte&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Pollastre de corral qtat extra&amp;quot;&lt;/span&gt;
&lt;span class="lineno"&gt; 9 &lt;/span&gt;        &lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="lineno"&gt;10 &lt;/span&gt;        &lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="lineno"&gt;11 &lt;/span&gt;            &lt;span class="s2"&gt;&amp;quot;quantitat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;4.23&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="lineno"&gt;12 &lt;/span&gt;            &lt;span class="s2"&gt;&amp;quot;producte&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Salsitxes casolanes gall dindi&amp;quot;&lt;/span&gt;
&lt;span class="lineno"&gt;13 &lt;/span&gt;        &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt;14 &lt;/span&gt;    &lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="lineno"&gt;15 &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;L'element &lt;em&gt;línies&lt;/em&gt; conté la llista de línies de comandes de la
comanda. Aquesta llista apareix emmarcada entre claudàtors '[' i ']'
entre les línies 5 i 16.&lt;/p&gt;
&lt;p&gt;En el cas de l'exemple, cada element de la llista és, a l'hora un
document.  Els arrays en MongoDB no tenen perquè contenir tots els
elements de tipus document. De fet, no cal que els tinguin ni tant
sols del mateix tipus. Fixa't en el següent exemple (vàlid):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="lineno"&gt;1 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nombres&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="lineno"&gt;2 &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;un&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="lineno"&gt;3 &lt;/span&gt;    &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="lineno"&gt;4 &lt;/span&gt;    &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="lineno"&gt;5 &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;quatre&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="lineno"&gt;6 &lt;/span&gt;    &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt; &lt;span class="p"&gt;],&lt;/span&gt;
&lt;span class="lineno"&gt;7 &lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;set&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="lineno"&gt;8 &lt;/span&gt;    &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;529a3f2b255c0122ce5280ba&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="lineno"&gt;9 &lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A l'exemple hem guardat nombres en diferents formats. Per exemple, a
la línia 1 hi trobem un string, a la línia 3 un nombre enter, a la 2
tenim un document (en aquest cas només conté un element). La línia 6
és interessant donat que conté un nou array (en podem aniuar tants com
ens calguin) i fixa't que el darrer element d'aquesta llista és []. Es
tracta de la llista buida que també és un valor vàlid. Finalment, i
força interessant, a la línia 8 tenim un &lt;em&gt;ObjectID&lt;/em&gt;. Això ens serà de
molta utilitat si ens interessa disposar de referències a documents a
partir del seu id (equivalent del concepte de &lt;em&gt;foreign key&lt;/em&gt; del model
relacional)&lt;/p&gt;
&lt;div class="section" id="exercici-1-multiples-professions"&gt;
&lt;h3&gt;Exercici 1. Multiples professions&lt;/h3&gt;
&lt;p&gt;Després de tot l'esforç que estàs realitzant, ja va sent hora que
consti en algun lloc que ets tot/a un/a desenvolupador/a, no creus?
En aquest exercici ho faràs, encara que sigui a un lloc modest: la
col·lecció &lt;em&gt;persones&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Recupera &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/resources/persones02.json"&gt;el fitxer de persones&lt;/a&gt; de l'article anterior.
Probablement voldràs tornar-lo a importar a MongoDB eliminant els
canvis que hagis pogut realitzar a la col·lecció.&lt;/p&gt;
&lt;p&gt;Insereix un nou document amb les teves dades. No oblidis, però,
posar-te com a professió &lt;em&gt;desenvolupador/a&lt;/em&gt; i, és clar, &lt;em&gt;estudiant&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Comprova com queden les teves dades en el document que acabes
d'inserir (la consulta i el resultat formen part de la resposta
d'aquest exercici)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-dades-de-contacte"&gt;
&lt;h3&gt;Exercici 2. Dades de contacte&lt;/h3&gt;
&lt;p&gt;Escull algun company o companya de classe &lt;a class="footnote-reference" href="#oinventatho" id="id1"&gt;[1]&lt;/a&gt; i insereix
un document amb les seves dades. Aquest cop, però, caldrà que
afegeixis una nova clau: &lt;em&gt;contacte&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;La clau &lt;em&gt;contacte&lt;/em&gt; tindrà com a valor diferents maneres de contactar
amb la persona. Considera els següents exemples:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;fix&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;933313233&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;mòbil&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;933313233&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;fax&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;933313234&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;email&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;drodriguezm@generalitat.cat&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Una persona pot tenir múltiples maneres de contactar amb ella. Per
exemple, pot tenir dos telèfons i una adreça de correu electrònic,
mentre que una altra podria només tenir un nr. de mòbil.&lt;/p&gt;
&lt;p&gt;Inclou al menys tres maneres de contactar per la teva companya o
company. Fes que al menys una d'elles sigui un telèfon mòbil.&lt;/p&gt;
&lt;p&gt;No oblidis comprovar com queda el document que has inserit (la
consulta i el resultat formen part de la resposta d'aquest exercici)&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="consulta-d-arrays"&gt;
&lt;h2&gt;Consulta d'arrays&lt;/h2&gt;
&lt;p&gt;Les consultes amb arrays es poden arribar a complicar una mica fins a
escapar-se dels objectius d'aquest article. Així que ens quedarem amb
unes idees bàsiques.&lt;/p&gt;
&lt;p&gt;Si has introduït un document amb el teu nom i com a professions
&lt;em&gt;desenvolupador/a&lt;/em&gt; i &lt;em&gt;estudiant&lt;/em&gt; a la col·lecció &lt;em&gt;persones&lt;/em&gt;, hauries
de trobar el teu nom simplement fent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;desenvolupador/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;MongoDB retornarà els documents pels que la clau &lt;em&gt;professió&lt;/em&gt; tingui
com a valor &lt;em&gt;desenvolupador/a&lt;/em&gt;, o bé, un array que contingui el valor
&lt;em&gt;desenvolupador/a&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;En el cas de subdocuments com els de &lt;em&gt;contacte&lt;/em&gt; a un exercici
anterior, podem trobar la persona a partir d'un cert element de contacte (ex.
l'adreça de correu) amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;contacte&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$elemMatch&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;email&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;drodriguezm@generalitat.cat&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;}}})&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-3-no-estudiants"&gt;
&lt;h3&gt;Exercici 3. No estudiants&lt;/h3&gt;
&lt;p&gt;Composa una consulta que retorni el nom i la professió de totes les
persones que no siguin estudiants.&lt;/p&gt;
&lt;p&gt;Pista: no hauria de sortir el teu nom al resultat donat que tu tens,
entre les teves professions, la d'estudiant.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-el-telefon-d-un-amic"&gt;
&lt;h3&gt;Exercici 4. El telèfon d'un amic&lt;/h3&gt;
&lt;p&gt;Imagina que has rebut una trucada telefònica des d'un mòbil al teu
telèfon fix, i vols saber si es tracta d'algú conegut.&lt;/p&gt;
&lt;p&gt;Composa una consulta sobre la col·lecció &lt;em&gt;persones&lt;/em&gt; que et retorni el
nom de la persona que tingui aquest mòbil.&lt;/p&gt;
&lt;p&gt;Per provar que funciona, fes la consulta amb el nr. de mòbil que vas
indicar del teu company o companya a un exercici anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="modificacio-d-arrays"&gt;
&lt;h2&gt;Modificació d'arrays&lt;/h2&gt;
&lt;p&gt;Com en el cas de les consultes, amb la modificació d'arrays les coses
també es poden complicar una mica més enllà dels objectius d'aquest
article. Així que ens quedarem amb:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;afegir un element a una llista: $push&lt;/li&gt;
&lt;li&gt;afegir un element a una llista si encara no el contenia: $addToSet&lt;/li&gt;
&lt;li&gt;eliminar l'element a l'inici o final d'una llista: $pop&lt;/li&gt;
&lt;li&gt;eliminar elements d'una llista a partir del seu valor: $pull&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="push"&gt;
&lt;h3&gt;$push&lt;/h3&gt;
&lt;p&gt;Afegirem un element al final de la llista amb l'operador &lt;em&gt;$push&lt;/em&gt;
&lt;a class="footnote-reference" href="#pushpila" id="id2"&gt;[2]&lt;/a&gt; &lt;a class="footnote-reference" href="#pushmodificadors" id="id3"&gt;[3]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Considera la següent seqüència de comandes&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="lineno"&gt; 1 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;David Rodríguez Mataró&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="lineno"&gt; 2 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;David Rodríguez Mataró&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;arquitècte/a&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 3 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;update&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;David Rodríguez Mataró&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$push&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;estudiant&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}})&lt;/span&gt;
&lt;span class="lineno"&gt; 4 &lt;/span&gt;&lt;span class="nx"&gt;Cannot&lt;/span&gt; &lt;span class="nx"&gt;apply&lt;/span&gt; &lt;span class="nx"&gt;$push&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nx"&gt;$pushAll&lt;/span&gt; &lt;span class="nx"&gt;modifier&lt;/span&gt; &lt;span class="nx"&gt;to&lt;/span&gt; &lt;span class="nx"&gt;non&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nx"&gt;array&lt;/span&gt;
&lt;span class="lineno"&gt; 5 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;update&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;David Rodríguez Mataró&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$set&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;arquitècte/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]}})&lt;/span&gt;
&lt;span class="lineno"&gt; 6 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;David Rodríguez Mataró&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="lineno"&gt; 7 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;David Rodríguez Mataró&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;  &lt;span class="s2"&gt;&amp;quot;arquitècte/a&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 8 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;update&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;David Rodríguez Mataró&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$push&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;estudiant&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}})&lt;/span&gt;
&lt;span class="lineno"&gt; 9 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;persones&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;David Rodríguez Mataró&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="lineno"&gt;10 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;David Rodríguez Mataró&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;  &lt;span class="s2"&gt;&amp;quot;arquitècte/a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="s2"&gt;&amp;quot;estudiant&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Primerament (línia 3) intentem afegir la professió &lt;em&gt;estudiant&lt;/em&gt; a una
de les nostres persones. MongoDB es queixa perquè la clau &lt;em&gt;professió&lt;/em&gt;
per a aquesta persona &lt;strong&gt;no és un array&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;A la línia 5 arreglem el problema modificant el document de manera que
la clau &lt;em&gt;professió&lt;/em&gt; contingui un array. Així, a la línia 8 tornem a
intentar afegir la nova professió i comprovem a la 10 que aquest cop
sí hem tingut èxit.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-el-teo-treballa-de-cambrer"&gt;
&lt;h3&gt;Exercici 5. El Teo treballa de cambrer&lt;/h3&gt;
&lt;p&gt;Localiza a la col·lecció &lt;em&gt;persones&lt;/em&gt; a &lt;em&gt;Teo Ruíz Sánchez&lt;/em&gt;. Afegeix-li
la professió &lt;em&gt;cambrer/a&lt;/em&gt; a la que ja té.&lt;/p&gt;
&lt;p&gt;Canvia-li, de pas, el sou. Posa-li un sou adequat per la seva nova
professió.&lt;/p&gt;
&lt;p&gt;Comprova el resultat (la comprovació, com sempre, forma part de
l'exercici)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-repeteixo-el-teo-treballa-de-cambrer"&gt;
&lt;h3&gt;Exercici 6. Repeteixo: el Teo treballa de cambrer&lt;/h3&gt;
&lt;p&gt;Torna a afegir-li al Teo la professió de cambrer. Fixa't com &lt;em&gt;$push&lt;/em&gt;
permet que un valor aparegui repetit a l'array.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="addtoset"&gt;
&lt;h3&gt;$addToSet&lt;/h3&gt;
&lt;p&gt;Com hem vist a l'exercici anterior, l'operador &lt;em&gt;$push&lt;/em&gt; no es preocupa
de si el valor a incorporar es trobava o no a la llista.&lt;/p&gt;
&lt;p&gt;Sovint ens interessarà que les llistes no continguin valors duplicats.
Què vol dir que el Teo sigui estudiant, cambrer i... cambrer?&lt;/p&gt;
&lt;p&gt;Per fer això simplement farem servir l'operador &lt;em&gt;$addToSet&lt;/em&gt; en comptes
de &lt;em&gt;push&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-el-teo-treballa-del-que-li-surt"&gt;
&lt;h3&gt;Exercici 7. El Teo treballa del que li surt&lt;/h3&gt;
&lt;p&gt;Afegeix al Teo les següents professions de manera que no apareguin
duplicades en cas que hi fossin.&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;pintor&lt;/li&gt;
&lt;li&gt;estudiant&lt;/li&gt;
&lt;li&gt;repartidor&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Comprova el resultat (la comprovació forma part de l'exercici)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-8-pagaments-en-detall"&gt;
&lt;h3&gt;Exercici 8. Pagaments en detall&lt;/h3&gt;
&lt;p&gt;Estem interessats en guardar el detall dels pagaments que es realitzen
a una botiga de llaminadures.&lt;/p&gt;
&lt;p&gt;Un pagament consisteix en:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;un identificador de pagament. Ex. 2000&lt;/li&gt;
&lt;li&gt;una descripció del producte. Ex. &amp;quot;Haribo Soft Jelly bossa 50uds&amp;quot;.&lt;/li&gt;
&lt;li&gt;un preu total. Ex. 2.95€&lt;/li&gt;
&lt;li&gt;els valors de les monedes amb que ens han pagat (valors positius) i
les que hem retornat (valors negatius). Ex. 1€, 1€, 0.5€, 0,2€,
0,1€, 0,1€, 0,1€, -0,05€.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En aquest exercici se't demana que facis el següent&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Crea un document amb les dades anteriors &lt;strong&gt;a excepció&lt;/strong&gt; de les
monedes amb que han pagat que, de moment la deixarem com a llista
buida.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Construeix les crides necessàries de manera que vagis inserint les
següents quantitats en l'ordre que se t'indiquen, i que finalment
apareguin en l'ordre que es mostren a l'exemple. És a dir: [1,
1, 0.5, 0.2, 0.1, 0.1, 0.1, -0.05]&lt;/p&gt;
&lt;p&gt;Les entrades són:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;1&lt;/li&gt;
&lt;li&gt;1&lt;/li&gt;
&lt;li&gt;0.5&lt;/li&gt;
&lt;li&gt;0.2&lt;/li&gt;
&lt;li&gt;0.2&lt;/li&gt;
&lt;li&gt;0.1&lt;/li&gt;
&lt;li&gt;0.1&lt;/li&gt;
&lt;li&gt;1&lt;/li&gt;
&lt;li&gt;0.1&lt;/li&gt;
&lt;li&gt;-0.05&lt;/li&gt;
&lt;li&gt;-0.05&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;Pistes&lt;/em&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;Fixa't que el que se't demana és que creis una crida a &lt;em&gt;update&lt;/em&gt;
per totes i cadascuna de les entrades anteriors i en l'ordre
donat.  Sí, t'estic demanant que &amp;quot;insereixis&amp;quot; algunes monedes que
no hauran d'aparèixer a la llista final. Què dolent, oi? Amb tot,
hauràs de crear crides que les intentin introduir. Va, no et
queixis que tampoc no t'he presentat tants operadors
d'inserció...&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;les tres primeres insercions te les dono jo:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;pagaments&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;update&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2000&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$push&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;monedes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="nx"&gt;$set&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;total&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;}})&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;pagaments&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;update&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2000&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$push&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;monedes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="nx"&gt;$set&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;total&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;}})&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;pagaments&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;update&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2000&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$push&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;monedes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="nx"&gt;$set&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;total&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;2.5&lt;/span&gt;&lt;span class="p"&gt;}})&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="pop"&gt;
&lt;h3&gt;$pop&lt;/h3&gt;
&lt;p&gt;Per eliminar elements d'una llista, fem servir l'operador &lt;em&gt;$pop&lt;/em&gt;.
Aquest operador permet indicar si es vol eliminar el primer o el
darrer element de la llista.&lt;/p&gt;
&lt;p&gt;Considera la següent seqüència de comandes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="lineno"&gt;1 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;pagaments&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;total&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;monedes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="lineno"&gt;2 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;total&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;1.9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;monedes&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;  &lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt;3 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;pagaments&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;update&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$pop&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;monedes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="nx"&gt;$set&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;total&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;0.9&lt;/span&gt;&lt;span class="p"&gt;}})&lt;/span&gt;
&lt;span class="lineno"&gt;4 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;pagaments&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;total&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;monedes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="lineno"&gt;5 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;monedes&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;  &lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.2&lt;/span&gt; &lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;total&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;0.9&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt;6 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;pagaments&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;update&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$pop&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;monedes&lt;/span&gt;&lt;span class="o"&gt;:-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="nx"&gt;$set&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;total&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;0.8&lt;/span&gt;&lt;span class="p"&gt;}})&lt;/span&gt;
&lt;span class="lineno"&gt;7 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;pagaments&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;total&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;monedes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="lineno"&gt;8 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;monedes&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;  &lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.2&lt;/span&gt; &lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;total&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;0.8&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't com la crida de la línia 3 elimina la darrera moneda de la
llista, mentre que la crida de la línia 6 elimina la primera. La
diferència es troba en el valor 1 o -1 que li donem al &lt;em&gt;$pop&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-9-embolic-de-monedes"&gt;
&lt;h3&gt;Exercici 9. Embolic de monedes&lt;/h3&gt;
&lt;p&gt;Considera que tens la següent informació de pagament&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;pagaments&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3000&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;monedes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;monedes&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.2&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fent servir només els operadors &lt;em&gt;$push&lt;/em&gt;, &lt;em&gt;$addToSet&lt;/em&gt; i &lt;em&gt;$pop&lt;/em&gt;,
defineix una seqüència de crides al mètode &lt;em&gt;update&lt;/em&gt; de manera que la
següent crida a &lt;em&gt;find&lt;/em&gt; retorni exàctament el resultat que s'indica:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;pagaments&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3000&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;monedes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;monedes&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="pull"&gt;
&lt;h3&gt;$pull&lt;/h3&gt;
&lt;p&gt;De vegades ens pot interessar eliminar un determinat valor d'un array,
sense preocupar-nos de a quina posició es troba ni, de fet, de si el
valor hi era o no. Per a això disposem de l'operador &lt;em&gt;$pull&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Considera la següent seqüència:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="lineno"&gt; 1 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;pagaments&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;4000&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;monedes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="lineno"&gt; 2 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;monedes&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;  &lt;span class="mf"&gt;0.01&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.02&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.05&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 3 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;pagaments&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;update&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;4000&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$pull&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;monedes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;}})&lt;/span&gt;
&lt;span class="lineno"&gt; 4 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;pagaments&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;4000&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;monedes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="lineno"&gt; 5 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;monedes&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;  &lt;span class="mf"&gt;0.01&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.02&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.05&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 6 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;pagaments&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;update&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;4000&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$pull&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;monedes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;}})&lt;/span&gt;
&lt;span class="lineno"&gt; 7 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;pagaments&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;4000&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;monedes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="lineno"&gt; 8 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;monedes&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;  &lt;span class="mf"&gt;0.01&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.02&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.05&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="lineno"&gt; 9 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;pagaments&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;update&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;4000&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$pull&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;monedes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;$lt&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;}}})&lt;/span&gt;
&lt;span class="lineno"&gt;10 &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;db&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;pagaments&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;4000&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;_id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;monedes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="lineno"&gt;11 &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;monedes&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;  &lt;span class="mf"&gt;0.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;La crida de la línia 3 elimina la moneda d'un euro. La crida de la
línia 6, elimina les &lt;strong&gt;dues&lt;/strong&gt; monedes de 10 cèntims. Finalment, la
crida de la línia 10, elimina les &lt;strong&gt;tres&lt;/strong&gt; monedes de menys de 10
cèntims.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-en-teo-ja-s-ha-titulat"&gt;
&lt;h3&gt;Exercici 10. En Teo ja s'ha titulat&lt;/h3&gt;
&lt;p&gt;Doncs sí, en Teo Ruíz Sánchez que hem vist buscant-se la vida amb
diferents professions per poder estudiar, ara ja s'ha tret el títol de
desenvolupador i ha trobat una feina, potser no gaire ben pagada
(950€) però molt més interessant i amb més perspectives de futur que
les altres. A més,  li permet continuar estudiant.&lt;/p&gt;
&lt;p&gt;Crea les crides a &lt;em&gt;update&lt;/em&gt; que et calguin de manera que, fent servir
els operadors anteriors (excepte &lt;em&gt;$pop&lt;/em&gt;) aconsegueixis actualitzar el
document que conté les dades del Teo.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-11-ampliacio-altres-operadors"&gt;
&lt;h3&gt;Exercici 11. (ampliació) Altres operadors&lt;/h3&gt;
&lt;p&gt;Hi ha &lt;a class="reference external" href="http://docs.mongodb.org/manual/reference/operator/update-array/"&gt;més operadors disponibles&lt;/a&gt;
per a modificar arrays amb &lt;em&gt;update&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Ja que se't veu amb ganes d'aprofundir en el tema (sinó, no t'estaries
plantejant de fer un exercici d'ampliació), et proposo que investiguis
una mica i intentis realitzar l'exercici anterior fent servir
l'operador &lt;em&gt;$pullAll&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="oinventatho" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;És clar, si no tens companys de classe, pots
inventar-t'ho tot.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="pushpila" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;És possible que &lt;em&gt;push&lt;/em&gt; et recordi a l'operació per a
afegir elements a una estructura de tipus pila. La idea és que
&lt;em&gt;$push&lt;/em&gt; tracta l'array com si fos una pila, tot afegint l'element
al &lt;em&gt;top&lt;/em&gt; d'aquesta.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="pushmodificadors" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;L'operador &lt;em&gt;$push&lt;/em&gt; disposa d'una varietat
interessant de modificadors. Consulta la seva &lt;a class="reference external" href="http://docs.mongodb.org/manual/reference/operator/update/push/#up._S_push"&gt;documentació oficial&lt;/a&gt;
per més detalls.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 21:00:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:arrays.html</guid><category>mongoDB</category></item><item><title>Disseny de col·leccions</title><link>http://apuntstecnics.herokuapp.com/disseny-de-colleccions.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Als articles de &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/subdocuments.html"&gt;subdocuments&lt;/a&gt; i d'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/arrays.html"&gt;arrays&lt;/a&gt; hem vist com, a MongoDB
disposem de valors complexos que en el model relacional sovint
s'acaben resolent amb múltiples taules.&lt;/p&gt;
&lt;p&gt;Els exemples que hem treballat fins ara sempre han tingut present una
única col·lecció cada cop. MongoDB ara per ara &lt;a class="footnote-reference" href="#finsara" id="id1"&gt;[1]&lt;/a&gt; no ofereix
eines per a fer consultes entre col·leccions. Amb tot, sabem que es
poden crear múltiples col·leccions, i que aquestes es poden relacionar
entre si mitjançant els identificadors dels seus documents.  Si bé,
hem mantingut totes les dades relacionades a cada document dels
exemples anteriors, no és obligatori que sigui així.&lt;/p&gt;
&lt;p&gt;Aquesta entrada pretén oferir-te uns elements de referència/reflexió
que t'ajudin a orientar-te. Trobaràs molta més profunditat a la
&lt;a class="reference external" href="http://docs.mongodb.org/manual/core/data-modeling-introduction/"&gt;documentació oficial&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Estudiarem aquest tema a partir de tres eixos: els subdocuments, els
arrays i, finalment, les cardinalitats de les relacions&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id2"&gt;
&lt;h2&gt;Subdocuments&lt;/h2&gt;
&lt;p&gt;Recordem l'exemple de persona amb adreça que vam veure a l'article de
&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/subdocuments.html"&gt;subdocuments&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;nom&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;         &lt;span class="s2"&gt;&amp;quot;Jordi Navarro Cucurella&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;edat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;        &lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;professió&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;   &lt;span class="s2"&gt;&amp;quot;alcalde&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;sou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;         &lt;span class="mi"&gt;320&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;adreça&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;      &lt;span class="p"&gt;{&lt;/span&gt;
                        &lt;span class="s2"&gt;&amp;quot;carrer&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;      &lt;span class="s2"&gt;&amp;quot;Únic S/N&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="s2"&gt;&amp;quot;població&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;Berrós Jussà&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="s2"&gt;&amp;quot;cp&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;          &lt;span class="mi"&gt;25597&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="s2"&gt;&amp;quot;localitat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;   &lt;span class="s2"&gt;&amp;quot;La Guingueta d&amp;#39;Àneu&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="s2"&gt;&amp;quot;província&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;   &lt;span class="s2"&gt;&amp;quot;Lleida&amp;quot;&lt;/span&gt;
                    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En el model relacional, la incorporació de l'adreça es sol resoldre
amb alguna variació de les següents maneres:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;la &lt;em&gt;bruta&lt;/em&gt;: afegint els camps de l'adreça directament a la taula de
persones. Les dades no queden normalitzades, és clar.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;la &amp;quot;relacional&amp;quot;: creant una taula d'adreces i relacionant les
entrades amb les persones a partir de la seva clau primària.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Alguns SGBDs incorporen la característica de dades complexes del
model &lt;a class="reference external" href="http://es.wikipedia.org/wiki/Base_de_datos_objeto-relacional"&gt;Objecte-Relacional&lt;/a&gt;
(com ara PostGreSQL, Oracle DB entre d'altres)&lt;/p&gt;
&lt;p&gt;En aquest cas, és possible fer servir quelcom molt similar al que
hem fet amb MongoDB.&lt;/p&gt;
&lt;p&gt;Per exemple, en PostGreSQL definiríem el tipus &lt;em&gt;Adressa&lt;/em&gt; segons:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TYPE&lt;/span&gt; &lt;span class="n"&gt;Adressa&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;carrer&lt;/span&gt;     &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;poblacio&lt;/span&gt;   &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;cp&lt;/span&gt;         &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;localitat&lt;/span&gt;  &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;provincia&lt;/span&gt;  &lt;span class="nb"&gt;TEXT&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I faríem servir aquesta a la taula &lt;em&gt;persones&lt;/em&gt; per exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;persones&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id&lt;/span&gt;         &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;PRIMARY&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;nom&lt;/span&gt;        &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;edat&lt;/span&gt;       &lt;span class="nb"&gt;SMALLINT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;professio&lt;/span&gt;  &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;sou&lt;/span&gt;        &lt;span class="nb"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;adr&lt;/span&gt;        &lt;span class="n"&gt;Adressa&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Si ho mirem bé, l'adreça pot ser considerada un &lt;em&gt;tipus definit per
l'usuari&lt;/em&gt; (&lt;em&gt;UDT&lt;/em&gt; o &lt;em&gt;User Defined Type&lt;/em&gt; en notació Objecte-Relacional).&lt;/p&gt;
&lt;p&gt;Què passaria en comptes d'un tipus, estiguérem interessats en
representar la relació de dues entitats &lt;em&gt;com cal&lt;/em&gt;. Per exemple, suposa
que tenim la típica relació &lt;em&gt;comades&lt;/em&gt; i &lt;em&gt;línies de comanda&lt;/em&gt; on cada
comanda pot tenir una o més línies de comanda i cada línia de comanda
correspon a un producte i la quantitat de producte demanada.&lt;/p&gt;
&lt;p&gt;En el model relacional típicament representaríem aquesta relació de la
següent manera &lt;a class="footnote-reference" href="#dersimplificat" id="id4"&gt;[2]&lt;/a&gt;:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama Entitat-Relació de COMANDES i LINIES_COMANDA" src="http://apuntstecnics.herokuapp.com/images/mongodb.016.img001.DER.comandes.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Aquesta relació 1:N la resoldríem posant la clau primària de COMANDES
a LINIES_COMANDA &lt;a class="footnote-reference" href="#references" id="id5"&gt;[4]&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;COMANDES&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id&lt;/span&gt;          &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;PRIMARY&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="k"&gt;data&lt;/span&gt;        &lt;span class="nb"&gt;DATE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;client&lt;/span&gt;      &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;LINIES_COMANDA&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id&lt;/span&gt;          &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;NOT&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt; &lt;span class="k"&gt;PRIMARY&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;id_comanda&lt;/span&gt;  &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;REFERENCES&lt;/span&gt; &lt;span class="n"&gt;COMANDES&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;quantitat&lt;/span&gt;   &lt;span class="nb"&gt;REAL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;producte&lt;/span&gt;    &lt;span class="nb"&gt;TEXT&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A MongoDB també podríem posar les comandes i les línies de comanda a
col·leccions separades, i afegir l'identificador de la comanda a cada
línia de comanda, tot calcant la representació del model relacional.
Amb tot, hauríem de trobar una bona excusa per fer-ho així. El més
probable és que les comandes es guardin en documents amb el següent
aspecte:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;529a3f2b255c0122ce5280ba&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;data&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;2014/03/21&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;client&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;  &lt;span class="s2"&gt;&amp;quot;Irene Ruíz Cloquell&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;línies&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;529a3f2b255c0122ce5280ba&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;quantitat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;3.70&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;producte&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Pollastre de corral qtat extra&amp;quot;&lt;/span&gt;
        &lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;ObjectId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;529f60032cb934f132280b25&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;quantitat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;4.23&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;producte&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Salsitxes casolanes gall dindi&amp;quot;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id6"&gt;
&lt;h2&gt;Arrays&lt;/h2&gt;
&lt;p&gt;Acabem de veure a l'exemple de comandes de la secció anterior, com
podem resoldre la incorporació de més d'una línia a una comanda a
MongoDB.&lt;/p&gt;
&lt;p&gt;En el model relacional, a l'igual que amb els subdocuments, la
incorporació de llistes també es sol realitzar amb alguna variació de
les següents maneres:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;la &lt;em&gt;bruta&lt;/em&gt;: afegint uns tants camps com el màxim que esperem
guardar-hi. Per exemple, si hem de posar els telèfons d'una
persona, faríem quelcom similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;persones&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id&lt;/span&gt;         &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;PRIMARY&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;nom&lt;/span&gt;        &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;edat&lt;/span&gt;       &lt;span class="nb"&gt;SMALLINT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;professio&lt;/span&gt;  &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;sou&lt;/span&gt;        &lt;span class="nb"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;telefon1&lt;/span&gt;   &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;telefon2&lt;/span&gt;   &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;telefon3&lt;/span&gt;   &lt;span class="nb"&gt;TEXT&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;la &lt;em&gt;relacional&lt;/em&gt;: creant una taula amb els telèfons i associant-los
la persona&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;Telefons&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id&lt;/span&gt;         &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;PRIMARY&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;id_persona&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;REFERENCES&lt;/span&gt; &lt;span class="n"&gt;Persones&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;numero&lt;/span&gt;     &lt;span class="nb"&gt;TEXT&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;la &lt;em&gt;objecte-relacional&lt;/em&gt;: aquells SGBDs que admeten característiques
objecte-relacionals, sovint ofereixen suport pels arrays.&lt;/p&gt;
&lt;p&gt;Per exemple, en PostGreSQL, definiríem:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;persones&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id&lt;/span&gt;         &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="k"&gt;PRIMARY&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;nom&lt;/span&gt;        &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;edat&lt;/span&gt;       &lt;span class="nb"&gt;SMALLINT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;professio&lt;/span&gt;  &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;sou&lt;/span&gt;        &lt;span class="nb"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;telefons&lt;/span&gt;   &lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;PostGreSQL permet definir arrays tot indicant els claudàtors al
final, de manera molt similar a la es fa servir en llenguatges de
programació com ara Java. Fins i tot es poden afegir tipus definits
per nosaltres (UDT) com ara l'adreça.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;A MongoDB, com ja hem pogut veure a diferents exemples, adoptem una
solució idèntica (si no ens fixem en la sintaxi) a la que ens ofereix
PostGreSQL.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="cardinalitat-de-les-relacions"&gt;
&lt;h2&gt;Cardinalitat de les relacions&lt;/h2&gt;
&lt;p&gt;Així què? Fem servir una o dues col·leccions per emmagatzemar dades
relacionades?&lt;/p&gt;
&lt;p&gt;En general, tendirem a preferir guardar en la mateixa col·lecció les
dades que sovint voldrem consultar juntes. És a dir, no ens
preocuparem de &lt;em&gt;normalitzar&lt;/em&gt; les dades com al model relacional.&lt;/p&gt;
&lt;p&gt;Com a guia per decidir-te si fer servir una o dues col·leccions per
representar una relació entre dues entitats amb MongoDB, considera:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;relacions &lt;em&gt;1:1&lt;/em&gt; : En general farem servir una única col·lecció, a
menys que ens interessi separar-les per alguna raó. Per exemple,
perquè ocupen massa juntes &lt;a class="footnote-reference" href="#maxim16mb" id="id7"&gt;[3]&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;relacions &lt;em&gt;1:N&lt;/em&gt; : Normalment ho ficarem tot a una col·lecció si &lt;em&gt;N&lt;/em&gt;
és &lt;em&gt;petita&lt;/em&gt;. Per exemple, hi ha relativament poques línies de
comandes per cada comanda.
Imagina, però, que tens la llista d'habitants de Catalunya per
comarca. En aquest cas &lt;em&gt;N&lt;/em&gt; pot arribar a ser una mica gran en alguns
casos, i potser voldràs separar les col·leccions &lt;em&gt;comarques&lt;/em&gt; i
&lt;em&gt;habitants&lt;/em&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;relacions &lt;em&gt;M:N&lt;/em&gt; : En aquest cas, ens podem plantejar si dupliquem la
informació o bé fem servir dues col·leccions amb llistes
d'identificadors a una o a les dues entitats.&lt;/p&gt;
&lt;p&gt;Si bé és cert la majoria de les vegades fa por duplicar informació
per problemes de coherència, hi ha aplicacions per les quals, no és
tan problemàtic que les dades puguin patir de certa incoherència i,
en canvi, és molt més prioritari l'agilitat d'accés a les dades. Per
exemple, considera els comentaris a les entrades d'un bloc.
Probablement et podria agradar tenir una col·lecció de
&lt;em&gt;comentaristes&lt;/em&gt; separada de la d'&lt;em&gt;entrades&lt;/em&gt;. Així, si un
comentarista canvia de correu electrònic, el canvi es podria veure
reflectit en tots els seus comentaris. El més probable, però, és que
no t'importi tant si en algunes entrades el comentarista ha fet
servir un pseudònim o un altre.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En resum, el model documental no valora de la mateixa manera que el
relacional la normalització de les dades. La seva prioritat, sovint,
es troba més en l'agilitat d'accés. Per tot plegat, és fàcil trobar-se
amb documents &lt;em&gt;complexos&lt;/em&gt; on apareixen les dades de diferents entitats
relacionades entre si.&lt;/p&gt;
&lt;div class="section" id="exercici-1-entrades-d-un-bloc"&gt;
&lt;h3&gt;Exercici 1. Entrades d'un bloc&lt;/h3&gt;
&lt;p&gt;Una entrada en un bloc té un autor, una data, un títol i un
desenvolupament (bàsicament el text de l'entrada). Cada entrada pot
tenir 0 o més comentaris. Un comentari té un autor (el comentarista),
una data, una adreça de correu, i un text amb el comentari.&lt;/p&gt;
&lt;p&gt;Proposa un diagrama E/R o bé la implementació en SQL de les entitats i
relacions d'aquest enunciat. Pista: entrades, autors, comentaris.&lt;/p&gt;
&lt;p&gt;Proposa una implementació amb MongoDB tot tenint en compte les
reflexions anteriors.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pista&lt;/strong&gt;: inventat les dades (és clar) i no cal ni que arribis al &lt;em&gt;lorem
ipsum&lt;/em&gt; pel text (amb un &lt;em&gt;text de l'entrada&lt;/em&gt; n'hi hauria prou)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-ampliacio-comandes-ampliades"&gt;
&lt;h3&gt;Exercici 2. (ampliació) Comandes ampliades&lt;/h3&gt;
&lt;p&gt;Plantejat el model COMANDES i LINIES_COMANDA vist abans. Aquest cop,
però, l'ampliarem amb les entitats CLIENTS i PRODUCTES.&lt;/p&gt;
&lt;p&gt;Dels clients en guardarem el NIF, el nom de contacte, l'adreça de
facturació i la d'enviament, i un o més telèfons.&lt;/p&gt;
&lt;p&gt;Dels productes guardarem el nom, una descripció i el preu unitari.&lt;/p&gt;
&lt;p&gt;Fes una proposta en model relacional i, més important, una per
MongoDB. Com sempre, inventat les dades però fes que semblin
realistes.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="finsara" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Això és cert en el moment en que escric aquests
articles. Potser en un futur la cosa canviï.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="dersimplificat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Es tracta d'una versió simplificada. Entre
d'altres coses, probablement, a una implementació més realista, els
clients i els productes tindrien les seves pròpies taules.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="maxim16mb" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id7"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Recorda que hi ha un límit de 16Mb com a màxim per
document a MongoDB.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="references" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En altres SGBDs diferents de PostGreSQL, &lt;em&gt;REFERENCES&lt;/em&gt;
equival a &lt;em&gt;FOREIGN KEY&lt;/em&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sat, 14 Mar 2015 20:59:09 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-03-14:disseny-de-colleccions.html</guid><category>mongoDB</category></item><item><title>Diagrames de seqüència</title><link>http://apuntstecnics.herokuapp.com/diagrames-de-sequencia.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document és un guió per la presentació a classe dels diagrames
de seqüència.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exemple-comandes"&gt;
&lt;h2&gt;Exemple Comandes&lt;/h2&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="comandes" src="http://apuntstecnics.herokuapp.com/images/uml002.img001.comandes.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Imatge generada amb BOUML&lt;/p&gt;
&lt;p&gt;Del llibre &lt;em&gt;UML Distilled: A Brief Guide to the Standard Object
Modeling Language, Third Edition&lt;/em&gt; de Martin Fowler.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exemple-entorn-gat-renat"&gt;
&lt;h2&gt;Exemple Entorn Gat Renat&lt;/h2&gt;
&lt;p&gt;Considerant l'entorn operatiu del Gat Renat amb l'ampliació de
l'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/relacions-entre-classes.html"&gt;exercici 1 de Relacions entre classes&lt;/a&gt;&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="entorn Renat" src="http://apuntstecnics.herokuapp.com/images/uml002.img002.exemple_entornrenat.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-l-activitat-dels-ulls-del-gat-renat"&gt;
&lt;h3&gt;Exercici 1. L'activitat dels ulls del Gat Renat&lt;/h3&gt;
&lt;p&gt;Representa el diagrama de seqüència corresponent a l'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/relacions-entre-classes.html"&gt;exercici 2 de
Relacions entre classes&lt;/a&gt; de
manera que es pugui entendre com interacciona el gat amb els ulls a
partir dels diferents serveis del gat que afecten a l'estat dels ulls.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Mon, 23 Feb 2015 13:53:30 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-23:diagrames-de-sequencia.html</guid></item><item><title>Diagrames d'estat</title><link>http://apuntstecnics.herokuapp.com/diagrames-destat.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document és un guió per la presentació a classe dels diagrames
de màquines d'estat. En el document s'abreujarà per &lt;em&gt;diagrames
d'estat&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;Diagrames d'estat&lt;/h2&gt;
&lt;p&gt;Un diagrama d'estats mostra una &lt;em&gt;màquina d'estats&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Els diagrames d'estat estan formats per un conjunt d'estats i les
transicions entre aquests.&lt;/p&gt;
&lt;p&gt;Les transicions normalment apareixen etiquetades amb l'esdeveniment
que les provoca o dispara (&lt;em&gt;trigger&lt;/em&gt;). També poden incloure informació
respecte a condicions en que es dispararan i accions a realitzar. La
notació completa és: &lt;em&gt;esdeveniment[condició]/acció&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Farem servir els diagrames d'estat per modelitzar el comportament
dinàmic d'un sistema, normalment el d'objectes que responen a
esdeveniments externs.&lt;/p&gt;
&lt;p&gt;Exemple una mica forçat del funcionament d'un ascensor poc
convencional.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Estat de l'ascensor" src="http://apuntstecnics.herokuapp.com/images/uml001.img001.estatascensor.png" /&gt;
&lt;/div&gt;
&lt;p&gt;L'estat final no és obligatori i n'hi poden aparèixer més d'un.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="implementacio"&gt;
&lt;h2&gt;Implementació&lt;/h2&gt;
&lt;p&gt;Una possible codificació per l'estat &lt;em&gt;Funcionant&lt;/em&gt; seria:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
switch (estat) {
    case PlantaBaixa:
        switch (esdeveniment) {
            case Puja1:
                setEstat(PrimerPis);
                break;
            case Puja2:
                setEstat(SegonPis);
                break;
            case Baixa1:
            case Baixa2:
                mostraError();
        }
        break;
    case PrimerPis:
        switch (esdeveniment) {
            «...»
        }
        break;
    case SegonPis:
        «...»
        break;
}
&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-implementacio-de-l-ascensor"&gt;
&lt;h3&gt;Exercici 1. Implementació de l'ascensor&lt;/h3&gt;
&lt;p&gt;Completa la implementació de l'estat compost &lt;em&gt;Funcionant&lt;/em&gt; de l'exemple
de l'ascensor.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-l-estat-del-gat-renat"&gt;
&lt;h3&gt;Exercici 2. L'estat del Gat Renat&lt;/h3&gt;
&lt;p&gt;Considera una versió del Gat Renat que pot estar en alguna de les
següents posicions:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;corrent&lt;/li&gt;
&lt;li&gt;caminant&lt;/li&gt;
&lt;li&gt;dret&lt;/li&gt;
&lt;li&gt;assegut&lt;/li&gt;
&lt;li&gt;estirat&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;El gat no pot posar-se a caminar o a córrer si estava assegut o
estirat. Per altra banda, si estava corrent o caminant, no pot
seure's o estirar-se de cop, primer ha de quedar-se dret. Malgrat
estant dret pot estirar-se directament, no pot posar-se dret si estava
estirat.&lt;/p&gt;
&lt;p&gt;Realitza el diagrama d'estats i proposa un esquema d'implementació.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Mon, 23 Feb 2015 13:53:30 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-23:diagrames-destat.html</guid></item><item><title>Us bàsic de l'entorn de desenvolupament integrat Eclipse</title><link>http://apuntstecnics.herokuapp.com/us-basic-de-lentorn-de-desenvolupament-integrat-eclipse.html</link><description>&lt;!-- categories: eines --&gt;
&lt;!-- tags: eclipse --&gt;
&lt;!-- permalink: '/:categories/eclipse-us-basic' --&gt;
&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquest document accedirem als elements bàsics personalització i ús
de l'entorn Eclipse.&lt;/p&gt;
&lt;p&gt;Per seguir-lo, caldrà disposar de&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;eclipse instal·lat amb jdk correctament instal·lat&lt;/li&gt;
&lt;li&gt;plug-in CDT instal·lat&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Si encara no tens instal·lat Eclipse, pots seguir aquesta
&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-de-eclipse.html"&gt;guia d'eclipse&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Si no tens instal·lat el CDT, pots seguir aquesta
&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/configuracio-declipse-per-cc.html"&gt;guia de CDT&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="continguts"&gt;
&lt;h2&gt;Continguts&lt;/h2&gt;
&lt;p&gt;Començarem amb la creació d'un programa en C que respongui al següent
enunciat de requeriments:&lt;/p&gt;
&lt;blockquote&gt;
Escriu un programa que demani a l'usuari dos punts en el pla i li
mostri la longitud del segment que descriuen.&lt;/blockquote&gt;
&lt;p&gt;Crea un nou projecte de tipus &lt;em&gt;C Project&lt;/em&gt; i anomenal &lt;em&gt;Punts&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Selecciona el projecte acabat de crear i, amb el botó dret, crea un
nou fitxer font de C&lt;/p&gt;
&lt;p&gt;Ens crea el nou fitxer amb una capçalera de comentaris on surt la
data de creació i el nom de l'autor (el nom de l'usuari del
sistema)&lt;/p&gt;
&lt;p&gt;Comença a escriure &lt;tt class="docutils literal"&gt;int main(&lt;/tt&gt; i fixa't que et tanca el parèntesi
automàticament. Un detall és que si tot i així el tanques tu, no et
queden dos parèntesis tancats.&lt;/p&gt;
&lt;p&gt;Passa el mateix amb les claus. Si obres &lt;tt class="docutils literal"&gt;{&lt;/tt&gt; i fas &amp;lt;enter&amp;gt;, et
tanca la clau i t'indenta adequadament en la línia on probablement
voldràs començar a escriure codi.&lt;/p&gt;
&lt;p&gt;Introdueix &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;printf(&amp;quot;Introdueix&lt;/span&gt; les coordenades de dos punts\n&amp;quot;)&lt;/tt&gt;
sense el punt i coma final. Veuràs que t'avisa del problema amb un
interrogant al costat esquerre de la línia. Si poses el cursor a
sobre de l'interrogant, podràs llegir una descripció de l'error. En
aquest cas &lt;tt class="docutils literal"&gt;Missing ;&lt;/tt&gt;. Corregeix la situació i l'avís
desapareixerà.&lt;/p&gt;
&lt;p&gt;També veuràs que algunes paraules del missatge apareixen
subratllades en vermell. El comprovador ortogràfic no està
configurat pel català &lt;a class="footnote-reference" href="#spellcat" id="id1"&gt;[1]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Afegeix&lt;/p&gt;
&lt;pre class="literal-block"&gt;
printf(&amp;quot;Punt 1 coordenada x: &amp;quot;);
scanf(&amp;quot;%f&amp;quot;, &amp;amp;x1);
&lt;/pre&gt;
&lt;p&gt;Un nou avís ens informa que la variable x1 no apareix definida.
Escollim l'opció de creació d'una variable local i veiem que ens la
crea però amb el tipus incorrecte (no sempre encerta) A més, ens ha
col·locat la declaració a la línia justament anterior al seu ús
quan en C es usual posar-les a l'inici del bloc. Fes les
correccions corresponents.&lt;/p&gt;
&lt;p&gt;Escriu peticions per la resta de coordenades, fes el càlcul de la
longitud del segment i mostra el resultat per pantalla.&lt;/p&gt;
&lt;p&gt;El programa hauria de quedar quelcom similar a:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
/*
 * calculaSegment.c
 *
 *  Created on: 16/08/2012
 *      Author: Moisès
 */

#include&amp;lt;stdio.h&amp;gt;
#include&amp;lt;math.h&amp;gt;
int main() {
    float x1, y1, x2, y2;
    float longitud;
    printf(&amp;quot;Introdueix les coordenades de dos punts\n&amp;quot;);
    printf(&amp;quot;Punt 1 coordenada x: &amp;quot;);
    scanf(&amp;quot;%f&amp;quot;, &amp;amp;x1);
    printf(&amp;quot;Punt 1 coordenada y: &amp;quot;);
    scanf(&amp;quot;%f&amp;quot;, &amp;amp;y1);
    printf(&amp;quot;Punt 2 coordenada x: &amp;quot;);
    scanf(&amp;quot;%f&amp;quot;, &amp;amp;x2);
    printf(&amp;quot;Punt 2 coordenada y: &amp;quot;);
    scanf(&amp;quot;%f&amp;quot;, &amp;amp;y2);
    longitud = sqrt(pow((x2-x1), 2)+pow((y2-y1), 2));
    printf(&amp;quot;La longitud del segment és %0.2f\n&amp;quot;, longitud);
    return 0;
}
&lt;/pre&gt;
&lt;p&gt;Ara executarem el nostre codi (ex. Run-&amp;gt;run) &lt;a class="footnote-reference" href="#sqrtproblem" id="id2"&gt;[2]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Eclipse ens ha fet tot: compilar, enllaçar i llençar l'execució. Si
anem a la consola veurem que podem introduir les dades i executar
el nostre programa.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Funcionament del càlcul de segment" src="http://apuntstecnics.herokuapp.com/images/eclipse004.img001.funcionant.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Suposem que volem canviar el nom de les variables del primer punt
per &lt;tt class="docutils literal"&gt;coord1&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;coord2&lt;/tt&gt;. Fàcil. Cliquem sobre qualsevol
aparició de &lt;tt class="docutils literal"&gt;x1&lt;/tt&gt; i escollim &lt;em&gt;Refactor&lt;/em&gt; del menú contextual (clic
dret) Ara escollim &lt;em&gt;Rename&lt;/em&gt; i comencem a escriure el nou nom.
Tornem a posar, però, els noms anteriors que eren molt més curts.&lt;/p&gt;
&lt;p&gt;Estaria bé veure els números de línia, no? Windows -&amp;gt; Preferences
-&amp;gt; Editors -&amp;gt; Text Editors -&amp;gt; Show line numbers.&lt;/p&gt;
&lt;p&gt;Ara crearem una funció que calculi la longitud del segment. Per
fer-ho, en comptes de copiar&amp;amp;enganxar, el que farem serà
seleccionar l'expressió que assignem a &lt;tt class="docutils literal"&gt;longitud&lt;/tt&gt; i fem
Refactor-&amp;gt;Extract function. Aqui, simplement escollim el nom de la
funció (per exemple &lt;tt class="docutils literal"&gt;calcula_longitud&lt;/tt&gt; i Eclipse ens ho fa tot
sol!. Ens ha posat com a tipus de retorn &lt;em&gt;double&lt;/em&gt;. El podem
corregir si volem un float.&lt;/p&gt;
&lt;p&gt;Ara tornarem a executar el programa. Aquest cop, però, anirem a Run
-&amp;gt; Debug. Ens demanarà obrir una nova perspectiva, acceptem-ho i
veurem quelcom similar a la següent imatge.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Depuració amb Eclipse" src="http://apuntstecnics.herokuapp.com/images/eclipse004.img002.depurant.png" /&gt;
&lt;/div&gt;
&lt;p&gt;A la secció 1 trobem el fil d'execució en que estem. Com que no estem
desenvolupant una aplicació multifil, podem ignorar-la&lt;/p&gt;
&lt;p&gt;La secció 2 correspon a la inspecció de variables i altres elements
de l'execució del nostre programa. Es clar que les variables no han
estat inicialitzades i contenen soroll.&lt;/p&gt;
&lt;p&gt;La secció 3 continua sent el nostre codi però té ressaltada la
línia amb el proper codi a executar. De moment només ha declarat
les variables. Atenció que, tot i que podem editar, ara no és el
moment més adequat i probablement ens demanarà tornar a executar
per tenir en compte els canvis. També és interessant passar per
sobre de les variables amb el cursor de l'apuntador. Veurem
informació en temps d'execució.&lt;/p&gt;
&lt;p&gt;La secció 4 ja l'havíem vista. Ens dona un esquema del codi. Podem
veure-hi les nostres dues funcions &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;calcula_longitud()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;La secció 5 també la coneixem: correspon a la consola.&lt;/p&gt;
&lt;p&gt;Amb Run -&amp;gt; Step Over (o F6) podem executar la línia actual. Així
podem anar fent fins que arribem a &lt;tt class="docutils literal"&gt;scanf()&lt;/tt&gt;. No podrem avançar
fins que no introduïm un valor i fem enter a la consola.&lt;/p&gt;
&lt;p&gt;Fixem-nos que a la secció d'inspecció de variables podem veure el
nou valor de &lt;tt class="docutils literal"&gt;x1&lt;/tt&gt;. Suposem que voldríem que fos un altre. Doncs
l'editem a la secció d'inspecció i ja està!&lt;/p&gt;
&lt;p&gt;Com que és una mica incòmode anar línia a línia, afegirem un punt
d'aturada a la línia on assignem valor a la variable &lt;tt class="docutils literal"&gt;longitud&lt;/tt&gt;.
Ho farem, per exemple, amb clic dret sobre el número de línia i
&lt;em&gt;Toggle breakpoint&lt;/em&gt; (tot i que és més directe amb un doble clic
sobre la part grisa del costat) Ara continuem amb l'execució del
programa amb Run -&amp;gt; Resume o F8. S'aturarà quan arribi a la línia
amb el punt d'aturada.&lt;/p&gt;
&lt;p&gt;Ara tenim dues opcions. Executar aquesta línia com un bloc (farem
F6) o bé entrar dins de la funció &lt;tt class="docutils literal"&gt;calcula_longitud()&lt;/tt&gt; per
inspeccionar-la (Run -&amp;gt; Step Into o F5) Si fem aquesta segona
notarem que l'inspector de variables ja no té longitud. Això és
perquè estem en un bloc on aquesta variable no existeix. De fet,
encara que tenen el mateix nom, la resta de les variables no són
les mateixes que les del bloc principal.&lt;/p&gt;
&lt;p&gt;Per cert, trobarem l'executable a la carpeta Debug dins de la carpeta
en el &lt;em&gt;workspace&lt;/em&gt; corresponent al nostre projecte.&lt;/p&gt;
&lt;hr class="docutils" /&gt;
&lt;table class="docutils footnote" frame="void" id="spellcat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Tot i que es pot configurar perquè faci la comprovació
pel català, el procés no resulta gaire interessant pels objectius
d'aquesta guia. Queda com a exercici de l'usuari interessat.
Altrament caldrà ignorar aquest subratllat, o encara millor,
inhabilitar la comprovació ortogràfica.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="sqrtproblem" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Amb les darreres versions del compilador gcc (i
potser amb altres) cal linkar explícitament la biblioteca math al
nostre programa. Per fer-ho haurem d'anar a les propietats del
projecte -&amp;gt; C/C++ Build -&amp;gt; Settings -&amp;gt; GCC C Linker -&amp;gt; Libraries, i
aquí premem l'icona verda amb un + i afegim &lt;tt class="docutils literal"&gt;m&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Mon, 23 Feb 2015 13:53:30 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-23:us-basic-de-lentorn-de-desenvolupament-integrat-eclipse.html</guid></item><item><title>Introducció al Refactoring</title><link>http://apuntstecnics.herokuapp.com/introduccio-al-refactoring.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta sèrie d'entrades tindrem una primera aproximació al
concepte de &lt;em&gt;refacció&lt;/em&gt;, més conegut directament amb el nom en anglès:
&lt;em&gt;refàctoring&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;El tema es presentarà tot seguint un exemple.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="requeriments"&gt;
&lt;h2&gt;Requeriments&lt;/h2&gt;
&lt;p&gt;Per seguir aquests continguts amb el màxim d'aprofitament et caldran
coneixements de programació orientada a objectes en Java i UML, així
com utilització del gestor de versions Git i del entorn de prova
unitària JUnit.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="recomanacions"&gt;
&lt;h2&gt;Recomanacions&lt;/h2&gt;
&lt;p&gt;Per a poder extreure el màxim d'aquests continguts, considera les
següents recomanacions:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Si estàs fent servir un IDE que ofereixi suport per la refacció, et
proposo que pels següents exercicis &lt;strong&gt;no facis&lt;/strong&gt; servir aquesta
funcionalitat. D'aquesta manera aconseguiràs un coneixement molt més
profund del tema que el que obtindries amb simplement veure els
resultats.&lt;/li&gt;
&lt;li&gt;Realitza els exercicis de manera seqüencial. Evidentment, si
descobreixes alguna cosa posteriorment hi pots tornar a un exercici
anterior. Evita, però, començar a realitzar un exercici després
d'haver llegit continguts posteriors.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per començar, passa a la següent &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/refactoring-que-es.html"&gt;entrada&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="referencies"&gt;
&lt;h2&gt;Referències&lt;/h2&gt;
&lt;p&gt;Aquests continguts estan basats en moltes fonts. Faré referència
especial a:&lt;/p&gt;
&lt;table class="docutils citation" frame="void" id="fowler" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;[FOWLER]&lt;/td&gt;&lt;td&gt;Fowler, Martin (1999) &lt;em&gt;Refactoring: Improving the Design of Existing
Code&lt;/em&gt;.  Addison-Wesley Professional.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils citation" frame="void" id="martin" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;[MARTIN]&lt;/td&gt;&lt;td&gt;Martin, Robert C. (2009) &lt;em&gt;Clean Code: A Handbook of Agile Software
Craftmanship&lt;/em&gt;. Prentice Hall.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Wed, 11 Feb 2015 10:28:42 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-11:introduccio-al-refactoring.html</guid><category>programari</category><category>java</category></item><item><title>Refactoring: què és</title><link>http://apuntstecnics.herokuapp.com/refactoring-que-es.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada estudiarem què és el &lt;em&gt;refactoring&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="refactoring"&gt;
&lt;h2&gt;Refactoring&lt;/h2&gt;
&lt;p&gt;Llegim a la pàgina principal de &lt;a class="reference external" href="http://www.refactoring.com/"&gt;www.refactoring.com&lt;/a&gt; mantinguda per Martin Fowler, un dels
autors de referència sobre el concepte de &lt;em&gt;refacció&lt;/em&gt; o &lt;em&gt;refactoring&lt;/em&gt;:&lt;/p&gt;
&lt;blockquote&gt;
Refactoring is a disciplined technique for restructuring an
existing body of code, altering its internal structure without
changing its external behavior.&lt;/blockquote&gt;
&lt;p&gt;Així, la refacció és un procés que persegueix millorar un codi sense
afectar la seva funcionalitat.&lt;/p&gt;
&lt;p&gt;No és fàcil d'explicar, en termes generals, en que consisteix aquesta
millora. Aquí considerarem que un codi és millor que un altre quan
una o més de les següents afirmacions s'acompleixi:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;és més fàcil d'entendre&lt;/li&gt;
&lt;li&gt;és més fàcil de reutilitzar&lt;/li&gt;
&lt;li&gt;és més fàcil de modificar&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;La refacció &lt;strong&gt;no&lt;/strong&gt; afegeix més funcionalitat al codi. És un procés
que fem per a nosaltres mateixos, els desenvolupadors, i no pels usuaris
finals (tot i que aquests també es veuran beneficiats)&lt;/p&gt;
&lt;p&gt;La refacció &lt;strong&gt;no&lt;/strong&gt; necessàriament fa el codi executar-se més
eficientment. De fet, de vegades pot ser el contrari. Amb tot, la
possible pèrdua d'eficiència d'execució es veu gairebé sempre
compensada per l'enorme increment en l'eficiència d'introducció de
nous canvis, correcció d'errors, etc. Ah! En el no tan freqüent cas
que l'eficiència en execució sigui un punt crític, la refacció ajuda a
que l'optimització s'apliqui sobre un codi més senzill i,
probablement, serà encara més efectiva.&lt;/p&gt;
&lt;p&gt;Clàssicament als desenvolupadors ens diuen que primer hem de fer un
disseny perfecte, per després implementar-lo. Amb les tècniques de
desenvolupament àgil de moda actualment, aquest període de
disseny s'ha vist reduït. En comptes, el programari es va generant en
cicles de curta durada. A cada cicle, normalment es corregeixen errors
al codi anterior, se li afegeixen noves funcionalitats i... es
realitza un procés de refacció per permetre continuar fent més cicles
&lt;em&gt;curts&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Però com? T'estic venent que desenvolupadors amb seny modificaran un
codi que aparentment ja funciona només per fer-ho més &amp;quot;maco&amp;quot;? I si la
modificació trenca l'aplicació en algun punt imprevist? Com era
aquella màxima... «si funciona, no el toquis»? Hi ha truc. Encara que,
en la teoria, no és absolutament imprescindible, la refacció es
recolza fortament en la &lt;em&gt;prova unitària&lt;/em&gt;. El procés es realitza amb
petits canvis seguits del llançament de la bateria de proves. Si hi ha
algun problema, es detecta, es corregeix i es continua amb un sistema
lliure d'errors (fins on les proves sàpiguen dir).&lt;/p&gt;
&lt;p&gt;Passem a veure l'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/refactoring-lexemple.html"&gt;exemple&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Wed, 11 Feb 2015 10:27:42 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-11:refactoring-que-es.html</guid><category>programari</category><category>java</category></item><item><title>Refactoring: L'exemple</title><link>http://apuntstecnics.herokuapp.com/refactoring-lexemple.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada es presenta i desenvolupa una primera implementació
de l'exemple que treballarem al llarg d'aquesta introducció al
&lt;em&gt;refactoring&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="l-exemple"&gt;
&lt;h2&gt;L'exemple&lt;/h2&gt;
&lt;p&gt;Aquest document només pretén servir d'introducció d'aquest tema. Ho
farà a partir d'una versió simplificada de l'exemple introductori de
&lt;a class="citation-reference" href="#fowler" id="id1"&gt;[FOWLER]&lt;/a&gt;. Es recomana anar seguint l'exemple i realitzant els
exercicis.&lt;/p&gt;
&lt;div class="section" id="punt-de-partida"&gt;
&lt;h3&gt;Punt de partida&lt;/h3&gt;
&lt;p&gt;L'exemple que treballarem és un sistema de gestió de lloguers de
vehicles. En concret, estudiarem el programa que genera els informes a
lliurar als clients. El programa, a partir dels lloguers realitzats
per un client, calcula l'import total dels lloguers i les
bonificacions aconseguides. Els vehicles llogats poden ser de tres
categories diferents: bàsic, general i de luxe.&lt;/p&gt;
&lt;p&gt;Considera el següent diagrama UML de classes que descriu els elements
principals d'aquest exemple.&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="Diagrama inicial de classes" src="http://apuntstecnics.herokuapp.com/images/refactoring.img001.diagrama_classes.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-codificant-el-gestor-de-lloguers"&gt;
&lt;h3&gt;Exercici 1. Codificant el Gestor de Lloguers&lt;/h3&gt;
&lt;!-- XXX TODO: cal descriure els tipus de les propietats --&gt;
&lt;!-- XXX TODO: cal idear mecanisme per obtenir el nombre de lloguers i
recorrer els lloguers des de fora d'un client --&gt;
&lt;p&gt;A partir del diagrama anterior, fes una proposta de codificació de les
classes que hi apareixen.&lt;/p&gt;
&lt;p&gt;Assegura't que les propietats que apareixen al diagrama de classes
disposen d'accessors adequats. Considera el codi següent per la classe
Client com a referència.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Vector&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Client&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nif&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Client&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nif&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nif&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nif&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;telefon&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;lloguers&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;getNif&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;     &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;nif&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;     &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;     &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;     &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;getTelefon&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setNif&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nif&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nif&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nif&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setNom&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setTelefon&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;telefon&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;telefon&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;afegeix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(!&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;contains&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;elimina&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;contains&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;remove&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;conte&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;contains&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// de moment en blanc&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-2-el-gestor-de-lloguers-lite"&gt;
&lt;h3&gt;Exercici 2. El Gestor de Lloguers &lt;em&gt;lite&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;Codifica la classe &lt;tt class="docutils literal"&gt;GestorLloguersLite&lt;/tt&gt; que crei un client amb el
teu nom, que disposi de un mínim de tres lloguers, un per cada tipus
de vehicle.&lt;/p&gt;
&lt;p&gt;Considera el següent &lt;em&gt;snippet&lt;/em&gt; com a pista per crear els vehicles i
lloguers:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c1"&gt;// demostració de construcció d&amp;#39;un vehicle de categoria BASIC&lt;/span&gt;
&lt;span class="n"&gt;Vehicle&lt;/span&gt; &lt;span class="n"&gt;vehicleBasic&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vehicle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Tata&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Vista&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Vehicle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;BASIC&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

&lt;span class="c1"&gt;// demostració de construccuó d&amp;#39;un lloguer amb una data&lt;/span&gt;
&lt;span class="n"&gt;SimpleDateFormat&lt;/span&gt; &lt;span class="n"&gt;dateFormat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SimpleDateFormat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;d/M/yyyy&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;Date&lt;/span&gt; &lt;span class="n"&gt;date&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dateFormat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parse&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;2/8/2013&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguerBasic&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Lloguer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;vehicleBasic&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

&lt;span class="c1"&gt;// demostració de formatat d&amp;#39;una data&lt;/span&gt;
&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dateFormat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguerBasic&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getData&lt;/span&gt;&lt;span class="o"&gt;()));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finalment, implementa un mètode estàtic de &lt;tt class="docutils literal"&gt;GestorLloguersLite&lt;/tt&gt; que
donat un Client, retorni un String que contingui la següent
informació:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Client: «nom del client»
        «nif»
        «telèfon»
Lloguers: «num de lloguers del client»
        1. vehicle: «marca del vehícle del primer lloguer» «model»
           data d&amp;#39;inici: «data d&amp;#39;inici del lloguer»
           dies llogats: «nombre de dies llogats»
        2. «... dades de la resta de lloguers del client»
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="informe-de-client"&gt;
&lt;h3&gt;Informe de client&lt;/h3&gt;
&lt;p&gt;Hem vist que &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; apareix en blanc al codi que ofereix
el primer exercici.&lt;/p&gt;
&lt;p&gt;El següent diagrama de seqüència ofereix una visió del seu
funcionament:&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="Diagrama inicial de classes" src="http://apuntstecnics.herokuapp.com/images/refactoring.img002.diagrama_sequencia.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Suposa que el codi que et trobes d'aquest mètode és el següent:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Informe de lloguers del client &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="n"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getNif&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;switch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getCategoria&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;Vehicle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;BASIC&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                    &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mf"&gt;1.5&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
                &lt;span class="o"&gt;}&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;Vehicle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;GENERAL&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                    &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mf"&gt;2.5&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
                &lt;span class="o"&gt;}&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;Vehicle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LUXE&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="c1"&gt;// afegeix lloguers freqüents&lt;/span&gt;
        &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;++;&lt;/span&gt;

        &lt;span class="c1"&gt;// afegeix bonificació per dos dies de lloguer de Luxe&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getCategoria&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;Vehicle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LUXE&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;
                &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;++;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="c1"&gt;// composa els resultats d&amp;#39;aquest lloguer&lt;/span&gt;
        &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getMarca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// afegeix informació final&lt;/span&gt;
    &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Import a pagar: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Punts guanyats: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;D'aquest codi en podríem dir vàries coses. Probablement no totes
&lt;em&gt;maques&lt;/em&gt;. El mètode &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; és molt llarg i fa un munt de
coses que probablement hauria de fer alguna altra classe. Seria una
mena de traducció directa d'un algorisme no orientat a objectes a
java.  Podríem dir que és un codi &lt;em&gt;lleig&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Amb tot, el codi fa el que s'espera i al compilador no l'importa
l'estètica. El problema vindrà quan ens calgui modificar-lo. Imagina
que ens demanen que afegim un nou mètode que generi l'informe en
format html. No podríem aprofitar pràcticament res del mètode
&lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; ! D'acord que podem fer un &lt;em&gt;copy&amp;amp;paste&lt;/em&gt; i
modificar la part de construcció del String de tornada. Què passaria
llavors si ens demanen que canviem la lògica del càlcul de l'informe?
(ex. canvien política de preu pels vehicles de luxe).&lt;/p&gt;
&lt;p&gt;Potser em diràs que &lt;em&gt;el codi no és tan complex després de tot&lt;/em&gt; i que
no és tan greu haver-lo de reescriure. Si penses així, recorda que
aquest és només un exemple senzill, una &lt;em&gt;joguina&lt;/em&gt; per introduir el
concepte. A la vida real aquest tipus de codi el trobaràs &lt;strong&gt;molt&lt;/strong&gt; més
llarg, enrevessat i barrejat amb altre codi del mateix nivell.&lt;/p&gt;
&lt;p&gt;Com a regla d'or: si el codi que has de modificar presenta una
resistència important als canvis que persegueixes incorporar-li,
primer refacció i després introducció de la modificació.&lt;/p&gt;
&lt;p&gt;A continuació, seguint diferents passes de refacció, convertirem
aquest disseny en quelcom més &lt;em&gt;maco&lt;/em&gt;. Com que la millora de qualsevol
codi pot ser un procés infinit, ens concentrarem amb l'objectiu
d'aconseguir facilitar la implementació del mètode
&lt;tt class="docutils literal"&gt;Client.informeHTML()&lt;/tt&gt;.&lt;/p&gt;
&lt;!-- XXX TODO: cal reforçar aquest tema com a objectiu, doncs no tornes
a parlar d'aquest concepte fins vàries lliçons després! La primera
vegada que el vas impartir, se't va passar desapercebut i, per
tant, va ser una sorpresa trobar-te una referència a informeHTML --&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-preparant-el-terreny-control-de-versions"&gt;
&lt;h3&gt;Exercici 3. Preparant el terreny: control de versions&lt;/h3&gt;
&lt;p&gt;Per començar, i si encara no ho has fet, crea un repositori Git
on guardaràs les diferents versions d'aquest codi.&lt;/p&gt;
&lt;p&gt;Assegura't que fas servir comentaris informatius per cada &lt;em&gt;commit&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-preparant-el-terreny-proves-unitaries"&gt;
&lt;h3&gt;Exercici 4. Preparant el terreny: proves unitàries&lt;/h3&gt;
&lt;p&gt;Com que anirem modificant el codi de manera significativa, voldrem
disposar d'algun mecanisme que ens garanteixi que no hem trencat res.&lt;/p&gt;
&lt;p&gt;Genera una prova unitària per al mètode &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Inclou les proves al control de versions.&lt;/p&gt;
&lt;p&gt;Pista: obté un informe a partir de dels resultats generats per
la versió actual de &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; amb el client que crees amb
&lt;tt class="docutils literal"&gt;GestorLloguersLite&lt;/tt&gt;. La prova unitària es limitarà a comparar el
resultat de &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; amb l'informe que has obtingut.
Evidentment, si no modifiquem &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; hauria de passar la
prova &lt;a class="footnote-reference" href="#testdespresdecodi" id="id2"&gt;[1]&lt;/a&gt;. La gràcia apareixerà quan modifiquem el
mètode.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-preparant-el-terreny-ara-seriosament-proves-unitaries"&gt;
&lt;h3&gt;Exercici 5. Preparant el terreny: ara seriosament, proves unitàries&lt;/h3&gt;
&lt;p&gt;En cas que estiguis començant amb les proves unitàries, és molt
probable que a l'exercici anterior t'hagis quedat amb una prova
senzilla amb un sol cas. Potser fins i tot n'has fet més d'un de cas.
Molt més sorprenent serà que hagis fet casos de prova amb una
cobertura del 100% del codi a provar (és a dir, proves que &lt;em&gt;provin&lt;/em&gt;
&lt;strong&gt;totes&lt;/strong&gt; les línies del mètode)&lt;/p&gt;
&lt;p&gt;Com que estem d'entrenament, dedica una mica més d'esforç i crea un
joc de prova amb cobertura 100% de les línies del mètode
&lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Pista: cap lloguer, un lloguer, més d'un lloguer, lloguer de vehicle
general amb un dia, lloguer de general amb 2 dies, etc.&lt;/p&gt;
&lt;hr class="docutils" /&gt;
&lt;p&gt;Ara que ja tenim el nostre exemple preparat, passem a fer les &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/refactoring-extraccio-de-metodes.html"&gt;primeres
passes de refacció&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="referencies"&gt;
&lt;h2&gt;Referències&lt;/h2&gt;
&lt;table class="docutils citation" frame="void" id="fowler" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[FOWLER]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Fowler, Martin (1999) &lt;em&gt;Refactoring: Improving the Design of Existing
Code&lt;/em&gt;.  Addison-Wesley Professional.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="testdespresdecodi" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Potser estàs pensant &lt;em&gt;no m'havien venut que les
proves es creen per que fallin? Com és que ara em demanen crear una
prova a passar?.&lt;/em&gt; És cert que l'objectiu de crear una prova
(especialment en TDD) és fer que falli i per això escrivim la prova
abans del codi. En aquest cas però, el codi ja el tenim i estem
pressuposant que funciona. La idea és que aviat canviarem el codi i
volem comprovar que continua funcionant de la mateixa manera
després de les modificacions.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Wed, 11 Feb 2015 10:26:42 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-11:refactoring-lexemple.html</guid><category>programari</category><category>java</category></item><item><title>Refactoring: extracció de mètodes</title><link>http://apuntstecnics.herokuapp.com/refactoring-extraccio-de-metodes.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada relitza els primers passos de refacció sobre
l'exemple. En concret, es realitza un pas de refacció conegut com a
&lt;em&gt;extracció de mètode&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="extraccio-de-metodes"&gt;
&lt;h2&gt;Extracció de mètodes&lt;/h2&gt;
&lt;p&gt;En un mètode tan llarg, potser una de les passes de refacció més
adequada és aconseguir descomposar-lo en mètodes més petits.&lt;/p&gt;
&lt;p&gt;A aquest tipus de refacció li direm &lt;em&gt;extracció de mètode&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* mostra un missatge amb el mes anterior i el mes següent de&lt;/span&gt;
&lt;span class="cm"&gt; * l&amp;#39;especificat per paràmetre.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa que mesActual és un valor entre 1 i 12.  */&lt;/span&gt;
&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostraMesAnteriorISeguent&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mesActual&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// calcula i mostra el mes anterior&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mesAnterior&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;anyAnterior&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mesActual&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;mesAnterior&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;anyAnterior&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;mesAnterior&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mesActual&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;anyAnterior&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Mes anterior: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;mesAnterior&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;anyAnterior&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

    &lt;span class="c1"&gt;// calcula i mostra el mes següent&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mesSeguent&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;anySeguent&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mesActual&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;mesSeguent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;anySeguent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;mesSeguent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mesActual&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;anySeguent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Mes següent: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;mesSeguent&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;anySeguent&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Aquest codi realitza dues coses diferents:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;calcula i mostra el mes anterior&lt;/li&gt;
&lt;li&gt;calcula i mostra el mes següent&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Quan un mètode fa més d'una cosa, sol resultar molt convenient
&lt;em&gt;delegar&lt;/em&gt; algunes o totes aquestes coses a nous mètodes. Això facilita
la llegibilitat i el reaprofitament.&lt;/p&gt;
&lt;p&gt;En aquest exemple, aplicant l'extracció de mètodes aconseguirem el
següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* mostra un missatge amb el mes anterior i el mes següent de&lt;/span&gt;
&lt;span class="cm"&gt; * l&amp;#39;especificat per paràmetre.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa que mesActual és un valor entre 1 i 12.*/&lt;/span&gt;
&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostraMesAnteriorISeguent&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mesActual&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;mostraMesAnterior&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mesActual&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;mostraMesSeguent&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mesActual&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostraMesAnterior&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mesActual&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mesAnterior&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;anyAnterior&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mesActual&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;mesAnterior&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;anyAnterior&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;mesAnterior&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mesActual&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;anyAnterior&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;anyActual&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Mes anterior: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;mesAnterior&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;anyAnterior&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;El mètode &lt;tt class="docutils literal"&gt;mostraMesSeguent()&lt;/tt&gt; te'l deixo per que t'exercitis.&lt;/p&gt;
&lt;p&gt;No sempre resultarà tan fàcil fer l'extracció del mètode com en aquest
exemple. De vegades hi haurà variables compartides o parts de codi
barrejades.&lt;/p&gt;
&lt;p&gt;Tornant al nostre mètode &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt;, una part que podríem
considerar candidata a extreure per començar és el bloc del
&lt;tt class="docutils literal"&gt;switch&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Com que en aquest cas, el procés és una mica més complex que amb
l'exemple del &lt;tt class="docutils literal"&gt;mesAnteriorSeguent()&lt;/tt&gt;, haurem d'anar amb més compte.&lt;/p&gt;
&lt;p&gt;Per començar, hem de detectar quines són les dependències del fragment
de codi a extreure respecte de la resta del mètode. Podem veure que el
bloc del &lt;tt class="docutils literal"&gt;switch&lt;/tt&gt; requereix les variables &lt;tt class="docutils literal"&gt;lloguer&lt;/tt&gt; i
&lt;tt class="docutils literal"&gt;quantitat&lt;/tt&gt;. D'aquestes variables, &lt;tt class="docutils literal"&gt;lloguer&lt;/tt&gt; només és consultada
dins del codi, mentre que &lt;tt class="docutils literal"&gt;quantitat&lt;/tt&gt; és modificada. &lt;tt class="docutils literal"&gt;lloguer&lt;/tt&gt; el
podem passar com a paràmetre amb tranquil·litat. Amb &lt;tt class="docutils literal"&gt;quantitat&lt;/tt&gt;
però, haurem d'anar amb compte. Com que en aquest cas és només una,
podem considerar retornar el seu valor. Donat que &lt;tt class="docutils literal"&gt;quantitat&lt;/tt&gt;
s'inicialitza a 0 a cada volta del bucle i se li assigna el valor dins
del &lt;tt class="docutils literal"&gt;switch&lt;/tt&gt;, podem simplement assignar-li el valor de retorn del
nou mètode que estem definint.&lt;/p&gt;
&lt;p&gt;El codi resultant per &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; podria ser el següent:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Informe de lloguers del client &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="n"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getNif&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="hll"&gt;        &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;quantitatPerLloguer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/span&gt;
        &lt;span class="c1"&gt;// afegeix lloguers freqüents&lt;/span&gt;
        &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;++;&lt;/span&gt;

        &lt;span class="c1"&gt;// afegeix bonificació per dos dies de lloguer de Luxe&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getCategoria&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;Vehicle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LUXE&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;
                &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;++;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="c1"&gt;// composa els resultats d&amp;#39;aquest lloguer&lt;/span&gt;
        &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getMarca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// afegeix informació final&lt;/span&gt;
    &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Import a pagar: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Punts guanyats: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;div class="section" id="exercici-6-quantitat-per-lloguer"&gt;
&lt;h3&gt;Exercici 6: Quantitat per lloguer&lt;/h3&gt;
&lt;p&gt;Implementa el mètode privat &lt;tt class="docutils literal"&gt;Client.quantitatPerLloguer()&lt;/tt&gt; de manera
que el codi resultant continuï passant els jocs de prova.&lt;/p&gt;
&lt;p&gt;Atenció: no intentis fer massa. Simplement cal que moguis el bloc del
&lt;tt class="docutils literal"&gt;switch&lt;/tt&gt; a dins del nou mètode, declaris alguna variable on guardar
l'import i retornis el seu valor al final.&lt;/p&gt;
&lt;p&gt;Fixa't què, donat que el canvi és petit i disposes d'un bon joc de
proves, resulta molt fàcil de corregir els errors que ocasionalment
puguis haver introduït.&lt;/p&gt;
&lt;hr class="docutils" /&gt;
&lt;p&gt;Passem ara a veure un altre pas de refacció, l'anomenat &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/refactoring-moviment-de-metodes.html"&gt;moviment de
mètode&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Wed, 11 Feb 2015 10:25:42 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-11:refactoring-extraccio-de-metodes.html</guid><category>programari</category><category>java</category></item><item><title>Refactoring: Moviment de mètodes</title><link>http://apuntstecnics.herokuapp.com/refactoring-moviment-de-metodes.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada relitza un nou pas de refacció conegut com a
&lt;em&gt;moviment de mètode&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="moviment-de-metodes"&gt;
&lt;h2&gt;Moviment de mètodes&lt;/h2&gt;
&lt;p&gt;Fixa't ara en el mètode &lt;tt class="docutils literal"&gt;Client.quantitatPerLloguer()&lt;/tt&gt; que acabes de
crear. Tot i que agafa informació d'un lloguer i del vehicle associat,
&lt;strong&gt;no en fa res de la informació del client&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Aquest tipus de situacions ens han de fer sospitar que potser, el
mètode no es troba en el lloc adequat. És a dir, potser no ha de ser
responsabilitat de Client calcular l'import d'un Lloguer concret.&lt;/p&gt;
&lt;p&gt;Quan ens trobem amb aquesta situació, el que toca fer és el que
coneixerem com a &lt;em&gt;moviment de mètode&lt;/em&gt; que consisteix bàsicament en
moure un mètode d'una classe a una altra &lt;a class="footnote-reference" href="#movimentpropietat" id="id1"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Sovint no resulta gens fàcil decidir de bon començament la classe a la
que assignar una responsabilitat concreta. Per aquesta raó és freqüent
que les responsabilitats s'hagin de reassignar amb el temps. Aquest
pas de refacció (&lt;em&gt;moviment de mètode&lt;/em&gt;) pot arribar a resultar, doncs,
força útil.&lt;/p&gt;
&lt;div class="section" id="exercici-7-quantitatperlloguer-a-la-classe-lloguer"&gt;
&lt;h3&gt;Exercici 7. quantitatPerLloguer() a la classe Lloguer&lt;/h3&gt;
&lt;p&gt;Mou el mètode &lt;tt class="docutils literal"&gt;Client.quantitatPerLloguer()&lt;/tt&gt; a
&lt;tt class="docutils literal"&gt;Lloguer.quantitat()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Com sempre, assegura't que els canvis no han trencat res (passa els
jocs de prova)&lt;/p&gt;
&lt;p&gt;Tingues en compte que:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;ara aquest mètode caldrà que accessible des d'una altra classe
(visibilitat)&lt;/li&gt;
&lt;li&gt;com que el mètode ara és de Lloguer, el seu nom antic és redundant.
Per això es proposa reanomenar-lo a &lt;tt class="docutils literal"&gt;quantitat()&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;ara ja no li caldrà rebre el lloguer com a paràmetre. Saps perquè?&lt;/li&gt;
&lt;li&gt;la crida des de &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; serà una mica diferent.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-8-canvis-en-el-diagrama-de-classe"&gt;
&lt;h3&gt;Exercici 8. Canvis en el diagrama de classe&lt;/h3&gt;
&lt;p&gt;Dibuixa com queda el diagrama de classes del sistema després d'aquest
canvi.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-9-canvis-en-el-diagrama-de-sequencia"&gt;
&lt;h3&gt;Exercici 9. Canvis en el diagrama de seqüència&lt;/h3&gt;
&lt;p&gt;Actualitza el diagrama de seqüència que descriu la crida a
&lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; amb els nous canvis que has introduït.&lt;/p&gt;
&lt;hr class="docutils" /&gt;
&lt;p&gt;Trobem el següent pas de refacció &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/refactoring-temporals-per-crides.html"&gt;aquí&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="movimentpropietat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Existeixen altres passos de refacció
relacionats amb el moviment de responsabilitats. Un de molt evident
és el moviment de propietats. La idea és similar de la del moviment
de mètodes: trobes una propietat a una classe quan hauria d'estar a
una altra. El mecanisme d'aplicació d'aquest pas és molt similar
que el de moviment de mètodes.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Wed, 11 Feb 2015 10:24:42 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-11:refactoring-moviment-de-metodes.html</guid><category>programari</category><category>java</category></item><item><title>Refactoring: Temporals per crides</title><link>http://apuntstecnics.herokuapp.com/refactoring-temporals-per-crides.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada relitza un nou pas de refacció conegut com a
&lt;em&gt;reemplaçament de variable temporal per crida&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="reemplaca-temporal-per-crida"&gt;
&lt;h2&gt;Reemplaça temporal per crida&lt;/h2&gt;
&lt;p&gt;El següent pas de refacció cerca eliminar variables temporals que
només són assignades un cop i substituir-les pel valor assignat allà
on calgui.&lt;/p&gt;
&lt;p&gt;Per exemple, considera el següent fragment de codi:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;preuBase&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;preuUnitari&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;preuBase&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;1000&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;preuBase&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mf"&gt;0.90&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;preuBase&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aquest pas el codificaria com:&lt;/p&gt;
&lt;!-- code-block::java

if (preuBase() &gt; 1000) {
    return preuBase() * 0.90;
} else {
    return preuBase();
} --&gt;
&lt;p&gt;Amb el nou mètode que encapsula l'expressió inicial:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;preuBase&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;preuUnitari&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;La creació del nou mètode és un altre exemple de pas d'&lt;em&gt;extracció de
mètode&lt;/em&gt; que hem vist abans.&lt;/p&gt;
&lt;p&gt;Es pot argumentar que aquesta transformació resulta en un codi menys
eficient en execució. És cert, el preu base passa a calcular-se dos
cops en comptes d'un. En aquest cas, el càlcul és molt lleuger, però
podria ser més costós si incorporés, per exemple, un recorregut d'una
llista d'elements.&lt;/p&gt;
&lt;p&gt;A favor del canvi, podem dir que elimina del codi dependències a
variables temporals. D'aquesta manera pot resultar molt més fàcil
realitzar extraccions de mètodes.&lt;/p&gt;
&lt;p&gt;Recordem que l'eficiència en la llegibilitat/modificabilitat del codi
és normalment molt més desitjable que l'eficiència en l'execució de
codi. Abans de decidir-nos per un codi menys llegible justificant-lo
amb el rendiment em execució, és important tenir molt clar com afecta
al rendiment de l'aplicació. Molts cops ens trobarem que el guany de
rendiment és molt petit. D'altres cops veurem que el codi més clar
permet optimitzacions a més alt nivell.&lt;/p&gt;
&lt;p&gt;En el codi que estem treballant, al mètode &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; hi
trobem la variable &lt;tt class="docutils literal"&gt;quantitat&lt;/tt&gt;.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Informe de lloguers del client &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="n"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getNif&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// afegeix lloguers freqüents&lt;/span&gt;
        &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;++;&lt;/span&gt;

        &lt;span class="c1"&gt;// afegeix bonificació per dos dies de lloguer de Luxe&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getCategoria&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;Vehicle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LUXE&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;
                &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;++;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="c1"&gt;// composa els resultats d&amp;#39;aquest lloguer&lt;/span&gt;
        &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getMarca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
&lt;span class="hll"&gt;            &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;span class="hll"&gt;        &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/span&gt;    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// afegeix informació final&lt;/span&gt;
    &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Import a pagar: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Punts guanyats: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;div class="section" id="exercici-10-opcional-optimitzacio-del-calcul-de-quantitat"&gt;
&lt;h3&gt;Exercici 10: (opcional) Optimització del càlcul de quantitat&lt;/h3&gt;
&lt;p&gt;Encara amb preocupacions per la pèrdua d'eficiència en execució del
pas anterior?&lt;/p&gt;
&lt;p&gt;Et proposo que trobis alguna manera d'aconseguir que el valor tornat
per &lt;tt class="docutils literal"&gt;Lloguer.quantitat()&lt;/tt&gt; només es calculi un cop.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-11-extraccio-del-calcul-de-bonificacions"&gt;
&lt;h3&gt;Exercici 11: Extracció del càlcul de bonificacions&lt;/h3&gt;
&lt;p&gt;De la mateixa manera que hem extret de &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; el càlcul
de l'import de cada lloguer, podem plantejar-nos extreure el càlcul de
les bonificacions.&lt;/p&gt;
&lt;p&gt;En aquest cas, la bonificació es modifica en dos llocs, a banda de
la inicialització, segons es ressalta al codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="hll"&gt;     &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/span&gt;     &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Informe de lloguers del client &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="n"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getNif&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="c1"&gt;// afegeix lloguers freqüents&lt;/span&gt;
&lt;span class="hll"&gt;         &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;++;&lt;/span&gt;
&lt;/span&gt;
         &lt;span class="c1"&gt;// afegeix bonificació per dos dies de lloguer de Luxe&lt;/span&gt;
         &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getCategoria&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;Vehicle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LUXE&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;
                 &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="hll"&gt;             &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;++;&lt;/span&gt;
&lt;/span&gt;         &lt;span class="o"&gt;}&lt;/span&gt;

         &lt;span class="c1"&gt;// composa els resultats d&amp;#39;aquest lloguer&lt;/span&gt;
         &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getMarca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
         &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;

     &lt;span class="c1"&gt;// afegeix informació final&lt;/span&gt;
     &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Import a pagar: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="s"&gt;&amp;quot;Punts guanyats: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Extreu la funcionalitat del càlcul de les bonificacions a un nou
mètode &lt;tt class="docutils literal"&gt;bonificacionsDeLloguer()&lt;/tt&gt; que donat un lloguer retorna la
bonificació corresponent.&lt;/p&gt;
&lt;p&gt;En fer-ho, assegura't que no has trencat res i que guardes la versió
al control de versions.&lt;/p&gt;
&lt;p&gt;El mètode &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; haurà de resultar així:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Informe de lloguers del client &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="n"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getNif&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="hll"&gt;        &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;bonificacionsDeLLoguer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/span&gt;        &lt;span class="c1"&gt;// composa els resultats d&amp;#39;aquest lloguer&lt;/span&gt;
        &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getMarca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// afegeix informació final&lt;/span&gt;
    &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Import a pagar: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Punts guanyats: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;hr class="docutils" /&gt;
&lt;p&gt;Passem a veure &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/refactoring-moviment-de-responsabilitat.html"&gt;un altre exemple típic&lt;/a&gt; de refacció.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Wed, 11 Feb 2015 10:23:42 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-11:refactoring-temporals-per-crides.html</guid><category>programari</category><category>java</category></item><item><title>Refactoring: Moviment de responsabilitat</title><link>http://apuntstecnics.herokuapp.com/refactoring-moviment-de-responsabilitat.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada es realitza un nou pas de refacció, tot movent una
responsabilitat (o servei) assignat inicialment a una classe, cap a
una altra.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="moviment-de-responsabilitat"&gt;
&lt;h2&gt;Moviment de responsabilitat&lt;/h2&gt;
&lt;p&gt;De vegades ens trobarem que hem assignat a una classe una
responsabilitat que no li pertoca. En aquest cas, podem aplicar el pas
de refacció &lt;cite&gt;moviment de mètode&lt;/cite&gt; que col·loqui les coses on toca.&lt;/p&gt;
&lt;div class="section" id="exercici-12-reassignant-responsabilitats"&gt;
&lt;h3&gt;Exercici 12. Reassignant responsabilitats&lt;/h3&gt;
&lt;p&gt;Considera si el mètode &lt;cite&gt;bonificacionsDeLLoguer&lt;/cite&gt; que hem creat per
l'exercici anterior, correspon realment a la classe on es troba.
Mou-lo allà on creguis oportú fent servir &lt;em&gt;moviment de mètode&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;El codi resultant hauria de permetre que &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; funcioni
amb el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Informe de lloguers del client &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="n"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getNif&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="hll"&gt;        &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;bonificacions&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;/span&gt;        &lt;span class="c1"&gt;// composa els resultats d&amp;#39;aquest lloguer&lt;/span&gt;
        &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getMarca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// afegeix informació final&lt;/span&gt;
    &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Import a pagar: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Punts guanyats: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Nota: ara eliminar la variable temporal &lt;tt class="docutils literal"&gt;bonificacions ``no serà tan
directe com amb ``quantitat&lt;/tt&gt;. Paciència.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-13-diagrama-de-classes-actualitzat"&gt;
&lt;h3&gt;Exercici 13. Diagrama de classes actualitzat&lt;/h3&gt;
&lt;p&gt;Actualitza el diagrama de classes amb la situació actual.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-14-canvis-en-el-diagrama-de-sequencia"&gt;
&lt;h3&gt;Exercici 14. Canvis en el diagrama de seqüència&lt;/h3&gt;
&lt;p&gt;Actualitza el diagrama de seqüència que descriu la crida a
&lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; amb els nous canvis que has introduït.&lt;/p&gt;
&lt;hr class="docutils" /&gt;
&lt;p&gt;Passem a veure com eliminar variables temporals
&amp;lt;{filename}/dev/refactoring.008.rst&amp;gt;`_&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Wed, 11 Feb 2015 10:22:42 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-11:refactoring-moviment-de-responsabilitat.html</guid><category>programari</category><category>java</category></item><item><title>Refactoring: Eliminació de variables temporals</title><link>http://apuntstecnics.herokuapp.com/refactoring-eliminacio-de-variables-temporals.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada relitza un nou pas de refacció conegut com a
&lt;em&gt;eliminació de variables temporals&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="eliminacio-de-variables-temporals"&gt;
&lt;h2&gt;Eliminació de variables temporals&lt;/h2&gt;
&lt;p&gt;Ja hem discutit la importància d'eliminar variables temporals. Es
tracta de variables que només es poden accedir dins del mètode que les
declara i això promou la creació de mètodes més llargs i complexos.&lt;/p&gt;
&lt;p&gt;A &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; hi ha encara variables temporals que podríem
considerar eliminar. En concret, &lt;tt class="docutils literal"&gt;total&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;bonificacions&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Fixa't que el càlcul d'aquests dos valors, serà necessari també per
realitzar &lt;tt class="docutils literal"&gt;Client.informeHTML()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Totes dues variables temporals acumulen valors obtinguts dels
diferents lloguers. Fixa't com, el bucle es aprofitat per realitzar
tres coses diferents:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;composar la part de l'informe corresponent a cada lloguer&lt;/li&gt;
&lt;li&gt;acumular l'import de cada lloguer&lt;/li&gt;
&lt;li&gt;acumular la bonificació de cada lloguer&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Si bé pot semblar convenient des d'un punt de vista de rendiment,
realitzar aquestes tres coses barrejades en el mateix lloc ens està
obligant a duplicar codi a &lt;tt class="docutils literal"&gt;Client.informeHTML()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;El que farem a continuació és realitzar les tres accions en
recorreguts separats. Sí, recorrerem tres cops els lloguers d'un
client. En el cas del càlcul d'imports i bonificacions, aquests
recorreguts tindran lloc en nous mètodes.&lt;/p&gt;
&lt;p&gt;Si continua preocupant-te el rendiment &lt;a class="footnote-reference" href="#rendimentstring" id="id1"&gt;[1]&lt;/a&gt;, et proposo
que facis una prova de temps abans i després del canvi (posa un nombre
considerable de lloguers) Compara la diferència amb el que et costava
abans codificar &lt;tt class="docutils literal"&gt;Client.informeHTML()&lt;/tt&gt; respecte d'ara (inclou una
estimació del cost de manteniment i d'afegir noves versions com
&lt;tt class="docutils literal"&gt;Client.informeXML()&lt;/tt&gt;)&lt;/p&gt;
&lt;p&gt;Fixa't que amb aquest canvi, la funcionalitat de calcular l'import
total i les bonificacions d'un client estan disponibles per a
qualsevol nou mètode de &lt;tt class="docutils literal"&gt;Client&lt;/tt&gt; que les necessiti. Encara més, si
fem públics els nous mètodes, els usuaris de la classe també en
podrien traure profit.  Planteja't com s'ho farien abans per a poder
calcular aquests valors?  Era quelcom convenient? Perquè?&lt;/p&gt;
&lt;div class="section" id="exercici-15-eliminacio-de-la-variable-total"&gt;
&lt;h3&gt;Exercici 15. Eliminació de la variable &lt;tt class="docutils literal"&gt;total&lt;/tt&gt;&lt;/h3&gt;
&lt;p&gt;Elimina la variable &lt;tt class="docutils literal"&gt;total&lt;/tt&gt; del codi de &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt;. Amb la
nova versió, aquest mètode tindrà el següent aspecte:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Informe de lloguers del client &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="n"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getNif&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;bonificacions&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="c1"&gt;// composa els resultats d&amp;#39;aquest lloguer&lt;/span&gt;
         &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getMarca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;

     &lt;span class="c1"&gt;// afegeix informació final&lt;/span&gt;
&lt;span class="hll"&gt;     &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Import a pagar: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;importTotal&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
&lt;/span&gt;         &lt;span class="s"&gt;&amp;quot;Punts guanyats: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bonificacions&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-16-eliminacio-de-la-variable-bonificacions"&gt;
&lt;h3&gt;Exercici 16. Eliminació de la variable &lt;tt class="docutils literal"&gt;bonificacions&lt;/tt&gt;&lt;/h3&gt;
&lt;p&gt;Ara li toca el torn de la variable &lt;tt class="docutils literal"&gt;bonificacions&lt;/tt&gt;. Elimina-la del
codi de &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt;. Amb la nova versió, aquest mètode tindrà
el següent aspecte:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Informe de lloguers del client &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="n"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getNif&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="c1"&gt;// composa els resultats d&amp;#39;aquest lloguer&lt;/span&gt;
         &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getMarca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;

     &lt;span class="c1"&gt;// afegeix informació final&lt;/span&gt;
     &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Import a pagar: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;importTotal&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
&lt;span class="hll"&gt;         &lt;span class="s"&gt;&amp;quot;Punts guanyats: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bonificacionsTotals&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/span&gt;     &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;hr class="docutils" /&gt;
&lt;p&gt;Trobem més passes de refacció a la següent &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/refactoring-altres-passes-de-refaccio.html"&gt;entrada&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="rendimentstring" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Qualsevol realment preocupat pel rendiment faria
bé de revisar primer la conveniència de fer servir la concatenació
de Strings.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Wed, 11 Feb 2015 10:21:42 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-11:refactoring-eliminacio-de-variables-temporals.html</guid><category>programari</category><category>java</category></item><item><title>Refactoring: altres passes de refacció</title><link>http://apuntstecnics.herokuapp.com/refactoring-altres-passes-de-refaccio.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada finalitzarem la nostra introducció a la refacció
amb algunes passes finals.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="altres-passes-de-refaccio"&gt;
&lt;h2&gt;Altres passes de refacció&lt;/h2&gt;
&lt;div class="section" id="exercici-17-cada-metode-fa-una-unica-cosa"&gt;
&lt;h3&gt;Exercici 17. Cada mètode fa una única cosa&lt;/h3&gt;
&lt;p&gt;Encara es podrien fer més passes de refacció. Per exemple, fixa't que
el mètodes &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; fa tres coses separades: composa la
capçalera, el detall de cada lloguer i peu de l'informe.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="c1"&gt;// composa capçalera&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;

    &lt;span class="c1"&gt;// composa detalls&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;

    &lt;span class="c1"&gt;// composa peu&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Els diferents &lt;em&gt;subblocs&lt;/em&gt; es podrien extreure, simplificant encara més
el codi del mètode. És el que hem anomenat &lt;em&gt;extracció de mètode&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;En general, quan ens trobem un mètode que té comentaris o blocs
diferents de codi, podem considerar que fa més d'una cosa i plantejar
l'extracció de mètodes.&lt;/p&gt;
&lt;p&gt;Tornarem a aplicar l'&lt;em&gt;extracció de mètodes&lt;/em&gt; de manera que el codi
següent funcioni:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;composaCapsalera&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
           &lt;span class="n"&gt;composaDetall&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
           &lt;span class="n"&gt;composaPeu&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;On parem? És a dir, fins quan podem estar intentant reduir un mètode?
En general, quan en intentar-ho, no aconseguim millorar la
llegibilitat. Per exemple, podríem reduir el codi anterior a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;composaCapsalera&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
           &lt;span class="n"&gt;composaRestaInforme&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si bé el codi és més reduït (una línia menys), no sembla que hàgim
guanyat gaire en llegibilitat, oi? Aquí, com a tants altres llocs,
haurem de fer servir el nostre sentit comú per decidir.&lt;/p&gt;
&lt;p&gt;Encara podries argumentar que &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; continua fent tres
coses. En aquest cas, podries portar l'argument fins al final i
continuar pensant que aquest mètode també calcula l'import total dels
lloguers... En qualsevol cas, confio en que acceptis que, al menys, el
codi actual de &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; resulta molt més fàcil/ràpid
d'entendre que l'original.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="literals-per-constants"&gt;
&lt;h3&gt;Literals per constants&lt;/h3&gt;
&lt;p&gt;Què vol dir exàctament el &lt;tt class="docutils literal"&gt;30&lt;/tt&gt; al fragment de codi següent?
Té el mateix significat que el &lt;tt class="docutils literal"&gt;30&lt;/tt&gt; que t'apareix a
&lt;tt class="docutils literal"&gt;Client.importTotal()&lt;/tt&gt;?&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="c1"&gt;// composa els resultats d&amp;#39;aquest lloguer&lt;/span&gt;
     &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getMarca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
&lt;span class="hll"&gt;         &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En aquest cas, &lt;tt class="docutils literal"&gt;30&lt;/tt&gt; és el valor multiplicatiu per a aconseguir
convertir l'import a euros. Per exemple, llogar un vehicle bàsic per
un dia suposa &lt;tt class="docutils literal"&gt;3&lt;/tt&gt; unitats de &lt;em&gt;cost&lt;/em&gt; mentre que llogar un vehicle
general també per un dia ens &lt;em&gt;costa&lt;/em&gt; &lt;tt class="docutils literal"&gt;6&lt;/tt&gt;. Si volem saber l'import
que correspon, hem de multiplicar per 30 aquestes quantitats tant per
l'import de cada vehicle com del total. Diríem
doncs que &lt;tt class="docutils literal"&gt;30&lt;/tt&gt; és el valor en euros d'una unitat de cost de lloguer.&lt;/p&gt;
&lt;p&gt;Així, podem declarar la constant següent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;EUROS_PER_UNITAT_DE_COST&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ara, substituïm totes les aparicions de &lt;tt class="docutils literal"&gt;30&lt;/tt&gt; per aquesta constant
com es veu a &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;informe&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Informe de lloguers del client &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="n"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getNif&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;)\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloguer&lt;/span&gt; &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;lloguers&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="c1"&gt;// composa els resultats d&amp;#39;aquest lloguer&lt;/span&gt;
         &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\t&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getMarca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
             &lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVehicle&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
&lt;span class="hll"&gt;             &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lloguer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;quantitat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;EUROS_PER_UNITAT_DE_COST&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/span&gt;     &lt;span class="o"&gt;}&lt;/span&gt;

     &lt;span class="c1"&gt;// afegeix informació final&lt;/span&gt;
     &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Import a pagar: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;importTotal&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;€\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="s"&gt;&amp;quot;Punts guanyats: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bonificacionsTotals&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Amb aquest canvi, el codi guanya en llegibilitat doncs és molt més
fàcil entendre què vol dir el 30 allà on s'aplica. Si en un futur hem
de canviar la lògica (ex. el preu per unitat de cost), ens resultarà
molt més fàcil doncs només haurem de tocar un lloc. Fins i tot,
podríem arribar a passar la nova constant a una propietat (o
paràmetre) de manera que la poguéssim modificar sense requerir
recompilar.&lt;/p&gt;
&lt;p&gt;Atenció: malgrat sembli un canvi senzill, cal executar les proves per
si hem trencat alguna cosa.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-18-mes-constants"&gt;
&lt;h3&gt;Exercici 18. Més constants&lt;/h3&gt;
&lt;p&gt;Considera ara el fragment de codi que pertany al mètode
&lt;tt class="docutils literal"&gt;Lloguer.quantitat()&lt;/tt&gt;. Signifiquen el mateix els tres cops que hi
apareix el valor &lt;tt class="docutils literal"&gt;3&lt;/tt&gt;?&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;Vehicle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;BASIC&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;quantitat&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getDies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mf"&gt;1.5&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En aquest cas, veiem que el primer &lt;tt class="docutils literal"&gt;3&lt;/tt&gt; correspon a la quantitat (o
unitats de cost) que val el lloguer d'un vehicle bàsic entre un i tres
dies. Els altres dos &lt;tt class="docutils literal"&gt;3&lt;/tt&gt; en canvi, corresponen a nombre de dies
inicials amb el mateix preu.&lt;/p&gt;
&lt;p&gt;En aquest exercici se't demana que converteixis tots els literals
numèrics que consideris oportuns del mètode &lt;tt class="docutils literal"&gt;Lloguer.quantitat()&lt;/tt&gt;,
en constants.&lt;/p&gt;
&lt;p&gt;Assegura't que esculls noms adequats i que el resultat no trenca el
funcionament.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-19-reanomenament"&gt;
&lt;h3&gt;Exercici 19. Reanomenament&lt;/h3&gt;
&lt;p&gt;Ara que hem aprofundit més en els conceptes que envolten al càlcul de
l'import del lloguer, ens adonem que el mot &lt;em&gt;quantitat&lt;/em&gt; no és
representatiu del que conté la variable &lt;tt class="docutils literal"&gt;quantitat&lt;/tt&gt; al mètode
&lt;tt class="docutils literal"&gt;Lloguer.quantitat()&lt;/tt&gt;. De fet, el nom del mètode presenta el mateix
problema!&lt;/p&gt;
&lt;p&gt;És quelcom molt habitual. Quan estàs creant un nou mètode fas servir
uns noms el més adequats que pots. Després, vists amb més perspectiva,
te n'adones que els noms inicials no són adequats. Quan no disposes de
jocs de prova automàtics i, a més, el codi està molt embolicat, és
comprensible que no t'atreveixis a fer cap canvi. I si trenques alguna
cosa?&lt;/p&gt;
&lt;p&gt;Però aquí disposes de proves unitàries que es queixaran de seguida.
Millorar el nom dels elements d'un programa és molt més que
aconsellable: els noms formen una part significativa de la
documentació del codi.&lt;/p&gt;
&lt;blockquote&gt;
Millors noms ⇒ més llegibilitat ⇒ més reusabilitat + modificabilitat&lt;/blockquote&gt;
&lt;p&gt;Atenció: Si el mètode pertany a la interfície pública d'una classe que
està fent servir molta gent (ex. les de l'API de Java), un canvi en el
nom pot causar molts problemes &lt;a class="footnote-reference" href="#desenvolupadorsapi" id="id1"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;En aquest exercici se't demana que trobis un nom més adequat pel
mètode &lt;tt class="docutils literal"&gt;Lloguer.quantitat()&lt;/tt&gt; i per la variable &lt;tt class="docutils literal"&gt;quantitat&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-20-l-informe-en-html"&gt;
&lt;h3&gt;Exercici 20. L'informe en HTML&lt;/h3&gt;
&lt;p&gt;Ara que &lt;tt class="docutils literal"&gt;Client.informe()&lt;/tt&gt; només s'encarrega directament de composar
l'informe, és el moment de fer la versió en HTML.&lt;/p&gt;
&lt;p&gt;Codifica aquest nou mètode de manera que generi un resultat amb la
següent estructura:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nt"&gt;&amp;lt;h1&amp;gt;&lt;/span&gt;Informe de lloguers&lt;span class="nt"&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;p&amp;gt;&lt;/span&gt;Informe de lloguers del client &lt;span class="nt"&gt;&amp;lt;em&amp;gt;&lt;/span&gt;Ken Robinson &lt;span class="nt"&gt;&amp;lt;/em&amp;gt;&lt;/span&gt; (&lt;span class="nt"&gt;&amp;lt;strong&amp;gt;&lt;/span&gt;43092837A&lt;span class="nt"&gt;&amp;lt;/strong&amp;gt;&lt;/span&gt;)&lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;table&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;&amp;lt;strong&amp;gt;&lt;/span&gt;Marca&lt;span class="nt"&gt;&amp;lt;/strong&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&amp;lt;strong&amp;gt;&lt;/span&gt;Model&lt;span class="nt"&gt;&amp;lt;/strong&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&amp;lt;strong&amp;gt;&lt;/span&gt;Import&lt;span class="nt"&gt;&amp;lt;/strong&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;     &lt;span class="nt"&gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;Tata&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;Vista&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;90.0€&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;Wolswagen&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;Passat&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;270.0€&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;Mercedes&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;SLK 2.0&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&lt;/span&gt;360.0€&lt;span class="nt"&gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/table&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;p&amp;gt;&lt;/span&gt;Import a pagar: &lt;span class="nt"&gt;&amp;lt;em&amp;gt;&lt;/span&gt;720.0€&lt;span class="nt"&gt;&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;p&amp;gt;&lt;/span&gt;Punts guanyats: &lt;span class="nt"&gt;&amp;lt;em&amp;gt;&lt;/span&gt;4&lt;span class="nt"&gt;&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Codifica també les proves unitàries corresponents (potser les pots
intentar construir abans de crear tot el codi!)&lt;/p&gt;
&lt;hr class="docutils" /&gt;
&lt;p&gt;Finalment, passem a veure les &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/refactoring-conclusions.html"&gt;conclusions&lt;/a&gt; d'aquesta introducció&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="desenvolupadorsapi" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;Els desenvolupadors de l'API de Java assumeixen
una responsabilitat molt gran i, tot i que hi deuen dedicar molta
estona a revisar els noms, hi ha alguns que segur haguessin volgut
canviar. Normalment, un cop publicada una interfície, només els
queda l'opció d'afegir un comentari a la documentació, com es pot
veure al següent comentari trobat a la documentació de la classe
&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/awt/font/TextAttribute.html"&gt;java.font.TextAttribute&lt;/a&gt;
:&lt;/p&gt;
&lt;blockquote class="last"&gt;
Note: This attribute is &lt;strong&gt;unfortunately misnamed&lt;/strong&gt;, as it
specifies the face name and not just the family. Thus values
such as &amp;quot;Lucida Sans Bold&amp;quot; will select that face if it exists.
Note, though, that if the requested face does not exist, the
default will be used with regular weight. The &amp;quot;Bold&amp;quot; in the
name is part of the face name, not a separate request that the
font's weight be bold.&lt;/blockquote&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Wed, 11 Feb 2015 10:20:42 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-11:refactoring-altres-passes-de-refaccio.html</guid><category>programari</category><category>java</category></item><item><title>Refactoring: conclusions</title><link>http://apuntstecnics.herokuapp.com/refactoring-conclusions.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Hem arribat al final d'aquesta introducció a la refacció. Fem aquí
unes breus paraules com a conclusió de la feina feta i, sobre tot,
unes indicacions per a ampliar els nostres coneixements en un tema
que, en cas d'aplicar-lo correctament, ens garantirà que la qualitat
del nostre millori cada cop que el revisem.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="recapitulem"&gt;
&lt;h2&gt;Recapitulem&lt;/h2&gt;
&lt;p&gt;Amb uns senzills canvis, hem passat d'un mètode d'unes 50 línies en
les que es barrejaven un munt d'aspectes diversos, a un altre de menys
de 5 que es limita a realitzar la &lt;strong&gt;seva&lt;/strong&gt; tasca: composar l'informe.
Les funcionalitats &amp;quot;sobrants&amp;quot; les hem passades a altres mètodes,
alguns fins i tot els hem mogut a altres classes. A més, hem realitzat
alguns canvis de noms.&lt;/p&gt;
&lt;p&gt;El resultat és un codi molt més modular (hom diria &lt;em&gt;orientat a
objectes&lt;/em&gt;) que permet crear nous formats d'informes de manera molt més
àgil.&lt;/p&gt;
&lt;p&gt;Hem vist només unes poques passes de refacció. Es coneixen moltes més.
Tot i que les presentades en aquesta sèrie d'exercicis ja poden
ajudar-nos a millorar significativament el nostre codi, és possible
que no et vulguis quedar aquí.&lt;/p&gt;
&lt;p&gt;Si és així. Si t'has quedat amb ganes de veure més, et recomano que
aconsegueixis una còpia del fantàstic llibre del &lt;a class="citation-reference" href="#fowler" id="id1"&gt;[FOWLER]&lt;/a&gt; i gaudeixis
de la seva lectura. Malgrat la transformació que he realitzat al seu
exemple inicial per a adaptar-lo al context que persegueixo per a
aquests materials, estic segur que podràs seguir els conceptes
que hi apareixen a la resta de l'exemple i, sobre tot, que aprofitaràs
l'ampli ventall de passos de refacció que recopila.&lt;/p&gt;
&lt;p&gt;Un altre llibre que t'ajudarà a aprofundir en els conceptes de
reanomenament i reducció de llargària de mètodes és el &lt;a class="citation-reference" href="#martin" id="id2"&gt;[MARTIN]&lt;/a&gt; en
els capítols 2 i 3. El conjunt del llibre t'oferirà una visió molt
pràctica del què vol dir un &lt;em&gt;codi net&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="referencies"&gt;
&lt;h2&gt;Referències&lt;/h2&gt;
&lt;table class="docutils citation" frame="void" id="fowler" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[FOWLER]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Fowler, Martin (1999) &lt;em&gt;Refactoring: Improving the Design
of Existing Code&lt;/em&gt;.  Addison-Wesley Professional.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils citation" frame="void" id="martin" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[MARTIN]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Martin, Robert C. (2009) &lt;em&gt;Clean Code: A Handbook of Agile
Software Craftmanship&lt;/em&gt;. Prentice Hall.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Wed, 11 Feb 2015 10:19:42 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-11:refactoring-conclusions.html</guid><category>programari</category><category>java</category></item><item><title>Pujar notes massivament al Moodle</title><link>http://apuntstecnics.herokuapp.com/pujar-notes-massivament-al-moodle.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest petit tutorial mostra com es pot pujar notes i retroaccions des
d'un full de càlcul al Moodle.&lt;/p&gt;
&lt;p&gt;L'exemple que es segueix és la notificació de les notes finals d'una
unitat formativa.&lt;/p&gt;
&lt;p&gt;Objectius:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;poder calcular les notes en un full de càlcul&lt;/li&gt;
&lt;li&gt;poder pujar les notes i comentaris massivament al Moodle (en
comptes d'alumne per alumne)&lt;/li&gt;
&lt;li&gt;poder oferir a cada alumne la seva nota i comentari de manera
individual i privada, respecte la resta d'alumnes.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Per fer-ho ens cal:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;una tasca Moodle&lt;/p&gt;
&lt;p&gt;A l'exemple et mostro com crear-ne una que té com únic a objectiu,
transmetre les notes. És a dir, no pretén recollir cap exercici.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;un full de càlcul amb les notes i retroaccions.&lt;/p&gt;
&lt;p&gt;Veuràs que en el full cal que els alumnes estiguin identificats. A
l'exemple apareixen identificats per correu electrònic, i t'explica
com obtenir-los en cas que no en disposis.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;importació i vinculació&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Et recomano que facis una primera lectura a totes les passes abans de
començar a seguir-les. Això et permetrà tenir clar coses com que cal
disposar les notes en un determinat format (ex. un full de càlcul)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="procediment"&gt;
&lt;h2&gt;Procediment&lt;/h2&gt;
&lt;div class="section" id="la-tasca-moodle"&gt;
&lt;h3&gt;La tasca Moodle&lt;/h3&gt;
&lt;p&gt;En primer lloc entrarem a Moodle. Un cop al nostre curs, activarem
l'edició:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="activa edició" src="http://apuntstecnics.herokuapp.com/images/moodle.01.activa_edicio.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Ara anem a la secció on volem introduir les notes i seleccionem
&amp;quot;afegeix una activitat o un recurs&amp;quot;. Si ja tens una activitat creada i
simplement la vols puntuar, escull-la i saltat les següents passes de
creació.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="afegeix activitat" src="http://apuntstecnics.herokuapp.com/images/moodle.02.afegeix_activitat.png" /&gt;
&lt;/div&gt;
&lt;p&gt;L'activitat que escollirem és de tipus &amp;quot;Tasca&amp;quot;.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="escull tipus d'activitat tasca" src="http://apuntstecnics.herokuapp.com/images/moodle.03.tasca.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Omple el títol i el detall de la tasca. En el cas de l'exemple, estic
aprofitant per afegir-hi una breu conclusió del curs, la descripció
de com he calculat la nota final, i donar ànims per la següent part
del curs.&lt;/p&gt;
&lt;p&gt;És important inhabilitar a la secció &amp;quot;Paràmetres de la tasca&amp;quot; les
dates de lliurament. D'aquesta manera, la tasca quedarà només
disponible per ser consultada i els alumnes no hi podran lliurar res.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="crea nova tasca" src="http://apuntstecnics.herokuapp.com/images/moodle.04.nova_tasca.png" /&gt;
&lt;/div&gt;
&lt;p&gt;És recomanable marcar la tasca com a oculta. D'aquesta manera els
estudiants no hi podran accedir fins que hàgim vist que tot està
correcte.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Marca tasca oculta per seguretat" src="http://apuntstecnics.herokuapp.com/images/moodle.05.oculta.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Ara que ja tenim creada l'activitat, l'obrim:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Obre l'activitat" src="http://apuntstecnics.herokuapp.com/images/moodle.06.entra.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Al final de la pàgina que t'apareix, selecciona l'enllaç de
&amp;quot;Visualitza/Qualifica totes les trameses&amp;quot;.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="visualitza les trameses" src="http://apuntstecnics.herokuapp.com/images/moodle.07.visualitza.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Tot seguit selecciona &amp;quot;Visualitza el butlletí de qualificacions&amp;quot; del
desplegable.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="visualitza el butlletí" src="http://apuntstecnics.herokuapp.com/images/moodle.08.butlleti.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="el-full-de-calcul"&gt;
&lt;h3&gt;El full de càlcul&lt;/h3&gt;
&lt;p&gt;Ara passarem a veure el full de càlcul on tindrem les notes&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="revisem el full de càlcul" src="http://apuntstecnics.herokuapp.com/images/moodle.10.full_calcul.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Els requeriments són:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;una capçalera que descrigui les dades. Et recomano que facis servir
noms que et diguin alguna cosa.&lt;/li&gt;
&lt;li&gt;una columna que permeti identificar els alumnes. Et recomano que
facis servir el correu electrònic per evitar les variants dels noms.&lt;/li&gt;
&lt;li&gt;una columna amb les notes. A l'exemple apareixen sobre 100 i sense
decimals.&lt;/li&gt;
&lt;li&gt;una columna amb la retroacció individual. No és obligatòria però
trobo genial poder dedicar a cada alumne un breu comentari més o
menys personalitzat.&lt;/li&gt;
&lt;li&gt;poden haver-hi altres columnes que ignorarem a l'hora d'importar.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Com? Què no tens els correus electrònics dels teus alumnes? Els pots
extreure del Moodle.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="exporta a csv" src="http://apuntstecnics.herokuapp.com/images/moodle.11.exporta.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Un cop disposis del full de càlcul amb les notes i retroaccions, l'hauràs de guardar com a csv ja que, de moment, Moodle no sap com importar directament des del full de càlcul.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="selecciona format csv" src="http://apuntstecnics.herokuapp.com/images/moodle.13.format_csv.png" /&gt;
&lt;/div&gt;
&lt;p&gt;La següent configuració de csv funciona sense problemes. Amb tot,
Moodle acceptarà d'altres si li indiques a l'hora d'importar.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Parametritza csv" src="http://apuntstecnics.herokuapp.com/images/moodle.14.cometes.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="la-importacio"&gt;
&lt;h3&gt;La importació&lt;/h3&gt;
&lt;p&gt;Ara ja podem importar el fitxer csv al Moodle, per fer-ho, escollirem
al desplegable l'opció &amp;quot;Fitxer CSV&amp;quot; de la secció &amp;quot;Importar&amp;quot; del menú
desplegable:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Importa csv al Moodle" src="http://apuntstecnics.herokuapp.com/images/moodle.09.importa_csv.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Per fer-ho, arrossega el fitxer csv a la caixeta que conté una fletxa
animada.&lt;/p&gt;
&lt;p&gt;Si ho has fet bé, trobaràs el nom del teu fitxer dins la caixeta (ara
sense fletxa)&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Arrossega el fitxer" src="http://apuntstecnics.herokuapp.com/images/moodle.16.arrossegat.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="la-vinculacio"&gt;
&lt;h3&gt;La vinculació&lt;/h3&gt;
&lt;p&gt;Un cop has fet la importació, pots comprovar que les dades siguin les
que esperaves. Si tot és com esperaves, pots passar a fer la
vinculació de les columnes a les dades de la tasca a puntuar.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Vinculació dels camps" src="http://apuntstecnics.herokuapp.com/images/moodle.17.vinculacio.png" /&gt;
&lt;/div&gt;
&lt;p&gt;A la figura anterior s'ha vinculat:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;la columna del full de càlcul &amp;quot;email&amp;quot; amb el camp Moodle &amp;quot;Correu
electrònic&amp;quot;.&lt;/li&gt;
&lt;li&gt;la columna del full de càlcul &amp;quot;nota&amp;quot; amb el camp Moodle &amp;quot;Tasca «nom
que hem posat a la tasca»&amp;quot;&lt;/li&gt;
&lt;li&gt;la columna del full de càlcul &amp;quot;retroacció&amp;quot; amb el camp Moodle
&amp;quot;Retroacció per a Tasca «nom que hem posat a la tasca»&amp;quot;&lt;/li&gt;
&lt;li&gt;la resta de columnes del full de càlcul són ignorades.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="comprovacions-i-finalitzacio"&gt;
&lt;h3&gt;Comprovacions i finalització&lt;/h3&gt;
&lt;p&gt;Tot seguit, consultarem les notes del Moodle per veure si tot ha anat
com esperàvem. En el cas de l'exemple, haig de fer un desplaçament
horitzontal per poder visualitzar la tasca, el que fa perdre la
columna amb el nom. Amb tot, si poses el cursor a sobre, hi pots
consultar el nom i la retroacció de l'alumne:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Comprovació dels resultats" src="http://apuntstecnics.herokuapp.com/images/moodle.18.resultat.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Ara ja només queda marcar com a visible la tasca i quedarà disponible
pels nostres estudiants&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Fem públiques les notes" src="http://apuntstecnics.herokuapp.com/images/moodle.19.mostra.png" /&gt;
&lt;/div&gt;
&lt;p&gt;I ja tenim les notes consultables pels nostres alumnes!&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Mon, 09 Feb 2015 15:11:15 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-09:pujar-notes-massivament-al-moodle.html</guid><category>util</category></item><item><title>Un primer contacte amb la programació en Java</title><link>http://apuntstecnics.herokuapp.com/un-primer-contacte-amb-la-programacio-en-java.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document té com a objectiu oferir l'estudiant una primera
impressió d'un programa en java tot comparant-lo amb una versió del
programa en un altre llenguatge conegut: el &lt;em&gt;C&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Per a aprofitar al màxim aquesta activitat, caldria tenir alguns
coneixements bàsics del llenguatge C (e.g. directius de
precompil·lació, funcions)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="continguts"&gt;
&lt;h2&gt;Continguts&lt;/h2&gt;
&lt;p&gt;Intenta interpretar les següents versions del mateix programa.&lt;/p&gt;
&lt;div class="section" id="versio-c"&gt;
&lt;h3&gt;Versió C&lt;/h3&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;lt;math.h&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#define PI 3.14159265358979323846264338327&lt;/span&gt;

&lt;span class="cm"&gt;/* calcula l&amp;#39;àrea d&amp;#39;un cercle a partir del seu radi */&lt;/span&gt;
&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calcula_area_cercle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;PI&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;pow&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Càlcul de l&amp;#39;àrea d&amp;#39;un cercle&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Introduïu el radi: &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;scanf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%lg&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;calcula_area_cercle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;L&amp;#39;àrea és %.16lg&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="versio-java"&gt;
&lt;h3&gt;Versió java&lt;/h3&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;CalculaRadi&lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calcula_area&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PI&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pow&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Càlcul de l&amp;#39;àrea d&amp;#39;un cercle&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Introduïu el radi: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;BufferedReader&lt;/span&gt; &lt;span class="n"&gt;reader&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BufferedReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;InputStreamReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;in&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;linia&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;reader&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;readLine&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Double&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseDouble&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;linia&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;  &lt;span class="c1"&gt;// conversió de String a double&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;calcula_area&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot; L&amp;#39;àrea és &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-preguntes-sobre-el-codi"&gt;
&lt;h3&gt;Exercici 1. Preguntes sobre el codi&lt;/h3&gt;
&lt;p&gt;Contesta les següents preguntes sobre el codi que hem vist.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Què fan aquests programes?&lt;/li&gt;
&lt;li&gt;Compara la manera en que cada llenguatge mostra un missatge a
l'usuari.&lt;/li&gt;
&lt;li&gt;Compara la manera en que cada llenguatge obté una resposta de
l'usuari.&lt;/li&gt;
&lt;li&gt;Compara la manera en que cada llenguatge defineix el bloc principal
del programa.&lt;/li&gt;
&lt;li&gt;Compara la manera en que cada llenguatge defineix una funció.&lt;/li&gt;
&lt;li&gt;Perquè la versió en Java no requereix definit la constant &lt;em&gt;PI&lt;/em&gt; i C
sí?&lt;/li&gt;
&lt;li&gt;Quin llenguatge et sembla més fàcil i quin més complex?
Argumenta-ho?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:41:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:un-primer-contacte-amb-la-programacio-en-java.html</guid><category>java</category></item><item><title>Ritual Hola Món!</title><link>http://apuntstecnics.herokuapp.com/ritual-hola-mon.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document guia l'estudiant a l'edició i execució del seu primer
programa en java.&lt;/p&gt;
&lt;p&gt;Per a poder-lo seguir, cal disposar de:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;jdk&lt;/li&gt;
&lt;li&gt;editor de text&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per simplicitat, la guia pressuposa que el sistema operatiu és Ubuntu
12.04, el JDK és el JDK d'Oracle en versió 7, i l'editor el gedit.  És
perfectament possible seguir aquesta guia amb una configuració
diferent. En aquest cas, queda com exercici, l'adaptació de les passes
al sistema escollit.&lt;/p&gt;
&lt;p&gt;En cas que no es disposi del JDK, es pot considerar la guia
d'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-del-jdk.html"&gt;instal·lació del jdk&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="continguts"&gt;
&lt;h2&gt;Continguts&lt;/h2&gt;
&lt;p&gt;Passem a l'acció! Segueix les passes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;obre un terminal (ex. &amp;lt;ctrl&amp;gt;&amp;lt;alt&amp;gt;t)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;crea una carpeta on treballar i situat dins:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mkdir ~/programacio
&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ~/programacio
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;edita un fitxer anomenat &lt;tt class="docutils literal"&gt;HolaMon.java&lt;/tt&gt; (atenció a les
majúscules)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;gedit HolaMon.java &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;escriu al fitxer el següent contingut:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;  * Programa que saluda al món&lt;/span&gt;
&lt;span class="cm"&gt;  */&lt;/span&gt;
 &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;HolaMon&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hola Món!&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;guarda el document (ex. &amp;lt;ctrl&amp;gt;s), torna al terminal i compila escriu:&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;javac HolaMon.java
&lt;/pre&gt;&lt;/div&gt;
&lt;ol class="arabic simple" start="6"&gt;
&lt;li&gt;si apareix algun error, revisa que el text que has introduït al
fitxer contingui &lt;strong&gt;exactament&lt;/strong&gt; l'indicat. Corregeix el que calgui
i torna a compilar fins que no s'indiqui cap error.&lt;/li&gt;
&lt;li&gt;executa el teu programa&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java HolaMon
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Felicitats! Acabes de realitzar el teu primer programa en Java!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Exercici 1&lt;/strong&gt;: Preguntes sobre el ritual&lt;/p&gt;
&lt;p&gt;Contesta les següents preguntes. Potser et caldrà fer proves amb el
codi de les dues versions:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Perquè creus que pot ser tan habitual que es faci un programa
tipus &amp;quot;hola món!&amp;quot; quan entres a un nou llenguatge?&lt;/li&gt;
&lt;li&gt;Què creus que contenir l'argument args? Com es feia això en C? Què
passa si intentem fer un main() sense arguments com podíem fer a
C?&lt;/li&gt;
&lt;li&gt;Llença una hipòtesi de per què pot ser que no calgui fer quelcom
equivalent al &lt;tt class="docutils literal"&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/tt&gt; de C per poder escriure un
missatge per pantalla.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:40:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:ritual-hola-mon.html</guid><category>java</category></item><item><title>Primers exercicis en Java</title><link>http://apuntstecnics.herokuapp.com/primers-exercicis-en-java.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document ofereix l'estudiant la possibilitat d'accedir a la
sintaxi bàsica del Java, a partir d'una sèrie d'exercicis i pistes.&lt;/p&gt;
&lt;p&gt;Pel seu seguiment es pressuposa coneixements de programació
estructurada i modular, així com de la sintaxi bàsica del llenguatge
C.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;p&gt;Considera les pistes i realitza els exercicis següents.&lt;/p&gt;
&lt;p&gt;No cal preocupar-se, de moment, del control d'errors per entrades de
tipus erroni.  Suposarem que els nostres usuaris sempre introduiran
els valors que els demanem del tipus correcte.&lt;/p&gt;
&lt;div class="section" id="pista-1-el-nom-del-fitxer"&gt;
&lt;h3&gt;Pista 1. El nom del fitxer&lt;/h3&gt;
&lt;p&gt;El fitxer que conté un programa en Java, ha d'anomenar-se exactament
igual que la classe. Així, el programa HolaMon.java tindrà la
següent estructura:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;HolaMon&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="pista-2-el-bloc-principal"&gt;
&lt;h3&gt;Pista 2. El bloc principal&lt;/h3&gt;
&lt;p&gt;la rutina main() del llenguatge C, té la seva equivalència amb&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;NomClasse&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{...}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="pista-3-escriure-per-sortida-estandard"&gt;
&lt;h3&gt;Pista 3. Escriure per sortida estàndard&lt;/h3&gt;
&lt;p&gt;A l'hora d'escriure per sortida estàndard, les següents maneres són
equivalents:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;missatge seguit de salt de línia&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;missatge seguit de salt de línia\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="pista-4-llegir-d-entrada-estandard"&gt;
&lt;h3&gt;Pista 4. Llegir d'entrada estàndard&lt;/h3&gt;
&lt;p&gt;Per llegir d'entrada estàndard, ho tenim una mica més complicat.&lt;/p&gt;
&lt;p&gt;El següent programa mostra com llegir un enter i mostrar el seu
quadrat per sortida estàndard&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;    Descr: programa que demana un número enter i mostra el seu quadrat.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Quadrat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Número: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BufferedReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;InputStreamReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;in&lt;/span&gt;&lt;span class="o"&gt;)).&lt;/span&gt;&lt;span class="na"&gt;readLine&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El valor de &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; al quadrat és &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Atenció: aquest programa no controla el cas que l'usuari escrigui
quelcom que no sigui un número enter. Prova què passa si ho fa.&lt;/p&gt;
&lt;p&gt;Si cada cop que volem llegir quelcom de l'entrada estàndard hem de fer
tot això, a banda de ser quelcom poc eficient tant respecte a l'hora
de codificar com d'executar, ens trobarem amb problemes a l'hora de
redireccionar l'entrada.&lt;/p&gt;
&lt;p&gt;Una manera, raonablement pràctica de resoldre aquest problema pot ser
crear un nou fitxer al directori on tinguem el nostre programa amb els
següents continguts:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;IOUtils&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;BufferedReader&lt;/span&gt; &lt;span class="n"&gt;br&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BufferedReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;InputStreamReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;in&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="c1"&gt;// retorna un enter llegit de entrada estàndard. -1 si error&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;llegeixInt&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;resposta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;resposta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;llegeixStr&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resposta&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="c1"&gt;// retorna un String llegit de entrada estàndard. &amp;quot;&amp;quot; si error.&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;llegeixStr&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resposta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;resposta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;br&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;readLine&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resposta&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Ara, el nostre programa anterior es pot reescriure simplement amb:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;    Descr: programa que demana un número enter i mostra el seu quadrat.&lt;/span&gt;
&lt;span class="cm"&gt;    Nota: requereix IOUtils al package per defecte.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Quadrat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Número: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;IOUtils&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;llegeixInt&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El valor de &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; al quadrat és &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="pista-5-sintaxi-similar-al-c"&gt;
&lt;h3&gt;Pista 5. Sintaxi similar al C&lt;/h3&gt;
&lt;p&gt;La sintaxi del Java està molt inspirada en el llenguatge C. Per
aquesta raó, si no saps com s'escriu alguna cosa en java, prova amb la
sintaxi de C. Si tot i així no te'n surts, és clar, et caldrà una mica
més de cerca.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-preso"&gt;
&lt;h3&gt;Exercici 1. Presó&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani a l'usuari els anys que té amb el
missatge &lt;em&gt;Quants anys té?&lt;/em&gt;. En cas que sigui major d'edat, el programa
li avisarà dient: &lt;em&gt;Atenció: Vosté pot anar a la presó!&lt;/em&gt;. En qualsevol
cas, el programa finalitzarà dient: &lt;em&gt;Aneu amb compte&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Anomena el fitxer amb el codi font &lt;em&gt;Preso.java&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Nota: en aquest cas acceptarem qualsevol valor enter com a edat vàlida.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-mesos"&gt;
&lt;h3&gt;Exercici 2. Mesos&lt;/h3&gt;
&lt;p&gt;Desenvolupeu un programa que demani un mes i un any, i escrigui el mes
anterior i el mes següent.&lt;/p&gt;
&lt;p&gt;Els missatges de petició de l'entrada seran, respectivament: &lt;em&gt;Mes?&lt;/em&gt; i &lt;em&gt;Any?&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, si l’usuari introdueix mes &lt;em&gt;9&lt;/em&gt; i any &lt;em&gt;2009&lt;/em&gt;, el resultat
serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
ant: 8/2009
seg: 10/2009
&lt;/pre&gt;
&lt;p&gt;Nota: en aquest cas, suposarem que sempre ens introduiran mesos i anys
correctes.&lt;/p&gt;
&lt;p&gt;Anomena el fitxer amb el codi font &lt;em&gt;Mesos.java&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-ordena-3"&gt;
&lt;h3&gt;Exercici 3. Ordena 3&lt;/h3&gt;
&lt;p&gt;Desenvolupeu un programa que demani tres números i
escrigui els tres números ordenats creixentment (de menor a major).&lt;/p&gt;
&lt;p&gt;L'entrada es requerirà amb els missatges &lt;em&gt;Primer?&lt;/em&gt;, &lt;em&gt;Segon?&lt;/em&gt; i
&lt;em&gt;Tercer?&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, si els números introduïts són &lt;em&gt;3&lt;/em&gt;, &lt;em&gt;4&lt;/em&gt; i &lt;em&gt;2&lt;/em&gt;, el resultat
serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
2 3 4
&lt;/pre&gt;
&lt;p&gt;Anomena el fitxer amb el codi font &lt;em&gt;Ordena3.java&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="pista-6-comparacio-de-strings"&gt;
&lt;h3&gt;Pista 6. Comparació de strings&lt;/h3&gt;
&lt;p&gt;El següent programa llegeix un string i el compara amb un altre.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;    Descr: programa que demostra la comparació de strings&lt;/span&gt;
&lt;span class="cm"&gt;    Nota: requereix IOUtils al package per defecte.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ComparaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Nom: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;IOUtils&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;llegeixStr&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Torvalds&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;    &lt;span class="c1"&gt;// compara nom amb &amp;quot;Torvalds&amp;quot;&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hey! you&amp;#39;re Linus, right?&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Nice to meet you &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-4-ascensor"&gt;
&lt;h3&gt;Exercici 4. Ascensor&lt;/h3&gt;
&lt;p&gt;Considerem un ascensor d’un edifici amb planta baixa
i dos pisos que tingui els següents botons: ‘pujar 1’, ‘pujar 2’,
‘baixar 1’ i ‘baixar 2’. L’ascensor es comporta, a partir dels botons
esmentats, segons el següent diagrama de transició d’estats:&lt;/p&gt;
&lt;div class="figure align-right"&gt;
&lt;img alt="Diagrama d'estats de l'ascensor" src="http://apuntstecnics.herokuapp.com/images/poo003.img001.ascensor.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Es demana desenvolupar un programa que simuli el funcionament d’aquest
ascensor. El programa demanarà el pis en que es troba i el botó que es
prem, i mostrarà el nou pis. En cas que el botó seleccionat a una
posició determinada de l’ascensor no correspongui amb algun dels
representats amb el diagrama d’estats, l’ascensor mostra un missatge
d'error i es queda al lloc en què estava.&lt;/p&gt;
&lt;p&gt;Els missatges de petició de l'entrada són, respectivament:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Planta? (PB: planta baixa, PP: primer pis, SP: segon pis
Botó? (P1: puja 1, P2: puja 2, B1: baixa 1, B2: baixa 2
&lt;/pre&gt;
&lt;p&gt;Mentre que la sortida s'expressarà simplement indicant la nova planta.&lt;/p&gt;
&lt;p&gt;Per exemple, si l'entrada és: &lt;tt class="docutils literal"&gt;PB&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;P1&lt;/tt&gt;, la sortida serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
PP
&lt;/pre&gt;
&lt;p&gt;En cas d'error, caldrà mostrar els següents missatges:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Planta incorrecta
Botó incorrecte
&lt;/pre&gt;
&lt;p&gt;I cal tenir present que si la planta és incorrecta, ja no se li
demanarà el botó a l'usuari.&lt;/p&gt;
&lt;p&gt;Anomena el fitxer amb el codi font &lt;em&gt;Ascensor.java&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-historic-d-edats"&gt;
&lt;h3&gt;Exercici 5. Històric d'edats&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani el nom de l’usuari, l’edat i l’any
actual. El programa escriurà l’edat que tenia l’usuari a cada any des
del seu naixement i s’acomiadarà. Per exemple, si l’entrada és&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Anna
5
2012
&lt;/pre&gt;
&lt;p&gt;El programa escriurà&lt;/p&gt;
&lt;pre class="literal-block"&gt;
El 2007 va nàixer
El 2008 tenia 1 any
El 2009 tenia 2 anys
El 2010 tenia 3 anys
El 2011 tenia 4 anys
Adéu Anna
&lt;/pre&gt;
&lt;p&gt;L'aplicació no li dirà l'edat que té l'usuàri en
l'any actual, donat que aquesta dada forma part de l'entrada. Per
exemple, si l'usuària ha nascut aquest any, simplement s'acomiadarà.&lt;/p&gt;
&lt;p&gt;Les comprovacions necessàries són: que el nom no estigui buit, que
l'edat i l'any actual siguin enters positius, i que l'any actual sigui
un valor més alt que el de l'edat.&lt;/p&gt;
&lt;p&gt;Es demanaran les dades en l'ordre indicat a l'exemple i, en quan es
detecti un error, es deixarà de demanar més dades.&lt;/p&gt;
&lt;p&gt;Els missatges de petició de dades seran:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Nom?
Edat?
Any actual?
&lt;/pre&gt;
&lt;p&gt;Els missatges d'error seran:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Nom incorrecte
Edat no pot ser negativa
Any actual no pot ser negatiu
Edat o any actual incorrectes
&lt;/pre&gt;
&lt;p&gt;Anomena el fitxer amb el codi font &lt;em&gt;Edats.java&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="pista-7-mentre"&gt;
&lt;h3&gt;Pista 7. Mentre&lt;/h3&gt;
&lt;p&gt;Considera el següent codi&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;    Descr: programa que va demanant paraules fins que l&amp;#39;indiquen &amp;quot;prou&amp;quot; i les&lt;/span&gt;
&lt;span class="cm"&gt;    mostra en majúscules&lt;/span&gt;
&lt;span class="cm"&gt;    Nota: requereix IOUtils al package per defecte.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;PosaMajuscules&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;PARAULA_FIN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;prou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// constant amb la paraula amb que acaba&lt;/span&gt;
        &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;continua&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;continua&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Mot a posar en majúscules (&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;PARAULA_FIN&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot; acaba): &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;mot&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;IOUtils&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;llegeixStr&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARAULA_FIN&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;continua&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El mot &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;mot&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; en majúscules és &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;mot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toUpperCase&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-6-l-ascensor-continu"&gt;
&lt;h3&gt;Exercici 6. L'ascensor continu&lt;/h3&gt;
&lt;p&gt;Ara, el nostre ascensor començarà a la planta baixa i anirà demanant
un botó per canviar de pis. Es comportarà pràcticament igual que la
versió anterior. Ara, és clar, ja no li cal demanar a quin pis es troba.&lt;/p&gt;
&lt;p&gt;Un cop canviat de pis (o indicat l'error) demanarà que premi un nou
botó. I així es quedarà fins que l'usuari indiqui el botó de sortida.&lt;/p&gt;
&lt;p&gt;Aquesta versió incorpora un missatge molt compacte amb el següent
aspecte:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
[xx] P1: puja 1, P2: puja 2, B1: baixa 1, B2: baixa 2, EX: surt
&lt;/pre&gt;
&lt;p&gt;On xx pot ser PB, PP o SP depenent de la planta on es trobi.&lt;/p&gt;
&lt;p&gt;Quan l'usuari demani finalitzar (amb &amp;quot;EX&amp;quot;), es mostrarà el missatge de
comiat &amp;quot;Adéu&amp;quot; i finalitzarà l'execució.&lt;/p&gt;
&lt;p&gt;Anomena el fitxer amb el codi font &lt;em&gt;AscensorContinu.java&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="pista-8-conversions-i-accessos-a-posicions-d-un-string"&gt;
&lt;h3&gt;Pista 8. Conversions i accessos a posicions d'un string&lt;/h3&gt;
&lt;p&gt;Considera el següent codi&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;    Descr.: dibuixa un triangle n cops&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;PARAULA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Triangle&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;    &lt;span class="c1"&gt;// nombre d&amp;#39;arguments passats&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Per favor, indiqueu el &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;nombre de triangles a dibuixar. Ex.&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\tjava Triangle 3&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt; &lt;span class="c1"&gt;// primer argument&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;dibuixa&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;                      &lt;span class="c1"&gt;// crida a la rutina dibuixa()&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;dibuixa&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;       &lt;span class="c1"&gt;// declara la rutina dibuixa()&lt;/span&gt;
        &lt;span class="cm"&gt;/* dibuixa el triangle número num */&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Aquest és el triangle número &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;PARAULA&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARAULA&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;charAt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt; &lt;span class="c1"&gt;// escriu el caràcter a la posició c&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-7-triangles"&gt;
&lt;h3&gt;Exercici 7. Triangles&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani un nombre enter positiu i dibuixi tants
triangles com se li indiqui.&lt;/p&gt;
&lt;p&gt;Intenta evitar la repetició de codi fent servir subrutines.&lt;/p&gt;
&lt;p&gt;Per exemple, si l'entrada és &lt;em&gt;2&lt;/em&gt;, el resultat serà&lt;/p&gt;
&lt;pre class="literal-block"&gt;
.........9.........
........898........
.......78987.......
......6789876......
.....567898765.....
....45678987654....
...3456789876543...
..234567898765432..
.12345678987654321.
0123456789876543210
.........9.........
........898........
.......78987.......
......6789876......
.....567898765.....
....45678987654....
...3456789876543...
..234567898765432..
.12345678987654321.
0123456789876543210
&lt;/pre&gt;
&lt;p&gt;El missatge de petició de l'entrada serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Nombre de triangles?
&lt;/pre&gt;
&lt;p&gt;El missatge d'error si l'entrada no és correcta serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
No puc dibuixar n triangles
&lt;/pre&gt;
&lt;p&gt;On &lt;em&gt;n&lt;/em&gt; correspon al nombre introduït.&lt;/p&gt;
&lt;p&gt;Nota: Si tens la temptació de resoldre el problema via
&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;System.out.println(&amp;quot;.........9.........&amp;quot;);&lt;/span&gt;&lt;/tt&gt; planteja't que passarà
si se't requereix que els símbols a escriure s'han de demanar a
l'usuari.&lt;/p&gt;
&lt;p&gt;Anomena el programa &lt;em&gt;Triangles.java&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:39:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:primers-exercicis-en-java.html</guid><category>java</category></item><item><title>Reconeixement d'elements de programació</title><link>http://apuntstecnics.herokuapp.com/reconeixement-delements-de-programacio.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document serveix d'orientació a l'estudiant del llenguatge de
programació Java per endinsar-se en la seva sintaxi tot seguint els
&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/nutsandbolts/index.html"&gt;tutorials&lt;/a&gt;
d'ajuda proporcionats pels propis dissenyadors del llenguatge.&lt;/p&gt;
&lt;p&gt;Està format per tres exercicis que requereixen la lectura de diferents
documents per a poder respondre a una sèrie de qüestions.&lt;/p&gt;
&lt;p&gt;Els documents referenciats apareixen en anglès. Es pressuposa que
l'estudiant disposa del coneixement suficient d'aquesta llengua per
realitzar els exercicis. Altrament, es recorda l'existència de
traductors automàtics. És d'esperar que aquestes eines, no sent ni de
lluny perfectes, esperonin l'estudiant a obtenir el necessari domini
de la &lt;em&gt;lingua franca&lt;/em&gt; entre els desenvolupadors d'aplicacions.
&lt;a class="footnote-reference" href="#aprenangles" id="id1"&gt;[1]&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-tipus-primitius-del-java"&gt;
&lt;h3&gt;Exercici 1. Tipus primitius del Java&lt;/h3&gt;
&lt;p&gt;Llegeix les pàgines:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://download.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html"&gt;Primitive Data Types&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://download.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html"&gt;Arrays&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A continuació, contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Fes una taula que relacioni els tipus primitius de que disposa el
Java. Inclou una petita descripció, el rang de valors i el valor
per defecte. Indica, si existeix, el corresponent amb el del
llenguatge C.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;descriu amb les teves paraules el significat de literal. Inclou
exemples teus.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;descriu amb les teves paraules com es declaren i s'accedeixen els
arrays. Compara'ls amb el que coneixies de C. A la teva comparació
inclou avantatges/inconvenients que trobes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;De les següents declaracions, indica si són vàlides i si són
recomanables, i en cas que no, el perquè&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;notes&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;notes&lt;/span&gt;&lt;span class="o"&gt;[];&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;notes&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="n"&gt;notes&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quina diferència hi ha entre declarar una variable de tipus array i crear un array? Com anava això en C?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Per a què serveix arraycopy()? Indica almenys dues raons per les quals és preferible fer servir aquesta funció en comptes de fer la còpia amb un for()&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Fes un programa que:&lt;/p&gt;
&lt;ol class="loweralpha simple"&gt;
&lt;li&gt;crei un vector amb els primers cinc anys a partir del del teu naixement&lt;/li&gt;
&lt;li&gt;fent servir arraycopy() copii del segon al quart any en un altre vector&lt;/li&gt;
&lt;li&gt;mostri els anys del segon vector en ordre invers.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-operadors-del-java"&gt;
&lt;h3&gt;Exercici 2. Operadors del Java&lt;/h3&gt;
&lt;p&gt;Llegeix les pàgines:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://download.oracle.com/javase/tutorial/java/nutsandbolts/opsummary.html"&gt;Summary of Operators&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://download.oracle.com/javase/tutorial/java/nutsandbolts/expressions.html"&gt;Expressions, Statements, and Blocks&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A continuació, contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;indica els operadors que ofereix el Java en format de taula.
Afegeix una descripció amb les teves paraules i compara'ls amb els
que coneixies de C.&lt;/li&gt;
&lt;li&gt;descriu l'ús recomanat dels parèntesis a les expressions de Java&lt;/li&gt;
&lt;li&gt;descriu què és un statement. Prova de trobar una traducció al teu idioma.&lt;/li&gt;
&lt;li&gt;descriu què és un bloc. Compara aquest concepte amb el que coneixes de C.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-control-de-flux-d-execucio"&gt;
&lt;h3&gt;Exercici 3. Control de flux d'execució&lt;/h3&gt;
&lt;p&gt;Llegeix les pàgines de la secció següent:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://download.oracle.com/javase/tutorial/java/nutsandbolts/flow.html"&gt;Control Flow Statements&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A continuació, contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;descriu el funcionament de les estructures condicionals del java
(if, switch) Compara-les amb les del llenguatge C&lt;/li&gt;
&lt;li&gt;descriu el funcionament de les estructures mentre (while)
Compara-les amb les del llenguatge C 3.  descriu el funcionament
de les estructures per (for) Compara-les amb les del llenguatge C.
Fes especial menció del que a la pàgina indicada anomenen
&amp;quot;Enhanced for&amp;quot; o per millorat. L'has vist mai a algun altre
llenguatge? A quin i amb quina notació?&lt;/li&gt;
&lt;/ol&gt;
&lt;hr class="docutils" /&gt;
&lt;table class="docutils footnote" frame="void" id="aprenangles" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En altres paraules, si encara no ets capaç de llegir
anglès tècnic, ja pots posar-te les piles!&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:38:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:reconeixement-delements-de-programacio.html</guid><category>java</category></item><item><title>Encapsulació</title><link>http://apuntstecnics.herokuapp.com/encapsulacio.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document és una introducció a un dels conceptes fonamentals de
la programació orientada a objectes: l'encapsulació.&lt;/p&gt;
&lt;p&gt;Pressuposa que l'estudiant té coneixements bàsics de programació en C
i, desitjablement, del concepte de TAD. Considera &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/tipus-abstractes-de-dades.html"&gt;aquesta introducció
al concepte de TAD&lt;/a&gt; (des del
llenguatge C)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="tads-classes-i-encapsulacio"&gt;
&lt;h2&gt;TADs, classes i Encapsulació&lt;/h2&gt;
&lt;p&gt;Llegim a la definició de &lt;a class="reference external" href="http://ca.wikipedia.org/wiki/Tipus_abstracte_de_dades"&gt;TAD de la vikipèdia&lt;/a&gt; :&lt;/p&gt;
&lt;blockquote&gt;
En informàtica, un tipus abstracte de dades (TAD) és una
especificació d'un conjunt de dades i d'un conjunt
d'operacions que poden ser executades sobre el conjunt de
dades. Com a tipus de dades diem que és abstracte en el sentit
que és independent de les possibles implementacions.&lt;/blockquote&gt;
&lt;p&gt;De l'article &lt;a class="reference external" href="http://ca.wikipedia.org/wiki/Classe_%28inform%C3%A0tica%29"&gt;Classe de la viquipèdia&lt;/a&gt; extraiem la següent definició de classe:&lt;/p&gt;
&lt;blockquote&gt;
En programació orientada a objectes, una classe és una construcció
d'un llenguatge de programació usada per agrupar camps relacionats
i mètodes.&lt;/blockquote&gt;
&lt;p&gt;De l'article &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29"&gt;Encapsulation de la Wikipedia&lt;/a&gt; transcrivim:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In a programming language, encapsulation is used to refer to one
of two related but distinct notions, and sometimes to the
combination thereof:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;A language mechanism for restricting access to some of the
object's components.&lt;/li&gt;
&lt;li&gt;A language construct that facilitates the bundling of data with
the methods (or other functions) operating on that data.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;És a dir, per una part tenim el concepte de TAD que ens permet
especificar unes dades i les funcions que les manipulen d'una manera
independent de les possibles implementacions. Per una altra bada,
tenim el concepte de classe que, en POO, ens permet agrupar camps
(dades) i mètodes (funcions) relacionats entre ells. Finalment
disposem del concepte d'&lt;em&gt;encapsulació&lt;/em&gt; que ens parla de mecanismes per
restringir l'accés a alguns elements i facilitar l'agrupació de dades
amb les funcions que operen amb aquestes dades.&lt;/p&gt;
&lt;p&gt;És possible que pugui semblar-te que tot plegat, aquests conceptes
estan parlant del mateix o, si més no, de quelcom molt relacionat. A
veure si amb un petit exemple podem afegir-hi una mica de sentit.&lt;/p&gt;
&lt;div class="section" id="el-triangle-en-c"&gt;
&lt;h3&gt;El Triangle en C&lt;/h3&gt;
&lt;p&gt;Considera el següent programa escrit en C:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer triangle.h&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Definició del tipus Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="cp"&gt;#ifndef TRIANGLE_H&lt;/span&gt;
&lt;span class="cp"&gt;#define TRIANGLE_H&lt;/span&gt;

&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* Assigna valors als atributs d&amp;#39;un triangle */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* Calcula l&amp;#39;àrea d&amp;#39;un triangle. Pressuposa el triangle inicialitzat. */&lt;/span&gt;
&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cp"&gt;#endif&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer triangle.c&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Definició del tipus Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="cp"&gt;#include &amp;quot;triangle.h&amp;quot;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer usatriangle.c&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Programa que calcula l&amp;#39;àrea d&amp;#39;un triangle de base 5 i altura 3&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;quot;triangle.h&amp;quot;&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%g&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Aquest exemple mostra una possible implementació del TAD Triangle.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-observa-el-tad-triangle"&gt;
&lt;h3&gt;Exercici 1. Observa el TAD Triangle&lt;/h3&gt;
&lt;p&gt;Contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Per a què cal a &lt;em&gt;usatriangle.c&lt;/em&gt; fer un include de &lt;em&gt;triangle.h&lt;/em&gt; ?&lt;/li&gt;
&lt;li&gt;On es defineix l'estructura i el tipus &lt;em&gt;Triangle&lt;/em&gt; ?&lt;/li&gt;
&lt;li&gt;&lt;em&gt;usatriangle.c&lt;/em&gt; necessita saber, tal i com està implementat, quina
és l'estructura d'un Triangle?&lt;/li&gt;
&lt;li&gt;En comptes de fer servir &lt;em&gt;inicialitza_triangle()&lt;/em&gt;,
&lt;em&gt;usatriangle.c&lt;/em&gt; podria inicialitzar els valors del triangle
d'alguna altra manera? Com?&lt;/li&gt;
&lt;li&gt;Si canviem la implementació del Triangle de manera
que guardem els valors base i altura en un array de dos
double, indica què caldrà modificar perquè &lt;em&gt;usatriangle.c&lt;/em&gt; pugui
continuar funcionant. El què és més important, quin codi &lt;strong&gt;no&lt;/strong&gt; és
necessari modificar? Perquè creus que això pot ser important?&lt;/li&gt;
&lt;li&gt;En cas que haguérem canviat la implementació de &lt;em&gt;usatriangle.c&lt;/em&gt;
segons la resposta de la pregunta 4, en què hauria canviat la teva
resposta de la pregunta 5? Quin consell donaries als usuaris del
teu TAD Triangle tenint això en compte?&lt;/li&gt;
&lt;li&gt;Perquè creus que cal que &lt;em&gt;inicialitza_triangle()&lt;/em&gt; i
&lt;em&gt;calcula_area_triangle()&lt;/em&gt; indiquin en el seu nom la paraula
&lt;em&gt;triangle&lt;/em&gt;? Pista: què passaria si tinguéssim a l'hora un Triangle
i un Cercle amb similars funcionalitats?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="el-triangle-en-java"&gt;
&lt;h3&gt;El Triangle en Java&lt;/h3&gt;
&lt;p&gt;Considera ara el següent codi que correspon, en certa mesura, al TAD
Triangle vist anteriorment. Ara, en notació Java, direm la classe
Triangle.&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer &lt;em&gt;Triangle.java&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Implementació de la classe Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;base&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/* calcula i retorna l&amp;#39;àrea del triangle */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calculaArea&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer &lt;em&gt;UsaTriangle.java&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/** Classe que calcula l&amp;#39;àrea d&amp;#39;un triangle de base 5 i altura 3 */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaTriangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;calculaArea&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-2-observa-la-classe-triangle"&gt;
&lt;h3&gt;Exercici 2. Observa la classe Triangle&lt;/h3&gt;
&lt;p&gt;Contesta les següents preguntes sobre la classe Triangle.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;La proposta en Java té només dos fitxers en comptes dels tres de C.
Aventura una explicació.&lt;/li&gt;
&lt;li&gt;Quin creus que és l'equivalent de &lt;em&gt;inicialitza_triangle()&lt;/em&gt; de C en
la versió Java? Quines diferències hi trobes? Considera tant la
definició com l'ús.&lt;/li&gt;
&lt;li&gt;L'equivalent de &lt;em&gt;calcula_area_triangle()&lt;/em&gt; sembla molt més directe
en Java, oi? Descriu, però, les diferències que hi trobes tant en
la definició com en l'ús&lt;/li&gt;
&lt;li&gt;On penses que (dins &lt;em&gt;UsaTriangle.java&lt;/em&gt;) se li passa a
&lt;em&gt;calculaArea()&lt;/em&gt; el triangle del que ha de calcular l'àrea?&lt;/li&gt;
&lt;li&gt;Perquè creus que en la versió Java, es diu &lt;em&gt;calculaArea()&lt;/em&gt; i no
&lt;em&gt;calculaAreaTriangle()&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Aventura una raó per la qual &lt;em&gt;Triangle(double, double)&lt;/em&gt; fa servir
&lt;em&gt;this.base = base&lt;/em&gt; tot tenint en compte que &lt;em&gt;calculaArea()&lt;/em&gt;
accedeix directament als atributs sense indicar &lt;em&gt;this&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Prova el següent canvi a &lt;em&gt;UsaTriangle.java&lt;/em&gt;. Afegeix, després de
declarar &lt;em&gt;t&lt;/em&gt; una línia amb &lt;em&gt;t.base = 2;&lt;/em&gt; que, si es comportés com a
C, hauria de canviar el valor de l'atribut &lt;em&gt;base&lt;/em&gt; del triangle. Què
passa? Aventura una explicació pel missatge que t'apareix. Pista: La
clau està en &lt;em&gt;private&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Intenta explicar el concepte d'&lt;em&gt;encapsulació&lt;/em&gt; fent servir els
exemples del TAD Triangle i la classe Triangle. És a dir, descriu
quins mecanismes creus que ofereix Java per a permetre agrupar
dades i funcions, i a l'hora protegir l'accés directe a les dades.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:37:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:encapsulacio.html</guid><category>java</category></item><item><title>Classes i objectes</title><link>http://apuntstecnics.herokuapp.com/classes-i-objectes.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document introdueix l'estudiant de programació orientada a
objectes als conceptes fonamentals de &lt;em&gt;classe&lt;/em&gt; i &lt;em&gt;objecte&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Aquesta introducció es realitza de manera pràctica, guiada amb
exercicis que progressivament incorporen diferents perspectives dels
conceptes a tractar.&lt;/p&gt;
&lt;p&gt;Per al correcte seguiment d'aquests materials, es pressuposa
coneixement bàsic de la sintaxi de les estructures bàsiques del
llenguatge Java, així com de certa experiència en programació
elemental en el llenguatge C. Bàsicament, declaració de variables,
assignació, estructures condicionals i iteratives, declaració i crida
de funcions, i E/S estàndard.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="hola-gat-renat"&gt;
&lt;h2&gt;Hola gat Renat!&lt;/h2&gt;
&lt;p&gt;Ja va sent hora que coneguem un del principals personatges d'aquests
materials.&lt;/p&gt;
&lt;div class="section" id="exercici-1-el-gat-renat-te-set-vides"&gt;
&lt;h3&gt;Exercici 1. El gat Renat té set vides&lt;/h3&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// vides disponibles del gat Renat&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;           &lt;span class="c1"&gt;// declarem la referència al gat&lt;/span&gt;
        &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;   &lt;span class="c1"&gt;// creem la instància del gat Renat.&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al gat Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Copia i executa el codi i contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Quin ha de ser el nom del fitxer que contingui aquest codi perquè
funcioni?&lt;/li&gt;
&lt;li&gt;A quina línia està declarada la variable &lt;tt class="docutils literal"&gt;renat&lt;/tt&gt; que apareix a la
línia 6?&lt;/li&gt;
&lt;li&gt;A quina línia s'assigna el valor que es mostra per pantalla?&lt;/li&gt;
&lt;li&gt;Quin valor apareix si a aquesta línia no s'assigna cap valor?&lt;/li&gt;
&lt;li&gt;Què passaria sí la línia 5 no hi fos? Perquè creus?&lt;/li&gt;
&lt;li&gt;Perquè creus que el comentari de la línia 4 parla de &lt;em&gt;referència&lt;/em&gt;?
Recordes quelcom equivalent en C? Què?&lt;/li&gt;
&lt;li&gt;La línia 5 parla d'&lt;em&gt;instància&lt;/em&gt;. En aquest context, una instància es
pot entendre com el contingut real al que fa referència la variable
&lt;tt class="docutils literal"&gt;renat&lt;/tt&gt;. Es diu que la instància es &lt;em&gt;construeix&lt;/em&gt; amb l'operador
&lt;tt class="docutils literal"&gt;new&lt;/tt&gt; i això implica bàsicament que es reserva espai de memòria
per a allotjar tota la informació relativa a la instància. Què et
sona que pugui comparar-se a això en el llenguatge C?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;El resultat de l'exercici consistirà en el fitxer amb el codi i, al
final d'aquest, en forma de comentaris, cada pregunta amb la seva
resposta.&lt;/p&gt;
&lt;p&gt;No oblidis posar el nom de l'autor/l'autora (el teu és clar), la data
i una petita descripció del contingut, al començament del fitxer.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-el-gat-renat-te-un-accident"&gt;
&lt;h3&gt;Exercici 2. El gat Renat té un accident&lt;/h3&gt;
&lt;p&gt;Podem canviar el nombre de vides del gat Renat simplement afegint les
següents línies al final del main:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;           &lt;span class="c1"&gt;// declarem l&amp;#39;objecte (la referència) al gat&lt;/span&gt;
    &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;   &lt;span class="c1"&gt;// creem la instància del gat Renat.&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Abans el gat Renat tenia &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;  &lt;span class="c1"&gt;// Renat ha tingut un accident&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Ara el gat Renat té &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Modifica la classe GatRenat amb els canvis, executa el codi i contesta
les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Com podem consultar (llegir, obtenir) el valor d'una propietat de
la instància?&lt;/li&gt;
&lt;li&gt;Com podem canviar (escriure, assignar) el valor d'una propietat de
la instància?&lt;/li&gt;
&lt;li&gt;És possible indicar que el gat Renat té -12 vides? Com? És quelcom
desitjable que pugui passar? En cas que es pugui, com ho podries
evitar fent servir els teus coneixements amb el llenguatge C?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-hi-ha-dos-gats-renat"&gt;
&lt;h3&gt;Exercici 3. Hi ha dos gats Renat?&lt;/h3&gt;
&lt;p&gt;Considera ara el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// vides disponibles del gat Renat&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;renat_I&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;               &lt;span class="c1"&gt;// crea un primer gat Renat&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat I té  &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat_II&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;     &lt;span class="c1"&gt;// crea un segon gat Renat!&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat II té &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_II&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;++;&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat I té  &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat II té &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_II&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;renat_II&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// atenció: la instància de Renat II es perd!&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat I té  &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat II té &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_II&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;++;&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat I té  &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat II té &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_II&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Copia i executa el codi i contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Quanta memòria ocupa, com a mínim, una instància de GatRenat?&lt;/li&gt;
&lt;li&gt;Quantes instàncies hi ha de GatRenat tot just executat el codi fins la línia 5 (inclosa)?&lt;/li&gt;
&lt;li&gt;I fins la línia 6?&lt;/li&gt;
&lt;li&gt;I fins la línia 9?&lt;/li&gt;
&lt;li&gt;Perquè les línies 7 i 10 mostren les mateixes vides pels gats Renat
I i Renat II?&lt;/li&gt;
&lt;li&gt;Perquè les línies 13 i 14 mostren diferent nombre de vides pels
gats Renat I i Renat II?&lt;/li&gt;
&lt;li&gt;Què creus que vol dir el comentari de la línia 16?&lt;/li&gt;
&lt;li&gt;Perquè les línies 17 i 18 mostren les mateixes vides pels gats
Renat I i Renat II?&lt;/li&gt;
&lt;li&gt;Perquè les línies 21 i 22 mostren les mateixes vides pels gats
Renat I i Renat II malgrat la instrucció de la línia 20?&lt;/li&gt;
&lt;li&gt;Quantes instàncies hi ha quan s'executa la l'inia 20? Perquè?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-renat-tambe-des-de-fora"&gt;
&lt;h3&gt;Exercici 4. Renat també des de fora&lt;/h3&gt;
&lt;p&gt;Considera ara el següent codi que apareix a un altre fitxer:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaGatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al gat Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Copia el codi en un fitxer al mateix directori que el de l'exercici
anterior i executa'l.&lt;/p&gt;
&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Quin és el nom del fitxer on està definit el punt d'entrada &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; d'aquest programa?&lt;/li&gt;
&lt;li&gt;Ara tenim dos fitxers amb &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;. Com pot saber Java quin és el
&lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; a executar?&lt;/li&gt;
&lt;li&gt;A quin fitxer està definida la classe del gat Renat?&lt;/li&gt;
&lt;li&gt;Quants programes es podrien construir fent ús de la definició del gat Renat?&lt;/li&gt;
&lt;li&gt;Què passaria si el fitxer amb el codi anterior i el que conté la
definició de la classe del Renat estiguessin en directoris
diferents? (prova-ho!)&lt;/li&gt;
&lt;li&gt;Elimina el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; de GatRenat. Continua funcionant UsaGatRenat?
Què ha deixat de poder-se executar?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Per a aquest, com potser ja has imaginat, caldrà lliurar els dos
fitxers. Fes servir la utilitat tar per a agrupar-los.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-renat-te-estat"&gt;
&lt;h3&gt;Exercici 5. Renat té estat&lt;/h3&gt;
&lt;p&gt;El gat Renat pot estar dret, assegut o estirat. Modifica la definició
de la seva classe perquè pugui guardar aquesta informació, fent que
inicialment estigui estirat.&lt;/p&gt;
&lt;p&gt;Crea un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; dins de la definició de la classe, que instanciï un
gat Renat, mostri el nombre de vides i l'estat per defecte, canviï
l'estat a assegut i torni a mostrar el nou estat.&lt;/p&gt;
&lt;p&gt;Crea un altre main() fora de la definició de la classe, que instanciï
un gat Renat, mostri el nombre de vides i l'estat per defecte, canviï
l'estat a dret i torni a mostrar el nou estat.&lt;/p&gt;
&lt;p&gt;Pista: el tipus de dades per codificar l'estat podria ser &lt;tt class="docutils literal"&gt;String&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-el-renat-te-sempre-un-nombre-de-vides-correcte"&gt;
&lt;h3&gt;Exercici 6. El Renat té sempre un nombre de vides correcte!&lt;/h3&gt;
&lt;p&gt;Ja hem comentat abans que deixar una propietat pública perquè tothom pugui modificar-la pot portar a problemes. Per exemple, al gat Renat li podem posar impunement -15 vides.&lt;/p&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// vides disponibles del gat Renat&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;  &lt;span class="c1"&gt;// mètode que retorna el nombre de vides&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// modifica el nombre de vides del gat si el paràmetre vides conté un valor vàlid&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// de moment passem per alt aquest &amp;quot;this&amp;quot;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Què passa si intentes executar el següent codi? Perquè creus?&lt;/li&gt;
&lt;/ol&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaGatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al gat Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;ol class="arabic simple" start="2"&gt;
&lt;li&gt;Què s'està declarant a la línia 3? Així, que pot voler dir &lt;em&gt;mètode&lt;/em&gt;
en notació POO?&lt;/li&gt;
&lt;li&gt;Indica quina sortida genera el següent &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; i explica perquè
és aquesta?&lt;/li&gt;
&lt;/ol&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;   &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
       &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
       &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al gat Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
       &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(-&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
       &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al gat Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
       &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
       &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al gat Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
   &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;ol class="arabic simple" start="4"&gt;
&lt;li&gt;Sense modificar la classe GatRenat, és possible aconseguir que una
instància de GatRenat pugui tenir un nombre de vides negatiu?
Perquè o Com?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-l-estat-del-renat-es-sempre-bo"&gt;
&lt;h3&gt;Exercici 7. L'estat del Renat és sempre bo!&lt;/h3&gt;
&lt;p&gt;Crea els mètodes &lt;em&gt;setters&lt;/em&gt; i &lt;em&gt;getters&lt;/em&gt; necessaris per garantir que
l'estat del Renat sigui sempre correcte, a l'hora que pugui ser
canviat.&lt;/p&gt;
&lt;p&gt;Crea un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que demostri el funcionament dels nous mètodes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-8-com-esta-renat"&gt;
&lt;h3&gt;Exercici 8. Com està Renat?&lt;/h3&gt;
&lt;p&gt;De vegades amb els &lt;em&gt;accessors&lt;/em&gt; (mètodes &lt;em&gt;getters&lt;/em&gt; i &lt;em&gt;setters&lt;/em&gt;) no
resulta pràctic treballar. Així, cal afegir nous mètodes que permetin
un ús més còmode.&lt;/p&gt;
&lt;p&gt;Afegeix al repertori de mètodes del Renat els següents:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean estaViu()&lt;/tt&gt; // cert si encara li queda alguna vida&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean estaDret()&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;boolean estaAssegut()&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;boolean estaEstirat()&lt;/tt&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Crea un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que demostri el funcionament dels nous mètodes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-9-el-gat-renat-esta-ensinistrat"&gt;
&lt;h3&gt;Exercici 9. El gat Renat està ensinistrat!&lt;/h3&gt;
&lt;p&gt;Una de les gràcies de la POO és que podem tractar peces de codi com si
tinguessin una mena de personalitat pròpia. D'això s'en diu de vegades
com la metàfora de la POO. Així, podem imaginar que els objectes ens
realitzen serveis o que els podem donar ordres. Ho visualitzarem amb
el nostre pacient amic Renat.&lt;/p&gt;
&lt;p&gt;Afegeix tres nous mètodes: &lt;tt class="docutils literal"&gt;void aixecat()&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;void seu()&lt;/tt&gt;, i
&lt;tt class="docutils literal"&gt;void estirat()&lt;/tt&gt; de manera que quan vulguem, per exemple, que Renat
s'aixequi simplement li diguem  &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;renat.aixecat();&lt;/span&gt;&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Quan s'executa l'acció, Renat ens dirà el que fa en forma de missatge
per sortida estàndard. Així, la instrucció anterior faria generar per
pantalla el missatge: &lt;tt class="docutils literal"&gt;m'aixeco&lt;/tt&gt;. En cas, però, que ja estigui
en l'estat que se li demana, no mostra cap missatge.&lt;/p&gt;
&lt;p&gt;Crea un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que demostri el funcionament dels nous mètodes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-protegim-encara-mes-l-estat-del-renat"&gt;
&lt;h3&gt;Exercici 10. Protegim encara més l'estat del Renat&lt;/h3&gt;
&lt;p&gt;El fet que l'estat del gat estigui codificat amb un String, no deixa
de ser una incomoditat. Hom es pot equivocar teclejant i la detecció
no és massa senzilla. Has de fer un munt de comprovacions.&lt;/p&gt;
&lt;p&gt;Cerca per la web el concepte de enum en java i tracta de millorar la
definició del Renat creant una enumeració anomenada GatEstat. Afegeix
els següents mètodes&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;void setEstat(String)&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Assigna l'estat a partir d'un String. Si el string no es correspon
amb un estat vàlid, no canvia res. Aquest mètode és pràcticament el
que ja teníem.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;void setEstat(GatEstat)&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Assigna l'estat a partir d'un GatEstat. Sí, té el mateix nom que la
funció anterior. Cerca method overloading o sobrecàrrega de
mètodes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;String getEstatComString()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Retorna l'estat del gat en forma de String&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;GatEstat getEstat()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Retorna l'estat del gat com a GatEstat. Fixa't que ara no podem
posar-li el mateix nom que a l'anterior&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;És probable que et calgui realitzar algun altre canvi en el codi de
mètodes existents. Prova de realitzar-los sense modificar-los la
signatura.&lt;/p&gt;
&lt;p&gt;Perquè creus que el codi de &lt;tt class="docutils literal"&gt;setEstat()&lt;/tt&gt; es tan diferent en
complexitat depenent del tipus paràmetre que rep? Afegeix aquest
comentari al codi del mètode més senzill. Inclou als comentaris una
descripció amb les teves paraules.&lt;/p&gt;
&lt;p&gt;Executa el codi amb un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; del problema anterior. Funciona
sense haver de modificar res? Perquè creus que és així? Quin avantatge
hi trobes? Crea un nou &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; ampliant l'anterior que demostri el
funcionament dels nous mètodes. Afegeix-hi les teves reflexions.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-11-el-gat-renat-sap-parlar-i-callar"&gt;
&lt;h3&gt;Exercici 11. El gat Renat sap parlar i callar&lt;/h3&gt;
&lt;p&gt;De vegades ens pot interessar que Renat &lt;strong&gt;no&lt;/strong&gt; indiqui el que està
fent quan li donem una ordre de canvi d'estat amb els mètodes
&lt;tt class="docutils literal"&gt;aixecat()&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;seu()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;estirat()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Afegeix els següents mètodes a Renat:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;void calla()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Indica a Renat que deixi de dir el que fa. Si ja estava callat, ho
continua estant.&lt;/p&gt;
&lt;p&gt;A partir d'aquest moment, els missatges de moviment (ex.
&amp;quot;m'aixeco&amp;quot;) queden reemplaçats per &amp;quot;...&amp;quot;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;void parla()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Indica a Renat que digui el que fa. És el comportament per defecte.
Si ja estava parlant, ho continua fent.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;boolean potParlar()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Retorna cert quan el Renat pot parlar i fals altrament.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;void miola()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Escriu el missatge &lt;tt class="docutils literal"&gt;MEEEEEEU&lt;/tt&gt; si pot parlar, altrament escriurà &lt;tt class="docutils literal"&gt;...&lt;/tt&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Modifica UsaGatRenat perquè demostri el funcionament d'aquests nous
mètodes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-12-que-he-apres"&gt;
&lt;h3&gt;Exercici 12. Què he aprés?&lt;/h3&gt;
&lt;p&gt;Fes un repàs dels exercicis anteriors. Indica exercici a exercici què
has aprés de nou en fer-lo, o bé quins són els conceptes que
introdueix l'exercici, si ja els coneixies anteriorment. Procura ser
molt concret. Si et cal, ajuda't de (nous) exemples.&lt;/p&gt;
&lt;p&gt;En el cas que no hagis entès algun dels exercicis... bé, aquest cas no
es pot donar ja que, abans de fer aquest exercici t'ajudaràs de les
diferents fonts de suport que tens al teu abast (incloent, és clar,
consultes al teu docent) per arribar a entendre'l.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:36:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:classes-i-objectes.html</guid><category>java</category></item><item><title>Procedural vs OO</title><link>http://apuntstecnics.herokuapp.com/procedural-vs-oo.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Els paradigmes de programació modular (procedural) i orientada  a
objectes presenten característiques pròpies. De vegades costa de
trobar equivalència d'un concepte d'un paradigma (normalment POO) a
l'altre.&lt;/p&gt;
&lt;p&gt;Sovint els programadors aprenem a programar des de la
programació procedural, per després &lt;em&gt;desembarcar&lt;/em&gt; a la POO.&lt;/p&gt;
&lt;p&gt;Aquest document ofereix una introducció a la terminologia de la
programació orientada a objectes a partir de la de la programació
estructurada i modular.&lt;/p&gt;
&lt;p&gt;Es pressuposa coneixements dels conceptes bàsics de programació
estructurada i modular, de programació en llenguatge C i unes primeres
nocions de sintaxi pròpia de java.&lt;/p&gt;
&lt;p&gt;Per poder realitzar els exercicis d'aquest document caldrà disposar
d'un compilador de C (per exemple la versió 4.6.x de gcc) i un jdk
(per exemple la versió 1.7.x d'Oracle)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="comparacio-dels-dos-paradigmes"&gt;
&lt;h2&gt;Comparació dels dos paradigmes&lt;/h2&gt;
&lt;p&gt;Quan volem desenvolupar un programa amb el paradigma procedural,
normalment ens preocupem de decidir:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;quina és la informació d'entrada&lt;/li&gt;
&lt;li&gt;què hem de fer amb aquesta informació&lt;/li&gt;
&lt;li&gt;quina és la sortida que s'espera&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A partir d'aquesta informació definim una sèrie de variables on
allotjar la informació d'entrada i de sortida, i on deixar resultats
intermedis. A més a més, definim una sèrie de procediments
(subrutines, accions, funcions) que manipulen aquestes variables fins
a obtenir els valors de sortida esperats.&lt;/p&gt;
&lt;div class="section" id="tads"&gt;
&lt;h3&gt;TADs&lt;/h3&gt;
&lt;p&gt;Amb el temps, anem veient que algunes dades i procediments associats a
aquestes, es van repetint en diferents programes. Per exemple, sovint
ens trobem amb la necessitat de manipular diferents aspectes de les
&lt;em&gt;dates&lt;/em&gt; tot i que en alguns programes fem servir només per calcular
edats, mentre que en d'altres en fem servir càlculs de distància en el
temps. Així, implementem el concepte de tipus abstracte de dades (TAD)
on ajuntem una representació de les dades amb els seus procediments
associats.&lt;/p&gt;
&lt;p&gt;Considerem, per exemple, el següent TAD escrit en C:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer triangle.h&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Definició del TAD Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="cp"&gt;#ifndef TRIANGLE_H&lt;/span&gt;
&lt;span class="cp"&gt;#define TRIANGLE_H&lt;/span&gt;

&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* Assigna valors als atributs d&amp;#39;un triangle */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* Calcula l&amp;#39;àrea d&amp;#39;un triangle. Pressuposa el triangle inicialitzat. */&lt;/span&gt;
&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cp"&gt;#endif&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer triangle.c&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Implementació del TAD Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="cp"&gt;#include &amp;quot;triangle.h&amp;quot;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Amb aquesta implementació del TAD Triangle, podríem fer servir
triangles en diferents programes. Es pot considerar &lt;em&gt;abstracte&lt;/em&gt; perquè
els programes que el facin servir poden utilitzar les funcions del TAD
sense necessitat de conèixer la definició de les dades. Així, el TAD
podria ser modificat en un futur, afegint-hi noves funcionalitats (ex.
&lt;tt class="docutils literal"&gt;double calcula_perimetre_triangle(Triangle t)&lt;/tt&gt;) o bé canviar la
representació de les dades a un format que es pugui trobar més adequat
com ara un array de dos &lt;tt class="docutils literal"&gt;double&lt;/tt&gt; &lt;a class="footnote-reference" href="#arrayadequat" id="id1"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="classes"&gt;
&lt;h3&gt;Classes&lt;/h3&gt;
&lt;p&gt;En una primera aproximació, podríem entendre la programació
orientada a objectes com una mena d'&lt;em&gt;evolució&lt;/em&gt; dels TADs.&lt;/p&gt;
&lt;p&gt;En notació POO, un TAD seria equiparable a una &lt;em&gt;classe&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Les classes agrupen dades i procediments que, en notació POO es
coneixen com a &lt;em&gt;propietats&lt;/em&gt; i &lt;em&gt;mètodes&lt;/em&gt; respectivament. Ens referirem
a les propietats i mètodes d'una classe com a &lt;em&gt;membres&lt;/em&gt; de la classe.&lt;/p&gt;
&lt;p&gt;L'exemple del TAD Triangle, el traduïriem a Java, per exemple amb:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Implementació de la classe Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;base&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/* calcula i retorna l&amp;#39;àrea del triangle */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calculaArea&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En aquesta implementació veiem que tant la definició de les dades (el
&lt;tt class="docutils literal"&gt;struct&lt;/tt&gt; de C) com els procediments, apareixen en el mateix bloc de
codi (entre les claus que segueixen a &lt;tt class="docutils literal"&gt;public class Triangle&lt;/tt&gt;)&lt;/p&gt;
&lt;p&gt;La paraula clau &lt;tt class="docutils literal"&gt;class&lt;/tt&gt; de la línia 5, indica que el que ve a
continuació és el nom de la classe que s'està definint.&lt;/p&gt;
&lt;p&gt;Les línies 6 i 7 declaren les &lt;em&gt;propietats&lt;/em&gt; base i altura, metre que
els blocs iniciats a les línies 9 i 15 defineixen els mètodes
associats a la classe Triangle.&lt;/p&gt;
&lt;p&gt;Acompanyant a la definició de la classe i dels seus membres, veiem que
apareixen &lt;tt class="docutils literal"&gt;public&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;private&lt;/tt&gt;. Es tracta d'uns modificadors que
en Java permeten definir l'accessibilitat a aquesta classe i als seus
membres. Pel que respecta a aquest document introductori, &lt;em&gt;public&lt;/em&gt;
indica que la classe o el membre pot ser accedit per tothom, mentre
que &lt;em&gt;private&lt;/em&gt; limita l'accés a només el bloc on estigui definit el
membre &lt;a class="footnote-reference" href="#modificadorsdacces" id="id2"&gt;[2]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;El conjunt membres públics d'una classe formen el que es coneix com a
&lt;em&gt;interfície&lt;/em&gt; de la classe. Mentre es mantingui la mateixa interfície,
o com a molt, s'ampliï amb nous membres, els programes que fan servir
la classe han de poder continuar funcionant sense canvis: potser el
benefici més important de l'encapsulació.&lt;/p&gt;
&lt;p&gt;També cal esmentar que el mètode que es defineix a la línia 9 és una
mica especial. Per començar, no retorna cap tipus (ni tant sols
&lt;tt class="docutils literal"&gt;void&lt;/tt&gt;) i té el mateix nom de la classe. A aquests mètodes se'ls
anomena &lt;em&gt;constructors&lt;/em&gt; i tenen unes característiques especials que
queden fora dels objectius d'aquest text. &lt;a class="footnote-reference" href="#constructors" id="id3"&gt;[3]&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="objectes-instancies-i-referencies"&gt;
&lt;h3&gt;Objectes, instàncies i referències&lt;/h3&gt;
&lt;p&gt;Disposant de la definició d'un TAD, a l'igual que amb la definició
d'una classe, en realitat no disposem de cap dada d'aquest
tipus/classe. Per a aconseguir una dada d'aquest tipus/classe, ens
caldrà crear-la.&lt;/p&gt;
&lt;p&gt;En C, ho fem simplement dient:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Amb aquesta instrucció, el compilador reserva l'espai requerit per
allotjar tota la informació relativa a un triangle. Podem anomenar a
aquest espai com &lt;em&gt;instància&lt;/em&gt; del tipus triangle, i des del nostre
programa ens referirem amb el nom &lt;em&gt;t&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Aquest espai, donat que ha estat reservat pel propi compilador, serà
retornat automàticament en finalitzar el bloc on està definida.&lt;/p&gt;
&lt;p&gt;Per inicialitzar aquesta instància, si volem respectar el TAD, farem
servir la funció &lt;tt class="docutils literal"&gt;inicialitza_triangle()&lt;/tt&gt;, per exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En java, aquesta &lt;em&gt;instanciació&lt;/em&gt; es realitzaria mitjançant:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;La primera línia &lt;strong&gt;no&lt;/strong&gt; instància. Només declara una variable (o
referència) a una instància (també coneguda com a &lt;em&gt;objecte&lt;/em&gt;) de tipus
Triangle. Fins que no s'executa la segona línia, no es reserva espai
per la nova instància.&lt;/p&gt;
&lt;p&gt;Java, però, ens ofereix la possibilitat de compactar totes dues passes
(declaració i instanciació) en una sola línia:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En tot cas, és molt important tenir clar que aquesta instrucció es
composa de dues passes.&lt;/p&gt;
&lt;p&gt;A Java, com a molts altres llenguatges orientats a objectes, tots els
objectes es creen de manera dinàmica. És a dir, cal indicar
explícitament que es creï la instància (es reservi memòria per a
allotjar-la) i això té lloc en temps d'execució i no de compilació com
passa en C.&lt;/p&gt;
&lt;p&gt;C, és clar, també permet declarar dades dinàmicament. Per exemple,
podem crear un triangle de manera dinàmica fent servir quelcom similar
a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;*)&lt;/span&gt; &lt;span class="n"&gt;malloc&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sizeof&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;D'aquesta manera ens acostem molt més al que passa en Java. En aquest
cas, però, la instància referenciada per la variable t ja no ha estat
creada pel compilador i ens tocarà alliberar &lt;em&gt;explícitament&lt;/em&gt; el seu espai
quan ja no la necessitem. Això ho farem, per exemple, amb
&lt;tt class="docutils literal"&gt;free(t)&lt;/tt&gt;. Afortunadament, en Java, no ens caldrà preocupar-nos
d'alliberar explícitament la instància creada per &lt;tt class="docutils literal"&gt;new&lt;/tt&gt; perquè Java
(de fet un procés anomenat &lt;em&gt;recolector d'escombraries&lt;/em&gt; o &lt;em&gt;garbage
collector&lt;/em&gt;) ja se n'encarrega per nosaltres.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="us-dels-procediments-i-dels-metodes"&gt;
&lt;h3&gt;Ús dels procediments i dels mètodes&lt;/h3&gt;
&lt;p&gt;Per poder cridar a un procediment en C, simplement fem:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Veiem que al procediment li passem com a argument el triangle del que
ha de calcular l'àrea. És clar, la visió procedimental parteix de la
base que tenim un conjunt de dades a manipular i uns procediments que
la manipulen. El nom escollit per la funció
&lt;tt class="docutils literal"&gt;calcula_area_triangle()&lt;/tt&gt; ja implica que estem donant-li l'ordre de
calcular a &lt;em&gt;algú&lt;/em&gt;, probablement al programa. Ens cal indicar al nom
que es tracta del càlcul sobre un triangle, donat que també podríem
estar treballant al mateix programa amb un altre TAD anomenat
&lt;em&gt;Quadrat&lt;/em&gt; que tingués una funció equivalent pel càlcul de l'àrea (ex.
&lt;tt class="docutils literal"&gt;calcula_area_quadrat()&lt;/tt&gt;) Si ambdós es diguessin &lt;tt class="docutils literal"&gt;calcula_area()&lt;/tt&gt;
el compilador no sabria a quin dels dos procediments ens referim i
generaria un error.&lt;/p&gt;
&lt;p&gt;En Java, això no ens passa. El mètode està associat a la classe dins
del bloc que defineix la classe. Per poder-lo cridar, ens caldrà fer
referència d'alguna manera a la classe. La crida equivalent en Java
seria:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;calcula_area&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixem-nos que &lt;em&gt;t&lt;/em&gt; no se li passa com a argument dins dels parèntesis
de la crida, sinó que apareix abans del nom del mètode separat
d'aquest per un punt. Aquesta notació és la mateixa que fa servir C
per a poder accedir als camps d'un &lt;em&gt;struct&lt;/em&gt; i bé a implicar que, per
Java, tant les propietats com els mètodes formen part de la definició
de la classe. És a dir, són &lt;em&gt;membres&lt;/em&gt; de la classe.&lt;/p&gt;
&lt;p&gt;El mètode &lt;tt class="docutils literal"&gt;calcula_area()&lt;/tt&gt; queda associat a la classe &lt;em&gt;Triangle&lt;/em&gt; pel
fet que el tipus de la variable &lt;em&gt;t&lt;/em&gt; és &lt;em&gt;Triangle&lt;/em&gt;. A l'hora,
&lt;tt class="docutils literal"&gt;calcula_area()&lt;/tt&gt; sap de quin triangle concret ha de calcular l'àrea
perquè està associat a &lt;em&gt;t&lt;/em&gt; en ser cridat.&lt;/p&gt;
&lt;p&gt;Es podria entendre com si es fes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;calcula_area&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;    &lt;span class="c1"&gt;// no compila en Java!&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;És a dir, la crida indica per una banda la classe en que es defineix
el mètode, i per una altra la instància a la que s'ha d'aplicar el
mètode. &lt;a class="footnote-reference" href="#pythonsiaccepta" id="id4"&gt;[4]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;A la crida a un mètode d'un objecte, en POO també se la coneix com a
&lt;em&gt;enviament de missatge&lt;/em&gt;, on el tipus del missatge el defineix el propi
mètode, mentre que el contingut del missatge es codifica en els
arguments que se li passa.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="programacio-orientada-a-objectes"&gt;
&lt;h3&gt;Programació orientada a objectes&lt;/h3&gt;
&lt;p&gt;Ara que hem fet una ullada a part de la nomenclatura de la programació
orientada a objectes, no ens hauria d'estranyar que aquest paradigma
entengui els programes com un conjunt d'objectes que interactuen entre
si, en comptes d'una llista d'instruccions que manipulen dades.&lt;/p&gt;
&lt;p&gt;Cada objecte és capaç de rebre i enviar missatges a altres objectes
(mitjançant crides a mètodes), processar dades, i en general mostrar
un comportament depenent de la seva lògica (el codi dels mètodes), el
seu estat (el valor de les seves propietats) i l'entorn en que es mou
(els arguments dels missatges i altres dades &amp;quot;globals&amp;quot; com per exemple
el contingut del buffer de teclat).&lt;/p&gt;
&lt;p&gt;Les dades dels programes ben orientats a objectes, solen estar
&amp;quot;protegides&amp;quot; de l'accés de codi que no sigui el que ofereixen els
mètodes de la classe.&lt;/p&gt;
&lt;p&gt;Cada classe sol tenir unes &lt;em&gt;responsabilitats&lt;/em&gt; molt concretes i
relacionades amb la classe, i minimitza la dependència amb altres
classes. Això permet reutilitzar les classes en contexts molt
diferents.&lt;/p&gt;
&lt;p&gt;Cada mètode, idealment, realitza una única responsabilitat de la
classe a la que pertany. Els mètodes solen contenir poques
instruccions ja que, quan la responsabilitat requereix moltes passes,
normalment es divideix en &amp;quot;subresponsabilitats&amp;quot; més petites a
realitzar per altres mètodes.&lt;/p&gt;
&lt;p&gt;El punt d'entrada (la funció &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;) d'un programa orientat a
objectes, sol ser un mètode (que compleix alguns requisits com ara
tenir un nom concret) de la classe que representa el &amp;quot;programa
principal&amp;quot;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-objectes-instancies-i-referencies"&gt;
&lt;h3&gt;Exercici 1. Objectes, instàncies i referències&lt;/h3&gt;
&lt;p&gt;Compara amb les teves paraules aquests tres conceptes (són el mateix?,
com es relacionen entre si?)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-el-tad-quadrat"&gt;
&lt;h3&gt;Exercici 2. El TAD Quadrat&lt;/h3&gt;
&lt;p&gt;Desenvolupa el TAD Quadrat en llenguatge C, amb les operacions
equivalents al TAD Triangle vist anteriorment.&lt;/p&gt;
&lt;p&gt;Crea un nou programa principal anomenat &lt;tt class="docutils literal"&gt;usafigures.c&lt;/tt&gt; que, fent
servir els dos TADs, calculi l'àrea d'un triangle de base 5 i altura
3, i la d'un quadrat de costat 5. Pots fer servir el següent exemple
com a plantilla:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Fitxer: usatriangle.c&lt;/span&gt;
&lt;span class="cm"&gt; * Programa que calcula l&amp;#39;àrea d&amp;#39;un triangle de base 5 i altura 3&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;quot;triangle.h&amp;quot;&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%g&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Recorda que amb gcc pots crear l'executable d'aquest codi amb la
comanda:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;gcc -o usatriangle usatriangle.c triangle.c
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-la-classe-quadrat"&gt;
&lt;h3&gt;Exercici 3. La classe Quadrat&lt;/h3&gt;
&lt;p&gt;Desenvolupa la classe Quadrat en llenguatge Java, amb les operacions
equivalents a la classe Triangle vista anteriorment.&lt;/p&gt;
&lt;p&gt;Crea una nova classe anomenada &lt;tt class="docutils literal"&gt;UsaFigures&lt;/tt&gt; que realitzi un càlcul
equivalent al de &lt;tt class="docutils literal"&gt;usafigures.c&lt;/tt&gt; de l'exercici anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-identificacio-d-elements"&gt;
&lt;h3&gt;Exercici 4. Identificació d'elements&lt;/h3&gt;
&lt;p&gt;Recupera el codi de les tres classes que has fet servir en l'exercici
anterior. Col·loca-ho tot en un mateix document i indica quines línies
contenen algun dels següents conceptes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;declaració de classe&lt;/li&gt;
&lt;li&gt;declaració de propietat&lt;/li&gt;
&lt;li&gt;declaració de mètode&lt;/li&gt;
&lt;li&gt;declaració de variable&lt;/li&gt;
&lt;li&gt;instanciació&lt;/li&gt;
&lt;li&gt;lectura de propietat&lt;/li&gt;
&lt;li&gt;escriptura de propietat&lt;/li&gt;
&lt;li&gt;crida a mètode&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per exemple, considera:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Implementació de la classe Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;     &lt;span class="c1"&gt;// declaració de classe&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;    &lt;span class="c1"&gt;// declaració de propietat&lt;/span&gt;

&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-5-estatic-vs-dinamic"&gt;
&lt;h3&gt;Exercici 5. Estàtic vs dinàmic&lt;/h3&gt;
&lt;p&gt;Descriu amb les teves paraules la diferència entre la creació estàtica
i dinàmica d'instàncies. Argumenta a favor i en contra de cada opció.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-opcional-creacio-dinamica-d-instancies-d-un-tad-en-c"&gt;
&lt;h3&gt;Exercici 6. (opcional) Creació dinàmica d'instàncies d'un TAD en C&lt;/h3&gt;
&lt;p&gt;Realitza una nova versió del codi dels programes que apareixen a
l'exercici del TAD Quadrat. En aquest cas, aconsegueix que les
instàncies de les figures siguin creades dinàmicament en comptes
d'estàticament.&lt;/p&gt;
&lt;p&gt;Aquest exercici, tot i sent opcional, és molt recomanable per a
arribar a entendre el funcionament d'instanciació de llenguatges com
Java.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;hr class="docutils" /&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="arrayadequat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En aquest exemple tan bàsic, probablement no és
molt més adequat fer servir un array que deixar base i altura com
estan. L'exemple, però, hauria de permetre veure que el canvi
d'implementació de les dades no afecta als programes usuaris del
TAD (a banda de requerir recompilació, és clar)&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="modificadorsdacces" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si tens preses per saber què hi ha al darrera
d'aquests mots en Java, pots consultar el que diuen els seus
dissenyadors al tutorial de Java sobre &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html"&gt;els modificadors&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="constructors" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Pels impacients, podeu mirar al tutorial de java
què diuen sobre &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html"&gt;els constructors&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="pythonsiaccepta" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Hi ha llenguatges que accepten les dues
notacions. Per exemple, Python requereix explicitar la instància
com a primer paràmetre dels mètodes, i després permet realitzar
crides tant a partir de la instància com a partir de la classe.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:35:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:procedural-vs-oo.html</guid><category>java</category></item><item><title>Constructors (part I)</title><link>http://apuntstecnics.herokuapp.com/constructors-part-i.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document introdueix els &lt;em&gt;constructors&lt;/em&gt;, un tipus especial de
bloc de codi que en programació orientada a objectes és cridat la
creació d'una nova instància d'una classe, i que té la funció de
preparar la instància per a ser utilitzada.&lt;/p&gt;
&lt;p&gt;Es tracta d'una primera aproximació al concepte que no tracta
característiques més avançades com la relació amb l'herència. Aquests
elements seran tractats posteriorment a la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/constructors-part-ii.html"&gt;segona part&lt;/a&gt; d'aquest document.&lt;/p&gt;
&lt;p&gt;Aquesta introducció comença amb una secció &lt;em&gt;teòrica&lt;/em&gt; que descriu els
constructors (i destructors), per després continuar amb l'anàlisi
d'exercicis en Java.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Atenció&lt;/strong&gt; La secció teòrica pot resultar molt complexa per qui mai
no ha estat exposat a la gestió explícita de memòria dinàmica. Si és
el teu cas, intenta aproximar-te-hi amb ment oberta.&lt;/p&gt;
&lt;p&gt;Es pressuposa que s'ha seguit els continguts de &lt;a class="reference external" href="poo006.classes_objectes.rst"&gt;classes i objectes&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="constructors-i-destructors"&gt;
&lt;h2&gt;Constructors i destructors&lt;/h2&gt;
&lt;p&gt;Un aspecte important, pels programes en execució, és la reserva i
posterior alliberament de memòria necessària per a poder fer encabir
dinàmicament les dades que manipulen.&lt;/p&gt;
&lt;p&gt;Considerem per exemple, la implementació d'una &lt;em&gt;llista dinàmica&lt;/em&gt; d'enllaç simple,
sovint es realitza amb una estructura (Node) que conté almenys dos
camps (el valor a guardar per un element de la llista i un apuntador
al següent node). Normalment ens cal disposar d'un apuntador al primer
node, i el darrer node apunta convenientment a un valor nul.&lt;/p&gt;
&lt;p&gt;La següent imatge esquematitza una llista d'aquestes amb dos elements.&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="Dos elements" src="http://apuntstecnics.herokuapp.com/images/poo008.img001.llistadin_doselem.png" /&gt;
&lt;/div&gt;
&lt;p&gt;En cas que hi vulguem afegir un nou node, ens cal realitzar les
següents passes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;strong&gt;reservar&lt;/strong&gt; l'espai pel nou node&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;inicialitzar&lt;/strong&gt; els valors del nou node. Com a mínim l'apuntador a
següent node, que farem apuntar al node que correspongui de la
llista, o bé a &lt;em&gt;null&lt;/em&gt; si ha de ser el nou darrer.&lt;/li&gt;
&lt;li&gt;reassignar l'apuntador del node de la llista que ha de ser anterior
al nou node, per què tingui com a següent el nou node.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;El resultat final queda representat per la següent imatge:&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="Tres elements" src="http://apuntstecnics.herokuapp.com/images/poo008.img002.llistadin_treselem.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Per una altra banda, quan volem eliminar un element de la llista, les
passes que hem de fer són:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;fer que el punter a següent node del node anterior al que volem
eliminar, passi a apuntar al node següent del node que volem
eliminar.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;alliberar&lt;/strong&gt; l'espai ocupat pel node a eliminar.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;El resultat final queda:&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="Menys elements" src="http://apuntstecnics.herokuapp.com/images/poo008.img003.llistadin_menyselem.png" /&gt;
&lt;/div&gt;
&lt;p&gt;De les operacions vistes en aquest exemple, podem dir que tot node de
la llista ha de ser:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;strong&gt;creat&lt;/strong&gt;: &lt;em&gt;reserva de memòria&lt;/em&gt; per a allotjar-lo i &lt;em&gt;inicialització&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;destruït&lt;/strong&gt;: &lt;em&gt;alliberament&lt;/em&gt; de la memòria reservada un cop sabem
que no ens cal tornar a fer-lo servir.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;En Java, la creació d'una nova instància la realitzem mitjançant
l'expressió &lt;tt class="docutils literal"&gt;new &lt;span class="pre"&gt;«Constructor»(«args»)&lt;/span&gt;&lt;/tt&gt; on «Constructor» coincideix
amb el nom de la classe i «args» corresponen als valors
d'inicialització (sovint no hi ha cap).&lt;/p&gt;
&lt;p&gt;La destrucció en Java &lt;strong&gt;no&lt;/strong&gt; es realitza explícitament (a diferència
d'altres llenguatges OO com ara C++) &lt;a class="footnote-reference" href="#javafinalize" id="id1"&gt;[2]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Java (com molts altres llenguatges OO) disposen d'un procés de baixa
prioritat anomenat &lt;em&gt;recolector d'escombraries&lt;/em&gt; (&lt;em&gt;Garbage Collector&lt;/em&gt;)
que se n'encarrega d'anar alliberant aquells espais de memòria que ja
no estan referenciats per ningú. El llenguatge no ens ofereix manera
d'influenciar a aquest procés &lt;a class="footnote-reference" href="#javagc" id="id2"&gt;[3]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;En tot cas &lt;strong&gt;sí&lt;/strong&gt; podem ajudar al &lt;em&gt;Garbage Collector&lt;/em&gt;. Si disposem
d'una instància que ocupa &lt;strong&gt;molta&lt;/strong&gt; memòria i sabem que ja no la
necessitem més al nostre programa, sempre podem assignar totes les
seves referències a &lt;tt class="docutils literal"&gt;null&lt;/tt&gt;. D'aquesta manera, el &lt;em&gt;Garbage Collector&lt;/em&gt;
sabrà de seguida que ja no cal i podrà actuar en conseqüència.
Considera el següent exemple:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="n"&gt;ClasseGrossa&lt;/span&gt; &lt;span class="n"&gt;cg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ClasseGrossa&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// instància que ocupa molt&lt;/span&gt;
&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;           &lt;span class="c1"&gt;// usem la instància tot el que la necessitem&lt;/span&gt;
&lt;span class="n"&gt;cg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;      &lt;span class="c1"&gt;// eliminem la referència a la instància&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-1-construccio-del-gat-renat"&gt;
&lt;h2&gt;Exercici 1. Construcció del gat Renat&lt;/h2&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// vides disponibles del gat Renat&lt;/span&gt;

    &lt;span class="c1"&gt;// constructor per defecte&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// constructor específic&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// canvia el nombre de vides si el nou valor és vàlid&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;megaRenat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;A Mega Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;megaRenat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Executa el programa i respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;A quina línia es posa el valor de vides de la instància creada a la 26?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A quina línia es posa el valor de vides de la instància creada a la 28?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Els blocs que s'inicien a les línies 5 i 8 semblen mètodes però hi
ha algunes diferències amb un mètode convencional. Quines són?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Què et suggereixen els comentaris de les línies 4 i 7?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quan s'executa el codi dels blocs iniciats a les línies 5 i 8.
Ajuda't, si et cal, de &lt;em&gt;xivatos&lt;/em&gt; &lt;a class="footnote-reference" href="#xivato" id="id3"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Elimina o comenta la línia 5. Continua funcionant el codi? Perquè
creus?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Substitueix el codi del bloc de la línia 8 pel següent i descriu
què passa a l'hora d'executar:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c1"&gt;// constructor específic&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;     &lt;span class="c1"&gt;// o també this.setVides(vides);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Per a què creus que serveix el &lt;tt class="docutils literal"&gt;this()&lt;/tt&gt;?&lt;/p&gt;
&lt;p&gt;Pista: posa un &lt;em&gt;xivato&lt;/em&gt; al constructor per defecte i compara que
passa en executar el codi quan &lt;tt class="docutils literal"&gt;this()&lt;/tt&gt; hi és, i quan el treus.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-el-gat-renat-pot-neixer-silenciosament"&gt;
&lt;h2&gt;Exercici 2. El gat Renat pot néixer silenciosament&lt;/h2&gt;
&lt;p&gt;Crea una nova versió de la classe GatRenat a partir de la que
incorporava la possibilitat de parlar i callar.&lt;/p&gt;
&lt;p&gt;En aquesta ocasió, la classe permetrà ser inicialitzada de manera que
parli o calli. Cal però, evitar que codi que ja funcionava amb la
versió anterior, deixi de fer-ho amb aquesta.&lt;/p&gt;
&lt;p&gt;Per defecte, el gat Renat &lt;em&gt;naixerà&lt;/em&gt; podent parlar i dirà &amp;quot;He nascut!&amp;quot;
en el moment de la seva creació. En cas, però, que es construeixi
silenciós, no dirà res en nàixer.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-lentorn-operatiu-del-gat-renat"&gt;
&lt;h2&gt;Exercici 3. L’entorn operatiu del gat Renat&lt;/h2&gt;
&lt;p&gt;Desenvolupa un nou programa que ofereixi a l’usuari la possibilitat
d’interaccionar amb el gat Renat (inclòs el silenciar-lo i fer-lo
tornar a parlar).&lt;/p&gt;
&lt;p&gt;El programa mostrarà com a &amp;quot;prompt&amp;quot; &lt;tt class="docutils literal"&gt;[Renat]:&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Les ordres que se li podran donar seran:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;com estàs?
aixeca’t
seu
estira’t
miola
calla
parla
adèu
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;L'entorn no distingirà entre majúscules i minúscules.&lt;/p&gt;
&lt;p&gt;En cas que la comanda introduïda per l'usuari no coincideixi amb
alguna d'aquestes, l'entorn respondrà amb el missatge &amp;quot;com?&amp;quot; i
continuarà demanant noves comandes.&lt;/p&gt;
&lt;p&gt;Inicialment el gat Renat parlarà i estarà estirat.&lt;/p&gt;
&lt;p&gt;Quan se li demani com està, si pot parlar, dirà &lt;tt class="docutils literal"&gt;estic «estat»&lt;/tt&gt; (per
exemple, &lt;tt class="docutils literal"&gt;estic estirat&lt;/tt&gt;), altrament respondrà amb &lt;tt class="docutils literal"&gt;...&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Quan se li digui &lt;tt class="docutils literal"&gt;adèu&lt;/tt&gt;, si pot parlar respondrà amb &lt;tt class="docutils literal"&gt;adèu&lt;/tt&gt;,
altrament també s'acomiadarà silenciosament amb un &lt;tt class="docutils literal"&gt;...&lt;/tt&gt;. En tots
dos casos finalitzarà.&lt;/p&gt;
&lt;p&gt;Per la resta de comandes, el programa respondrà amb el que respongui
el gat.&lt;/p&gt;
&lt;p&gt;Crea un joc de proves que permeti comprovar el funcionament de
cadascuna de les opcions. El joc de proves estarà format per dos
fitxers, un amb les comandes d'entrada i un amb la sortida esperada.&lt;/p&gt;
&lt;p&gt;El d'entrada començarà amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;com estàs?
aixeca&amp;#39;t
«...»
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;El de sortida començarà amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;He nascut!
[Renat] estic estirat
[Renat] m&amp;#39;aixeco
[Renat] «...»
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nota: en cas que ens descuidem de finalitzar al fitxer d'entrada amb
&amp;quot;adèu&amp;quot;, és molt probable que ens surti un error d'execució del tipus
&lt;tt class="docutils literal"&gt;java.lang.NullPointerException&lt;/tt&gt;. El problema és que la lectura de
l'entrada estàndard ens returna &lt;tt class="docutils literal"&gt;null&lt;/tt&gt; en comptes d'un string buit.
Caldrà només continuar quan llegim res que no sigui null. És clar, si
arribem a null finalitzarem l'execució però no ens acomiadarem de
l'usuari. Faltaria més!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-la-classe-hora"&gt;
&lt;h2&gt;Exercici 4. La classe Hora&lt;/h2&gt;
&lt;p&gt;Implementa la classe Hora amb les propietats (privades) hora, minut i
segon de tipus enter, i els accessors (públics) que assegurin que
l'hora és sempre vàlida.&lt;/p&gt;
&lt;p&gt;Per defecte, l'hora correspondrà a &lt;tt class="docutils literal"&gt;0:00:00&lt;/tt&gt;, però la classe oferirà
els mecanismes necessaris per a inicialitzar una hora amb algun altre
valor &lt;em&gt;vàlid&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Afegeix els següents mètodes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void incrementa()&lt;/tt&gt;: fa que l'hora tingui un segon més&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void seguent(int)&lt;/tt&gt;: fa que l'hora s'incrementi en el nombre de segons indicats&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void decrementa()&lt;/tt&gt;: fa que l'hora tingui un segon menys&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void decrementa(int)&lt;/tt&gt;: fa que l'hora es decrementi en el nombre de segons indicats&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;int compareTo(Hora)&lt;/tt&gt;: compara amb l'hora indicada i retorna &amp;lt;0 si és menor que la indicada, 0 si són iguals i &amp;gt;0 si és més gran que la indicada.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String toString()&lt;/tt&gt;: retorna un string amb l'hora en format h:mm:ss.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Desenvolupa una funció &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que demani a l'usuari les dades de
tres hores i, fent servir la classe Hora, les mostri ordenades
creixentment.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Notes / pistes&lt;/strong&gt;&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;En cas que un constructor específic es trobi amb un o més
paràmetres no vàlids, inicialitzarà la instància amb els valors per
defecte.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Per escriure el 0 inicial als minuts i segons quan el valor és
menor de 10, es pot fer servir el mètode &lt;a class="reference external" href="https://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html"&gt;System.out.format()&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Per si vas justet de temps:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;#39;%d %02d %05d%n&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;O més compacte:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;#39;%d %1$02d %1$05d%n&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-la-classe-persona"&gt;
&lt;h2&gt;Exercici 5. La classe Persona&lt;/h2&gt;
&lt;p&gt;Implementa la classe Persona amb les propietats nom, cognoms, any de
naixement i any de defunció protegides amb inicialitzadors i
accessors, que respectin les següents regles:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;l'any de naixement haurà de ser sempre un enter positiu&lt;/li&gt;
&lt;li&gt;l'any de defunció només pot ser -1, per representar que la persona
encara és viva, o bé un valor superior o igual al de l'any de
naixement. En cap cas, però, es permetrà a l'usuari de la classe
indicar explícitament el valor -1 per l'any de defunció. Per
corregir l'estat d'una persona i indicar que està viva, caldrà fer
servir el mètode &lt;tt class="docutils literal"&gt;setViu()&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;cap persona pot no tenir nom, cognoms o any de naixement.&lt;/li&gt;
&lt;li&gt;les persones poden ser inicialitzades vives o no.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;El càlcul de l'edat es realitzarà únicament a partir de l'any de
naixement i serà, per tant, aproximat (no disposem del mes i el dia).&lt;/p&gt;
&lt;p&gt;Per saber l'any actual, podem fer servir el següent codi:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;anyAct&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Calendar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getInstance&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Calendar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;YEAR&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Desenvolupa un main() que demani a l'usuari les dades d'una persona
(incloent la de defunció si és el cas), construeixi una instància de
Persona amb aquestes dades i indiqui:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;si la persona és difunta: l'edat a la que va arribar&lt;/li&gt;
&lt;li&gt;si la persona està encara viva: l'edat actual&lt;/li&gt;
&lt;/ul&gt;
&lt;hr class="docutils" /&gt;
&lt;table class="docutils footnote" frame="void" id="xivato" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;Un &lt;em&gt;xivato&lt;/em&gt; és un missatge, normalment escrit per sortida
estàndard, que permet saber que s'ha passat per alguna línia de codi.&lt;/p&gt;
&lt;p&gt;Es tracta d'una pràctica senzilla i eficaç per realitzar proves de
codi quan no es disposa d'un depurador (o no es pot/vol fer
servir).&lt;/p&gt;
&lt;p&gt;Solen ser molt més efectius quan incorporen certa informació de
context. Per exemple, trobar-se:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;per aquí 1
per aquí 2
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;és molt menys informatiu vistós que un:&lt;/p&gt;
&lt;div class="last"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;XXX GatRenat.setVides(-12): entra amb vides inicials 7
XXX GatRenat.setVides(-12): surt amb vides finals 7
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="javafinalize" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si bé els objectes Java disposen del
mètode &lt;tt class="docutils literal"&gt;finalize()&lt;/tt&gt;, es tracta d'un mètode per especificar accions
de neteja i no per decidir quan una instància ha de ser alliberada.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="javagc" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;De fet si que podem fer una crida a
&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;Runtime.getRuntime().gc()&lt;/span&gt;&lt;/tt&gt; o &lt;tt class="docutils literal"&gt;System.gc()&lt;/tt&gt; què, com diu
l'especificació del mètode, &lt;em&gt;suggereix&lt;/em&gt; a la màquina virtual de
Java a dedicar esforços per recuperar la memòria disponible, tot i
que serà cridat de manera automàtica cada cop que la màquina
virtual ho trobi necessari.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:34:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:constructors-part-i.html</guid><category>java</category></item><item><title>Membres d'instància i de classe</title><link>http://apuntstecnics.herokuapp.com/membres-dinstancia-i-de-classe.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Tot i que habitualment els membres que definim a les nostres classes,
estan orientats a cada instància concreta de la classe, hi ha
ocasions en que ens cal disposar de mètodes o/i propietats que facin
referència a tota la classe i no a una instància concreta d'aquesta.&lt;/p&gt;
&lt;p&gt;En aquest document es discuteix aquesta possibilitat en forma de
membres d'instància i de classe.&lt;/p&gt;
&lt;p&gt;Com a &lt;em&gt;extra&lt;/em&gt; se li afegeix el concepte de &lt;em&gt;final&lt;/em&gt; què,
simplificant-ho molt, permet indicar que quelcom és constant.&lt;/p&gt;
&lt;p&gt;Es pressuposa que s'ha seguit els continguts de &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/classes-i-objectes.html"&gt;classes i objectes&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-metodes-de-classe"&gt;
&lt;h2&gt;Exercici 1. Mètodes de classe&lt;/h2&gt;
&lt;p&gt;Fins ara, tots els mètodes que hem programat depenien d'una instància
per a funcionar. Tots? Bé, potser només fins on hem estat conscients.&lt;/p&gt;
&lt;p&gt;Per cridar-los, ens calia indicar «referència a la instància».«nom del
mètode» o, des del codi d'un mètode de la classe també podíem
directament cridar el nom del mètode.&lt;/p&gt;
&lt;p&gt;Per exemple, a la classe Hora, el mètode d'incrementar un segon
requeria una instància d'hora a qui aplicar-lo. Dèiem&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;incrSeg&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ara bé, imagina que volguéssim comprovar que els valors d'una hora són
vàlids abans d'assignar-los a una instància de Hora. El mètode podria
ser quelcom semblant a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;esValida&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{...}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aquest mètode, però, no requeriria l'accés a l'estat de cap instància
de Hora, i amb qualsevol instància de Hora hauria de donar el mateix
resultat. Per a poder-lo usar, ens caldria, però, crear una instància
que probablement no la voldrem per res més. Per exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;esValida&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per a solucionar aquest tipus de situacions, la POO ens ofereix la
possibilitat de distingir mètodes de classe de mètodes d'instància.
Aquest de esValida() seria clarament un mètode de classe ja que no depèn
de cap instància per a ser executat.&lt;/p&gt;
&lt;p&gt;Java ens permet indicar que un mètode és de classe amb la paraula
reservada static. Així, el mètode &lt;tt class="docutils literal"&gt;esValida()&lt;/tt&gt; tindria el següent aspecte&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;esValida&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{...}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per a ser utilitzat, a banda de com abans, també podríem fer-ho d'una
manera més eficient amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;esValida&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que ara, en comptes de cridar al mètode des d'una instància, ho
fem directament a partir de la classe!&lt;/p&gt;
&lt;p&gt;Ara potser comença a tenir sentit la paraula &lt;tt class="docutils literal"&gt;static&lt;/tt&gt; del
&lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;, oi?&lt;/p&gt;
&lt;p&gt;En aquest exercici es demana que ampliïs la classe Hora amb els
mètodes estàtics:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean esValida(int, int, int)&lt;/tt&gt;: retorna true si i només sí les
hores, minuts i segons indicats, en aquest ordre, pels paràmetres,
corresponen a una combinació vàlida per una hora.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;int compareTo(Hora, Hora)&lt;/tt&gt;: retorna -1 si la primera hora és
menor que (anterior a) la segona, 0 si són iguals i 1 si la primera
és més gran que (posterior a) la segona.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;Hora duplica(Hora)&lt;/tt&gt;: retorna una nova instància de la classe Hora
amb els mateixos valors per les propietats de l'hora rebuda.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Aquest últim retorna una nova instància de Hora amb els mateixos
valors de la que rep.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-propietats-de-classe"&gt;
&lt;h2&gt;Exercici 2. Propietats de classe&lt;/h2&gt;
&lt;p&gt;Les propietats també poden ser de classe.&lt;/p&gt;
&lt;p&gt;Un dels exemples més típics és el de portar el comptador de quantes instàncies d'una classe s'han creat.&lt;/p&gt;
&lt;p&gt;Considera el següent codi, executa'l i intenta entendre el perquè de la sortida&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* Demostració d&amp;#39;ús de membres de classe */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;numInstancies&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// constructor per defecte incrementa el nombre d&amp;#39;instàncies&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;numInstancies&lt;/span&gt;&lt;span class="o"&gt;++;&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Creat un nou gat Renat. Ja van &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;numInstancies&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getNumInstancies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// retorna el nombre d&amp;#39;instàncies creades fins el moment&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;numInstancies&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Gat Renat amb &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Inicialment el nombre d&amp;#39;instàncies és: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNumInstancies&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="c1"&gt;// crea uns quants GatRenat per demostrar l&amp;#39;ús de membres estàtics&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="na"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;    &lt;span class="c1"&gt;// canviem les vides només per distingir-los&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Tenim: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; amb &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="na"&gt;getNumInstancies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; germanets&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="c1"&gt;// tornem a demanar a cadascun quants germans té&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;I si tornem a demanar-los quants germans tenen, ens diuen:&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; amb &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="na"&gt;getNumInstancies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; germanets&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Demostra que l'has entès realitzant la següent modificació al codi:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;cada gat haurà de tenir un número identificador que indiqui en quin
ordre va nàixer respecte els seus germans.&lt;/li&gt;
&lt;li&gt;Aquest identificador es podrà demanar (amb el mètode &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;get«X»()&lt;/span&gt;&lt;/tt&gt;),
però no modificar; i apareixerà a la cadena retornada pel mètode
&lt;tt class="docutils literal"&gt;toString()&lt;/tt&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Nota: la darrera crida a &lt;tt class="docutils literal"&gt;println()&lt;/tt&gt; es podria escriure més
simple, sense necessitat de cridar explícitament al mètode
&lt;tt class="docutils literal"&gt;toString()&lt;/tt&gt;. Considera:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; amb &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
    &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="na"&gt;getNumInstancies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; germanets&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;El mètode &lt;tt class="docutils literal"&gt;toString()&lt;/tt&gt; té la particularitat de ser cridat
(implícitament) en alguns contextos on s'espera un String, com ara en
aquesta concatenació de Strings que passem a &lt;tt class="docutils literal"&gt;println()&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-propietats-finals"&gt;
&lt;h2&gt;Exercici 3. Propietats finals&lt;/h2&gt;
&lt;p&gt;La paraula clau final pot ser aplicada a diferents elements.&lt;/p&gt;
&lt;p&gt;L'aplicació a classes té a veure amb el concepte d'herència que no es
tracta en aquest document.&lt;/p&gt;
&lt;p&gt;L'aplicació a mètodes sovint està també relacionada amb l'herència. Un
altre ús és per l'eficiència: el compilador pot substituir les crides
al mètode final pel seu codi (&lt;em&gt;inline call&lt;/em&gt;). Tot i que teòricament
Java sap quan ha de fer aquestes substitucions, es recomana només
indicar final per temes d'eficiència a mètodes molt breus o el codi
podria tornar-se massa gran. En aquestes primeres etapes
d'aprenentatge de la POO i de Java, no cal que ens preocupem d'aquest
tipus d'optimització.&lt;/p&gt;
&lt;p&gt;L'aplicació a paràmetres permet indicar que el paràmetre no pot
canviar el seu valor dins del codi (paràmetres &lt;em&gt;read-only&lt;/em&gt;) De la
mateixa manera, si indiquem que una variable és final, només li podrem
assignar valor un sol cop.&lt;/p&gt;
&lt;p&gt;L'aplicació a propietats permet indicar que la propietat només pot
rebre un valor un cop en tota l'execució. És una mena de constant de
la instància. En cas que hi afegim &lt;tt class="docutils literal"&gt;static&lt;/tt&gt;, la constant és de la
classe.&lt;/p&gt;
&lt;p&gt;També podem afegir &lt;em&gt;final&lt;/em&gt; a una variable. El comportament és el
mateix que amb les propietats: el compilador només permet assignar un
cop a la variable.&lt;/p&gt;
&lt;p&gt;Nota: en cas que la propietat o variable referenciï a una instància
mutable (que els valors de les seves propietats puguin ser
modificats), fer que la propietat/variable sigui final &lt;strong&gt;no&lt;/strong&gt;
converteix la instància referenciada en immutable, només impedeix que
la referència canviï a una altra instància. Per exemple:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;canviaI&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;canviaA&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;nova&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nova&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// error de compilació&lt;/span&gt;
                    &lt;span class="c1"&gt;// &amp;quot;error: cannot assign a value to final variable a&amp;quot;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Per a aquest exercici es demana que trobis una manera d'aplicar el
concepte de propietat final a la teva resposta del problema anterior.&lt;/p&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:33:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:membres-dinstancia-i-de-classe.html</guid><category>java</category></item><item><title>Relacions entre classes</title><link>http://apuntstecnics.herokuapp.com/relacions-entre-classes.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En la programació orientada a objectes, els programes es composen de
classes que interaccionen les unes amb les altres. Aquesta interacció
de les classes es realitza en funció de la relació que tenen aquestes
classes entre si.&lt;/p&gt;
&lt;p&gt;Aquest document explora aquestes relacions amb una excepció important,
&lt;em&gt;l'herència&lt;/em&gt;, que serà abordada en un altre document.&lt;/p&gt;
&lt;p&gt;Aquesta introducció es realitza de manera pràctica, a partir de
l'anàlisi de dos exercicis.&lt;/p&gt;
&lt;p&gt;Es pressuposa coneixement de creació i construcció de classes en
Java.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-el-picarol"&gt;
&lt;h2&gt;Exercici 1. El Picarol&lt;/h2&gt;
&lt;p&gt;Definició: Quan una classe A usa els serveis (membres públics) d'una
altra B, es diu que hi ha una &lt;em&gt;dependència&lt;/em&gt; entre la classe A i la B.
Quan B pateix algun canvi en la seva interfície, A podria requerir ser
modificat.&lt;/p&gt;
&lt;p&gt;Definició: Es diu que una classe A &lt;em&gt;agrega&lt;/em&gt; una classe B quan té una
dependència de B, de manera que l'existència de B és independent de la
de A. És a dir la instància de B pot ser creada abans que la de A i
&amp;quot;sobreviure&amp;quot; després de A. Es diu que A usa (uses-a) B&lt;/p&gt;
&lt;p&gt;Aquesta relació de dependència es coneix com a &lt;strong&gt;agregació&lt;/strong&gt;. En java,
s'implementa normalment amb una propietat de l'objecte agregat. En cas
d'haver de duplicar una instància de la classe A, les dues instàncies
farien referència a la mateixa instància de la classe B.&lt;/p&gt;
&lt;p&gt;Considera la classe Picarol que ofereix el servei (mètode) &lt;tt class="docutils literal"&gt;sona()&lt;/tt&gt;
que de moment, simplement escriu per pantalla el missatge
&amp;quot;clink-clink&amp;quot;.&lt;/p&gt;
&lt;p&gt;Ara el nostre gat Renat, si li pengem un picarol, cada cop que es
mogui (s'aixeca, seu o s'estira), farà sonar el picarol
amb independència de si el gat calla o parla.&lt;/p&gt;
&lt;p&gt;Es demana:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;implementa la classe Picarol amb el mètode &lt;em&gt;sona()&lt;/em&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;amplia la classe del gat Renat amb els següents mètodes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean tePicarol()&lt;/tt&gt;: cert si té un picarol assignat. Inicialment no en té.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;posaPicarol(Picarol)&lt;/tt&gt;: assigna un picarol. Si en tenia un, el
substitueix pel nou&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;Picarol treuPicarol()&lt;/tt&gt;: retorna el picarol i l'elimina. Si no en
tenia cap, retorna null.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;crea una nova versió de l'entorn operatiu del gat Renat, que
ofereixi les noves comandes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;posa&amp;#39;t picarol
treu-te picarol
tens picarol?
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En cas que ja tingui un picarol i li demanin posar-se un altre
respondrà amb &amp;quot;ja tinc picarol&amp;quot;. En canvi, si no en tenia i se li
demana treure'l dirà &amp;quot;no en tinc cap de picarol&amp;quot;. A la pregunta si té
picarol contestarà &amp;quot;sí&amp;quot; o &amp;quot;no&amp;quot; segons correspongui. Cal tenir present
que si Renat no pot parlar, en comptes d'aquests missatges dirà
l'habitual &amp;quot;...&amp;quot;.&lt;/p&gt;
&lt;p&gt;Crea un joc de proves que mostri el funcionament d'aquestes noves
funcionalitats així com el fet que sona quan el gat es mou.&lt;/p&gt;
&lt;p&gt;Atenció: el Gat Renat &lt;strong&gt;no&lt;/strong&gt; ha de ser responsable de crear la
instància de cap Picarol! És quelcom que els seus usuaris li donaran,
si ho estimen oportú.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-els-ulls-del-gat-renat"&gt;
&lt;h2&gt;Exercici 2. Els ulls del gat Renat&lt;/h2&gt;
&lt;p&gt;Definició: Es diu que una classe A es &lt;em&gt;composa&lt;/em&gt; d'una altra B quan
existeix una dependència de A a B com a l'agregació, però en aquest
cas, la instància de B està completament lligada a la de A. Es diu
també B forma part de A i que A té (has-a) B.&lt;/p&gt;
&lt;p&gt;Aquesta relació de dependència es coneix com &lt;strong&gt;composició&lt;/strong&gt;. En java,
la implementació és molt similar a la de la relació d'agregació: amb
una propietat. La diferència consisteix en el fet que la creació de la
instància (on es fa el new) és dins de la classe A. En cas que
haguéssim de duplicar una instància de la classe A, hauríem també de
duplicar la instància de la classe B.&lt;/p&gt;
&lt;p&gt;Implementa la classe UllDeGat. Un UllDeGat pot estar obert o tancat i
ofereix els mètodes &lt;tt class="docutils literal"&gt;obret()&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;tancat()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;boolean
estasObert()&lt;/tt&gt;. En obrir-se els ulls &lt;strong&gt;sempre&lt;/strong&gt; fa el soroll &amp;quot;nyeek&amp;quot; i
en tancar-se &lt;strong&gt;sempre&lt;/strong&gt; fa el soroll &amp;quot;plonx&amp;quot;. Evidentment, si demanem
obrir quan els ulls ja es troben oberts, no en farà res. Inicialment
l'ull estarà tancat per defecte i no farà soroll de tancament en
néixer.&lt;/p&gt;
&lt;p&gt;Amplia la classe GatRenat de manera que ara tingui &lt;strong&gt;dos&lt;/strong&gt; ulls. Els
ulls estaran oberts o tancats depenent de l'estat del gat. Si el gat
està dret, tots dos ulls estaran oberts. Si està assegut, l'ull dret
estarà obert i l'esquerre estarà tancat. Quan està estirat, tots dos
ulls estaran tancats. Per facilitar la prova, el gat sempre començarà
a obrir/tancar l'ull esquerre abans que el dret.&lt;/p&gt;
&lt;p&gt;Crea un joc de proves que tingui com a entrada el joc de proves
que vas crear quan l'entorn no considerava ni ulls ni picarol, i la
sortida quedi adaptada als sorolls dels ulls. El joc de proves hauria
de ser vàlid tan per l'entorn que considerava el picarol com per
l'anterior, sense requerir cap canvi en ambdós programes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="tot-plegat"&gt;
&lt;h2&gt;Tot plegat&lt;/h2&gt;
&lt;p&gt;Respecte les dues relacions que acabem de veure, considerarem que:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;la relació d'agregació es un tipus de relació feble entre dues
classes.&lt;/p&gt;
&lt;p&gt;Presenta les següents característiques:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;el component pot ser accedit directament sense que calgui passar
per la instància que l'agrega.&lt;/li&gt;
&lt;li&gt;el component pot sobreviure la instància que l'agrega.&lt;/li&gt;
&lt;li&gt;el mateix component podria ser agregat per més d'una instància&lt;/li&gt;
&lt;li&gt;la instància que agrega el component normalment no té
responsabilitats sobre aquest: per exemple, no sol ser
l'encarregada de crear-lo.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;la relació de composició és molt més forta que la d'agregació.&lt;/p&gt;
&lt;p&gt;Algunes característiques:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;la instància que conté el component, es considera &lt;em&gt;propietària&lt;/em&gt;
d'aquest.&lt;/li&gt;
&lt;li&gt;els component són elements (part) del propietari.&lt;/li&gt;
&lt;li&gt;el component forma part de l'estat del propietari. És a dir, un
canvi en l'estat del component resulta en un canvi d'estat del
composat.&lt;/li&gt;
&lt;li&gt;el component només pot ser accedit a partir del contenidor. Es diu
que el component està encapsulat pel propietari. Sovint, la classe
contenidora no ofereix mecanismes per obtenir el component (get),
especialment quan aquest sigui mutable.&lt;/li&gt;
&lt;li&gt;el temps de vida del component queda liminat al del propietari. És
a dir, quan desaparegui la instància del propietari, també ho farà
la del component.&lt;/li&gt;
&lt;li&gt;el propietari és responsable dels seus components: per exemple, el
crea.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-ampliacio-la-llista-dinamica-en-java"&gt;
&lt;h2&gt;Exercici 3. (ampliació) La llista dinàmica en Java&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Atencio&lt;/strong&gt;: Aquest és un exercici d'ampliació. Encara que opcional,
pot resultar molt interessant per a aquells estudiants que no hagin
pogut treballar amb memòria dinàmica de manera explícita (ex. amb el
llenguatge C)&lt;/p&gt;
&lt;p&gt;Implementa en Java la llista dinàmica vista a la secció &lt;strong&gt;Constructors
i Destructors&lt;/strong&gt; de la introducció als &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/constructors-part-i.html"&gt;constructors&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Et caldran tres classes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Node: tindrà dos propietats: &lt;em&gt;valor&lt;/em&gt; que per simplificar serà un
string, i &lt;em&gt;seguent&lt;/em&gt; que serà de tipus Node (sí, com la classe!) i
que per defecte valdrà null.&lt;/p&gt;
&lt;p&gt;La classe oferirà la possibilitat d'accedir a les dues propietats
(get/set) i inicialitzar-les totes dues, una o cap, en el moment de
la seva construcció.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Llista: tindrà una propietat: &lt;em&gt;primer&lt;/em&gt; de tipus Node que
inicialment apuntarà a null.&lt;/p&gt;
&lt;p&gt;Oferirà els mètodes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void afegir(int, String)&lt;/tt&gt;: afegeix un nou node a la posició de
la llista indicada pel primer paràmetre i el valor expressat pel
segon. En cas que la posició especificada sigui més gran que el
nombre d'elements a la llista, simplement es col·locarà el nou
element al final. Altrament, es desplaçaran convenientment tots
els nodes de la llista per fer encabir el nou a la posició
requerida.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void eliminar(int)&lt;/tt&gt;: elimina el node situat a la posició
indicada pel paràmetre. Si la posició és superior al nombre
d'elements de la llista, no fa res.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void elimina(String)&lt;/tt&gt;: elimina tots els nodes que el valor
coincideixi amb el del paràmetre. Si no hi ha cap, no fa res.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String toString()&lt;/tt&gt;: retorna una representació de la llista en
forma de String. Així, si la llista conté els valors &amp;quot;Hola&amp;quot;, &amp;quot;i&amp;quot;,
&amp;quot;adéu&amp;quot;, aquest mètode retornarà el String &amp;quot;[Hola -&amp;gt; i -&amp;gt; adéu]&amp;quot;. Si
està buida, retornarà simplement &amp;quot;[]&amp;quot;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;UsaLlista: disposarà d'un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que construirà una llista,
afegirà els valors &amp;quot;Hola&amp;quot;, &amp;quot;i&amp;quot;, adéu&amp;quot;, i després els eliminarà un a
un començant pel primer. A cada pas, mostrarà el contingut de la
llista per sortida estàndard. El resultat hauria de ser quelcom
molt similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;[]
[Hola]
[Hola -&amp;gt; i]
[Hola -&amp;gt; i -&amp;gt; adéu]
[i -&amp;gt; adéu]
[adéu]
[]
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-repte-les-urpes-del-gat-renat"&gt;
&lt;h2&gt;Exercici 4. (repte) Les Urpes del gat Renat&lt;/h2&gt;
&lt;p&gt;Et proposo aquest exercici d'ampliació dels conceptes que hem
treballat en aquest tema.&lt;/p&gt;
&lt;p&gt;Atenció: aquest problema és un &lt;strong&gt;repte&lt;/strong&gt;. La part més difícil és, com
sol passar, entendre el que es demana. Ah! Encara que ho sembli, no et
caldrà multifil (&lt;em&gt;multithread&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;Implementa la classe UrpesDeGat i modifica GatRenat segons el diagrama
de classes:&lt;/p&gt;
&lt;p&gt;El funcionament de UrpesDeGat és el següent:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Inicialment les urpes estan esmolades al 100% i s'estan desgastant&lt;/li&gt;
&lt;li&gt;Quan criden el servei esmola(), les urpes comencen a esmolar-se. El
màxim, és clar, és un 100%.&lt;/li&gt;
&lt;li&gt;Quan criden el servei desgasta(), les urpes comencen a
desgastar-se. El mínim, és clar, és un 0%&lt;/li&gt;
&lt;li&gt;Quan es demana el canvi a esmolant o desgastant, o bé quan es
demana el grau d'esmolat es recalcula el grau d'esmolament a partir
del temps que portava esmolant-se o desgastant-se des del darrer
recàlcul, i per cada 1 milisegon se li suma/resta un 1%
d'esmolament.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;El gat Renat tindrà urpes, és clar. I fixa't que ara el gat Renat
tindrà un nou estat possible (caminant). Quan el gat estigui en un
estat que no sigui caminant, les seves urpes estaran desgastant-se i,
quan estigui caminant, en canvi, les urpes estaran esmolant-se. En cas
que les urpes estiguin totalment desgastades, el gat Renat deixarà de
fer-nos cas a les ordres de canvi d'estat i es posarà a caminar fins
que el grau d'esmolament sigui al menys 20%.&lt;/p&gt;
&lt;p&gt;Prova la nova versió del gat Renat amb el seu entorn operatiu, tot
realitzant els canvis que consideris oportuns per a mostrar les noves
funcionalitats.&lt;/p&gt;
&lt;p&gt;Com a pista/ajut per a treballar aquest exercici, considera el següent
codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* Demostració d&amp;#39;ús del temps */&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Calendar&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;momentNaixement&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// ens guardem el moment del naixement&lt;/span&gt;
        &lt;span class="n"&gt;momentNaixement&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Calendar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getInstance&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getTimeInMillis&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="c1"&gt;// ens esperem una estoneta perquè es pensin que costa molt crear un gat&lt;/span&gt;
        &lt;span class="n"&gt;esperatUnaEstona&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;esperatUnaEstona&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// fa que el programa es detengui una estona pseudoaleatòria&lt;/span&gt;
        &lt;span class="c1"&gt;// De moment, no cal que intentis entendre com ho fa això&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;tempsEspera&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;random&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;lang&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Thread&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sleep&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tempsEspera&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;InterruptedException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="nf"&gt;getTempsViu&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// retorna el nombre de milisegons que porta viu&lt;/span&gt;
        &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;actual&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Calendar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getInstance&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getTimeInMillis&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;actual&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;momentNaixement&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Gat Renat amb &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides.  Porta viu &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getTempsViu&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; milisegons&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// crea uns quants GatRenat per demostrar com passa el temps&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="na"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="c1"&gt;// tornem a veure el temps que porten vius&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;I si tornem mirar:&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:32:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:relacions-entre-classes.html</guid><category>java</category></item><item><title>Herència</title><link>http://apuntstecnics.herokuapp.com/herencia.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Si es pregunta pel concepte més &lt;em&gt;representatiu&lt;/em&gt; de la programació
orientada a objectes, amb pocs dubtes sortiria el d'&lt;strong&gt;herència&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Ja hem vist un parell de relacions entre classes: &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/relacions-entre-classes.html"&gt;la agregació i la
composició&lt;/a&gt;. L'herència és una
altra relació de dependència entre dues classes.&lt;/p&gt;
&lt;p&gt;Aquest document introdueix el concepte d'herència i explora algunes de
les repercussions més visibles en la programació orientada a objectes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="l-herencia"&gt;
&lt;h2&gt;L'herència&lt;/h2&gt;
&lt;p&gt;Què tenen en comú en Renat, el Garfield, el Misifú, i en Tom (company
del Jerry)? Doncs tots ells tenen quatre potes amb urpes i ullals,
miolen, respiren, mengen sardines, empaiten ratolins... en definitiva:
són gats.&lt;/p&gt;
&lt;p&gt;I, què tenen en comú els gats, els gossos i els ratolins? Doncs que
respiren, mengen... en definitiva: són animals. Però també són éssers
vius, mamífers terrestres, de sang calenta, amb endoesquelet...&lt;/p&gt;
&lt;p&gt;Cadascuna de les diferents categories (classes) a les que pertany en
Renat, li ofereix un conjunt de característiques. En Renat hereta
necessitat de menjar per ser ésser viu, de respirar per ser animal, un
esquelet intern per ser un animal amb endoesquelet, urpes i ullals per
ser felí, etc.&lt;/p&gt;
&lt;p&gt;Diem que Renat és un gat (is-a). I com que els gats són felins, en
Renat és un felí. I com que els felins són animals, en Renat és un
animal. És a dir, la relació is-a és transitiva:&lt;/p&gt;
&lt;blockquote&gt;
Si A és subclasse de B, i B és subclasse de C, llavors A és subclasse de C&lt;/blockquote&gt;
&lt;p&gt;El següent diagrama mostra una jerarquia &lt;em&gt;parcial&lt;/em&gt; dels animals.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Jerarquia d'animals" src="http://apuntstecnics.herokuapp.com/images/poo011.img001.jerarquia_animals.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Al diagrama, les &lt;em&gt;caixes&lt;/em&gt; amb nom representen classes, mentre que les
fletxetes (totes amb nom &lt;em&gt;és un&lt;/em&gt;) representen la relació d'herència
entre dues classes. La classe d'on parteix la fletxa és la que hereta
de la classe destinació de la fletxa.&lt;/p&gt;
&lt;p&gt;Quan una classe A hereta d'una classe B, es diu que:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;A és un B&lt;/li&gt;
&lt;li&gt;A estén B&lt;/li&gt;
&lt;li&gt;A especialitza a B&lt;/li&gt;
&lt;li&gt;A concreta B&lt;/li&gt;
&lt;li&gt;B generalitza a A&lt;/li&gt;
&lt;li&gt;A és subclasse de B&lt;/li&gt;
&lt;li&gt;B és superclasse d'A&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Al diagrama veiem també casos en que una classe estén més d'una
superclasse. Per exemple, els felins són a l'hora carnívors i
mamífers.  Això permet que un felí tingui a l'hora característiques de
Carnívor (ex. menja carn), i a l'hora les de mamífer (ex. alleta les
seves cries).&lt;/p&gt;
&lt;p&gt;D'aquesta possibilitat de disposar de més d'una superclasse pertanyent
a jerarquies diferents, se'n diu &lt;em&gt;herència múltiple&lt;/em&gt; i es produeix
quan :&lt;/p&gt;
&lt;blockquote&gt;
A estén B i A estén C però B no estén C ni C estén B&lt;/blockquote&gt;
&lt;p&gt;Així, tenim que els gats són a l'hora mamífers i carnívors (per ser
felins). El diagrama ens mostra que els gossos són també mamífers i
carnívors, però no són felins. Això explica que, com els gats, mengin
carn (per ser carnívors) i alletin les seves cries (per ser mamífers)
però, a diferència dels gats, no tinguin urpes (per no ser felins).
Això exemplifica el fet que cada classe dins la jerarquia afegeix
característiques particulars a les seves subclasses.&lt;/p&gt;
&lt;div class="section" id="herencia-a-java"&gt;
&lt;h3&gt;Herència a Java&lt;/h3&gt;
&lt;p&gt;En el cas concret de Java:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;Indica l'especialització amb la paraula clau extends.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Renat&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;No admet herència múltiple: cada classe pot ser (i de fet és) només
subclasse d'una única classe &lt;a class="footnote-reference" href="#javainterfaces" id="id1"&gt;[3]&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Al final de la jerarquia, la classe més general és &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quan no s'indica res, en definir una classe, estén per defecte
&lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;. És a dir, és equivalent definir:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Gat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;que definir-ho com:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Gat&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;Object&lt;/tt&gt; aporta una sèrie de característiques a totes les classes de
java, per exemple, el mètode toString(). Mireu la descripció
completa dels membres d'&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html"&gt;Object&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="visualitzacio-del-concepte-d-extensio"&gt;
&lt;h3&gt;Visualització del concepte d'extensió&lt;/h3&gt;
&lt;p&gt;La interfície pública d'una classe està formada per tots els membres
públics que defineix la classe, més tots els membres públics
&lt;a class="footnote-reference" href="#protected" id="id2"&gt;[7]&lt;/a&gt; que hereta.&lt;/p&gt;
&lt;p&gt;Considerem el següent diagrama:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="herència" src="http://apuntstecnics.herokuapp.com/images/poo011.img002.herencia.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Veiem que la classe Felí defineix els membres &lt;em&gt;mf1&lt;/em&gt; i &lt;em&gt;mf2&lt;/em&gt;.  Aquests
membres, en virtut de la relació d'herència, queden inclosos entre els
membres de Gat i de Pantera. Així Gat disposa dels membres que
defineix &lt;em&gt;mg1&lt;/em&gt; i &lt;em&gt;mg2&lt;/em&gt;, més els heretats &lt;em&gt;mf1&lt;/em&gt; i &lt;em&gt;mf2&lt;/em&gt;. És clar, Gat no
disposa dels membres definits per altes subclasses de Felí, com ara el
&lt;em&gt;mp1&lt;/em&gt; que defineix Pantera, tot i que comparteix amb aquesta els membres
de Felí.&lt;/p&gt;
&lt;p&gt;Finalment, Renat, en ser un Gat disposa dels membres &lt;em&gt;mr1&lt;/em&gt;, &lt;em&gt;mr2&lt;/em&gt;
(propis), més &lt;strong&gt;tots&lt;/strong&gt; els de Gat (&lt;em&gt;mg1&lt;/em&gt;, &lt;em&gt;mg2&lt;/em&gt;, &lt;em&gt;mf1&lt;/em&gt; i &lt;em&gt;mf2&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;El diagrama permet visualitzar gràficament el concepte d'extensió
d'una classe. Gat estén els membres de Felí amb els membres propis. És
a dir, Gat inclou &lt;em&gt;tota&lt;/em&gt; la definició de Felí, i a més a més, estén
aquesta amb nous continguts.&lt;/p&gt;
&lt;p&gt;Concretem una mica. Suposem que disposem de les següents
definicions de classe:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Feli&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Menjar&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Nyam Nyam &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Gat&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Feli&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;miola&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;MEEEEEEU&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaGat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;miola&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Menjar&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En aquest exemple podem observar com, des de la classe &lt;em&gt;UsaGat&lt;/em&gt; podem
accedir a un membre de &lt;em&gt;Gat&lt;/em&gt; (el mètode &lt;em&gt;menja()&lt;/em&gt;) que no ha estat
definit a &lt;em&gt;Gat&lt;/em&gt; sinó a la seva superclasse &lt;em&gt;Feli&lt;/em&gt;. Fixem-nos en que
l'accés a un mètode heretat de &lt;em&gt;Gat&lt;/em&gt; des de &lt;em&gt;UsaGat&lt;/em&gt; és idèntic a
l'accés a un mètode definit per &lt;em&gt;Gat&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="comportaments-especifics"&gt;
&lt;h3&gt;Comportaments específics&lt;/h3&gt;
&lt;p&gt;El fet que una subclasse hereti tots els membres d'una superclasse no
vol dir que la subclasse s'hagi de comportar exàctament igual que la
superclasse a l'hora d'executar els serveis que hereta.&lt;/p&gt;
&lt;p&gt;Per exemple, el nostre amic Renat és un gat molt especial. Només menja
després de netejar-se les urpes. Suposem que Renat hereta els mètodes
&lt;tt class="docutils literal"&gt;void menja(Menjar)&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;void netejaUrpes()&lt;/tt&gt;. Així el codi
(parcial) tindria el següent aspecte:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;extens&lt;/span&gt; &lt;span class="n"&gt;Feli&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Menjar&lt;/span&gt; &lt;span class="n"&gt;menjar&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;netejaUrpes&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Menjar&lt;/span&gt; &lt;span class="n"&gt;menjar&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;netejaUrpes&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;menjar&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixem-nos que, si Renat no fa res diferent amb el mètode
&lt;em&gt;netejaUrpes()&lt;/em&gt;, no cal que el torni a definir. Tota instància de
GatRenat, en ser cridat el mètode &lt;em&gt;netejaUrpes()&lt;/em&gt; executarà
directament el mètode de la superclasse de GatRenat. En aquest cas
Gat. Podria passar, com de fet passa en aquest exemple, que Gat heretés
aquest mètode de la seva superclasse Felí. Cap problema els membres de
la superclasse de la meva superclasse, són també els meus membres!&lt;/p&gt;
&lt;p&gt;En canvi, en definir el mètode &lt;em&gt;menja(Menjar)&lt;/em&gt;, qualsevol crida
que es faci a una instància de GatRenat cridarà aquest mètode i no el
de Gat!&lt;/p&gt;
&lt;p&gt;Anem a analitzar el codi de &lt;tt class="docutils literal"&gt;GatRenat.menja(Menjar)&lt;/tt&gt;. La
primera instrucció és una crida a un mètode &amp;quot;propi&amp;quot;. Bé,
&lt;tt class="docutils literal"&gt;netejaUrpes()&lt;/tt&gt; no és un mètode definit per GatRenat. Amb tot, com
que l'hereta, el pot considerar com seu. Fins i tot podria cridar-lo
amb un &lt;tt class="docutils literal"&gt;this.netejaUrpes()&lt;/tt&gt;!.&lt;/p&gt;
&lt;p&gt;Per poder accedir a membres de la superclasse no cal que fem res
especial. Podem accedir-hi com si haguessin estat declarats a la
subclasse &lt;a class="footnote-reference" href="#superprivat" id="id3"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;No passa el mateix amb la segona instrucció. La idea que volem
implementar és que, quan s'ha netejat les urpes, Renat menja com ho
faria qualsevol altre gat.  No pot cridar directament, però, al mètode
&lt;tt class="docutils literal"&gt;menja(Menjar)&lt;/tt&gt;, perquè altrament estaria fent una crida al
mètode que està redefinint.  En aquest cas seria una crida recursiva
que acabaria d'una manera poc dessitjable (amb la pila d'execució
plena i el gat sense arribar a menjar!)&lt;/p&gt;
&lt;p&gt;El problema és que el mètode &lt;tt class="docutils literal"&gt;menja(Menjar)&lt;/tt&gt; heretat pel
GatRenat, ha quedat &lt;em&gt;ocultat&lt;/em&gt; per la nova definició del mètode a dins
de GatRenat.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="ocultacio-i-redefinicio"&gt;
&lt;h3&gt;Ocultació i redefinició&lt;/h3&gt;
&lt;p&gt;El cas d'ocultació (&lt;em&gt;hidding&lt;/em&gt;) ja ens l'hem trobat. Per exemple,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest exemple, la propietat &lt;tt class="docutils literal"&gt;vides&lt;/tt&gt; queda amagada pel paràmetre
amb el mateix nom. La paraula clau &lt;tt class="docutils literal"&gt;this&lt;/tt&gt; ens permet accedir a la
propietat.&lt;/p&gt;
&lt;p&gt;En el cas del mètode &lt;tt class="docutils literal"&gt;menja(Menjar)&lt;/tt&gt; l'ocultació correspon a
una redefinició del mètode que es coneix també com &lt;em&gt;overriding&lt;/em&gt;
&lt;a class="footnote-reference" href="#overridingoverwriting" id="id4"&gt;[2]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Per a accedir des de la subclasse, a membres de la superclasse
redefinits (&lt;em&gt;overrided&lt;/em&gt;) fem servir la paraula clau &lt;tt class="docutils literal"&gt;super&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;De fet, podríem fer servir &lt;tt class="docutils literal"&gt;super&lt;/tt&gt; per a accedir a membres &lt;em&gt;no&lt;/em&gt;
redefinits de la superclasse, de la mateixa manera que podem fer
servir opcionalment el &lt;tt class="docutils literal"&gt;this&lt;/tt&gt; per a referenciar membres pròpis quan
el nom no ha estat ocultat pel d'un paràmetre o variable local.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;      &lt;span class="c1"&gt;// redefinició de m()&lt;/span&gt;
        &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="c1"&gt;// no cal començar amb super, que no és un constructor!&lt;/span&gt;
        &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;

        &lt;span class="c1"&gt;// puc cridar a f() de diferents maneres&lt;/span&gt;
        &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;f&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;f&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;

        &lt;span class="c1"&gt;// però...&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;       &lt;span class="c1"&gt;// és una crida recursiva! compte!&lt;/span&gt;
        &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;            &lt;span class="c1"&gt;// li passa el mateix que a l&amp;#39;anterior!&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="l-herencia-no-permesa"&gt;
&lt;h3&gt;L'herència no permesa&lt;/h3&gt;
&lt;p&gt;De vegades ens pot interessar que una classe no permeti tenir
subclasses. Això pot passar, per exemple, quan la nostra classe és
immutable (el valor de les seves propietats es manté des de
l'assignació). No voldrem que una subclasse pugui permetre perdre
aquesta condició d'immutabilitat.&lt;/p&gt;
&lt;p&gt;Això, que pot semblar una mica estrany si no coneixem el concepte de
&lt;em&gt;polimorfisme&lt;/em&gt;, és quelcom que ha preocupat suficientment als
desenvolupadors de classes com String, com per voler trobar una manera
d'evitar-ho.&lt;/p&gt;
&lt;p&gt;Evitar-ho és molt simple: declares la classe &lt;em&gt;final&lt;/em&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// error de compilació&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Per cert, també pots fer que no es pugui redefinir un mètode de la
mateixa manera: fent-lo &lt;em&gt;final&lt;/em&gt;. Això pot repercutir en una certa
millora d'eficiència en alguns casos (generalment també relacionats
amb el polimorfisme)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="l-herencia-no-desitjada"&gt;
&lt;h3&gt;L'herència no desitjada&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Nota&lt;/strong&gt;: aquesta secció és opcional en una primera visita a la POO.
És perfectament raonable que te la saltis.&lt;/p&gt;
&lt;p&gt;De vegades pot passar que heretem coses que no volem.&lt;/p&gt;
&lt;p&gt;Considera per exemple el cas de l'ornitorinc. Es tracta d'un mamífer.
Sí, té un aspecte una mica... peculiar com es pot començar a apreciar
a la foto &lt;a class="footnote-reference" href="#ornitorinc" id="id5"&gt;[4]&lt;/a&gt;. Aquest animaló d'Australia fa servir ous per
reproduir-se, és verinós, té bec d'ànec, cua de castor i potes de
llúdria. Ah!  l'alletament de les cries es realitza a través de porus
a la pell en comptes de fer servir mamelles, no fos que semblés normal
en alguna cosa... Amb tot, no és una mena de &lt;em&gt;pokemon&lt;/em&gt; sinó què és
real i...  és un mamífer!.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="L'ornitorinc" src="http://apuntstecnics.herokuapp.com/images/poo011.img003.ornitorinc.png" /&gt;
&lt;/div&gt;
&lt;p&gt;És clar, si tens una classe Mamífer ben construïda per la &lt;strong&gt;immensa&lt;/strong&gt;
majoria dels mamífers, probablement l'ornitorinc la posarà molt a
prova!&lt;/p&gt;
&lt;p&gt;Tornem a la POO. Què fem quan heretem un membre que no ens interessa
oferir? Si hem de ser puristes, ens hauríem de replantejar tota la
jerarquia de classes. Com que això no sempre és possible, des de Java
ens queden poques opcions.&lt;/p&gt;
&lt;p&gt;Si el membre heretat era una propietat pública, la podem ocultar
creant una nova propietat a la subclasse amb el mateix nom i
visibilitat privada. Ara tindrem dues còpies de la propietat però al
menys no serà accessible, i si accedim a la instància considerant-la
de la superclasse &lt;a class="footnote-reference" href="#polimorfisme" id="id6"&gt;[6]&lt;/a&gt; encara hi accedirem a la propietat
heretada!&lt;/p&gt;
&lt;p&gt;Si és un mètode públic, no podem fer el mateix que amb una propietat,
perquè l'estem redefinint amb una visibilitat més restrictiva i el
compilador ens retornarà l'error &lt;tt class="docutils literal"&gt;attempting to assign weaker access
privileges; was public&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;El que farem serà:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;documentar a la nostra classe que el membre heretat no es suporta.&lt;/li&gt;
&lt;li&gt;ocultar el membre heretat amb una versió pròpia&lt;/li&gt;
&lt;li&gt;fer que el cos del mètode redefinit llenci l'excepció
&lt;tt class="docutils literal"&gt;UnsuportedOperationException&lt;/tt&gt;. &lt;a class="footnote-reference" href="#excepcions" id="id7"&gt;[5]&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;És a dir, avisarem als desenvolupadors que vulguin fer servir la
nostra classe, que el mètode no està suportat, i en cas que tot i
així l'intentin fer servir, farem que en executar el seu codi se
n'adonin que anàvem seriosament.&lt;/p&gt;
&lt;p&gt;Atenció: aquestes mesures tindran repercussions desagradables si la
nostra classe es fa servir en un context &lt;em&gt;polimòrfic&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-la-classe-gat"&gt;
&lt;h3&gt;Exercici 1. La classe Gat&lt;/h3&gt;
&lt;p&gt;Desenvolupa la classe Gat que contingui tota la funcionalitat de la
classe Renat amb ulls, i que a més permeti definir el nom del gat de
cada instància.&lt;/p&gt;
&lt;p&gt;La classe Gat disposarà del mètode &lt;tt class="docutils literal"&gt;String comEtDius()&lt;/tt&gt; que ens
retornarà el seu nom. No es permetrà crear-ne cap instància sense
nom! (Pista: constructor)&lt;/p&gt;
&lt;p&gt;Finalment, per provar la classe Gat executem el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Descripció: Classe que comprova el funcionament de classe Gat&lt;/span&gt;
&lt;span class="cm"&gt; * Crea tants gats com li ho indiquin els paràmetres de la línia&lt;/span&gt;
&lt;span class="cm"&gt; * de comandes, els pregunta com estan i el seu nom, i mostra els&lt;/span&gt;
&lt;span class="cm"&gt; * resultats per pantalla.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Vector&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaGat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Provador de gats&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;llistaDeGats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="c1"&gt;// crea la llista de gats passats per paràmetre&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;llistaDeGats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hem creat &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;llistaDeGats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;size&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;llistaDeGats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;size&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; gat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; gats&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;llistaDeGats&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;comEtDius&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;estat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getEstatComString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; diu que està &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;estat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Ara el Garbage Collector acabarà amb tots els gats. Ha Ha Ha!&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Executant-lo amb l'ordre&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java UsaGat RenatJR Misifú Garfield &amp;gt; sortida.out
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ens haurà de generar el següent contingut dins del fitxer
&lt;tt class="docutils literal"&gt;sortida.out&lt;/tt&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Provador de gats
RenatJR: he nascut
Misifú: he nascut
Garfield: he nascut
Hem creat 3 gats
El gat RenatJR diu que està estirat
El gat Misifú diu que està estirat
El gat Garfield diu que està estirat
Ara el Garbage Collector acabarà amb tots els gats. Ha Ha Ha!
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nota: el tipus Vector&amp;lt;Gat&amp;gt; és un vector de gats. Pots trobar
l'especificació dels mètodes de la classe &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; a la documentació
oficial de la API de Java. Tot i que la notació pot semblar-te una
mica confosa, simplement està dient que el vector és de gats i no de
cap altra classe. Considera l'exemple com a introducció al concepte de
&lt;em&gt;genèrics&lt;/em&gt; que treballarem posteriorment.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-el-gat-renat-es-un-gat"&gt;
&lt;h3&gt;Exercici 2. El gat Renat és un Gat&lt;/h3&gt;
&lt;p&gt;Modifica la classe GatRenat de manera que ara sigui una subclasse de Gat.&lt;/p&gt;
&lt;p&gt;Copia literalment el programa de l'exercici de l'entorn del Gat Renat
que funcionava amb el gat Renat amb ulls i fes les proves
corresponents. Ho hauràs fet bé si tot funciona i no has hagut de
modificar de cap manera el codi de l'entorn.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-qui-miola"&gt;
&lt;h3&gt;Exercici 3. Qui miola?&lt;/h3&gt;
&lt;p&gt;Ja sabem que el nostre amic Renat és especial en moltes coses. Una
d'elles és a l'hora de miolar. En comptes de fer &amp;quot;MEEEEEEU&amp;quot; com tots els
gats, en Renat fa &amp;quot;MARRAMEEEEEEU&amp;quot;.&lt;/p&gt;
&lt;p&gt;Desenvolupa un nou programa anomenat &lt;em&gt;Mioladors&lt;/em&gt; que creï una instància
del gat Renat i una altra d'un gat genèric anomenat &lt;em&gt;Misifú&lt;/em&gt;
(assegura't que poden parlar).&lt;/p&gt;
&lt;p&gt;Un cop creats, el programa cridarà al mètode &lt;tt class="docutils literal"&gt;miola()&lt;/tt&gt; de tots dos
gats de manera que la sortida indiqui el nom del gat i el resultat de
miolar.&lt;/p&gt;
&lt;p&gt;Respon amb un comentari dins del codi de &lt;em&gt;Mioladors&lt;/em&gt; el perquè de la
sortida de cada crida al &amp;quot;mateix&amp;quot; mètode.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-l-amic-garfield"&gt;
&lt;h3&gt;Exercici 4. L'amic Garfield&lt;/h3&gt;
&lt;p&gt;Al gat Renat li ha sorgit un competidor: l'amic Garfield. En Garfield
és també un gat però afegeix el mètode &lt;tt class="docutils literal"&gt;fesEntremaliadures()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Per no embolicar-la massa, les entremaliadures del Garfield
consistiran en dir una paraulota a escollir aleatòriament d'una llista
de com a mínim 10 elements.&lt;/p&gt;
&lt;p&gt;Crea una nova versió de l'entorn operatiu del gat Renat que permeti
gestionar tant el Renat com el Garfield. Evidentment només permetrà
demanar fer entremaliadures al Garfield.&lt;/p&gt;
&lt;p&gt;L'entorn simplement crearà una instància dels dos gat i les comandes
es prefixaran amb el nom del gat en qüestió.&lt;/p&gt;
&lt;p&gt;Per exemple, si es vol que s'aixequi Garfield, escriurem:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Garfield aixeca&amp;#39;t
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Mentre que si el que volem és que calli Renat, ho especificarem amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Renat calla
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pista: pel tema de les paraulotes, considera el següent codi&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Random&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
 &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaRandom&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;Random&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Random&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
             &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;abs&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nextInt&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
             &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
         &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;hr class="docutils" /&gt;
&lt;p&gt;Notes:&lt;/p&gt;
&lt;table class="docutils footnote" frame="void" id="superprivat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Des d'una classe podem accedir directament a un
membre de la seva superclasse, sempre i quan aquest no hagi estat
redefinit a la subclasse (&lt;em&gt;overrided&lt;/em&gt;) ni hagi estat definit a la
superclasse com a &lt;tt class="docutils literal"&gt;private&lt;/tt&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="overridingoverwriting" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;De vegades, trobarem que en comptes d' &lt;em&gt;overriding&lt;/em&gt;
es refereixen a aquest concepte com a &lt;em&gt;overwriting&lt;/em&gt;. La diferència pot ser
subtil, però existeix. Es diu que quelcom &lt;em&gt;overwrites&lt;/em&gt; una altra cosa quan la
reemplaça completament de manera que ja deixi d'existir la reemplaçada. Podríem
fer servir com a sinònim el terme &lt;em&gt;reemplaça&lt;/em&gt;. Quan la substitució d'una cosa
per una altra té només efecte en alguns casos i no en tots (és a dir, hi ha
casos en que encara es podria fer servir l'anterior) llavors es parla d'
&lt;em&gt;overriding&lt;/em&gt;. En el cas concret en que una subclasse redefineix un mètode que
hereda de la superclasse, la definició original del mètode de la superclasse
encara és usable per altres subclasses que no l'hagin redefinit.&lt;/p&gt;
&lt;p class="last"&gt;Com a traducció podríem fer servir &lt;em&gt;sobreescriure&lt;/em&gt; per &lt;em&gt;overwrite&lt;/em&gt; i
i &lt;em&gt;anteposar&lt;/em&gt; per &lt;em&gt;override&lt;/em&gt;.&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="javainterfaces" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;Java no ofereix herència múltiple per evitar
certs problemes que hi apareixen quan es permet heredar de
múltiples superclasses. Els curiosos podeu cercar el concepte del
&lt;em&gt;Deadly Diamond of Death&lt;/em&gt; per exemple a
&lt;a class="reference external" href="http://es.wikipedia.org/wiki/Problema_del_diamante"&gt;http://es.wikipedia.org/wiki/Problema_del_diamante&lt;/a&gt;&lt;/p&gt;
&lt;p class="last"&gt;Java ofereix, però, un altre mecanisme anomenat &lt;em&gt;interface&lt;/em&gt; que
permet heredar &lt;em&gt;contractes&lt;/em&gt; o signatures de mètodes de múltiples
fonts.&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="ornitorinc" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Foto obtinguda de &lt;a class="reference external" href="http://commons.wikimedia.org"&gt;Wikimedia commons&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="excepcions" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id7"&gt;[5]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si encara no coneixes les excepcions, no t'amoïnis,
que arribaran aviat.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="polimorfisme" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id6"&gt;[6]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Estudiarem més endavant, el concepte de polimorfisme.
En poques paraules, és la possibilitat de fer servir una instància
considerant-la d'un tipus diferent del que és (per exemple, com la
seva superclasse)&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="protected" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[7]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Per ser precisos, hereta tots els mèmbres no privats
de la superclasse. Aquesta puntualització tindrà més sentit quan
coneguem el concepte de &lt;em&gt;visibilitat&lt;/em&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:31:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:herencia.html</guid><category>java</category></item><item><title>Constructors (part II)</title><link>http://apuntstecnics.herokuapp.com/constructors-part-ii.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document és una breu recapitulació dels constructors en java.&lt;/p&gt;
&lt;p&gt;Tots els continguts d'aquest document ja han aparegut en altres
documents, especialment a la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/constructors-part-i.html"&gt;primera part de constructors&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="constructors"&gt;
&lt;h2&gt;Constructors&lt;/h2&gt;
&lt;p&gt;Un constructor és un tipus especial de bloc de codi que en programació
orientada a objectes és cridat la creació d'una nova instància d'una
classe, i que té la funció de preparar la instància per a ser
utilitzada.&lt;/p&gt;
&lt;div class="section" id="definicio-de-constructors"&gt;
&lt;h3&gt;Definició de constructors&lt;/h3&gt;
&lt;p&gt;Per a definir un constructor en Java, hem de crear una &lt;em&gt;mena&lt;/em&gt; de
mètode amb les següents particularitats:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;la signatura del &amp;quot;mètode&amp;quot; no ha d'especificar cap tipus de retorn, ni
tant sols &lt;tt class="docutils literal"&gt;void&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;el nom del &amp;quot;mètode* ha de coincidir amb el de la classe.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En podem crear zero o més constructors per una classe, amb
independència de la seva visibilitat (ex. públics o privats)&lt;/p&gt;
&lt;p&gt;Un exemple de creació de constructors pot ser:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;        &lt;span class="c1"&gt;// una propietat per a il·lustrar la&lt;/span&gt;
                            &lt;span class="c1"&gt;// inicialització amb constructors&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;B&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;            &lt;span class="c1"&gt;// definició d&amp;#39;un constructor sense paràmetres&lt;/span&gt;
        &lt;span class="n"&gt;val&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;     &lt;span class="c1"&gt;// un altre constructor&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;val&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;     &lt;span class="c1"&gt;// incialització de la propietat&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;sval&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="c1"&gt;// i un altre&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;val&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sval&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Com qualsevol altre mètode, el constructor pot ser sobrecarregat
(&lt;em&gt;overloaded&lt;/em&gt;). La única condició és que la llista de tipus dels
arguments ha de ser diferent a cada constructor.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="us-de-constructors"&gt;
&lt;h3&gt;Ús de constructors&lt;/h3&gt;
&lt;p&gt;En Java, la creació d'una nova instància la realitzem mitjançant
l'expressió &lt;tt class="docutils literal"&gt;new &lt;span class="pre"&gt;«Constructor»(«args»)&lt;/span&gt;&lt;/tt&gt; on «Constructor» coincideix
amb el nom de la classe i «args» corresponen als valors
d'inicialització (de vegades no hi ha cap).&lt;/p&gt;
&lt;p&gt;El resultat d'aquesta expressió és una referència a la nova instància
acabada de crear. Sovint aquest resultat és assignat a una variable
del mateix tipus (classe) que a la que pertany el constructor. Ex.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;De vegades pot passar que no ens interessi guardar la referència a la
instància, sinó que només estiguem interessats en executar algun
mètode i després oblidar-nos-en.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaA&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;    &lt;span class="c1"&gt;// executa el mètode i &amp;quot;oblida&amp;quot; la instància&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fins i tot, pot ser que la instància només ens interessi per passar-li a
algun altre objecte.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaB&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;   &lt;span class="c1"&gt;// passa al constructor de B una nova instància d&amp;#39;A&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Per finalitzar, també és possible fer tot això en qualsevol context que
esperi una instància d'una superclasse de la classe del constructor.
Aquest punt es considera amb molt més detall en el tema de
&lt;a class="reference external" href="poo013.polimorfisme.rst"&gt;polimorfisme&lt;/a&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaB&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixat que al mètode f() de UsaB es crea una instància de B i se li
assigna a una referència de tipus A.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="constructor-per-defecte"&gt;
&lt;h3&gt;Constructor per defecte&lt;/h3&gt;
&lt;p&gt;Al constructor sense paràmetres se li anomena sovint &lt;em&gt;constructor per
defecte&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Si definim una classe sense explicitar cap constructor, Java ens
crearà el constructor per defecte. Per exemple, considerem la classe:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aquest codi és equivalent a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;B&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixem-nos que el constructor no defineix cap instrucció dins del seu cos.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="this"&gt;
&lt;h3&gt;this()&lt;/h3&gt;
&lt;p&gt;Per referir-nos al constructor de la nostra instància podem fer servir
la instrucció:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;On «args» és la llista d'arguments que passem al constructor (pot ser
cap).&lt;/p&gt;
&lt;p&gt;Hem de complir però una condició: la crida a &lt;tt class="docutils literal"&gt;this()&lt;/tt&gt; només pot
estar a la primera línia del cos d'un constructor.&lt;/p&gt;
&lt;p&gt;Aquesta possibilitat ens permet reaprofitar el codi entre
constructors. Per exemple, suposem que tenim una classe que ofereix la
possibilitat d'inicialitzar una o més propietats, mentre que la resta
queden amb valors per defecte.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;enter&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;caracter&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;A&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;A&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;enter&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;caracter&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="super"&gt;
&lt;h3&gt;super()&lt;/h3&gt;
&lt;p&gt;Per referir-nos al constructor de la superclasse, farem servir:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Al igual que amb &lt;tt class="docutils literal"&gt;this()&lt;/tt&gt;, la crida a &lt;tt class="docutils literal"&gt;super()&lt;/tt&gt; ha de ser la
primera instrucció del constructor. Només pot haver una crida a un
constructor.&lt;/p&gt;
&lt;p&gt;En cas que no afegim una crida a un constructor des del nostre
constructor, Java ens afegirà una: al constructor per defecte de la
superclasse.&lt;/p&gt;
&lt;p&gt;Per exemple, considera els següent codi:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;  &lt;span class="c1"&gt;// cos del constructor buit&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;equival a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;De fet, el constructor per defecte de B a l'exemple anterior, podria
contenir instruccions al cos. Sempre i quan no fossin una crida a un
constructor, afegir &lt;tt class="docutils literal"&gt;super()&lt;/tt&gt; com a primera instrucció continuaria
sent equivalent.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Atenció&lt;/strong&gt;: En cas que la superclasse (en el cas de l'exemple
A) no disposi de constructor per defecte, es converteix en
obligatori declarar almenys un constructor i fer la crida des d'aquest
a un constructor vàlid. A l'exemple anterior, considerem el cas en que
la definició de &lt;em&gt;A&lt;/em&gt; fos la següent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// no es disposa de constructor per defecte!&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest cas, les definicions anteriors de la classe B
fallarien en temps de compilació. Per solucionar-ho caldria, o afegir
el constructor per defecte a &lt;em&gt;A&lt;/em&gt; o bé definir a &lt;em&gt;B&lt;/em&gt;
els constructors que facin referència al constructor específic de
la seva superclasse&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// cal passar algun valor enter!&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="visibilitat"&gt;
&lt;h3&gt;Visibilitat&lt;/h3&gt;
&lt;p&gt;Com qualsevol altre mètode, es pot definir la visibilitat d'un constructor.&lt;/p&gt;
&lt;p&gt;En cas que declarem un constructor com a privat, només es podrà fer
servir des de la pròpia classe. És típic especificar constructors
privats en implementacions del patró &lt;a class="reference external" href="http://ca.wikipedia.org/wiki/Patr%C3%B3_singleton"&gt;singleton&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-resum-de-constructors"&gt;
&lt;h3&gt;Exercici 1. Resum de constructors&lt;/h3&gt;
&lt;p&gt;Construeix un esquema/resum amb els diferents aspectes que has vist
dels constructors. Afegeix exemples propis que els il·lustrin.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:30:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:constructors-part-ii.html</guid><category>java</category></item><item><title>Polimorfisme</title><link>http://apuntstecnics.herokuapp.com/polimorfisme.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document introdueix al concepte de &lt;em&gt;polimorfisme&lt;/em&gt;. Es tracta
d'una de les conseqüències més útils de l'herència i altres relacions
jeràrquiques.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;Polimorfisme&lt;/h2&gt;
&lt;div class="section" id="definicio"&gt;
&lt;h3&gt;Definició&lt;/h3&gt;
&lt;p&gt;Una possible definició del polimorfisme és: possibilitat que
ofereixen alguns llenguatges de programació de fer servir dades de
diferents tipus d'una manera uniforme.&lt;/p&gt;
&lt;p&gt;De les diferents &amp;quot;varietats&amp;quot; de polimorfisme que els teòrics
discuteixen, en aquest context ens és útil considerar:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;em&gt;polimorfisme de funcions&lt;/em&gt;: mètodes que poden ser aplicats a diferents
tipus d'arguments. És el que aconseguim, per exemple, amb la
sobrecàrrega de mètodes en Java. Ex.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;     &lt;span class="c1"&gt;// versió amb enter&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;    &lt;span class="c1"&gt;// versió amb caràcter&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;       &lt;span class="c1"&gt;// usa la versió amb enter&lt;/span&gt;
        &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;     &lt;span class="c1"&gt;// usa la versió amb caràcter&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;em&gt;polimòrfisme de subclasses&lt;/em&gt;: una variable declarada d'una
determinada classe A, pot fer referència a instàncies de la classe
A, però també de qualsevol classe B que tingui a A com a
avantpassat &lt;a class="footnote-reference" href="#avantpassat" id="id2"&gt;[1]&lt;/a&gt;. Ex.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;C&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;            &lt;span class="c1"&gt;// referència de tipus A&lt;/span&gt;
        &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;    &lt;span class="c1"&gt;// instància de tipus A&lt;/span&gt;
        &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;    &lt;span class="c1"&gt;// instància de tipus B assignada a una referència de tipus A&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="b-es-un-a-pero-a-no-es-un-b"&gt;
&lt;h3&gt;B és un A però A no és un B&lt;/h3&gt;
&lt;p&gt;EL polimorfisme de subclasses ens permet fer servir una variable de
la superclasse per referenciar una instància de la subclasse, però
&lt;strong&gt;no&lt;/strong&gt; a l'inrevés.&lt;/p&gt;
&lt;p&gt;El següent dibuix intenta mostrar-ho gràficament.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Metàfora dels cucurutxos" src="http://apuntstecnics.herokuapp.com/images/poo013.img001.cucurutxos.png" /&gt;
&lt;/div&gt;
&lt;p&gt;A la imatge veiem com un suport (&lt;em&gt;variable&lt;/em&gt;) per cucurutxos de tipus
(&lt;em&gt;classe&lt;/em&gt;) A, pot subjectar (&lt;em&gt;referenciar&lt;/em&gt;) cucurutxos (&lt;em&gt;instàncies&lt;/em&gt;) de
tipus A. Aquest mateix suport, és capaç de subjectar cucurutxos que
estenen el tipus A. En canvi, amb el suport pels cucurutxos de tipus
B, els de tipus A ens &lt;strong&gt;caurien&lt;/strong&gt; a terra!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="assignacio-tardana"&gt;
&lt;h3&gt;Assignació tardana&lt;/h3&gt;
&lt;p&gt;L'&lt;em&gt;assignació tardana&lt;/em&gt; (o &lt;em&gt;late binding&lt;/em&gt;) és la determinació del tipus
de dades/mètode que realment s'executarà és realitza en temps
d'execució i no en la compilació.&lt;/p&gt;
&lt;p&gt;Per exemple, considerem:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;C&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;El codi que finalment es cridarà en la línia 7 sembla que podria ser
determinat en temps de compilació: no hauria de ser el definit pel
mètode &lt;tt class="docutils literal"&gt;A.m()&lt;/tt&gt;?. En canvi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// redefinició de m()&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;n&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// un altre mètode&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;C&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="k"&gt;instanceof&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;   &lt;span class="c1"&gt;// comprova si a és instància de B&lt;/span&gt;
             &lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;         &lt;span class="c1"&gt;// considera a com un B&lt;/span&gt;
             &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;n&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;              &lt;span class="c1"&gt;// ara ja puc accedir a B.n()&lt;/span&gt;
             &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;n&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;         &lt;span class="c1"&gt;// també ho puc fer directament&lt;/span&gt;
         &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;g&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
         &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En aquest segon exemple, la situació no està tan clara. Quin mètode
s'executarà a la línia 10? El del mètode definit a la línia 2 o el de
la 5?&lt;/p&gt;
&lt;p&gt;El compilador no té manera de saber-ho, així que serà la màquina
virtual qui ho determinarà, en funció del tipus de la instància que
finalment estigui rebent &lt;tt class="docutils literal"&gt;C.f(A)&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;A la línia 11 fem servir l'operador &lt;em&gt;instanceof&lt;/em&gt;. Aquest operador ens
retornarà True si, en temps d'execució, el primer operand resulta ser
una instància del tipus del segon operand (o bé d'una subclasse
d'aquest) &lt;a class="footnote-reference" href="#instanceof" id="id3"&gt;[3]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Sovint &lt;em&gt;late binding&lt;/em&gt; es traduït també per &lt;em&gt;assignació dinàmica&lt;/em&gt;, per
contrapossar-ho a l'&lt;em&gt;assignació estàtica&lt;/em&gt; que oferiria el compilador
(si pogués).&lt;/p&gt;
&lt;p&gt;Per cert, aquesta flexibilitat té un preu: es paga amb la velocitat
d'execució. Si estàs desenvolupant un codi on l'eficiència sigui
crítica i saps que un mètode no serà redefinit per una subclasse, pots
facilitar la feina al compilador fent servir &lt;tt class="docutils literal"&gt;final&lt;/tt&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;C&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Amb aquest darrer exemple, el compilador &lt;em&gt;sí&lt;/em&gt; sap quin serà el codi
que s'executarà. Això sí, no intentis crear una subclasse B com la de
fa dos exemples perquè el compilador es queixarà!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="si-pero-quin-metode-es-crida"&gt;
&lt;h3&gt;Sí però... quin mètode es crida&lt;/h3&gt;
&lt;p&gt;Quan ens enfrontem per primer cop al polimorfisme, una de les
dificultats més grans és saber com es realitza finalment aquesta
assignació tardana.&lt;/p&gt;
&lt;p&gt;Per exemple:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;superclasse&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;

 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;  &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;subclasse&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;sm&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// una mena d&amp;#39;àlies de A.m()&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;

 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;C&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;       &lt;span class="c1"&gt;// escriu: superclasse&lt;/span&gt;
         &lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;       &lt;span class="c1"&gt;// escriu: subclasse&lt;/span&gt;
         &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;  &lt;span class="c1"&gt;// escriu... subclasse!&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;       &lt;span class="c1"&gt;// escriu... subclasse!&lt;/span&gt;
         &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sm&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;      &lt;span class="c1"&gt;// escriu: superclasse&lt;/span&gt;

         &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// error de compilació&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sm&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;      &lt;span class="c1"&gt;// error de compilació&lt;/span&gt;
         &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;sm&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// error d&amp;#39;execució&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En l'exemple veiem que a la màquina virtual no hi ha manera de fer-li
executar el mètode definit per A des d'una instància de B (excepte
fent servir l'&amp;quot;&lt;em&gt;àlies&lt;/em&gt;&amp;quot; &lt;tt class="docutils literal"&gt;B.sm()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;L'exemple afegeix, a mode de repàs, alguns errors típics dels que
s'inicien amb aquests temes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="liskov"&gt;
&lt;h3&gt;Liskov&lt;/h3&gt;
&lt;p&gt;El principi de substitució de &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Barbara_Jane_Liskov"&gt;Liskov&lt;/a&gt; diu que:&lt;/p&gt;
&lt;blockquote&gt;
una herència entre dues classes està correctament definida si
&lt;strong&gt;sempre&lt;/strong&gt; es pot fer servir una instància de la subclasse allà on
el programa espera una instància de la superclasse.&lt;/blockquote&gt;
&lt;p&gt;Un exemple típic d'herència incorrecta &lt;a class="footnote-reference" href="#herenciaincorrecta" id="id5"&gt;[2]&lt;/a&gt; és entre
Quadrat i Rectangle (o també Cercle i Oval). Suposa que tens les
següents classes:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Rectangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Rectangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;base&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getBase&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getAltura&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setBase&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;base&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setAltura&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;

 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Quadrat&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Rectangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Quadrat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;costat&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;costat&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;costat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getCostat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;getBase&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setCostat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;costat&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;setBase&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;costat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
         &lt;span class="n"&gt;setAltura&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;costat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Malgrat que, en principi, una herència com aquesta pot semblar una
bona idea (especialment si els «...» inclouen molt de codi, en
realitat amaga una desagradable sorpresa. Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaRectangles&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;rectangles&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
         &lt;span class="n"&gt;rectangles&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
         &lt;span class="n"&gt;rectangles&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Quadrat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
         &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Rectangle&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;rectangles&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
             &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setBase&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getBase&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// encongeix la base&lt;/span&gt;
         &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En &lt;tt class="docutils literal"&gt;UsaRectangles.f()&lt;/tt&gt; aconseguim que la instància de Quadrat
referenciada per &lt;tt class="docutils literal"&gt;rectangles[1]&lt;/tt&gt; acabi tenint un quadrat de costat 3
i 4!. És a dir, hem aconseguit &lt;em&gt;petar&lt;/em&gt; la coherència de la classe i
tot fent-la servir &amp;quot;legalment&amp;quot;.&lt;/p&gt;
&lt;p&gt;El problema de l'exemple és que un quadrat &lt;strong&gt;no&lt;/strong&gt; es pot considerar un
rectangle en tots els contexts on s'espera que es comporti
correctament un rectangle (ex. quan encongim un dels seus costats)&lt;/p&gt;
&lt;p&gt;En resum, abans de crear una subclasse B d'una classe A, assegurem-nos
que podem dir que tot B &lt;strong&gt;és un&lt;/strong&gt; A. No n'hi ha prou amb que &lt;em&gt;algun&lt;/em&gt; B
és un A, o tot B s'&lt;em&gt;assembla&lt;/em&gt; a A, o &lt;em&gt;és pràcticament un&lt;/em&gt; A &lt;em&gt;excepte
per&lt;/em&gt;..., etc. Els &lt;em&gt;ornitorincs&lt;/em&gt; en POO a la llarga es paguen cars. No
diguis després que no se t'ha avisa't!.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-analisi-d-errors-tipics"&gt;
&lt;h2&gt;Exercici 1. Anàlisi d'errors típics&lt;/h2&gt;
&lt;p&gt;Torna a considerar el codi de l'exemple que apareix a la secció &lt;a class="reference internal" href="#si-pero-quin-metode-es-crida"&gt;Sí
però... quin mètode es crida&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Redacta un breu document en que expliquis el perquè de cada sortida o
error de les instruccions de la funció &lt;tt class="docutils literal"&gt;C.f()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, per la línia 13 es podria dir:&lt;/p&gt;
&lt;blockquote&gt;
Línia 13.  &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;a.m();&lt;/span&gt;&lt;/tt&gt; escriu &lt;em&gt;superclasse&lt;/em&gt; perquè &lt;tt class="docutils literal"&gt;a&lt;/tt&gt; fa
referència a una instància de tipus &lt;tt class="docutils literal"&gt;A&lt;/tt&gt; i aquesta inclou el
mètode &lt;tt class="docutils literal"&gt;void m()&lt;/tt&gt;.&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-molts-gats"&gt;
&lt;h2&gt;Exercici 2. Molts gats&lt;/h2&gt;
&lt;p&gt;Ja se sap, deixes entrar un gat a casa i aviat convida els seus
amics...&lt;/p&gt;
&lt;p&gt;Modifiquem la classe Gat per què el seu constructor mostri el missatge
&amp;quot;«nom»: he nascut!&amp;quot; a menys que es crei com a silenciós.&lt;/p&gt;
&lt;p&gt;Modifica el codi de la classe UsaGat que inclou l'exercici 1 dels
continguts d'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/herencia.html"&gt;herència&lt;/a&gt; de
manera que &lt;em&gt;main()&lt;/em&gt; afegeixi sempre a Renat i a Garfield a la llista.
En crearà una instància de gat per cada nom que rebi per línia de
comandes. En cas que per la línia de comandes es demani al Renat o al
Garfield, indicarà amb un warning que aquests dos ja hi són a la
gàbia.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-l-entorn-operatiu-dels-gats"&gt;
&lt;h2&gt;Exercici 3. L'entorn operatiu dels gats&lt;/h2&gt;
&lt;p&gt;Ara que tenim una quantitat considerable de gats, necessitem disposar
d'un sistema flexible per a poder-los &amp;quot;manipular&amp;quot;.&lt;/p&gt;
&lt;p&gt;Així, crearem una nova versió de l'entorn operatiu dels Gats amb les
següents modificacions.&lt;/p&gt;
&lt;p&gt;El &lt;em&gt;prompt&lt;/em&gt; de l'entorn serà:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;[Gats]:
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Les ordres que se li podran donar, seran:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;crea gat «nom»
mata gat «nom»
llista gats
«nom» com estàs?
«nom» aixeca’t
«nom» seu
«nom» estira&amp;#39;t
«nom» miola
adéu
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Substituirem, es clar «nom» pel nom del gat en qüestió.&lt;/p&gt;
&lt;p&gt;Els missatges que generarà seran:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Creat el gat «nom».
Ja existeix un gat amb el nom «nom».
Matat el gat «nom».
No hi ha cap gat amb el nom «nom».
Els gats de la llista són: «nom», «nom», ..., «nom».
No hi ha cap gat a la llista.
«nom» diu: estic dret.
«nom» diu: estic assegut.
«nom» diu: estic estirat.
«nom» diu: fet.
«nom» diu: ja estava dret.
«nom» diu: ja estava assegut.
«nom» diu: ja estava estirat.
No entenc el missatge.
Adéu.
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Inicialment el programa afegirà automàticament una instància dels gats
Renat i Garfield a la llista de gats. Aquests podran ser eliminats com
qualsevol altre i no s'oferirà a l'usuari la possibilitat d'accedir a
membres de subclasse que no pertanyin a l'hora a la superclasse.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pista&lt;/strong&gt;: en cas que tinguis problemes per extreure la informació de
l'entrada de l'usuari, et proposo que facis una ullada a &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/resources/ComandaText.java"&gt;aquest codi&lt;/a&gt;. Estudia el mètode
&lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; per entendre el seu funcionament.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-l-entorn-operatiu-dels-animals"&gt;
&lt;h2&gt;Exercici 4. L'entorn operatiu dels animals&lt;/h2&gt;
&lt;p&gt;Els amics dels gats potser estaran satisfets amb l'entorn dels gats,
però, que em dius dels amics dels gossos?&lt;/p&gt;
&lt;p&gt;En aquest problema, es demana implementar les classes Animal i Gos.&lt;/p&gt;
&lt;p&gt;Els gossos, pel que respecta a aquest exercici, són molt semblants als
gats. Únicament no miolen. En canvi sí borden. Per aquesta raó, la
classe Animal disposarà del mètode &lt;tt class="docutils literal"&gt;fesSoroll()&lt;/tt&gt; que els Gats
implementaran cridant a &lt;tt class="docutils literal"&gt;miola()&lt;/tt&gt; i els gossos a &lt;tt class="docutils literal"&gt;borda()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Realitza els canvis que siguin necessaris a la classe Gat, de manera
que no calgui modificar cap de les seves subclasses ni cap dels
programes dels exercicis anteriors.&lt;/p&gt;
&lt;p&gt;Finalment implementa un entorn operatiu d'animals, similar al dels
gats però que permeti explotar les funcionalitats que ofereixen els
animals.&lt;/p&gt;
&lt;p&gt;El &lt;em&gt;prompt&lt;/em&gt; de l'entorn serà: &lt;tt class="docutils literal"&gt;[Animals]:&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Les ordres que se li podran donar, seran les mateixes que les de
l'exercici anterior, i a més:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;crea gos «nom»
mata gos «nom»
mata animal «nom»
llista gossos
llista animals
«nom» borda
«nom» fes soroll
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Substituirem, es clar «nom» pel nom del gat en qüestió.&lt;/p&gt;
&lt;p&gt;Els missatges que generarà seran:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Creat el gos «nom».
Ja existeix un animal amb el nom «nom».
Matat el gos «nom».
No hi ha cap gos amb el nom «nom».
No hi ha cap animal amb el nom «nom».
Els gossos de la llista són: «nom», «nom», ..., «nom».
Els animals de la llista són: «nom», «nom», ..., «nom».
No hi ha cap gos a la llista.
No hi ha cap animal a la llista.
«nom» no és cap gat per miolar.
«nom» no és cap gos per bordar.
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Inicialment no hi haurà cap animal a la llista.&lt;/p&gt;
&lt;p&gt;Pista: tot i que pots fer servir l'operador &lt;em&gt;instanceof&lt;/em&gt;, també pots
considerar fer servir tres llistes, una per gats, una altra per gos i
la tercera per animals en general. Si estàs preocupat per que això
pugui representar una duplicació d'informació, recorda que en realitat
d'un mateix gat només tindràs una instància, amb una referència a la
llista d'animals i una altra a la de gats.&lt;/p&gt;
&lt;/div&gt;
&lt;hr class="docutils" /&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="avantpassat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;(B és subclasse de A, o bé d'una classe C que tingui a A com a
avantpassat)&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="herenciaincorrecta" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Sorprenentment, aquestes exemples els
trobarem a molts textos (i cursos) d'introducció a la programació
orientada a objectes, pel concepte d'herència!&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="instanceof" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;No tothom està gaire d'acord amb l'ús &amp;quot;indiscriminat&amp;quot;
del &lt;em&gt;instanceof&lt;/em&gt;. Mira per exemple l'article &lt;a class="reference external" href="http://www.javapractices.com/topic/TopicAction.do?Id=31"&gt;Beware of instanceof
operator&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:29:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:polimorfisme.html</guid><category>java</category></item><item><title>Paquets i empaquetats</title><link>http://apuntstecnics.herokuapp.com/paquets-i-empaquetats.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document aprofita un senzill joc de paraules per a introduir dos
conceptes diferents:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;l'organització de classes en &lt;em&gt;packages&lt;/em&gt; pel seu ús en altres
programes&lt;/li&gt;
&lt;li&gt;l'agrupació de codi en paquets per la seva distribució&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Veuràs que es tracta de dos utilitats del llenguatge. Hi trobaràs un
exercici per a cadascuna d'elles, i un extra per a practicar-les a
l'hora.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-comprensio-dels-packages-en-java"&gt;
&lt;h2&gt;Exercici 1. Comprensió dels &lt;em&gt;packages&lt;/em&gt; en Java&lt;/h2&gt;
&lt;p&gt;Els &lt;em&gt;packages&lt;/em&gt; en Java permeten organitzar els nostres programes. Es
corresponen amb els directoris del sistema de fitxers. Entre altres
coses, ofereixen un mecanisme per a evitar les col·lisions de noms.&lt;/p&gt;
&lt;p&gt;Llegeix la &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/package/index.html"&gt;lliçó sobre packages&lt;/a&gt;
dels tutorials de java, i contesta les següents preguntes en un
document senzill però llegible.&lt;/p&gt;
&lt;p&gt;Es recomana fer una lectura &amp;quot;guiada&amp;quot; per les preguntes. És a dir,
primer llegir la primera pregunta, trobar contestació, llegir la
següent, etc. D'aquesta manera probablement es podrà &lt;em&gt;saltar&lt;/em&gt; el
material de la lliçó pel que encara no estem del tot preparats.&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Segons el tutorial, per a què tres coses serveix un &lt;em&gt;package&lt;/em&gt;?
Perquè, fins ara, no l'hem hagut de fer servir en la definició de
les nostres classes?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Defineix amb les teves paraules què és un &lt;em&gt;package&lt;/em&gt; en Java.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;En quin &lt;em&gt;package&lt;/em&gt; es troben les classes fonamentals de Java, com
ara &lt;em&gt;String&lt;/em&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Com s'indica que una classe pertany a un &lt;em&gt;package&lt;/em&gt;? Indica la o les
sentències necessàries pel &lt;em&gt;package&lt;/em&gt; org.estudi_poo.«el teu
nom» (per exemple, &lt;em&gt;org.estudi_poo.anna&lt;/em&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A quants packages pot pertànyer una mateixa classe?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Què pot aparèixer abans de les sentències que indiquen el &lt;em&gt;package&lt;/em&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quantes classes públiques poden aparèixer en un mateix fitxer de
codi?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;És recomanable incloure més d'una classe en un mateix fitxer de
codi?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Desenvolupa la classe HolaPackage que pertany al &lt;em&gt;package&lt;/em&gt; anterior i
que està formada d'un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que simplement escriu per sortida
estàndard el missatge: &amp;quot;Hola des del &lt;em&gt;package&lt;/em&gt; «nom del package»&amp;quot;.
Inclou el codi en aquest document.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quina visibilitat tindrà una classe no declarada com a pública?
&lt;a class="footnote-reference" href="#packageprivate" id="id1"&gt;[1]&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A quin &lt;em&gt;package&lt;/em&gt; pertanyen les classes quan no se li declara
explícitament cap?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quina condició s'ha de complir per a poder utilitzar en un mateix
codi, dues classes amb exactament el mateix nom?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Què ens recomanen per evitar que dos desenvolupadors creïn
&lt;em&gt;packages&lt;/em&gt; amb exactament el mateix nom?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;De quines tres maneres es pot fer servir un membre públic d'un
&lt;em&gt;package&lt;/em&gt;? Posa un exemple de cada considerant la classe GatRenat
que es troba al &lt;em&gt;package&lt;/em&gt; &lt;tt class="docutils literal"&gt;org.gatsdelmon&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Què vol dir que els &lt;em&gt;packages&lt;/em&gt; no estan relacionats jeràrquicament?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quin nom recomanen pel fitxer on col·locar el codi font d'una
classe? En quin directori recomanen col·locar el fitxer?
Il·lustra-ho amb un exemple considerant la classe GatRenat que
pertany al &lt;em&gt;package&lt;/em&gt; &lt;tt class="docutils literal"&gt;org.gatsdelmon&lt;/tt&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Suposa que tens GatRenat.class del &lt;em&gt;package&lt;/em&gt; &lt;tt class="docutils literal"&gt;org.gatsdelmon&lt;/tt&gt; ben
col·locat al següent directori &lt;tt class="docutils literal"&gt;~/estudi/poo/&lt;/tt&gt; indica que ha de
contenir la variable de sistema &lt;tt class="docutils literal"&gt;CLASSPATH&lt;/tt&gt; perquè puguem
executar el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; de GatRenat (en cas que en tingués) fent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java org.gatsdelmon.GatRenat
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;L'opció &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-d&lt;/span&gt; «path»&lt;/tt&gt; de &lt;tt class="docutils literal"&gt;javac&lt;/tt&gt; ens permet especificar una
destinació diferent pels &lt;tt class="docutils literal"&gt;.class&lt;/tt&gt;. Fent servir aquesta opció,
col·loca els &lt;tt class="docutils literal"&gt;.class&lt;/tt&gt; en un directori diferent d'on estan
els fonts, i canvia convenientment &lt;tt class="docutils literal"&gt;CLASSPATH&lt;/tt&gt; de manera que es
pugui executar GatRenat amb la comanda del punt anterior. Indica la
comanda completa de compilació que has fet servir, i el contingut
del teu &lt;tt class="docutils literal"&gt;CLASSPATH&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Canvia el missatge del HolaPackage.java de manera que mostri el
resultat de la crida a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getProperty&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;java.class.path&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Recompila i executa. Què es mostra?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Crea la classe Salutator amb el següent contingut i afegeix-la al
&lt;em&gt;package&lt;/em&gt; org.estudi_poo.«el teu nom»&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Salutator&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kd"&gt;private&lt;/span&gt;   &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;varPrivada&lt;/span&gt;   &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt;    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;varPublica&lt;/span&gt;   &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="kd"&gt;protected&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;varProtegida&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
               &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;varPackage&lt;/span&gt;   &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;saluda&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Salutator diu: Hola Món!&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Des del &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; de la classe HolaPackage afegeix una crida al
mètode saluda() de Salutator, i mostra el valor de totes les
propietats de Salutator que es puguin &amp;quot;veure&amp;quot; des de HolaPackage
(pots fer-ho amb prova i error).
Indica perquè és possible veure les variables que es poden i perquè
no es pot les que no es poden. &lt;a class="footnote-reference" href="#packageprivate" id="id2"&gt;[1]&lt;/a&gt;
Inclou el codi d'ambdues classes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Crea ara una nova versió de HolaPackage, aquest cop dins del
&lt;em&gt;package&lt;/em&gt; org.estudi_poo.knuth&lt;/p&gt;
&lt;p&gt;Modifica el que calgui perquè pugui accedir a la classe Salutator
del &lt;em&gt;package&lt;/em&gt; org.estudi_poo.«el teu nom»&lt;/p&gt;
&lt;p&gt;Indica perquè es poden/es deixa de poder accedir a membres del teu
Salutator des de l'HolaPackage del mestre Knuth.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Crea una nova versió de Salutator, aquest cop dins del &lt;em&gt;package&lt;/em&gt; de
Knuth i canvia el codi de saluda() per&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;saluda&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Knuth diu: Hola Món!&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Modifica HolaPackage de Knuth de manera que faci una crida a
saluda() del Salutator teu i a continuació del Salutator de Knuth.&lt;/p&gt;
&lt;p&gt;Inclou el codi de les dues classes de Knuth.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-fitxers-jar"&gt;
&lt;h2&gt;Exercici 2. Fitxers jar&lt;/h2&gt;
&lt;p&gt;Java ens ofereix la possibilitat d'empaquetar el nostre codi en un sol
fitxer que anomena jar. Empaquetant d'aquesta manera, podem distribuir
còmodament i eficient la nostra aplicació.&lt;/p&gt;
&lt;p&gt;En aquest problema construirem un fitxer jar de la nostra aplicació
HolaPackage (la del nostre paquet no la de Knuth) realitzada a
l'exercici anterior.&lt;/p&gt;
&lt;p&gt;Com que el que realitzarem és molt bàsic, si tens interès en conèixer
més detalls d'aquesta eina, pots considerar el &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/deployment/jar/index.html"&gt;tutorial d'oracle pel
jar&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;En qualsevol cas, segueix les passes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Col·locat al directori que conté la base del teu package (és a dir
la carpeta que conté org/ si has seguit els exemples anteriors)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Executa la següent comanda:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;jar cvf elteunom.jar org/estudi_poo/«elteunom»/*.class
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Copia el fitxer resultant a /tmp i fes&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;unzip elteunom.jar
&lt;span class="nv"&gt;$ &lt;/span&gt;cat META-INF/MANIFEST.MF
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Hauria d'aparèixer quelcom semblant a:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Manifest-Version: 1.0
Created-By: 1.6.0_15 (Sun Microsystems Inc.)
&lt;/pre&gt;
&lt;p&gt;En un moment veurem per a què serveix aquest fitxer.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Ara, si intentes executar el teu programa veuràs que no es pot&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java -jar elteunom.jar
Failed to load Main-Class manifest attribute from
elteunom.jar
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;El problema està en que no hem indicat al .jar la classe principal
de la nostra aplicació. Per fer-ho, hem de completar el fitxer
&lt;tt class="docutils literal"&gt;MANIFEST.MF&lt;/tt&gt; que hem vist abans.&lt;/p&gt;
&lt;p&gt;El manifest és un fitxer que conté informació de l'aplicació
guardada en el fitxer jar. Aquesta informació pot ser molt variada
com ara control de versió, el classpath, o la signatura
electrònica. De moment, ens interessarem en indicar la classe
principal (la que conté el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Edita un fitxer de text (per exemple amb nom manifest.txt) i
inclou-hi el següent contingut:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Main-Class: org.estudi_poo.«elteunom».HolaPackage
                                                    &amp;lt;--- salt de línia
&lt;/pre&gt;
&lt;p&gt;Assegura't que el fitxer acaba amb un salt de línia, o no
interpretarà bé el contingut.&lt;/p&gt;
&lt;p&gt;Ara construeix el jar amb la comanda (vigila on has posat manifest.txt)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;jar cvfm «elteunom».jar «camí al manifest»/manifest.txt org/estudi_poo/«elteunom»/*.class
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I executa el teu programa&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java -jar «elteunom».jar
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Torna a mirar el contingut del fitxer &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;META-INF/MANIFEST.MF&lt;/span&gt;&lt;/tt&gt; que
ara hauria de contenir una nova línia&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;D'aquest exercici no cal que lliuris res!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-entorn-operatiu-dels-animals-jar"&gt;
&lt;h2&gt;Exercici 3. Entorn operatiu dels animals.jar&lt;/h2&gt;
&lt;p&gt;Modifica l'exercici de l'entorn operatiu dels animals de manera que
ara totes les classes pertanyin al package
&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;org.estudi_poo.«elteunom».animals&lt;/span&gt;&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Empaqueta-ho tot a un .jar que permeti executar l'entorn directament.
Lliura el .jar amb els .class i els fitxers font.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="packageprivate" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;[1]&lt;/td&gt;&lt;td&gt;&lt;em&gt;(&lt;a class="fn-backref" href="#id1"&gt;1&lt;/a&gt;, &lt;a class="fn-backref" href="#id2"&gt;2&lt;/a&gt;)&lt;/em&gt; Aquesta pregunta pot resultar una mica difícil si
encara no tens més que nocions del concepte de &lt;em&gt;visibilitat&lt;/em&gt; en Java.
Consell: fes el que puguis ara i, quan ja sàpigues més de visibilitats,
torna i revisa-ho. El primer intent t'ajudarà a entendre millor la
visibilitat i els &lt;em&gt;packages&lt;/em&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:28:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:paquets-i-empaquetats.html</guid><category>java</category></item><item><title>Visibilitat</title><link>http://apuntstecnics.herokuapp.com/visibilitat.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;A continuació trobaràs una petita guia per obtenir una visió precisa
del control d'accés en el llenguatge de programació Java.&lt;/p&gt;
&lt;p&gt;El document consta d'un únic exercici que et dirigirà a una secció del
tutorial &amp;quot;oficial&amp;quot; de java, i a partir d'una sèrie de preguntes
concretes, t'ajudarà a plantejar-te els punts més rellevants del
document, i del tema.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-visibilitat"&gt;
&lt;h2&gt;Exercici Visibilitat&lt;/h2&gt;
&lt;p&gt;Llegeix l'article &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html"&gt;Controlling Access to Members of a Class&lt;/a&gt;
i contesta les preguntes que apareixen a continuació.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;per a què serveix un modificador de nivell d'accés?&lt;/li&gt;
&lt;li&gt;quants nivells de control d'accés n'hi ha a java. Indica què afecta
cadascun d'ells&lt;/li&gt;
&lt;li&gt;quins modificadors es poden indicar a la definició d'una classe?&lt;/li&gt;
&lt;li&gt;puc indicar que una classe és privada amb &lt;em&gt;private&lt;/em&gt;?&lt;/li&gt;
&lt;li&gt;quins són els modificadors que es poden indicar per una propietat
d'una classe? i sinó s'indica cap?&lt;/li&gt;
&lt;li&gt;quins són els modificadors que es poden indicar per un mètode d'una
classe? i sinó s'indica cap?&lt;/li&gt;
&lt;li&gt;suposa que tens una propietat a una superclasse marcada com a
&lt;em&gt;public&lt;/em&gt; i extens la superclasse amb una subclasse que pertany a un
altre &lt;em&gt;package&lt;/em&gt;. Pot un mètode de la subclasse accedir a la
propietat directament?&lt;/li&gt;
&lt;li&gt;suposa que tens una propietat a una superclasse marcada com a
protected i extens la superclasse amb una subclasse que pertany a
un altre &lt;em&gt;package&lt;/em&gt;. Pot un mètode de la subclasse accedir a la
propietat directament?&lt;/li&gt;
&lt;li&gt;suposa que tens una propietat a una superclasse marcada com a
&lt;em&gt;private&lt;/em&gt; i extens la superclasse amb una subclasse que pertany a
un altre &lt;em&gt;package&lt;/em&gt;. Pot un mètode de la subclasse accedir a la
propietat directament?&lt;/li&gt;
&lt;li&gt;suposa que tens una propietat a una superclasse marcada com a
&lt;em&gt;package&lt;/em&gt; i extens la superclasse amb una subclasse que pertany a
un altre &lt;em&gt;package&lt;/em&gt;. Pot un mètode de la subclasse accedir a la
propietat directament?&lt;/li&gt;
&lt;li&gt;amb quin modificador es pot evitar que un membre d'una classe no
pugui accedir a una propietat de la mateixa classe?&lt;/li&gt;
&lt;li&gt;com es podria permetre canviar el valor d'una propietat d'una
classe marcada com a &lt;em&gt;private&lt;/em&gt;, des d'un mètode d'una altra classe
que no es troba a la jerarquia ni al &lt;em&gt;package&lt;/em&gt; de la primera ?&lt;/li&gt;
&lt;li&gt;explica el valor 'Y' de la columna Gamma de l'exemple.&lt;/li&gt;
&lt;li&gt;explica el valor 'N' de la columna Beta de l'exemple.&lt;/li&gt;
&lt;li&gt;quin és el modificador que recomanen usar per defecte a l'article?
Perquè creus?&lt;/li&gt;
&lt;li&gt;quin és el modificador que recomanen evitar per defecte a
l'article? Quina raó donen? I llavors, perquè ells mateixos el fan
servir als seus exemples?&lt;/li&gt;
&lt;li&gt;perquè creus que és segur marcar com a &lt;em&gt;public&lt;/em&gt; les constants?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:27:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:visibilitat.html</guid><category>java</category></item><item><title>Classes abstractes</title><link>http://apuntstecnics.herokuapp.com/classes-abstractes.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document introdueix l'alumne de programació orientada a
objectes al concepte de classe abstracta. Està estructurat en una
primera visió teòrica del concepte, per després oferir uns exercicis
que permetin donar-li un sentit pràctic.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;Classes abstractes&lt;/h2&gt;
&lt;p&gt;A una jerarquia de classes, es pressuposa que la superclasse és més
&lt;em&gt;abstracta&lt;/em&gt; que la subclasse. Sovint recollim els elements comuns
d'unes classes i els agrupem en una superclasse (per exemple, la
classe Animal és creada a partir d'elements comuns de Gat i Gos).&lt;/p&gt;
&lt;p&gt;Quan la raó principal de crear una classe és per actuar com a
agrupador d'elements comuns de les seves subclasses, però no es pretén
que existeixin instàncies d'aquesta classe, aquesta classe li diem
classe abstracta.&lt;/p&gt;
&lt;p&gt;A l'exemple dels animals, té sentit instanciar un Gat o un Gos. En
podem fer coses amb ells com, demanar-los que miolin o que bordin (que
facin soroll). Quina &amp;quot;pinta&amp;quot; té però una instància d'Animal? Quin
soroll ha de fer un animal quan se li demani &lt;tt class="docutils literal"&gt;fesSoroll()&lt;/tt&gt;?&lt;/p&gt;
&lt;p&gt;D'una classe abstracta no es poden fer instàncies, però poden contenir
qualsevol dels elements que una classe &amp;quot;normal&amp;quot; tingui permès. A més a
més, pot fer servir el modificador abstract per a indicar mètodes que
han de ser implementats per les subclasses. En el moment que una
classe fa servir el modificador abstract en algun dels seus mètodes,
es torna abstracta.&lt;/p&gt;
&lt;p&gt;En cas que tots els mètodes d'una classe siguin abstractes, és
preferible fer servir el concepte d'interface que veurem més endavant.&lt;/p&gt;
&lt;p&gt;Una subclasse d'una classe abstracta pot ser també abstracta.
Simplement cal no implementar algun dels mètodes de la superclasse.&lt;/p&gt;
&lt;p&gt;Considerem el clàssic exemple de les figures geomètriques. Les figures
geomètriques, com ara cercles, quadrats, triangles..., tenen alguns
elements en comú. Per exemple, totes elles ocupen un àrea i se'ls pot
mesurar el perímetre. En paraules de la POO, totes les figures
disposen de dos mètodes: getArea() i getPerimetre() que retornen
respectivament l'àrea i el perímetre corresponents a la figura.&lt;/p&gt;
&lt;p&gt;És a dir, les classes Cercle i Rectangle serien subclasses de la
classe Figura. Ara bé, com calculem l'àrea d'una instància de la
classe Figura? No té sentit, oi? Per tant, la classe Figura seria una
classe abstracta.&lt;/p&gt;
&lt;p&gt;La implementació de la classe Figura vindria a ser quelcom similar a:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;abstract&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Figura&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;abstract&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;getArea&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;abstract&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;getPerimetre&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixa't en l'ús del modificador abstract als diferents mètodes.&lt;/p&gt;
&lt;p&gt;La implementació de la classe Cercle podria ser:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Cercle&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Figura&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Cercle&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Cercle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;radi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;getArea&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pow&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getRadi&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PI&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;getPerimetre&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PI&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;getRadi&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;getRadi&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixat en que l'herència s'indica exactament igual que amb una
superclasse no abstracta (concreta)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-figures"&gt;
&lt;h2&gt;Exercici 1. Figures&lt;/h2&gt;
&lt;p&gt;Implementaren un package anomenat
&lt;em&gt;org.estudi_poo.«elteunom».figures&lt;/em&gt; que contindrà diferents
figures geomètriques. De moment només: cercle (que ja el tens),
rectangle, quadrat i triangle.&lt;/p&gt;
&lt;p&gt;Nota: si et passa pel cap, venç la temptació de fer Quadrat una
subclasse de Rectangle (recorda el principi de Liskov)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-entorn-d-animals-abstractes"&gt;
&lt;h2&gt;Exercici 2. Entorn d'Animals abstractes&lt;/h2&gt;
&lt;p&gt;Torna a considerar l'exercici de &lt;em&gt;l'entorn operatiu dels animals&lt;/em&gt; del
tema de &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/polimorfisme.html"&gt;polimorfisme&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Modifica la jerarquia d'animals de manera que ara la classe Animal
sigui abstracta. Segurament l'únic mètode que necessites construir com
a &lt;em&gt;abstract&lt;/em&gt; és el de &lt;tt class="docutils literal"&gt;Animal.fesSoroll()&lt;/tt&gt;. Fixa't que ja no et
caldrà fer res estrany com deixar el cos del mètode en blanc, ja que
ara ni tindrà cos! Té més sentit, no?&lt;/p&gt;
&lt;p&gt;Si ho vas fer bé, tota la resta hauria de compilar i executar sense
més canvi. Altrament, analitza si és raonable fer els canvis que
t'obliga aquesta nova versió.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-mes-animals"&gt;
&lt;h2&gt;Exercici 3. Més animals&lt;/h2&gt;
&lt;p&gt;Se't proposa ara crear una nova jerarquia d'animals. Per les
necessitats de l'exercici, el que farem serà simplificar la classe
Animal de l'exercici anterior. Evidentment, no s'espera que aquesta
versió sigui compatible amb exercicis previs, eh?&lt;/p&gt;
&lt;p&gt;En aquest cas, Animal únicament tindrà els següents mètodes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;Animal(String nom)&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String getNom()&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String moute()&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String menja()&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String fesSoroll()&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String dorm()&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Fixa't que tant el constructor, com &lt;tt class="docutils literal"&gt;getNom()&lt;/tt&gt; poden ser
implementats perfectament per la classe abstracta Animal, mentre que
la resta són específics de cada animal concret.&lt;/p&gt;
&lt;p&gt;Implementa les subclasses d'animal Gat, Gos, Canari i Lleo, de manera
que es pugui executar el següent codi.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.estudi_poo.&lt;/span&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="n"&gt;elteunom&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;animals&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Vector&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaAnimals&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;llistaAnimals&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="c1"&gt;// crea uns quants animals&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Fido&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Canari&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Piolin&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Lleo&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Bonifaci&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="c1"&gt;// fa que tots els animals facin les diferents accions&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt;     &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;moute&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; fa: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; fa: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fesSoroll&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; fa: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;dorm&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En executar-lo, cal que es generi el següent resultat per sortida
estàndard:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Fido camina
Fido fa: nyam nyam
Fido fa: bof bof
Fido fa: ZZZzzzz
Renat camina
Renat fa: myam myam
Renat fa: meww
Renat fa: ZZZzzzz
Piolin vola
Piolin fa: pyam pyam
Piolin fa: piu piu
Piolin fa: pi-pi-pi-pi
Bonifaci camina
Bonifaci fa: gram gram
Bonifaci fa: grrrr
Bonifaci fa: ZRrrrrr
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Avís&lt;/strong&gt;: és possible que trobis problemes per a adaptar codi
d'exercicis previs que aparentment s'assemblen a les classes d'aquest.
Com que hi ha prou canvis (ex. les instàncies de les classes i
subclasses d'Animal, mai no mostren missatges per sortida estàndard
sinó que el retornen) és recomanable començar tot el codi d'aquest
exercici des de zero.&lt;/p&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:26:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:classes-abstractes.html</guid><category>java</category></item><item><title>Interfaces</title><link>http://apuntstecnics.herokuapp.com/interfaces.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document ofereix una breu introducció al concepte
d'&lt;em&gt;interface&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Es tracta d'un mecanisme molt flexible que permet definir el
comportament de les classes, de tal manera que de vegades puguem
arribar a no necessitar conèixer amb quina classe concreta estem
treballant mentre tinguem clar que respon al comportament que esperem.&lt;/p&gt;
&lt;p&gt;El tema s'inicia amb l'anàlisi de les possibilitats d'implementació
d'un cas concret en forma d'exercici. Tot seguit es fa una discussió
més teòrica, per acabar amb uns exercicis que permeten posar en
pràctica els continguts.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="animals-de-companyia"&gt;
&lt;h2&gt;Animals de companyia&lt;/h2&gt;
&lt;p&gt;Considera la jerarquia de l'exercici dels animals abstractes.&lt;/p&gt;
&lt;p&gt;Imagina que ara volguéssim implementar els mètodes propis d'un animal
de companyia (&lt;tt class="docutils literal"&gt;siguesAmistos()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;juga()&lt;/tt&gt;)&lt;/p&gt;
&lt;p&gt;Pensa en les diferents possibilitats i considera els seus avantatges i
inconvenients:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;implementar els mètodes a la classe Animal&lt;/li&gt;
&lt;li&gt;indicar els mètodes com a abstractes a la classe Animal i
implementar-los a les subclasses&lt;/li&gt;
&lt;li&gt;Col·loca els mètodes només allà on tenen sentit (ex. al Gos i al
Gat)&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="section" id="proposta-de-respostes"&gt;
&lt;h3&gt;Proposta de respostes&lt;/h3&gt;
&lt;p&gt;No les miris fins que no hagis intentat donar una resposta pròpia!&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;implementar els mètodes a la classe Animal&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;PROS:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;totes les subclasses d'Animal hereten automàticament els mètodes&lt;/li&gt;
&lt;li&gt;no cal modificar les subclasses existents ni adaptar les futures&lt;/li&gt;
&lt;li&gt;les subclasses poden ser usades polimòrficament com a animals de
companyia&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;CONS:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;un lleó com a animal de companyia?&lt;/li&gt;
&lt;li&gt;tots els animals juguen igual?&lt;/li&gt;
&lt;/ul&gt;
&lt;ol class="arabic simple" start="2"&gt;
&lt;li&gt;indicar els mètodes com a abstractes a la classe Animal i
implementar-los a les subclasses&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;PROS:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;permet evitar el segon problema de la primera opció: els diferents
animals podran implementar els mètodes a la seva manera.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;CONS:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;cal modificar totes les subclasses (fins i tot les que no
corresponen a animals de companyia)&lt;/li&gt;
&lt;li&gt;queda lleig: sí, encara que no faci res, un Lleó indica (amb la seva
interfície) que ofereix el mètode siguesAmistos()&lt;/li&gt;
&lt;/ul&gt;
&lt;ol class="arabic simple" start="3"&gt;
&lt;li&gt;Col·loca els mètodes només allà on tenen sentit (ex. al Gos i al Gat)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;PROS:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;no cal preocupar-se de lleons llepant-te la cara en arribar a casa&lt;/li&gt;
&lt;li&gt;no cal modificar res de les classes que no són animals de companyia&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;CONS:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;no podem fer servir polimorfisme amb les subclasses que són animals
de companyia&lt;/li&gt;
&lt;li&gt;com que no hi ha cap &amp;quot;contracte&amp;quot; cada subclasse pot anomenar els
mètodes de diferent manera: ex. siguesBonGosset() en comptes de
siguesAmistos()&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Sembla com si necessitéssim una altra superclasse per Gos i Gat?&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="multiples-superclasses"&gt;
&lt;h2&gt;Múltiples superclasses?&lt;/h2&gt;
&lt;p&gt;A això s'anomena herència múltiple i, com a aquestes alçades
probablement ja sabràs, Java no l'admet! En canvi, ens ofereix una
alternativa anomenada &lt;em&gt;interface&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Una &lt;em&gt;interface&lt;/em&gt; de Java especifica un conjunt de constants i signatures
de mètodes que hauran de ser definits per qualsevol classe que
implementi la &lt;em&gt;interface&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Un dels avantatges de les &lt;em&gt;interfaces&lt;/em&gt; és la possibilitat de
desenvolupar independentment peces de codi que només es comprometen a
respectar &lt;em&gt;un contracte&lt;/em&gt;: la implementació de la &lt;em&gt;interface&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Donat que una classe pot implementar un nombre indefinit d'&lt;em&gt;interfaces&lt;/em&gt;,
aquest mecanisme resol parcialment l'aparent limitació del Java amb
l'herència múltiple.&lt;/p&gt;
&lt;p&gt;Considerem el següent exemple adaptat del &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/"&gt;tutorial oficial de Java&lt;/a&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="nc"&gt;Conduible&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
   &lt;span class="c1"&gt;// declaracions de constants (si escau)&lt;/span&gt;
   &lt;span class="c1"&gt;// signatures dels mètodes&lt;/span&gt;
   &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;gira&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Direction&lt;/span&gt; &lt;span class="n"&gt;direccio&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;   &lt;span class="c1"&gt;// Un enumerat amb els valors LEFT i RIGHT&lt;/span&gt;
              &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;velocitatInicial&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;velocitatFinal&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
   &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;canviaCarril&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Direction&lt;/span&gt; &lt;span class="n"&gt;direccio&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;velocitatInicial&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;velocitatFinal&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
   &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;senyalitzaGir&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Direction&lt;/span&gt; &lt;span class="n"&gt;direccio&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;activar&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
   &lt;span class="c1"&gt;// més signatures de mètodes&lt;/span&gt;
   &lt;span class="c1"&gt;// ...&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixa't que les signatures dels mètodes no tenen claus i finalitzen amb
punt i coma. Et sona, oi?&lt;/p&gt;
&lt;p&gt;Per a fer servir la &lt;em&gt;interface&lt;/em&gt; Conduible podem implementar:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Seat600&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;Conduible&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
   &lt;span class="c1"&gt;// mètodes definits per Conduible&lt;/span&gt;
   &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;senyalitzaGir&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Direction&lt;/span&gt; &lt;span class="n"&gt;direccio&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;activar&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="c1"&gt;//codi per activar i desactivar els intermitents del Seat 600&lt;/span&gt;
      &lt;span class="c1"&gt;// ...&lt;/span&gt;
   &lt;span class="o"&gt;}&lt;/span&gt;
   &lt;span class="c1"&gt;// ...&lt;/span&gt;
   &lt;span class="c1"&gt;// altres membres de la classe independents de la interface i&lt;/span&gt;
   &lt;span class="c1"&gt;// no visibles als usuaris d&amp;#39;aquesta&lt;/span&gt;
   &lt;span class="c1"&gt;// ...&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixa't que, per a implementar una &lt;em&gt;interface&lt;/em&gt;, ho indiquem amb
implements. Per altra banda, implementar un mètode de la &lt;em&gt;interface&lt;/em&gt;
implica simplement escriure el mètode incloent el cos.&lt;/p&gt;
&lt;p&gt;Per què la classe implementi correctament una &lt;em&gt;interface&lt;/em&gt; cal que
implementi &lt;strong&gt;tots&lt;/strong&gt; els mètodes especificats per la &lt;em&gt;interface&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="classes-subclasses-classes-abstractes-interfaces"&gt;
&lt;h2&gt;Classes, subclasses, classes abstractes, &lt;em&gt;interfaces&lt;/em&gt;?&lt;/h2&gt;
&lt;p&gt;Recepta per a decidir si vols una classe, una subclasse, una classe
abstracta o una &lt;em&gt;interface&lt;/em&gt;.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Si de la teva nova classe només pots dir que és un &lt;em&gt;Object&lt;/em&gt; (&lt;em&gt;is a&lt;/em&gt;),
llavors fes una classe concreta&lt;/li&gt;
&lt;li&gt;Si la teva nova classe correspon a una versió més específica d'una
altra existent, fes una subclasse (recorda el principi de
substitució de Liskov)&lt;/li&gt;
&lt;li&gt;Si et cal realitzar una plantilla per a un conjunt de classes i
disposes d'algun codi que totes les subclasses podrien fer servir,
i no t'interessa que es pugui instanciar aquesta classe, crea una
classe abstracta&lt;/li&gt;
&lt;li&gt;Si et cal definir un rol al que altres classes hagin de jugar, amb
independència de la posició d'aquestes a l'arbre jeràrquic, fes-ho
amb una interfície.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-la-interficie-d-animals-de-companyia"&gt;
&lt;h2&gt;Exercici 1. La interfície d'animals de companyia&lt;/h2&gt;
&lt;p&gt;Defineix la interfície AnimalDeCompanyia amb els mètodes &lt;tt class="docutils literal"&gt;String
siguesAmistos()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;String juga()&lt;/tt&gt;. Fes que Gos i Gat implementin
la interfície (Canari no cal)&lt;/p&gt;
&lt;p&gt;Aconsegueix que funcioni el codi següent:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.estudi_poo.&lt;/span&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="n"&gt;elteunom&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;animals&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Vector&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaAnimals&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;llistaAnimals&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;AnimalDeCompanyia&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;llistaAnimalsDeCompanyia&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;AnimalDeCompanyia&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="c1"&gt;// crea uns quants animals&lt;/span&gt;
        &lt;span class="n"&gt;Gos&lt;/span&gt; &lt;span class="n"&gt;gos&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Fido&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gos&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimalsDeCompanyia&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gos&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimalsDeCompanyia&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Canari&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Piolin&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Lleo&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Bonifaci&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="c1"&gt;// fa que tots els animals facin coses&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt;     &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;moute&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; fa: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; fa: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fesSoroll&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; fa: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;dorm&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="c1"&gt;// fa que tots els animals de companyia facin coses&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;AnimalDeCompanyia&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;llistaAnimalsDeCompanyia&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(((&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt;     &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;siguesAmistos&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(((&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt;     &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;juga&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;!-- XXX TODO: elimina el cast del bucle d'animals de companyia si vols
que la pista 2 tingui algun sentit. --&gt;
&lt;p&gt;En executar, el codi anterior ha de generar el següent resultat per
sortida estàndard:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Fido camina
Fido fa: nyam nyam
Fido fa: bof bof
Fido fa: ZZZzzzz
Renat camina
Renat fa: myam myam
Renat fa: meww
Renat fa: ZZZzzzz
Piolin vola
Piolin fa: pyam pyam
Piolin fa: piu piu
Piolin fa: pi-pi-pi-pi
Bonifaci camina
Bonifaci fa: gram gram
Bonifaci fa: grrrr
Bonifaci fa: ZRrrrrr
Fido et llepa la cara
Fido busca una pilota
Renat es frega amb la teva cama
Renat esgarrapa el teu sofa
&lt;/pre&gt;
&lt;div class="section" id="pistes"&gt;
&lt;h3&gt;Pistes:&lt;/h3&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;class Gos extends Animal implements AnimalDeCompanyia { ... }&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;AnimalDeCompanyia.getNom()&lt;/tt&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:25:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:interfaces.html</guid><category>java</category></item><item><title>Excepcions</title><link>http://apuntstecnics.herokuapp.com/excepcions.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquests continguts introdueixen el mecanisme de control d'excepcions
en el llenguatge Java.&lt;/p&gt;
&lt;p&gt;Els conceptes que es treballen són: control d'errors, excepcions, captura
d'excepcions (&lt;em&gt;try&lt;/em&gt;/&lt;em&gt;catch&lt;/em&gt;/&lt;em&gt;finally&lt;/em&gt;), llançament d'excepcions (&lt;em&gt;throw&lt;/em&gt;),
excepcions predefinides, creació d'excepcions personalitzades&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="control-d-excepcions"&gt;
&lt;h2&gt;Control d'excepcions&lt;/h2&gt;
&lt;p&gt;Una excepció és un esdeveniment (&lt;em&gt;event&lt;/em&gt;) que representa una condició anormal
en l’execució d’un programa i que atura el flux normal d’execució.&lt;/p&gt;
&lt;p&gt;Les excepcions permeten a les aplicacions detectar i donar resposta situacions
d’error de manera controlada (sense penjar-se)&lt;/p&gt;
&lt;p&gt;Considerem l’exemple de la classe &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;                   &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getHora&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;            &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                     &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getMinut&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;           &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                     &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getSegon&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;           &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                     &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;      &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                     &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setMinut&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;     &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                     &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setSegon&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;     &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                     &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;        &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;         &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Imaginem que volem controlar que els valors que ens introdueixen els
mètodes set siguin correctes.&lt;/p&gt;
&lt;p&gt;Una manera seria la següent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;  &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;D’aquesta manera només hi acceptem hores vàlides.&lt;/p&gt;
&lt;p&gt;El problema és que el programa usuari no té manera de saber que ha
introduït un valor no vàlid!&lt;/p&gt;
&lt;p&gt;Una solució pot ser fer que el mètode cridat retorni informació sobre
el resultat de la seva execució:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/** retorna true si s&amp;#39;ha assignat satisfactòriament */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;  &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;correcte&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;correcte&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;correcte&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Que podem usar d’una manera similar a:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Assignada l&amp;#39;hora correctament&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error assignant l&amp;#39;hora&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Però el nostre programa s’ha fet força més llarg i menys llegible.&lt;/p&gt;
&lt;p&gt;Considerem el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hora.setHora(&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;) valor fora de rang&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Que usarem:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;224&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error assignant l&amp;#39;hora: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Aquest codi genera la sortida:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Error assignant l&amp;#39;hora: java.lang.Exception: Hora.setHora(224) valor fora de rang
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;D'aquesta manera aconseguim que els mètodes set assegurin l'hora
correcta.&lt;/p&gt;
&lt;p&gt;Però, què passa amb el constructor? Tal i com el tenim es
pot crear una hora no vàlida! Doncs fem que generi una excepció si
algun paràmetre no és correcte.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;setMinut&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;setSegon&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Totes les excepcions a Java hereten de la &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html"&gt;classe Throwable&lt;/a&gt;.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Jerarquia de la classe Throwable" src="http://apuntstecnics.herokuapp.com/images/poo018.img001.throwable.png" /&gt;
&lt;/div&gt;
&lt;p&gt;La funció de la classe &lt;tt class="docutils literal"&gt;Throwable&lt;/tt&gt; és indicar que les seves
subclasses poden ser llençades. Ja hem vist signatures de funcions amb
&lt;tt class="docutils literal"&gt;throws&lt;/tt&gt;, oi?&lt;/p&gt;
&lt;p&gt;Podem classificar les excepcions de Java en dos tipus: les que
requereixen ser gestionades explícitament (per exemple amb un bloc
&lt;em&gt;try&lt;/em&gt;/&lt;em&gt;catch&lt;/em&gt;) i les que no requereixen d'aquesta gestió explícita.&lt;/p&gt;
&lt;p&gt;Les excepcions que no requereixen de gestió explícita són les classes
&lt;tt class="docutils literal"&gt;Error&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;RuntimeException&lt;/tt&gt; i les seves subclasses. Aquestes
excepcions representen situacions d'error del sistema de les que
normalment no s'espera que el programa es recuperi. Considera per
exemple les subclasses &lt;tt class="docutils literal"&gt;VirtualMachineError&lt;/tt&gt; i
&lt;tt class="docutils literal"&gt;ClassCastException&lt;/tt&gt; que indiquen, respectivament, que la màquina
virtual de Java s'ha trencat, i que el codi està intentant fer un
&lt;em&gt;cast&lt;/em&gt; incorrecte.&lt;/p&gt;
&lt;p&gt;La gestió explícita de les excepcions és revisada pel compilador.
Aquest no deixarà passar un codi que no gestioni les excepcions
adequadament. Hi ha dues maneres de gestionar una excepció:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;envoltar el codi que pot generar una excepció en un bloc &lt;tt class="docutils literal"&gt;try {}&lt;/tt&gt; i
capturar l'excepció amb una clàusula &lt;tt class="docutils literal"&gt;catch (E e)&lt;/tt&gt; on &lt;tt class="docutils literal"&gt;E&lt;/tt&gt; ha de ser del
tipus d'excepció a gestionar o bé una superclasse d'aquesta (mira
l'exercici &amp;quot;Subclasses d'Exception&amp;quot; per a més detalls).&lt;/li&gt;
&lt;li&gt;indicar al mètode que conté el codi que pot generar l'excepció, que
pot llençar (&lt;em&gt;throws&lt;/em&gt;) una excepció del tipus a gestionar o bé una
superclasse d'aquesta (mira l'exercici &amp;quot;Subclasses d'Exception&amp;quot;
per a més detalls).&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Una advertència abans que comencis a pensar en usar excepcions a tort
i a dret: cal tenir present que el mecanisme de excepcions pot
representar una certa càrrega a algunes versions de la màquina virtual
de Java. Els blocs &lt;em&gt;try&lt;/em&gt;/&lt;em&gt;catch&lt;/em&gt; no tenen cap problema. És a dir, el seu
ús no afegeix cap sobrecàrrega important a l'execució dels teus programes. En
canvi, l'expressió &lt;tt class="docutils literal"&gt;throw&lt;/tt&gt; no resulta tan barata. La màquina virtual ha
de crear un &lt;em&gt;try&lt;/em&gt;/&lt;em&gt;catch&lt;/em&gt; apropiat en temps d'execució entre altres coses.&lt;/p&gt;
&lt;p&gt;La recomanació és que llencis excepcions &lt;em&gt;només&lt;/em&gt; en situacions
excepcionals, al menys quan l'eficiència sigui important. Per exemple,
si has de recórrer molts cops una llista d'elements, sovint resultarà
més eficient anar comprovant a cada iteració si en queden més que
aturar el recorregut en arribar a l'excepció.&lt;/p&gt;
&lt;p&gt;Si tens curiositat pots mirar discussions com aquesta de
&lt;a class="reference external" href="http://stackoverflow.com/questions/299068/how-slow-are-java-exceptions"&gt;stackoverflow&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-hora-amb-excepcions"&gt;
&lt;h3&gt;Exercici 1. Hora amb excepcions&lt;/h3&gt;
&lt;p&gt;Desenvolupeu la classe Hora amb control d'excepcions per tots els
mètodes que puguin generar un error. Incloeu un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que
comprovi cadascun dels mètodes que puguin generar excepcions.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-main-amb-excepcions"&gt;
&lt;h3&gt;Exercici 2. &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; amb excepcions&lt;/h3&gt;
&lt;p&gt;El mètode &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; pot també generar excepcions. Aquestes seran
recollides per l'interpret de java&lt;/p&gt;
&lt;p&gt;Substitueix la funció &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; del programa anterior per la següent.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argM&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
        &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;argH&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;argM&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;argS&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Creada l&amp;#39;hora &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;ha capturat l&amp;#39;excepció &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;  &lt;span class="c1"&gt;// tornem a llençar l&amp;#39;excepció&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;executa tant si hi ha com si no hi ha excepció&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;executa en finalitzar si no hi ha excepció&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Comprova el resultat d'executar amb diferents paràmetres: amb menys de
tres paràmetres, amb paràmetres textuals (ex. java Hora un dos tres),
amb paràmetres fora de rang, amb paràmetres correctes.&lt;/p&gt;
&lt;p&gt;Descriu amb les teves paraules la funcionalitat representa la clàusula
finally{} Se t'acut alguna utilitat? Sinó, troba una per la web!&lt;/p&gt;
&lt;p&gt;El codi mostra el resultat de e.toString() però hi ha més maneres
d'obtenir informació de l'excepció. Descriu amb les teves paraules què
fan els mètodes d'Exception getMessage(), getStackTrace() i
printStackTrace().&lt;/p&gt;
&lt;p&gt;Fixat que el codi llença l'excepció directament amb un&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;  &lt;span class="c1"&gt;// tornem a llençar l&amp;#39;excepció&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Què passaria si substitueixes aquesta línia per la següent? (considera
la informació del constructor a la API de Java)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Exception capturada&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;  &lt;span class="c1"&gt;// tornem a llençar l&amp;#39;excepció&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-renat-amb-excepcions"&gt;
&lt;h3&gt;Exercici 3. Renat amb excepcions&lt;/h3&gt;
&lt;p&gt;Crea una nova versió de la classe la classe GatRenat de manera que les
operacions que puguin donar lloc a error (ex. assignar un nombre de
vides negatiu) disposin d'excepcions. Modifica el programa
&lt;tt class="docutils literal"&gt;EntornGatRenat&lt;/tt&gt; de manera que tracti aquestes excepcions.&lt;/p&gt;
&lt;p&gt;Nota: Fes servir la versió de GatRenat de l'exercici 2 de la secció de
&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/relacions-entre-classes.html"&gt;relacions&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-excepcions-amb-recursos"&gt;
&lt;h3&gt;Exercici 4. Excepcions amb recursos&lt;/h3&gt;
&lt;p&gt;Des de la versió 7 de Java, existeix una variant d'ús del &lt;em&gt;try&lt;/em&gt;. Es
diu &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html"&gt;try amb recursos&lt;/a&gt; i permet especificar recursos com a arguments
de &lt;em&gt;try&lt;/em&gt;. Quan fem servir aquest format, el compilador de Java afegirà
el codi necessari per tancar els recursos tant si es produeix excepció
o no.&lt;/p&gt;
&lt;p&gt;El format és:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;llista&lt;/span&gt; &lt;span class="n"&gt;de&lt;/span&gt; &lt;span class="n"&gt;recursos&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;processament&lt;/span&gt; &lt;span class="n"&gt;dels&lt;/span&gt; &lt;span class="n"&gt;recursos&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Un recurs és una instància d'una classe que implementi la interfície
&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html"&gt;java.lang.AutoCloseable&lt;/a&gt;. Per
tant, en podem fins i tot crear-ne de nous.&lt;/p&gt;
&lt;p&gt;El que ens ofereix és la possibilitat de no haver de tancar el recurs.  Amb els
coneixements que ja hem vist abans, podíem resoldre-ho amb un &lt;em&gt;finally&lt;/em&gt; Això
equival a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;obrir&lt;/span&gt; &lt;span class="n"&gt;recursos&lt;/span&gt;
    &lt;span class="n"&gt;processament&lt;/span&gt; &lt;span class="n"&gt;dels&lt;/span&gt; &lt;span class="n"&gt;recursos&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;tancar&lt;/span&gt; &lt;span class="n"&gt;recursos&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Considera el següent codi que defineix la nostra versió de la comanda
&lt;em&gt;cat&lt;/em&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.BufferedReader&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.FileReader&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Vector&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;CatMeu&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="nf"&gt;llegeix_fitxer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;linies&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BufferedReader&lt;/span&gt; &lt;span class="n"&gt;br&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BufferedReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;FileReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;)))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;linia&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;linia&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;br&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;readLine&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;linia&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Ops: s&amp;#39;ha produït una excepció: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getMessage&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toArray&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;size&lt;/span&gt;&lt;span class="o"&gt;()]);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Indica un o més paràmetres&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;llegeix_fitxer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;linia&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;linia&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;linia&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Línia [%d]: &amp;#39;%s&amp;#39;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linia&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;linia&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Pots executar aquest codi des del mateix directori on tinguis el seu
codi font, fent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java CatMeu fitxerinexistent1 CatMeu.java fitxerinexistent2
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;De manera que puguis veure:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;dos missatges amb excepcions de fitxer o directori no existent&lt;/li&gt;
&lt;li&gt;el contingut del fitxer CatMeu.java.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="es-demana"&gt;
&lt;h4&gt;Es demana&lt;/h4&gt;
&lt;p&gt;Analitza aquest codi fins que et familiaritzis amb el seu
funcionament. A continuació, desenvolupa un programa anomenat
&lt;em&gt;MostraImports&lt;/em&gt; tal que:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;processi la llista d'arguments que se li passin&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;ignori sense cap missatge aquells paràmetres que no siguin fitxers
amb codi font java (per simplicitat, els que no tinguin extensió
.java)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;per cada fitxer .java, que mostri la llista d'imports que conté o el
missatge &amp;quot;Cap import&amp;quot; si no conté cap.&lt;/p&gt;
&lt;p&gt;Per exemple:&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java MostraImports fitxerinexistent CatMeu.java
CatMeu.java:
    java.io.BufferedReader
    java.io.FileReader
    java.io.IOException
    java.util.Vector
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;fes servir el &lt;em&gt;try&lt;/em&gt; amb recursos.&lt;/li&gt;
&lt;li&gt;recorda que la classe &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html"&gt;String&lt;/a&gt; disposa de
moltes utilitats per a poder consultar i extreure parts d'un string.&lt;/li&gt;
&lt;li&gt;no cal que consideris el cas &lt;em&gt;import static&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-subclasses-d-exception"&gt;
&lt;h3&gt;Exercici 5. Subclasses d'Exception&lt;/h3&gt;
&lt;p&gt;Exception no deixa de ser una classe més i com a tal, podem trobar la
seva documentació a
&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html"&gt;http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;A la secció &amp;quot;Direct known subclasses&amp;quot; hi trobem les subclasses
d'Exception que ens ofereix la API. Per exemple hi trobem la ja
coneguda IOException.&lt;/p&gt;
&lt;p&gt;Potser trobar-ne una que sigui més propera al significat de les
nostres excepcions no sempre és fàcil ni possible. Per sort, en podem
crear de noves.&lt;/p&gt;
&lt;p&gt;Considerem el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;HoraNoValidaException&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;HoraNoValidaException&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;missatge&lt;/span&gt;&lt;span class="o"&gt;){&lt;/span&gt;
    &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Excepció Hora no vàlida: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;missatge&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;i&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;                  &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;HoraNoValidaException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;setMinut&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;setSegon&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;   &lt;span class="c1"&gt;// altres mètodes&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;HoraNoValidaException&lt;/span&gt;  &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HoraNoValidaException&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hora.setHora(&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;) valor fora de rang&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;   &lt;span class="c1"&gt;// altres mètodes&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argM&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
            &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;argH&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;argM&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;argS&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Creada l&amp;#39;hora &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;HoraNoValidaException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;ha capturat una excepció d&amp;#39;hora: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;ha capturat una excepció no d&amp;#39;hora: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;  &lt;span class="c1"&gt;// tornem a llençar l&amp;#39;excepció&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;executa tant si hi ha com si no hi ha excepció&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;executa en finalitzar si no hi ha excepció&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;div class="section" id="id1"&gt;
&lt;h4&gt;Es demana&lt;/h4&gt;
&lt;p&gt;Crea una nova classe anomenada &lt;tt class="docutils literal"&gt;Data&lt;/tt&gt; que disposi dels atributs
&lt;tt class="docutils literal"&gt;dia&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;mes&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;any&lt;/tt&gt;, amb els mètodes get/set i constructors que
assegurin que tota instància creada conté una data correcta. Altrament
generarà l'excepció &lt;tt class="docutils literal"&gt;DataNoValidaException&lt;/tt&gt;&lt;/p&gt;
&lt;!-- XXX TODO: indica que, malgrat 'any' és una paraula reservada,
getAny() no ho és. Cal que facin servir aquests noms per facilitar
la correcció automàtica. --&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-embolicant-una-excepcio"&gt;
&lt;h3&gt;Exercici 6. Embolicant una excepció&lt;/h3&gt;
&lt;p&gt;Crea la classe &lt;tt class="docutils literal"&gt;DataHora&lt;/tt&gt; què conté una &lt;tt class="docutils literal"&gt;Data&lt;/tt&gt; i una &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; (exercicis
anteriors) privades.&lt;/p&gt;
&lt;p&gt;La classe &lt;tt class="docutils literal"&gt;DataHora&lt;/tt&gt; oferirà mètodes per a accedir directament als
valors de les propietats de &lt;tt class="docutils literal"&gt;Data&lt;/tt&gt; i de &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; com si fossin seus.
En cas que es produeixi alguna excepció específica de &lt;tt class="docutils literal"&gt;Data&lt;/tt&gt; o de
&lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; en fer servir les classes dels seus atributs, la classe
&lt;tt class="docutils literal"&gt;DataHora&lt;/tt&gt; &amp;quot;traduirà&amp;quot; l'excepció a una pròpia &lt;tt class="docutils literal"&gt;DataHoraException&lt;/tt&gt;
que permetrà incloure l'excepció original en el seu constructor.&lt;/p&gt;
&lt;p&gt;Inclou un &lt;em&gt;main()&lt;/em&gt; similar al de l'exercici anterior, per poder provar
el funcionament.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:24:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:excepcions.html</guid><category>java</category></item><item><title>Generics</title><link>http://apuntstecnics.herokuapp.com/generics.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document és una introducció als &lt;em&gt;genèrics&lt;/em&gt; de Java, a partir de
diferents qüestions respecte els continguts de la &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/index.html"&gt;lliçó Generics&lt;/a&gt; de
&amp;quot;The Java Tutorials&amp;quot;. No es cobreixen, però, tots els continguts
d'aquest &lt;em&gt;tutorial&lt;/em&gt;. Amb tot, t'animo a llegir el contingut sencer de
manera que disposis d'una visió més global del tema.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;Genèrics&lt;/h2&gt;
&lt;div class="section" id="el-mon-sense-generics"&gt;
&lt;h3&gt;El món sense genèrics&lt;/h3&gt;
&lt;p&gt;En versions antigues de Java (abans de la versió Java SE 5.0) ja
estaven disponibles algunes classes per a agrupar objectes.
Per exemple, &lt;tt class="docutils literal"&gt;java.util.Vector&lt;/tt&gt; implementa un &lt;em&gt;array&lt;/em&gt; d'objectes que
pot ampliar o reduir la seva mida per a adaptar-se a les dades que
conté.&lt;/p&gt;
&lt;p&gt;El mètode per a afegir una nova entrada al final del vector era &lt;tt class="docutils literal"&gt;boolean
add(Object o)&lt;/tt&gt;. Donat que tota classe és descendent de &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;, el
resultat és que podíem afegir instàncies de qualsevol classe.&lt;/p&gt;
&lt;p&gt;El mètode &lt;tt class="docutils literal"&gt;Object get(int index)&lt;/tt&gt; ens permetia recuperar un element
del vector a partir de la seva posició.&lt;/p&gt;
&lt;p&gt;Un exemple d'ús seria:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Vector&lt;/span&gt; &lt;span class="n"&gt;estol&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;estol&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;estol&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;    &lt;span class="c1"&gt;// hem de fer el cast&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En principi això pot semblar que no és cap problema. Només una
incomoditat haver de fer un &lt;em&gt;cast&lt;/em&gt; quan ja sabem el tipus de tots els
elements que hi guardem al vector.&lt;/p&gt;
&lt;p&gt;El problema es troba en la detecció d'errors. En cas que hi hagi
error de tipus (que el que ens retorna el vector no sigui realment un
gat) no ens assabentem fins que no executem el programa. El compilador
no en sap res de tipus i se'n refia de nosaltres quan li concretem el
tipus amb un &lt;em&gt;cast&lt;/em&gt;. En programes molt més complexos que a l'exemple,
això pot portar a que l'error no es detecti fins que, després de molt
de temps d'ús, el programa es penja per una condició que mai abans
s'havia produït.&lt;/p&gt;
&lt;p&gt;Per oferir la possibilitat de detectar aquest tipus d'error en temps
de compilació, al Java SE 5.0 es van introduir els &lt;em&gt;genèrics&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-perque-generics"&gt;
&lt;h3&gt;Exercici 1. Perquè genèrics&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/why.html"&gt;Why generics&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Què permeten els genèrics?&lt;/li&gt;
&lt;li&gt;En que s'assemblen els &lt;em&gt;paràmetres formals&lt;/em&gt; als &lt;em&gt;paràmetres de
tipus&lt;/em&gt;?&lt;/li&gt;
&lt;li&gt;En que es diferencien els &lt;em&gt;paràmetres formals&lt;/em&gt; dels
&lt;em&gt;paràmetres de tipus&lt;/em&gt;?&lt;/li&gt;
&lt;li&gt;Descriu amb les teves paraules, tres avantatges de l'ús de genèrics
al nostre codi.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-classes-generiques"&gt;
&lt;h3&gt;Exercici 2. Classes genèriques&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/types.html"&gt;Generic Types&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Què és un &lt;em&gt;tipus genèric&lt;/em&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Considera l'exemple de la versió simple de la classe &lt;tt class="docutils literal"&gt;Box&lt;/tt&gt;
(secció &lt;em&gt;A Simple Box Class&lt;/em&gt;).  Indica perquè no hi podem afegir
tipus primitius però sí qualsevol altre element.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Un altre cop sobre la caixa simple: desenvolupa un programa
anomenat &lt;tt class="docutils literal"&gt;CaixaDeGats&lt;/tt&gt; que creï una caixa (&lt;tt class="docutils literal"&gt;Box&lt;/tt&gt;), hi
afegeixi un gat Renat &lt;a class="footnote-reference" href="#renat" id="id2"&gt;[1]&lt;/a&gt; i després el recuperi i mostri el
seu nom per sortida estàndard.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Considera la secció &lt;em&gt;Invoking and Instantiating a Generic Type&lt;/em&gt;. De
quina manera es declara una referència d'una classe genèrica? De
quina manera s'instancia una classe genèrica?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Considera ara la versió de la caixa genèrica que apareix a la
secció &lt;em&gt;A Generic Version of the Box Class&lt;/em&gt;. Desenvolupa una nova
versió de &lt;tt class="docutils literal"&gt;CaixaDeGats&lt;/tt&gt; que faci servir aquesta nova versió
genèrica de la classe &lt;tt class="docutils literal"&gt;Box&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;És obligatori anomenar als paràmetres de tipus amb una &lt;tt class="docutils literal"&gt;T&lt;/tt&gt;? Si és
que no, hi trobes alguna raó per fer servir aquest nom?  ----&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Indica una manera alternativa d'escriure el següent codi a partir
de Java SE 7&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Box&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;gatBox&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Box&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A la secció &lt;em&gt;Multiple Type Parameters&lt;/em&gt; veiem un exemple
d'&lt;em&gt;interface&lt;/em&gt; i de classe genèrics amb més d'un paràmetre de tipus.
Es podria fer servir &lt;tt class="docutils literal"&gt;T&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;S&lt;/tt&gt; en comptes de &lt;tt class="docutils literal"&gt;K&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;V&lt;/tt&gt;?
Perquè creus que han fet servir &lt;tt class="docutils literal"&gt;K&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;V&lt;/tt&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-metodes-generics"&gt;
&lt;h3&gt;Exercici 3. Mètodes genèrics&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/methods.html"&gt;Generic Methods&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Què és un mètode genèric?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Els mètodes genèrics han de ser sempre estàtics?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Considera el següent codi que fa servir les classes &lt;tt class="docutils literal"&gt;Util&lt;/tt&gt; i
&lt;tt class="docutils literal"&gt;Pair&lt;/tt&gt; d'aquest article:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Payme&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Gos&lt;/span&gt; &lt;span class="n"&gt;gos1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Fido&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Gos&lt;/span&gt; &lt;span class="n"&gt;gos2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Rantanplan&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Gos&lt;/span&gt; &lt;span class="n"&gt;gos3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Fido&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;gat1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;gos1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;gat1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;gos1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;p1(%s,%s) == p2(%s,%s) -&amp;gt; %s\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getKey&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getKey&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt;
                &lt;span class="n"&gt;Util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;compare&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;p3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;gat1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;gos2&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;p1(%s,%s) == p3(%s,%s) -&amp;gt; %s\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getKey&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getKey&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt;
                &lt;span class="n"&gt;Util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;compare&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p3&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;p4&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;gat1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;gos3&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;p1(%s,%s) == p4(%s,%s) -&amp;gt; %s\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getKey&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p4&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getKey&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p4&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt;
                &lt;span class="n"&gt;Util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;compare&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p4&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Executa'l i descriu el perquè de cada línia.&lt;/p&gt;
&lt;p&gt;En cas de que no disposis de les classes Gat i Gos, simplement
crea una versió mínima que permeti l'execució d'aquest codi.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-generics-i-herencia"&gt;
&lt;h3&gt;Exercici 4. Genèrics i herència&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/inheritance.html"&gt;Generics, Inheritance, and Subtypes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Perquè, si tenim el mètode següent&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;domestica&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;són vàlides les següents crides? &lt;a class="footnote-reference" href="#animal" id="id3"&gt;[2]&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;domestica&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
&lt;span class="n"&gt;domestica&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Fido&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Perquè, si tenim el mètode següent&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;domestica&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;no és vàlid el següent codi?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;domesticaGats&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;domestica&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Perquè a l'exemple que apareix a la secció &lt;em&gt;Generic Classes and
Subtyping&lt;/em&gt;, &lt;tt class="docutils literal"&gt;PayloadList&amp;lt;String, Integer&amp;gt;&lt;/tt&gt; és subclasse de
&lt;tt class="docutils literal"&gt;List&amp;lt;String&amp;gt;&lt;/tt&gt;? Penses que també ho seria &lt;tt class="docutils literal"&gt;PayloadList&amp;lt;Integer,
String&amp;gt;&lt;/tt&gt;? Perquè?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;TestGen1&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%s &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;al&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;();&lt;/span&gt;
        &lt;span class="n"&gt;al&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hola&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;al&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;adéu&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;al&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Perquè funciona la crida &lt;tt class="docutils literal"&gt;mostra(al)&lt;/tt&gt; malgrat es fa servir
&lt;tt class="docutils literal"&gt;ArrayList&amp;lt;String&amp;gt;&lt;/tt&gt; i no &lt;tt class="docutils literal"&gt;List&amp;lt;String&lt;/tt&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;TestGen2&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%s &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;al&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;();&lt;/span&gt;
        &lt;span class="n"&gt;al&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hola&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;al&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;adéu&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;al&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Perquè &lt;strong&gt;no&lt;/strong&gt; funciona la crida &lt;tt class="docutils literal"&gt;mostra(al)&lt;/tt&gt; malgrat &lt;tt class="docutils literal"&gt;String&lt;/tt&gt;
és un &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-opcional-delimitacio-de-parametres-de-tipus"&gt;
&lt;h3&gt;Exercici 5. (Opcional) Delimitació de paràmetres de tipus&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/bounded.html"&gt;Bounded Type Parameters&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Considera la següent classe&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt; &lt;span class="n"&gt;animal&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt; &lt;span class="n"&gt;animal&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;animal&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;animal&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt; &lt;span class="nf"&gt;getEngabiat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;animal&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;I el següent codi que la prova:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Test&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;e1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Misteri&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;e2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;e1: %s\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getEngabiat&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;e2: %s\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getEngabiat&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Descriu que implica el contingut entre &amp;lt;&amp;gt; a la definició de
la classe &lt;tt class="docutils literal"&gt;Engabiat&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Perquè funciona &lt;tt class="docutils literal"&gt;Test&lt;/tt&gt;? Prova-ho!&lt;/p&gt;
&lt;p&gt;En cas de no disposar de les classes &lt;tt class="docutils literal"&gt;Animal&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;Gat&lt;/tt&gt;, crea una
versió de cada de manera que funcioni &lt;tt class="docutils literal"&gt;Test&lt;/tt&gt; (recorda un Gat &lt;strong&gt;és
un&lt;/strong&gt; Animal)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Funcionaria si la instanciació fes servir el &amp;quot;truc&amp;quot; del diamant per
demanar que el compilador infereixi el tipus?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Prova-ho. Que afegeixis alguna explicació del perquè del resultat
en aquesta pregunta és opcional.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Funcionaria si la declaració de &lt;tt class="docutils literal"&gt;Engabiat&lt;/tt&gt; fos la següent?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Perquè?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Ara que ja saps aquest concepte, proposa una modificació de la
classe &lt;tt class="docutils literal"&gt;TestGen2&lt;/tt&gt; del darrer exemple de l'exercici anterior, de
manera que funcioni el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; tal i com apareix a l'exemple.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;!-- private  static &lt;T extends Object&gt; void mostra(ArrayList&lt;T&gt; l) --&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-opcional-contenidors-amb-herencia"&gt;
&lt;h3&gt;Exercici 6. (Opcional) Contenidors amb herència&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/upperBounded.html"&gt;Upper Bounded Wildcards&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.ArrayList&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Animtest&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;?&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;la&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;la&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%s &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;aa&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;();&lt;/span&gt;
        &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Mishifú&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Gos&lt;/span&gt; &lt;span class="n"&gt;gos1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Fido&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;aa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;aa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat2&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;aa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gos1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;aa&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;ag&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;();&lt;/span&gt;
        &lt;span class="n"&gt;ag&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;ag&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat2&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ag&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Perquè funciona la primera crida a &lt;tt class="docutils literal"&gt;mostra()&lt;/tt&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Perquè funciona la segona crida a &lt;tt class="docutils literal"&gt;mostra()&lt;/tt&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Què vol dir l'interrogant (&lt;tt class="docutils literal"&gt;?&lt;/tt&gt;) a la definició del paràmetre
&lt;tt class="docutils literal"&gt;la&lt;/tt&gt; de &lt;tt class="docutils literal"&gt;mostra()&lt;/tt&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Funcionaria aquest codi si la definició fos simplement?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;?&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;la&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Perquè?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Què hauríem de canviar perquè funcionés sense l'interrogant. Ex.
&lt;tt class="docutils literal"&gt;void mostra(T animal)&lt;/tt&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A partir de les respostes de les dues preguntes anteriors, indica
quin avantatge es desprèn de l'ús de &lt;em&gt;wildcards&lt;/em&gt; en aquest exemple.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;!-- private static &lt;T extends Animal&gt; void mostra(ArrayList&lt;T&gt; la) { --&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-opcional-limitacions-dels-generics"&gt;
&lt;h3&gt;Exercici 7. (Opcional) Limitacions dels genèrics&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/restrictions.html"&gt;Restrictions on Generics&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Descriu amb les teves paraules i de manera resumida cadascuna de les
limitacions que apareixen en aquest article.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;hr class="docutils" /&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="renat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En cas que no disposis d'aquesta classe, fes servir
simplement un String.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="animal" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Pots suposar que Gat i Gos són subclasses d'animal.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:23:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:generics.html</guid><category>java</category></item><item><title>Contenidors ordenats</title><link>http://apuntstecnics.herokuapp.com/contenidors-ordenats.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document introdueix diferents maneres de agrupar informació de
manera seqüencial en un objecte Java.&lt;/p&gt;
&lt;p&gt;La línia general és la comparació de les diferents estructures segons
eficiència, de manera que permetin fer-se una idea de en quins casos
una solució es preferible a una altra.&lt;/p&gt;
&lt;p&gt;Comença amb una discussió respecte l'ús dels Strings i s'introdueix
&lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;A continuació es consideren els &lt;tt class="docutils literal"&gt;Arrays&lt;/tt&gt; i la classe alternativa &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Finalment es comparen tres estructures seqüèncials: &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;,
&lt;tt class="docutils literal"&gt;ArrayList&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;LinkedList&lt;/tt&gt; basat en l'article &lt;a class="reference external" href="http://onjava.com/pub/a/onjava/2001/05/30/optimization.html"&gt;The Performance of
Java's Lists&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="strings"&gt;
&lt;h2&gt;Strings&lt;/h2&gt;
&lt;p&gt;La classe &lt;tt class="docutils literal"&gt;String&lt;/tt&gt; és una de les primeres que coneixem en Java.
Resulta una classe molt útil i és especialment estimada pel nous
programadors de Java que venen de llenguatges com ara C.&lt;/p&gt;
&lt;p&gt;La classe String presenta, però, un problema que cal tenir present:
baix rendiment en les modificacions.&lt;/p&gt;
&lt;p&gt;El problema és que en Java, els Strings són immutables. Això vol dir
que un cop creats, no podem modificar el seu valor. Mentre que per a
moltes aplicacions dels Strings, això no representa cap problema, per
altres pot suposar un alentiment important en l'execució.&lt;/p&gt;
&lt;p&gt;Per exemple, imagina que ens cal posar en majúscules la inicial d'un
String. La manera que ens ofereix la classe és crear un nou String a
partir de dues peces de l'original, per exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;paraula&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;paraula&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;paraula&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;toUpperCase&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;paraula&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;o potser una mica millor&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;paraula&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;paraula&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Character&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toUpperCase&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;paraula&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;charAt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;paraula&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En qualsevol dels dos casos, estem creant dos o més Strings, mentre
que en C ho hagéssim resolt amb un econòmic:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;paraula&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]=&lt;/span&gt;&lt;span class="n"&gt;toupper&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;paraula&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per millorar el rendiment, hi ha diferents possibilitats.
Malauradament no hi ha una resposta única per decidir &lt;em&gt;la manera més
eficient sempre&lt;/em&gt;. Per tant, cal analitzar cas a cas depenent de l'ús
que fem dels Strings.&lt;/p&gt;
&lt;div class="section" id="proves-de-rendiment"&gt;
&lt;h3&gt;Proves de rendiment&lt;/h3&gt;
&lt;p&gt;Analitzem quan ens costa realitzar alguna tasca amb Strings. Per
exemple, suposa que ens interessa construir un String a partir
d'afegir-hi substrings al començament. El codi podria ser quelcom
similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;mida&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;str&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;A&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Una manera habitual de comprovar quan costa realitzar una certa tasca es
comptant el temps que passa des de que se la crida fins que acaba
l'execució. Per exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;tempsInicial&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nanoTime&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="err"&gt;«&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;analitzar&lt;/span&gt; &lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;tempsFinal&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nanoTime&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Cal tenir present que diferents execucions sobre la mateixa prova
ofereixen resultats diferents. Hi ha diferents raons, des de la
càrrega de l'equip en el moment de la prova fins als optimitzadors que
disposi la implementació de Java que estiguem fent servir.&lt;/p&gt;
&lt;p&gt;Per aquesta raó, pot ser adequat
realitzar la prova vàries vegades i calcular la desviació tipus per
tenir una idea de la dispersió de les mesures.&lt;/p&gt;
&lt;p&gt;Simplificant-ho molt, si per una prova concreta els resultat mig de
rendiment d'una estructura es troba dins del rang definit pel resultat
mig +/- la desviació tipus d'una altra estructura, podríem deduir que
el rendiment de les dues estructures no és significativament diferent
per a aquella prova.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-comparacio-string"&gt;
&lt;h3&gt;Exercici 1. Comparació String&lt;/h3&gt;
&lt;p&gt;En aquest primer exercici compararem el rendiment de composar un
String des de l'inici (&lt;tt class="docutils literal"&gt;str = &amp;quot;A&amp;quot; + str;&lt;/tt&gt;) i des del final (&lt;tt class="docutils literal"&gt;str =
str + &amp;quot;A&amp;quot;;&lt;/tt&gt;)&lt;/p&gt;
&lt;p&gt;Realitza 5 proves de cadascuna de les dues opcions amb mides de 10,
1000 i 100000. Calcula la mitja i la desviació tipus i omple
una taula com la següent:&lt;/p&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="35%" /&gt;
&lt;col width="22%" /&gt;
&lt;col width="22%" /&gt;
&lt;col width="22%" /&gt;
&lt;/colgroup&gt;
&lt;thead valign="bottom"&gt;
&lt;tr&gt;&lt;th class="head"&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class="head"&gt;10&lt;/th&gt;
&lt;th class="head"&gt;1000&lt;/th&gt;
&lt;th class="head"&gt;100000&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;String inserció ini&lt;/td&gt;
&lt;td&gt;xxxx (yyyy)&lt;/td&gt;
&lt;td&gt;xxxx (yyyy)&lt;/td&gt;
&lt;td&gt;xxxx (yyyy)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;String inserció fin&lt;/td&gt;
&lt;td&gt;xxxx (yyyy)&lt;/td&gt;
&lt;td&gt;xxxx (yyyy)&lt;/td&gt;
&lt;td&gt;xxxx (yyyy)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;On &lt;tt class="docutils literal"&gt;xxxx&lt;/tt&gt; indica la mitja i &lt;tt class="docutils literal"&gt;(yyyy)&lt;/tt&gt; la desviació tipus.&lt;/p&gt;
&lt;p&gt;També caldrà que aportis algunes dades de l'equip on executes les
proves: processador, versió del SO, versió de jre.&lt;/p&gt;
&lt;p&gt;En un equip GNU/Linux, pots obtenir aquestes dades (i més) amb les
comandes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;$ lshw &lt;span class="pre"&gt;-class&lt;/span&gt; cpu &lt;span class="pre"&gt;-class&lt;/span&gt; memory&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;$ uname &lt;span class="pre"&gt;-a&lt;/span&gt;&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;$ java &lt;span class="pre"&gt;-version&lt;/span&gt;&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per fer-ho fàcil, pots afegir a l'informe directament el resultat
d'aquestes crides.&lt;/p&gt;
&lt;p&gt;Finalment afegeix al teu informe una interpretació dels resultats que
inclogui, com a mínim, si si hi trobes una diferència significativa en
les dues maneres de composar el String.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pistes&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;Per calcular la mitja d'un &lt;tt class="docutils literal"&gt;long[]&lt;/tt&gt; pots fer servir:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calculaMitja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;

    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Per calcular la desviació tipus d'un &lt;tt class="docutils literal"&gt;long[]&lt;/tt&gt; pots fer servir:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calculaDesviacio&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;desviacio&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;mitja&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;calculaMitja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;desviacio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;desviacio&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;mitja&lt;/span&gt; &lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;quadrats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;quadrats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;quadrats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;desviacio&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;desviacio&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;quadrats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;quadrats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sqrt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Donat que hauràs de preparar més d'un informe com aquest, es
recomanable que preparis una mena de plantilla amb les següents
seccions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;Dades de la prova&lt;/p&gt;
&lt;p&gt;Inclou com a mínim: descripció, autor i data de la prova.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Resultats de la prova&lt;/p&gt;
&lt;p&gt;La taula de resultats.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Interpretació dels resultats&lt;/p&gt;
&lt;p&gt;La teva interpretació dels resultats segons et demani l'enunciat.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Descripció de l'equip&lt;/p&gt;
&lt;p&gt;Informació de l'equip, SO i JRE.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="preparant-l-entorn-de-proves-de-rendiment"&gt;
&lt;h3&gt;Preparant l'entorn de proves de rendiment&lt;/h3&gt;
&lt;p&gt;Com que haurem de realitzar l'anàlisi de rendiment en diverses
ocasions, ens pot ser interessant preparar alguna mena d'entorn de
proves de rendiment que ens faciliti la feina.&lt;/p&gt;
&lt;p&gt;Un entorn senzill per realitzar proves de rendiment podria tenir el
següent aspecte:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Entorn de proves" src="http://apuntstecnics.herokuapp.com/images/poo020.img001.entorn_proves.png" /&gt;
&lt;/div&gt;
&lt;p&gt;La classe &lt;tt class="docutils literal"&gt;Tester&lt;/tt&gt; permetria, a partir del mètode &lt;tt class="docutils literal"&gt;test(String,
Testable)&lt;/tt&gt;, comprovar el temps d'execució d'un mètode tenint en
comptes diferents mides de prova i generaria un conjunt d'estadístics
resultants: bàsicament temps mig d'execució de les &lt;em&gt;num_proves&lt;/em&gt; i
desviació tipus per cadascuna de les mides de prova.&lt;/p&gt;
&lt;p&gt;Depenent de la potència de la teva màquina, potser voldràs fer més o
menys proves, o amb mides més grans o més petits. Per aquesta raó
&lt;tt class="docutils literal"&gt;Tester&lt;/tt&gt; ofereix diferents maneres d'inicialitzar-lo. Es proposa com
a valors per defecte de &lt;em&gt;num_proves&lt;/em&gt; el 5 i per &lt;em&gt;mides&lt;/em&gt; 10, 1000,
10000.&lt;/p&gt;
&lt;p&gt;&lt;tt class="docutils literal"&gt;Tester&lt;/tt&gt; fa servir la &lt;em&gt;interface&lt;/em&gt; &lt;tt class="docutils literal"&gt;Testable&lt;/tt&gt; que especifica dos
mètodes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;setMida(int mida)&lt;/tt&gt; permet especificar la mida de la prova. El
temps requerit per executar aquest mètode no computa amb el càlcul
total. D'aquesta manera, aquest mètode és adequat per realitzar
tasques d'inicialització de la prova.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;crida()&lt;/tt&gt;. Aquest serà el mètode que cridarà &lt;tt class="docutils literal"&gt;Tester&lt;/tt&gt; amb
cadascuna de les mides.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-l-entorn-de-proves-de-rendiment"&gt;
&lt;h3&gt;Exercici 2. L'entorn de proves de rendiment&lt;/h3&gt;
&lt;p&gt;Munta l'entorn de proves descrit abans.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pista&lt;/strong&gt;: potser voldràs aïllar la prova real de la resta dels
càlculs i preparacions estadístiques amb un codi similar a:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="nf"&gt;realitzaProva&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Testable&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mida&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setMida&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mida&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// la preparació no compta en el temps&lt;/span&gt;
    &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;tempsInicial&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nanoTime&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;crida&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;tempsFinal&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nanoTime&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tempsFinal&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;tempsInicial&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Torna a passar les proves de l'exercici 1 tot fent servir el teu nou
entorn de proves i omple la taula amb els nous resultats.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-stringbuilder-en-insercio"&gt;
&lt;h3&gt;Exercici 3. &lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt; en inserció&lt;/h3&gt;
&lt;p&gt;Considera la classe &lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt; (consulta l'&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html"&gt;API de
StringBuilder&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;Prepara les següents proves amb aquesta classe i compara-les amb les
que has obtingut fins ara amb String:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;StringBuilder amb constructor per defecte inserint a l'inici (&lt;tt class="docutils literal"&gt;insert(0, &amp;quot;A&amp;quot;)&lt;/tt&gt;)&lt;/li&gt;
&lt;li&gt;StringBuilder amb constructor per defecte inserint al final (&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;append(&amp;quot;A&amp;quot;)&lt;/span&gt;&lt;/tt&gt;)&lt;/li&gt;
&lt;li&gt;StringBuilder construït amb &lt;tt class="docutils literal"&gt;StringBuilder(int capacity)&lt;/tt&gt; i
inserint a l'inici.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Omple una taula amb els resultats i elabora un petit informe que
compari el que has obtingut. Inclou a l'informe una comparativa amb
els resultats obtinguts amb Strings.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-stringbuilder-en-modificacio"&gt;
&lt;h3&gt;Exercici 4. &lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt; en modificació&lt;/h3&gt;
&lt;p&gt;Posarem novament a prova les classes &lt;tt class="docutils literal"&gt;String&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt;.
Aquest cop, construirem amb el mètode &lt;tt class="docutils literal"&gt;setMida(int)&lt;/tt&gt; un
&lt;tt class="docutils literal"&gt;String&lt;/tt&gt; / &lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt; tot de &amp;quot;A&amp;quot;s, i al mètode &lt;tt class="docutils literal"&gt;crida()&lt;/tt&gt;
simplement passarem, caràcter per caràcter, a minúscules.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pista&lt;/strong&gt;: El codi de test per &lt;tt class="docutils literal"&gt;String&lt;/tt&gt; podria ser similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;mida&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;str&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;Character&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toLowerCase&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;charAt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Omple una taula amb els resultats obtinguts i elabora un breu informe
comparant els resultats.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-string-vs-stringbuilder"&gt;
&lt;h3&gt;Exercici 5. &lt;tt class="docutils literal"&gt;String&lt;/tt&gt; vs &lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt;&lt;/h3&gt;
&lt;p&gt;A partir dels resultats que has obtingut, prepara un petit resum en el
que indicaràs en quins casos és preferible fer servir
&lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt; i en quins en tindrem prou amb &lt;tt class="docutils literal"&gt;String&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Nota: tingues en comptes que per a fer servir el resultat de
&lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt; probablement haurem de passar-lo a &lt;tt class="docutils literal"&gt;String&lt;/tt&gt;.
Potser voldràs comprovar quin cost té fer-ho per elaborar les teves
conclusions.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="arrays"&gt;
&lt;h2&gt;Arrays&lt;/h2&gt;
&lt;p&gt;Els &lt;em&gt;arrays&lt;/em&gt; són una manera senzilla d'agrupar dades d'un mateix tipus
en forma de seqüència.&lt;/p&gt;
&lt;p&gt;A la secció anterior hem analitzat un tipus d'&lt;em&gt;array&lt;/em&gt; particular
(seqüència de caràcters) encapsulat dins la classe &lt;tt class="docutils literal"&gt;String&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;En aquesta secció, analitzarem el rendiment d'aquesta estructura i
veurem algunes maneres d'optimitzar-la.&lt;/p&gt;
&lt;div class="section" id="exercici-6-copia-d-arrays"&gt;
&lt;h3&gt;Exercici 6. Còpia d'&lt;em&gt;arrays&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;Construirem una prova que donat un &lt;em&gt;array&lt;/em&gt; (de diferents mides) de
valors enters (ex. de 1 a mida de la prova), calculem quan de temps
ens costa copiar els valors a un altre &lt;em&gt;array&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Farem servir dues aproximacions:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&amp;quot;a ma&amp;quot;: amb un bucle copiarem un a un cada valor de l'&lt;em&gt;array&lt;/em&gt;
inicial al final.&lt;/li&gt;
&lt;li&gt;automàtic: farem servir la utilitat &lt;tt class="docutils literal"&gt;System.arraycopy()&lt;/tt&gt;
(consulteu l'&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/System.html"&gt;API d'arraycopy()&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Elabora una taula de resultats i un informe comparatiu.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Recomanació&lt;/strong&gt;: fes servir la classe &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; (mira l'&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/index.html?java/lang/System.html"&gt;API de
Integer&lt;/a&gt;)
en comptes del tipus primitiu &lt;tt class="docutils literal"&gt;int&lt;/tt&gt; si vols estalviar-te feina per
un exercici posterior.  Si disposes de prou temps, pots també fer les
dues opcions, de manera que podràs comprovar el rendiment de la
creació massiva d'objectes en Java.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="operacions-costoses-amb-arrays"&gt;
&lt;h3&gt;Operacions costoses amb &lt;em&gt;arrays&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;Fer servir &lt;em&gt;arrays&lt;/em&gt; sol ser convenient si volem una agrupació
seqüèncial d'elements del mateix tipus amb un accés directe ràpid (per
consultes i modificacions), que només s'amplia afegint nous elements
al final i, sobretot, del que coneixem la mida màxima (nombre màxim
d'elements que contindrà) en el moment de la creació.&lt;/p&gt;
&lt;p&gt;Quan les operacions que hem de realitzar amb l'&lt;em&gt;array&lt;/em&gt; inclouen
inserció o eliminació d'elements en qualsevol punt de l'&lt;em&gt;array&lt;/em&gt;, tenim
un problema. Ens cal &amp;quot;moure&amp;quot; els elements cap a un costat i cap a
l'altre.&lt;/p&gt;
&lt;p&gt;Quan la mida total de la seqüència ens és desconeguda o pot variar
significativament (creixent i decreixent) al llarg del seu ús, el
problema és encara &amp;quot;pitjor&amp;quot;: ens trobem amb la complexitat d'anar
ampliant o/i encongint l'&lt;em&gt;array&lt;/em&gt;.  La manera habitual sol ser, crear
un nou &lt;em&gt;array&lt;/em&gt; amb la nova mida i copiar-hi les dades. Com que
l'operació és costosa, sovint es deixa un cert marge d'espai
disponible per a ampliacions.&lt;/p&gt;
&lt;p&gt;Java ens ofereix una classe que ens fa totes aquestes operacions sense
haver-les d'implementar nosaltres. Consulta l'&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/index.html?java/lang/System.html"&gt;API de Vector&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-rendiment-de-vector"&gt;
&lt;h3&gt;Exercici 7. Rendiment de &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;&lt;/h3&gt;
&lt;p&gt;Defineix una prova per poder comparar el rendiment de la classe
&lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; amb l'ús dels &lt;em&gt;arrays&lt;/em&gt; analitzat al'exercici anterior.&lt;/p&gt;
&lt;p&gt;Com que &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; només pot emmagatzemar objectes (no tipus
primitius), declara un &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; de &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; amb el constructor
&lt;tt class="docutils literal"&gt;Vector(int initialCapacity)&lt;/tt&gt; i omple'l amb els valors dels enters,
per exemple amb &lt;tt class="docutils literal"&gt;add()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Les dues variants de còpia seran:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&amp;quot;a mà&amp;quot;: com amb la primera d'&lt;em&gt;arrays&lt;/em&gt; copiarem element a element
fent servir un bucle.&lt;/li&gt;
&lt;li&gt;automàtic: fent servir el constructor &lt;tt class="docutils literal"&gt;Vector(Collection&amp;lt;? extends
E&amp;gt; c)&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Com sempre, omple la taula de resultats i elabora un informe
comparatiu. Inclou la comparativa amb els resultats de l'exercici
anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-8-opcional-operacions-de-vector"&gt;
&lt;h3&gt;Exercici 8. [opcional] Operacions de &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;&lt;/h3&gt;
&lt;p&gt;Si disposes de prou temps, pot ser un bon exercici implementar i
comparar algunes de les funcionalitats que ens ofereix &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Aquestes poden ser:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;inserció dels valors d'un &lt;em&gt;array&lt;/em&gt;/&lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; des del principi&lt;/p&gt;
&lt;p&gt;Requereix la implementació del desplaçament cap al final de la
seqüència a cada inserció.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;eliminat dels valors d'un &lt;em&gt;array&lt;/em&gt;/&lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; des del principi&lt;/p&gt;
&lt;p&gt;Requereix la implementació del desplaçament cap a l'inici de la
seqüència de la resta d'elements.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;ampliació de l'espai&lt;/p&gt;
&lt;p&gt;A partir d'un &lt;em&gt;array&lt;/em&gt;/&lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; amb unes dimensions inicials
determinades (i comunes) i un increment també comú, implementar una
prova que permeti anar incrementant les seqüències de manera que
requereixin fer l'increment de mida vàries vegades.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Disposes de quelcom més que idees per implementar alguna d'aquestes
funcionalitats a l'article &lt;a class="reference external" href="http://onjava.com/pub/a/onjava/2001/05/30/optimization.html"&gt;The Performance of Java's Lists&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="llistes"&gt;
&lt;h2&gt;Llistes&lt;/h2&gt;
&lt;p&gt;A la secció anterior hem analitzat diferents maneres d'agrupar
informació d'un mateix tipus en forma de seqüència, fins a arribar a
la classe &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; que ens ofereix un bon nombre de funcionalitats
ja implementades.&lt;/p&gt;
&lt;p&gt;Tot i sent molt convenient, la classe &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; presenta alguns
problemes de rendiment en determinades situacions. Per aquesta raó,
els desenvolupadors de l'API de Java han inclòs altres classes.&lt;/p&gt;
&lt;p&gt;En aquesta secció n'analitzarem bàsicament les classes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;ArrayList&lt;/tt&gt;: &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html"&gt;API ArrayList&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;LinkedList&lt;/tt&gt;: &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html"&gt;API LinkedList&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Nota&lt;/strong&gt;: normalment a la programació orientada a objectes, amb
l'encapsulació es pretén ocultar informació sobre la implementació
interna de les classes. En aquest cas, els dissenyadors de l'API de
Java s'estan saltant aquest principi donant-nos pistes de com estan
implementades aquestes classes. La raó principal es resumeix amb la
paraula &lt;strong&gt;rendiment&lt;/strong&gt;. El coneixement de la implementació interna
d'aquestes classes permet els programadors de Java decidir-se per la
classe que millor s'ajusta a les necessitats del programa que està
realitzant.&lt;/p&gt;
&lt;div class="section" id="exercici-9-insercio-sequencial"&gt;
&lt;h3&gt;Exercici 9. Inserció seqüencial&lt;/h3&gt;
&lt;p&gt;Defineix una prova amb les tres classe de manera que inserim una
seqüència de &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; al final (&lt;tt class="docutils literal"&gt;add()&lt;/tt&gt;)&lt;/p&gt;
&lt;p&gt;Per &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;ArrayList&lt;/tt&gt; farem dues versions:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;amb el constructor per defecte&lt;/li&gt;
&lt;li&gt;amb el constructor que permet inicialitzar l'espai que requerirà la
prova.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per &lt;tt class="docutils literal"&gt;LinkedList&lt;/tt&gt; només en fem una perquè la seva implementació
interna la fa insensible a saber la mida final.&lt;/p&gt;
&lt;p&gt;És a dir, en total hi ha 5 variants: dues per &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;, dues per
&lt;tt class="docutils literal"&gt;ArrayList&lt;/tt&gt; i una per &lt;tt class="docutils literal"&gt;LinkedList&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-consulta-sequencial"&gt;
&lt;h3&gt;Exercici 10. Consulta seqüèncial&lt;/h3&gt;
&lt;p&gt;Defineix una prova amb les tres classe de manera que inicialment
disposem d'una seqüència creixent de &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; i la ordeni
decreixement amb el mètode de la bombolla.&lt;/p&gt;
&lt;p&gt;Recorda que aquest mètode d'ordenació es basa en anar comparant dos a
dos i intercanviant els valors que no es troben en ordre, fent
passades per tots els elements fins que no hi ha més canvis.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-11-consulta-aleatoria"&gt;
&lt;h3&gt;Exercici 11. Consulta aleatòria&lt;/h3&gt;
&lt;p&gt;Aquest conjunt de proves persegueix comprovar el rendiment de les tres
estructures que estem analitzant quan s'accedeix de manera aleatòria
(no seqüencial).&lt;/p&gt;
&lt;p&gt;Omplirem inicialment les seqüències de manera creixent amb &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;La prova consisteix en mesurar quan costa mostrar tots els valors
començant per cada posició múltiple de tres, per continuar amb els
anteriors fins (sense incloure) l'anterior múltiple de tres.  Serien
les posicions 0, 3, 2, 1, 6, 5, 4, 9, 8, 7, ...&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-12-insercio-aleatoria"&gt;
&lt;h3&gt;Exercici 12. Inserció aleatòria&lt;/h3&gt;
&lt;p&gt;En aquesta ocasió, realitzarem la prova d'inserir dades a instàncies
de les diferents classes que estem analitzant. Aquest cop, però, no
inserirem les dades de manera seqüencial, sinó que ho farem sempre des
del punt mig.&lt;/p&gt;
&lt;p&gt;Per tant, el primer element l'inserirem a la posició 0. El segon a la
0 també (1 element / 2 resulta 0). El tercer element anirà a la
posició 1 (2 / 2 fa 1). El quart va a la 1 ( 3/2 fa 1). El cinqué a la
2 (4 / 2 fa 2) i així...&lt;/p&gt;
&lt;p&gt;Per &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;ArrayList&lt;/tt&gt; farem dues versions: una amb el
constructor per defecte i l'altra inicialitzant-les amb la mida
màxima.&lt;/p&gt;
&lt;p&gt;En total doncs, tindrem cinc proves, dues per &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;, dues per
&lt;tt class="docutils literal"&gt;ArrayList&lt;/tt&gt; i una per &lt;tt class="docutils literal"&gt;LinkedList&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-13-modificacio-aleatoria"&gt;
&lt;h3&gt;Exercici 13. Modificació aleatòria&lt;/h3&gt;
&lt;p&gt;Per la realització d'aquest conjunt de proves, et caldrà implementar
l'algoritme d'ordenació &lt;em&gt;quicksort&lt;/em&gt; (mira per exemple la proposta de
&lt;a class="reference external" href="http://www.vogella.com/articles/JavaAlgorithmsQuicksort/article.html"&gt;vogela&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Per començar, tenint en comptes que les tres classes que estem
comparant implementen la interfície &lt;tt class="docutils literal"&gt;List&lt;/tt&gt;, adapta l'algorisme de
manera que el mètode &lt;tt class="docutils literal"&gt;sort()&lt;/tt&gt; disposi (també) de la següent
signatura:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;sort&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Un cop el tinguis funcionant (fes alguna prova simple), munta les
proves de manera que els valors de cada seqüència s'inicialitzi en ordre
decreixent, i mesura quan li costa a l'algorisme d'ordenació processar
instàncies de cadascuna de les tres classes de manera que les deixi
ordenades creixentment.&lt;/p&gt;
&lt;p&gt;Donat que &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; implementa la &lt;em&gt;interface&lt;/em&gt; &lt;tt class="docutils literal"&gt;Comparable&lt;/tt&gt;,
afegeix a l'estudi l'anàlisi fent servir &lt;tt class="docutils literal"&gt;Collections.sort(List&amp;lt;T&amp;gt;
list)&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;En total, doncs, hauràs de fer sis proves: dues per cadascuna de les
classes que estem comparant.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-14-buidat"&gt;
&lt;h3&gt;Exercici 14. Buidat&lt;/h3&gt;
&lt;p&gt;Aquest conjunt de proves requereix inicialitzar les seqüències amb
&lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; seqüencials.&lt;/p&gt;
&lt;p&gt;El que es mesurarà és el temps que costa per cada classe buidar tots
els elements segons els següents criteris:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;eliminant sempre el primer (cua)&lt;/li&gt;
&lt;li&gt;eliminant sempre el darrer (pila)&lt;/li&gt;
&lt;li&gt;eliminant sempre el del punt mig&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En total són nou proves (tres per classe)&lt;/p&gt;
&lt;p&gt;Opcionalment se't proposa que avaluïs les classes &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/ArrayDeque.html"&gt;ArrayDeque&lt;/a&gt;
i &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/Stack.html"&gt;Stack&lt;/a&gt; per
comprovar si aquestes classes ofereixen avantatge eliminant el primer
o el darrer respectivament)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-15-resum"&gt;
&lt;h3&gt;Exercici 15. Resum&lt;/h3&gt;
&lt;p&gt;A partir dels resultats obtinguts amb els exercicis anteriors, elabora
un informe en el que, per cada opció, indiquis en quins casos d'ús
és recomanable escollir-la i en quins casos és preferible no fer-ho.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:22:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:contenidors-ordenats.html</guid><category>java</category></item><item><title>Conjunts en Java</title><link>http://apuntstecnics.herokuapp.com/conjunts-en-java.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document introdueix l'agrupació d'informació sense ordre en un
objecte Java. Per fer-ho, descriu l'important concepte d'&lt;em&gt;igualtat&lt;/em&gt;
des de la perspectiva del llenguatge.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="conjunts"&gt;
&lt;h2&gt;Conjunts&lt;/h2&gt;
&lt;p&gt;Entendrem com &lt;em&gt;conjunt&lt;/em&gt; una agrupació d'objectes en alguna classe
contenidora que implementi la &lt;em&gt;interface&lt;/em&gt; &lt;tt class="docutils literal"&gt;Set&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;De entre les característiques particulars dels conjunts destacarem el
fet que no accepten elements repetits i que no es poden fer
assumpcions en l'ordre en que es recuperen els elements introduïts.&lt;/p&gt;
&lt;p&gt;El següent diagrama UML és una representació parcial de les classes i
&lt;em&gt;interfaces&lt;/em&gt; que ofereix l'API de Java per donar suport al concepte de
conjunts.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Jerarquia de HashSet" src="http://apuntstecnics.herokuapp.com/images/poo021.img001.hashset.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Algunes de les operacions principals de la &lt;em&gt;interface&lt;/em&gt; &lt;tt class="docutils literal"&gt;Set&lt;/tt&gt; són:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean add(E e)&lt;/tt&gt;: afegeix l'element &lt;tt class="docutils literal"&gt;e&lt;/tt&gt; al conjunt sempre i
quant no s'hi trobi ja. En cas que s'afegeixi, retorna &lt;tt class="docutils literal"&gt;true&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;int size()&lt;/tt&gt;: retorna el nombre d'elements dins el conjunt.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean remove(Object o)&lt;/tt&gt;: elimina l'element &lt;tt class="docutils literal"&gt;o&lt;/tt&gt; del conjunt si
hi era, i retorna &lt;tt class="docutils literal"&gt;true&lt;/tt&gt; en cas que l'hagi pogut eliminar.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean contains(Object o)&lt;/tt&gt;: retorna &lt;tt class="docutils literal"&gt;true&lt;/tt&gt; si el conjunt
inclou l'objecte &lt;tt class="docutils literal"&gt;o&lt;/tt&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Mira l'&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/Set.html"&gt;API de Set&lt;/a&gt; per a
més detalls.&lt;/p&gt;
&lt;p&gt;Per recórrer tots els elements d'un conjunt, donat que implementen
&lt;em&gt;Iterable&lt;/em&gt;, podem fer servir el bucle &lt;em&gt;foreach&lt;/em&gt;. Per exemple&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Set&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Tal i com està definit el codi anterior, no podem fer cap assumpció de
l'ordre en que apareixeran els elements del conjunt de &lt;em&gt;Strings&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Una de les implementacions de conjunts és &lt;tt class="docutils literal"&gt;HashSet&lt;/tt&gt;. Serà la que
farem servir pels següents exercicis.&lt;/p&gt;
&lt;div class="section" id="exercici-1-gestio-d-un-conjunt-de-strings"&gt;
&lt;h3&gt;Exercici 1. Gestió d'un conjunt de Strings&lt;/h3&gt;
&lt;p&gt;Implementa un programa que permeti mantenir un conjunt de &lt;em&gt;Strings&lt;/em&gt;.
Les opcions disponibles seran:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;a «string»&lt;/tt&gt;: afegeix el String al conjunt si no existia.&lt;/p&gt;
&lt;p&gt;Si el pot afegir indica &lt;tt class="docutils literal"&gt;Afegit «string»&lt;/tt&gt; altrament indica &lt;tt class="docutils literal"&gt;Ja
existeix «string»&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;e «string»&lt;/tt&gt;: consulta si el String es troba al conjunt. Indica
&lt;tt class="docutils literal"&gt;Existeix «string»&lt;/tt&gt; o &lt;tt class="docutils literal"&gt;No existeix «string»&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;r «string»&lt;/tt&gt;: elimina el String del conjunt si existia.&lt;/p&gt;
&lt;p&gt;Si el pot eliminar indica &lt;tt class="docutils literal"&gt;Eliminat «string»&lt;/tt&gt; altrament indica
&lt;tt class="docutils literal"&gt;No existeix «string»&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;b&lt;/tt&gt;         : buida el conjunt. Demana confirmació si hi ha al
menys un element a eliminar amb &lt;tt class="docutils literal"&gt;Eliminar «n» element/s? (s/N)&lt;/tt&gt;.
Si no hi ha cap element, indica &lt;tt class="docutils literal"&gt;Conjunt buit&lt;/tt&gt;.  Finalment, i en
qualsevol dels casos, indica el nombre d'elements eliminats amb
&lt;tt class="docutils literal"&gt;Eliminats «n» element/s&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;q&lt;/tt&gt;         : mostra el nombre d'elements al conjunt amb el
missatge: &lt;tt class="docutils literal"&gt;Nombre d'elements: «n»&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;m&lt;/tt&gt;         : mostra tots els elements del conjunt separats per
coma i entre cometes dobles, o &lt;tt class="docutils literal"&gt;Conjunt buit&lt;/tt&gt; si no hi ha cap
element.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;x&lt;/tt&gt;         : finalitza l'execució.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="igualtat"&gt;
&lt;h2&gt;Igualtat&lt;/h2&gt;
&lt;p&gt;Què vol dir que dos objectes siguin iguals?&lt;/p&gt;
&lt;p&gt;Probablement, estarem d'acord amb que dos objectes són iguals si fan
referència a la mateixa instància, oi? És clar, és la identitat la que
està en joc!&lt;/p&gt;
&lt;p&gt;Són iguals però, dos cadenes de caràcters que, no ocupant la mateixa
posició de memòria, contenen el mateix (ex. &amp;quot;hola&amp;quot;)? Sembla què és
quelcom que esperaríem, oi?&lt;/p&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;EnvoltaString: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;hola&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\&amp;quot; == \&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\&amp;quot; -&amp;gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\&amp;quot;.equals(\&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\&amp;quot;) -&amp;gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;)));&lt;/span&gt;
        &lt;span class="c1"&gt;//&lt;/span&gt;
        &lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; == &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; -&amp;gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.equals(&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;) -&amp;gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esb&lt;/span&gt;&lt;span class="o"&gt;)));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;El codi anterior té com a sortida:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&amp;quot;hola&amp;quot; == &amp;quot;hola&amp;quot; -&amp;gt; false
&amp;quot;hola&amp;quot;.equals(&amp;quot;hola&amp;quot;) -&amp;gt; true
EnvoltaString: hola == EnvoltaString: hola -&amp;gt; false
EnvoltaString: hola.equals(EnvoltaString: hola) -&amp;gt; false
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Com ja sabem, per comparar &lt;em&gt;Strings&lt;/em&gt; en Java, ens hem vist obligats a
fer servir el mètode &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Aquest mètode l'hereta tota classe que definim de la classe &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;.
A l'exemple, però, no sembla funcionar per altres objectes
com ara &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;El problema deu trobar al mètode &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt;. On està definit el codi
de &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; que s'executa a la darrera línia de l'exemple?&lt;/p&gt;
&lt;p&gt;A &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt; és clar. Però lògicament a &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt; no li podem demanar que
sàpiga com comparar totes i cadascuna de les seves subclasses!&lt;/p&gt;
&lt;p&gt;Imagina-t'ho només amb &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;. Quan hauria de considerar que
dos &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; són iguals? Quan els seus valors són iguals (segons
&lt;tt class="docutils literal"&gt;String.equals()&lt;/tt&gt;)? Quan siguin iguals independents de majúscules i
minúscules?&lt;/p&gt;
&lt;p&gt;Nosaltres decidim què fa iguals a dues instàncies de &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;
i, per tant, nosaltres haurem de desenvolupar el codi per
comparar-les.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;EnvoltaString: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;hola&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; == &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; -&amp;gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.equals(&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;) -&amp;gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esb&lt;/span&gt;&lt;span class="o"&gt;)));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixa't que sobreescrivim &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; de manera que, en rebre un altre &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;, indiqui cert si els valors són iguals segons &lt;tt class="docutils literal"&gt;String.equals()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;La sortida d'aquest programa, com era d'esperar, serà:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;EnvoltaString: hola == EnvoltaString: hola -&amp;gt; false
EnvoltaString: hola.equals(EnvoltaString: hola) -&amp;gt; true
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-2-envoltastring-indiferent-a-majuscules-i-minuscules"&gt;
&lt;h3&gt;Exercici 2. EnvoltaString indiferent a majúscules i minúscules&lt;/h3&gt;
&lt;p&gt;Modifica la classe &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; de manera que consideri iguals
dos &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; quan els seus valors coincideixen sense tenir en
compte majúscules i minúscules.&lt;/p&gt;
&lt;p&gt;De fet, no hem redefinit completament el &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; de &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;. Només l'hem sobrecarregat quan el paràmetre sigui un &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Què passaria si provéssim el següent?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;()));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest cas cridaria a &lt;tt class="docutils literal"&gt;Object.equals()&lt;/tt&gt; i respondria
adequadament. Si volguéssim controlar-ho més podríem definir
&lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; com:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt; &lt;span class="k"&gt;instanceof&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;  &lt;span class="c1"&gt;// si ja no és ni un EnvoltaString malament&lt;/span&gt;
        &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(((&lt;/span&gt;&lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-3-envoltastring-es-compara-amb-strings"&gt;
&lt;h3&gt;Exercici 3. EnvoltaString és compara amb Strings&lt;/h3&gt;
&lt;p&gt;Modifica la classe &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; de manera que permeti comparar un
&lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; també amb un String i que en aquest cas,
&lt;tt class="docutils literal"&gt;EnvoltaString.equals(String)&lt;/tt&gt; sigui cert si el paràmetre és
igual al valor del &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Planteja dues versions, amb una que no faci servir &lt;tt class="docutils literal"&gt;instanceof&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="no-hi-ha-prou-amb-equals"&gt;
&lt;h3&gt;No hi ha prou amb &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt;&lt;/h3&gt;
&lt;p&gt;Si les coses fossin tan fàcils com redefinir el mètode &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt;,
Java seria massa avorrit.&lt;/p&gt;
&lt;p&gt;Considera la classe &lt;a class="reference external" href="http://java.sun.com/javase/7/docs/api/java/util/HashSet.html"&gt;java.util.HashSet&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Segons la seva documentació, aquesta classe implementa un conjunt
d'elements en el que les operacions bàsiques (afegir, eliminar,
comptar i cercar) tenen un cost constant.&lt;/p&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.HashSet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;  &lt;span class="c1"&gt;// aquest no l&amp;#39;afegirà perquè està repetit&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Trobat l&amp;#39;enter: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Una possible sortida seria:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Trobat l&amp;#39;enter: 0
Trobat l&amp;#39;enter: 1
Trobat l&amp;#39;enter: 2
Trobat l&amp;#39;enter: 3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest cas, els valors han sortit ordenats però no podem esperar
això sempre d'una classe conjunt.&lt;/p&gt;
&lt;p&gt;Ara bé, que passarà amb una classe feta per nosaltres?&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.HashSet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// definim una classe interna que encapsula un Integer&lt;/span&gt;
    &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Enter&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Trobat l&amp;#39;enter: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En negreta veiem els canvis principals. Ara, el nostre
&lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; disposa d'un valor de tipus Integer, de constructors
adequats per a incialitzar-lo i d'un mètode &lt;tt class="docutils literal"&gt;toString()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Per altra banda, el &lt;tt class="docutils literal"&gt;HashSet&lt;/tt&gt; ara és de &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; i no de &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Funcionarà el programa? La sortida pot ser:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Trobat l&amp;#39;enter: 1
Trobat l&amp;#39;enter: 3
Trobat l&amp;#39;enter: 2
Trobat l&amp;#39;enter: 2
Trobat l&amp;#39;enter: 0
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;No et deixis confondre per l'ordre de la sortida. Si a tu et surt un
altre, recorda que els conjunts no es basen en un ordre concret.&lt;/p&gt;
&lt;p&gt;El punt crític està en el fet que el valor 2 està repetit! No viola
això el què ha de ser un conjunt?&lt;/p&gt;
&lt;p&gt;Però, com s'ho pot fer &lt;tt class="docutils literal"&gt;HashSet&lt;/tt&gt; per saber que dos Enter són iguals?&lt;/p&gt;
&lt;p&gt;És clar, el problema està en que Enter no té implementat equals()&lt;/p&gt;
&lt;p&gt;Fem-ho doncs&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.HashSet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// definim una classe interna que encapsula un Integer&lt;/span&gt;
    &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Enter&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt; &lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Trobat l&amp;#39;enter: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Funcionarà?&lt;/p&gt;
&lt;p&gt;Doncs no. Tenim el mateix resultat! Perquè?&lt;/p&gt;
&lt;p&gt;Tot plegat, té a veure amb un mètode heretat de &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt; anomenat
&lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Mirem el que ens diu la documentació d'&lt;a class="reference external" href="http://java.sun.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29"&gt;aquest mètode&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[&lt;tt class="docutils literal"&gt;int hashcode()&lt;/tt&gt;] Returns a hash code value for the object.
This method is supported for the benefit of hashtables such as
those provided by java.util.Hashtable.&lt;/p&gt;
&lt;p&gt;The general contract of hashCode is:&lt;/p&gt;
&lt;p&gt;Whenever it is invoked on the same object more than once during an
execution of a Java application, the hashCode method must
consistently return the same integer, provided no information used
in equals comparisons on the object is modified. This integer need
not remain consistent from one execution of an application to
another execution of the same application.&lt;/p&gt;
&lt;p&gt;If two objects are equal according to the equals(Object) method,
then calling the hashCode method on each of the two objects must
produce the same integer result.&lt;/p&gt;
&lt;p&gt;It is not required that if two objects are unequal according to
the equals(java.lang.Object) method, then calling the hashCode
method on each of the two objects must produce distinct integer
results. However, the programmer should be aware that producing
distinct integer results for unequal objects may improve the
performance of hashtables.&lt;/p&gt;
&lt;p&gt;As much as is reasonably practical, the hashCode method defined by
class Object does return distinct integers for distinct objects.
(This is typically implemented by converting the internal address
of the object into an integer, but this implementation technique
is not required by the JavaTM programming language.)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Considera que modifiquem el main() anterior amb el següent:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Trobat l&amp;#39;enter: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; amb hashCode: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Genera la següent sortida&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Trobat l&amp;#39;enter: 1 amb hashCode: 8152936
Trobat l&amp;#39;enter: 3 amb hashCode: 5538765
Trobat l&amp;#39;enter: 2 amb hashCode: 10039797
Trobat l&amp;#39;enter: 2 amb hashCode: 23660326
Trobat l&amp;#39;enter: 0 amb hashCode: 32716405
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que els dos &amp;quot;2&amp;quot; tenen valors diferents de &lt;tt class="docutils literal"&gt;hashCode&lt;/tt&gt;!&lt;/p&gt;
&lt;p&gt;El problema, però, té una fàcil solució: redefinint &lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt; per
la nostra classe.&lt;/p&gt;
&lt;p&gt;Per exemple, considera:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Enter&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt; &lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fàcil, oi? Aprofitem el &lt;tt class="docutils literal"&gt;hashCode&lt;/tt&gt; de &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; que hem de suposar
que està ben definit, i ja està. Doncs... encara no funciona!&lt;/p&gt;
&lt;p&gt;La sortida ara és:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Trobat l&amp;#39;enter: 0 amb hashCode: 0
Trobat l&amp;#39;enter: 1 amb hashCode: 1
Trobat l&amp;#39;enter: 2 amb hashCode: 2
Trobat l&amp;#39;enter: 2 amb hashCode: 2
Trobat l&amp;#39;enter: 3 amb hashCode: 3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;És a dir, els &lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt; dels dos '2' són iguals. Perquè no
funciona doncs?&lt;/p&gt;
&lt;p&gt;A veure, repassem, tenim redefinit &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt;. El
primer retorna cert si, i només si, els valors són iguals segons
&lt;tt class="docutils literal"&gt;Integer.equals()&lt;/tt&gt; mentre que el segon retorna un enter diferent
depenent del valor (que amb &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; semblava funcionar)&lt;/p&gt;
&lt;p&gt;Pensem...&lt;/p&gt;
&lt;p&gt;Posem un &lt;em&gt;xivato&lt;/em&gt; als nostres mètodes i mirem que passa&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.HashSet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;EnvoltaString: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;EnvoltaString.equals(): this=&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\taltre=&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;EnvoltaString.hashCode(): this=&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Trobat el EnvoltaString: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; amb hashCode: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Ens hauria de sortir el &lt;em&gt;xivato&lt;/em&gt; cada cop que algú (&lt;tt class="docutils literal"&gt;HashSet&lt;/tt&gt;) cridi
a aquestes funcions.&lt;/p&gt;
&lt;p&gt;Però la resposta és:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Enter.hashCode(): this=0
Enter.hashCode(): this=1
Enter.hashCode(): this=2
Enter.hashCode(): this=3
Enter.hashCode(): this=2
Enter.hashCode(): this=0
Trobat l&amp;#39;enter: 0 amb hashCode: 0
Enter.hashCode(): this=1
Trobat l&amp;#39;enter: 1 amb hashCode: 1
Enter.hashCode(): this=2
Trobat l&amp;#39;enter: 2 amb hashCode: 2
Enter.hashCode(): this=2
Trobat l&amp;#39;enter: 2 amb hashCode: 2
Enter.hashCode(): this=3
Trobat l&amp;#39;enter: 3 amb hashCode: 3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que crida &lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt; dos cops per element. Primer en
introduir-lo i després per extreure'l.&lt;/p&gt;
&lt;p&gt;Fixa't també que ni rastre de la crida a &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt;!&lt;/p&gt;
&lt;p&gt;Perquè no la fa? Perquè no crida a &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; per comprovar si són
elements iguals?&lt;/p&gt;
&lt;p&gt;Pensa abans de continuar llegint!&lt;/p&gt;
&lt;p&gt;Per a aquells que encara no ho hàgiu vist, el problema està en que
&lt;tt class="docutils literal"&gt;HashSet&lt;/tt&gt; crida a &lt;tt class="docutils literal"&gt;equals(Object)&lt;/tt&gt; i no a &lt;tt class="docutils literal"&gt;equals(Enter)&lt;/tt&gt; !&lt;/p&gt;
&lt;p&gt;Per a arreglar-ho, haurem de programar &lt;tt class="docutils literal"&gt;equals(Object)&lt;/tt&gt; en comptes
de &lt;tt class="docutils literal"&gt;equals(Enter)&lt;/tt&gt;. Sí, no sembla massa elegant des de la
perspectiva OO, oi?. De moment és el que tenim.&lt;/p&gt;
&lt;p&gt;Per exemple:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.HashSet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="cm"&gt;/* definim una classe interna que encapsula un Integer */&lt;/span&gt;
    &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Enter&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Enter.equals(): this=&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\taltre=&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt; &lt;span class="k"&gt;instanceof&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(((&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Enter.hashCode(): this=&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Trobat l&amp;#39;enter: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; amb hashCode: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Ara la sortida és&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Enter.hashCode(): this=0
Enter.hashCode(): this=1
Enter.hashCode(): this=2
Enter.hashCode(): this=3
Enter.hashCode(): this=2
Enter.equals(): this=2      altre=2
Enter.hashCode(): this=0
Trobat l&amp;#39;enter: 0 amb hashCode: 0
Enter.hashCode(): this=1
Trobat l&amp;#39;enter: 1 amb hashCode: 1
Enter.hashCode(): this=2
Trobat l&amp;#39;enter: 2 amb hashCode: 2
Enter.hashCode(): this=3
Trobat l&amp;#39;enter: 3 amb hashCode: 3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que a &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; només se'l crida un cop.&lt;/p&gt;
&lt;p&gt;Quan? Pensa-ho abans de continuar llegint!&lt;/p&gt;
&lt;p&gt;Evidentment és a l'hora d'inserir un element que coincideix amb un
&lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt; d'un altre ja existent.&lt;/p&gt;
&lt;p&gt;En tot cas, fixa't que finalment hem aconseguit el nostre objectiu:
que un conjunt no repeteixi elements d'un tipus definit per nosaltres!&lt;/p&gt;
&lt;p&gt;En resum: quan l'usuari de la teva classe hagi de poder comparar la
igualtat d'instàncies d'aquesta, redefineix també el mètode
&lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt; i assegura't que &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; accepta &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-una-colla-de-gats"&gt;
&lt;h3&gt;Exercici 4. Una colla de gats&lt;/h3&gt;
&lt;p&gt;Crea una nova versió de la classe Gat que permeti a un
&lt;tt class="docutils literal"&gt;HashSet&amp;lt;Gat&amp;gt;&lt;/tt&gt; funcionar correctament.&lt;/p&gt;
&lt;p&gt;Considerarem que un gat és igual a un altre si, i només si, els seus
noms són iguals.&lt;/p&gt;
&lt;p&gt;Fes una classe &lt;tt class="docutils literal"&gt;TestGatSet&lt;/tt&gt; similar a la classe &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;
vista a l'exemple que afegeixi a un &lt;tt class="docutils literal"&gt;HashSet&amp;lt;Gat&amp;gt;&lt;/tt&gt; cinc instàncies
de Gat tals que:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;donades dues instàncies de gat qualsevol d'entre les cinc
(referenciem amb &lt;tt class="docutils literal"&gt;g1&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;g2&lt;/tt&gt;) és fals &lt;tt class="docutils literal"&gt;g1 == g2&lt;/tt&gt;. És a dir,
les cinc provenen de cinc crides a &lt;tt class="docutils literal"&gt;new Gat(nom)&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;existeixen dues instàncies de gat d'entre les cinc (i només dues)
tals que &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;g1.getNom().equals(g2.getNom())&lt;/span&gt;&lt;/tt&gt;. És a dir, únicament
dos dels gats tenen el mateix nom. De la mateixa manera que
&lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;fes que la sortida de &lt;tt class="docutils literal"&gt;TestGatSet&lt;/tt&gt; mostri
clarament que no hi ha cap gat repetit (és a dir, amb nom repetit).&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:21:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:conjunts-en-java.html</guid><category>java</category></item><item><title>Mapes I</title><link>http://apuntstecnics.herokuapp.com/mapes-i.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document correspon a la primera part de l'estudi del concepte
d'associació &lt;em&gt;clau-valor&lt;/em&gt; que aquí anomenarem &lt;em&gt;mapes&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;La introducció no és directa. Abans d'arribar-hi, presenta un cas
d'estudi &lt;a class="footnote-reference" href="#refheadfirst" id="id1"&gt;[1]&lt;/a&gt; — una petita aplicació per gestionar un
celler de vins &lt;a class="footnote-reference" href="#consumresponsable" id="id2"&gt;[2]&lt;/a&gt; — i segueix l'evolució del seu
desenvolupament des dels primers requeriments fins deixar un disseny
preparat pels canvis previsibles que ofereix el context per a aplicar
el tema principal del document.&lt;/p&gt;
&lt;p&gt;En aquesta primera part s'estableixen les bases que permetran treure
profit d'una de les maneres d'usar els mapes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="la-botiga-de-vi"&gt;
&lt;h2&gt;La botiga de vi&lt;/h2&gt;
&lt;p&gt;La senyora Estrella d'Argent és propietària d'una reconeguda botiga de
vi a la ciutat especialitzada en vins de taula catalans. Fins ara,
arribaves a la botiga i li descrivies les característiques que
voldries que tingués el vi que cercaves, i quasi bé sempre la Sra.
Estrella sortia de la rebotiga amb una o més ampolles que satisfeien
els teus desitjos.&lt;/p&gt;
&lt;p&gt;Ara però, la Sra. Estrella comença a fer-se gran i hi el seu nebot li
ajuda a col·locar les ampolles al magatzem. El problema és que
d'aquesta manera la Sra. Estrella no se'n recorda on para cada vi quan
el client li demana. La seva germana, la Gualda, li ha comentat que
coneix un equip de desenvolupadors molt trempats (nosaltres) que li
podrien fer una aplicació a mida per ajudar-la amb els estocs de vi.&lt;/p&gt;
&lt;div class="section" id="exercici-1-cerques-de-vi"&gt;
&lt;h3&gt;Exercici 1. Cerques de vi&lt;/h3&gt;
&lt;p&gt;En aquest exercici, implementarem una primera versió de l'aplicació de
gestió d'estocs de la botiga de la Sra. Estrella.&lt;/p&gt;
&lt;p&gt;Així, el nostre model inicial es representa amb el diagrama de classes
següent:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama inicial de classes de la Botiga" src="http://apuntstecnics.herokuapp.com/images/poo022.img001.botiga.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Les propietats que ens interessen de moment d'un vi
&lt;a class="footnote-reference" href="#simplificacions" id="id3"&gt;[3]&lt;/a&gt; són:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;ref: un nr. de referència intern de la botiga. Ex. &lt;tt class="docutils literal"&gt;2012010043&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;nom: el nom oficial del producte. Ex. &lt;tt class="docutils literal"&gt;Roura blanc&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;preu: l'import a la venda (en euros i sense iva)&lt;/li&gt;
&lt;li&gt;lloc: la localització del producte al magatzem. Ex. &lt;tt class="docutils literal"&gt;al fons
prestatge vermell&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;celler: el celler que el produeix. Ex. &lt;tt class="docutils literal"&gt;Juan Antonio Pérez Roura&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;origen: la denominació d'origen. Ex. &lt;tt class="docutils literal"&gt;Alella&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;varietat: la varietat del raïm &lt;a class="footnote-reference" href="#varietatraim" id="id4"&gt;[4]&lt;/a&gt;. Ex. &lt;tt class="docutils literal"&gt;sauvignon&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;tipus: el tipus de vi. Ex. &lt;tt class="docutils literal"&gt;blanc&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;collita: l'any de collita. Ex. &lt;tt class="docutils literal"&gt;2012&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Alguns detalls d'implementació:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;El mètode &lt;tt class="docutils literal"&gt;Botiga.afegeix(Vi)&lt;/tt&gt;, en cas que ja existeixi un
vi amb el mateix nr. de referència (atribut &lt;tt class="docutils literal"&gt;ref&lt;/tt&gt;), genera
l'excepció &lt;tt class="docutils literal"&gt;BotigaException&lt;/tt&gt; que estén directament
&lt;tt class="docutils literal"&gt;java.lang.Exception&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El mètode &lt;tt class="docutils literal"&gt;Vi Botiga.obte(ref)&lt;/tt&gt;, en cas que no
existeixi cap vi amb el nr. de referència indicat, genera
l'excepció &lt;tt class="docutils literal"&gt;BotigaException&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El mètode &lt;tt class="docutils literal"&gt;List&amp;lt;Vi&amp;gt; Botiga.cerca(Vi)&lt;/tt&gt;, retorna la
llista de vins que acompleixen tots els camps no nuls del
vi que rep. En cas que no trobi cap vi que respongui a
les especificacions, retorna una llista buida.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El tipus &lt;em&gt;integer&lt;/em&gt; pot ser representat per un &lt;tt class="docutils literal"&gt;long&lt;/tt&gt; o un &lt;tt class="docutils literal"&gt;int&lt;/tt&gt;
depenent del context. Per exemple, per l'any de collita probablement
en tindrem prou amb un &lt;tt class="docutils literal"&gt;int&lt;/tt&gt;, mentre que per la referència ens
serà interessant disposar d'un &lt;tt class="docutils literal"&gt;long&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El tipus &lt;em&gt;Money&lt;/em&gt; pot ser representat en Java pel tipus &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html"&gt;BigDecimal&lt;/a&gt;
arrodonint a dos decimals.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El següent esquema de codi, tot i sent incomplet i no gaire elegant,
pot ajudar a fer-te una idea de com podria funcionar.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Botiga&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Botiga&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;existeix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;ref&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Botiga.existeix() no implementat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;afegeix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;BotigaException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Botiga.afegeix() no completat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="nf"&gt;obte&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;ref&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;BotigaException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Botiga.obte() no implementat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/* retorna la llista de vins que s&amp;#39;ajusten a la espec */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nf"&gt;cerca&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="c1"&gt;// ignorem ref perquè és únic&lt;/span&gt;

            &lt;span class="c1"&gt;// comprova nom&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;())))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;continue&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="c1"&gt;// comprova preu màxim&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getPreu&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getPreu&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;compareTo&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getPreu&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;continue&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="c1"&gt;// comprova lloc&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLloc&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;(!&lt;/span&gt; &lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLloc&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLloc&lt;/span&gt;&lt;span class="o"&gt;())))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;continue&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="c1"&gt;// «...» comprova la resta&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Botiga.cerca() no completat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// l&amp;#39;afegim donat ha passat tots els filtres&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Podem provar la Botiga amb el següent codi (també incomplet)&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaBotiga&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="cm"&gt;/* afegeix uns vins */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;inicialitzaBotiga&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Botiga&lt;/span&gt; &lt;span class="n"&gt;botiga&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;

        &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2010010003&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Roura blanc&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;6.06&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;prestatge blau&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Juan Antonio Pérez Roura&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Alella&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;sauvignon&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;blanc&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2011100042&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Cercium 2009&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;5.65&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;prestatge verd amunt&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Mas Llunes Vinyes i Cellers&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Empordà&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;samsó&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;negre&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="mi"&gt;2009&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2011090002&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Masia Serra - IO 2008&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;13.50&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;prestatge verd amunt&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Masia Serra&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Empordà&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;garnatxa&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;negre&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="mi"&gt;2008&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;botiga&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;afegeix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BotigaException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/* defineix una especificació de vi */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="nf"&gt;creaEspec&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;   &lt;span class="c1"&gt;// sense nr. de ref perquè és únic&lt;/span&gt;
                &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;       &lt;span class="c1"&gt;// no importa el nom&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;10.50&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="c1"&gt;// com a molt fins a aquest preu&lt;/span&gt;
                &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;       &lt;span class="c1"&gt;// no importa el lloc&lt;/span&gt;
                &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;       &lt;span class="c1"&gt;// no importa el celler&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Empordà&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;  &lt;span class="c1"&gt;// la denominació d&amp;#39;origen sí importa&lt;/span&gt;
                &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;       &lt;span class="c1"&gt;// no importa la varietat&lt;/span&gt;
                &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;       &lt;span class="c1"&gt;// no importa el tipus&lt;/span&gt;
                &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;          &lt;span class="c1"&gt;// no importa l&amp;#39;any&lt;/span&gt;
                &lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/* mostra la llista de vins trobats */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostraVins&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;size&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;No s&amp;#39;ha trobat cap Vi&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;ha trobat les següents coincidències:&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                        &lt;span class="s"&gt;&amp;quot;Vi: %s\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                        &lt;span class="s"&gt;&amp;quot;\tNom : %s\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                        &lt;span class="s"&gt;&amp;quot;\tPreu: %s\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                        &lt;span class="s"&gt;&amp;quot;\tLloc: %s\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                        &lt;span class="s"&gt;&amp;quot;\t«...»\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                        &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRef&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt;
                        &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt;
                        &lt;span class="n"&gt;NumberFormat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getCurrencyInstance&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getPreu&lt;/span&gt;&lt;span class="o"&gt;()),&lt;/span&gt;
                        &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLloc&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;
                        &lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Botiga&lt;/span&gt; &lt;span class="n"&gt;botiga&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Botiga&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;inicialitzaBotiga&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;botiga&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="n"&gt;espec&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;creaEspec&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;botiga&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;cerca&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostraVins&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;L'exercici consisteix en completar el codi que falta per que el
programa &lt;tt class="docutils literal"&gt;UsaBotiga&lt;/tt&gt; funcioni.&lt;/p&gt;
&lt;p&gt;Comprova que estigui donant els resultats esperats.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-protegint-la-classe-vi"&gt;
&lt;h3&gt;Exercici 2. Protegint la classe Vi&lt;/h3&gt;
&lt;p&gt;Això de fer servir Strings com a tipus de les propietats és sovint una
mala idea. Què passa si diem que la denominació d'origen és &amp;quot;Alella&amp;quot;,
&amp;quot;alella&amp;quot;, o fins i tot &amp;quot;Aleya&amp;quot;?&lt;/p&gt;
&lt;p&gt;Alguns d'aquests problemes els podem resoldre comparant només la
versió diguem en majúscules, però d'altres...&lt;/p&gt;
&lt;p&gt;A aquest exercici hauràs de millorar el disseny de la classe Vi
de manera que:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;el nom i el celler continuïn sent de tipus String, però en les
cerques no es tindrà present les majúscules i minúscules
&lt;a class="footnote-reference" href="#caractersespecials" id="id5"&gt;[6]&lt;/a&gt;. A més a més, les cerques seran parcials i
per tant, el String buit (&amp;quot;&amp;quot;) serà tractat equivalentment a &lt;tt class="docutils literal"&gt;null&lt;/tt&gt;.
Considera el mètode &lt;tt class="docutils literal"&gt;String.contains()&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;Les localitzacions puguin ser: prestatge blau, prestatge verd amunt,
prestatge verd a baix, prestatge vermell, i altre.&lt;/li&gt;
&lt;li&gt;La denominació d'origen pugui ser (com a mínim &lt;a class="footnote-reference" href="#minimdo" id="id6"&gt;[5]&lt;/a&gt;):
Penedès, Terra Alta, Catalunya, Tarragona, Conca de Barberà,
Costers del Segre, Empordà, Montsant, Priorat, Alella, Pla de
Bages, i altre.&lt;/li&gt;
&lt;li&gt;La varietat pugui ser (com a mínim): Garnatxa, Malvasia, Monestrell,
Moscatell, Parellada, Samsó, Macabeu, Xarel·lo, Sauvignon, i altre.&lt;/li&gt;
&lt;li&gt;El tipus de vi pugui ser: blanc, negre, rosat, i altre.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Els valors &lt;em&gt;altre&lt;/em&gt; que apareixen a tots aquests enumerats permetran
indicar un valor no nul en els casos no contemplats a l'enumerat.&lt;/p&gt;
&lt;p&gt;Els accents i altres &amp;quot;floritures&amp;quot; de la nostra llengua poden
posar entrebancs a l'estructura &lt;tt class="docutils literal"&gt;enum&lt;/tt&gt; de Java. Considera el següent
codi d'exemple, que permetria fer ús del mètode &lt;tt class="docutils literal"&gt;toString()&lt;/tt&gt; per a
poder mostrar correctament un valor de les possibles varietats&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;enum&lt;/span&gt; &lt;span class="n"&gt;Varietat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;GARNATXA&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Garnatxa&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
    &lt;span class="n"&gt;SAMSO&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Samsó&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;XARELLO&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Xarel·lo&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;descr&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// descripció en format llegible&lt;/span&gt;
    &lt;span class="n"&gt;Varietat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;descr&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;descr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;descr&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;descr&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Malgrat tot, hem deixat algunes de les propietats &amp;quot;obertes&amp;quot; a rebre
valors poc adequats (ex.  un preu negatiu). A més, les propietats que
mantenim com a Strings, tot i havent eliminat el tema de
majúscules/minúscules, continuen patint de problemes a l'hora de
cercar (molt notablement ús d'accents). De moment ens despreocuparem
d'aquestes situacions.&lt;/p&gt;
&lt;p&gt;Evidentment, ara caldrà canviar la resta de classes per a adaptar-les
a aquestes modificacions.&lt;/p&gt;
&lt;p&gt;Crea una nova versió del &lt;tt class="docutils literal"&gt;UsaBotiga&lt;/tt&gt; amb el següent codi
d'inicialització:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;inicialitzaBotiga&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Botiga&lt;/span&gt; &lt;span class="n"&gt;botiga&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;

    &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2010010003&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;Roura blanc&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;6.06&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
            &lt;span class="n"&gt;Localitzacio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PRESTATGE_BLAU&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;Juan Antonio Pérez Roura&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Origen&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ALELLA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Varietat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SAUVIGNON&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Tipus&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;BLANC&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2011100042&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;Cercium 2009&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;5.65&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
            &lt;span class="n"&gt;Localitzacio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PRESTATGE_VERD_AMUNT&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;Mas Llunes Vinyes i Cellers&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Origen&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;EMPORDA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Varietat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SAMSO&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Tipus&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;NEGRE&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="mi"&gt;2009&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2011090002&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;Masia Serra - IO 2008&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;13.50&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
            &lt;span class="n"&gt;Localitzacio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PRESTATGE_VERD_AMUNT&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;Masia Serra&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Origen&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;EMPORDA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Varietat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;GARNATXA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Tipus&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;NEGRE&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="mi"&gt;2008&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;botiga&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;afegeix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BotigaException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Considera també la nova versió del mètode &lt;tt class="docutils literal"&gt;creaEspec()&lt;/tt&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="nf"&gt;creaEspec&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;              &lt;span class="c1"&gt;// sense nr. de ref perquè és únic&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;                    &lt;span class="c1"&gt;// no importa el nom&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;10.50&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="c1"&gt;// com a molt fins a aquest preu&lt;/span&gt;
            &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;                  &lt;span class="c1"&gt;// no importa el lloc&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;                    &lt;span class="c1"&gt;// no importa el celler&lt;/span&gt;
            &lt;span class="n"&gt;Origen&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;EMPORDA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;        &lt;span class="c1"&gt;// la denominació d&amp;#39;origen sí importa&lt;/span&gt;
            &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;                  &lt;span class="c1"&gt;// no importa la varietat&lt;/span&gt;
            &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;                  &lt;span class="c1"&gt;// no importa el tipus&lt;/span&gt;
            &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;                     &lt;span class="c1"&gt;// no importa l&amp;#39;any&lt;/span&gt;
            &lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Finalment, assegura't que crides el mètode &lt;tt class="docutils literal"&gt;Botiga.cerca(espec)&lt;/tt&gt;
perquè et surti el mateix resultat que a l'exercici anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-millorant-el-disseny-de-la-botiga-de-vins"&gt;
&lt;h3&gt;Exercici 3. Millorant el disseny de la botiga de vins&lt;/h3&gt;
&lt;p&gt;Amb els canvis de l'exercici anterior hem millorat força la usabilitat
de l'aplicació.&lt;/p&gt;
&lt;p&gt;Hi ha, però, un element que &amp;quot;canta&amp;quot;: per cercar els vins, el mètode
&lt;tt class="docutils literal"&gt;Botiga.cerca()&lt;/tt&gt; requereix un Vi. El vi que li passem, però, &lt;strong&gt;no
és&lt;/strong&gt; exactament un &lt;tt class="docutils literal"&gt;Vi&lt;/tt&gt;. Per exemple, no té nr. de referència, el
preu no és tampoc el preu real del vi sinó un màxim, i molt
probablement no li indicarem la localització bàsicament perquè és
probablement un dels objectius principals de la cerca
&lt;a class="footnote-reference" href="#finsaracercadaloc" id="id7"&gt;[7]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Quan dissenyem aplicacions orientades a objectes, hem de tenir clar
que aquests tipus d'incoherències tard o d'hora ens portaran
problemes.&lt;/p&gt;
&lt;p&gt;El cert és que, com ja ho diu bé el nom del seu paràmetre, el mètode
&lt;tt class="docutils literal"&gt;cerca()&lt;/tt&gt; espera una especificació de vi i &lt;strong&gt;no&lt;/strong&gt; un vi!.  Si el
concepte d'&lt;em&gt;especificació de vi&lt;/em&gt; sembla tenir tanta rellevància,
potser ja va sent hora que li reconeguem, no?&lt;/p&gt;
&lt;p&gt;Tenint en compte tot plegat, millorem el nostre disseny afegint la
classe &lt;tt class="docutils literal"&gt;ViEspec&lt;/tt&gt; segons el següent diagrama.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes amb l'especificació de Vins" src="http://apuntstecnics.herokuapp.com/images/poo022.img002.espec.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Ara que les especificacions de Vi no disposen de preu, el mètode
&lt;tt class="docutils literal"&gt;cerca()&lt;/tt&gt; ha d'oferir dues versions per mantenir la funcionalitat de
cercar fins a un màxim de preu. En concret, el substituirem pels
mètodes &lt;tt class="docutils literal"&gt;cerca(ViEspec)&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;cerca(ViEspec, preuMax)&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Crea una nova versió de l'aplicació de manera que inclogui aquests
canvis.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-la-botiga-de-vins-amplia-l-oferta"&gt;
&lt;h3&gt;Exercici 4. La botiga de vins amplia l'oferta&lt;/h3&gt;
&lt;p&gt;La Sra. Estrella està encantada amb l'aplicació que li
hem fet per a la seva botiga de vins. Li funciona tan bé que vol
ampliar la seva oferta al món del cava.&lt;/p&gt;
&lt;p&gt;El cava és força semblant al vi: té un nr. de referència i un preu. Es
col·loca en un lloc del magatzem, i té nom i celler. En quant a les
varietats de raïm amb les que es fan el cava, podem considerar un
subconjunt de les que s'utilitzen per l'elaboració del vi.&lt;/p&gt;
&lt;p&gt;El cava presenta, però, les següents diferències respecte el vi:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;al cava no se li indica la collita &lt;a class="footnote-reference" href="#collitacava" id="id8"&gt;[9]&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;hi ha algunes denominacions d'origen pròpies del cava que no
comparteix amb el vi. En concret, les denominacions típiques del
cava són: Alt Penedès i Tarragonès.&lt;/li&gt;
&lt;li&gt;Tampoc no coincideix amb la tipologia dels vins. Els tipus de cava
són: Brut Nature, Extra Brut, Brut, Extra Sec, Sec, Semisec, i Dolç.
Com sempre, afegirem l'opció &amp;quot;altre&amp;quot; per deixar la porta oberta a
altres possibilitats.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Com que són poques, afegirem les denominacions pròpies del cava a les
del vi, i deixarem a mans dels experts la correcta associació.&lt;/p&gt;
&lt;p&gt;En el cas de la tipologia no aplicarem la mateixa solució que amb les
denominacions perquè són força més. Així que ens tocarà crear la
classe &lt;tt class="docutils literal"&gt;TipusCava&lt;/tt&gt; i reanomenar l'antic &lt;tt class="docutils literal"&gt;Tipus&lt;/tt&gt; per &lt;tt class="docutils literal"&gt;TipusVi&lt;/tt&gt;
amb els mateixos valors que abans.&lt;/p&gt;
&lt;p&gt;El diagrama corresponent seria:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes amb Cava" src="http://apuntstecnics.herokuapp.com/images/poo022.img003.cava.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Amb aquest disseny ens trobem què &lt;a class="footnote-reference" href="#canvisdisseny" id="id9"&gt;[8]&lt;/a&gt;:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;s'ha evitat duplicar el mètode &lt;tt class="docutils literal"&gt;existeix()&lt;/tt&gt; amb un
&lt;tt class="docutils literal"&gt;existeixVi()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;existeixCava()&lt;/tt&gt; basant-se en que els nr. de
referència són identificatius entre tots dos tipus de productes de
la botiga.&lt;/li&gt;
&lt;li&gt;el mètode &lt;tt class="docutils literal"&gt;afegeix()&lt;/tt&gt; queda sobrecarregat ja que amb el tipus del
paràmetre podem decidir si hem d'afegir a una o altra llista.&lt;/li&gt;
&lt;li&gt;amb la resta de mètodes, però, no podem fer servir aquesta tècnica
perquè no podem decidir el tipus de sortida a partir del de
l'entrada. Això ens obliga a disposar de mètodes diferents amb codi
pràcticament idèntic.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En tot cas, ara ens toca realitzar els canvis que calguin a la nostra
aplicació de manera que integri el nou producte.&lt;/p&gt;
&lt;p&gt;Per la creació d'un cava, pots fer servir:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Cava&lt;/span&gt; &lt;span class="n"&gt;cava&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Cava&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2009100004&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
        &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;12.10&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
        &lt;span class="n"&gt;Localitzacio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PRESTATGE_VERMELL&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Marfil escumós blanc de negre brut&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Alella vinícola&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;Origen&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ALELLA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;Varietat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;GARNATXA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;TipusCava&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;BRUT&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-5-pero-no-teniem-herencia-a-la-poo"&gt;
&lt;h3&gt;Exercici 5. Però... no teníem herència a la POO?&lt;/h3&gt;
&lt;p&gt;Segur que ja te n'havies adonat. Aquest disseny no està fent us
d'un dels mecanismes més paradigmàtics de la programació orientada a
objectes: l'herència. Això fa que hi hagi un munt de informació
duplicada.&lt;/p&gt;
&lt;p&gt;Millora el disseny anterior fent servir les següents pistes:&lt;/p&gt;
&lt;p&gt;Pista 1. Fixa't què tenen en comú el vi i el cava. Sí, tots dos són
elements líquids produïts amb matèries primeres similars, amb una
certa quantitat d'alcohol que la Sra. Estrella ven embotellats.
Va, no ens emboliquem. Què tal simplement dir que són &lt;em&gt;begudes&lt;/em&gt;?.&lt;/p&gt;
&lt;p&gt;Pista 2. No tan ràpid! Moltes de les propietats de les classes Vi i
Cava, en realitat les contenen a partir d'altres classes (ex. ViEspec)
Per tant, potser no resulta tant adequat posar a Beguda atributs com
ara el nom de la beguda.&lt;/p&gt;
&lt;p&gt;Pista 3. Per cert, té sentit permetre instanciar una beguda en
general? No hauríem de permetre només instàncies de Vi i de Cava?&lt;/p&gt;
&lt;p&gt;Pista 4. Què tenen en comú les especificacions de Vi i de Cava? No
sembla que ja hem fet quelcom similar fa un moment?&lt;/p&gt;
&lt;p&gt;Pista 5. Malgrat la botiga podria funcionar amb una única llista de
begudes, potser resultarà convenient disposar d'una llista per cada
classe de begudes.&lt;/p&gt;
&lt;p&gt;Pista 6. Considera el següent diagrama UML com a referència dels
canvis que has d'implementar.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes amb herència" src="http://apuntstecnics.herokuapp.com/images/poo022.img004.basic.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="la-botiga-de-vi-es-redissenya"&gt;
&lt;h2&gt;La botiga de vi es redissenya&lt;/h2&gt;
&lt;p&gt;Tot i que aquest darrer disseny presenta clares millores respecte els
anteriors, encara hi trobem algunes pegues:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;la Sra. Estrella podria estar interessada en realitzar cerques amb
independència de si és vi o cava? Pensa que potser només li estan
demanant per un determinat celler i no importa si és vi o cava.  La
versió actual permetria fàcilment (i elegantment) afegir aquesta
funcionalitat?&lt;/li&gt;
&lt;li&gt;el nostre codi presenta força duplicació. Per exemple, les
classes Vi i Cava pràcticament són idèntiques excepte pel nom.
Aquest problema s'accentua més en el cas que afegim un nou producte
com ara el &lt;em&gt;vi d'agulla&lt;/em&gt; que té els mateixos atributs que el vi
estàndard (o de taula)&lt;/li&gt;
&lt;li&gt;el nostre codi presenta una certa resistència a canvis raonables.
Les classes són altament dependents entre si. Tant que pràcticament
qualsevol canvi afecta a la major part de les classes.&lt;ol class="arabic"&gt;
&lt;li&gt;Què costaria afegir un nou atribut a les begudes? Per exemple,
imagina que ens interessa afegir la &lt;em&gt;graduació&lt;/em&gt; a les diferents
begudes? Un detall com aquest ens obliga a canviar pràcticament
&lt;strong&gt;totes&lt;/strong&gt; les classes!&lt;/li&gt;
&lt;li&gt;Què costaria afegir noves begudes a la botiga?  Per exemple,
imagina que volem incorporar el &lt;em&gt;vi d'agulla&lt;/em&gt;. Quantes classes es
veuen afectades? És desitjable? Com afecta al problema de
duplicació de codi?&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Anem a veure com podem resoldre, o si més no alleugerir, aquests
problemes al nostre disseny.&lt;/p&gt;
&lt;div class="section" id="exercici-6-flexibilitzant-el-disseny-per-nous-atributs"&gt;
&lt;h3&gt;Exercici 6. Flexibilitzant el disseny per nous atributs&lt;/h3&gt;
&lt;p&gt;Sabem que el nostre disseny, tal i com està, ens obliga a realitzar
canvia a la majoria de les classes simplement per afegir un atribut
nou.&lt;/p&gt;
&lt;p&gt;Considera la nova propietat del vi &lt;tt class="docutils literal"&gt;graduacio&lt;/tt&gt; amb les possibilitats
&lt;em&gt;alta&lt;/em&gt;, &lt;em&gt;mitjana&lt;/em&gt;, &lt;em&gt;baixa&lt;/em&gt;, &lt;em&gt;sense alcohol&lt;/em&gt;, i &lt;em&gt;altre&lt;/em&gt;; i el mètode
get corresponent.&lt;/p&gt;
&lt;p&gt;Fes una revisió ràpida i apunta totes les classes que requereixen ser
modificades per a integrar aquest canvi.&lt;/p&gt;
&lt;p&gt;El problema està en que totes les classes són molt interdependents. I
l'objectiu seria trobar un disseny que ens permeti evitar modificar
tantes coses per cada canvi a les propietats.&lt;/p&gt;
&lt;p&gt;Segueix els següents passos:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Abans de començar a codificar, dibuixa un diagrama UML que faràs
servir com a guió per realitzar els canvis que se t'indiquen a
continuació.&lt;/li&gt;
&lt;li&gt;canvia el constructor de les diferents begudes de manera que rebin
directament una especificació en comptes de les seves propietats.
Aquest canvi permetrà independitzar les classes de begudes de les
propietats que les especifiquen.
Ofereix també un &lt;tt class="docutils literal"&gt;getEspec()&lt;/tt&gt; que permeti recuperar
l'especificació &lt;a class="footnote-reference" href="#especinmutable" id="id10"&gt;[10]&lt;/a&gt; . Ja no caldrà la resta de
mètodes com ara &lt;tt class="docutils literal"&gt;Vi.getNom()&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;canvia els mètodes &lt;tt class="docutils literal"&gt;Botiga.cerca()&lt;/tt&gt; de manera que aquest delegui
la comparació de especificacions a un nou mètode &lt;tt class="docutils literal"&gt;boolean
BegudaEspec.coincideix(BegudaEspec)&lt;/tt&gt; qui farà realment la
comparació de les propietats que formen part de l'especificació.&lt;/li&gt;
&lt;li&gt;modifica el codi de prova perquè sigui capaç de funcionar amb els
nous constructors.&lt;/li&gt;
&lt;li&gt;afegeix ara la nova propietat. Apuntat en quantes classes cal ara
fer canvis.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Fixa't que amb aquest nou disseny, afegir una nova propietat a
l'especificació d'un vi només obliga a canviar &lt;tt class="docutils literal"&gt;ViEspec&lt;/tt&gt; i, és clar,
allà on es construeixin les seves instàncies. Fixat que ara moltes
classes com ara &lt;tt class="docutils literal"&gt;Vi&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;Botiga&lt;/tt&gt; se n'han de preocupar!.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-el-celler-creix"&gt;
&lt;h3&gt;Exercici 7. El celler creix&lt;/h3&gt;
&lt;p&gt;Ja sabem que la Sra. Estrella no es quedarà pas amb només vi i cava. Ens
toca ampliar l'oferta a nous productes: el vi generós, el vi d'agulla
i el vi gasificat.&lt;/p&gt;
&lt;p&gt;El vi generós presenta una tipologia pròpia amb els valors: ranci,
fondellol, mistela, dolç, mut negre, mut blanc i vimblanc. A
banda, té una propietat nova per indicar el licor que el fa &amp;quot;generós&amp;quot;.
La propietat &lt;em&gt;licor&lt;/em&gt; pot tenir els valors: reforçat, generós, sec i
altre. Per la resta, coincideix amb el vi de taula (el que ja tractava
la nostra aplicació)&lt;/p&gt;
&lt;p&gt;El vi d'agulla és en tot, igual al vi de taula. El vi gasificat només
presenta les propietats genèriques de BegudaEspec.&lt;/p&gt;
&lt;p&gt;Ajudat d'un diagrama UML per descriure el que has d'implementar.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;hr class="docutils" /&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="refheadfirst" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;El cas que seguirem està inspirat en els exemples
trobats al llibre &lt;a class="reference external" href="http://www.headfirstlabs.com/books/hfooad/"&gt;Head First Object Oriented Analysis and Design&lt;/a&gt; de l'editorial
O'Reilly de novembre de 2006. Es tracta d'un llibre de seguiment
agradable que et recomano si vols aprofundir en aquest tema.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="consumresponsable" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;L'autor vol deixar clar des de bon començament
que, amb l'ús de begudes alcohòliques en els següents exercicis, de
cap manera pretén incitar al seu consum.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="simplificacions" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Donat que el vi disposa d'una varietat
impressionant de característiques i matisos, en aquest exercici ens
veiem forçats a fer importants simplificacions. Si entens molt de
vins, espero que sàpigues acceptar-les.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="varietatraim" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Suposarem que només hi ha una varietat de raïm
per vi. Si tens temptacions d'afegir una llista de varietats, et
proposo que ho deixis per la darrera versió.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="minimdo" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id6"&gt;[5]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Per simplicitat, s'ha eliminat accents i altres
caràcters especials. Si la denominació d'origen del teu vi favorit
no es troba aquí, estàs convidat a afegir-la. Aquesta possibilitat
d'ampliació és vàlida per a qualsevol altre llista de l'enunciat.
Intenta, però, no treure'n d'existents encara que no t'agradin.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="caractersespecials" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[6]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Potser voldràs posar-te a prova i fer que la
comparació ignori caràcters especials com ara accents.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="finsaracercadaloc" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id7"&gt;[7]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;És cert, fins ara havíem inclós la
localització a l'algorisme de cerca. No és l'error de disseny més
greu que hem comés aquí. En tot cas, algú podria argumentar que
potser pugui tenir sentit cercar per aquest paràmetre. Si
l'argument convenç l'Estrella, podrem recuperar aquesta
funcionalitat amb un mècanisme similar al que fem servir per
controlar el preu màxim.  Perquè no dins de &lt;tt class="docutils literal"&gt;ViEspec&lt;/tt&gt;? Segur que
quan acabis aquest exercici ja podràs trobar la resposta sense
ajut.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="canvisdisseny" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id9"&gt;[8]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;És molt probable que a aquestes alçades de curs ja
vegis molt clar com millorar aquest disseny. Amb tot, et proposo
que el segueixis tal i com es demana i tinguis una mica de
paciència.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="collitacava" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id8"&gt;[9]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;D'acord, segurament sí s'indica la collita pels més
entesos en cava. Per fer més ric l'exemple suposarem que la gent
sol mirar l'any pel vi i no pel cava.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="especinmutable" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id10"&gt;[10]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Donat que les especificacions són immutables, no
ens hem de preocupar de guardar i lliurar-ne còpies.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:20:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:mapes-i.html</guid><category>java</category></item><item><title>Mapes II</title><link>http://apuntstecnics.herokuapp.com/mapes-ii.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document correspon a la segona i darrera part de l'estudi del
concepte d'associació &lt;em&gt;clau-valor&lt;/em&gt; que aquí anomenem &lt;em&gt;mapes&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Pressuposa que s'ha seguit la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/mapes-i.html"&gt;primera part&lt;/a&gt;. De fet, la numeració dels
exercicis d'aquesta part és consecutiva respecte les anteriors.&lt;/p&gt;
&lt;p&gt;En aquesta segona part reprenem el desenvolupament de la botiga de
vins de la Sra. Estrella a partir del darrer exercici de la primera
part.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="un-disseny-discutible"&gt;
&lt;h2&gt;Un disseny discutible&lt;/h2&gt;
&lt;p&gt;Ens havíem quedat amb un disseny de la botiga de vins de la Sra.
Estrella similar al que descriu el següent diagrama.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes amb la botiga de Vins" src="http://apuntstecnics.herokuapp.com/images/poo023.img001.inicial.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Com podem veure, cada cop que hem d'afegir una nova beguda hem de
crear un mínim de dues classes: la de la beguda i la de la seva
especificació. Sovint el contingut d'aquestes classes és idèntic al
d'altres existents com per exemple les especificacions de Vi i
ViGasificat. De fet, el codi de Vi, Cava, etc. té poc més que un
constructor! És pitjor en el cas del vi gasificat, que no afegeix cap
atribut als genèrics de beguda. Amb tot hem de crear la classe buida
perquè funcioni tot plegat! A més a més, ens ha tocat modificar Botiga
per a afegir un mecanisme de cerca per cada beguda i el mètode per a
afegir una instància de beguda a l'inventari!&lt;/p&gt;
&lt;p&gt;És clar que tot plegat sembla un problema de tipus copy&amp;amp;paste que, amb
l'ajut d'un &amp;quot;mico picatecles&amp;quot; &lt;a class="footnote-reference" href="#picatecles" id="id1"&gt;[1]&lt;/a&gt; i una mica de paciència
corregint els petits errors que se li escapin al mico... Però, també
podem aspirar a un disseny millor, no?&lt;/p&gt;
&lt;p&gt;Convenim doncs que tot plegat és un disseny que, veient les ànsies
d'ampliació de la Sra. Estrella, convindrà revisar, oi?&lt;/p&gt;
&lt;p&gt;Per a adreçar una solució a aquests problemes de disseny,
(re)considerarem els següents elements: interfaces, encapsulació,
canvi i enumerats.&lt;/p&gt;
&lt;div class="section" id="interfaces"&gt;
&lt;h3&gt;1. interfaces.&lt;/h3&gt;
&lt;p&gt;Quan implementem el nostre codi contra una interface en comptes d'una
classe, el fem automàticament més flexible donat que podem fer servir
diferents classes que implementen la interface sense modificar-lo.
Fins i tot aquelles classes que encara no han estat programades!&lt;/p&gt;
&lt;p&gt;Per exemple, imagina que tens la següent jerarquia:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes pels jugadors" src="http://apuntstecnics.herokuapp.com/images/poo023.img002.jugadors.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Imagina que has d'implementar la classe Equip que té un mètode
anomenat &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;afegeixJugador(«?»)&lt;/span&gt;&lt;/tt&gt; que permet afegir un jugador a
l'equip.  Quin penses que serà el tipus més adequat per al paràmetre
d'aquest mètode? En fem un per cada tipus de jugador (ex.
&lt;tt class="docutils literal"&gt;JugadorFutbol&lt;/tt&gt;) o un de sol per Jugador?.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="encapsulacio"&gt;
&lt;h3&gt;2. encapsulació&lt;/h3&gt;
&lt;p&gt;Sí, ja n'hem parlat a fartar. L'encapsulació és aquell mecanisme que
amaga la implementació interna d'un element, a la que només es pot
accedir mitjançant un conjunt de mètodes/serveis. Aquest mecanisme ens
ofereix diferents avantatges ja coneguts com ara la facilitat de
reutilització de codi, la modificabilitat de la implementació interna
sense afectar al codi que la fa servir, i l'assegurament de la
integritat de les dades internes.&lt;/p&gt;
&lt;p&gt;Un altre avantatge, del que potser no hem fet tan d'èmfasi fins ara,
és que pot permetre protegir el nostre codi de canvis innecessaris. La
idea bàsica és que intentarem aïllar les parts del nostre codi que més
difícilment variaran d'aquelles que ho faran més probablement. És a
dir, &lt;strong&gt;encapsularem allò que varia&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, imaginem que tenim la classe Pintor amb la següent
descripció:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes dels pintors" src="http://apuntstecnics.herokuapp.com/images/poo023.img003.pintor.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Podem pensar que els diferents estils de pintors (impressionistes,
cubistes, surrealistes, etc.) prepararan els cavallets i netejaran els
pinzells de la mateixa manera &lt;a class="footnote-reference" href="#pintura" id="id2"&gt;[2]&lt;/a&gt;. En canvi, a l'hora de pintar, cadascú
farà servir una manera molt diferent depenent del seu estil.&lt;/p&gt;
&lt;p&gt;Haurem, per tant, de trobar un disseny que permeti mantenir fixa la
part que no varia, i que a l'hora faci molt fàcil ampliar/modificar la
part que sí varia.&lt;/p&gt;
&lt;p&gt;Podem implementar Pintor com una classe abstracta. On
&lt;tt class="docutils literal"&gt;preparaCavallet()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;netejaPinzells()&lt;/tt&gt; estiguin implementades i
&lt;tt class="docutils literal"&gt;pinta()&lt;/tt&gt; sigui abstracta. Així, cada estil de pintor pot estendre
aquesta classe i implementar el mètode &lt;tt class="docutils literal"&gt;pinta()&lt;/tt&gt; de la manera
corresponent al seu estil. Podria funcionar, tot i que això impediria
que alguns estils de pintor poguessin pertànyer a una altra jerarquia
si els calgués (herència simple)&lt;/p&gt;
&lt;p&gt;Fixa't, però, en aquesta altra proposta:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes amb proposta amb interface" src="http://apuntstecnics.herokuapp.com/images/poo023.img004.pintura.png" /&gt;
&lt;/div&gt;
&lt;p&gt;On &lt;tt class="docutils literal"&gt;Pintor.pinta()&lt;/tt&gt; podria ser quelcom similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;pinta&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;estil&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;estil&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pinta&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aquesta solució no &amp;quot;malgasta&amp;quot; herència. A més a més, podem instanciar
directament la classe Pintor en comptes d'estar forçat a fer servir
les seves subclasses. Fixa't que Pintor està implementat contra una
interface i no contra una classe concreta. Això li dóna una gran
flexibilitat ja que pot funcionar fins i tot amb estils que encara
estan per descobrir!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="canvi"&gt;
&lt;h3&gt;3. canvi&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;The only constant is change, continuing change, inevitable change,
that is the dominant factor in society today. No sensible decision
can be made any longer without taking into account not only the
world as it is, but the world as it will be.&lt;/p&gt;
&lt;p class="attribution"&gt;&amp;mdash;Isaac Asimov&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;La qüestió no és si el nostre disseny d'avui haurà de canviar o no,
sinó &lt;strong&gt;quan&lt;/strong&gt; ho haurà de fer. Per a fer el nostre codi més resistent
al canvi, un dels &amp;quot;trucs&amp;quot; ben coneguts és assegurar-nos que cada
classe tingui un &lt;em&gt;únic punt de canvi&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, considera la següent classe:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Cotxe&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;arrenca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;atura&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;  &lt;span class="o"&gt;{}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;canviaRodes&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Roda&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;rodesNoves&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;condueix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloc&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;neteja&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't en tot el que arriba a fer aquesta classe. A banda de saber com
arrencar i aturar el cotxe, també ha de conèixer com canviar les
rodes, sobre la neteja, i com ha de ser conduït. Tot plegat, un munt
de punts de possible canvi. L'haurem de modificar si varia el
sistema de collat de les rodes, o la manera de conduir del conductor o
de rentar la tapisseria.&lt;/p&gt;
&lt;p&gt;Si la teva classe té massa punts de canvi és que probablement està
fent massa coses. Solucionar-ho és tan simple com dividir les
funcionalitats en més classes. Per exemple, considera el disseny&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Cotxe&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;arrenca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;atura&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;  &lt;span class="o"&gt;{}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;NetejaCotxes&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;neteja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Cotxe&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Conductor&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;condueix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Cotxe&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Lloc&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Mecanic&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;canviaRodes&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Cotxe&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Roda&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;rodesNoves&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que el nou disseny fa que cada classe tingui un mínim de punts
de canvi.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="enum"&gt;
&lt;h3&gt;4. enum&lt;/h3&gt;
&lt;p&gt;Els enumerats en java són en realitat un tipus especial de classe que
indica les instàncies possibles.&lt;/p&gt;
&lt;p&gt;Com una classe qualsevol, té la possibilitat de definir els seus
propis atributs i mètodes i, també, implementar interfaces. De fet,
tot enum ve, de fàbrica, implementant dues interfaces
java.io.Serializable i java.lang.Comparable.&lt;/p&gt;
&lt;p&gt;Considera el següent codi d'exemple:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Codi d&amp;#39;exemple per mostrar el funcionament dels enums&lt;/span&gt;
&lt;span class="cm"&gt; * Es pot trobar informació detallada per exemple a:&lt;/span&gt;
&lt;span class="cm"&gt; *    http://download.oracle.com/javase/1.5.0/docs/guide/language/enums.html&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ExempleUsEnum&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// recorrem els valors de Intercanvi com si fossin Codificat&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Codificat&lt;/span&gt; &lt;span class="n"&gt;teCodi&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intercanvi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;values&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;teCodi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getCodi&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="cm"&gt;/* seria més eficient fer el següent codi recorrent els valors&lt;/span&gt;
&lt;span class="cm"&gt;             * de Intercanvi amb elements de tipus Intercanvi, però en aquest&lt;/span&gt;
&lt;span class="cm"&gt;             * cas no veuríem que podem tractar-los com a Codificat */&lt;/span&gt;
            &lt;span class="n"&gt;Intercanvi&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Intercanvi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fromCodi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El codi de &amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;#39; és &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* una interface senzilla per a tot allò que disposi d&amp;#39;un codi numèric */&lt;/span&gt;
&lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="nc"&gt;Codificat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getCodi&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Un enum és bàsicament una classe que indica les instàncies possibles,&lt;/span&gt;
&lt;span class="cm"&gt; * amb el seu constructor i els seus membres. */&lt;/span&gt;
&lt;span class="kd"&gt;enum&lt;/span&gt; &lt;span class="n"&gt;Intercanvi&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;Codificat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;ALTRES&lt;/span&gt;      &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;    &lt;span class="c1"&gt;// entre parèntesis els atributs del constructor&lt;/span&gt;
    &lt;span class="n"&gt;COMPRES&lt;/span&gt;     &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;VENDES&lt;/span&gt;      &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;INTERCANVIS&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;    &lt;span class="c1"&gt;// el &amp;#39;;&amp;#39; és requerit en aquest cas!&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// aquí va la declaració dels atributs del constructor&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="nf"&gt;Intercanvi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;codi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;  &lt;span class="c1"&gt;// el constructor&lt;/span&gt;

    &lt;span class="c1"&gt;// redefinim el toString()&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;toLowerCase&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// una manera d&amp;#39;obtenir el valor corresponent a un codi.&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Intercanvi&lt;/span&gt; &lt;span class="nf"&gt;fromCodi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Intercanvi&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intercanvi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;values&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getCodi&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// implementació del mètode definit a la interface&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getCodi&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Amb la seva sortida&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;El codi de &amp;#39;altres&amp;#39; és 0
El codi de &amp;#39;compres&amp;#39; és 1
El codi de &amp;#39;vendes&amp;#39; és 2
El codi de &amp;#39;intercanvis&amp;#39; és 4
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="redissenyant-la-botiga"&gt;
&lt;h2&gt;Redissenyant la botiga&lt;/h2&gt;
&lt;p&gt;De vegades passa que les decisions que prenem ens porten a camins
tortuosos. Hi ha una dita hindú que diu:&lt;/p&gt;
&lt;blockquote&gt;
No importa quan de temps portis caminant per un camí, si te
n'adones que no va allà on vols, fes mitja volta!&lt;/blockquote&gt;
&lt;p&gt;Doncs bé, amb els quatre punts vists anteriorment ens toca analitzar
com podríem aplicar-los al redisseny de la botiga de begudes de la
Sra. Estrella.&lt;/p&gt;
&lt;div class="section" id="exercici-8-els-tipus-de-beguda"&gt;
&lt;h3&gt;Exercici 8. Els tipus de beguda&lt;/h3&gt;
&lt;p&gt;Un dels problemes que té el nostre disseny és que les classes de les
diferents begudes no fan pràcticament res diferent entre si. En
realitat, només les posem per indicar distingir cada tipus de beguda.&lt;/p&gt;
&lt;p&gt;Normalment creem noves classes per implementar comportaments que no
tenen les existents, però en aquest cas, la classe Vi fa el mateix que
Cava, és a dir, únicament contenir una especificació de beguda.&lt;/p&gt;
&lt;p&gt;Perquè no afegir una nova propietat a Beguda que sigui TipusBeguda (un
enum amb VI, CAVA...  podria fer un bon paper) Com que totes les
classes &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;«...»Espec&lt;/span&gt;&lt;/tt&gt; són descendents de &lt;tt class="docutils literal"&gt;BegudaEspec&lt;/tt&gt;, podem tenir
accés a les diferents especificacions sense gaires problemes, oi?&lt;/p&gt;
&lt;p&gt;Això sí, ara Beguda s'ha de poder instanciar, és clar!&lt;/p&gt;
&lt;p&gt;On posarem el tipus de beguda, a Beguda o a BegudaEspec?
&lt;a class="footnote-reference" href="#redundanttipus" id="id3"&gt;[3]&lt;/a&gt; Una posiblitat seria:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;afegeix una propietat a cada especificació concreta que
guardi el tipus de beguda a la que correspon l'especificació. Pensa
si cal que cada instància tingui el seu propi tipus i si aquest pot
variar.&lt;/li&gt;
&lt;li&gt;afegeix un mètode a BegudaEspec que retorni el tipus de beguda.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Fixa't també que ara que ja no distingim com a classes els diferents
tipus de begudes, hi ha un munt de mètodes de la classe Botiga que es
simplifiquen.&lt;/p&gt;
&lt;p&gt;Defineix el UML amb aquests canvis i implementa'ls.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-9-tantes-especificacions-fan-nosa"&gt;
&lt;h3&gt;Exercici 9. Tantes especificacions fan nosa!&lt;/h3&gt;
&lt;p&gt;D'acord, ens hem carregat les subclasses de beguda i, amb elles,
una bona part de la complexitat del nostre disseny.&lt;/p&gt;
&lt;p&gt;Encara, però, no hem resolt el tema de les especificacions. Cada cop
que volem afegir una nova beguda ens cal tenir en compte la seva
especificació.&lt;/p&gt;
&lt;p&gt;Pensa: l'especificació d'una beguda no deixa de ser un conjunt més o
menys variable de propietats de beguda com ara el nom, l'origen,
etc.  I una propietat no deixa de ser un nom i un valor. El nom
identifica la propietat i és únic respecte a la resta de propietats.
Per exemple la propietat origen pot tenir el valor Origen.PENEDES.&lt;/p&gt;
&lt;p&gt;Seria possible guardar aquest conjunt de propietats en algun
contenidor? Hi ha alguna classe que ens ofereixi la possibilitat
d'afegir parells (clau, valor)? La resposta és SÍ! En un &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html"&gt;Map&lt;/a&gt;.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Jerarquia de classes de HashMap" src="http://apuntstecnics.herokuapp.com/images/poo023.img005.hashmap.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Alguns dels mètodes que ens caldran:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;boolean containsKey(Object)&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Retorna cert si el mapa conté la clau especificada.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;V get(Object)&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Retorna el valor associat a la clau especificada al paràmetre o
null si no conté cap valor associat a la clau.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;V put(K, V)&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Associa la clau al valor i retorna l'antic valor associat a
aquesta clau (null si no n'hi havia)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;De moment, escollirem la classe &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html"&gt;HashMap&lt;/a&gt;.
Un tipus de Map amb un accés als elements força eficient.&lt;/p&gt;
&lt;p&gt;Abans de començar a codificar, com sempre, dibuixa el diagrama UML amb
els nous canvis. Et servirà de guia per no perdre't.&lt;/p&gt;
&lt;p&gt;Alguns dels canvis que haurem de fer:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;crear un nou enumerat anomenat TipusPropietat amb valors com ara
NOM, ORIGEN, etc.&lt;/li&gt;
&lt;li&gt;crear una interface anomenada PropietatBeguda. Planteja't si cal
que especifiqui algun mètode.&lt;/li&gt;
&lt;li&gt;fer que els diferents enums (compte amb propietats com ara el nom
o la collita) de les propietats implementin la interface
PropietatBeguda.&lt;/li&gt;
&lt;li&gt;substituir les propietats de BegudaEspec per un nou membre
HashMap&amp;lt;TipusPropietat, PropietatBeguda&amp;gt; amb les propietats de la
classe... bé, decideix si el posem a Beguda o a BegudaEspec. Pista:
pensa què afegeix ara la classe BegudaEspec.&lt;/li&gt;
&lt;li&gt;afegir a Beguda (o a BegudaEspec si encara la mantens) la
possibilitat d'accedir als valors de les diferents propietats que
l'especifiquen. És a dir, ens cal algun mètode que ens permeti
substituir l'antic &lt;tt class="docutils literal"&gt;getNom()&lt;/tt&gt;. La proposta és implementar un
&lt;tt class="docutils literal"&gt;PropietatBeguda getPropietat(TipusPropietat)&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;modificar la resta d'elements perquè funcionin amb aquests canvis.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;Nota&lt;/em&gt;: Potser t'hauràs adonat que ara no tenim un mecanisme fiable
per a assegurar-nos de que cada tipus de beguda presenti totes les
propietats que li correspon i només aquestes. Et proposo que de moment
acceptis aquesta feblesa del sistema i, si tens interès, miris de
solucionar-lo com una de les millores addicionals que et proposa el
següent exercici.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-opcional-millores-addicionals"&gt;
&lt;h3&gt;Exercici 10. (opcional) Millores addicionals&lt;/h3&gt;
&lt;p&gt;En cas que t'hagis quedat amb les ganes, aquest exercici et permet
tancar alguns punts que han quedat oberts amb el disseny final de
l'exercici anterior.&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Fer que la comprovació de coincidència permeti ignorar també els
caràcters especials com ara accents i els espais de més. A més, que
permeti acceptar aquelles entrades que continguin alguna de les
paraules que s'introdueixin. Ex. si l'especificació cercada del
celler indica &amp;quot;Joan Juán&amp;quot;, aquesta nova versió acceptarà &amp;quot;Juan
Antonio Pérez Roura&amp;quot;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Afegir un nou mètode de cerca que permeti l'ús d'expressions
regulars per a aquells atributs textuals (com ara nom i celler).
Aquesta és una ampliació molt fàcil, tenint en comptes que disposem
de &lt;tt class="docutils literal"&gt;String.matches(regex)&lt;/tt&gt;, però potser et servirà com a
introducció a aquesta potent tècnica de manipulació de strings.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El disseny de l'exercici anterior, deixa sense comprovar que les
especificacions que s'afegeixen a una beguda realment corresponguin
al tipus de beguda que estan especificant. Per exemple, a un Cava
se li podria passar perfectament una especificació sense nom o bé
amb graduació.&lt;/p&gt;
&lt;p&gt;Aquesta proposta d'ampliació, hauria de generar una excepció en cas
que l'especificació no contingui tots i només aquells atributs que
corresponen a una beguda del tipus que estan especificant. Pista:
TipusBeguda podria disposar d'una llista d'atributs requerits per
cada tipus, o fins i tot disposar d'un mètode que accepti una
especificació i comprovi si conté els elements que toquen.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Se t'acut alguna altra millora?&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;hr class="docutils" /&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="picatecles" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si aquesta expressió de &amp;quot;mico picatecles&amp;quot; t'ha
semblat despectiva contra la noble professió d'aquells que
programen sense utilitzar el cervell... tens tota la raó, és
despectiva. Si el cim al que aspires professionalment és aquest,
estàs perdent el temps amb aquests exercicis i, probablement, amb
aquest cicle.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="pintura" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si en saps molt de pintura, per favor accepta-ho com a
simplificació per a entendre el concepte.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="redundanttipus" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Tenint en comptes que Beguda disposa de
l'especificació i que aquesta hauria de ser del tipus que correspon
a la beguda, probablement incloure aquesta propietat a Beguda
resultaria redundant o, com a molt, tindria una funció merament de
comprovació d'errors, especialment durant la creació de la beguda.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 05 Feb 2015 16:19:11 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-02-05:mapes-ii.html</guid><category>java</category></item><item><title>Interfícies gràfiques amb Java</title><link>http://apuntstecnics.herokuapp.com/interficies-grafiques-amb-java.html</link><description>&lt;!-- XXX TODO: translation to proper rst still unfinished. Check it
still works for current version of everything. Consider spliting
in different documents. Check specially the voice problem. Consider
adding challenge problems. For example, it'd be nice to have a GUI
version of the Animals system. --&gt;
&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;La sèrie d'entrades que comença amb aquesta, té com a objectiu
introduir-te en la programació d'interfícies gràfiques d'usuari (GUI)
usant el llenguatge de programació Java.&lt;/p&gt;
&lt;p&gt;Per desenvolupar aplicacions amb GUI, farem servir la biblioteca
&lt;em&gt;swing&lt;/em&gt; &lt;a class="footnote-reference" href="#guilocal" id="id1"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;El mecanisme d'introducció serà a partir de la realització de
diferents programes que presenten un o més conceptes nous o/i reforcen
conceptes anteriors.&lt;/p&gt;
&lt;p&gt;Inicialment realitzarem els exercicis sense l'ajut d'eines gràfiques
que ofereixen alguns IDEs com ara Eclipse o NetBeans. Això ens
permetrà entendre l'estructura interna d'una GUI de Java. A
continuació passarem a desenvolupar-los ajudant-nos de les eines
ofertes per un IDE. En aquest cas s'ha escollit el NetBeans per que no
requereix de cap instal·lació especial &lt;a class="footnote-reference" href="#altreide" id="id2"&gt;[2]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Un cop assolits els continguts d'aquesta introducció, podràs
atrevir-te a implementar interfícies gràfiques per les teves
aplicacions en Java.&lt;/p&gt;
&lt;p&gt;Comencem com els deus de la programació manen: amb l'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/hola-swing.html"&gt;Hola Swing&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="guilocal" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Aquest tema es centra exclusivament en l'ús de la
biblioteca &lt;em&gt;Swing&lt;/em&gt; per aplicacions d'escriptori.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;!-- XXX TODO: planteja si pots aconseguir passar algun dels exercicis a
applet i així executar-ho en un navegador! --&gt;
&lt;table class="docutils footnote" frame="void" id="altreide" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si t'estimes més fer servir un altre IDE, o fins i tot
si prefereixes fer-ho tot manualment (sense suport), és
perfectament acceptable. Només has de tenir en compte que no rebràs
suport en aquests materials.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Mon, 12 Jan 2015 23:59:30 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-01-12:interficies-grafiques-amb-java.html</guid><category>java</category></item><item><title>Hola Swing</title><link>http://apuntstecnics.herokuapp.com/hola-swing.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada tindrem un primer contacte amb la biblioteca
&lt;em&gt;Swing&lt;/em&gt; de Java.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;Hola swing&lt;/h2&gt;
&lt;p&gt;javax.swing és una biblioteca gràfica per a java. Inclou els elements
habituals de les aplicacions gràfiques: botons, quadres de text, llistes
desplegables, i un llarg etcètera.&lt;/p&gt;
&lt;p&gt;És una ampliació de l'antic model AWT (&lt;em&gt;Abstract Window Toolkit&lt;/em&gt;) que
millora, entre d'altres coses, amb l'aparença que emula l'aspecte de
diferents plataformes.&lt;/p&gt;
&lt;p&gt;Es pot desenvolupar una aplicació gràfica en java seguint les següents
passes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;crea un marc (&lt;em&gt;frame&lt;/em&gt;): javax.swing.JFrame&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;JFrame&lt;/span&gt; &lt;span class="n"&gt;marc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;JFrame&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;crea un accessori (&lt;em&gt;widget&lt;/em&gt;), per exemple JButton&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;JButton&lt;/span&gt; &lt;span class="n"&gt;boto&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;JButton&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;prem-me&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;afegeix l'accessori al marc&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;boto&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;mostra el marc&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setSize&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;300&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;300&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// defineix la mida&lt;/span&gt;
&lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setVisible&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// el fa visible&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="section" id="exercici-1-hola-swing"&gt;
&lt;h3&gt;Exercici 1. Hola Swing&lt;/h3&gt;
&lt;p&gt;Posa tots els elements en el main d'un programa anomenat &lt;em&gt;SimpleGui&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per a facilitar el tancament del programa, afegeix la línia:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setDefaultCloseOperation&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;JFrame&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;EXIT_ON_CLOSE&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;La necessitat d'aquesta línia la trobaràs si executes el programa fora
d'un IDE (opció recomanada per fer els primers exercicis!)&lt;/p&gt;
&lt;p&gt;Pista: les classes que fas servir són al package javax.swing.&lt;/p&gt;
&lt;hr class="docutils" /&gt;
&lt;p&gt;Amb aquest exemple i depenent de la plataforma on l'executem, disposem
d'una finestra amb els elements típics (botons de minimització,
ampliació i tancat; capacitat de redimensionat, etc.) i un botó amb el
text &amp;quot;prem-me&amp;quot; que omple tot el marc de la finestra.&lt;/p&gt;
&lt;p&gt;L'aspecte del botó pot resultar decebedor, però ja veurem que podem
aconseguir altres aspectes amb relativa facilitat.&lt;/p&gt;
&lt;p&gt;Quan premem el botó, simula l'efecte de pressió i alliberament però no
sembla que passi res més.&lt;/p&gt;
&lt;p&gt;Clar, hem de programar el que volem que faci!&lt;/p&gt;
&lt;p&gt;Per que el botó faci alguna cosa en fer-li clic, ens cal:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;un mètode a cridar en fer clic: el mètode realitzarà l'acció
que volem que passi quan es premi el botó.&lt;/li&gt;
&lt;li&gt;una manera de saber quan hem de llençar aquest mètode. És a dir,
saber quan l'usuari fa clic al botó.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Al nostre exemple, suposem que el que volem que passi és que quan facin
click al botó canviï el text per &amp;quot;prem-me un altre cop&amp;quot; Per fer-ho,
sembla que n'hi hauria d'haver prou amb un mètode com ara:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;canviaBoto&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;boto&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setText&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;prem-me un altre cop!&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Però, com &lt;em&gt;connectem&lt;/em&gt; aquest mètode amb l'&lt;em&gt;esdeveniment&lt;/em&gt; de clic?&lt;/p&gt;
&lt;p&gt;Per a fer-ho, cal que ens registrem com a interessats o escoltadors
(&lt;em&gt;listeners&lt;/em&gt;) en aquest esdeveniment.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Representació del patró observador amb un botó" src="gui.img001.observer_pattern.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Els components GUI de Swing són fonts d'esdeveniments (Event Sources) el
que implica que són objectes que poden traduir successos de l'entorn en
esdeveniments.&lt;/p&gt;
&lt;p&gt;Un esdeveniment en Java (cap sorpresa) és tradueix en un objecte.&lt;/p&gt;
&lt;p&gt;Mira el package java.awt.event i trobaràs un munt de classes
d'esdeveniments. És fàcil distingir-les perquè totes porten &lt;em&gt;event&lt;/em&gt; al
nom: MouseEvent, KeyEvent, WindowEvent, ActionEvent...&lt;/p&gt;
&lt;p&gt;Un event source com ara un botó, crea una nova instància d'esdeveniment
quan succeeix quelcom significatiu (ex. l'usuari fa clic a sobre del
botó)&lt;/p&gt;
&lt;p&gt;Les classes interessades en aquests esdeveniments, com ara la nostra
SimpleGui, reben aquests esdeveniments un cop han mostrat el seu
interès.&lt;/p&gt;
&lt;p&gt;Cada esdeveniment té una interface associada per a ser implementada per
a aquells que vulguin seguir l'esdeveniment. Per exemple, si vols seguir
l'esdeveniment MouseEvent, et caldrà implementar MouseListener.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Representació de la interacció d'EventListener amb un botó" src="gui.img002.event_listener.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Per a obtenir els esdeveniments d'un botó, cal:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;implementar la interface ActionListener&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;La documentació (&lt;a class="reference external" href="http://java.sun.com/javase/6/docs/api/java/awt/event/ActionListener.html"&gt;http://java.sun.com/javase/6/docs/api/java/awt/event/ActionListener.html&lt;/a&gt;)
descriu que la interface ActionListener requereix la implementació del
mètode actionPerformed()&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ol class="arabic simple" start="2"&gt;
&lt;li&gt;registrar-se com a &lt;em&gt;listener&lt;/em&gt; del botó&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.awt.event.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.swing.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;SimpleGui&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;ActionListener&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;JFrame&lt;/span&gt; &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;JButton&lt;/span&gt; &lt;span class="n"&gt;boto&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;SimpleGui&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;JFrame&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;boto&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;JButton&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;prem-me&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;boto&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;addActionListener&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// ens registrem com a listeners&lt;/span&gt;
        &lt;span class="n"&gt;del&lt;/span&gt; &lt;span class="n"&gt;botó&lt;/span&gt;
            &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;boto&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setDefaultCloseOperation&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;JFrame&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;EXIT_ON_CLOSE&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setSize&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;300&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;300&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setVisible&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;SimpleGui&lt;/span&gt; &lt;span class="n"&gt;gui&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SimpleGui&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;actionPerformed&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ActionEvent&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;canviaBoto&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// la resposta al clic&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;canviaBoto&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;boto&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setText&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;prem-me un altre cop!&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-simplegui-v1-1"&gt;
&lt;h3&gt;Exercici 2. SimpleGui v1.1&lt;/h3&gt;
&lt;p&gt;En aquest exercici ampliarem la nostra aplicació SimpleGui de manera
que:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;inicialment el text del botó serà &amp;quot;prem-me&amp;quot; (com a la versió 1.0)&lt;/li&gt;
&lt;li&gt;en clicar per primer cop indicarà &amp;quot;prem-me un altre cop!&amp;quot; (cap
canvi respecte 1.0)&lt;/li&gt;
&lt;li&gt;a partir del segon clic, el missatge serà &amp;quot;i ja van «nombre de
cops» clics&amp;quot; on nombre de cops començarà amb 2 i anirà
incrementant-se a mida que es registrin clics.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;Nota&lt;/strong&gt;: no cal preocupar-se pel fet que l'usuari arribi a sobrepassar
amb clics el nombre màxim representable per un enter. Confiem en que la
nostra aplicació no sigui tan addictiva.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-un-grafic-al-marc"&gt;
&lt;h3&gt;Exercici 3. Un gràfic al marc&lt;/h3&gt;
&lt;p&gt;Considera la següent classe:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.awt.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.swing.JPanel&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;FiguraPanel&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;JPanel&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;paintComponent&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Graphics&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="c1"&gt;// sobre-escrit de JPanel&lt;/span&gt;
        &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setColor&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Color&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ORANGE&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fillRect&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Crea un programa, &lt;em&gt;molt&lt;/em&gt; semblant al SimpleGui que, en comptes de
contenir un botó, contingui una Figura.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pista&lt;/strong&gt;: JPanel es pot considerar un accessori, i pot ser afegit al
marc de la mateixa manera que d'altres accessoris com ara el JButton.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-colors-aleatoris-per-la-figura"&gt;
&lt;h3&gt;Exercici 4. Colors aleatoris per la figura&lt;/h3&gt;
&lt;p&gt;El mètode JPanel.paintComponent() no el cridarem mai directament. Ho
farà la màquina virtual cada cop que trobi necessari dibuixar el
contingut. Podem, però, demanar que es repinti cridant el mètode
JFrame.repaint()&lt;/p&gt;
&lt;p&gt;En estendre la classe JPanel, hi podem posar al paintComponent() allò
que ens interessi.&lt;/p&gt;
&lt;p&gt;Per altra banda, a un marc hi podem afegir més d'un component (era
previsible, oi?)&lt;/p&gt;
&lt;p&gt;Però si simplement afegim els elements amb marc.add(element) la cosa no
funciona: un oculta l'altre. No cal que em creguis, &lt;strong&gt;prova-ho!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Un marc es divideix en cinc regions&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Àrees en que es divideix un marc" src="gui.img003.frame_areas.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Per defecte, add() afegeix l'element a l'àrea central.&lt;/p&gt;
&lt;p&gt;És clar, podem demanar al marc que ens afegeixi el nostre element a
l'àrea que ens interessi. Per exemple,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BorderLayout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SOUTH&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;boto&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per a aquest exercici, substitueix el codi de FiguraPanel anterior pel
següent&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.awt.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.swing.JPanel&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;FiguraPanel&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;JPanel&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Color&lt;/span&gt; &lt;span class="nf"&gt;nouColor&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="c1"&gt;// retorna un nou color aleatori&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vermell&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;random&lt;/span&gt;&lt;span class="o"&gt;()*&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;verd&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;random&lt;/span&gt;&lt;span class="o"&gt;()*&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;blau&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;random&lt;/span&gt;&lt;span class="o"&gt;()*&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Color&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vermell&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;verd&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;blau&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;paintComponent&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Graphics&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// omple tot l&amp;#39;espai amb color el per defecte (negre)&lt;/span&gt;
        &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fillRect&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getWidth&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getHeight&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="c1"&gt;// defineix un nou color i crea una figura amb aquest&lt;/span&gt;
        &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setColor&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nouColor&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="o"&gt;.**&lt;/span&gt;&lt;span class="n"&gt;fillOval&lt;/span&gt;&lt;span class="o"&gt;**(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Crea un nou programa que contingui un FiguraPanel i un JButton a la
part inferior de la finestra. Quan l'usuari premi el botó, haurà de
canviar el color de la figura.&lt;/p&gt;
&lt;p&gt;Pista:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;actionPerformed&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ActionEvent&lt;/span&gt; &lt;span class="n"&gt;arg0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;repaint&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-colors-i-formes-aleatories"&gt;
&lt;h3&gt;Exercici 5. Colors i formes aleatòries&lt;/h3&gt;
&lt;p&gt;Crea una nova versió de l'exercici anterior, de manera que:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;a cada click, intercali figures entre quadrat i cercle&lt;/li&gt;
&lt;li&gt;a cada click, les dimensions variïn aleatòriament de manera que mai
siguin menors que 100 ni més grans que la mida del marc -10.&lt;/li&gt;
&lt;li&gt;no es pugui repetir el color ni les dimensions anteriors.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-gradients-i-formes-aleatories"&gt;
&lt;h3&gt;Exercici 6. Gradients i formes aleatòries&lt;/h3&gt;
&lt;p&gt;La instància de la classe Graphics que rep paintComponent() és en
realitat un Graphics2D (una subclasse de Graphics)&lt;/p&gt;
&lt;p&gt;Graphics2D disposa d'algunes funcions interessants, com ara la següent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;paintComponent&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Graphics&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;GradientPaint&lt;/span&gt; &lt;span class="n"&gt;rang&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GradientPaint&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Color&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ORANGE&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Color&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;BLUE&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fillRect&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getWidth&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getHeight&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;Graphics2D&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;setPaint&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rang&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fillOval&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Crea una nova versió de l'exercici anterior. Aquest cop es demana que el
color de la figura sigui un gradient de dos colors aleatoris que no han
de coincidir.&lt;/p&gt;
&lt;p&gt;Molt bé, però què passa si necessitem afegir dos botons?&lt;/p&gt;
&lt;p&gt;Per exemple, imagina que hem de desenvolupar un programa que ofereixi
una etiqueta amb un valor enter i dos botons que permetin incrementar i
decrementar el valor en 1.&lt;/p&gt;
&lt;p&gt;Per crear-los i afegir-los no hi ha gaire problema, oi?&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;creem dues instàncies diferents, i&lt;/li&gt;
&lt;li&gt;les afegim al marc a àrees diferents&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;El codi podria ser quelcom semblant a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.awt.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.awt.event.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.swing.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ComptadorSimple&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;ActionListener&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;JFrame&lt;/span&gt; &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;JButton&lt;/span&gt; &lt;span class="n"&gt;incBoto&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;JButton&lt;/span&gt; &lt;span class="n"&gt;decBoto&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;JLabel&lt;/span&gt; &lt;span class="n"&gt;etiqueta&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;ComptadorSimple&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;JFrame&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setDefaultCloseOperation&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;JFrame&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;EXIT_ON_CLOSE&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;incBoto&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;JButton&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;+ 1&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;decBoto&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;JButton&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;- 1&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;         ens afegim com a listeners dels dos botons d&amp;#39;alguna manera&lt;/span&gt;
&lt;span class="cm"&gt;        */&lt;/span&gt;
        &lt;span class="n"&gt;etiqueta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;JLabel&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="n"&gt;SwingConstants&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CENTER&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BorderLayout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;WEST&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;incBoto&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BorderLayout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CENTER&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;etiqueta&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BorderLayout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;EAST&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;decBoto&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setSize&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;300&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setVisible&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;actionPerformed&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ActionEvent&lt;/span&gt; &lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Que faig?&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;ComptadorSimple&lt;/span&gt; &lt;span class="n"&gt;gui&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ComptadorSimple&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Però, com ens afegim com a listeners dels dos botons. I el que és més
important, com ens ho fem per a respondre als esdeveniments dels dos
botons?&lt;/p&gt;
&lt;p&gt;Per a afegir-nos com a listeners dels dos botons és molt fàcil:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;incBoto&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;addActionListener&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;decBoto&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;addActionListener&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per a distingir quin és el botó on han fet clic podem fer ús de la
informació que porta l'esdeveniment que ens envia el botó.&lt;/p&gt;
&lt;p&gt;Si mirem la documentació de ActionEvent
(&lt;a class="reference external" href="http://java.sun.com/javase/6/docs/api/java/awt/event/ActionEvent.html"&gt;http://java.sun.com/javase/6/docs/api/java/awt/event/ActionEvent.html&lt;/a&gt;)
ens trobem amb el mètode heretat de EventObject, getSource()&lt;/p&gt;
&lt;p&gt;Segons la documentació: &lt;em&gt;Returns the object on which the Event initially
occurred.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Per tant, podem simplement:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;actionPerformed&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ActionEvent&lt;/span&gt; &lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(**&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getSource&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;incBoto&lt;/span&gt;&lt;span class="o"&gt;**)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;vol incrementar&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;vol decrementar&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-comptador-simple"&gt;
&lt;h3&gt;Exercici 7. Comptador simple&lt;/h3&gt;
&lt;p&gt;Completa l'aplicació ComptadorSimple perquè els botons incrementin i
decrementin correctament el valor.&lt;/p&gt;
&lt;p&gt;Considera el mètode JLabel.setText()&lt;/p&gt;
&lt;p&gt;Com que no volem que cap usuari prou pacient ens faci petar l'aplicació,
ens assegurarem que en cas que arribem al màxim / mínim enter
representables, que els botons no puguin incrementar / decrementar
respectivament.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="classes-internes"&gt;
&lt;h2&gt;Classes internes&lt;/h2&gt;
&lt;p&gt;La manera de controlar la font dels esdeveniments que hem vist fins ara,
tot i que funciona, no es massa còmoda. En tot cas, no es considera una
solució elegant en el món de la POO.&lt;/p&gt;
&lt;p&gt;Per “elegantitzar-la” però, ens caldrà un concepte que no hem vist
encara: les classes internes o &lt;em&gt;inner classes&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Java permet definir classes dins d'altres classes. El que anomena
classes internes o &lt;em&gt;inner classes&lt;/em&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;classeExterna&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;classeInterna&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Una de les característiques de les classes internes és que aquestes
poden accedir a tots els membres de la classe externa (incloent els
elements privats!)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ClasseExterna&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ClasseInterna&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;modifica&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++;&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Una instància d'una classe interna només pot accedir als membres de la
instància de la classe externa on ha estat creada.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ClasseExterna&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;ClasseInterna&lt;/span&gt; &lt;span class="n"&gt;interna&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ClasseInterna&lt;/span&gt;&lt;span class="o"&gt;()**;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;demostra&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;interna&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;modifica&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;i: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ClasseInterna&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;modifica&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;){&lt;/span&gt;
        &lt;span class="n"&gt;ClasseExterna&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ClasseExterna&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;demostra&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Però, potser et preguntaràs, què passa si em confonc i faig la instància
de ClasseInterna fora de la de ClasseExterna?&lt;/p&gt;
&lt;p&gt;La resposta és: no et preocupis, Java t'ho posarà difícil.&lt;/p&gt;
&lt;p&gt;Per exemple, si intentes fer un&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;ClasseInterna&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ClasseInterna&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;des del main() de ClasseExterna et trobaràs amb un missatge similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;$&lt;/span&gt; &lt;span class="n"&gt;javac&lt;/span&gt; &lt;span class="n"&gt;ClasseExterna&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;

&lt;span class="n"&gt;ClasseExterna&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;non&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;variable&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt; &lt;span class="n"&gt;cannot&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;referenced&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;

&lt;span class="n"&gt;ClasseInterna&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ClasseInterna&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;

&lt;span class="o"&gt;^&lt;/span&gt;

&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;És a dir, que per a fer un new de la &lt;em&gt;inner class&lt;/em&gt; cal fer-ho des del
codi d'una instància de la &lt;em&gt;outer class&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;De fet, es pot crear una instància d'una classe interna des de fora de
la classe externa, però et cal una sintaxi especial i, en el cas remot
que et calgui fer-la servir, ja la cercaràs &lt;a class="footnote-reference" href="#accesinterna" id="id2"&gt;[3]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tornant al nostre problema dels dos botons, amb les classes internes la
cosa es simplifica, no?&lt;/p&gt;
&lt;p&gt;Podem fer una classe interna per a cada botó i ja està.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.awt.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.awt.event.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.swing.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ComptadorSimple&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="c1"&gt;// ja no cal implementar ActionListener&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;JFrame&lt;/span&gt; &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;JButton&lt;/span&gt; &lt;span class="n"&gt;incBoto&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;JButton&lt;/span&gt; &lt;span class="n"&gt;decBoto&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;JLabel&lt;/span&gt; &lt;span class="n"&gt;etiqueta&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;IncComptador&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;ActionListener&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;actionPerformed&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ActionEvent&lt;/span&gt; &lt;span class="n"&gt;arg0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;vol incrementar&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="c1"&gt;// ...&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;ComptadorSimple&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;JFrame&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setDefaultCloseOperation&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;JFrame&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;EXIT_ON_CLOSE&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;incBoto&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;JButton&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;+ 1&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;decBoto&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;JButton&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;- 1&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="c1"&gt;//&lt;/span&gt;
        &lt;span class="n"&gt;IncComptador&lt;/span&gt; &lt;span class="n"&gt;incComptador&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;IncComptador&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;incBoto&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;addActionListener&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;incComptador&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;decBoto&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;addActionListener&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="c1"&gt;// ...);&lt;/span&gt;
        &lt;span class="c1"&gt;//&lt;/span&gt;
        &lt;span class="n"&gt;etiqueta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;JLabel&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="n"&gt;SwingConstants&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CENTER&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BorderLayout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;WEST&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;incBoto&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BorderLayout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CENTER&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;etiqueta&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BorderLayout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;EAST&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;decBoto&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setSize&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;300&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setVisible&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;ComptadorSimple&lt;/span&gt; &lt;span class="n"&gt;gui&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ComptadorSimple&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-8-comptador-simple-amb-inner-classes"&gt;
&lt;h3&gt;Exercici 8. Comptador simple amb inner classes&lt;/h3&gt;
&lt;p&gt;Completa el codi del comptador simple amb classes internes.&lt;/p&gt;
&lt;hr class="docutils" /&gt;
&lt;p&gt;Potser t'estaràs dient, quina gràcia haver de crear una classe (ni que
sigui inner) tot inventant-me un nom diferent per a cada esdeveniment
al que vulgui donar resposta.&lt;/p&gt;
&lt;p&gt;Java disposa d'una notació que ens permetrà salvar-nos d'una
codificació tan tediosa: les &lt;em&gt;classes anònimes&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Segons la secció 3.12 de JAVA in a Nutshell 3&lt;sup&gt;rd&lt;/sup&gt; eddition
(&lt;a class="reference external" href="http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm"&gt;http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm&lt;/a&gt;)&lt;/p&gt;
&lt;blockquote&gt;
An &lt;em&gt;anonymous class&lt;/em&gt; is a local class without a name. An anonymous
class is defined and instantiated in a single succinct expression
using the &lt;tt class="docutils literal"&gt;new&lt;/tt&gt; operator. While a local class definition is a
statement in a block of Java code, an anonymous class definition is
an expression, which means that it can be included as part of a
larger expression, such as a method call. &lt;strong&gt;When a local class is
used only once, consider using anonymous class&lt;/strong&gt; syntax, which
places the definition and use of the class in exactly the same
place.&lt;/blockquote&gt;
&lt;p&gt;Per al que a nosaltres ens ocupa, considera el següent fragment de codi
del nostre comptador simple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="n"&gt;incBoto&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;JButton&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;+ 1&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;decBoto&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;JButton&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;- 1&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="c1"&gt;//&lt;/span&gt;
&lt;span class="n"&gt;incBoto&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;addActionListener&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ActionListener&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;actionPerformed&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ActionEvent&lt;/span&gt; &lt;span class="n"&gt;arg0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;vol incrementar&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;});&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't com simplement s'enuncia un new per a una &lt;em&gt;interface&lt;/em&gt; (!) i tot
seguit es passa a &lt;em&gt;implementar&lt;/em&gt; els mètodes de la interfície (en aquest
cas només &lt;em&gt;actionPerformed(ActionEvent)&lt;/em&gt; )&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-9-si-no-cal-anomenar-no-anomenis"&gt;
&lt;h3&gt;Exercici 9. Si no cal anomenar, no anomenis!&lt;/h3&gt;
&lt;p&gt;Crea una nova versió del comptador simple ara amb classes anònimes per
la implementació dels &lt;em&gt;listeners.&lt;/em&gt;&lt;/p&gt;
&lt;hr class="docutils" /&gt;
&lt;p&gt;Les classes internes poden, a banda d'implementar &lt;em&gt;interfaces&lt;/em&gt;,
pertànyer a una altra posició de la jerarquia de classes que la classe
externa.&lt;/p&gt;
&lt;p&gt;Per a entendre la potència d'aquest fet, construirem una aplicació que
mostri una simple animació.&lt;/p&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.awt.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.swing.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;SimpleAnimacio&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;JFrame&lt;/span&gt; &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// coordenades de la pilota&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Pilota&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;JPanel&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;paintComponent&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Graphics&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setColor&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Color&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;BLUE&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fillOval&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;SimpleAnimacio&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;JFrame&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setDefaultCloseOperation&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;JFrame&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;EXIT_ON_CLOSE&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Pilota&lt;/span&gt; &lt;span class="n"&gt;pilota&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Pilota&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pilota&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setSize&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;300&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;300&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;marc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setVisible&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;130&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;++;&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;++;&lt;/span&gt; &lt;span class="c1"&gt;// recalcula la posicio de la pilota&lt;/span&gt;
            &lt;span class="n"&gt;pilota&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;repaint&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;espera&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;espera&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="c1"&gt;// s&amp;#39;espera una estona&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;Thread&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sleep&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;25&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;SimpleAnimacio&lt;/span&gt; &lt;span class="n"&gt;gui&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SimpleAnimacio&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Com podem veure, hem desenvolupat la classe interna Pilota que és un
JPanel&lt;/p&gt;
&lt;p&gt;És clar, l'animació queda una mica lletja pel fet que la pilota va
deixant rastre. Però ja vam veure com podíem arreglar-lo a l'exemple de
FiguraPanel. Revisa els teus apunts!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-la-pilota-sense-rastre"&gt;
&lt;h3&gt;Exercici 10. La pilota sense rastre&lt;/h3&gt;
&lt;p&gt;Modifica el programa SimpleAnimacio de manera que la pilota no deixi
rastre en moure's.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-11-la-pilota-rebota"&gt;
&lt;h3&gt;Exercici 11. La pilota rebota&lt;/h3&gt;
&lt;p&gt;Crea una aplicació que mostri una pilota de 20x20 rebotant per la
pantalla fins que l'usuari tanqui la finestra.&lt;/p&gt;
&lt;p&gt;El fons de la pantalla serà blanc i inicialment la pantalla tindrà una
mida de 300x200&lt;/p&gt;
&lt;p&gt;Cada cop que la pilota canviï de sentit (horitzontal o vertical)
canviarà a un color aleatori (excepte el blanc)&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="conversors"&gt;
&lt;h2&gt;Conversors&lt;/h2&gt;
&lt;p&gt;El NetBeans, com altres IDE, disposa d'un editor gràfic per a ajudar-nos&lt;/p&gt;
&lt;p&gt;en la composició de les nostres pantalles.&lt;/p&gt;
&lt;p&gt;Aquesta activitat ens introduirà en la composició de GUI mitjançant el
NetBeans&lt;/p&gt;
&lt;div class="section" id="exercici-12-graus-centigrads-a-farenheit"&gt;
&lt;h3&gt;Exercici 12. Graus centígrads a Farenheit&lt;/h3&gt;
&lt;p&gt;A aquest exercici desenvoluparàs un programa que permeti convertir els
graus centígrads a Farenheit.&lt;/p&gt;
&lt;p&gt;Segueix les passes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Crea un nou projecte Java&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Crea un nou fitxer de la categoria &lt;em&gt;Swing GUI Forms&lt;/em&gt; i tipus &lt;em&gt;JFrame
form&lt;/em&gt;, amb el nom ConversorC2F&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A la finestra de propietats del marc,&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;dl class="first docutils"&gt;
&lt;dt&gt;canvia la propietat títol (&lt;em&gt;title&lt;/em&gt;) per “Centigrads&lt;/dt&gt;
&lt;dd&gt;&lt;p class="first last"&gt;a Farenheit” &lt;a class="footnote-reference" href="#pelspuristes" id="id3"&gt;[4]&lt;/a&gt;&lt;/p&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;a la propietat nom indica “frmConversorC2F”&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;indica que no es permet canviar la mida (&lt;em&gt;resizable&lt;/em&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;De la paleta de components, arrossega una etiqueta (&lt;em&gt;label&lt;/em&gt;) de la
categoria &lt;em&gt;Swing Controls&lt;/em&gt; sobre l'àrea del marc.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A la finestra de propietats de l'etiqueta,&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;canvia la propietat &lt;em&gt;text&lt;/em&gt; per “Graus centígrads”&lt;/li&gt;
&lt;li&gt;canvia la propietat de codi &lt;em&gt;Variable Name&lt;/em&gt; per “lblCentigrads”&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Afegeix al costat de l'etiqueta un camp de text (&lt;em&gt;text field&lt;/em&gt;). A la
finestra de propietats:&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;canvia &lt;em&gt;text&lt;/em&gt; per “0”&lt;/li&gt;
&lt;li&gt;canvia &lt;em&gt;tool tip text&lt;/em&gt; per “Escriviu aquí el valor a convertir”&lt;/li&gt;
&lt;li&gt;a la secció de layout indica una mida horitzontal
(&lt;em&gt;Horizontal Size&lt;/em&gt;) de 100&lt;/li&gt;
&lt;li&gt;canvia Variable Name per “txtCentigrads”&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;De la mateixa manera, afegeix una etiqueta i un quadre te text per
als graus Farenheit. Recorda canviar les propietats dels dos controls
per valors apropiats. Assegura't que marques el quadre de text
txtFarenheit com a no editable&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Afegeix un botó i anomena'l “btnConvertC2F”&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Executa el que tens. Hauria de veure's quelcom similar a:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Exemple de pantalla amb el conversor de centígrads a Farenheit" src="gui.img004.centigrads2farenheit.png" /&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Considera el codi generat (pestanya &lt;em&gt;source&lt;/em&gt;) Especialment mira el
codi col·lapsat sota el missatge “Generated Code”. Identifica els
controls que has creat i els valors dels atributs que has marcat.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Torna a la vista de disseny. Selecciona el botó i fes-hi click dret.
Selecciona &lt;em&gt;Events -&amp;gt; Mouse -&amp;gt; Mouse Clicked&lt;/em&gt;. Ara ens apareix un
codi similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;btnConvertC2FMouseClicked&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;awt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;event&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;MouseEvent&lt;/span&gt; &lt;span class="n"&gt;evt&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// TODO add your handling code here:&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="n"&gt;btnConvertC2F&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;addMouseListener&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;awt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;event&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;MouseAdapter&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mouseClicked&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;awt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;event&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;MouseEvent&lt;/span&gt; &lt;span class="n"&gt;evt&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;btnConvertC2FMouseClicked&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;evt&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;});&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Afegeix el següent codi&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;btnConvertC2FMouseClicked&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;awt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;event&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;MouseEvent&lt;/span&gt; &lt;span class="n"&gt;evt&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;centigrads&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;txtCentigrads&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getText&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;farenheit&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cnvCentigrad2Farenheit&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;centigrads&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;txtFarenheit&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setText&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;farenheit&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-13-farenheit-a-centigrads-tambe"&gt;
&lt;h3&gt;Exercici 13. Farenheit a centígrads també&lt;/h3&gt;
&lt;p&gt;Crea una nova versió de l'aplicació anterior que permeti també convertir
de Farenheit a Centígrads. La UI serà similar a:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Exemple de pantalla amb el conversor centígrads/Farenheit" src="gui.img005.farenheit22centigrads.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Considera les opcions de refactoring copy-paste pel marc i de duplicació
pel botó.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-14-farenheit-a-centigrads-sense-botons"&gt;
&lt;h3&gt;Exercici 14. Farenheit a centígrads sense botons&lt;/h3&gt;
&lt;p&gt;Fes una nova versió de l'aplicació anterior. Aquest cop considera
l'esdeveniment keyReleased dels quadre de text per a realitzar les
conversions en comptes dels botons.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="veu-digital"&gt;
&lt;h2&gt;Veu digital&lt;/h2&gt;
&lt;p&gt;En aquesta activitat, aprendrem a incorporar una biblioteca d'un
tercer. &lt;a class="footnote-reference" href="#donletret" id="id4"&gt;[5]&lt;/a&gt;&lt;/p&gt;
&lt;div class="section" id="exercici-15-el-sintetitzador-de-veu"&gt;
&lt;h3&gt;Exercici 15. El sintetitzador de veu&lt;/h3&gt;
&lt;p&gt;Segueix les passes&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Crea un nou projecte i desenvolupa una interfície amb un marc que
contingui:&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;un àrea de text anomenada txtArea, inicialment sense text, amb un
text d'ajuda que digui “Text a pronunciar”&lt;/li&gt;
&lt;li&gt;un botó anomenat btnPronuncia amb el text “Pronuncia”&lt;/li&gt;
&lt;li&gt;un botó anomenat btnEsborra amb el text “Esborra”&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Exemple de pantalla amb el sintetitzador de veu" src="gui.img006.sintetitzador.png" /&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Al costat de la pestanya “Design” hi trobes una sèrie d'icones que
especifiquen el mode en que estàs treballant. Per defecte tens
activat el mode selecció (Selection Mode) Aquest cop, selecciona la
del costat “Connection Mode”&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Fes click sobre el botó btnEsborra i a continuació, fes click sobre
txtArea. T'apareix un quadre de diàleg anomenat “Connection Wizard”
que t'ajudarà a crear una connexió entre ambdós controls.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Selecciona Events -&amp;gt; Mouse -&amp;gt; mouseClicked i accepta el nom que
t'apareix per defecte fent click a següent.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A la següent pantalla, selecciona la propietat Text de txtArea i fes
Next&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Selecciona l'opció exclusiva (radi button) etiquetada amb Value però
no indiquis cap valor. Fixa't a l'espai de sota on diu “Generated
Parameters Preview” que t'indica que el valor a assignar serà la
cadena buida. Tot just el que esperem per a un botó que es diu
esborra, oi?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Fes Finish i comprova el codi que ha generat automàticament per a
tu. Bé, en aquest cas és possible que haguéssim acabat abans
escrivint directament el codi.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Com que no volem fer que btnPronuncia modifiqui res de txtArea, el
que farem serà crear manualment el codi de resposta (recorda click
dret -&amp;gt; &lt;em&gt;Events -&amp;gt; Mouse -&amp;gt; mouseClicked&lt;/em&gt;) Aquí hauríem d'afegir el
codi per a pronunciar el text. Però com ho fem? Posa't ara a
desenvolupar un sintetitzador de veu! Sort que algú ens l'ha fet per
nosaltres.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Ves a
&lt;a class="reference external" href="http://freetts.sourceforge.net/"&gt;http://freetts.sourceforge.net&lt;/a&gt;
i descarrega't el fitxer bin. N'hi ha d'altres possibilitats, però
per a les necessitats d'aquest exercici en tindrem prou amb aquest.
Descomprimeix el zip en algun lloc i localitza el fitxer
&lt;em&gt;freetts.jar&lt;/em&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;dl class="first docutils"&gt;
&lt;dt&gt;A la carpeta de biblioteques (&lt;em&gt;Libraries&lt;/em&gt;) del teu projecte, fes&lt;/dt&gt;
&lt;dd&gt;&lt;p class="first last"&gt;click dret, selecciona &lt;em&gt;Add JAR/Folder,&lt;/em&gt; i afegeix freetts.jar.&lt;/p&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Afegeix el següent codi&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;btnPronunciaMouseClicked&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;awt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;event&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;MouseEvent&lt;/span&gt; &lt;span class="n"&gt;evt&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;sText&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;txtArea&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getText&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sText&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;sText&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;trim&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;VoiceManager&lt;/span&gt; &lt;span class="n"&gt;voiceManager&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;Voice&lt;/span&gt; &lt;span class="n"&gt;syntheticVoice&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;voiceManager&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;VoiceManager&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getInstance&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;syntheticVoice&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;voiceManager&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVoice&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;kevin&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;syntheticVoice&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;allocate&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;syntheticVoice&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;speak&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sText&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printStackTrace&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;syntheticVoice&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;deallocate&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Executa'l i fes alguna prova amb l'altaveu engegat.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Afegeix el codi necessari perquè quan l'usuari premi btnEsborra es
senti el text del botó per l'altaveu.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-16-el-conversor-parlat"&gt;
&lt;h3&gt;Exercici 16. El conversor parlat&lt;/h3&gt;
&lt;p&gt;Modifica l'aplicació de conversió de centígrads i Farenheit (la versió
amb dos botons de l'exercici 1.2. Farenheit a centígrads també”) de
manera que ara, a banda de realitzar la conversió es pronunciarà el
resultat.&lt;/p&gt;
&lt;p&gt;Alguns exemples de pronunciació:&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;0 degree celsius are 32 degree farenheit.&lt;/li&gt;
&lt;li&gt;33 degree farenheit are 1 degrees celsius.&lt;/li&gt;
&lt;li&gt;conversion error&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Nota&lt;/strong&gt;: fitxa't que no és requeriment considerar singular/plural. En
canvi, és molt recomanable que ho facis en anglès si vols que s'entengui
una mica.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="creacio-d-interficies"&gt;
&lt;h2&gt;Creació d'interfícies&lt;/h2&gt;
&lt;div class="section" id="exercici-17-anagram-game"&gt;
&lt;h3&gt;Exercici 17. Anagram Game&lt;/h3&gt;
&lt;p&gt;Considera l'exemple d'aplicació anomenat Anagram Game.&lt;/p&gt;
&lt;p&gt;Hi ha alguns elements nous però no t'amoïnis, no cal que l'entenguem
sencer per a poder realitzar l'exercici.&lt;/p&gt;
&lt;p&gt;Crea una nova versió del joc de manera que ofereixi un botó anomenat Tip
que cada cop que es premi mostri una mica més de la paraula a endevinar
al mateix lloc on apareix la resta dels missatges . La primera vegada
que es premi per a una paraula, mostrarà el primer caràcter. Quan hagi
mostrat tota la paraula, la copiarà al quadre de text.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-18-client-editor"&gt;
&lt;h3&gt;Exercici 18. Client Editor&lt;/h3&gt;
&lt;p&gt;Considera l'exemple d'aplicació anomenat Client Editor&lt;/p&gt;
&lt;p&gt;Hi ha un munt d'elements nous però no t'amoïnis, no cal que l'entenguem
sencer per a poder realitzar l'exercici.&lt;/p&gt;
&lt;p&gt;Crea una nova versió on els clients disposin d'una nova propietat
anomenada “docId” de tipus String, que es mostri com a dada personal i
que el formulari validi el seu valor com ho fa amb altres camps (ex.
edat) de manera que només siguin vàlids strings de longitud 9 on els
primers 8 siguin números i el darrer una lletra. No es requereix
comprovar que la lletra correspongui a la requerida per a un NIF
correcte.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-19-card-layout"&gt;
&lt;h3&gt;Exercici 19. Card Layout&lt;/h3&gt;
&lt;p&gt;Crea una aplicació que disposi d'un grup de botons “radio” amb les
opcions “gos”, “gat” i “canari”&lt;/p&gt;
&lt;p&gt;Crea dins del marc principal un panell amb layout tipus Card Layout i
fica-hi dins tres panells que continguin cadascuna una etiqueta amb el
nom d'un animal (gat, gos, canari) i una imatge de l'animal (cerca tres
imatges petites per la web)&lt;/p&gt;
&lt;p&gt;Quan l'usuari seleccioni una de les opcions, s'haurà de veure la imatge
corresponent.&lt;/p&gt;
&lt;p&gt;L'aplicació és molt similar a la que mostra l'exemple
&lt;a class="reference external" href="http://java.sun.com/docs/books/tutorial/uiswing/components/button.html#radiobutton"&gt;http://java.sun.com/docs/books/tutorial/uiswing/components/button.html#radiobutton&lt;/a&gt;
però allà només canvia la imatge d'una etiqueta, mentre que aquí es
mostra un panell diferent sencer.&lt;/p&gt;
&lt;p&gt;Assegura't que les imatges es troben a un paquet anomenat &lt;em&gt;recursos&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Pista: considera la propietat Card Name des de NetBeans o bé afegeix els
panells interns amb .add(panell, “nom del panell”) Així, el codi per a
mostrar un panell o altre seria quelcom similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;CardLayout&lt;/span&gt; &lt;span class="n"&gt;layout&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CardLayout&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;panellCard&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLayout&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="n"&gt;layout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;show&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;panellCard&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;nom del panell&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-20-llista-de-pizzes"&gt;
&lt;h3&gt;Exercici 20. Llista de pizzes&lt;/h3&gt;
&lt;p&gt;Es demana desenvolupar un programa que tingui la següent interfície&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Interfície de Pizzes" src="gui.img007.pizza.png" /&gt;
&lt;/div&gt;
&lt;p&gt;L'aplicació disposarà de tres packages anomenats model, vista i
controlador.&lt;/p&gt;
&lt;p&gt;Al package model hi haurà dues classes: Pizza i PizzaModel&lt;/p&gt;
&lt;p&gt;Pizza és una classe regular amb les propietats: nom, mida i nombre
d'ingredients&lt;/p&gt;
&lt;p&gt;La mida és un valor enter del 0 al 3 que correspon a “indefinit”,
“petita”, “mitjana” i “gran”&lt;/p&gt;
&lt;p&gt;El nombre d'ingredients és un valor enter positiu.&lt;/p&gt;
&lt;p&gt;El codi de PizzaModel ens el ofereixen tot i que sense cap documentació
i ni tant sols complet&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;pizza.model&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.ArrayList&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;PizzaModel&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Pizza&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;pizzes&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;PizzaModel&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;pizzes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Pizza&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="n"&gt;populate&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Pizza&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="nf"&gt;getPizzes&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Pizza&lt;/span&gt;&lt;span class="o"&gt;[])&lt;/span&gt; &lt;span class="n"&gt;pizzes&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toArray&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Pizza&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;pizzes&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;size&lt;/span&gt;&lt;span class="o"&gt;()]);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;populate&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// crea unes quantes pizzes de prova&lt;/span&gt;
        &lt;span class="n"&gt;pizzes&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Pizza&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Carbonara&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;pizzes&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Pizza&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Milanessa&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;pizzes&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Pizza&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Margarita Gegant&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;quants&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Pizza&lt;/span&gt; &lt;span class="nf"&gt;getElement&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Pizza&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;remove&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Pizza&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Al package control hi ha com a mínim la classe PizzaControl que
implementa la interfície javax.swing.ListModel ja que serveix com a
model per al JList de la interfície. El seu únic constructor té com a
signatura:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;PizzaControl&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PizzaModel&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Al package vista hi ha com a mínim la classe PizzaVista que estén
javax.swing.JFrame&lt;/p&gt;
&lt;p&gt;Com es pot veure al gràfic, conté els següents elements:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;un JList que té com a model una instància de PizzaModel. Els valors
que hi apareixen són els noms de les pizzes. Inicialment no té cap
element seleccionat i quan es selecciona un d'ells, els valors de la
pizza seleccionada són copiats als controls corresponents.&lt;/li&gt;
&lt;li&gt;un JTextField que conté el nom d'una pizza. Inicialment està buit.&lt;/li&gt;
&lt;li&gt;un JComboBox que conté els valors dels possibles gruixos de les
pizzes&lt;/li&gt;
&lt;li&gt;un altre JTextField que conté el nombre d'ingredients de la pizza.
Només accepta la introducció de números i inicialment val 0.&lt;/li&gt;
&lt;li&gt;un JButton que:&lt;ul&gt;
&lt;li&gt;apareix deshabilitat quan no hi ha cap valor vàlid als camps de
nom ni nombre d'ingredients&lt;/li&gt;
&lt;li&gt;quan hi ha valor als camps de nom i nombre d'ingredients queda
habilitat i mostra el text “Nou” si el nom de la pizza no es troba
a la llista o bé “Guarda” si existeix ja una pizza amb aquest nom.&lt;/li&gt;
&lt;li&gt;en prémer el botó, es guarden les dades creant una nova pizza o bé
modificant els valors d'una existent.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;un altre botó que:&lt;ul&gt;
&lt;li&gt;apareix habilitat només quan el camp amb el nom correspon a una
pizza de la llista.&lt;/li&gt;
&lt;li&gt;en prémer el botó, apareix un quadre de diàleg demanant
confirmació i si confirma, s'elimina l'element de la llista i (és
clar) del model.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;un botó de cancel·lació que quan es prem, neteja els valors dels
camps i deixa la llista sense cap element seleccionat.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="ampliacio"&gt;
&lt;h2&gt;Ampliació&lt;/h2&gt;
&lt;p&gt;Si tens interès per a aprofundir en aquest tema, pots començar pel
tutorial d'&lt;a class="reference external" href="https://docs.oracle.com/javase/tutorial/uiswing/TOC.html"&gt;introdució a Swing&lt;/a&gt; que
ofereix Oracle. De fet, aquests apunts es recolzen fortament en els
continguts d'una versió anterior d'aquest tutoria.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="anotacions"&gt;
&lt;h2&gt;Anotacions&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="guilocal" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;[1]&lt;/td&gt;&lt;td&gt;Aquest tema es centra exclusivament en l'ús de la
biblioteca &lt;em&gt;Swing&lt;/em&gt; per aplicacions d'escriptori.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="altreide" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;[2]&lt;/td&gt;&lt;td&gt;Si t'estimes més fer servir un altre IDE, o fins i tot
si prefereixes fer-ho tot manualment (sense suport), és
perfectament acceptable. Només has de tenir en compte que no rebràs
suport en aquests materials.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="accesinterna" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Per als curiosos impacients:
&lt;tt class="docutils literal"&gt;ClasseExterna.ClasseInterna in = new &lt;span class="pre"&gt;ClasseExterna().new&lt;/span&gt;
&lt;span class="pre"&gt;ClasseInterna();&lt;/span&gt;&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="pelspuristes" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Els més puristes potser voldran posar aquí Celsius en comptes
de Centígrads.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="donletret" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[5]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Aquest exercici està adaptat del que apareix al
capítol 15 del llibre &amp;quot;Pro NetBeansTM IDE 6 Rich Client Platform
Edition&amp;quot; del Adam Myatt Ed. Apress.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Mon, 12 Jan 2015 23:58:30 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-01-12:hola-swing.html</guid><category>java</category></item><item><title>Tutorial d'instal·lació del JDK</title><link>http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-del-jdk.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document descriu la instal·lació del JDK (Java Development Kit)
de Oracle a un sistema Ubuntu.&lt;/p&gt;
&lt;p&gt;Tot i que probablement altres implementacions (com ara OpenJDK) i
altres versions anteriors (ex. la 6) podrien servir perfectament pels
requeriments del curs, farem servir la versió 7 del JDK d'Oracle.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="installacio"&gt;
&lt;h2&gt;Instal·lació&lt;/h2&gt;
&lt;p&gt;Les següents instruccions permeten la instal·lació del JDK d'Oracle a
un Ubuntu 12.04.&lt;/p&gt;
&lt;p&gt;Si penses instal·lar-ho a un sistema diferent, considera seguir les
instruccions de la &lt;a class="reference external" href="http://www.oracle.com/technetwork/java/javase/downloads"&gt;pàgina oficial&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Els usuaris d'Ubuntu, disposem d'un repositori on trobem un paquet que
ens automatitza la instal·lació.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;sudo add-apt-repository ppa:webupd8team/java
You are about to add the following PPA to your system:
 Oracle Java &lt;span class="o"&gt;(&lt;/span&gt;JDK&lt;span class="o"&gt;)&lt;/span&gt; Installer &lt;span class="o"&gt;(&lt;/span&gt;automatically downloads and installs Oracle JDK7&lt;span class="o"&gt;)&lt;/span&gt;. There are no actual Java files in this PPA. More info: http://www.webupd8.org/2012/01/install-oracle-java-jdk-7-in-ubuntu-via.html
 More info: https://launchpad.net/~webupd8team/+archive/java
Press &lt;span class="o"&gt;[&lt;/span&gt;ENTER&lt;span class="o"&gt;]&lt;/span&gt; to &lt;span class="k"&gt;continue&lt;/span&gt; or ctrl-c to cancel adding it
«...»
&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get update
&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get install oracle-java7-installer
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest moment ja hauríem de tenir instal·lat el jdk 7 a la nostra
màquina. Pot passar, però, que encara no estigui enllaçada la nova
versió. Ho comprovarem fent&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java -version
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si ens surt quelcom similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;java version &amp;quot;1.7.0_05&amp;quot;
Java(TM) SE Runtime Environment (build 1.7.0_05-b05)
Java HotSpot(TM) Server VM (build 23.1-b03, mixed mode)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ja estem. Altrament caldrà seleccionar aquesta versió. És fàcil:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;sudo update-alternatives --config java
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Que ens generarà quelcom similar a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Hi ha 3 possibilitats per a l&amp;#39;alternativa java (que proveeix /usr/bin/java).

  Selecció    Camí                                          Prioritat  Estat
------------------------------------------------------------
  0            /usr/lib/jvm/java-7-oracle/jre/bin/java         1062      mode automàtic
  1            /usr/lib/jvm/java-6-openjdk-i386/jre/bin/java   1061      mode manual
* 2            /usr/lib/jvm/java-6-sun/jre/bin/java            63        mode manual
  3            /usr/lib/jvm/java-7-oracle/jre/bin/java         1062      mode manual

Premeu retorn per a mantenir l&amp;#39;opció per defecte[*], o introduïu un número de selecció: 3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En el cas de l'exemple, cal escollir &lt;tt class="docutils literal"&gt;0&lt;/tt&gt; o &lt;tt class="docutils literal"&gt;3&lt;/tt&gt; doncs són les
opcions que apunten a la versió 7 acabada d'instal·lar. Escollirem
&lt;tt class="docutils literal"&gt;0&lt;/tt&gt; per deixar al sistema d'alternatives que decideixi l'opció en
cas que tornem a instal·lar o eliminem algun paquet.&lt;/p&gt;
&lt;p&gt;Ara, hauríem de disposar dels programes &lt;tt class="docutils literal"&gt;javac&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;java&lt;/tt&gt; en la
darrera versió. Podem fer una darrera comprovació amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;javac -version
javac 1.7.0_45
&lt;span class="nv"&gt;$ &lt;/span&gt;java -version
java version &lt;span class="s2"&gt;&amp;quot;1.7.0_45&amp;quot;&lt;/span&gt;
Java&lt;span class="o"&gt;(&lt;/span&gt;TM&lt;span class="o"&gt;)&lt;/span&gt; SE Runtime Environment &lt;span class="o"&gt;(&lt;/span&gt;build 1.7.0_45-b18&lt;span class="o"&gt;)&lt;/span&gt;
Java HotSpot&lt;span class="o"&gt;(&lt;/span&gt;TM&lt;span class="o"&gt;)&lt;/span&gt; 64-Bit Server VM &lt;span class="o"&gt;(&lt;/span&gt;build 24.45-b08, mixed mode&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Tue, 09 Sep 2014 23:57:30 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2014-09-09:tutorial-dinstallacio-del-jdk.html</guid><category>java</category></item><item><title>Tutorial d'instal·lació de Eclipse</title><link>http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-de-eclipse.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document descriu una manera d'instal·lar l'IDE Eclipse a un
sistema Ubuntu. Per les característiques particulars de l'aplicació
Eclipse, aquestes instruccions haurien de funcionar sense gaires
canvis a altres sistemes operatius.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="installacio"&gt;
&lt;h2&gt;Instal·lació&lt;/h2&gt;
&lt;p&gt;Per la realització d'una instal·lació de Eclipse seguirem les següents
passes des d'una consola:&lt;/p&gt;
&lt;ol class="arabic" start="0"&gt;
&lt;li&gt;&lt;p class="first"&gt;Abans d'instal·lar Eclipse&lt;/p&gt;
&lt;p&gt;Donat que Eclipse és una aplicació java, caldrà disposar d'una
màquina virtual (JVM) al nostre sistema per a poder-la executar.&lt;/p&gt;
&lt;p&gt;Tot i que virtualment podríem fer servir altres implementacions
(ex. OpenJDK o gcj), seguirem el &lt;a class="reference external" href="http://www.eclipse.org/forums/index.php/t/161212/"&gt;consell&lt;/a&gt; del
fòrum d'Eclipse i farem servir el JDK d'Oracle.&lt;/p&gt;
&lt;p&gt;Per altra banda, instal·larem la versió 7 de Java, la darrera
disponible en el moment en que es va elaborar aquesta guia (juliol
2012)&lt;/p&gt;
&lt;p&gt;Com que la llicència del jdk d'Oracle (abans Sun) va canviant el
grau d'&lt;em&gt;obertura&lt;/em&gt; des de la perspectiva d'algunes distribucions
(com ara Ubuntu), és possible (de fet probable) que no disposem de
cap versió instal·lada o que aquesta no sigui la desitjada.&lt;/p&gt;
&lt;p&gt;Per a assegurar-nos que el nostre sistema disposa de la versió del
JDK que volem, podem fer quelcom similar a:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ sudo update-alternatives --config java
&lt;/pre&gt;
&lt;p&gt;Si ens respon quelcom similar a:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
update-alternatives: error: no alternatives for java.
&lt;/pre&gt;
&lt;p&gt;o bé quelcom que no inclou la versió desitjada com ara:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Hi ha 2 possibilitats per a l'alternativa java (que proveeix /usr/bin/java).

  Selecció    Camí                                          Prioritat  Estat
------------------------------------------------------------
* 0            /usr/lib/jvm/java-6-openjdk-i386/jre/bin/java   1061      mode automàtic
  1            /usr/lib/jvm/java-6-sun/jre/bin/java            63        mode manual
&lt;/pre&gt;
&lt;p&gt;caldrà instal·lar java. Trobareu una guia breu per Ubuntu &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-del-jdk.html"&gt;aquí&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Obtenció de l'Eclipse&lt;/p&gt;
&lt;p&gt;Si l'ús que hem de fer d'aquest IDE és molt introductori, podríem
fer servir la versió d'Eclipse que es troba als repositoris
d'Ubuntu, malgrat queda molt endarrerida respecte la darrera versió
que es troba al lloc oficial del IDE:
&lt;a class="reference external" href="http://www.eclipse.org/downloads/"&gt;http://www.eclipse.org/downloads/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;En el moment en que es va escriure aquesta guia, la
darrera versió disponible era la 4.2, mentre que la dels
repositoris anaven encara per la 3.7.&lt;/p&gt;
&lt;p&gt;Aquesta guia proposa la instal·lació de la darrera versió
disponible per desenvolupadors de java &amp;quot;Eclipse IDE for Java
Developers&amp;quot;.&lt;/p&gt;
&lt;p&gt;D'aquesta manera ens trobarem un fitxer anomenat quelcom similar a:
./eclipse-java-juno-linux-gtk.tar.gz&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Instal·lació de l'IDE&lt;/p&gt;
&lt;p&gt;L'aplicació Eclipse és una mica particular en relació a d'altres,
en el sentit que la seva instal·lació consisteix en simplement
descomprimir el paquet i executar l'IDE.&lt;/p&gt;
&lt;p&gt;Així, escollirem el directori on volem que quedi instal·lada
l'aplicació. Per exemple, &lt;tt class="docutils literal"&gt;~/soft&lt;/tt&gt;. Així, podem fer servir
quelcom similar a:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ mkdir -p ~/soft
$ mv eclipse-java-juno-linux-gtk.tar.gz ~/soft
$ cd ~/soft
$ tar xzvf eclipse-java-juno-linux-gtk.tar.gz
&lt;/pre&gt;
&lt;p&gt;Amb això, ja podem executar eclipse&lt;/p&gt;
&lt;pre class="literal-block"&gt;
~/soft/ $ eclipse/eclipse
&lt;/pre&gt;
&lt;p&gt;En cas que aparegui un missatge d'error com ara:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Missatge d'error amb la màquina virtual de Java" src="http://apuntstecnics.herokuapp.com/images/eclipse001.error_jdk.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Vol dir que hi ha algun problema amb la màquina virtual de Java.
En aquest cas, intentem, si més no, reinstal·lar-la.&lt;/p&gt;
&lt;p&gt;Per comoditat, es pot crear algun llançador. Per exemple, per poder
executar-ho des de línia de comandes, pot ser còmode:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
    $ cd ~
    $ mkdir -p bin
    $ cd bin
    $ cat &amp;gt; eclipse.sh &amp;lt;&amp;lt; EOF
    &amp;gt; #! /bin/sh
    &amp;gt; ~/soft/eclipse/eclipse &amp;amp;
    &amp;gt; EOF
    $ chmod u+x eclipse.sh

i, des de qualsevol lloc ::

    $ eclipse.sh
&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Configuració del directori de treball&lt;/p&gt;
&lt;p&gt;En arrancar, Eclipse ens demanarà un lloc on deixar els projectes
Eclipse amb que treballem (&lt;em&gt;workspace&lt;/em&gt;). Escollirem un directori
que ens sigui còmode.&lt;/p&gt;
&lt;p&gt;Serà aquí on podrem trobar els fitxers que es generin amb els
nostres projectes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Una prova ràpida&lt;/p&gt;
&lt;p&gt;Per defecte, Eclipse s'instal·la per construir aplicacions en
java.&lt;/p&gt;
&lt;p&gt;Aprofitant que no hem de fer res especial, farem una primera prova
de l'entorn creant un &amp;quot;original&amp;quot; programa de salutació al món.&lt;/p&gt;
&lt;p&gt;Anirem a File -&amp;gt; New -&amp;gt; Java Project, definirem el nom del projecte
(ex. HolaMon) i deixarem la resta d'opcions per defecte. Quan ja ho
tenim tot, premem &lt;em&gt;Finish&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Amb això, Eclipse ens ha creat el projecte HolaMon amb diferents
carpetes i recursos.&lt;/p&gt;
&lt;p&gt;Anem ara a File -&amp;gt; New -&amp;gt; Class, i al quadre de text &lt;tt class="docutils literal"&gt;Name:&lt;/tt&gt; hi
introduïm &amp;quot;HolaMon&amp;quot;. Marquem el quadre de selecció &lt;tt class="docutils literal"&gt;public static
void main(String[] args)&lt;/tt&gt; de la secció &lt;tt class="docutils literal"&gt;Which method stubs would
you like to create?&lt;/tt&gt; i, deixant la resta d'opcions amb els valors
per defecte premem &lt;em&gt;Finish&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;En aquest moment ens apareixerà una finestra amb un aspecte similar
al següent:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Aspecte de l'entorn gràfic d'Eclipse" src="http://apuntstecnics.herokuapp.com/images/eclipse001.img001.holamon.png" /&gt;
&lt;/div&gt;
&lt;p&gt;A la subfinestra més ampla (a la dreta), hi trobem un editor amb el
codi del nostre projecte. Eclipse ens ha creat un primer esquema de
la classe HolaMon que hem demanat crear.&lt;/p&gt;
&lt;p&gt;Ara, allà on posa &lt;tt class="docutils literal"&gt;// TODO &lt;span class="pre"&gt;Auto-generated&lt;/span&gt; method stub&lt;/tt&gt; escriurem
&lt;tt class="docutils literal"&gt;Sys&lt;/tt&gt;. A continuació, farem &amp;lt;ctrl&amp;gt;-&amp;lt;espai&amp;gt; i podrem veure que
Eclipse ens ofereix una llista de suggeriments per completar la
paraula que estem escrivint (navegable amb el cursor) juntament amb
documentació corresponent a la proposta de compleció
sel·leccionada. Farem &amp;lt;enter&amp;gt; per completar.&lt;/p&gt;
&lt;p&gt;Continuem escrivint un punt &lt;tt class="docutils literal"&gt;.&lt;/tt&gt; i observem que ens apareix una
llista de possibilitats per a continuar que podem navegar amb el
cursor. Si escrivim ara una lletra (ex. &lt;tt class="docutils literal"&gt;o&lt;/tt&gt;) reduirà les
propostes a aquelles que comencen amb &amp;quot;o&amp;quot;. Escollirem l'única opció
disponible (&lt;tt class="docutils literal"&gt;out&lt;/tt&gt;) i tornarem a escriure un punt. Ens apareix una
nova llista amb la primera opció &lt;tt class="docutils literal"&gt;println(String x)&lt;/tt&gt;. Justament
la funció que ens interessa. L'escollim amb &amp;lt;enter&amp;gt; i ens
autocompleta a la funció &lt;tt class="docutils literal"&gt;System.out.println()&lt;/tt&gt; deixant-nos el
cursor dins dels parèntesis amb el nom d'una variable &lt;tt class="docutils literal"&gt;x&lt;/tt&gt; i
informant-nos del possible tipus de dades que hi podem ficar dins.
Substituirem la &lt;tt class="docutils literal"&gt;x&lt;/tt&gt; per la cadena &lt;tt class="docutils literal"&gt;&amp;quot;Hola &lt;span class="pre"&gt;Món!\n&amp;quot;&lt;/span&gt;&lt;/tt&gt; i farem
&amp;lt;enter&amp;gt;. Eclipse col·loca el cursor al final de la sentència.
Acabem amb un punt i coma la línia.&lt;/p&gt;
&lt;p&gt;Si tot està correcte (Eclipse ens avisaria en cas contrari) podem
ja executar el nostre programa. Run -&amp;gt; Run. Eclipse ens demana si
volem guardar els canvis (ens permet marcar autoguardar si volem).
En fer &lt;em&gt;OK&lt;/em&gt;  ens apareix una nova subfinestra a la part inferior on
es veu el resultat de l'execució del programa. Eclipse s'ha fet
càrrec de compilar i executar el nostre codi.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Ja tenim disponible l'Eclipse.&lt;/p&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Tue, 09 Sep 2014 22:59:30 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2014-09-09:tutorial-dinstallacio-de-eclipse.html</guid></item><item><title>Configuració d'Eclipse per C/C++</title><link>http://apuntstecnics.herokuapp.com/configuracio-declipse-per-cc.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document descriu la preparació de Eclipse com a IDE de
desenvolupament en C/C++ al sistema operatiu Ubuntu 12.04.
Probablement les passes seran similars a altres sistemes operatius,
distribucions i versions. En tot cas, pots fer una ullada a la
&lt;a class="reference external" href="href=&amp;quot;http://wiki.eclipse.org/CDT/User/FAQ&amp;quot;"&gt;documentació oficial del projecte&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Abans de començar, comprova que no disposes ja de la instal·lació del
plugin CDT. Ho pots fer, per exemple, intentant crear un nou projecte
C++ a partir de &lt;tt class="docutils literal"&gt;File &lt;span class="pre"&gt;-&amp;gt;&lt;/span&gt; New &lt;span class="pre"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="pre"&gt;Project...&lt;/span&gt;&lt;/tt&gt;. Si al quadre que
apareix hi trobem una secció anomenada &lt;tt class="docutils literal"&gt;C/C++&lt;/tt&gt; i hi podem crear un
projecte C, podem ignorar la resta d'aquesta guia perquè ja el tenim
instal·lat!&lt;/p&gt;
&lt;p&gt;Instal·larem el plug-in &lt;a class="reference external" href="href=&amp;quot;http://www.eclipse.org/cdt/&amp;quot;"&gt;CDT&lt;/a&gt;
(C/C++ Development Tooling)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="installacio"&gt;
&lt;h2&gt;Instal·lació&lt;/h2&gt;
&lt;p&gt;Realitzarem la instal·lació tot seguint les següents passes.&lt;/p&gt;
&lt;div class="section" id="el-compilador"&gt;
&lt;h3&gt;1. El compilador&lt;/h3&gt;
&lt;p&gt;Donat que el projecte CDT no ofereix el compilador de C/C++,
haurem d'instal·lar un nosaltres. A l'Ubuntu el més probable és que
el tinguem ja. Ho podem comprovar amb:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ g++ --version
g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
$ make --version
GNU Make 3.81
Copyright (C) 2006  Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.

This program built for i686-pc-linux-gnu
&lt;/pre&gt;
&lt;p&gt;En cas d'error amb la primera comanda, caldrà instal·lar el
compilador. En cas d'error amb &lt;tt class="docutils literal"&gt;make&lt;/tt&gt;, comprovarem si &lt;tt class="docutils literal"&gt;gmake&lt;/tt&gt;
sí està disponible. Altrament, haurem d'instal·lar-ho.  Donat que
aquestes instruccions van més enllà dels objectius d'aquesta petita
guia, caldrà cercar les instruccions corresponents pel sistema
operatiu objectiu.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="installem-el-plug-in"&gt;
&lt;h3&gt;2. Instal·lem el plug-in&lt;/h3&gt;
&lt;p&gt;Naveguem pels menus &lt;tt class="docutils literal"&gt;Help &lt;span class="pre"&gt;-&amp;gt;&lt;/span&gt; Install New &lt;span class="pre"&gt;Software...&lt;/span&gt;&lt;/tt&gt; i al quadre de
diàleg que emergeix premem el botó &lt;tt class="docutils literal"&gt;add&lt;/tt&gt;. Ens apareix un nou quadre
de diàleg amb els camps de text &lt;tt class="docutils literal"&gt;Name&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;Location&lt;/tt&gt;. Al primer li
posarem &lt;strong&gt;CDT&lt;/strong&gt; i al segon
&lt;strong&gt;http://download.eclipse.org/tools/cdt/releases/juno&lt;/strong&gt;&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Instal·lació del pluguin CDT" src="http://apuntstecnics.herokuapp.com/images/eclipse002.add_CDT.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Potser li costarà una estona, però si tot va bé acabarà mostrant
dues entrades anomenades &lt;tt class="docutils literal"&gt;CDT Main Features&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;CDT Optional
Features&lt;/tt&gt;. Desplegarem la primera (fent clic sobre el triangle que
apareix abans de cada entrada) i escollirem la primera de les
subentrades que hi apareixen: &lt;strong&gt;C/C++ Development Tools&lt;/strong&gt;.
&lt;strong&gt;Important&lt;/strong&gt;: no és adequat seleccionar-ho tot! Hi ha dependències
que potser faran que no ens funcioni l'aplicació.&lt;/p&gt;
&lt;p&gt;Farem &lt;tt class="docutils literal"&gt;Next&lt;/tt&gt; dos cops i, si estem d'acord amb els termes de la
llicència d'ús &lt;a class="footnote-reference" href="#noaggree" id="id1"&gt;[1]&lt;/a&gt; , sel·leccionem l'opció &lt;strong&gt;I accept the
terms of license aggreement&lt;/strong&gt;, premem &lt;tt class="docutils literal"&gt;Finish&lt;/tt&gt; i esperem una
estoneta.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Acceptació dels terminis i llicència d'Eclipse" src="http://apuntstecnics.herokuapp.com/images/eclipse002.aggreement_CDT.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Finalment haurem de reiniciar Eclipse i, en rearrancar, ja tindrem
el plug-in disponible.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="provem-la-installacio"&gt;
&lt;h3&gt;3. Provem la instal·lació&lt;/h3&gt;
&lt;p&gt;Naveguem &lt;tt class="docutils literal"&gt;File &lt;span class="pre"&gt;-&amp;gt;&lt;/span&gt; New &lt;span class="pre"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="pre"&gt;Project...&lt;/span&gt;&lt;/tt&gt; i hi escollim &lt;cite&gt;C Project`&lt;/cite&gt;.&lt;/p&gt;
&lt;p&gt;Anomenem el projecte quelcom similar a &amp;quot;HolaCDT&amp;quot; a la localització per
defecte i de tipus &lt;strong&gt;Empty Project&lt;/strong&gt; i fem &lt;tt class="docutils literal"&gt;següent&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Al quadre de diàleg &lt;tt class="docutils literal"&gt;Select Configurations&lt;/tt&gt; premem el botó
&lt;tt class="docutils literal"&gt;Advanced &lt;span class="pre"&gt;settings...&lt;/span&gt;&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Al quadre de diàleg &lt;tt class="docutils literal"&gt;Properties for HolaCDT&lt;/tt&gt; naveguem per l'arbre
d'opcions &lt;tt class="docutils literal"&gt;C/C++ General&lt;/tt&gt;-&amp;gt; &lt;tt class="docutils literal"&gt;Code Analysis&lt;/tt&gt; -&amp;gt; &lt;tt class="docutils literal"&gt;Launching&lt;/tt&gt; i
marquem l'opció &lt;tt class="docutils literal"&gt;Run with build&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Si ens demana que si volem obrir la perspectiva associada a CDT,
direm que Sí.&lt;/p&gt;
&lt;p&gt;Seleccionem ara crear un nou fitxer font (&lt;tt class="docutils literal"&gt;File&lt;/tt&gt; -&amp;gt; &lt;tt class="docutils literal"&gt;New&lt;/tt&gt; -&amp;gt; &lt;tt class="docutils literal"&gt;Source
File&lt;/tt&gt;), li posem com a nom holacdt.c i finalitzem l'ajudant amb el
botó &lt;tt class="docutils literal"&gt;Finish&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Escrivim ara el codi del nostre programa després de la capçalera
que ens han generat automàticament.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include&amp;lt;stdio.h&amp;gt;&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hola CDT!&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finalment executem el programa amb &lt;tt class="docutils literal"&gt;Run &lt;span class="pre"&gt;-&amp;gt;&lt;/span&gt; Run&lt;/tt&gt;. Ens demanarà si
volem guardar els canvis. Un cop guardats, compilarà i enllaçarà el
codi per nosaltres, i finalment ens mostrarà el resultat a la vista
anomenada &lt;tt class="docutils literal"&gt;Console&lt;/tt&gt; que probablement apareixerà sota l'àrea de
l'editor. &lt;a class="footnote-reference" href="#launchfailed" id="id2"&gt;[2]&lt;/a&gt;&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Resultat d'execució de *holacdt.c*" src="http://apuntstecnics.herokuapp.com/images/eclipse002.img003.holacdt_final.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="anotacions"&gt;
&lt;h2&gt;Anotacions&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="noaggree" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si no estem d'acord amb els termes de la llicència,
tot i estant en el nostre dret, tenim un problema per continuar
seguint aquesta guia.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="launchfailed" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En cas que aparegui un missatge d'error indicant
&lt;tt class="docutils literal"&gt;Launch failed.&amp;nbsp; Binary not found&lt;/tt&gt; és que ens hem deixat de
configurar l'opció de &lt;tt class="docutils literal"&gt;Run with build&lt;/tt&gt; a les propietats del
projecte. Encara podem arreglar-ho sense haver de començar. Només
ens cal indicar-li a Eclipse quin és el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que ha
d'executar. Per fer-ho, guardarem el projecte (&lt;tt class="docutils literal"&gt;File&lt;/tt&gt; -&amp;gt; &lt;tt class="docutils literal"&gt;Save''
o &lt;span class="pre"&gt;``ctrl-s&lt;/span&gt;&lt;/tt&gt;), construïm el projecte amb (&lt;tt class="docutils literal"&gt;Project&lt;/tt&gt; -&amp;gt; &lt;tt class="docutils literal"&gt;Build
all&lt;/tt&gt; o &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;ctrl-b&lt;/span&gt;&lt;/tt&gt;) i creem la configuració amb &lt;tt class="docutils literal"&gt;Run&lt;/tt&gt; -&amp;gt; &lt;tt class="docutils literal"&gt;Run
&lt;span class="pre"&gt;configurations...&lt;/span&gt;&lt;/tt&gt;) Al quadre de diàleg que ens apareix,
seleccionarem &lt;tt class="docutils literal"&gt;C/C++ Application&lt;/tt&gt; i si no ens apareix dins el
nostre projecte &lt;tt class="docutils literal"&gt;HolaCDT Debug&lt;/tt&gt; premem el botó de &lt;tt class="docutils literal"&gt;New&lt;/tt&gt;. Ara,
en el nostre projecte premem &lt;tt class="docutils literal"&gt;Search &lt;span class="pre"&gt;Project...&lt;/span&gt;&lt;/tt&gt; i escollim
l'executable &lt;tt class="docutils literal"&gt;holaCDT&lt;/tt&gt;. Acceptem i premem &lt;tt class="docutils literal"&gt;Run&lt;/tt&gt; i tot plegat
hauria de funcionar ara.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Tue, 09 Sep 2014 22:58:30 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2014-09-09:configuracio-declipse-per-cc.html</guid></item><item><title>Glossari de conceptes d'Eclipse</title><link>http://apuntstecnics.herokuapp.com/glossari-de-conceptes-declipse.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Tal i com ens indiquen a la &lt;a class="reference external" href="http://www.eclipse.org/home/newcomers.php"&gt;introducció de benvinguda&lt;/a&gt;,&lt;/p&gt;
&lt;blockquote&gt;
eclipse és una comunitat orientada a la construcció d'una
plataforma de desenvolupament extensible i altres elements de
suport per tot el cicle de vida del programari.&lt;/blockquote&gt;
&lt;p&gt;Amb més de 200 projectes, Eclipse és molt més que un IDE de
desenvolupament en Java.&lt;/p&gt;
&lt;p&gt;L'element d'Eclipse amb el que interaccionarem és el &lt;em&gt;Workbench&lt;/em&gt; o
&lt;em&gt;taula de treball&lt;/em&gt;. De fet, la majoria de les vegades, quan estem
parlant d'Eclipse en realitat ens referim al Workbench.&lt;/p&gt;
&lt;p&gt;Aquest document conté un petit glossari dels conceptes bàsics que
apareixen en aquest Workbench.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="glossari"&gt;
&lt;h2&gt;Glossari&lt;/h2&gt;
&lt;p&gt;Workspace&lt;/p&gt;
&lt;blockquote&gt;
El workspace o &lt;em&gt;espai de treball&lt;/em&gt; és la carpeta on es guarda tot
el que treballem amb l'Eclipse.&lt;/blockquote&gt;
&lt;p&gt;Workbench&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;El Workbench o &lt;em&gt;taula de treball&lt;/em&gt; és una finestra de l'aplicació
Eclipse. Ofereix una o més perspectives.&lt;/p&gt;
&lt;p&gt;Poden haver més d'un workbench simultàniament.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Àrees del Workbench&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Al Workbench ens hi trobem dos tipus d'àrea: els &lt;strong&gt;editors&lt;/strong&gt; i les
&lt;strong&gt;vistes&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Les àrees a Eclipse disposen de barres d'eines independents, poden
ser maximitzades, minimitzades, redimensionades, col·locades a
diferents posicions del Workbench, duplicades, etc.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Editor&lt;/p&gt;
&lt;blockquote&gt;
Un editor és un dels tipus d'àrea del Workbench. Els editors
permeten crear, editar i guardar fitxers.&lt;/blockquote&gt;
&lt;p&gt;Vista&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Una vista és un dels dos tipus d'àrea del Workbench. Les vistes
ofereixen una representació estructurada de la informació
relacionada amb un fitxer, un projecte o d'altres recursos, i
sovint ens permetrà navegar entre aquesta informació i fins i tot
manipular-la.&lt;/p&gt;
&lt;p&gt;Eclipse ofereix una bona varietat de vistes. Per exemple, &lt;em&gt;Project
explorer&lt;/em&gt;, &lt;em&gt;search&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Perspectives&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Eclipse permet definir el conjunt de vistes a mostrar al
Workbench, així com la seva distribució i els elements que
apareixeran a la barra principal d'eines i alguns menús.
Aquestes definicions es fan en forma de &lt;em&gt;perspectives&lt;/em&gt;.
Existeixen perspectives predefinides que poden ser
utilitzades, però també modificades, i es poden definir de
noves.&lt;/p&gt;
&lt;p&gt;Exemples de perspectives predefinides són &lt;em&gt;java&lt;/em&gt; i &lt;em&gt;debug&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;En cas que hàgim modificat una perspectiva i vulguem tornar a
la versió inicial, hi ha disponible una opció de &lt;em&gt;reset&lt;/em&gt; i
tornem a la versió guardada de la perspectiva. Podem també
guardar els nostres canvis a una perspectiva per defecte i
també crear-ne de noves.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Tue, 09 Sep 2014 22:57:30 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2014-09-09:glossari-de-conceptes-declipse.html</guid></item><item><title>Tutorial d'instal·lació de NetBeans</title><link>http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-de-netbeans.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document descriu una manera d'instal·lar l'IDE NetBeans a un
sistema Ubuntu.&lt;/p&gt;
&lt;p&gt;Atenció: La instal·lació a altres sistemes operatius no hauria de
resultar gaire més complexa.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="installacio"&gt;
&lt;h2&gt;Instal·lació&lt;/h2&gt;
&lt;p&gt;Per la realització d'una instal·lació de NetBeans seguirem les
següents passes des d'una consola:&lt;/p&gt;
&lt;ol class="arabic" start="0"&gt;
&lt;li&gt;&lt;p class="first"&gt;Abans d'instal·lar NetBeans&lt;/p&gt;
&lt;p&gt;Donat que NetBeans és una aplicació java, caldrà disposar d'una
màquina virtual (JVM) al nostre sistema per a poder-la instal·lar.&lt;/p&gt;
&lt;p&gt;Si encara no la tens instal·lada, pots seguir el &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-de-eclipse.html"&gt;pas 0 de la guia
d'instal·lació d'Eclipse&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Obtenció del NetBeans&lt;/p&gt;
&lt;p&gt;El NetBeans podria ser instal·lat des del centre de programari que
ofereix l'Ubuntu. Amb tot, en el moment en que s'escrivia aquesta
guia, la versió empaquetada disponible era la 7.0.1, mentre que la
darrera publicada era la 7.2.&lt;/p&gt;
&lt;p&gt;Tot i que, probablement, no trobarem cap diferència entre les dues
versions per un ús no professional de l'IDE, en aquesta guia es
proposa realitzar la instal·lació de la darrera versió.&lt;/p&gt;
&lt;p&gt;Per tant, caldrà anar al lloc oficial de NetBeans (netbeans.org) a
la secció de descàrregues (des de la pàgina principal hi ha un
enllaç directe a la descàrrega de la darrera versió)&lt;/p&gt;
&lt;p&gt;Ara escollim idioma i plataforma (probablement la proposta per
defecte serà la correcta), i escollim la descàrrega de la versió
Java SE (la més bàsica) donat que més endavant podrem afegir altres
complements com indica la pàgina al final.&lt;/p&gt;
&lt;p&gt;Es descarregarà l'instal·lador, un script d'uns 83 Mb.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Instal·lació del NetBeans&lt;/p&gt;
&lt;p&gt;La instal·lació del NetBeans a partir de l'instal·lador descarregat
és molt fàcil. Simplement cal executar l'instal·lador i anar
seguint les instruccions.&lt;/p&gt;
&lt;p&gt;Per executar l'instal·lador podem, per exemple, anar al directori
on l'hem descarregat i fer:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ bash netbeans-7-2-ml-javase-linux.sh
&lt;/pre&gt;
&lt;p&gt;Ens caldrà, a banda d'acceptar una sèrie d'acords de llicències,
definir el directori on instal·lar NetBeans i el JDK. Per exemple,
podem escollir el directori &lt;tt class="docutils literal"&gt;~/soft/netbeans7.2&lt;/tt&gt; i el jdk per
defecte.&lt;/p&gt;
&lt;p&gt;En acabar, continuarà descarregant i finalment instal·larà
l'aplicació.&lt;/p&gt;
&lt;p&gt;Per comoditat, es pot crear algun llançador. Per exemple, per poder
executar-ho des de línia de comandes, pot ser còmode:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ cd ~
$ mkdir -p bin
$ cd bin
$ cat &amp;gt; netbeans.sh &amp;lt;&amp;lt; EOF
&amp;gt; #! /bin/sh
&amp;gt; ~/soft/netbeans-7.2/bin/netbeans &amp;amp;
&amp;gt; EOF
$ chmod u+x netbeans.sh
&lt;/pre&gt;
&lt;p&gt;i, des de qualsevol lloc&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ netbeans.sh
&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Una prova ràpida&lt;/p&gt;
&lt;p&gt;Per defecte, NetBeans s'instal·la per construir aplicacions en
java.&lt;/p&gt;
&lt;p&gt;Aprofitant que no hem de fer res especial, farem una primera prova
de l'entorn creant un &amp;quot;original&amp;quot; programa de salutació al món.&lt;/p&gt;
&lt;p&gt;Anirem a Fitxer -&amp;gt; Nou projecte i escollirem els valors per defecte
(Categoria Java i Projectes Java Aplication) Farem &lt;em&gt;Següent&lt;/em&gt; i
escollirem un nom de projecte (ex. HolaMon) i un lloc on deixar el
projecte (potser l'opció per defecte ja ens està bé) Quan ja ho
tenim tot, premem &lt;em&gt;Finalitzar&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;En aquest moment ens apareixerà una finestra amb un aspecte similar
al següent:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Projecte HolaMon a Netbeans" src="http://apuntstecnics.herokuapp.com/images/netbeans001.holamon.png" /&gt;
&lt;/div&gt;
&lt;p&gt;A la subfinestra més ampla (a la dreta), hi trobem un editor amb el
codi del nostre projecte. NetBeans ens ha autocompletat una sèrie
d'elements per nosaltres. Entre d'altres, ens ha afegit el nostre
nom, i ens ha creat un primer esquema de la classe HolaMon que hem
demanat crear.&lt;/p&gt;
&lt;p&gt;Ara, allà on posa &lt;tt class="docutils literal"&gt;// TODO code application logic here&lt;/tt&gt;
escriurem &lt;tt class="docutils literal"&gt;Sys&lt;/tt&gt;. A continuació, farem &amp;lt;ctrl&amp;gt;-&amp;lt;espai&amp;gt; i podrem
veure que NetBeans ens ofereix, no només com continuar la paraula
que estem escrivint, sinó també documentació corresponent a la
proposta de compleció. Farem &amp;lt;enter&amp;gt; per completar.&lt;/p&gt;
&lt;p&gt;Continuem escrivint un punt &lt;tt class="docutils literal"&gt;.&lt;/tt&gt; i observem que ens apareix una
llista de possibilitats per a continuar que podem navegar amb el
cursor. Escollirem &lt;tt class="docutils literal"&gt;out&lt;/tt&gt; i tornarem a escriure un punt. Ens
apareix una nova llista. Aquest cop, començarem a escriure &lt;tt class="docutils literal"&gt;pri&lt;/tt&gt;
i observarem que ens porta a les paraules que comencen amb &amp;quot;pri&amp;quot;.
Escollirem la primera i ens autocompletarà a la funció
&lt;tt class="docutils literal"&gt;System.out.print()&lt;/tt&gt; deixant-nos el cursor dins dels parèntesis i
informant-nos del possible tipus de dades que hi podem ficar dins.
Escriurem entre cometes &lt;tt class="docutils literal"&gt;&amp;quot;Hola &lt;span class="pre"&gt;Món!\n&amp;quot;&lt;/span&gt;&lt;/tt&gt; i farem &amp;lt;enter&amp;gt;. NetBeans
col·loca el cursor al final de la sentència.&lt;/p&gt;
&lt;p&gt;Si tot està correcte (NetBeans ens avisaria en cas contrari) podem
ja executar el nostre programa. Execució -&amp;gt; Executar projecte
(HolaMon) i ens apareix una nova subfinestra a la part inferior on
es veu el resultat de l'execució del programa. NetBeans s'ha fet
càrrec de guardar, compilar i executar el nostre codi.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Ja tenim disponible el NetBeans!&lt;/p&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Tue, 09 Sep 2014 22:56:30 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2014-09-09:tutorial-dinstallacio-de-netbeans.html</guid></item><item><title>Autenticació a MongoDB</title><link>http://apuntstecnics.herokuapp.com/autenticacio-a-mongodb.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Per defecte, MongoDB permet accedir a qualsevol de les dades que
emmagatzema sense demanar credencials.
En general, aquest comportament és molt còmode mentre estem fent
desenvolupament/proves. Clar, no ens hem d'estar preocupant d'usuaris ni contrasenyes.&lt;/p&gt;
&lt;p&gt;Quan disposem d'un producte que ha de funcionar el el &amp;quot;món real&amp;quot;,
però, no voldrem deixar que qualsevol pugui accedir a les nostres
dades.&lt;/p&gt;
&lt;p&gt;Aquest document ofereix una introducció a l'autenticació amb MongoDB.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="autenticacio-amb-mongodb"&gt;
&lt;h2&gt;Autenticació amb MongoDB&lt;/h2&gt;
&lt;p&gt;Per permetre l'autenticació, cal fer el següent:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;TODO&lt;/strong&gt; there's a simplified version on &lt;a class="reference external" href="http://stackoverflow.com/questions/4881208/how-to-put-username-password-in-mongodb"&gt;http://stackoverflow.com/questions/4881208/how-to-put-username-password-in-mongodb&lt;/a&gt;&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;crear l'usuari administrador&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a class="reference external" href="http://docs.mongodb.org/manual/tutorial/add-user-administrator/"&gt;http://docs.mongodb.org/manual/tutorial/add-user-administrator/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Els usuaris amb autenticació es troben a:&lt;/p&gt;
&lt;blockquote&gt;
db.system.users.find()&lt;/blockquote&gt;
&lt;ol class="arabic" start="2"&gt;
&lt;li&gt;&lt;p class="first"&gt;arrenca el servidor mongod perquè tingui en comptes l'autenticació&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;$ mongod --auth --dbpath ...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;!-- XXX TODO: planteja't si no seria millor introduir aquest concepte
un cop es treballi amb java --&gt;
&lt;!-- XXX TODO: decideix si afegeixes el següent
* `Autenticació en MongoDB &lt;{filename}/bd/mongodb.004.auth.rst&gt;`_ --&gt;
&lt;!-- XXX TODO:
Considera també els tutorials que ofereix http://codehero.co/mongodb-desde-cer-operaciones-basicas/
potser servirà per tenir idees i de checklist. --&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Wed, 29 Jan 2014 16:32:01 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2014-01-29:autenticacio-a-mongodb.html</guid><category>mongoDB</category></item><item><title>Exercicis de repàs de programació</title><link>http://apuntstecnics.herokuapp.com/exercicis-de-repas-de-programacio.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;A continuació trobaràs una llista d'exercicis bàsics. Intenta'ls
realitzar amb qualsevol llenguatge de programació o, fins i tot, amb
pseudocodi.&lt;/p&gt;
&lt;p&gt;El valor d'aquests exercicis està en la correcció a classe. Per tant,
fes un esforç per què les teves respostes siguin llegibles.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-la-preso"&gt;
&lt;h3&gt;Exercici 1. La presó&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani a la usuària els anys que té amb el
missatge &lt;em&gt;Quants anys té?&lt;/em&gt;. En cas que sigui major d'edat, el programa
li avisarà dient: &lt;em&gt;Atenció: Vosté pot anar a la presó!&lt;/em&gt;. En qualsevol
cas, el programa finalitzarà dient: &lt;em&gt;Aneu amb compte&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Nota: en aquest cas acceptarem qualsevol valor enter com a edat vàlida.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-mesos"&gt;
&lt;h3&gt;Exercici 2. Mesos&lt;/h3&gt;
&lt;p&gt;Desenvolupeu un programa que demani un mes i un any, i escrigui el mes
anterior i el mes següent.&lt;/p&gt;
&lt;p&gt;Els missatges de petició de l'entrada seran, respectivament: &lt;em&gt;Mes?&lt;/em&gt; i &lt;em&gt;Any?&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, si l’usuari introdueix mes &lt;em&gt;9&lt;/em&gt; i any &lt;em&gt;2009&lt;/em&gt;, el resultat
serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
ant: 8/2009
seg: 10/2009
&lt;/pre&gt;
&lt;p&gt;Nota: en aquest cas, suposarem que sempre ens introduiran mesos i anys
correctes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-ordena-3"&gt;
&lt;h3&gt;Exercici 3. Ordena 3&lt;/h3&gt;
&lt;p&gt;Desenvolupeu un programa que demani tres números i
escrigui els tres números ordenats creixentment (de menor a major).&lt;/p&gt;
&lt;p&gt;L'entrada es requerirà amb els missatges &lt;em&gt;Primer?&lt;/em&gt;, &lt;em&gt;Segon?&lt;/em&gt; i
&lt;em&gt;Tercer?&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, si els números introduïts són &lt;em&gt;3&lt;/em&gt;, &lt;em&gt;4&lt;/em&gt; i &lt;em&gt;2&lt;/em&gt;, el resultat
serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
2 3 4
&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-ascensor"&gt;
&lt;h3&gt;Exercici 4. Ascensor&lt;/h3&gt;
&lt;p&gt;Considerem un ascensor d’un edifici amb planta baixa
i dos pisos que tingui els següents botons: ‘pujar 1’, ‘pujar 2’,
‘baixar 1’ i ‘baixar 2’. L’ascensor es comporta, a partir dels botons
esmentats, segons el següent diagrama de transició d’estats:&lt;/p&gt;
&lt;div class="figure align-right"&gt;
&lt;img alt="Diagrama d'estats de l'ascensor" src="http://apuntstecnics.herokuapp.com/images/poo003.img001.ascensor.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Es demana desenvolupar un programa que simuli el funcionament d’aquest
ascensor. El programa demanarà el pis en que es troba i el botó que es
prem, i mostrarà el nou pis. En cas que el botó seleccionat a una
posició determinada de l’ascensor no correspongui amb algun dels
representats amb el diagrama d’estats, l’ascensor mostra un missatge
d'error i es queda al lloc en què estava.&lt;/p&gt;
&lt;p&gt;Els missatges de petició de l'entrada són, respectivament:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Planta? (PB: planta baixa, PP: primer pis, SP: segon pis
Botó? (P1: puja 1, P2: puja 2, B1: baixa 1, B2: baixa 2
&lt;/pre&gt;
&lt;p&gt;Mentre que la sortida s'expressarà simplement indicant la nova planta.&lt;/p&gt;
&lt;p&gt;Per exemple, si l'entrada és: &lt;tt class="docutils literal"&gt;PB&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;P1&lt;/tt&gt;, la sortida serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
PP
&lt;/pre&gt;
&lt;p&gt;En cas d'error, caldrà mostrar els següents missatges:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Planta incorrecta
Botó incorrecte
&lt;/pre&gt;
&lt;p&gt;I cal tenir present que si la planta és incorrecta, ja no se li
demanarà el botó a la usuària.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-historic-d-edats"&gt;
&lt;h3&gt;Exercici 5. Històric d'edats&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani el nom de la usuària, l’edat i l’any
actual. El programa escriurà l’edat que tenia la usuària a cada any des
del seu naixement i s’acomiadarà. Per exemple, si l’entrada és&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Anna
5
2012
&lt;/pre&gt;
&lt;p&gt;El programa escriurà&lt;/p&gt;
&lt;pre class="literal-block"&gt;
El 2007 va nàixer
El 2008 tenia 1 any
El 2009 tenia 2 anys
El 2010 tenia 3 anys
El 2011 tenia 4 anys
Adéu Anna
&lt;/pre&gt;
&lt;p&gt;El programa no li dirà l'edat que té la usuària en l'any actual, donat
que aquesta dada forma part de l'entrada. Per exemple, si la usuària
ha nascut aquest any, simplement s'acomiadarà.&lt;/p&gt;
&lt;p&gt;Les comprovacions necessàries són: que el nom no estigui buit, que
l'edat i l'any actual siguin enters positius, i que l'any actual sigui
un valor més alt que el de l'edat.&lt;/p&gt;
&lt;p&gt;Es demanaran les dades en l'ordre indicat a l'exemple i, en quan es
detecti un error, es deixarà de demanar més dades.&lt;/p&gt;
&lt;p&gt;Els missatges de petició de dades seran:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Nom?
Edat?
Any actual?
&lt;/pre&gt;
&lt;p&gt;Els missatges d'error seran:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Nom incorrecte
Edat no pot ser negativa
Any actual no pot ser negatiu
Edat o any actual incorrectes
&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-l-ascensor-continu"&gt;
&lt;h3&gt;Exercici 6. L'ascensor continu&lt;/h3&gt;
&lt;p&gt;Ara, el nostre ascensor començarà a la planta baixa i anirà demanant
un botó per canviar de pis. Es comportarà pràcticament igual que la
versió anterior. Ara, és clar, ja no li cal demanar a quin pis es troba.&lt;/p&gt;
&lt;p&gt;Un cop canviat de pis (o indicat l'error) demanarà que premi un nou
botó. I així es quedarà fins que la usuària indiqui el botó de sortida.&lt;/p&gt;
&lt;p&gt;Aquesta versió incorpora un missatge molt compacte amb el següent
aspecte:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
[xx] P1: puja 1, P2: puja 2, B1: baixa 1, B2: baixa 2, EX: surt
&lt;/pre&gt;
&lt;p&gt;On xx pot ser PB, PP o SP depenent de la planta on es trobi.&lt;/p&gt;
&lt;p&gt;Quan la usuària demani finalitzar (amb &amp;quot;EX&amp;quot;), es mostrarà el missatge de
comiat &amp;quot;Adéu&amp;quot; i finalitzarà l'execució.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-comptar-a-s"&gt;
&lt;h3&gt;Exercici 7. Comptar 'A's&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani un string (pot ser buit!) i
mostri el nombre de ‘A’ que apareguin al string. És a dir, si
l’entrada és ‘XAXAAXAX’ la sortida serà 4.&lt;/p&gt;
&lt;p&gt;Es demana que es construeixi una funció que, donat el string
d'entrada, retorni el nombre de caràcters 'A'.&lt;/p&gt;
&lt;p&gt;Nota: Per simplicitat, considera només majúscules.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-8-comptar-a-s-consecutives"&gt;
&lt;h3&gt;Exercici 8. Comptar 'A's consecutives&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani un string i
mostri el nombre de ‘A’ consecutives que apareguin a l’string. És considera una 'A' consecutiva si l'anterior també era una 'A'. És a dir, si l’entrada és ‘XXAXXAAXXAAAAX’ la sortida serà 4.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-9-comptar-a-s-no-consecutives"&gt;
&lt;h3&gt;Exercici 9. Comptar 'A's no consecutives&lt;/h3&gt;
&lt;p&gt;Com l'exercici anterior, però aquest cop es mostrarà el nombre de 'A's
no consecutives. És a dir, si l’entrada és ‘XXAXXAAXXAAAX’ la sortida
serà 3.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-triangles"&gt;
&lt;h3&gt;Exercici 10. Triangles&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani un nombre enter positiu i dibuixi
tants triangles com se li indiqui.&lt;/p&gt;
&lt;p&gt;Intenta evitar la repetició de codi fent servir subrutines.&lt;/p&gt;
&lt;p&gt;Per exemple, si l'entrada és &lt;em&gt;2&lt;/em&gt;, el resultat serà&lt;/p&gt;
&lt;pre class="literal-block"&gt;
.........9.........
........898........
.......78987.......
......6789876......
.....567898765.....
....45678987654....
...3456789876543...
..234567898765432..
.12345678987654321.
0123456789876543210
.........9.........
........898........
.......78987.......
......6789876......
.....567898765.....
....45678987654....
...3456789876543...
..234567898765432..
.12345678987654321.
0123456789876543210
&lt;/pre&gt;
&lt;p&gt;El missatge de petició de l'entrada serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Nombre de triangles?
&lt;/pre&gt;
&lt;p&gt;El missatge d'error si l'entrada no és correcta serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
No puc dibuixar n triangles
&lt;/pre&gt;
&lt;p&gt;On &lt;em&gt;n&lt;/em&gt; correspon al nombre introduït.&lt;/p&gt;
&lt;p&gt;Nota: Si tens la temptació de resoldre el problema via
&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;printf(&amp;quot;.........9.........&amp;quot;);&lt;/span&gt;&lt;/tt&gt; planteja't que passarà si se't
requereix que els símbols a escriure s'han de demanar a la usuària.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:57:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:exercicis-de-repas-de-programacio.html</guid></item><item><title>Tipus Abstractes de Dades</title><link>http://apuntstecnics.herokuapp.com/tipus-abstractes-de-dades.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquests continguts presenten el concepte de &lt;em&gt;Tipus Abstracte de Dades&lt;/em&gt;
o més conegut com a TAD.&lt;/p&gt;
&lt;p&gt;Els TADs són bàsicament una agrupació de dades i processos que actuen
sobre aquestes, de manera que l'usuari de les dades (un altre
programa, és clar) no tingui perquè conèixer la implementació interna
d'aquestes. Així, en cas que es trobin maneres més eficients de
codificar les dades, es poden realitzar els canvis sense requerir que
els usuaris d'aquestes hagin de modificar el seu codi.&lt;/p&gt;
&lt;p&gt;Per introduir-nos als TADs, farem servir un exemple conductor:
treballarem amb hores. Inicialment farem servir els components d'una
hora (les hores, minuts i segons) per separat. A continuació
estudiarem ara la possibilitat d'agrupar aquests components sota
un mateix identificador. Avançarem amb aquesta idea per crear els
nostres propis tipus de dades fins a arribar a l'agrupació d'aquestes
amb operacions que les manipulen: els TADs.&lt;/p&gt;
&lt;p&gt;Amb la complexitat creixent dels nostres programes, començarà a tenir
sentit separar els programes en fitxers, i de seguida que el nombre de
fitxers comenci a créixer, ens caldrà algun mecanisme per gestionar la
compilació. Tot plegat, ho veurem introduït a la part final d'aquest
tema.&lt;/p&gt;
&lt;p&gt;Els exercicis que apareixen en aquest document estan classificats amb
zero o més asteriscs. Si disposes de prou temps, ignora les marques i
realitza els exercicis en l'ordre en que apareixen. En cas contrari
considera primer els exercicis sense marques. Els exercicis amb un
asterisc són exercicis per practicar i si has fet els exercicis de que
depenen, no haurien de resultar-te gaire difícils. Els exercicis amb
dos asteriscs presenten una complexitat una mica superior, normalment
de tipus algorísmic.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="estructures"&gt;
&lt;h2&gt;Estructures&lt;/h2&gt;
&lt;p&gt;De vegades ens trobem que un grup de variables, no necessàriament del
mateix tipus, estan tan relacionades entre si que ens trobem
pràcticament sempre declarant-les juntes, passant-les com a paràmetre
juntes, etc.&lt;/p&gt;
&lt;div class="section" id="exercici-1-un-segon-mes"&gt;
&lt;h3&gt;Exercici 1. Un segon més&lt;/h3&gt;
&lt;p&gt;Desenvolupa un procediment que, donada una hora representada per tres
enters hora, minut i segon, calculi el resultat d'afegir un segon a
l'hora.&lt;/p&gt;
&lt;p&gt;Completa el següent codi perquè compili i s'executi sense cap
missatge. Evidentment, no es val modificar el codi de
&lt;tt class="docutils literal"&gt;valida_resultat()&lt;/tt&gt; ni de &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include&amp;lt;stdio.h&amp;gt;&lt;/span&gt;

&lt;span class="cm"&gt;/* Donada una hora d&amp;#39;origen formada per tres enters ho, mo i so,&lt;/span&gt;
&lt;span class="cm"&gt;   calcula l&amp;#39;hora corresponent a sumar-li un segon a aquesta hora&lt;/span&gt;
&lt;span class="cm"&gt;   origen i deixa el resultat en l&amp;#39;hora calculada composada per&lt;/span&gt;
&lt;span class="cm"&gt;   les referències a enter hc, mc i sc. Pressuposa que l&amp;#39;hora d&amp;#39;origen&lt;/span&gt;
&lt;span class="cm"&gt;   és correcta i apareix en format 24h. */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                             &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Valida el resultat trobat a partir de l&amp;#39;esperat.&lt;/span&gt;
&lt;span class="cm"&gt; * En cas de discrepància, mostra un missatge d&amp;#39;error indicant l&amp;#39;hora esperada&lt;/span&gt;
&lt;span class="cm"&gt; * i l&amp;#39;hora trobada */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="n"&gt;mt&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error: &lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s"&gt; esperat %d:%d:%d&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s"&gt; trobat  %d:%d:%d&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;     &lt;span class="cm"&gt;/* compoments de l&amp;#39;hora origen    */&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;     &lt;span class="cm"&gt;/* compoments de l&amp;#39;hora esperada  */&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;     &lt;span class="cm"&gt;/* compoments de l&amp;#39;hora calculada */&lt;/span&gt;

    &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="agrupacio-en-arrays"&gt;
&lt;h3&gt;Agrupació en arrays&lt;/h3&gt;
&lt;p&gt;T'has fixat quants cops hem de passar a l'hora els diferents elements
que composen una hora? Està clar que ens cal poder agrupar aquests
conceptes d'hora, minut i segon.&lt;/p&gt;
&lt;p&gt;Ho podríem fer mitjançant un array d'enters, on la primera posició fos
l'hora, la segona el minut i la tercera el segon. Això és possible
perquè els tres components d'una hora són del mateix tipus.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-incrementa-segons-amb-un-array-d-hora"&gt;
&lt;h3&gt;Exercici 2. Incrementa segons amb un array d'hora&lt;/h3&gt;
&lt;p&gt;Desenvolupa una versió de l'exercici anterior, on els diferents
components d'una hora apareguin codificats en forma d'array.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h3&gt;Estructures&lt;/h3&gt;
&lt;p&gt;Si bé la manera de resoldre el problema amb un array pot ser
acceptable per a aquest tipus de problemes en que tots els components
són del mateix tipus, no sempre serà així.&lt;/p&gt;
&lt;p&gt;Per aquesta raó, considera ara el següent codi&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include&amp;lt;stdio.h&amp;gt;&lt;/span&gt;

&lt;span class="cm"&gt;/* definició de l&amp;#39;estructura Hora */&lt;/span&gt;
&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* assigna els valors h, m i s als components de la referència a Hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa valors correctes. */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Donada una hora d&amp;#39;origen calcula l&amp;#39;hora corresponent a&lt;/span&gt;
&lt;span class="cm"&gt;   sumar-li un segon i deixa el resultat en l&amp;#39;hora calculada.&lt;/span&gt;
&lt;span class="cm"&gt;   Pressuposa que l&amp;#39;hora d&amp;#39;origen és correcta i apareix en format 24h. */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Valida el resultat trobat a partir de l&amp;#39;esperat.&lt;/span&gt;
&lt;span class="cm"&gt; * En cas de discrepància, mostra un missatge d&amp;#39;error indicant l&amp;#39;hora esperada&lt;/span&gt;
&lt;span class="cm"&gt; * i l&amp;#39;hora trobada */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error: &lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s"&gt; esperat %d:%d:%d&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s"&gt; trobat  %d:%d:%d&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="cm"&gt;/* declara les hores origen, esperada i calculada */&lt;/span&gt;

    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixa't que:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;El bloc iniciat a la línia 4 declara un nou tipus de dades anomenat
&lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; que està format per tres &lt;em&gt;camps&lt;/em&gt; enters.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;La línia 37 declara tres variables de tipus &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;La línia 41 passa dues variables de tipus &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; com arguments de
la crida a una subrutina. La primera la passa per valor i la segona
per referència.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A la línia 29 es mostra com, a partir del nom d'una variable de
tipus &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; es pot accedir als valors dels seus camps. La forma
general és&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;variable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;nom_camp&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A la línia 13 es mostra com accedir a un camp a partir de la
referència a una variable de tipus &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt;. La forma
general és&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;variable&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;nom_camp&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;És a dir, accedirem als camps de manera diferent si disposem de la
variable o d'una referència a aquesta.&lt;/p&gt;
&lt;p&gt;De fet, la notació amb fletxeta és en realitat una &lt;em&gt;comoditat&lt;/em&gt; que
ens ofereix el llenguatge. Podem fer servir l'asterisc per
derreferenciar la variable i accedir directament als seus camps
mitjançant el punt&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per cert, en aquest cas podem copiar directament els valors dels camps
d'una Hora en una altra:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Malauradament no podrem fer el mateix amb la comparació
(ex. &lt;tt class="docutils literal"&gt;if (he != ht) &lt;span class="pre"&gt;«...»&lt;/span&gt;&lt;/tt&gt;) En tot cas, no es recomanable que facis
servir aquesta assignació directa en cas que algun dels camps sigui un
punter (ex. un string) ja que et trobaràs amb que només es copia
l'adreça. En resum: millor fes-te un procediment que dupliqui el
contingut de la teva estructura en una altra.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-incrementa-l-hora-amb-estructura"&gt;
&lt;h3&gt;Exercici 3. Incrementa l'hora amb estructura&lt;/h3&gt;
&lt;p&gt;Completa el codi anterior de manera que compili i executi sense cap
missatge.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-el-tipus-data"&gt;
&lt;h3&gt;Exercici 4**. El tipus Data&lt;/h3&gt;
&lt;p&gt;Implementa un nou tipus de dades anomenat &lt;tt class="docutils literal"&gt;Data&lt;/tt&gt; que estigui
composat de tres enters: dia, mes i any.&lt;/p&gt;
&lt;p&gt;Desenvolupa un programa similar al de l'exercici anterior que permeti
provar una funció anomenada &lt;tt class="docutils literal"&gt;incrementa_dia_a_data()&lt;/tt&gt; en els
casos rellevants.&lt;/p&gt;
&lt;p&gt;Nota: sí, has de considerar els diferents dies que té cada mes i els
anys de traspàs. Serà acceptable que consideris com a any de traspàs
qualsevol any múltiple de 4. No serà precís però sí ràpid
d'implementar.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-el-tipus-persona"&gt;
&lt;h3&gt;Exercici 5*. El tipus Persona&lt;/h3&gt;
&lt;p&gt;No hi ha cap raó per què una estructura no pugui tenir camps amb tipus
de dades diferents. Fins i tot aquest podria ser un tipus definit per
nosaltres.&lt;/p&gt;
&lt;p&gt;Defineix el tipus &lt;tt class="docutils literal"&gt;Persona&lt;/tt&gt; que té un camp nom i un camp data de
naixement.&lt;/p&gt;
&lt;p&gt;Completa el següent codi de manera que compili i executi sense cap
missatge&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include&amp;lt;stdio.h&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&amp;lt;string.h&amp;gt;&lt;/span&gt;

&lt;span class="cm"&gt;/* definició d&amp;#39;estructura/es */&lt;/span&gt;
&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;

&lt;span class="cm"&gt;/* assigna els valors h, m i s als components de la referència a Hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa valors correctes. */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;assigna_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;dia&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mes&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;any&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* mostra una data per sortida estàndard en format d/m/a */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;mostra_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Donada dues Dates, retorna cert quan les dues coincideixen en dia i mes */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;es_aniversari_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="n"&gt;d1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="n"&gt;d2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Donat un nom i una data, copia els valors a la persona */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;assigna_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Persona&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Donada una Persona i una Data, retorna si és l&amp;#39;aniversari de la persona&lt;/span&gt;
&lt;span class="cm"&gt; * en aquesta data. */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;es_aniversari_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Persona&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* mostra la persona per sortida estàndard&lt;/span&gt;
&lt;span class="cm"&gt; * El format és [nom: «nom», dn: «data naixement»] */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;mostra_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Persona&lt;/span&gt; &lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Persona&lt;/span&gt; &lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;assigna_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2013&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;data_avui&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;assigna_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Joan&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;es_aniversari_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error: es_aniversari_persona(&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;, &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;) retorna fals&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;assigna_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2013&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;data_avui&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;assigna_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Marta&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;es_aniversari_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error: es_aniversari_persona(&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;, &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;) retorna cert&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;assigna_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2013&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;data_avui&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;assigna_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Pau&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt; &lt;span class="n"&gt;es_aniversari_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error: es_aniversari_persona(&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;, &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;) retorna fals&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Pista: recorda que l'assignació d'un string no es pot fer directament
en C. Per això la inclusió de &lt;tt class="docutils literal"&gt;string.h&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-data-i-hora"&gt;
&lt;h3&gt;Exercici 6*. Data i Hora&lt;/h3&gt;
&lt;p&gt;Defineix ara el tipus &lt;tt class="docutils literal"&gt;DataHora&lt;/tt&gt; que estarà format per dos camps
de tipus &lt;tt class="docutils literal"&gt;Data&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; respectivament.&lt;/p&gt;
&lt;p&gt;Implementa la següent subrutina&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* Donada una DataHora d&amp;#39;origen calcula el valor corresponent a&lt;/span&gt;
&lt;span class="cm"&gt;   sumar-li un segon i deixa el resultat en la DataHora calculada.&lt;/span&gt;
&lt;span class="cm"&gt;   Pressuposa que els valors d&amp;#39;origen són correctes. */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;incrementa_segon_a_datahora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DataHora&lt;/span&gt; &lt;span class="n"&gt;dho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;DataHora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;dhc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Implementa un programa que permeti comprovar el funcionament d'aquesta
subrutina, incloent totes les comprovacions realitzades a exercicis
previs d'Hora i de Data.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="tads"&gt;
&lt;h2&gt;TADs&lt;/h2&gt;
&lt;p&gt;És probable que ja t'hagis fixat en que algunes subrutines
acompanyen als tipus que hem definit. Si és així, felicitats, t'has
adonat pel teu compte d'un concepte molt important a l'hora de
reutilitzar codi: l'&lt;em&gt;abstracció&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;El concepte d'abstracció implica la definició de tipus i les
operacions associades a aquests, de manera que si fem servir sempre
aquestes operacions no ens haurem de preocupar de la implementació
interna del tipus.&lt;/p&gt;
&lt;p&gt;Quan el nostre tipus ve acompanyat de les operacions (subrutines) per
manipular-lo, de manera que es pugui fer servir sense preocupar-se per
la seva implementació interna, direm que és un &lt;em&gt;Tipus Abstracte de
Dades&lt;/em&gt; o &lt;em&gt;TAD&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Això ens ofereix almenys els següents avantatges:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;millora la reutilització de codi&lt;/p&gt;
&lt;p&gt;Si un tipus està tan ben definit que disposem de totes les
operacions necessàries per manegar-lo, el podrem fer servir en
altres contexts.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;facilita el control d'errors.&lt;/p&gt;
&lt;p&gt;Donat que només es pot modificar els valors interns del nostre TAD
mitjançant les operacions que oferim, sabem que si variables del
TAD tenen un valor erroni, aquest l'haurem assignat nosaltres des
de les nostres operacions. No cal cercar tant, oi?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;independitza de la implementació&lt;/p&gt;
&lt;p&gt;Com que el codi que fa servir aquests tipus abstractes no accedeix
mai a la implementació interna del tipus, podem canviar aquesta
implementació amb tranquil·litat de que el codi que abans
funcionava continuarà fent-ho, si no afegim nous errors i mantenim
la signatura de les subrutines.&lt;/p&gt;
&lt;p&gt;Per a què podem voler canviar la implementació d'un tipus ja
definit? doncs per exemple per fer-lo més eficient, o per afegir
noves funcionalitats.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="section" id="exercici-4-el-tad-hora"&gt;
&lt;h3&gt;Exercici 4. El TAD Hora&lt;/h3&gt;
&lt;p&gt;Les següents subrutines sobre l'estructura Hora podrien permetre un ús
&lt;em&gt;abstracte&lt;/em&gt; d'aquesta, de manera que si canviem la implementació (ex.
implementem les hores, minuts i segons en array d'enters), no calgui
modificar els programes que facin servir &lt;em&gt;només&lt;/em&gt; les subrutines.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* assigna els valors que composen l&amp;#39;hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Retorna 0 si algun dels valors és incorrecte */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;assigna_valors_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* assigna el valor de les hores a l&amp;#39;hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Retorna 0 si el valor és incorrecte */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;assigna_hores_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* assigna el valor dels minuts a l&amp;#39;hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Retorna 0 si el valor és incorrecte */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;assigna_minuts_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* assigna el valor dels segons a l&amp;#39;hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Retorna 0 si el valor és incorrecte */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;assigna_segons_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* Retorna 0 si hi ha algun error en algun dels valors considerant-los&lt;/span&gt;
&lt;span class="cm"&gt; * components d&amp;#39;una Hora */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;valida_valors_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* Retorna 0 si hi ha algun error en algun dels valors de l&amp;#39;Hora. */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;valida_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* retorna les hores d&amp;#39;una Hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa valors correctes de l&amp;#39;hora */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;obte_hores_de_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* retorna els minuts d&amp;#39;una Hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa valors correctes de l&amp;#39;hora */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;obte_minuts_de_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* retorna els segons d&amp;#39;una Hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa valors correctes de l&amp;#39;hora */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;obte_segons_de_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* incrementa un segon a l&amp;#39;hora d&amp;#39;origen i deixa el resultat a l&amp;#39;hora&lt;/span&gt;
&lt;span class="cm"&gt; * calculda.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa valors correctes de l&amp;#39;hora d&amp;#39;origen */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* converteix l&amp;#39;hora en un string amb format h:m:s&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa que hi ha prou espai reservat a dest */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;convert_hora_a_string&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="p"&gt;[]);&lt;/span&gt;

&lt;span class="cm"&gt;/* compara dues hores. Retorna cert si les dues hores són iguals.&lt;/span&gt;
&lt;span class="cm"&gt; * És a dir, contenen els mateixos valors */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;compara_hores&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* copia els valors d&amp;#39;una hora en una altra de manera que les dues&lt;/span&gt;
&lt;span class="cm"&gt; * hores siguin iguals. */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;duplica_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;origen&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;desti&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* incrementa l&amp;#39;hora ho en un segon i deixa el resultat a hd.&lt;/span&gt;
&lt;span class="cm"&gt;   En cas que l&amp;#39;hora fos 23:59:59, retorna 1, altrament retorna 0. */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;incr_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hd&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;El codi anterior només inclou la signatura de les subrutines. Algunes
ja les teníem implementades encara que de manera lleugerament
diferent. Per exemple, &lt;em&gt;assigna_valors_a_hora()&lt;/em&gt; abans es deia
&lt;em&gt;assigna_valors()&lt;/em&gt;, i &lt;em&gt;incr_segon_a_hora()&lt;/em&gt; abans no retornava res.&lt;/p&gt;
&lt;p&gt;Completa el codi de totes les funcions i modifica el codi de les
funcions &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;valida_resultat()&lt;/tt&gt; de l'exercici 3, de manera
que faci servir les subrutines anteriors en comptes d'accedir
directament als camps de l'estructura &lt;em&gt;Hora&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Nota: fixa't que moltes d'aquestes subrutines no les necessitem per
aquest &lt;em&gt;main()&lt;/em&gt;. Potser en altres aplicacions apareixerà la
necessitat.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="mes-d-un-fitxer"&gt;
&lt;h2&gt;Més d'un fitxer&lt;/h2&gt;
&lt;p&gt;Ara ja disposem del concepte de TAD. No trobes, però, que és una mica
incòmode a l'hora de reutilitzar codi? És clar, cada cop que vull fer
servir el TAD Hora, em cal copiar i enganxar tot el codi en el fitxer
on tinc el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;. No és gaire àgil, no...&lt;/p&gt;
&lt;p&gt;El que ens cal és trobar una manera de col·locar el codi del TAD en un
fitxer i demanar al compilador de C que l'&lt;em&gt;inclogui&lt;/em&gt; amb el codi del
nostre programa.&lt;/p&gt;
&lt;div class="section" id="exercici-5-el-tad-hora-amb-mes-d-un-fitxer"&gt;
&lt;h3&gt;Exercici 5. El TAD Hora amb més d'un fitxer&lt;/h3&gt;
&lt;p&gt;Segueix les passes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;copia el codi de l'exercici 7 en un nou lloc.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;crea els fitxers: &lt;tt class="docutils literal"&gt;tad_hora.h&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;mou el codi amb la definició del tipus Hora i la signatura de les
subrutines (incloent comentaris) a &lt;tt class="docutils literal"&gt;tad_hora.h&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;mou el codi amb el cos de les subrutines a &lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;mou la resta de subrutines (&lt;tt class="docutils literal"&gt;valida_resultat()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;) al
fitxer &lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;després de la capçalera de &lt;tt class="docutils literal"&gt;tad_hora.h&lt;/tt&gt; (perquè li has posat una
capçalera, oi?) afegeix les següents línies:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#ifndef TAD_HORA_H   &lt;/span&gt;&lt;span class="cm"&gt;/* permet garantir que no s&amp;#39;ha inclós abans */&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#define TAD_HORA_H&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per altra banda, com a darrera línia afegeix la següent&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#endif    &lt;/span&gt;&lt;span class="cm"&gt;/* ve de ifndef TAD_HORA_H */&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aquestes línies, com diu el comentari, permeten que només es pugui
incloure un cop. Més endavant veurem què vol dir això.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;després de la capçalera de &lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt;, i abans d'altres
&lt;em&gt;includes&lt;/em&gt;, afegeix la línia&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include &amp;quot;tad_hora.h&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que va amb cometes dobles en comptes dels habituals angles.&lt;/p&gt;
&lt;p&gt;Com que en aquest fitxer hi apareix codi que fa servir, per
exemple, el &lt;tt class="docutils literal"&gt;printf()&lt;/tt&gt;, et caldrà afegir els &lt;em&gt;includes&lt;/em&gt;
necessaris.&lt;/p&gt;
&lt;p&gt;Nota també que aquest fitxer no té funció &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;compila &lt;tt class="docutils literal"&gt;tad_hora.h&lt;/tt&gt; i corregeix els errors que hi puguin haver&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;gcc -Wall -c tad_hora.h
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que fem servir l'opció &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-c&lt;/span&gt;&lt;/tt&gt; que indica a &lt;tt class="docutils literal"&gt;gcc&lt;/tt&gt; que
únicament intenti compilar (sense enllaçar).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;compila &lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt; i corregeix els errors que hi puguin haver&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;gcc -Wall -c tad_hora.c
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Sí, novament no volem enllaçar.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;inclou la capçalera del tad hora en el fitxer amb el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;
(suposem que es diu «usa_hora.c») i compila'l de la següent manera:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;gcc -Wall tad_hora.c usa_hora.c
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;executa el fitxer resultant de la manera habitual.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;El resultat quedaria representat pel diagrama següent:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="El TAD Hora" src="http://apuntstecnics.herokuapp.com/images/prg016.img001.tad_hora.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-canvi-implementacio-del-tad-hora"&gt;
&lt;h3&gt;Exercici 6. Canvi implementació del tad Hora&lt;/h3&gt;
&lt;p&gt;Comprovem ara que podem canviar la implementació interna d'un tipus
abstracte sense afectar els programes que el fan servir.&lt;/p&gt;
&lt;p&gt;En concret, modifica el tipus de dades Hora de manera que ara tingui
el següent aspecte:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt; &lt;span class="cm"&gt;/* codifica hores, minuts i segons a cada posició */&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Modifica el que calgui a &lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt;, torna a compilar i executar
&lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt; sense modificar el seu codi.&lt;/p&gt;
&lt;p&gt;Fixa't el que acabes de fer: has modificat completament la
implementació de Hora però no t'ha calgut modificar el codi que la
fa servir.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-el-tad-data"&gt;
&lt;h3&gt;Exercici 10**. El TAD Data&lt;/h3&gt;
&lt;p&gt;Defineix el TAD Data amb operacions similars a les del TAD Hora. Crea
un &lt;tt class="docutils literal"&gt;UsaData.c&lt;/tt&gt; similar al &lt;tt class="docutils literal"&gt;UsaHora.c&lt;/tt&gt;. Probablement ja el tens fet
en un exercici anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-11-el-tad-datahora"&gt;
&lt;h3&gt;Exercici 11*. El TAD DataHora&lt;/h3&gt;
&lt;p&gt;Defineix ara el TAD DataHora.&lt;/p&gt;
&lt;p&gt;Fixa't que el nou TAD oferirà subrutines que simplement cridaran a
subrutines dels TADs que conté. Per exemple,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;obte_hores_de_datahora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DataHora&lt;/span&gt; &lt;span class="n"&gt;dh&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;obte_hores_de_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dh&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Posa especial compte en que DataHora &lt;strong&gt;no&lt;/strong&gt; accedeixi directament a
les implementacions de Data ni d'Hora. Recorda que aquestes podrien
canviar i no volem haver de modificar més codi de l'imprescindible.&lt;/p&gt;
&lt;p&gt;Afegeix un codi &lt;tt class="docutils literal"&gt;usa_datahora.c&lt;/tt&gt; que faci quelcom similar a
&lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt;. Probablement ja el tens fet en un exercici anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="la-utilitat-make"&gt;
&lt;h2&gt;La utilitat make **&lt;/h2&gt;
&lt;p&gt;Quan el nombre de fitxers creix, apareix la necessitat de simplificar
la seva gestió. Per exemple, per generar l'executable, fins ara només
ens ha calgut fer servir &lt;tt class="docutils literal"&gt;gcc&lt;/tt&gt; tot indicant-li no més de tres
fitxers font a compilar. Què passa però quan en comptes de tres en
tenim trenta, o trescents...?&lt;/p&gt;
&lt;p&gt;Hi ha una utilitat molt habitual en el desenvolupament en C anomenada
&lt;tt class="docutils literal"&gt;make&lt;/tt&gt;. De fet, &lt;tt class="docutils literal"&gt;make&lt;/tt&gt; pot ser utilitzada per gestionar arxius que
tinguin algun tipus de dependència entre si.&lt;/p&gt;
&lt;p&gt;Si fem &lt;tt class="docutils literal"&gt;man make&lt;/tt&gt; , ens dirà que es tracta d'una utilitat per a
mantenir un grup de programes, i que el seu propòsit és determinar
automàticament quines peces d'un programa gran necessiten ser
recompilades i llençar les comandes per recompilar-les.&lt;/p&gt;
&lt;p&gt;Un fitxer anomenat &lt;tt class="docutils literal"&gt;Makefile&lt;/tt&gt; defineix les dependències, de manera
que només amb &lt;tt class="docutils literal"&gt;make&lt;/tt&gt; podem tenir l'executable apunt.&lt;/p&gt;
&lt;p&gt;Veiem un petit exemple amb el programa &lt;tt class="docutils literal"&gt;usa_hora&lt;/tt&gt;. Segueix les
passes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Crea una nova carpeta i copia-hi els fitxers &lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt;,
&lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;tad_hora.h&lt;/tt&gt; desenvolupats a l'exercici 7.&lt;/li&gt;
&lt;li&gt;Crea un fitxer amb el nom &lt;tt class="docutils literal"&gt;Makefile&lt;/tt&gt; dins del nou directori i
afegeix el següent contingut. Atenció: assegura't que fas servir un
tabulador per indentar&lt;/li&gt;
&lt;/ol&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;# Makefile: usa_hora&lt;/span&gt;
&lt;span class="cp"&gt;# Descr:    Construeix l&amp;#39;aplicació usa_hora&lt;/span&gt;

&lt;span class="n"&gt;cflags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Wall&lt;/span&gt;
&lt;span class="n"&gt;cc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gcc&lt;/span&gt;

&lt;span class="nl"&gt;all&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;

&lt;span class="nl"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cflags&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;

&lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nl"&gt;o&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cflags&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;

&lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nl"&gt;o&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cflags&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;

&lt;span class="nl"&gt;clean&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;rm&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;*~&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gz&lt;/span&gt;

&lt;span class="nl"&gt;tar&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;tar&lt;/span&gt; &lt;span class="n"&gt;czvf&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gz&lt;/span&gt; &lt;span class="n"&gt;Makefile&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Ara escriu a consola&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;make
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Amb aquesta comanda es llençaran les següents comandes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;gcc -Wall -c usa_hora.c
gcc -Wall -c tad_hora.c
gcc -Wall usa_hora.o tad_hora.o -o usa_hora
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si tornem a executar &lt;tt class="docutils literal"&gt;make&lt;/tt&gt; ens dirà quelcom similar a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;make: Nothing to be &lt;span class="k"&gt;done&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="sb"&gt;`&lt;/span&gt;all&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;.
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ara modifiquem &lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt;, o simplement el podem &amp;quot;tocar&amp;quot; amb&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;touch usa_hora.c
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si tornem a fer &lt;tt class="docutils literal"&gt;make&lt;/tt&gt; trobarem que només compila &lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt;
però no &lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt; ja que ha detectat que el seu font no ha estat
modificat&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;make
gcc -Wall -c usa_hora.c
gcc -Wall usa_hora.o tad_hora.o -o usa_hora
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;D'una manera coherent, &lt;tt class="docutils literal"&gt;make&lt;/tt&gt; compilarà el que correspongui depenent
dels fitxers modificats:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;touch tad_hora.c
&lt;span class="nv"&gt;$ &lt;/span&gt;make
gcc -Wall -c tad_hora.c
gcc -Wall usa_hora.o tad_hora.o -o usa_hora
&lt;span class="nv"&gt;$ &lt;/span&gt;touch tad_hora.h
&lt;span class="nv"&gt;$ &lt;/span&gt;make
gcc -Wall -c usa_hora.c
gcc -Wall -c tad_hora.c
gcc -Wall usa_hora.o tad_hora.o -o usa_hora
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Podem llegir el nostre fitxer &lt;tt class="docutils literal"&gt;Makefile&lt;/tt&gt; de la següent manera:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;línies 1 i 2: capçalera descriptiva (sí aquí també cal!)&lt;/li&gt;
&lt;li&gt;línies 4 i 5: definició de variables. Per exemple, només ens caldria
canviar els valors assignats a &lt;tt class="docutils literal"&gt;cflags&lt;/tt&gt; per a definir noves
opcions de compilació.&lt;/li&gt;
&lt;li&gt;línia 7: definició de l'objectiu principal &lt;tt class="docutils literal"&gt;all&lt;/tt&gt; que demana que
estigui disponible el fitxer &lt;tt class="docutils literal"&gt;usa_hora&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;línia 9: per a aconseguir el fitxer &lt;tt class="docutils literal"&gt;usa_hora&lt;/tt&gt; ens cal obtenir els
fitxers &lt;tt class="docutils literal"&gt;usa_hora.o&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;tad_hora.o&lt;/tt&gt;. Si &lt;tt class="docutils literal"&gt;usa_hora&lt;/tt&gt; no existeix
o bé presenta una data &lt;strong&gt;anterior&lt;/strong&gt; a la d'algun d'aquests dos
fitxers, llavors s'executarà la comanda de la línia 10 (indentada
amb un tabulador) que en substituir les variables pels seus valors,
es traduiria per&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;gcc -Wall usa_hora.o tad_hora.o -o usa_hora
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;línies 11 i 14: indiquen com aconseguir els subobjectius requerits
per l'objectiu &lt;tt class="docutils literal"&gt;usa_hora&lt;/tt&gt;. Bàsicament requereix que els fitxers
objecte (&lt;tt class="docutils literal"&gt;.o&lt;/tt&gt;)tinguin una data posterior als fitxers font (&lt;tt class="docutils literal"&gt;.c&lt;/tt&gt;
i &lt;tt class="docutils literal"&gt;.h&lt;/tt&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;línies 16 i 19: defineixen objectius independents al principal
(&lt;tt class="docutils literal"&gt;all&lt;/tt&gt;)&lt;/p&gt;
&lt;p&gt;La utilitat &lt;tt class="docutils literal"&gt;make&lt;/tt&gt; ens permet disposar d'altres &lt;em&gt;objectius&lt;/em&gt; a
banda del principal. Per exemple, el nostre &lt;tt class="docutils literal"&gt;Makefile&lt;/tt&gt; disposa de
l'objectiu &lt;tt class="docutils literal"&gt;clean&lt;/tt&gt;. Si l'executem ens eliminarà tots els fitxers
temporals&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;  &lt;span class="nv"&gt;$ &lt;/span&gt;make clean

També disposa de l&lt;span class="s1"&gt;&amp;#39;opció tar que genera un paquet amb tots els&lt;/span&gt;
&lt;span class="s1"&gt;fitxers font de l&amp;#39;&lt;/span&gt;aplicació
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;make tar
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Hi ha moltes altres possibilitats amb el &lt;tt class="docutils literal"&gt;make&lt;/tt&gt;.  Amb el que hem
vist, però, tenim una primera idea de les possibilitats de l'eina. Si
tens interès en aprofundir-hi més, pots consultar per exemple el
&lt;a class="reference external" href="http://www.gnu.org/software/make/manual/make.html"&gt;manual oficial de make&lt;/a&gt;.&lt;/p&gt;
&lt;div class="section" id="exercici-7-makefile-pel-tad-punt"&gt;
&lt;h3&gt;Exercici 7. Makefile pel TAD punt&lt;/h3&gt;
&lt;p&gt;Desenvolupa el TAD d'un punt que permeti manipular punts en dos
dimensions (x, y). El TAD oferirà operacions per a assignar i obtenir
cada coordenada i sumar dos punts deixant el resultat en un tercer.
Crea un &lt;tt class="docutils literal"&gt;usa_punt.c&lt;/tt&gt; que creï dos punts amb valors demanats a
l'usuari i mostri el resultat de sumar-los.&lt;/p&gt;
&lt;p&gt;Finalment, crea un Makefile adequat.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-13-makefile-pel-tad-data"&gt;
&lt;h3&gt;Exercici 13*. Makefile pel TAD Data&lt;/h3&gt;
&lt;p&gt;Desenvolupa un &lt;tt class="docutils literal"&gt;Makefile&lt;/tt&gt; adequat pel TAD Data i el programa
&lt;tt class="docutils literal"&gt;usa_data&lt;/tt&gt; de l'exercici 10.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-14-makefile-pel-tad-datahora"&gt;
&lt;h3&gt;Exercici 14*. Makefile pel TAD DataHora&lt;/h3&gt;
&lt;p&gt;Desenvolupa un &lt;tt class="docutils literal"&gt;Makefile&lt;/tt&gt; adequat pel TAD DataHora i el programa
&lt;tt class="docutils literal"&gt;usa_datahora&lt;/tt&gt; de l'exercici 11.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:42:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:tipus-abstractes-de-dades.html</guid><category>C</category></item><item><title>El patró observador</title><link>http://apuntstecnics.herokuapp.com/el-patro-observador.html</link><description>&lt;!-- XXX TODO: to be converted to current rst for pelican.
Decide also if it has to appear in this category (it could do in
the GUI one or even in a new one about patterns) --&gt;
&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquesta entrada es presenta un patró de disseny anomenat
&lt;em&gt;patró observador&lt;/em&gt; o &lt;em&gt;observer pattern&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Es tracta d'un patró molt utilitzat en contextos en els que cal
reaccionar a canvis que es poden produir en algun lloc. La seva
implementació evita haver de fer mecanismes de &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Polling_%28computer_science%29"&gt;poling&lt;/a&gt; o
&lt;a class="reference external" href="http://ca.wikipedia.org/wiki/Espera_activa"&gt;espera activa&lt;/a&gt; en els
que part del codi va comprovant constantment si s'ha produït el canvi
esperat. No és d'estranyar que aquest patró sigui amplament utilitzat
en interfícies gràfiques d'usuari (GUI).&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;El patró &lt;strong&gt;observador&lt;/strong&gt;&lt;/h2&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Com va el patró observador" src="http://apuntstecnics.herokuapp.com/images/poo024.img001.observer.comic.png" /&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Observador&lt;/strong&gt; és un patró de disseny de programari format per un
objecte anomenat &lt;em&gt;subjecte&lt;/em&gt; que genera algun tipus de missatge a un o
més objectes anomenats &lt;em&gt;observadors&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Els observadors han de mostrar l'interès en rebre el tipus de
missatges; és a dir, s'han de &lt;em&gt;subscriure&lt;/em&gt;. El subjecte manté la
llista d'observadors i quan hi ha un missatge per enviar, els envia a
tots els subscriptors. El patró correctament implementat permet que
tant el subjecte com l'observador puguin ser quasi completament
desconeguts entre si. Això ho aconsegueixen implementant unes
determinades &lt;em&gt;interfaces&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;És tracta d'un model multicast amb un únic enviador i molts receptors.&lt;/p&gt;
&lt;p&gt;El patró observador es pot trobar a situacions de la vida quotidiana.
Per exemple, considera com funciona el mon de les revistes o diaris
per subscripció. Una editorial comença a publicar diaris. A tu
t'interessa i decideixes subscriure't. Cada cop que l'editorial llença
una nova edició, a tu te n'arriba una còpia. Quan finalment decideixes
que ja no t'interessa aquestes publicacions, et desubscrius i
l'editorial deixa d'enviar-te noves edicions.&lt;/p&gt;
&lt;div class="section" id="un-exemple-l-estacio-meteorologica"&gt;
&lt;h3&gt;Un exemple: l'estació meteorològica&lt;/h3&gt;
&lt;p&gt;El llibre Head First Design patterns ens ofereix el següent exemple
&lt;a class="footnote-reference" href="#exempleadaptat" id="id2"&gt;[1]&lt;/a&gt; pel patró &lt;em&gt;observador&lt;/em&gt;: l'estació meteorològica.&lt;/p&gt;
&lt;p&gt;Disposem d'una estació meteorològica capaç de mesurar la
temperatura, l'humitat i la pressió atmosfèrica. Amb l'estació ens han
afegit una classe abstracta en java anomenada AbsEstacioMeteorologica
amb la següent interfície pública:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ javap AbsEstacioMeteorologica
Compiled from &amp;quot;AbsEstacioMeteorologica.java&amp;quot;
public abstract class AbsEstacioMeteorologica extends java.lang.Object{
    public AbsEstacioMeteorologica();
    public double getTemperatura();
    public double getHumitat();
    public double getPressio();
    public abstract void canviMessures();
    public static void main(java.lang.String[]);
    static void access$000(AbsEstacioMeteorologica);
    static {};
}
&lt;/pre&gt;
&lt;p&gt;Com podem veure, AbsEstacioMeteorologica ens ofereix mètodes per a
obtenir les dades de la darrera lectura de les tres mesures que pren
l'estació meteorològica. Ens deixa, però, un mètode &amp;quot;obert&amp;quot;
(&lt;tt class="docutils literal"&gt;canviMessures()&lt;/tt&gt;) i ens asseguren que el mètode és cridat cada cop
que una o més mesures han canviat.&lt;/p&gt;
&lt;p&gt;El nostre objectiu consisteix en crear la classe EstacioMeteorologica
que estengui AbsEstacioMeteorologica i implementi canviMessures()
adequadament per a permetre mostrar les mesures a la nostra aplicació.&lt;/p&gt;
&lt;p&gt;Suposem que volem mostrar les mesures de tres maneres diferents:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;la primera consisteix en simplement mostrar les dades de les condicions actuals del temps.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;la segona mostraria els estadístics de les darreres 50 lectures:&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;temperatura mitja&lt;/li&gt;
&lt;li&gt;temperatura mínima&lt;/li&gt;
&lt;li&gt;temperatura màxima&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;finalment la tercera mostrarà una representació gràfica de les dades actuals amb icones tipus núvols, sol, pluja...&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;És important, però, que la nostra solució permeti afegir fàcilment
altres presentacions de les dades. Exemple, una previsió del temps que
farà les properes 24 hores.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-primera-aproximacio"&gt;
&lt;h3&gt;Exercici 1: primera aproximació&lt;/h3&gt;
&lt;p&gt;Una primera solució &lt;em&gt;feble&lt;/em&gt; del problema consistiria en disposar d'una
instància de les vistes accessible des de EstacioMeteorologica, de
manera que cada cop que és cridat el mètode canviMessures(), es fan
les actualitzacions de les vistes.&lt;/p&gt;
&lt;p&gt;Les vistes podrien estar implementades per les classes
&lt;tt class="docutils literal"&gt;CondicionsActuals&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;Estadistiques&lt;/tt&gt; i
&lt;tt class="docutils literal"&gt;GraficaCondicionsActuals&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Considera el següent diagrama de classes:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Primera aproximació de l'estació meteorològica" src="http://apuntstecnics.herokuapp.com/images/poo024.img002.observer_pattern_sol01.png" /&gt;
&lt;/div&gt;
&lt;p&gt;El diagrama implica que EstacioMeteorologica disposa d'accés a
instàncies de les tres classes que mostren les dades.&lt;/p&gt;
&lt;p&gt;El codi seria quelcom semblant a:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
public void canviMessures() {
    double temperatura = getTemperatura();
    double humitat = getHumitat();
    double pressio = getPressio();

    condicionsActuals.actualitzaValors(temperatura, humitat, pressio);
    grafCondicionsActuals.actualitzaGrafic(humitat, pressio, temperatura);
    estadistiques.actualitzaEstats(temperatura, pressio, humitat);

}
&lt;/pre&gt;
&lt;p&gt;Implementa la classe EstacioMeteorologica de manera que el
constructor rebi com a paràmetres instàncies de les tres vistes, i que
canviMessures() faci una crida per a actualitzar les vistes.&lt;/p&gt;
&lt;p&gt;Implementa també les classes corresponents a les tres vistes. Els
mètodes d'actualització, per simplicitat, simplement escriuran per
sortida estàndard un missatge similar a:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
[Vista Estadistiques] temperatura: 32.21º humitat: 60% pressió: 1017,06 hPa
&lt;/pre&gt;
&lt;p&gt;Finalment implementa la classe TestEstacioMeteorologica que crei tot
el sistema i permeti mostrar el funcionament.&lt;/p&gt;
&lt;p&gt;Ja que és un exercici tan fàcil, afegim un petit anàlisi. Indica
quines de les següents afirmacions són correctes, quines no i perquè
t'has decidit pel sí o el no.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;la solució codifica contra implementacions concretes en comptes d'interfícies.&lt;/li&gt;
&lt;li&gt;hi ha una violació de l'encapsulació de la classe EstacioMeteorologica.&lt;/li&gt;
&lt;li&gt;cada cop que afegim una nova vista, caldrà modificar el codi d'EstacioMeteorologica.&lt;/li&gt;
&lt;li&gt;la solució no permet afegir o treure vistes en temps d'execució.&lt;/li&gt;
&lt;li&gt;les tres vistes no implementen una interfície comuna.&lt;/li&gt;
&lt;li&gt;EstacioMeteorologica continua sent abstracta.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Nota: no miris el següent exercici fins que no hagis contestat aquest.
Tindràs temps en cas que vulguis corregir les respostes del teu
anàlisi abans de lliurar-les. El profe no ho podrà saber. ;)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-les-vistes-implementen-una-interficie-comuna"&gt;
&lt;h3&gt;Exercici 2: Les vistes implementen una interfície comuna&lt;/h3&gt;
&lt;p&gt;D'acord. La solució anterior presenta un munt de problemes.
Entre els problemes més incòmodes es troba el fet que les classes
&lt;em&gt;vista&lt;/em&gt; no implementen una interfície comuna. Això implica que
EstacioMeteorologica hagi de fer una crida diferent per a cada mètode
d'actualització.&lt;/p&gt;
&lt;p&gt;A més de conèixer les classes concretes, EstacioMeteorologica no té
manera d'oferir un mètode per a afegir noves vistes. Simplement es
queda amb les que rep amb el constructor, i si en volem afegir més,
ens toca modificar codi.&lt;/p&gt;
&lt;p&gt;Considera el diagrama següent que pretén solucionar aquests problemes:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Segona aproximació de l'estació meteorològica" src="http://apuntstecnics.herokuapp.com/images/poo024.img003.observer_pattern_sol02.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Com podem veure, EstacioMeteorologica encara està composat de les tres
&lt;em&gt;vistes&lt;/em&gt;, però ara aquestes implementen una interfície comuna.
Refés el codi de EstacioMeteorologica de manera que en tregui profit
de la interfície comuna.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Nota&lt;/strong&gt;: Potser tens la temptació de modificar &lt;strong&gt;només&lt;/strong&gt; les crides
d'actualització de les vistes al mètode &lt;tt class="docutils literal"&gt;canviMessures()&lt;/tt&gt;. Intenta
vèncer la mandra i fes que totes les vistes estiguin a algun tipus de
contenidor iterable i treu-ne profit.&lt;/p&gt;
&lt;p&gt;Finalment, com que el que se't demana en aquest exercici continua sent
molt senzill, caldrà que facis un petit anàlisi similar al de
l'exercici anterior. Així, indica quines de les següents afirmacions
són correctes, quines no i perquè t'has decidit pel sí o el no.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;la solució codifica contra implementacions concretes en comptes d'interfícies.&lt;/li&gt;
&lt;li&gt;cada cop que afegim una nova vista, caldrà modificar el codi d'EstacioMeteorologica.&lt;/li&gt;
&lt;li&gt;la solució no permet afegir o treure vistes en temps d'execució.&lt;/li&gt;
&lt;li&gt;les tres vistes no implementen una interfície comuna.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-el-patro-observador"&gt;
&lt;h3&gt;Exercici 3: El patró observador&lt;/h3&gt;
&lt;p&gt;Probablement quan desenvolupaves l'exercici anterior ja havies vist
com solucionar alguns dels problemes que encara tenia la nova
implementació. En aquest cas, felicitats!&lt;/p&gt;
&lt;p&gt;Tant si te n'has adonat com si no, considera el següent diagrama que
modifica &lt;em&gt;lleugerament&lt;/em&gt; l'anterior. &lt;a class="footnote-reference" href="#id4" id="id3"&gt;[*]&lt;/a&gt;&lt;/p&gt;
&lt;table class="docutils footnote" frame="void" id="id4" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[*]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Trobaràs una versió més general d'aquest diagrama a &lt;a class="reference external" href="http://ca.wikipedia.org/wiki/Patr%C3%B3_observador"&gt;http://ca.wikipedia.org/wiki/Patr%C3%B3_observador&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Tercera aproximació de l'estació meteorològica" src="http://apuntstecnics.herokuapp.com/images/poo024.img003.observer_pattern_sol03.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Implementa el nou disseny de solució i indica quines de les següents afirmacions són correctes, quines no i perquè t'has decidit pel sí o el no.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;la solució codifica contra implementacions concretes en comptes d'interfícies.&lt;/li&gt;
&lt;li&gt;cada cop que afegim una nova vista, caldrà modificar el codi d'EstacioMeteorologica.&lt;/li&gt;
&lt;li&gt;la solució no permet afegir o treure vistes en temps d'execució.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-observable-i-observer"&gt;
&lt;h3&gt;Exercici 4: Observable i Observer&lt;/h3&gt;
&lt;p&gt;La API de java ens ofereix unes interfícies per a fer això més
estàndard. No és que ens aportin gaire nou respecte el que ja em vist,
però pot ser interessant veure la notació.&lt;/p&gt;
&lt;p&gt;Troba les interfícies Observable i Observer a la API de java i
realitza una nova versió de l'aplicació de l'Estació Meteorològica tot
fent sevir les dues interfícies en comptes de la que ja havíem creat.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="exempleadaptat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;L'exemple apareix adaptat als coneixements de POO
que estem seguint en aquests materials.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Sun, 30 Jun 2013 23:59:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-06-30:el-patro-observador.html</guid><category>java</category></item></channel></rss>