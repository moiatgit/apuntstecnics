<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Apunts tècnics</title><link>http://apuntstecnics.herokuapp.com/</link><description></description><atom:link href="http://apuntstecnics.herokuapp.com/feeds/moises-gomez-giron.rss.xml" rel="self"></atom:link><lastBuildDate>Thu, 22 Jan 2015 00:09:55 +0100</lastBuildDate><item><title>Diagrames de seqüència</title><link>http://apuntstecnics.herokuapp.com/diagrames-de-sequencia.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document és un guió per la presentació a classe dels diagrames
de seqüència.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exemple-comandes"&gt;
&lt;h2&gt;Exemple Comandes&lt;/h2&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="comandes" src="http://apuntstecnics.herokuapp.com/images/uml002.img001.comandes.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Imatge generada amb BOUML&lt;/p&gt;
&lt;p&gt;Del llibre &lt;em&gt;UML Distilled: A Brief Guide to the Standard Object
Modeling Language, Third Edition&lt;/em&gt; de Martin Fowler.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exemple-entorn-gat-renat"&gt;
&lt;h2&gt;Exemple Entorn Gat Renat&lt;/h2&gt;
&lt;p&gt;Considerant l'entorn operatiu del Gat Renat amb l'ampliació de
l'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/relacions-entre-classes.html"&gt;exercici 1 de Relacions entre classes&lt;/a&gt;&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="entorn Renat" src="http://apuntstecnics.herokuapp.com/images/uml002.img002.exemple_entornrenat.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-l-activitat-dels-ulls-del-gat-renat"&gt;
&lt;h3&gt;Exercici 1. L'activitat dels ulls del Gat Renat&lt;/h3&gt;
&lt;p&gt;Representa el diagrama de seqüència corresponent a l'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/relacions-entre-classes.html"&gt;exercici 2 de
Relacions entre classes&lt;/a&gt; de
manera que es pugui entendre com interacciona el gat amb els ulls a
partir dels diferents serveis del gat que afecten a l'estat dels ulls.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Thu, 22 Jan 2015 00:09:55 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-01-22:diagrames-de-sequencia.html</guid></item><item><title>Diagrames d'estat</title><link>http://apuntstecnics.herokuapp.com/diagrames-destat.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document és un guió per la presentació a classe dels diagrames
de màquines d'estat. En el document s'abreujarà per &lt;em&gt;diagrames
d'estat&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;Diagrames d'estat&lt;/h2&gt;
&lt;p&gt;Un diagrama d'estats mostra una &lt;em&gt;màquina d'estats&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Els diagrames d'estat estan formats per un conjunt d'estats i les
transicions entre aquests.&lt;/p&gt;
&lt;p&gt;Les transicions normalment apareixen etiquetades amb l'esdeveniment
que les provoca o dispara (&lt;em&gt;trigger&lt;/em&gt;). També poden incloure informació
respecte a condicions en que es dispararan i accions a realitzar. La
notació completa és: &lt;em&gt;esdeveniment[condició]/acció&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Farem servir els diagrames d'estat per modelitzar el comportament
dinàmic d'un sistema, normalment el d'objectes que responen a
esdeveniments externs.&lt;/p&gt;
&lt;p&gt;Exemple una mica forçat del funcionament d'un ascensor poc
convencional.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Estat de l'ascensor" src="http://apuntstecnics.herokuapp.com/images/uml001.img001.estatascensor.png" /&gt;
&lt;/div&gt;
&lt;p&gt;L'estat final no és obligatori i n'hi poden aparèixer més d'un.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="implementacio"&gt;
&lt;h2&gt;Implementació&lt;/h2&gt;
&lt;p&gt;Una possible codificació per l'estat &lt;em&gt;Funcionant&lt;/em&gt; seria:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
switch (estat) {
    case PlantaBaixa:
        switch (esdeveniment) {
            case Puja1:
                setEstat(PrimerPis);
                break;
            case Puja2:
                setEstat(SegonPis);
                break;
            case Baixa1:
            case Baixa2:
                mostraError();
        }
        break;
    case PrimerPis:
        switch (esdeveniment) {
            «...»
        }
        break;
    case SegonPis:
        «...»
        break;
}
&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-implementacio-de-l-ascensor"&gt;
&lt;h3&gt;Exercici 1. Implementació de l'ascensor&lt;/h3&gt;
&lt;p&gt;Completa la implementació de l'estat compost &lt;em&gt;Funcionant&lt;/em&gt; de l'exemple
de l'ascensor.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-l-estat-del-gat-renat"&gt;
&lt;h3&gt;Exercici 2. L'estat del Gat Renat&lt;/h3&gt;
&lt;p&gt;Considera una versió del Gat Renat que pot estar en alguna de les
següents posicions:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;corrent&lt;/li&gt;
&lt;li&gt;caminant&lt;/li&gt;
&lt;li&gt;dret&lt;/li&gt;
&lt;li&gt;assegut&lt;/li&gt;
&lt;li&gt;estirat&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;El gat no pot posar-se a caminar o a córrer si estava assegut o
estirat. Per altra banda, si estava corrent o caminant, no pot
seure's o estirar-se de cop, primer ha de quedar-se dret. Malgrat
estant dret pot estirar-se directament, no pot posar-se dret si estava
estirat.&lt;/p&gt;
&lt;p&gt;Realitza el diagrama d'estats i proposa un esquema d'implementació.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Tue, 20 Jan 2015 15:52:07 +0100</pubDate><guid>tag:apuntstecnics.herokuapp.com,2015-01-20:diagrames-destat.html</guid></item><item><title>Us bàsic de l'entorn de desenvolupament integrat Eclipse</title><link>http://apuntstecnics.herokuapp.com/us-basic-de-lentorn-de-desenvolupament-integrat-eclipse.html</link><description>&lt;!-- categories: eines --&gt;
&lt;!-- tags: eclipse --&gt;
&lt;!-- permalink: '/:categories/eclipse-us-basic' --&gt;
&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En aquest document accedirem als elements bàsics personalització i ús
de l'entorn Eclipse.&lt;/p&gt;
&lt;p&gt;Per seguir-lo, caldrà disposar de&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;eclipse instal·lat amb jdk correctament instal·lat&lt;/li&gt;
&lt;li&gt;plug-in CDT instal·lat&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Si encara no tens instal·lat Eclipse, pots seguir aquesta
&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-de-eclipse.html"&gt;guia d'eclipse&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Si no tens instal·lat el CDT, pots seguir aquesta
&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/configuracio-declipse-per-cc.html"&gt;guia de CDT&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="continguts"&gt;
&lt;h2&gt;Continguts&lt;/h2&gt;
&lt;p&gt;Començarem amb la creació d'un programa en C que respongui al següent
enunciat de requeriments:&lt;/p&gt;
&lt;blockquote&gt;
Escriu un programa que demani a l'usuari dos punts en el pla i li
mostri la longitud del segment que descriuen.&lt;/blockquote&gt;
&lt;p&gt;Crea un nou projecte de tipus &lt;em&gt;C Project&lt;/em&gt; i anomenal &lt;em&gt;Punts&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Selecciona el projecte acabat de crear i, amb el botó dret, crea un
nou fitxer font de C&lt;/p&gt;
&lt;p&gt;Ens crea el nou fitxer amb una capçalera de comentaris on surt la
data de creació i el nom de l'autor (el nom de l'usuari del
sistema)&lt;/p&gt;
&lt;p&gt;Comença a escriure &lt;tt class="docutils literal"&gt;int main(&lt;/tt&gt; i fixa't que et tanca el parèntesi
automàticament. Un detall és que si tot i així el tanques tu, no et
queden dos parèntesis tancats.&lt;/p&gt;
&lt;p&gt;Passa el mateix amb les claus. Si obres &lt;tt class="docutils literal"&gt;{&lt;/tt&gt; i fas &amp;lt;enter&amp;gt;, et
tanca la clau i t'indenta adequadament en la línia on probablement
voldràs començar a escriure codi.&lt;/p&gt;
&lt;p&gt;Introdueix &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;printf(&amp;quot;Introdueix&lt;/span&gt; les coordenades de dos punts\n&amp;quot;)&lt;/tt&gt;
sense el punt i coma final. Veuràs que t'avisa del problema amb un
interrogant al costat esquerre de la línia. Si poses el cursor a
sobre de l'interrogant, podràs llegir una descripció de l'error. En
aquest cas &lt;tt class="docutils literal"&gt;Missing ;&lt;/tt&gt;. Corregeix la situació i l'avís
desapareixerà.&lt;/p&gt;
&lt;p&gt;També veuràs que algunes paraules del missatge apareixen
subratllades en vermell. El comprovador ortogràfic no està
configurat pel català &lt;a class="footnote-reference" href="#spellcat" id="id1"&gt;[1]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Afegeix&lt;/p&gt;
&lt;pre class="literal-block"&gt;
printf(&amp;quot;Punt 1 coordenada x: &amp;quot;);
scanf(&amp;quot;%f&amp;quot;, &amp;amp;x1);
&lt;/pre&gt;
&lt;p&gt;Un nou avís ens informa que la variable x1 no apareix definida.
Escollim l'opció de creació d'una variable local i veiem que ens la
crea però amb el tipus incorrecte (no sempre encerta) A més, ens ha
col·locat la declaració a la línia justament anterior al seu ús
quan en C es usual posar-les a l'inici del bloc. Fes les
correccions corresponents.&lt;/p&gt;
&lt;p&gt;Escriu peticions per la resta de coordenades, fes el càlcul de la
longitud del segment i mostra el resultat per pantalla.&lt;/p&gt;
&lt;p&gt;El programa hauria de quedar quelcom similar a:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
/*
 * calculaSegment.c
 *
 *  Created on: 16/08/2012
 *      Author: Moisès
 */

#include&amp;lt;stdio.h&amp;gt;
#include&amp;lt;math.h&amp;gt;
int main() {
    float x1, y1, x2, y2;
    float longitud;
    printf(&amp;quot;Introdueix les coordenades de dos punts\n&amp;quot;);
    printf(&amp;quot;Punt 1 coordenada x: &amp;quot;);
    scanf(&amp;quot;%f&amp;quot;, &amp;amp;x1);
    printf(&amp;quot;Punt 1 coordenada y: &amp;quot;);
    scanf(&amp;quot;%f&amp;quot;, &amp;amp;y1);
    printf(&amp;quot;Punt 2 coordenada x: &amp;quot;);
    scanf(&amp;quot;%f&amp;quot;, &amp;amp;x2);
    printf(&amp;quot;Punt 2 coordenada y: &amp;quot;);
    scanf(&amp;quot;%f&amp;quot;, &amp;amp;y2);
    longitud = sqrt(pow((x2-x1), 2)+pow((y2-y1), 2));
    printf(&amp;quot;La longitud del segment és %0.2f\n&amp;quot;, longitud);
    return 0;
}
&lt;/pre&gt;
&lt;p&gt;Ara executarem el nostre codi (ex. Run-&amp;gt;run) &lt;a class="footnote-reference" href="#sqrtproblem" id="id2"&gt;[2]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Eclipse ens ha fet tot: compilar, enllaçar i llençar l'execució. Si
anem a la consola veurem que podem introduir les dades i executar
el nostre programa.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Funcionament del càlcul de segment" src="http://apuntstecnics.herokuapp.com/images/eclipse004.img001.funcionant.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Suposem que volem canviar el nom de les variables del primer punt
per &lt;tt class="docutils literal"&gt;coord1&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;coord2&lt;/tt&gt;. Fàcil. Cliquem sobre qualsevol
aparició de &lt;tt class="docutils literal"&gt;x1&lt;/tt&gt; i escollim &lt;em&gt;Refactor&lt;/em&gt; del menú contextual (clic
dret) Ara escollim &lt;em&gt;Rename&lt;/em&gt; i comencem a escriure el nou nom.
Tornem a posar, però, els noms anteriors que eren molt més curts.&lt;/p&gt;
&lt;p&gt;Estaria bé veure els números de línia, no? Windows -&amp;gt; Preferences
-&amp;gt; Editors -&amp;gt; Text Editors -&amp;gt; Show line numbers.&lt;/p&gt;
&lt;p&gt;Ara crearem una funció que calculi la longitud del segment. Per
fer-ho, en comptes de copiar&amp;amp;enganxar, el que farem serà
seleccionar l'expressió que assignem a &lt;tt class="docutils literal"&gt;longitud&lt;/tt&gt; i fem
Refactor-&amp;gt;Extract function. Aqui, simplement escollim el nom de la
funció (per exemple &lt;tt class="docutils literal"&gt;calcula_longitud&lt;/tt&gt; i Eclipse ens ho fa tot
sol!. Ens ha posat com a tipus de retorn &lt;em&gt;double&lt;/em&gt;. El podem
corregir si volem un float.&lt;/p&gt;
&lt;p&gt;Ara tornarem a executar el programa. Aquest cop, però, anirem a Run
-&amp;gt; Debug. Ens demanarà obrir una nova perspectiva, acceptem-ho i
veurem quelcom similar a la següent imatge.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Depuració amb Eclipse" src="http://apuntstecnics.herokuapp.com/images/eclipse004.img002.depurant.png" /&gt;
&lt;/div&gt;
&lt;p&gt;A la secció 1 trobem el fil d'execució en que estem. Com que no estem
desenvolupant una aplicació multifil, podem ignorar-la&lt;/p&gt;
&lt;p&gt;La secció 2 correspon a la inspecció de variables i altres elements
de l'execució del nostre programa. Es clar que les variables no han
estat inicialitzades i contenen soroll.&lt;/p&gt;
&lt;p&gt;La secció 3 continua sent el nostre codi però té ressaltada la
línia amb el proper codi a executar. De moment només ha declarat
les variables. Atenció que, tot i que podem editar, ara no és el
moment més adequat i probablement ens demanarà tornar a executar
per tenir en compte els canvis. També és interessant passar per
sobre de les variables amb el cursor de l'apuntador. Veurem
informació en temps d'execució.&lt;/p&gt;
&lt;p&gt;La secció 4 ja l'havíem vista. Ens dona un esquema del codi. Podem
veure-hi les nostres dues funcions &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;calcula_longitud()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;La secció 5 també la coneixem: correspon a la consola.&lt;/p&gt;
&lt;p&gt;Amb Run -&amp;gt; Step Over (o F6) podem executar la línia actual. Així
podem anar fent fins que arribem a &lt;tt class="docutils literal"&gt;scanf()&lt;/tt&gt;. No podrem avançar
fins que no introduïm un valor i fem enter a la consola.&lt;/p&gt;
&lt;p&gt;Fixem-nos que a la secció d'inspecció de variables podem veure el
nou valor de &lt;tt class="docutils literal"&gt;x1&lt;/tt&gt;. Suposem que voldríem que fos un altre. Doncs
l'editem a la secció d'inspecció i ja està!&lt;/p&gt;
&lt;p&gt;Com que és una mica incòmode anar línia a línia, afegirem un punt
d'aturada a la línia on assignem valor a la variable &lt;tt class="docutils literal"&gt;longitud&lt;/tt&gt;.
Ho farem, per exemple, amb clic dret sobre el número de línia i
&lt;em&gt;Toggle breakpoint&lt;/em&gt; (tot i que és més directe amb un doble clic
sobre la part grisa del costat) Ara continuem amb l'execució del
programa amb Run -&amp;gt; Resume o F8. S'aturarà quan arribi a la línia
amb el punt d'aturada.&lt;/p&gt;
&lt;p&gt;Ara tenim dues opcions. Executar aquesta línia com un bloc (farem
F6) o bé entrar dins de la funció &lt;tt class="docutils literal"&gt;calcula_longitud()&lt;/tt&gt; per
inspeccionar-la (Run -&amp;gt; Step Into o F5) Si fem aquesta segona
notarem que l'inspector de variables ja no té longitud. Això és
perquè estem en un bloc on aquesta variable no existeix. De fet,
encara que tenen el mateix nom, la resta de les variables no són
les mateixes que les del bloc principal.&lt;/p&gt;
&lt;p&gt;Per cert, trobarem l'executable a la carpeta Debug dins de la carpeta
en el &lt;em&gt;workspace&lt;/em&gt; corresponent al nostre projecte.&lt;/p&gt;
&lt;hr class="docutils" /&gt;
&lt;table class="docutils footnote" frame="void" id="spellcat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Tot i que es pot configurar perquè faci la comprovació
pel català, el procés no resulta gaire interessant pels objectius
d'aquesta guia. Queda com a exercici de l'usuari interessat.
Altrament caldrà ignorar aquest subratllat, o encara millor,
inhabilitar la comprovació ortogràfica.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="sqrtproblem" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Amb les darreres versions del compilador gcc (i
potser amb altres) cal linkar explícitament la biblioteca math al
nostre programa. Per fer-ho haurem d'anar a les propietats del
projecte -&amp;gt; C/C++ Build -&amp;gt; Settings -&amp;gt; GCC C Linker -&amp;gt; Libraries, i
aquí premem l'icona verda amb un + i afegim &lt;tt class="docutils literal"&gt;m&lt;/tt&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Tue, 14 Oct 2014 22:46:43 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2014-10-14:us-basic-de-lentorn-de-desenvolupament-integrat-eclipse.html</guid></item><item><title>Tutorial d'instal·lació del JDK</title><link>http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-del-jdk.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document descriu la instal·lació del JDK (Java Development Kit)
de Oracle a un sistema Ubuntu.&lt;/p&gt;
&lt;p&gt;Tot i que probablement altres implementacions (com ara OpenJDK) i
altres versions anteriors (ex. la 6) podrien servir perfectament pels
requeriments del curs, farem servir la versió 7 del JDK d'Oracle.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="installacio"&gt;
&lt;h2&gt;Instal·lació&lt;/h2&gt;
&lt;p&gt;Les següents instruccions permeten la instal·lació del JDK d'Oracle a
un Ubuntu 12.04.&lt;/p&gt;
&lt;p&gt;Si penses instal·lar-ho a un sistema diferent, considera seguir les
instruccions de la &lt;a class="reference external" href="http://www.oracle.com/technetwork/java/javase/downloads"&gt;pàgina oficial&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Els usuaris d'Ubuntu, disposem d'un repositori on trobem un paquet que
ens automatitza la instal·lació.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;sudo add-apt-repository ppa:webupd8team/java
You are about to add the following PPA to your system:
 Oracle Java &lt;span class="o"&gt;(&lt;/span&gt;JDK&lt;span class="o"&gt;)&lt;/span&gt; Installer &lt;span class="o"&gt;(&lt;/span&gt;automatically downloads and installs Oracle JDK7&lt;span class="o"&gt;)&lt;/span&gt;. There are no actual Java files in this PPA. More info: http://www.webupd8.org/2012/01/install-oracle-java-jdk-7-in-ubuntu-via.html
 More info: https://launchpad.net/~webupd8team/+archive/java
Press &lt;span class="o"&gt;[&lt;/span&gt;ENTER&lt;span class="o"&gt;]&lt;/span&gt; to &lt;span class="k"&gt;continue &lt;/span&gt;or ctrl-c to cancel adding it
«...»
&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get update
&lt;span class="nv"&gt;$ &lt;/span&gt;sudo apt-get install oracle-java7-installer
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest moment ja hauríem de tenir instal·lat el jdk 7 a la nostra
màquina. Pot passar, però, que encara no estigui enllaçada la nova
versió. Ho comprovarem fent&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java -version
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si ens surt quelcom similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;java version &amp;quot;1.7.0_05&amp;quot;
Java(TM) SE Runtime Environment (build 1.7.0_05-b05)
Java HotSpot(TM) Server VM (build 23.1-b03, mixed mode)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ja estem. Altrament caldrà seleccionar aquesta versió. És fàcil:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;sudo update-alternatives --config java
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Que ens generarà quelcom similar a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Hi ha 3 possibilitats per a l&amp;#39;alternativa java (que proveeix /usr/bin/java).

  Selecció    Camí                                          Prioritat  Estat
------------------------------------------------------------
  0            /usr/lib/jvm/java-7-oracle/jre/bin/java         1062      mode automàtic
  1            /usr/lib/jvm/java-6-openjdk-i386/jre/bin/java   1061      mode manual
* 2            /usr/lib/jvm/java-6-sun/jre/bin/java            63        mode manual
  3            /usr/lib/jvm/java-7-oracle/jre/bin/java         1062      mode manual

Premeu retorn per a mantenir l&amp;#39;opció per defecte[*], o introduïu un número de selecció: 3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En el cas de l'exemple, cal escollir &lt;tt class="docutils literal"&gt;0&lt;/tt&gt; o &lt;tt class="docutils literal"&gt;3&lt;/tt&gt; doncs són les
opcions que apunten a la versió 7 acabada d'instal·lar. Escollirem
&lt;tt class="docutils literal"&gt;0&lt;/tt&gt; per deixar al sistema d'alternatives que decideixi l'opció en
cas que tornem a instal·lar o eliminem algun paquet.&lt;/p&gt;
&lt;p&gt;Ara, hauríem de disposar dels programes &lt;tt class="docutils literal"&gt;javac&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;java&lt;/tt&gt; en la
darrera versió. Podem fer una darrera comprovació amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;javac -version
javac 1.7.0_45
&lt;span class="nv"&gt;$ &lt;/span&gt;java -version
java version &lt;span class="s2"&gt;&amp;quot;1.7.0_45&amp;quot;&lt;/span&gt;
Java&lt;span class="o"&gt;(&lt;/span&gt;TM&lt;span class="o"&gt;)&lt;/span&gt; SE Runtime Environment &lt;span class="o"&gt;(&lt;/span&gt;build 1.7.0_45-b18&lt;span class="o"&gt;)&lt;/span&gt;
Java HotSpot&lt;span class="o"&gt;(&lt;/span&gt;TM&lt;span class="o"&gt;)&lt;/span&gt; 64-Bit Server VM &lt;span class="o"&gt;(&lt;/span&gt;build 24.45-b08, mixed mode&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Tue, 09 Sep 2014 23:57:30 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2014-09-09:tutorial-dinstallacio-del-jdk.html</guid><category>java</category></item><item><title>Desenvolupament d'aplicacions</title><link>http://apuntstecnics.herokuapp.com/desenvolupament-daplicacions.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Del prefaci del llibre &lt;em&gt;The Pragmatic Programmer: From Journeyman to
Master&lt;/em&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Programming is a craft. At its simplest, it comes down to getting
a computer to do what you want it to do (or what your user wants
it to do). As a programmer, you are part listener, part advisor,
part interpreter, and part dictator. You try to capture elusive
requirements and find a way of expressing them so that a mere
machine can do them justice. You try to document your work so that
others can understand it, and you try to engineer your work so
that others can build on it. What's more, you try to do all this
against the relentless ticking of the project clock. You work
small miracles every day.&lt;/p&gt;
&lt;p&gt;It's a difficult job.&lt;/p&gt;
&lt;p&gt;There are many people offering you help. Tool vendors tout the
miracles their products perform. Methodology gurus promise that
their techniques guarantee results. Everyone claims that their
programming language is the best, and every operating system is
the answer to all conceivable ills.&lt;/p&gt;
&lt;p&gt;Of course, none of this is true. There are no easy answers. There
is no such thing as a best solution, be it a tool, a language, or
an operating system. There can only be systems that are more
appropriate in a particular set of circumstances.&lt;/p&gt;
&lt;p&gt;This is where pragmatism comes in. You shouldn't be wedded to any
particular technology, but have a broad enough background and
experience base to allow you to choose good solutions in
particular situations. Your background stems from an understanding
of the basic principles of computer science, and your experience
comes from a wide range of practical projects. Theory and practice
combine to make you strong.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Els usem, els construïm, els modifiquem, en somiem amb nous.
L'element amb que treballem els desenvolupadors de programari és,
evidentment, el programari. Però què és exactament el programari?
Quines característiques té? Com es construeix?&lt;/p&gt;
&lt;p&gt;En aquest tema es tracta el concepte de &lt;em&gt;programari&lt;/em&gt; des de diferents
perspectives amb l'objectiu d'oferir un context de reflexió sobre el
producte de la nostra professió.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="definicio-de-programari"&gt;
&lt;h2&gt;Definició de programari&lt;/h2&gt;
&lt;div class="section" id="definicio-formal-de-programari"&gt;
&lt;h3&gt;Definició formal de programari&lt;/h3&gt;
&lt;p&gt;Una definició formal de llibre de text diria que el programari es
composa de:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;les instruccions (programes de computadora) que en executar-se
proporcionen les característiques, funcions i grau de rendiment
desitjats;&lt;/li&gt;
&lt;li&gt;les estructures de dades que permeten que els programes manipulin
informació de manera adequada; y&lt;/li&gt;
&lt;li&gt;els documents que descriuen l'operació i ús dels programes.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Però, amb això sabem que és el programari?&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="caracteristiques"&gt;
&lt;h3&gt;Característiques&lt;/h3&gt;
&lt;p&gt;El programari presenta unes característiques molt particulars, en
destacarem aquí:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;es desenvolupa o es construeix, no es manufactura en el sentit
clàssic&lt;/p&gt;
&lt;p&gt;No es treballa amb matèria (física), les despeses que ocasiona estan
en els desenvolupadors i no tant en els materials&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;no es desgasta però es deteriora&lt;/p&gt;
&lt;p&gt;amb el temps, les modificacions que es realitzen per manteniment
introdueixen més i més errors&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;es construeix majoritàriament &amp;quot;a mida&amp;quot;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;començant sempre pràcticament des de zero,&lt;/li&gt;
&lt;li&gt;sense pràcticament fer servir components a diferència de la
tendència general de la industria&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="tipus-de-programari"&gt;
&lt;h3&gt;Tipus de programari&lt;/h3&gt;
&lt;p&gt;El programari sovint es classifica en una o més de les següents
categories:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;programari de sistemes&lt;/p&gt;
&lt;p&gt;S.O., compiladors, i altres utilitats que es fan servir sovint per
altres programes&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;programari d'aplicació&lt;/p&gt;
&lt;p&gt;Programes que resolen una necessitat específica de negoci (ex.
processament de transaccions als punts de venda i el control de
processos de manufactura en temps real com ara &lt;em&gt;just-in-time&lt;/em&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;programari científic i d'enginyeria&lt;/p&gt;
&lt;p&gt;Caracteritzats per algorismes &amp;quot;devoradors de nombres&amp;quot; ex.
analitzadors de dades (astronomia, vulcanologia, tensió
automotriu, biologia molecular...)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;programari incrustat (embedded)&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;resideix a memòria de només lectura dels sistemes&lt;/li&gt;
&lt;li&gt;controlen característiques i funcions concretes per l'usuari i
pel propi sistema ex. control del teclat d'un forn microones,
funcions digitals de l'automòbil (control del combustible, de
frenada...)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;programari de línia de productes&lt;/p&gt;
&lt;p&gt;Ofereixen una capacitat específica valida per un gran nombre
d'usuaris dins d'un sector concret: (ex. productes de control
d'inventaris, comptabilitat...) o molt genèrics (ex. processadors
de texts, full de càlculs, presentació, multimedia, gestió de
bases de dades...)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;aplicacions basades en web (WebApps)&lt;/p&gt;
&lt;p&gt;Des d'un conjunt d'arxius en html fins a aplicacions B2B (Business
to Business) i de comerç electrònic.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;aplicacions per dispositius mòbils (&lt;em&gt;apps&lt;/em&gt;)&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;s'executen en smartphones, tablets i altres dispositius
lleugers.&lt;/li&gt;
&lt;li&gt;connectades, amb localització geogràfica, amb interaccions més
properes a l'usuari (gestos tàctils, moviment i posició del
dispositiu, anàlisi de audio i vídeo, etc.)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;programari d'intel·ligència artificial&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;fa servir algorismes no numèrics (ex. basats en heurístics) per
a la resolució de problemes complexos que encara no poden ser
abordats per l'anàlisi directe. Inclouen aplicacions per a la
robòtica, els sistemes experts, el reconeixement de patrons
(imatge, so), les xarxes neuronals artificials, demostració de
teoremes, jocs d'ordinador i, per descomptat, parts importants
de les &lt;em&gt;apps&lt;/em&gt; més innovadores.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="el-programari-heretat-legacy-software"&gt;
&lt;h3&gt;El programari heretat (legacy software)&lt;/h3&gt;
&lt;p&gt;Existeixen milers de programes en funcionament de totes les tipologies&lt;/p&gt;
&lt;p&gt;Algunes descripcions:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Els sistemes de programari heretats van ser desenvolupats fa
dècades, i han estat modificats de forma contínua per a complir els
requeriments dels canvis als negocis i de les plataformes de còmput.
La proliferació d'aquests sistemes ha causat mals de cap a les grans
organitzacions, que els perceben com a costosos de mantenir i
d'evolució molt arriscada&lt;/li&gt;
&lt;li&gt;Molts sistemes heretats donen suport a les funcions centrals de
negoci i són indispensables per les empreses&lt;/li&gt;
&lt;li&gt;Es caracteritza per la seva longevitat i per ser crítics pels
negocis&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Una característica addicional en general és la poca qualitat d'aquest
programari:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;dissenys impossibles d'entendre,&lt;/li&gt;
&lt;li&gt;codi complicat,&lt;/li&gt;
&lt;li&gt;documentació escassa o inexistent,&lt;/li&gt;
&lt;li&gt;casos de prova i resultats que mai van ser arxivats,&lt;/li&gt;
&lt;li&gt;historial de canvis pobrement mantingut, ...&lt;/li&gt;
&lt;li&gt;no s'adapta 100% a les necessitats&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I, què es pot fer amb tot això?&lt;/p&gt;
&lt;p&gt;La &lt;em&gt;regla d'or&lt;/em&gt; sempre ha estat &amp;quot;mentre funcioni no el toquis!&amp;quot;.&lt;/p&gt;
&lt;p&gt;Amb el temps, però, tot programari en ús requereix canvis perquè:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;cal adaptar-lo a noves tecnologies (ex. a entorns visuals, xarxa...)&lt;/li&gt;
&lt;li&gt;calen nous requeriments de negoci o els requeriments han canviat&lt;/li&gt;
&lt;li&gt;cal que interaccioni amb nous sistemes i sgbds, ...&lt;/li&gt;
&lt;li&gt;quan s'ha de modificar, cal que es realitzi un procés de
reenginyeria per a garantir la seva evolució futura.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Què passa? És què els anteriors desenvolupadors no ho sabien fer?&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;La crua realitat és que nosaltres estem desenvolupant el programari
heretat de demà.&lt;/li&gt;
&lt;li&gt;El programari evoluciona contínuament. El programari nou es
construeix a partir de l'antic, i tots han d'interactuar i cooperar
amb altres.&lt;/li&gt;
&lt;li&gt;El nostre repte, com a desenvolupadors, és trobar mecanismes per
desenvolupar programari de manera que interaccioni adequadament amb
el programari heretat i, a l'hora, sigui més mantenible que aquest.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="desenvolupament-del-programari"&gt;
&lt;h2&gt;Desenvolupament del programari&lt;/h2&gt;
&lt;p&gt;Ara que ja tenim una idea més &amp;quot;enriquida&amp;quot; del què és el programari,
anem a veure com el construïm.&lt;/p&gt;
&lt;div class="section" id="elements-del-desenvolupament"&gt;
&lt;h3&gt;Elements del desenvolupament&lt;/h3&gt;
&lt;p&gt;Per desenvolupar programari necessitem&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;un procés o model de desenvolupament&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;defineix el marc de treball&lt;/li&gt;
&lt;li&gt;persegueix el desenvolupament racional i a temps del programari&lt;/li&gt;
&lt;li&gt;ofereix control de la gestió dels projectes de programari&lt;/li&gt;
&lt;li&gt;estableix el context on s'apliquen els mètodes tècnics, es
generen els productes (models, documents, dades, informes,
formats)&lt;/li&gt;
&lt;li&gt;assegura la qualitat&lt;/li&gt;
&lt;li&gt;ofereix control de la gestió del canvi&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;un conjunt de mètodes&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;són els “com” tècnics de la construcció del programari.&lt;/li&gt;
&lt;li&gt;inclouen tasques com: comunicació, anàlisi de requeriments,
modelat del disseny construcció dels programes, realització de
proves, i  suport&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;un conjunt d'eines&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;proporcionen un suport pel procés i els mètodes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;quan les eines estan integrades entre si, es parla d'una eina CASE
(Computer Aided Software Engineering)&lt;/p&gt;
&lt;p&gt;(&lt;a class="reference external" href="http://ca.wikipedia.org/wiki/Eines_CASE"&gt;http://ca.wikipedia.org/wiki/Eines_CASE&lt;/a&gt;) Les eines CASE (Computer
Aided Software Engineering, Enginyeria del programari Assistida
per Ordinador) són diverses aplicacions informàtiques destinades a
augmentar la productivitat en el desenvolupament de programari
reduint el cost del desenvolupament en termes temps i diners.
Aquestes eines proporcionen ajudes en totes les fases del cicle de
vida de desenvolupament de programari com per exemple el procés de
realitzar un disseny del projecte, calcular costos, implementació
automàtica de codi a partir del disseny, compilació automàtica,
documentació o detecció d'errors entre d'altres.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="model-de-desenvolupament"&gt;
&lt;h3&gt;Model de desenvolupament&lt;/h3&gt;
&lt;p&gt;Els models de desenvolupament consideren les següents activitats
generals:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Activitats generals" src="http://apuntstecnics.herokuapp.com/images/prm001.img001.activitats_generals.png" /&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;comunicació&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;col·laboració i comunicació amb el client&lt;/li&gt;
&lt;li&gt;client (&lt;em&gt;stakeholder&lt;/em&gt; &lt;a class="footnote-reference" href="#stakeholder" id="id1"&gt;[1]&lt;/a&gt;) és qualsevol que tingui
interès en l'èxit del resultat del projecte&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;planificació&lt;/p&gt;
&lt;p&gt;Descriu el pla de treball:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;les tasques tècniques a realitzar&lt;/li&gt;
&lt;li&gt;els riscos probables&lt;/li&gt;
&lt;li&gt;els recursos requerits&lt;/li&gt;
&lt;li&gt;els productes a generar&lt;/li&gt;
&lt;li&gt;la programació de les tasques en el temps associades als recursos&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;modelat&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;elaboració dels models que permeten al desenvolupador i al client
entendre i posar-se d'acord amb els requeriments del programari a
desenvolupar.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;definició del disseny que satisfarà aquests requeriments&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;generalment es composa de dues accions diferenciades: anàlisi i
disseny.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;l'anàlisi&lt;/p&gt;
&lt;p&gt;Inclou investigació, elaboració, negociació, especificació i validació dels requeriments.&lt;/p&gt;
&lt;p&gt;Condueix a un model d'anàlisi o especificació de requeriments.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;el disseny&lt;/p&gt;
&lt;p&gt;Pot ser de dades, arquitectònic, d'interfície i a nivell de components&lt;/p&gt;
&lt;p&gt;Crea un model de disseny o especificació de disseny.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;construcció&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;generació del producte a partir del disseny (codificació)&lt;/li&gt;
&lt;li&gt;realització de les proves&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;desplegat&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;lliurament al client&lt;/li&gt;
&lt;li&gt;avaluació per part del client del resultat&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A banda de les activitats generals, s'inclou un conjunt d'activitats
de suport. Entre d'altres:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;seguiment i suport del projecte&lt;/p&gt;
&lt;p&gt;permet l'avaluació del progrés comparant-lo amb el pla del projecte&lt;/p&gt;
&lt;p&gt;permet prendre mesures per a corregir les possibles desviacions&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;gestió del risc&lt;/p&gt;
&lt;p&gt;avalua els riscos que puguin afectar al desenvolupament o a la qualitat&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;assegurament de la qualitat&lt;/p&gt;
&lt;p&gt;defineix i condueix les activitats requerides per a assegurar la
qualitat del programari&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;revisions tècniques&lt;/p&gt;
&lt;p&gt;avalua els productes que es van desenvolupant per a trobar i
eliminar errors abans que arribin a la següent acció o activitat&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;mesurament&lt;/p&gt;
&lt;p&gt;defineix i recull mesures del procés, el projecte i el producte&lt;/p&gt;
&lt;p&gt;ajuda a garantir la satisfacció dels requeriments&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;gestió de la reutilització&lt;/p&gt;
&lt;p&gt;defineix els criteris per a la reutilització dels productes
(incloent components de programari)&lt;/p&gt;
&lt;p&gt;estableix mecanismes per a la creació de components reusables&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;preparació i producció&lt;/p&gt;
&lt;p&gt;activitats requerides per a crear els productes com ara models, documents, registres, formats i llistes.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Existeixen diferents models de desenvolupament en ús actualment, des
de l'històric &lt;em&gt;model clàssic&lt;/em&gt; o &lt;em&gt;en cascada&lt;/em&gt;, a les diferents versions
de &lt;em&gt;desenvolupament àgil&lt;/em&gt; (ex. eXtreme Programming, Scrum). Tots ells
persegueixen un desenvolupament controlat que satisfaga el client.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-val-si-pero-que-es-el-programari"&gt;
&lt;h3&gt;Exercici 1. Val sí, però... què és el programari?&lt;/h3&gt;
&lt;p&gt;Descriu amb les teves paraules en un paràgraf què és el programari, de
manera que ho pugui entendre una persona que s'estigui plantejant fer
un cicle de desenvolupament de programari.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-el-nostre-producte-es-unic"&gt;
&lt;h3&gt;Exercici 2. El nostre producte és únic?&lt;/h3&gt;
&lt;p&gt;Troba un o més exemples de productes desenvolupats per les persones
que comparteixin el màxim de les tres característiques que esmenta
aquest article.&lt;/p&gt;
&lt;p&gt;Atreveix-te a fer una abstracció de quina mena de productes es
desenvolupen com el programari.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-tipologies-de-programari"&gt;
&lt;h3&gt;Exercici 3. Tipologies de programari&lt;/h3&gt;
&lt;p&gt;Per com a mínim cinc tipologies esmentades en aquest article, proposa
un o més programaris concrets que trobis que poden encabir-hi.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-genesi-del-programari-heretat"&gt;
&lt;h3&gt;Exercici 4. Gènesi del programari heretat&lt;/h3&gt;
&lt;p&gt;Argumenta amb quina activitat o activitat es creen o es produeixen les
característiques menys desitjables del programari heretat.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-els-teus-riscos"&gt;
&lt;h3&gt;Exercici 5. Els teus riscos&lt;/h3&gt;
&lt;p&gt;Descriu un mínim de dos riscos &lt;em&gt;creïbles&lt;/em&gt; que consideris que podrien
afectar-te en la superació satisfactoria d'aquest cicle. Considera
quina seria la severitat i proposa alguna estratègia per eliminar-los,
pal·liar-los o/i &lt;em&gt;sobreviure-hi&lt;/em&gt; en el cas que finalment esdevinguin
una realitat.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-gestio-del-canvi"&gt;
&lt;h3&gt;Exercici 6. Gestió del canvi&lt;/h3&gt;
&lt;p&gt;Els continguts d'aquest article indiquen que els models de
desenvolupament ofereixen &lt;em&gt;control gestió del canvi&lt;/em&gt;. Descriu com es
relaciona aquest concepte amb el de &lt;em&gt;legacy software&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="annotacions"&gt;
&lt;h2&gt;Annotacions&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="stakeholder" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;em&gt;stakeholder&lt;/em&gt; en anglès vol dir persona que subjecta
una estaca. A la nostra professió, aquesta estaca és gran i
afilada...  si no cuides bé als teus clients ja saps on anirà a
parar aquesta estaca... (acudit vist a &amp;quot;Ingeniería del Software, un
enfoque Práctico&amp;quot; 6a ed. del Roger Pressman)&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;!-- XXX TODO add exercises --&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Tue, 09 Sep 2014 22:59:50 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2014-09-09:desenvolupament-daplicacions.html</guid><category>programari</category></item><item><title>Llenguatges de programació</title><link>http://apuntstecnics.herokuapp.com/llenguatges-de-programacio.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document descriu els llenguatges de programació i les
característiques més rellevants a partir de les que són classificats.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="context"&gt;
&lt;h2&gt;Context&lt;/h2&gt;
&lt;p&gt;Comencem repassant alguns conceptes bàsics.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Algorisme&lt;/em&gt;: seqüència de passes orientades a la realització d'una
tasca o la resolució d'un problema.&lt;/p&gt;
&lt;p&gt;Depenent del context, en la vida quotidiana els algorismes els
anomenem de diferents maneres: com receptes (passes per fregir un ou),
instruccions (per posar la rentadora), mètodes de càlcul (passes per
calcular l'arrel quadrada), etc.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Programa&lt;/em&gt;: seqüència d’instruccions orientada a ser executada per un
ordinador sobre un conjunt de dades per donar resposta a un problema
determinat, més la corresponent documentació.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Esquema d'un programa" src="http://apuntstecnics.herokuapp.com/images/prm002.img002.esquema_programa.png" /&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Aplicació&lt;/em&gt;: conjunt de programes relacionats més la corresponent
documentació. Un sinònim raonable és la paraula &lt;em&gt;programari&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Sistema informàtic&lt;/em&gt;: conjunt d'aplicacions, maquinari on
s'executa, operadors, usuaris, polítiques de backup/seguretat/...
que donen resposta a una necessitat complexa.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Instrucció&lt;/em&gt;: comanda que indica a l’ordinador que faci una acció.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Dada&lt;/em&gt;: unitat de tractament d'informació.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Informació&lt;/em&gt;: Dades dins d'un context.&lt;/p&gt;
&lt;p&gt;Les dades són valors &lt;em&gt;freds&lt;/em&gt;. Què deu ser &lt;tt class="docutils literal"&gt;42&lt;/tt&gt;? Les dades es
converteixen en informació quan les col·loquem en un context. Per
exemple, saber que &lt;tt class="docutils literal"&gt;42&lt;/tt&gt; és &lt;tt class="docutils literal"&gt;42 anys&lt;/tt&gt; o bé &lt;tt class="docutils literal"&gt;42 graus centígrads&lt;/tt&gt;
ens permet dir alguna cosa més de la dada. Podem intuir que correspon,
per exemple, a una edat o bé a una temperatura. D'això en podríem dir
el &lt;em&gt;tipus de dada&lt;/em&gt;.  &lt;a class="footnote-reference" href="#respostaunivers" id="id1"&gt;[1]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Les dades poden ser classificades a partir del seu &lt;em&gt;tipus de dades&lt;/em&gt;.
Dels exemples de dades anteriors, podríem dir que són, respectivament,
de tipus nombre enter, però també, de tipus edat o temperatura,
numèric o constant universal.&lt;/p&gt;
&lt;p&gt;Quan la informació s'amplia i la integrem amb altres coneixements,
apareix un significat. Per exemple, si ens diuen que l'aigua està a
&lt;em&gt;42 graus de temperatura&lt;/em&gt; i aquesta aigua és on pretenem banyar-nos,
ens suggerirà quelcom molt diferent a si l'aigua és amb la que ens
volem bullir uns espaguetis.&lt;/p&gt;
&lt;p&gt;Sigui com sigui, cal tenir clar que tant el significat com la
informació és quelcom que posem nosaltres. L'ordinador només entén de
dades. Encara més, ni tant sols entén de tipus de dades, ja que per
ell les dades tenen totes la forma de seqüències de 0 i 1. De fet,
també les instruccions són 0 i 1 per l'ordinador.&lt;/p&gt;
&lt;p&gt;Les dades són emmagatzemades en algun lloc de la memòria
&lt;a class="footnote-reference" href="#emmagatzemainstruccions" id="id2"&gt;[2]&lt;/a&gt;. Per fer-ne referència, és a dir, per usar
la dada, els programes ha de fer servir la posició de memòria on s'ha
deixat la dada. Ho podem imaginar com si haguéssim d'indicar on són
les coses per les seves coordenades geogràfiques. Com que és una mica
dur això d'haver de recordar en quina posició hem deixat cada cosa,
els llenguatges més modernets (la majoria) ofereixen la possibilitat
de donar un nom a aquestes posicions. D'aquest nom en diem sovint
&lt;em&gt;variables&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="definicions"&gt;
&lt;h2&gt;Definicions&lt;/h2&gt;
&lt;p&gt;Entrem ja en el tema principal d'aquest document:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Llenguatge de programació&lt;/em&gt;: conjunt de símbols combinats entre si
segons una sintaxis determinada que permet l’especificació dels
programes.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Esquema dels diferents llenguatges" src="http://apuntstecnics.herokuapp.com/images/prm002.img001.esquema_comunicacio.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Per ser considerat un llenguatge de programació, cal que permeti
computar. Per tant, llenguatges com HTML, CSS o fins i tot SQL
generalment no són considerats com a llenguatges de programació.
Sovint la característica que se li demana a un llenguatge per ser
considerat de programació és que sigui &lt;em&gt;Turin Complet&lt;/em&gt;
&lt;a class="footnote-reference" href="#turingcomplete" id="id3"&gt;[3]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Es comença amb la descripció dels requeriments. El client comunica al
desenvolupador el que vol amb un llenguatge natural que,
desitjablement, comparteixin tots dos.&lt;/p&gt;
&lt;p&gt;El pseudocodi és un llenguatge una mica més formal que el llenguatge
natural però molt més informal que un llenguatge de programació.  El
fem servir els desenvolupadors per aclarir idees abans de posar-les en
pràctica amb els detalls formals d'un llenguatge de programació
&lt;a class="footnote-reference" href="#enganypseudocodi" id="id4"&gt;[4]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Sovint es descriuen els algorismes en pseudocodi per després, si es
consideren viables, traduir-los al llenguatge escollit (com ara
Java, C, assamblador...) &lt;a class="footnote-reference" href="#programamaquina" id="id5"&gt;[5]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;La traducció al llenguatge de programació genera un o més fitxers,
generalment de text. Es diu que aquests fitxers contenen el &lt;em&gt;codi font&lt;/em&gt;
dels programes.&lt;/p&gt;
&lt;p&gt;El codi font no pot ser interpretat directament per l'ordinador que
només entén els 0 i 1 ja esmentats. Cal llavors passar per un o més
processos de traducció que, sortosament, els farà el propi ordinador.&lt;/p&gt;
&lt;p&gt;Els &lt;em&gt;traductors&lt;/em&gt; són programes s'encarreguen de traduir d'un
llenguatge de programació o un llenguatge intermedi a un altre
llenguatge intermedi o bé a codi màquina per a ser executat finalment
per l'ordinador.&lt;/p&gt;
&lt;p&gt;De &lt;em&gt;traductors&lt;/em&gt; en tenim de diferents tipus:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;em&gt;Compilador&lt;/em&gt;: traductor de programes expressats en un llenguatge
de programació a codi màquina o a un llenguatge intermedi.&lt;/p&gt;
&lt;p&gt;La traducció es realitza sencera abans d’executar cap
instrucció. Per tant, el programa ha de ser sintàcticament
correcte al 100% per començar a ser executat.&lt;/p&gt;
&lt;p&gt;Sovint cal una fase d’enllaçament (link) amb altres programes
(ex. biblioteques del sistema operatiu) perquè el codi pugui ser
executat.&lt;/p&gt;
&lt;p&gt;En acabar, es genera un fitxer amb el codi traduït, més els
enllaços corresponents,  que podrà ser executat &lt;em&gt;teòricament&lt;/em&gt;
per sempre més, sense que calgui tornar a compilar.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;em&gt;Intèrpret&lt;/em&gt;: tradueix les instruccions i, sinó hi ha error,
llença la seva execució d'una en una. Per tant, El programa pot
començar a executar-se malgrat hi hagi algun error en
instruccions posteriors.&lt;/p&gt;
&lt;p&gt;Si es vol tornar a executar el programa, caldrà tornar a
interpretar cadascuna de les instruccions que s'hagin
d'executar.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;em&gt;Màquina virtual&lt;/em&gt;: es podria considerar com un cas particular
d'intèrpret que tradueix d'un llenguatge intermedi al codi
màquina corresponent a la plataforma on s'executa la màquina
virtual.&lt;/p&gt;
&lt;p&gt;El codi màquina és altament depenent de la màquina que
l'executa. Per exemple, no podem executar el mateix codi màquina
en diferents màquines (ex. el PC i el mòbil) ni en diferents
sistemes operatius. L'avantatge de les màquines virtuals rau en
el fet que aquestes realitzen una abstracció de la plataforma on
s'executen, de manera que el programa, en codi intermedi, pugui
ser compilat a una màquina i executat en una altra.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="paradigmes"&gt;
&lt;h2&gt;Paradigmes&lt;/h2&gt;
&lt;p&gt;Els llenguatges de programació es poden classificar de moltes maneres
diferents sent una de les més descriptives el paradigma o paradigmes
que implementen.&lt;/p&gt;
&lt;p&gt;Podem entendre el concepte de &lt;em&gt;paradigma de programació&lt;/em&gt; com la manera
o estil de representar i estructurar els elements bàsics que formen
els programes.&lt;/p&gt;
&lt;p&gt;Hi distingim bàsicament dos famílies o branques de paradigmes de
programació:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;el paradigma imperatiu&lt;/li&gt;
&lt;li&gt;el paradigma declaratiu&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;El paradigma imperatiu és el que hem estudiat fins el moment. El
programa especifica a la màquina quines passes (instruccions /
&lt;em&gt;statements&lt;/em&gt;) ha de realitzar per a
aconseguir l'objectiu.&lt;/p&gt;
&lt;p&gt;Per la seva banda, el paradigma declaratiu &lt;em&gt;descriu&lt;/em&gt; la lògica del
programa sense detallar les passes que permeten aconseguir l'objectiu
final . És a dir, descriu el &lt;em&gt;què&lt;/em&gt; es vol aconseguir. Serà el
compilador o intèrpret l'encarregat de traduir aquesta descripció (el
&lt;em&gt;com&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;Entre els paradigmes de programació més populars es troben:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;el paradigma procedural&lt;/li&gt;
&lt;li&gt;el paradigma lògic&lt;/li&gt;
&lt;li&gt;el paradigma funcional&lt;/li&gt;
&lt;li&gt;el paradigma orientat a objectes&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;El paradigma procedural és l'estudiat fins ara al cicle. Es tracta
d'un paradigma imperatiu basat en els paradigmes de programació
estructurada i modular. Alguns exemples són C, Fortan, Pascal, ADA.&lt;/p&gt;
&lt;p&gt;El paradigma lògic és un paradigma declaratiu basat en lògica formal.
Els programes s'estructuren en axiomes (coses que sabem o
afirmacions), regles d'inferència (si A i B llavors C), i preguntes (o
teoremes) que corresponen al resultat a obtenir. Els exemples més
coneguts són Prolog i Datalog.&lt;/p&gt;
&lt;p&gt;El paradigma funcional és un paradigma declaratiu basat en l'avaluació
de funcions matemàtiques que evitant la modificació de l'estat de la
màquina (sense efectes secundaris / &lt;em&gt;side-effects&lt;/em&gt;). Els programes
s'especifiquen amb expressions. Les expressions retornen un valor
depenent únicament dels paràmetres que rebin (independent del nombre
de cops ni de l'estat de la màquina). Darrerament els llenguatges
funcionals estan retornant amb molta força amb la promesa que permeten
codificació de programes més robustos i mantenibles que els
imperatius. Entre els exemples més coneguts hi trobaríem Lisp,
Miranda, Haskell.&lt;/p&gt;
&lt;p&gt;El paradigma orientat a objectes és una extensió del paradigma
procedural en el que les dades i el procediments que les manipulen són
agrupades o &lt;em&gt;encapsulades&lt;/em&gt; en &lt;em&gt;objectes&lt;/em&gt;. És el paradigma
indiscutiblement més &lt;em&gt;de moda&lt;/em&gt; dels darrers anys, fins el punt que la
majoria dels llenguatges de programació més &lt;em&gt;tradicionals&lt;/em&gt; van
disposar d'alguna implementació que donés suport a aquest paradigma.
Exemples populars són C++ (del C) i Delphy (del Pascal). Hi ha
llenguatges orientats a objectes &lt;em&gt;purs&lt;/em&gt; (on tots els elements són
objectes) com ara Eiffel, Smalltalk, Rubi, Scala. Hi ha d'altres no
tan &lt;em&gt;purs&lt;/em&gt;, sigui perquè permeten programació no orientada a objecte
(com C++, Python) o simplement per incloure tipus primitius no
objectes (Java, C#, PHP, JavaScript).&lt;/p&gt;
&lt;p&gt;Darrerament s'estan popularitzant llenguatges multiparadigma. Per
exemple, Python, Ruby i Scala permeten programació orientada a
objectes i funcional.&lt;/p&gt;
&lt;p&gt;A &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Comparison_of_programming_paradigms"&gt;aquest article de la Vikipedia&lt;/a&gt;
disposen d'una taula resum prou descriptiva.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-quin-aspecte-fan"&gt;
&lt;h3&gt;Exercici 1. Quin aspecte fan&lt;/h3&gt;
&lt;p&gt;Pels paradigmes &lt;em&gt;procedural&lt;/em&gt;, &lt;em&gt;lògic&lt;/em&gt;, &lt;em&gt;funcional&lt;/em&gt; i &lt;em&gt;orientat a
objectes&lt;/em&gt; escull al menys un llenguatge que els implementi. Dóna
preferencia a llenguatges que no apareguin a la llista dels exemples
de classe o, com a mínim a llenguatges que no coneguis.&lt;/p&gt;
&lt;p&gt;Ara consulta el lloc web &lt;a class="reference external" href="http://rosettacode.org/"&gt;Rosetta Code&lt;/a&gt; i
troba alguna tasca que et cridi l'atenció. Per exemple, el problema de
les vuit reines o &lt;em&gt;eight queens problem&lt;/em&gt; es troba resolt, en una
versió genèrica, amb múltiples llenguatges a
&lt;a class="reference external" href="http://rosettacode.org/wiki/N-queens_problem"&gt;http://rosettacode.org/wiki/N-queens_problem&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;De la tasca escollida, troba codi que la resolgui en els quatre
llenguatges que has decidit abans amb el C (què és un procedural que
ja deus conèixer).&lt;/p&gt;
&lt;p&gt;Analitza els cinc codis i intenta esbrinar com cada versió arriba a
fer el càlcul a partir dels coneixements de programació de que ja
disposes.  Compara els diferents codis entre si i fes una valoració.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Ampliació&lt;/em&gt;: Si t'engresca aquest exercici, et proposo que miris
algun llenguatge ben diferent dels que hem comentat. Per exemple,
fes-li una ullada als &lt;em&gt;llenguatges de programació esotèrics&lt;/em&gt; com el
Brainfuck o Unlambda. És possible que no els trobis a &lt;em&gt;Rosetta Code&lt;/em&gt;
però de ben segur que et sorprendran. En cas que vulguis fer aquesta
ampliació, simplement agafa alguna versió del &amp;quot;Hola Món&amp;quot; que sovint
t'ofereixen i compara-la amb el llenguatge &lt;em&gt;no esotèric&lt;/em&gt; que vulguis.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-llenguatges-populars"&gt;
&lt;h3&gt;Exercici 2. Llenguatges populars&lt;/h3&gt;
&lt;p&gt;Consulta &lt;a class="reference external" href="http://www.tiobe.com/index.php/content/paperinfo/tpci/index.html"&gt;L'índex de llenguatges de Tiobe&lt;/a&gt;
i contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Descriu amb les teves paraules quines són les condicions que
requereixen a Tiobe per considerar un llenguatge com a llenguatge
de programació.&lt;/li&gt;
&lt;li&gt;Perquè no consideren &lt;em&gt;excel&lt;/em&gt; com un llenguatge de programació?&lt;/li&gt;
&lt;li&gt;Perquè no consideren &lt;em&gt;html&lt;/em&gt; com un llenguatge de programació?&lt;/li&gt;
&lt;li&gt;Llista els llenguatges que apareixen al &amp;quot;Hall of Fame&amp;quot; i que
actualment es troben entre els 10 més populars. Indica quin o quins
paradigmes suporten principalment.&lt;/li&gt;
&lt;li&gt;Tiobe afirma que &lt;em&gt;The index can be used to check whether your
programming skills are still up to date or to make a strategic
decision about what programming language should be adopted when
starting to build a new software system.&lt;/em&gt; Vista la informació i
tenint en comptes els objectius d'aquest cicle, creus que els
llenguatges de programació amb els que treballes/treballaràs durant
aquest cicle són prou actuals?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-la-pila-web"&gt;
&lt;h3&gt;Exercici 3. La pila Web&lt;/h3&gt;
&lt;p&gt;Considera la següent imatge que representa les diferents capes d'una
aplicació Web típica amb algunes de les tecnologies que veurem aquest
curs.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Capes d'una aplicació Web" src="http://apuntstecnics.herokuapp.com/images/prm002.img003.stack_curs.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Quines de les tecnologies que hi apareixen poden ser considerades
llenguatges de programació &lt;em&gt;com cal&lt;/em&gt; i quines no?&lt;/li&gt;
&lt;li&gt;Per les capes que tenen associades algun llenguatge de programació,
troba com a mínim un llenguatge de programació addicional que sigui
raonablement habitual en la capa.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-llenguatge-del-futur"&gt;
&lt;h3&gt;Exercici 4. Llenguatge del futur&lt;/h3&gt;
&lt;p&gt;Amb tot el que hem vist, fem ara d'endevins. Posa't el barret de
bruixeta/bruixot, agafa la bmirar mirar ola de cristall i atreveix-te a
pronosticar quin és el llenguatge de programació més interessant per a
aprendre avui de manera que maximitzi el teu èxit professional en els
propers cinc anys. Justifica la teva aposta.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="anotacions"&gt;
&lt;h2&gt;Anotacions&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="respostaunivers" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;És possible que &lt;tt class="docutils literal"&gt;42&lt;/tt&gt; sigui després de tot més
que una dada. Si tens temps i vols llegir quelcom no tan tècnic, mira
&lt;a class="reference external" href="http://ca.wikipedia.org/wiki/La_Resposta_a_la_Pregunta_Definitiva_sobre_la_Vida,_l%27Univers_i_Tot_Plegat"&gt;aquesta entrada&lt;/a&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="emmagatzemainstruccions" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;De fet, l'ordinador també emmagatzema
les instruccions a memòria de la mateixa manera (amb 0 i 1) Ja
veus, en memòria dades i instruccions són una mateixa cosa.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="turingcomplete" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En cas que t'interessin els detalls, pots
començar amb &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Turing_completeness"&gt;aquest article sobre completesa de Turing&lt;/a&gt; de la
wikipedia.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="enganypseudocodi" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;No us deixeu enganyar. Si una notació en
pseudocodi pot ser executada per un ordinador, no és pseudocodi sinó
codi sense el &lt;em&gt;pseudo&lt;/em&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="programamaquina" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[5]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Queden lluny els temps en que es programava
directament en llenguatge màquina. La salut mental mitja dels
desenvolupadors del món ha millorat (una mica) d'ençà.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Tue, 09 Sep 2014 22:59:40 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2014-09-09:llenguatges-de-programacio.html</guid><category>programari</category></item><item><title>Entorn integrat de desenvolupament</title><link>http://apuntstecnics.herokuapp.com/entorn-integrat-de-desenvolupament.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest article introdueix l'estudiant a un tipus d'aplicació
dissenyades a servir de suport al desenvolupament d'aplicacions
informàtiques. Són conegudes com entorns de desenvolupament integrat o
IDE per les inicials en anglès (&lt;em&gt;Integrated Development Environment&lt;/em&gt;)
&lt;a class="footnote-reference" href="#interactiu" id="id1"&gt;[1]&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="justificacio"&gt;
&lt;h2&gt;Justificació&lt;/h2&gt;
&lt;p&gt;Per a poder desenvolupar un programa (fins i tot el més complex) en un
llenguatge de programació concret, als desenvolupadors ens calen
relativament molt poques eines. Considerem, sinó, el que implicaria la
creació de quelcom de complexitat similar en quasi bé qualsevol altra
disciplina (per exemple, en la construcció d'un vaixell o un edifici)&lt;/p&gt;
&lt;p&gt;D'entre les eines, i bàsicament per a poder realitzar proves, en
comptem el compilador (amb enllaçador si escau) o interpret
corresponent al llenguatge, la plataforma (una màquina virtual o
potser un simulador) on s'ha d'executar el programa, i poc més.&lt;/p&gt;
&lt;p&gt;Hi ha, però, una eina pràcticament inevitable i requerida per la
majoria &lt;a class="footnote-reference" href="#llenguatgesvisuals" id="id2"&gt;[2]&lt;/a&gt; dels desenvolupadors amb independència
de la tecnologia per la que estigui orientat el programa: &lt;em&gt;l'editor de
text&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Això és així perquè el codi font dels programes està format per text
pla a la majoria dels llenguatges de programació.&lt;/p&gt;
&lt;p&gt;Per exemple, amb el &lt;em&gt;bloc de notes&lt;/em&gt; de MS Windows &lt;a class="footnote-reference" href="#paciencia" id="id3"&gt;[3]&lt;/a&gt; podem
codificar qualsevol programa en Java que es pugui realitzar amb les
eines més sofisticades de desenvolupament disponibles.&lt;/p&gt;
&lt;p&gt;Per sort, els editors de text han evolucionat força i poca gent deu
quedar que desenvolupi grans aplicacions amb el bloc de notes.&lt;/p&gt;
&lt;p&gt;Alguns dels afegits als editors de text que ens faciliten la vida als
desenvolupadors són:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;numeració de línies i accés directe a partir d'un número de línia&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;ressaltat sintàctic o &lt;em&gt;syntax highlighting&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;ressaltat de parèntesis (claus, corxets, ...) concordants&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;autocompleció&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;de paraules que ja han aparegut al document, altres documents
oberts o diccionaris&lt;/li&gt;
&lt;li&gt;d'estructures pròpies del llenguatge (ex. tancament de claus, o
autoindentat)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;gestió de l'històric de canvis en el fitxer amb la possibilitat de
revertir a algun estat anterior&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;ressaltat de diferències entre dos fitxers&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;integració amb el compilador&lt;/p&gt;
&lt;p&gt;Alguns permeten col·locar el punter automàticament en la línia on el
compilador troba l'error.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;possibilitats d'ampliar l'editor&lt;/p&gt;
&lt;p&gt;Alguns ofereixen la possibilitat d'afegir (i, fins i tot,
desenvolupar) noves funcionalitats. Per exemple, per a integrar
l'editor amb algun sistema de control de versions.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En el mercat van apareixent editors amb funcionalitats cada cop més
sofisticades amb l'objectiu d'ajudar en el desenvolupament de
programes.&lt;/p&gt;
&lt;p&gt;Com es tracta d'una eina que el desenvolupador fa servir durant moltes
hores, no ha de resultar estrany que alguns desenvolupadors defensin
apassionadament el seu editor com el millor &lt;a class="footnote-reference" href="#viemacs" id="id4"&gt;[4]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Si amb el modest &lt;em&gt;notepad&lt;/em&gt; ja podíem teòricament desenvolupar
qualsevol aplicació i aquests editors més potents ens faciliten encara
més el desenvolupament, què més pot demanar un desenvolupador?&lt;/p&gt;
&lt;p&gt;Per a alguns desenvolupadors, les seves necessitats difícilment queden
cobertes per cap editor. Per ells, l'editor queda com un comandament a
distància de la tele que et permeti canviar de canals i controlar el
volum, però t'obligui a aixecar-te per canviar el contrast.  Per a
aquests desenvolupadors la resposta és &lt;em&gt;entorn de desenvolupament
integrat&lt;/em&gt; o IDE &lt;a class="footnote-reference" href="#comandament" id="id5"&gt;[5]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Les eines bàsiques que inclou un IDE són:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;un editor de text&lt;/li&gt;
&lt;li&gt;un compilador/interpret (o integració amb el compilador/interpret)&lt;/li&gt;
&lt;li&gt;un depurador&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A banda, els IDE més moderns inclouen moltes o totes les millores
esmentades anteriorment, i poden afegir-ne de manera integrada, entre
d'altres:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;eines d'automatització (ex. de generació del paquet a distribuir, o
sincronització amb el servidor de producció)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;gestió de projectes&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;gestió de múltiples desenvolupadors&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;suport per multiples tecnologies i llenguatges simultàniament&lt;/p&gt;
&lt;p&gt;Per exemple, en el desenvolupament d'aplicacions web és molt típic
trobar-se treballant a l'hora amb un llenguatge de servidor com ara
php, un de client (javascript), un o més de representació de la
informació (html, css), etc.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;gestió dels recursos associats (ex. icones dels botons)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;navegació en el codi incloent les biblioteques del llenguatge&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;validador sintàctic&lt;/p&gt;
&lt;p&gt;Incloent el ressaltat d'errors sintàctics en temps d'edició&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;ajuda en la documentació del codi&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;ajuda en l'autocompleció avançada&lt;/p&gt;
&lt;p&gt;No és tant que autocompleti amb les paraules que comencen per la
paraula que estem escrivint, com que ho faci únicament amb els
elements que tenen sentit en el lloc concret on s'està escrivint.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;dipòsits de codi i gestió de versions&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;suport d'automatització de proves&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;eines d'anàlisi del codi, d'optimització i de refacció
(&lt;em&gt;refactoring&lt;/em&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;suport en la construcció d'interfícies gràfiques&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;integració amb suport i consulta sobre l'ús del llenguatge&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;i un llarg etcètera que inclou detalls com l'ajut a la gestió de la
localització (idiomes), gestió de plantilles de codi, modelització
gràfica (UML)...&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="exemples-d-ides"&gt;
&lt;h3&gt;Exemples d'IDEs&lt;/h3&gt;
&lt;p&gt;Podem trobar molts exemples de IDEs a &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Comparison_of_integrated_development_environments"&gt;l'article comparatiu&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Centrant-nos, per exemple, en els IDEs amb suport al llenguatge Java,
trobem, entre d'altres:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://es.wikipedia.org/wiki/Eclipse_%28software%29"&gt;Eclipse&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://es.wikipedia.org/wiki/NetBeans"&gt;Netbeans&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://es.wikipedia.org/wiki/JDeveloper"&gt;JDeveloper&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-installacio-de-l-ide-eclipse"&gt;
&lt;h3&gt;Exercici 1. Instal·lació de l'IDE Eclipse&lt;/h3&gt;
&lt;p&gt;Instal·larem l'entorn de desenvolupament Eclipse.&lt;/p&gt;
&lt;p&gt;Podem seguir la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-de-eclipse.html"&gt;guia d'instal·lació d'eclipse&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Disposem d'una altre &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/us-basic-de-lentorn-de-desenvolupament-integrat-eclipse.html"&gt;guia&lt;/a&gt; que us oferirà una vista
pas a pas de l'ús bàsic de l'IDE Eclipse. Caldrà seguir aquesta guia
per poder realitzar alguns exercicis.&lt;/p&gt;
&lt;p&gt;Finalment farem una prova desenvolupant un petit programa per a
veure algunes de les característiques de l'entorn.&lt;/p&gt;
&lt;p&gt;Es demana:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;captura de pantalla on es pugui veure el codi i l'execució des
de l'Eclipse, del programa HolaMon fet en Java.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;els fitxers generats per Eclipse pel projecte HolaMon dins de
l'espai de treball (ex. ~/dev/eclipse/workspace/HolaMon) Per
exemple, es pot fer servir la comanda:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
~/dev/eclipse/workspace$ tar czvf HolaMon.tar.gz HolaMon/
&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;Important&lt;/strong&gt; Assegura't que la captura de pantalla permeti veure la
data d'execució i el teu nom dins de l'equip en que ho fas. És a dir,
&lt;strong&gt;no&lt;/strong&gt; capturis exclusivament la finestra que conté Eclipse.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-configuracio-d-eclipse-per-desenvolupar-en-c"&gt;
&lt;h3&gt;Exercici 2. Configuració d'Eclipse per desenvolupar en C&lt;/h3&gt;
&lt;p&gt;Un cop realitzada la instal·lació de Eclipse, el configurarem per a
poder treballar amb el llenguatge de programació C. El suport a aquest
llenguatge no ve instal·lat per defecte.  Podem fer servir la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/configuracio-declipse-per-cc.html"&gt;guia
d'instal·lació del plug-in per C&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Es demana:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;captura de pantalla on es pugui veure el codi i l'execució des
de l'Eclipse, del programa HolaCDT.&lt;/li&gt;
&lt;li&gt;els fitxers generats per Eclipse pel projecte HolaCDT dins de
l'espai de treball.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-voste-pot-anar-a-la-preso"&gt;
&lt;h3&gt;Exercici 3. Vostè pot anar a la presó&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa en C amb l'IDE Eclipse que demani a l'usuari
el nom i l'edat. Si és major d'edat, el programa respondrà:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Vostè ja pot anar a la presó!
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I, en tot cas, acabarà acomiadant-se de l'usuari dient:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Vagi amb compte «nom».
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;On «nom» es veurà substituït pel nom especificat per l'usuari.&lt;/p&gt;
&lt;p&gt;Com als exercicis anteriors, es demana:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;captura de pantalla on es pugui veure el codi i l'execució del
programa.&lt;/li&gt;
&lt;li&gt;els fitxers generats per Eclipse pel projecte.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-installacio-de-l-ide-netbeans"&gt;
&lt;h3&gt;Exercici 4. Instal·lació de l'IDE NetBeans&lt;/h3&gt;
&lt;p&gt;Instal·larem l'entorn de desenvolupament NetBeans.
Podem fer servir aquesta &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-de-netbeans.html"&gt;guia d'instal·lació de NetBeans&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Es demana:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;captura de pantalla on es pugui veure el codi i l'execució des
de NetBeans, del programa HolaMon fet en Java.&lt;/li&gt;
&lt;li&gt;els fitxers generats per NetBeans pel projecte HolaMon&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-opcional-configuracio-de-netbeans"&gt;
&lt;h3&gt;Exercici 5. (Opcional) Configuració de NetBeans&lt;/h3&gt;
&lt;p&gt;En aquest exercici se't demana que instal·lis el complement de
NetBeans que et permeti programar-hi en C. En aquesta ocasió et toca a
tu investigar com (no t'hauria de suposar una gran càrrega).&lt;/p&gt;
&lt;p&gt;Un cop realitzat, crea un projecte equivalent al de l'exercici &lt;em&gt;Vostè
pot anar a la presó&lt;/em&gt; i executa'l.&lt;/p&gt;
&lt;p&gt;Lliura la captura de pantalla que demostri que ho has fet.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-opcional-installacio-d-altres-ides"&gt;
&lt;h3&gt;Exercici 6. (Opcional) Instal·lació d'altres IDEs&lt;/h3&gt;
&lt;p&gt;Aquest exercici, tot i que és &lt;strong&gt;opcional&lt;/strong&gt;, es recomana per a
aquells estudiants que tinguin temps disponible.&lt;/p&gt;
&lt;p&gt;Es tracta d'instal·lar altres IDEs. En concret, es proposen:
dos propietaris (un d'ells d'ús gratuït i l'altre amb llicència
gratuïta per estudiants)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://www.oracle.com/technetwork/developer-tools/jdev/overview/index.html"&gt;IDE JDeveloper&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Es tracta d'un IDE propietari però d'ús gratuït.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://www.microsoft.com/visualstudio/eng/products/visual-studio-2010-express"&gt;IDE VisualStudio&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Atenció: aquest IDE, tot i que molt popular, presenta unes
restriccions importants respecte el sistema operatiu en el que
s'executa. A més en el moment d'escriure aquest continguts, no
inclou Java entre els llenguatges acceptats.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Es demana el lliurament de captures de pantalla que mostrin l'execució
d'un programa tipus Hola Món dins de l'entorn o entorns escollits.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="annotacions"&gt;
&lt;h2&gt;Annotacions&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="interactiu" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Trobaràs en alguns llocs que la &lt;em&gt;I&lt;/em&gt; de IDE
s'espandeix a &lt;em&gt;Interactiu&lt;/em&gt; en comptes d'&lt;em&gt;Integrat&lt;/em&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="llenguatgesvisuals" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;Hi ha la possibilitat de realitzar programes
de manera completament visual en algunes tecnologies (mireu per
exemple &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Visual_programming_language"&gt;VPL&lt;/a&gt;.&lt;/p&gt;
&lt;p class="last"&gt;Cercant la simplicitat d'aquest article, considerem que l'eina
necessaria per la codificació del programa estaria dins de la
mateixa categoria que el compilador, i ignorarem aquestes
tecnologies no tan extenses.&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="paciencia" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si decideixes programar amb el bloc de notes de MS
Windows (especialment en la seva versió clàssica) probablement et
caldrà a més, tenir molta paciència i un cert sentit masoquista. En
tot cas, contra gustos...&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="viemacs" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Pot resultar fascinant seguir les baralles entre els
editors &lt;em&gt;vi&lt;/em&gt; i &lt;em&gt;emacs&lt;/em&gt;. Mireu per exemple l'article &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Editor_war"&gt;Editor war&lt;/a&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="comandament" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[5]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;El concepte d'&lt;em&gt;aixecar-se&lt;/em&gt; en aquesta metèfora
representa anar a altres aplicacions diferents de l'editor, sovint
la consola. Per a molts desenvolupadors això no representa cap
dificultat. Ans al contrari, anar a una consola amb una bona
&lt;em&gt;shell&lt;/em&gt; ofereix una flexibilitat que difícilment podrà igualar el
millor entorn integrat.  Així, trobaràs que encara hi ha
desenvolupadors que treballen molt eficientment amb un editor com
ara Vim / Emacs i una o més consoles Bash entre els que es mouen
ràpidament amb alguna combinació de tecles (mai el ratolí!).&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Tue, 09 Sep 2014 22:59:30 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2014-09-09:entorn-integrat-de-desenvolupament.html</guid><category>programari</category></item><item><title>Tutorial d'instal·lació de Eclipse</title><link>http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-de-eclipse.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document descriu una manera d'instal·lar l'IDE Eclipse a un
sistema Ubuntu. Per les característiques particulars de l'aplicació
Eclipse, aquestes instruccions haurien de funcionar sense gaires
canvis a altres sistemes operatius.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="installacio"&gt;
&lt;h2&gt;Instal·lació&lt;/h2&gt;
&lt;p&gt;Per la realització d'una instal·lació de Eclipse seguirem les següents
passes des d'una consola:&lt;/p&gt;
&lt;ol class="arabic" start="0"&gt;
&lt;li&gt;&lt;p class="first"&gt;Abans d'instal·lar Eclipse&lt;/p&gt;
&lt;p&gt;Donat que Eclipse és una aplicació java, caldrà disposar d'una
màquina virtual (JVM) al nostre sistema per a poder-la executar.&lt;/p&gt;
&lt;p&gt;Tot i que virtualment podríem fer servir altres implementacions
(ex. OpenJDK o gcj), seguirem el &lt;a class="reference external" href="http://www.eclipse.org/forums/index.php/t/161212/"&gt;consell&lt;/a&gt; del
fòrum d'Eclipse i farem servir el JDK d'Oracle.&lt;/p&gt;
&lt;p&gt;Per altra banda, instal·larem la versió 7 de Java, la darrera
disponible en el moment en que es va elaborar aquesta guia (juliol
2012)&lt;/p&gt;
&lt;p&gt;Com que la llicència del jdk d'Oracle (abans Sun) va canviant el
grau d'&lt;em&gt;obertura&lt;/em&gt; des de la perspectiva d'algunes distribucions
(com ara Ubuntu), és possible (de fet probable) que no disposem de
cap versió instal·lada o que aquesta no sigui la desitjada.&lt;/p&gt;
&lt;p&gt;Per a assegurar-nos que el nostre sistema disposa de la versió del
JDK que volem, podem fer quelcom similar a:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ sudo update-alternatives --config java
&lt;/pre&gt;
&lt;p&gt;Si ens respon quelcom similar a:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
update-alternatives: error: no alternatives for java.
&lt;/pre&gt;
&lt;p&gt;o bé quelcom que no inclou la versió desitjada com ara:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Hi ha 2 possibilitats per a l'alternativa java (que proveeix /usr/bin/java).

  Selecció    Camí                                          Prioritat  Estat
------------------------------------------------------------
* 0            /usr/lib/jvm/java-6-openjdk-i386/jre/bin/java   1061      mode automàtic
  1            /usr/lib/jvm/java-6-sun/jre/bin/java            63        mode manual
&lt;/pre&gt;
&lt;p&gt;caldrà instal·lar java. Trobareu una guia breu per Ubuntu &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-del-jdk.html"&gt;aquí&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Obtenció de l'Eclipse&lt;/p&gt;
&lt;p&gt;Si l'ús que hem de fer d'aquest IDE és molt introductori, podríem
fer servir la versió d'Eclipse que es troba als repositoris
d'Ubuntu, malgrat queda molt endarrerida respecte la darrera versió
que es troba al lloc oficial del IDE:
&lt;a class="reference external" href="http://www.eclipse.org/downloads/"&gt;http://www.eclipse.org/downloads/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;En el moment en que es va escriure aquesta guia, la
darrera versió disponible era la 4.2, mentre que la dels
repositoris anaven encara per la 3.7.&lt;/p&gt;
&lt;p&gt;Aquesta guia proposa la instal·lació de la darrera versió
disponible per desenvolupadors de java &amp;quot;Eclipse IDE for Java
Developers&amp;quot;.&lt;/p&gt;
&lt;p&gt;D'aquesta manera ens trobarem un fitxer anomenat quelcom similar a:
./eclipse-java-juno-linux-gtk.tar.gz&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Instal·lació de l'IDE&lt;/p&gt;
&lt;p&gt;L'aplicació Eclipse és una mica particular en relació a d'altres,
en el sentit que la seva instal·lació consisteix en simplement
descomprimir el paquet i executar l'IDE.&lt;/p&gt;
&lt;p&gt;Així, escollirem el directori on volem que quedi instal·lada
l'aplicació. Per exemple, &lt;tt class="docutils literal"&gt;~/soft&lt;/tt&gt;. Així, podem fer servir
quelcom similar a:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ mkdir -p ~/soft
$ mv eclipse-java-juno-linux-gtk.tar.gz ~/soft
$ cd ~/soft
$ tar xzvf eclipse-java-juno-linux-gtk.tar.gz
&lt;/pre&gt;
&lt;p&gt;Amb això, ja podem executar eclipse&lt;/p&gt;
&lt;pre class="literal-block"&gt;
~/soft/ $ eclipse/eclipse
&lt;/pre&gt;
&lt;p&gt;En cas que aparegui un missatge d'error com ara:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Missatge d'error amb la màquina virtual de Java" src="http://apuntstecnics.herokuapp.com/images/eclipse001.error_jdk.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Vol dir que hi ha algun problema amb la màquina virtual de Java.
En aquest cas, intentem, si més no, reinstal·lar-la.&lt;/p&gt;
&lt;p&gt;Per comoditat, es pot crear algun llançador. Per exemple, per poder
executar-ho des de línia de comandes, pot ser còmode:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
    $ cd ~
    $ mkdir -p bin
    $ cd bin
    $ cat &amp;gt; eclipse.sh &amp;lt;&amp;lt; EOF
    &amp;gt; #! /bin/sh
    &amp;gt; ~/soft/eclipse/eclipse &amp;amp;
    &amp;gt; EOF
    $ chmod u+x eclipse.sh

i, des de qualsevol lloc ::

    $ eclipse.sh
&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Configuració del directori de treball&lt;/p&gt;
&lt;p&gt;En arrancar, Eclipse ens demanarà un lloc on deixar els projectes
Eclipse amb que treballem (&lt;em&gt;workspace&lt;/em&gt;). Escollirem un directori
que ens sigui còmode.&lt;/p&gt;
&lt;p&gt;Serà aquí on podrem trobar els fitxers que es generin amb els
nostres projectes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Una prova ràpida&lt;/p&gt;
&lt;p&gt;Per defecte, Eclipse s'instal·la per construir aplicacions en
java.&lt;/p&gt;
&lt;p&gt;Aprofitant que no hem de fer res especial, farem una primera prova
de l'entorn creant un &amp;quot;original&amp;quot; programa de salutació al món.&lt;/p&gt;
&lt;p&gt;Anirem a File -&amp;gt; New -&amp;gt; Java Project, definirem el nom del projecte
(ex. HolaMon) i deixarem la resta d'opcions per defecte. Quan ja ho
tenim tot, premem &lt;em&gt;Finish&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Amb això, Eclipse ens ha creat el projecte HolaMon amb diferents
carpetes i recursos.&lt;/p&gt;
&lt;p&gt;Anem ara a File -&amp;gt; New -&amp;gt; Class, i al quadre de text &lt;tt class="docutils literal"&gt;Name:&lt;/tt&gt; hi
introduïm &amp;quot;HolaMon&amp;quot;. Marquem el quadre de selecció &lt;tt class="docutils literal"&gt;public static
void main(String[] args)&lt;/tt&gt; de la secció &lt;tt class="docutils literal"&gt;Which method stubs would
you like to create?&lt;/tt&gt; i, deixant la resta d'opcions amb els valors
per defecte premem &lt;em&gt;Finish&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;En aquest moment ens apareixerà una finestra amb un aspecte similar
al següent:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Aspecte de l'entorn gràfic d'Eclipse" src="http://apuntstecnics.herokuapp.com/images/eclipse001.img001.holamon.png" /&gt;
&lt;/div&gt;
&lt;p&gt;A la subfinestra més ampla (a la dreta), hi trobem un editor amb el
codi del nostre projecte. Eclipse ens ha creat un primer esquema de
la classe HolaMon que hem demanat crear.&lt;/p&gt;
&lt;p&gt;Ara, allà on posa &lt;tt class="docutils literal"&gt;// TODO &lt;span class="pre"&gt;Auto-generated&lt;/span&gt; method stub&lt;/tt&gt; escriurem
&lt;tt class="docutils literal"&gt;Sys&lt;/tt&gt;. A continuació, farem &amp;lt;ctrl&amp;gt;-&amp;lt;espai&amp;gt; i podrem veure que
Eclipse ens ofereix una llista de suggeriments per completar la
paraula que estem escrivint (navegable amb el cursor) juntament amb
documentació corresponent a la proposta de compleció
sel·leccionada. Farem &amp;lt;enter&amp;gt; per completar.&lt;/p&gt;
&lt;p&gt;Continuem escrivint un punt &lt;tt class="docutils literal"&gt;.&lt;/tt&gt; i observem que ens apareix una
llista de possibilitats per a continuar que podem navegar amb el
cursor. Si escrivim ara una lletra (ex. &lt;tt class="docutils literal"&gt;o&lt;/tt&gt;) reduirà les
propostes a aquelles que comencen amb &amp;quot;o&amp;quot;. Escollirem l'única opció
disponible (&lt;tt class="docutils literal"&gt;out&lt;/tt&gt;) i tornarem a escriure un punt. Ens apareix una
nova llista amb la primera opció &lt;tt class="docutils literal"&gt;println(String x)&lt;/tt&gt;. Justament
la funció que ens interessa. L'escollim amb &amp;lt;enter&amp;gt; i ens
autocompleta a la funció &lt;tt class="docutils literal"&gt;System.out.println()&lt;/tt&gt; deixant-nos el
cursor dins dels parèntesis amb el nom d'una variable &lt;tt class="docutils literal"&gt;x&lt;/tt&gt; i
informant-nos del possible tipus de dades que hi podem ficar dins.
Substituirem la &lt;tt class="docutils literal"&gt;x&lt;/tt&gt; per la cadena &lt;tt class="docutils literal"&gt;&amp;quot;Hola &lt;span class="pre"&gt;Món!\n&amp;quot;&lt;/span&gt;&lt;/tt&gt; i farem
&amp;lt;enter&amp;gt;. Eclipse col·loca el cursor al final de la sentència.
Acabem amb un punt i coma la línia.&lt;/p&gt;
&lt;p&gt;Si tot està correcte (Eclipse ens avisaria en cas contrari) podem
ja executar el nostre programa. Run -&amp;gt; Run. Eclipse ens demana si
volem guardar els canvis (ens permet marcar autoguardar si volem).
En fer &lt;em&gt;OK&lt;/em&gt;  ens apareix una nova subfinestra a la part inferior on
es veu el resultat de l'execució del programa. Eclipse s'ha fet
càrrec de compilar i executar el nostre codi.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Ja tenim disponible l'Eclipse.&lt;/p&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Tue, 09 Sep 2014 22:59:30 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2014-09-09:tutorial-dinstallacio-de-eclipse.html</guid></item><item><title>Configuració d'Eclipse per C/C++</title><link>http://apuntstecnics.herokuapp.com/configuracio-declipse-per-cc.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document descriu la preparació de Eclipse com a IDE de
desenvolupament en C/C++ al sistema operatiu Ubuntu 12.04.
Probablement les passes seran similars a altres sistemes operatius,
distribucions i versions. En tot cas, pots fer una ullada a la
&lt;a class="reference external" href="href=&amp;quot;http://wiki.eclipse.org/CDT/User/FAQ&amp;quot;"&gt;documentació oficial del projecte&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Abans de començar, comprova que no disposes ja de la instal·lació del
plugin CDT. Ho pots fer, per exemple, intentant crear un nou projecte
C++ a partir de &lt;tt class="docutils literal"&gt;File &lt;span class="pre"&gt;-&amp;gt;&lt;/span&gt; New &lt;span class="pre"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="pre"&gt;Project...&lt;/span&gt;&lt;/tt&gt;. Si al quadre que
apareix hi trobem una secció anomenada &lt;tt class="docutils literal"&gt;C/C++&lt;/tt&gt; i hi podem crear un
projecte C, podem ignorar la resta d'aquesta guia perquè ja el tenim
instal·lat!&lt;/p&gt;
&lt;p&gt;Instal·larem el plug-in &lt;a class="reference external" href="href=&amp;quot;http://www.eclipse.org/cdt/&amp;quot;"&gt;CDT&lt;/a&gt;
(C/C++ Development Tooling)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="installacio"&gt;
&lt;h2&gt;Instal·lació&lt;/h2&gt;
&lt;p&gt;Realitzarem la instal·lació tot seguint les següents passes.&lt;/p&gt;
&lt;div class="section" id="el-compilador"&gt;
&lt;h3&gt;1. El compilador&lt;/h3&gt;
&lt;p&gt;Donat que el projecte CDT no ofereix el compilador de C/C++,
haurem d'instal·lar un nosaltres. A l'Ubuntu el més probable és que
el tinguem ja. Ho podem comprovar amb:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ g++ --version
g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
$ make --version
GNU Make 3.81
Copyright (C) 2006  Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.

This program built for i686-pc-linux-gnu
&lt;/pre&gt;
&lt;p&gt;En cas d'error amb la primera comanda, caldrà instal·lar el
compilador. En cas d'error amb &lt;tt class="docutils literal"&gt;make&lt;/tt&gt;, comprovarem si &lt;tt class="docutils literal"&gt;gmake&lt;/tt&gt;
sí està disponible. Altrament, haurem d'instal·lar-ho.  Donat que
aquestes instruccions van més enllà dels objectius d'aquesta petita
guia, caldrà cercar les instruccions corresponents pel sistema
operatiu objectiu.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="installem-el-plug-in"&gt;
&lt;h3&gt;2. Instal·lem el plug-in&lt;/h3&gt;
&lt;p&gt;Naveguem pels menus &lt;tt class="docutils literal"&gt;Help &lt;span class="pre"&gt;-&amp;gt;&lt;/span&gt; Install New &lt;span class="pre"&gt;Software...&lt;/span&gt;&lt;/tt&gt; i al quadre de
diàleg que emergeix premem el botó &lt;tt class="docutils literal"&gt;add&lt;/tt&gt;. Ens apareix un nou quadre
de diàleg amb els camps de text &lt;tt class="docutils literal"&gt;Name&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;Location&lt;/tt&gt;. Al primer li
posarem &lt;strong&gt;CDT&lt;/strong&gt; i al segon
&lt;strong&gt;http://download.eclipse.org/tools/cdt/releases/juno&lt;/strong&gt;&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Instal·lació del pluguin CDT" src="http://apuntstecnics.herokuapp.com/images/eclipse002.add_CDT.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Potser li costarà una estona, però si tot va bé acabarà mostrant
dues entrades anomenades &lt;tt class="docutils literal"&gt;CDT Main Features&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;CDT Optional
Features&lt;/tt&gt;. Desplegarem la primera (fent clic sobre el triangle que
apareix abans de cada entrada) i escollirem la primera de les
subentrades que hi apareixen: &lt;strong&gt;C/C++ Development Tools&lt;/strong&gt;.
&lt;strong&gt;Important&lt;/strong&gt;: no és adequat seleccionar-ho tot! Hi ha dependències
que potser faran que no ens funcioni l'aplicació.&lt;/p&gt;
&lt;p&gt;Farem &lt;tt class="docutils literal"&gt;Next&lt;/tt&gt; dos cops i, si estem d'acord amb els termes de la
llicència d'ús &lt;a class="footnote-reference" href="#noaggree" id="id1"&gt;[1]&lt;/a&gt; , sel·leccionem l'opció &lt;strong&gt;I accept the
terms of license aggreement&lt;/strong&gt;, premem &lt;tt class="docutils literal"&gt;Finish&lt;/tt&gt; i esperem una
estoneta.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Acceptació dels terminis i llicència d'Eclipse" src="http://apuntstecnics.herokuapp.com/images/eclipse002.aggreement_CDT.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Finalment haurem de reiniciar Eclipse i, en rearrancar, ja tindrem
el plug-in disponible.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="provem-la-installacio"&gt;
&lt;h3&gt;3. Provem la instal·lació&lt;/h3&gt;
&lt;p&gt;Naveguem &lt;tt class="docutils literal"&gt;File &lt;span class="pre"&gt;-&amp;gt;&lt;/span&gt; New &lt;span class="pre"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="pre"&gt;Project...&lt;/span&gt;&lt;/tt&gt; i hi escollim &lt;cite&gt;C Project`&lt;/cite&gt;.&lt;/p&gt;
&lt;p&gt;Anomenem el projecte quelcom similar a &amp;quot;HolaCDT&amp;quot; a la localització per
defecte i de tipus &lt;strong&gt;Empty Project&lt;/strong&gt; i fem &lt;tt class="docutils literal"&gt;següent&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Al quadre de diàleg &lt;tt class="docutils literal"&gt;Select Configurations&lt;/tt&gt; premem el botó
&lt;tt class="docutils literal"&gt;Advanced &lt;span class="pre"&gt;settings...&lt;/span&gt;&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Al quadre de diàleg &lt;tt class="docutils literal"&gt;Properties for HolaCDT&lt;/tt&gt; naveguem per l'arbre
d'opcions &lt;tt class="docutils literal"&gt;C/C++ General&lt;/tt&gt;-&amp;gt; &lt;tt class="docutils literal"&gt;Code Analysis&lt;/tt&gt; -&amp;gt; &lt;tt class="docutils literal"&gt;Launching&lt;/tt&gt; i
marquem l'opció &lt;tt class="docutils literal"&gt;Run with build&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Si ens demana que si volem obrir la perspectiva associada a CDT,
direm que Sí.&lt;/p&gt;
&lt;p&gt;Seleccionem ara crear un nou fitxer font (&lt;tt class="docutils literal"&gt;File&lt;/tt&gt; -&amp;gt; &lt;tt class="docutils literal"&gt;New&lt;/tt&gt; -&amp;gt; &lt;tt class="docutils literal"&gt;Source
File&lt;/tt&gt;), li posem com a nom holacdt.c i finalitzem l'ajudant amb el
botó &lt;tt class="docutils literal"&gt;Finish&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Escrivim ara el codi del nostre programa després de la capçalera
que ens han generat automàticament.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include&amp;lt;stdio.h&amp;gt;&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hola CDT!&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finalment executem el programa amb &lt;tt class="docutils literal"&gt;Run &lt;span class="pre"&gt;-&amp;gt;&lt;/span&gt; Run&lt;/tt&gt;. Ens demanarà si
volem guardar els canvis. Un cop guardats, compilarà i enllaçarà el
codi per nosaltres, i finalment ens mostrarà el resultat a la vista
anomenada &lt;tt class="docutils literal"&gt;Console&lt;/tt&gt; que probablement apareixerà sota l'àrea de
l'editor. &lt;a class="footnote-reference" href="#launchfailed" id="id2"&gt;[2]&lt;/a&gt;&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Resultat d'execució de *holacdt.c*" src="http://apuntstecnics.herokuapp.com/images/eclipse002.img003.holacdt_final.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="anotacions"&gt;
&lt;h2&gt;Anotacions&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="noaggree" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si no estem d'acord amb els termes de la llicència,
tot i estant en el nostre dret, tenim un problema per continuar
seguint aquesta guia.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="launchfailed" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En cas que aparegui un missatge d'error indicant
&lt;tt class="docutils literal"&gt;Launch failed.&amp;nbsp; Binary not found&lt;/tt&gt; és que ens hem deixat de
configurar l'opció de &lt;tt class="docutils literal"&gt;Run with build&lt;/tt&gt; a les propietats del
projecte. Encara podem arreglar-ho sense haver de començar. Només
ens cal indicar-li a Eclipse quin és el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que ha
d'executar. Per fer-ho, guardarem el projecte (&lt;tt class="docutils literal"&gt;File&lt;/tt&gt; -&amp;gt; &lt;tt class="docutils literal"&gt;Save''
o &lt;span class="pre"&gt;``ctrl-s&lt;/span&gt;&lt;/tt&gt;), construïm el projecte amb (&lt;tt class="docutils literal"&gt;Project&lt;/tt&gt; -&amp;gt; &lt;tt class="docutils literal"&gt;Build
all&lt;/tt&gt; o &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;ctrl-b&lt;/span&gt;&lt;/tt&gt;) i creem la configuració amb &lt;tt class="docutils literal"&gt;Run&lt;/tt&gt; -&amp;gt; &lt;tt class="docutils literal"&gt;Run
&lt;span class="pre"&gt;configurations...&lt;/span&gt;&lt;/tt&gt;) Al quadre de diàleg que ens apareix,
seleccionarem &lt;tt class="docutils literal"&gt;C/C++ Application&lt;/tt&gt; i si no ens apareix dins el
nostre projecte &lt;tt class="docutils literal"&gt;HolaCDT Debug&lt;/tt&gt; premem el botó de &lt;tt class="docutils literal"&gt;New&lt;/tt&gt;. Ara,
en el nostre projecte premem &lt;tt class="docutils literal"&gt;Search &lt;span class="pre"&gt;Project...&lt;/span&gt;&lt;/tt&gt; i escollim
l'executable &lt;tt class="docutils literal"&gt;holaCDT&lt;/tt&gt;. Acceptem i premem &lt;tt class="docutils literal"&gt;Run&lt;/tt&gt; i tot plegat
hauria de funcionar ara.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Tue, 09 Sep 2014 22:58:30 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2014-09-09:configuracio-declipse-per-cc.html</guid></item><item><title>Glossari de conceptes d'Eclipse</title><link>http://apuntstecnics.herokuapp.com/glossari-de-conceptes-declipse.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Tal i com ens indiquen a la &lt;a class="reference external" href="http://www.eclipse.org/home/newcomers.php"&gt;introducció de benvinguda&lt;/a&gt;,&lt;/p&gt;
&lt;blockquote&gt;
eclipse és una comunitat orientada a la construcció d'una
plataforma de desenvolupament extensible i altres elements de
suport per tot el cicle de vida del programari.&lt;/blockquote&gt;
&lt;p&gt;Amb més de 200 projectes, Eclipse és molt més que un IDE de
desenvolupament en Java.&lt;/p&gt;
&lt;p&gt;L'element d'Eclipse amb el que interaccionarem és el &lt;em&gt;Workbench&lt;/em&gt; o
&lt;em&gt;taula de treball&lt;/em&gt;. De fet, la majoria de les vegades, quan estem
parlant d'Eclipse en realitat ens referim al Workbench.&lt;/p&gt;
&lt;p&gt;Aquest document conté un petit glossari dels conceptes bàsics que
apareixen en aquest Workbench.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="glossari"&gt;
&lt;h2&gt;Glossari&lt;/h2&gt;
&lt;p&gt;Workspace&lt;/p&gt;
&lt;blockquote&gt;
El workspace o &lt;em&gt;espai de treball&lt;/em&gt; és la carpeta on es guarda tot
el que treballem amb l'Eclipse.&lt;/blockquote&gt;
&lt;p&gt;Workbench&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;El Workbench o &lt;em&gt;taula de treball&lt;/em&gt; és una finestra de l'aplicació
Eclipse. Ofereix una o més perspectives.&lt;/p&gt;
&lt;p&gt;Poden haver més d'un workbench simultàniament.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Àrees del Workbench&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Al Workbench ens hi trobem dos tipus d'àrea: els &lt;strong&gt;editors&lt;/strong&gt; i les
&lt;strong&gt;vistes&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Les àrees a Eclipse disposen de barres d'eines independents, poden
ser maximitzades, minimitzades, redimensionades, col·locades a
diferents posicions del Workbench, duplicades, etc.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Editor&lt;/p&gt;
&lt;blockquote&gt;
Un editor és un dels tipus d'àrea del Workbench. Els editors
permeten crear, editar i guardar fitxers.&lt;/blockquote&gt;
&lt;p&gt;Vista&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Una vista és un dels dos tipus d'àrea del Workbench. Les vistes
ofereixen una representació estructurada de la informació
relacionada amb un fitxer, un projecte o d'altres recursos, i
sovint ens permetrà navegar entre aquesta informació i fins i tot
manipular-la.&lt;/p&gt;
&lt;p&gt;Eclipse ofereix una bona varietat de vistes. Per exemple, &lt;em&gt;Project
explorer&lt;/em&gt;, &lt;em&gt;search&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Perspectives&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Eclipse permet definir el conjunt de vistes a mostrar al
Workbench, així com la seva distribució i els elements que
apareixeran a la barra principal d'eines i alguns menús.
Aquestes definicions es fan en forma de &lt;em&gt;perspectives&lt;/em&gt;.
Existeixen perspectives predefinides que poden ser
utilitzades, però també modificades, i es poden definir de
noves.&lt;/p&gt;
&lt;p&gt;Exemples de perspectives predefinides són &lt;em&gt;java&lt;/em&gt; i &lt;em&gt;debug&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;En cas que hàgim modificat una perspectiva i vulguem tornar a
la versió inicial, hi ha disponible una opció de &lt;em&gt;reset&lt;/em&gt; i
tornem a la versió guardada de la perspectiva. Podem també
guardar els nostres canvis a una perspectiva per defecte i
també crear-ne de noves.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Tue, 09 Sep 2014 22:57:30 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2014-09-09:glossari-de-conceptes-declipse.html</guid></item><item><title>Tutorial d'instal·lació de NetBeans</title><link>http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-de-netbeans.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document descriu una manera d'instal·lar l'IDE NetBeans a un
sistema Ubuntu.&lt;/p&gt;
&lt;p&gt;Atenció: La instal·lació a altres sistemes operatius no hauria de
resultar gaire més complexa.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="installacio"&gt;
&lt;h2&gt;Instal·lació&lt;/h2&gt;
&lt;p&gt;Per la realització d'una instal·lació de NetBeans seguirem les
següents passes des d'una consola:&lt;/p&gt;
&lt;ol class="arabic" start="0"&gt;
&lt;li&gt;&lt;p class="first"&gt;Abans d'instal·lar NetBeans&lt;/p&gt;
&lt;p&gt;Donat que NetBeans és una aplicació java, caldrà disposar d'una
màquina virtual (JVM) al nostre sistema per a poder-la instal·lar.&lt;/p&gt;
&lt;p&gt;Si encara no la tens instal·lada, pots seguir el &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-de-eclipse.html"&gt;pas 0 de la guia
d'instal·lació d'Eclipse&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Obtenció del NetBeans&lt;/p&gt;
&lt;p&gt;El NetBeans podria ser instal·lat des del centre de programari que
ofereix l'Ubuntu. Amb tot, en el moment en que s'escrivia aquesta
guia, la versió empaquetada disponible era la 7.0.1, mentre que la
darrera publicada era la 7.2.&lt;/p&gt;
&lt;p&gt;Tot i que, probablement, no trobarem cap diferència entre les dues
versions per un ús no professional de l'IDE, en aquesta guia es
proposa realitzar la instal·lació de la darrera versió.&lt;/p&gt;
&lt;p&gt;Per tant, caldrà anar al lloc oficial de NetBeans (netbeans.org) a
la secció de descàrregues (des de la pàgina principal hi ha un
enllaç directe a la descàrrega de la darrera versió)&lt;/p&gt;
&lt;p&gt;Ara escollim idioma i plataforma (probablement la proposta per
defecte serà la correcta), i escollim la descàrrega de la versió
Java SE (la més bàsica) donat que més endavant podrem afegir altres
complements com indica la pàgina al final.&lt;/p&gt;
&lt;p&gt;Es descarregarà l'instal·lador, un script d'uns 83 Mb.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Instal·lació del NetBeans&lt;/p&gt;
&lt;p&gt;La instal·lació del NetBeans a partir de l'instal·lador descarregat
és molt fàcil. Simplement cal executar l'instal·lador i anar
seguint les instruccions.&lt;/p&gt;
&lt;p&gt;Per executar l'instal·lador podem, per exemple, anar al directori
on l'hem descarregat i fer:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ bash netbeans-7-2-ml-javase-linux.sh
&lt;/pre&gt;
&lt;p&gt;Ens caldrà, a banda d'acceptar una sèrie d'acords de llicències,
definir el directori on instal·lar NetBeans i el JDK. Per exemple,
podem escollir el directori &lt;tt class="docutils literal"&gt;~/soft/netbeans7.2&lt;/tt&gt; i el jdk per
defecte.&lt;/p&gt;
&lt;p&gt;En acabar, continuarà descarregant i finalment instal·larà
l'aplicació.&lt;/p&gt;
&lt;p&gt;Per comoditat, es pot crear algun llançador. Per exemple, per poder
executar-ho des de línia de comandes, pot ser còmode:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ cd ~
$ mkdir -p bin
$ cd bin
$ cat &amp;gt; netbeans.sh &amp;lt;&amp;lt; EOF
&amp;gt; #! /bin/sh
&amp;gt; ~/soft/netbeans-7.2/bin/netbeans &amp;amp;
&amp;gt; EOF
$ chmod u+x netbeans.sh
&lt;/pre&gt;
&lt;p&gt;i, des de qualsevol lloc&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ netbeans.sh
&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Una prova ràpida&lt;/p&gt;
&lt;p&gt;Per defecte, NetBeans s'instal·la per construir aplicacions en
java.&lt;/p&gt;
&lt;p&gt;Aprofitant que no hem de fer res especial, farem una primera prova
de l'entorn creant un &amp;quot;original&amp;quot; programa de salutació al món.&lt;/p&gt;
&lt;p&gt;Anirem a Fitxer -&amp;gt; Nou projecte i escollirem els valors per defecte
(Categoria Java i Projectes Java Aplication) Farem &lt;em&gt;Següent&lt;/em&gt; i
escollirem un nom de projecte (ex. HolaMon) i un lloc on deixar el
projecte (potser l'opció per defecte ja ens està bé) Quan ja ho
tenim tot, premem &lt;em&gt;Finalitzar&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;En aquest moment ens apareixerà una finestra amb un aspecte similar
al següent:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Projecte HolaMon a Netbeans" src="http://apuntstecnics.herokuapp.com/images/netbeans001.holamon.png" /&gt;
&lt;/div&gt;
&lt;p&gt;A la subfinestra més ampla (a la dreta), hi trobem un editor amb el
codi del nostre projecte. NetBeans ens ha autocompletat una sèrie
d'elements per nosaltres. Entre d'altres, ens ha afegit el nostre
nom, i ens ha creat un primer esquema de la classe HolaMon que hem
demanat crear.&lt;/p&gt;
&lt;p&gt;Ara, allà on posa &lt;tt class="docutils literal"&gt;// TODO code application logic here&lt;/tt&gt;
escriurem &lt;tt class="docutils literal"&gt;Sys&lt;/tt&gt;. A continuació, farem &amp;lt;ctrl&amp;gt;-&amp;lt;espai&amp;gt; i podrem
veure que NetBeans ens ofereix, no només com continuar la paraula
que estem escrivint, sinó també documentació corresponent a la
proposta de compleció. Farem &amp;lt;enter&amp;gt; per completar.&lt;/p&gt;
&lt;p&gt;Continuem escrivint un punt &lt;tt class="docutils literal"&gt;.&lt;/tt&gt; i observem que ens apareix una
llista de possibilitats per a continuar que podem navegar amb el
cursor. Escollirem &lt;tt class="docutils literal"&gt;out&lt;/tt&gt; i tornarem a escriure un punt. Ens
apareix una nova llista. Aquest cop, començarem a escriure &lt;tt class="docutils literal"&gt;pri&lt;/tt&gt;
i observarem que ens porta a les paraules que comencen amb &amp;quot;pri&amp;quot;.
Escollirem la primera i ens autocompletarà a la funció
&lt;tt class="docutils literal"&gt;System.out.print()&lt;/tt&gt; deixant-nos el cursor dins dels parèntesis i
informant-nos del possible tipus de dades que hi podem ficar dins.
Escriurem entre cometes &lt;tt class="docutils literal"&gt;&amp;quot;Hola &lt;span class="pre"&gt;Món!\n&amp;quot;&lt;/span&gt;&lt;/tt&gt; i farem &amp;lt;enter&amp;gt;. NetBeans
col·loca el cursor al final de la sentència.&lt;/p&gt;
&lt;p&gt;Si tot està correcte (NetBeans ens avisaria en cas contrari) podem
ja executar el nostre programa. Execució -&amp;gt; Executar projecte
(HolaMon) i ens apareix una nova subfinestra a la part inferior on
es veu el resultat de l'execució del programa. NetBeans s'ha fet
càrrec de guardar, compilar i executar el nostre codi.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Ja tenim disponible el NetBeans!&lt;/p&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Tue, 09 Sep 2014 22:56:30 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2014-09-09:tutorial-dinstallacio-de-netbeans.html</guid></item><item><title>Un primer contacte amb la programació en Java</title><link>http://apuntstecnics.herokuapp.com/un-primer-contacte-amb-la-programacio-en-java.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document té com a objectiu oferir l'estudiant una primera
impressió d'un programa en java tot comparant-lo amb una versió del
programa en un altre llenguatge conegut: el &lt;em&gt;C&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Per a aprofitar al màxim aquesta activitat, caldria tenir alguns
coneixements bàsics del llenguatge C (e.g. directius de
precompil·lació, funcions)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="continguts"&gt;
&lt;h2&gt;Continguts&lt;/h2&gt;
&lt;p&gt;Intenta interpretar les següents versions del mateix programa.&lt;/p&gt;
&lt;div class="section" id="versio-c"&gt;
&lt;h3&gt;Versió C&lt;/h3&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;lt;math.h&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#define PI 3.14159265358979323846264338327&lt;/span&gt;

&lt;span class="cm"&gt;/* calcula l&amp;#39;àrea d&amp;#39;un cercle a partir del seu radi */&lt;/span&gt;
&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calcula_area_cercle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;PI&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;pow&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Càlcul de l&amp;#39;àrea d&amp;#39;un cercle&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Introduïu el radi: &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;scanf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%lg&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;calcula_area_cercle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;L&amp;#39;àrea és %.16lg&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="versio-java"&gt;
&lt;h3&gt;Versió java&lt;/h3&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;CalculaRadi&lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calcula_area&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PI&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pow&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Càlcul de l&amp;#39;àrea d&amp;#39;un cercle&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Introduïu el radi: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;BufferedReader&lt;/span&gt; &lt;span class="n"&gt;reader&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BufferedReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;InputStreamReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;in&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;linia&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;reader&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;readLine&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Double&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseDouble&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;linia&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;  &lt;span class="c1"&gt;// conversió de String a double&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;calcula_area&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot; L&amp;#39;àrea és &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-preguntes-sobre-el-codi"&gt;
&lt;h3&gt;Exercici 1. Preguntes sobre el codi&lt;/h3&gt;
&lt;p&gt;Contesta les següents preguntes sobre el codi que hem vist.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Què fan aquests programes?&lt;/li&gt;
&lt;li&gt;Compara la manera en que cada llenguatge mostra un missatge a
l'usuari.&lt;/li&gt;
&lt;li&gt;Compara la manera en que cada llenguatge obté una resposta de
l'usuari.&lt;/li&gt;
&lt;li&gt;Compara la manera en que cada llenguatge defineix el bloc principal
del programa.&lt;/li&gt;
&lt;li&gt;Compara la manera en que cada llenguatge defineix una funció.&lt;/li&gt;
&lt;li&gt;Perquè la versió en Java no requereix definit la constant &lt;em&gt;PI&lt;/em&gt; i C
sí?&lt;/li&gt;
&lt;li&gt;Quin llenguatge et sembla més fàcil i quin més complex?
Argumenta-ho?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:59:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:un-primer-contacte-amb-la-programacio-en-java.html</guid><category>java</category></item><item><title>Ritual Hola Món!</title><link>http://apuntstecnics.herokuapp.com/ritual-hola-mon.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document guia l'estudiant a l'edició i execució del seu primer
programa en java.&lt;/p&gt;
&lt;p&gt;Per a poder-lo seguir, cal disposar de:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;jdk&lt;/li&gt;
&lt;li&gt;editor de text&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per simplicitat, la guia pressuposa que el sistema operatiu és Ubuntu
12.04, el JDK és el JDK d'Oracle en versió 7, i l'editor el gedit.  És
perfectament possible seguir aquesta guia amb una configuració
diferent. En aquest cas, queda com exercici, l'adaptació de les passes
al sistema escollit.&lt;/p&gt;
&lt;p&gt;En cas que no es disposi del JDK, es pot considerar la guia
d'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/tutorial-dinstallacio-del-jdk.html"&gt;instal·lació del jdk&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="continguts"&gt;
&lt;h2&gt;Continguts&lt;/h2&gt;
&lt;p&gt;Passem a l'acció! Segueix les passes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;obre un terminal (ex. &amp;lt;ctrl&amp;gt;&amp;lt;alt&amp;gt;t)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;crea una carpeta on treballar i situat dins:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;mkdir ~/programacio
&lt;span class="nv"&gt;$ &lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ~/programacio
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;edita un fitxer anomenat &lt;tt class="docutils literal"&gt;HolaMon.java&lt;/tt&gt; (atenció a les
majúscules)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;gedit HolaMon.java &amp;amp;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;escriu al fitxer el següent contingut:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;  * Programa que saluda al món&lt;/span&gt;
&lt;span class="cm"&gt;  */&lt;/span&gt;
 &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;HolaMon&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hola Món!&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;guarda el document (ex. &amp;lt;ctrl&amp;gt;s), torna al terminal i compila escriu:&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;javac HolaMon.java
&lt;/pre&gt;&lt;/div&gt;
&lt;ol class="arabic simple" start="6"&gt;
&lt;li&gt;si apareix algun error, revisa que el text que has introduït al
fitxer contingui &lt;strong&gt;exactament&lt;/strong&gt; l'indicat. Corregeix el que calgui
i torna a compilar fins que no s'indiqui cap error.&lt;/li&gt;
&lt;li&gt;executa el teu programa&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java HolaMon
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Felicitats! Acabes de realitzar el teu primer programa en Java!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Exercici 1&lt;/strong&gt;: Preguntes sobre el ritual&lt;/p&gt;
&lt;p&gt;Contesta les següents preguntes. Potser et caldrà fer proves amb el
codi de les dues versions:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Perquè creus que pot ser tan habitual que es faci un programa
tipus &amp;quot;hola món!&amp;quot; quan entres a un nou llenguatge?&lt;/li&gt;
&lt;li&gt;Què creus que contenir l'argument args? Com es feia això en C? Què
passa si intentem fer un main() sense arguments com podíem fer a
C?&lt;/li&gt;
&lt;li&gt;Llença una hipòtesi de per què pot ser que no calgui fer quelcom
equivalent al &lt;tt class="docutils literal"&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/tt&gt; de C per poder escriure un
missatge per pantalla.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:58:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:ritual-hola-mon.html</guid><category>java</category></item><item><title>Exercicis de repàs de programació</title><link>http://apuntstecnics.herokuapp.com/exercicis-de-repas-de-programacio.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;A continuació trobaràs una llista d'exercicis bàsics. Intenta'ls
realitzar amb qualsevol llenguatge de programació o, fins i tot, amb
pseudocodi.&lt;/p&gt;
&lt;p&gt;El valor d'aquests exercicis està en la correcció a classe. Per tant,
fes un esforç per què les teves respostes siguin llegibles.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-preso"&gt;
&lt;h3&gt;Exercici 1. Presó&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani a la usuària els anys que té amb el
missatge &lt;em&gt;Quants anys té?&lt;/em&gt;. En cas que sigui major d'edat, el programa
li avisarà dient: &lt;em&gt;Atenció: Vosté pot anar a la presó!&lt;/em&gt;. En qualsevol
cas, el programa finalitzarà dient: &lt;em&gt;Aneu amb compte&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Nota: en aquest cas acceptarem qualsevol valor enter com a edat vàlida.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-mesos"&gt;
&lt;h3&gt;Exercici 2. Mesos&lt;/h3&gt;
&lt;p&gt;Desenvolupeu un programa que demani un mes i un any, i escrigui el mes
anterior i el mes següent.&lt;/p&gt;
&lt;p&gt;Els missatges de petició de l'entrada seran, respectivament: &lt;em&gt;Mes?&lt;/em&gt; i &lt;em&gt;Any?&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, si l’usuari introdueix mes &lt;em&gt;9&lt;/em&gt; i any &lt;em&gt;2009&lt;/em&gt;, el resultat
serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
ant: 8/2009
seg: 10/2009
&lt;/pre&gt;
&lt;p&gt;Nota: en aquest cas, suposarem que sempre ens introduiran mesos i anys
correctes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-ordena-3"&gt;
&lt;h3&gt;Exercici 3. Ordena 3&lt;/h3&gt;
&lt;p&gt;Desenvolupeu un programa que demani tres números i
escrigui els tres números ordenats creixentment (de menor a major).&lt;/p&gt;
&lt;p&gt;L'entrada es requerirà amb els missatges &lt;em&gt;Primer?&lt;/em&gt;, &lt;em&gt;Segon?&lt;/em&gt; i
&lt;em&gt;Tercer?&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, si els números introduïts són &lt;em&gt;3&lt;/em&gt;, &lt;em&gt;4&lt;/em&gt; i &lt;em&gt;2&lt;/em&gt;, el resultat
serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
2 3 4
&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-ascensor"&gt;
&lt;h3&gt;Exercici 4. Ascensor&lt;/h3&gt;
&lt;p&gt;Considerem un ascensor d’un edifici amb planta baixa
i dos pisos que tingui els següents botons: ‘pujar 1’, ‘pujar 2’,
‘baixar 1’ i ‘baixar 2’. L’ascensor es comporta, a partir dels botons
esmentats, segons el següent diagrama de transició d’estats:&lt;/p&gt;
&lt;div class="figure align-right"&gt;
&lt;img alt="Diagrama d'estats de l'ascensor" src="http://apuntstecnics.herokuapp.com/images/poo003.img001.ascensor.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Es demana desenvolupar un programa que simuli el funcionament d’aquest
ascensor. El programa demanarà el pis en que es troba i el botó que es
prem, i mostrarà el nou pis. En cas que el botó seleccionat a una
posició determinada de l’ascensor no correspongui amb algun dels
representats amb el diagrama d’estats, l’ascensor mostra un missatge
d'error i es queda al lloc en què estava.&lt;/p&gt;
&lt;p&gt;Els missatges de petició de l'entrada són, respectivament:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Planta? (PB: planta baixa, PP: primer pis, SP: segon pis
Botó? (P1: puja 1, P2: puja 2, B1: baixa 1, B2: baixa 2
&lt;/pre&gt;
&lt;p&gt;Mentre que la sortida s'expressarà simplement indicant la nova planta.&lt;/p&gt;
&lt;p&gt;Per exemple, si l'entrada és: &lt;tt class="docutils literal"&gt;PB&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;P1&lt;/tt&gt;, la sortida serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
PP
&lt;/pre&gt;
&lt;p&gt;En cas d'error, caldrà mostrar els següents missatges:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Planta incorrecta
Botó incorrecte
&lt;/pre&gt;
&lt;p&gt;I cal tenir present que si la planta és incorrecta, ja no se li
demanarà el botó a la usuària.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-historic-d-edats"&gt;
&lt;h3&gt;Exercici 5. Històric d'edats&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani el nom de la usuària, l’edat i l’any
actual. El programa escriurà l’edat que tenia la usuària a cada any des
del seu naixement i s’acomiadarà. Per exemple, si l’entrada és&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Anna
5
2012
&lt;/pre&gt;
&lt;p&gt;El programa escriurà&lt;/p&gt;
&lt;pre class="literal-block"&gt;
El 2007 va nàixer
El 2008 tenia 1 any
El 2009 tenia 2 anys
El 2010 tenia 3 anys
El 2011 tenia 4 anys
Adéu Anna
&lt;/pre&gt;
&lt;p&gt;El programa no li dirà l'edat que té la usuària en l'any actual, donat
que aquesta dada forma part de l'entrada. Per exemple, si la usuària
ha nascut aquest any, simplement s'acomiadarà.&lt;/p&gt;
&lt;p&gt;Les comprovacions necessàries són: que el nom no estigui buit, que
l'edat i l'any actual siguin enters positius, i que l'any actual sigui
un valor més alt que el de l'edat.&lt;/p&gt;
&lt;p&gt;Es demanaran les dades en l'ordre indicat a l'exemple i, en quan es
detecti un error, es deixarà de demanar més dades.&lt;/p&gt;
&lt;p&gt;Els missatges de petició de dades seran:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Nom?
Edat?
Any actual?
&lt;/pre&gt;
&lt;p&gt;Els missatges d'error seran:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Nom incorrecte
Edat no pot ser negativa
Any actual no pot ser negatiu
Edat o any actual incorrectes
&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-l-ascensor-continu"&gt;
&lt;h3&gt;Exercici 6. L'ascensor continu&lt;/h3&gt;
&lt;p&gt;Ara, el nostre ascensor començarà a la planta baixa i anirà demanant
un botó per canviar de pis. Es comportarà pràcticament igual que la
versió anterior. Ara, és clar, ja no li cal demanar a quin pis es troba.&lt;/p&gt;
&lt;p&gt;Un cop canviat de pis (o indicat l'error) demanarà que premi un nou
botó. I així es quedarà fins que la usuària indiqui el botó de sortida.&lt;/p&gt;
&lt;p&gt;Aquesta versió incorpora un missatge molt compacte amb el següent
aspecte:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
[xx] P1: puja 1, P2: puja 2, B1: baixa 1, B2: baixa 2, EX: surt
&lt;/pre&gt;
&lt;p&gt;On xx pot ser PB, PP o SP depenent de la planta on es trobi.&lt;/p&gt;
&lt;p&gt;Quan la usuària demani finalitzar (amb &amp;quot;EX&amp;quot;), es mostrarà el missatge de
comiat &amp;quot;Adéu&amp;quot; i finalitzarà l'execució.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-comptar-a-s"&gt;
&lt;h3&gt;Exercici 7. Comptar 'A's&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani un string (pot ser buit!) i
mostri el nombre de ‘A’ que apareguin al string. És a dir, si
l’entrada és ‘XAXAAXAX’ la sortida serà 4.&lt;/p&gt;
&lt;p&gt;Es demana que es construeixi una funció que, donat el string
d'entrada, retorni el nombre de caràcters 'A'.&lt;/p&gt;
&lt;p&gt;Nota: Per simplicitat, considera només majúscules.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-8-comptar-a-s-consecutives"&gt;
&lt;h3&gt;Exercici 8. Comptar 'A's consecutives&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani un string i
mostri el nombre de ‘A’ consecutives que apareguin a l’string. És considera una 'A' consecutiva si l'anterior també era una 'A'. És a dir, si l’entrada és ‘XXAXXAAXXAAAAX’ la sortida serà 4.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-9-comptar-a-s-no-consecutives"&gt;
&lt;h3&gt;Exercici 9. Comptar 'A's no consecutives&lt;/h3&gt;
&lt;p&gt;Com l'exercici anterior, però aquest cop es mostrarà el nombre de 'A's
no consecutives. És a dir, si l’entrada és ‘XXAXXAAXXAAAX’ la sortida
serà 3.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-triangles"&gt;
&lt;h3&gt;Exercici 10. Triangles&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani un nombre enter positiu i dibuixi
tants triangles com se li indiqui.&lt;/p&gt;
&lt;p&gt;Intenta evitar la repetició de codi fent servir subrutines.&lt;/p&gt;
&lt;p&gt;Per exemple, si l'entrada és &lt;em&gt;2&lt;/em&gt;, el resultat serà&lt;/p&gt;
&lt;pre class="literal-block"&gt;
.........9.........
........898........
.......78987.......
......6789876......
.....567898765.....
....45678987654....
...3456789876543...
..234567898765432..
.12345678987654321.
0123456789876543210
.........9.........
........898........
.......78987.......
......6789876......
.....567898765.....
....45678987654....
...3456789876543...
..234567898765432..
.12345678987654321.
0123456789876543210
&lt;/pre&gt;
&lt;p&gt;El missatge de petició de l'entrada serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Nombre de triangles?
&lt;/pre&gt;
&lt;p&gt;El missatge d'error si l'entrada no és correcta serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
No puc dibuixar n triangles
&lt;/pre&gt;
&lt;p&gt;On &lt;em&gt;n&lt;/em&gt; correspon al nombre introduït.&lt;/p&gt;
&lt;p&gt;Nota: Si tens la temptació de resoldre el problema via
&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;printf(&amp;quot;.........9.........&amp;quot;);&lt;/span&gt;&lt;/tt&gt; planteja't que passarà si se't
requereix que els símbols a escriure s'han de demanar a la usuària.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:57:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:exercicis-de-repas-de-programacio.html</guid></item><item><title>Primers exercicis en Java</title><link>http://apuntstecnics.herokuapp.com/primers-exercicis-en-java.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document ofereix l'estudiant la possibilitat d'accedir a la
sintaxi bàsica del Java, a partir d'una sèrie d'exercicis i pistes.&lt;/p&gt;
&lt;p&gt;Pel seu seguiment es pressuposa coneixements de programació
estructurada i modular, així com de la sintaxi bàsica del llenguatge
C.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;p&gt;Considera les pistes i realitza els exercicis següents.&lt;/p&gt;
&lt;p&gt;No cal preocupar-se, de moment, del control d'errors per entrades de
tipus erroni.  Suposarem que els nostres usuaris sempre introduiran
els valors que els demanem del tipus correcte.&lt;/p&gt;
&lt;div class="section" id="pista-1-el-nom-del-fitxer"&gt;
&lt;h3&gt;Pista 1. El nom del fitxer&lt;/h3&gt;
&lt;p&gt;El fitxer que conté un programa en Java, ha d'anomenar-se exactament
igual que la classe. Així, el programa HolaMon.java tindrà la
següent estructura:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;HolaMon&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="pista-2-el-bloc-principal"&gt;
&lt;h3&gt;Pista 2. El bloc principal&lt;/h3&gt;
&lt;p&gt;la rutina main() del llenguatge C, té la seva equivalència amb&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;NomClasse&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{...}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="pista-3-escriure-per-sortida-estandard"&gt;
&lt;h3&gt;Pista 3. Escriure per sortida estàndard&lt;/h3&gt;
&lt;p&gt;A l'hora d'escriure per sortida estàndard, les següents maneres són
equivalents:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;missatge seguit de salt de línia&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;missatge seguit de salt de línia\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="pista-4-llegir-d-entrada-estandard"&gt;
&lt;h3&gt;Pista 4. Llegir d'entrada estàndard&lt;/h3&gt;
&lt;p&gt;Per llegir d'entrada estàndard, ho tenim una mica més complicat.&lt;/p&gt;
&lt;p&gt;El següent programa mostra com llegir un enter i mostrar el seu
quadrat per sortida estàndard&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;    Descr: programa que demana un número enter i mostra el seu quadrat.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Quadrat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Número: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BufferedReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;InputStreamReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;in&lt;/span&gt;&lt;span class="o"&gt;)).&lt;/span&gt;&lt;span class="na"&gt;readLine&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El valor de &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; al quadrat és &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Atenció: aquest programa no controla el cas que l'usuari escrigui
quelcom que no sigui un número enter. Prova què passa si ho fa.&lt;/p&gt;
&lt;p&gt;Si cada cop que volem llegir quelcom de l'entrada estàndard hem de fer
tot això, a banda de ser quelcom poc eficient tant respecte a l'hora
de codificar com d'executar, ens trobarem amb problemes a l'hora de
redireccionar l'entrada.&lt;/p&gt;
&lt;p&gt;Una manera, raonablement pràctica de resoldre aquest problema pot ser
crear un nou fitxer al directori on tinguem el nostre programa amb els
següents continguts:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;IOUtils&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;BufferedReader&lt;/span&gt; &lt;span class="n"&gt;br&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BufferedReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;InputStreamReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;in&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="c1"&gt;// retorna un enter llegit de entrada estàndard. -1 si error&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;llegeixInt&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;resposta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;resposta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;llegeixStr&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resposta&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="c1"&gt;// retorna un String llegit de entrada estàndard. &amp;quot;&amp;quot; si error.&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;llegeixStr&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;resposta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;resposta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;br&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;readLine&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resposta&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Ara, el nostre programa anterior es pot reescriure simplement amb:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;    Descr: programa que demana un número enter i mostra el seu quadrat.&lt;/span&gt;
&lt;span class="cm"&gt;    Nota: requereix IOUtils al package per defecte.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Quadrat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Número: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;IOUtils&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;llegeixInt&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El valor de &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; al quadrat és &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="pista-5-sintaxi-similar-al-c"&gt;
&lt;h3&gt;Pista 5. Sintaxi similar al C&lt;/h3&gt;
&lt;p&gt;La sintaxi del Java està molt inspirada en el llenguatge C. Per
aquesta raó, si no saps com s'escriu alguna cosa en java, prova amb la
sintaxi de C. Si tot i així no te'n surts, és clar, et caldrà una mica
més de cerca.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-preso"&gt;
&lt;h3&gt;Exercici 1. Presó&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani a l'usuari els anys que té amb el
missatge &lt;em&gt;Quants anys té?&lt;/em&gt;. En cas que sigui major d'edat, el programa
li avisarà dient: &lt;em&gt;Atenció: Vosté pot anar a la presó!&lt;/em&gt;. En qualsevol
cas, el programa finalitzarà dient: &lt;em&gt;Aneu amb compte&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Anomena el fitxer amb el codi font &lt;em&gt;Preso.java&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Nota: en aquest cas acceptarem qualsevol valor enter com a edat vàlida.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-mesos"&gt;
&lt;h3&gt;Exercici 2. Mesos&lt;/h3&gt;
&lt;p&gt;Desenvolupeu un programa que demani un mes i un any, i escrigui el mes
anterior i el mes següent.&lt;/p&gt;
&lt;p&gt;Els missatges de petició de l'entrada seran, respectivament: &lt;em&gt;Mes?&lt;/em&gt; i &lt;em&gt;Any?&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, si l’usuari introdueix mes &lt;em&gt;9&lt;/em&gt; i any &lt;em&gt;2009&lt;/em&gt;, el resultat
serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
ant: 8/2009
seg: 10/2009
&lt;/pre&gt;
&lt;p&gt;Nota: en aquest cas, suposarem que sempre ens introduiran mesos i anys
correctes.&lt;/p&gt;
&lt;p&gt;Anomena el fitxer amb el codi font &lt;em&gt;Mesos.java&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-ordena-3"&gt;
&lt;h3&gt;Exercici 3. Ordena 3&lt;/h3&gt;
&lt;p&gt;Desenvolupeu un programa que demani tres números i
escrigui els tres números ordenats creixentment (de menor a major).&lt;/p&gt;
&lt;p&gt;L'entrada es requerirà amb els missatges &lt;em&gt;Primer?&lt;/em&gt;, &lt;em&gt;Segon?&lt;/em&gt; i
&lt;em&gt;Tercer?&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, si els números introduïts són &lt;em&gt;3&lt;/em&gt;, &lt;em&gt;4&lt;/em&gt; i &lt;em&gt;2&lt;/em&gt;, el resultat
serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
2 3 4
&lt;/pre&gt;
&lt;p&gt;Anomena el fitxer amb el codi font &lt;em&gt;Ordena3.java&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="pista-6-comparacio-de-strings"&gt;
&lt;h3&gt;Pista 6. Comparació de strings&lt;/h3&gt;
&lt;p&gt;El següent programa llegeix un string i el compara amb un altre.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;    Descr: programa que demostra la comparació de strings&lt;/span&gt;
&lt;span class="cm"&gt;    Nota: requereix IOUtils al package per defecte.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ComparaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Nom: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;IOUtils&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;llegeixStr&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Torvalds&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;    &lt;span class="c1"&gt;// compara nom amb &amp;quot;Torvalds&amp;quot;&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hey! you&amp;#39;re Linus, right?&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Nice to meet you &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-4-ascensor"&gt;
&lt;h3&gt;Exercici 4. Ascensor&lt;/h3&gt;
&lt;p&gt;Considerem un ascensor d’un edifici amb planta baixa
i dos pisos que tingui els següents botons: ‘pujar 1’, ‘pujar 2’,
‘baixar 1’ i ‘baixar 2’. L’ascensor es comporta, a partir dels botons
esmentats, segons el següent diagrama de transició d’estats:&lt;/p&gt;
&lt;div class="figure align-right"&gt;
&lt;img alt="Diagrama d'estats de l'ascensor" src="http://apuntstecnics.herokuapp.com/images/poo003.img001.ascensor.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Es demana desenvolupar un programa que simuli el funcionament d’aquest
ascensor. El programa demanarà el pis en que es troba i el botó que es
prem, i mostrarà el nou pis. En cas que el botó seleccionat a una
posició determinada de l’ascensor no correspongui amb algun dels
representats amb el diagrama d’estats, l’ascensor mostra un missatge
d'error i es queda al lloc en què estava.&lt;/p&gt;
&lt;p&gt;Els missatges de petició de l'entrada són, respectivament:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Planta? (PB: planta baixa, PP: primer pis, SP: segon pis
Botó? (P1: puja 1, P2: puja 2, B1: baixa 1, B2: baixa 2
&lt;/pre&gt;
&lt;p&gt;Mentre que la sortida s'expressarà simplement indicant la nova planta.&lt;/p&gt;
&lt;p&gt;Per exemple, si l'entrada és: &lt;tt class="docutils literal"&gt;PB&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;P1&lt;/tt&gt;, la sortida serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
PP
&lt;/pre&gt;
&lt;p&gt;En cas d'error, caldrà mostrar els següents missatges:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Planta incorrecta
Botó incorrecte
&lt;/pre&gt;
&lt;p&gt;I cal tenir present que si la planta és incorrecta, ja no se li
demanarà el botó a l'usuari.&lt;/p&gt;
&lt;p&gt;Anomena el fitxer amb el codi font &lt;em&gt;Ascensor.java&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-historic-d-edats"&gt;
&lt;h3&gt;Exercici 5. Històric d'edats&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani el nom de l’usuari, l’edat i l’any
actual. El programa escriurà l’edat que tenia l’usuari a cada any des
del seu naixement i s’acomiadarà. Per exemple, si l’entrada és&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Anna
5
2012
&lt;/pre&gt;
&lt;p&gt;El programa escriurà&lt;/p&gt;
&lt;pre class="literal-block"&gt;
El 2007 va nàixer
El 2008 tenia 1 any
El 2009 tenia 2 anys
El 2010 tenia 3 anys
El 2011 tenia 4 anys
Adéu Anna
&lt;/pre&gt;
&lt;p&gt;L'aplicació no li dirà l'edat que té l'usuàri en
l'any actual, donat que aquesta dada forma part de l'entrada. Per
exemple, si l'usuària ha nascut aquest any, simplement s'acomiadarà.&lt;/p&gt;
&lt;p&gt;Les comprovacions necessàries són: que el nom no estigui buit, que
l'edat i l'any actual siguin enters positius, i que l'any actual sigui
un valor més alt que el de l'edat.&lt;/p&gt;
&lt;p&gt;Es demanaran les dades en l'ordre indicat a l'exemple i, en quan es
detecti un error, es deixarà de demanar més dades.&lt;/p&gt;
&lt;p&gt;Els missatges de petició de dades seran:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Nom?
Edat?
Any actual?
&lt;/pre&gt;
&lt;p&gt;Els missatges d'error seran:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Nom incorrecte
Edat no pot ser negativa
Any actual no pot ser negatiu
Edat o any actual incorrectes
&lt;/pre&gt;
&lt;p&gt;Anomena el fitxer amb el codi font &lt;em&gt;Edats.java&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="pista-7-mentre"&gt;
&lt;h3&gt;Pista 7. Mentre&lt;/h3&gt;
&lt;p&gt;Considera el següent codi&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;    Descr: programa que va demanant paraules fins que l&amp;#39;indiquen &amp;quot;prou&amp;quot; i les&lt;/span&gt;
&lt;span class="cm"&gt;    mostra en majúscules&lt;/span&gt;
&lt;span class="cm"&gt;    Nota: requereix IOUtils al package per defecte.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;PosaMajuscules&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;PARAULA_FIN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;prou&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// constant amb la paraula amb que acaba&lt;/span&gt;
        &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;continua&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;continua&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Mot a posar en majúscules (&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;PARAULA_FIN&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot; acaba): &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;mot&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;IOUtils&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;llegeixStr&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARAULA_FIN&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;continua&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El mot &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;mot&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; en majúscules és &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;mot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toUpperCase&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-6-l-ascensor-continu"&gt;
&lt;h3&gt;Exercici 6. L'ascensor continu&lt;/h3&gt;
&lt;p&gt;Ara, el nostre ascensor començarà a la planta baixa i anirà demanant
un botó per canviar de pis. Es comportarà pràcticament igual que la
versió anterior. Ara, és clar, ja no li cal demanar a quin pis es troba.&lt;/p&gt;
&lt;p&gt;Un cop canviat de pis (o indicat l'error) demanarà que premi un nou
botó. I així es quedarà fins que l'usuari indiqui el botó de sortida.&lt;/p&gt;
&lt;p&gt;Aquesta versió incorpora un missatge molt compacte amb el següent
aspecte:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
[xx] P1: puja 1, P2: puja 2, B1: baixa 1, B2: baixa 2, EX: surt
&lt;/pre&gt;
&lt;p&gt;On xx pot ser PB, PP o SP depenent de la planta on es trobi.&lt;/p&gt;
&lt;p&gt;Quan l'usuari demani finalitzar (amb &amp;quot;EX&amp;quot;), es mostrarà el missatge de
comiat &amp;quot;Adéu&amp;quot; i finalitzarà l'execució.&lt;/p&gt;
&lt;p&gt;Anomena el fitxer amb el codi font &lt;em&gt;AscensorContinu.java&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="pista-8-conversions-i-accessos-a-posicions-d-un-string"&gt;
&lt;h3&gt;Pista 8. Conversions i accessos a posicions d'un string&lt;/h3&gt;
&lt;p&gt;Considera el següent codi&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;    Descr.: dibuixa un triangle n cops&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;PARAULA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Triangle&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;    &lt;span class="c1"&gt;// nombre d&amp;#39;arguments passats&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Per favor, indiqueu el &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;nombre de triangles a dibuixar. Ex.&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\tjava Triangle 3&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt; &lt;span class="c1"&gt;// primer argument&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;dibuixa&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;                      &lt;span class="c1"&gt;// crida a la rutina dibuixa()&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;dibuixa&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;       &lt;span class="c1"&gt;// declara la rutina dibuixa()&lt;/span&gt;
        &lt;span class="cm"&gt;/* dibuixa el triangle número num */&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Aquest és el triangle número &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;PARAULA&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;print&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARAULA&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;charAt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt; &lt;span class="c1"&gt;// escriu el caràcter a la posició c&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-7-triangles"&gt;
&lt;h3&gt;Exercici 7. Triangles&lt;/h3&gt;
&lt;p&gt;Desenvolupa un programa que demani un nombre enter positiu i dibuixi tants
triangles com se li indiqui.&lt;/p&gt;
&lt;p&gt;Intenta evitar la repetició de codi fent servir subrutines.&lt;/p&gt;
&lt;p&gt;Per exemple, si l'entrada és &lt;em&gt;2&lt;/em&gt;, el resultat serà&lt;/p&gt;
&lt;pre class="literal-block"&gt;
.........9.........
........898........
.......78987.......
......6789876......
.....567898765.....
....45678987654....
...3456789876543...
..234567898765432..
.12345678987654321.
0123456789876543210
.........9.........
........898........
.......78987.......
......6789876......
.....567898765.....
....45678987654....
...3456789876543...
..234567898765432..
.12345678987654321.
0123456789876543210
&lt;/pre&gt;
&lt;p&gt;El missatge de petició de l'entrada serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
Nombre de triangles?
&lt;/pre&gt;
&lt;p&gt;El missatge d'error si l'entrada no és correcta serà:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
No puc dibuixar n triangles
&lt;/pre&gt;
&lt;p&gt;On &lt;em&gt;n&lt;/em&gt; correspon al nombre introduït.&lt;/p&gt;
&lt;p&gt;Nota: Si tens la temptació de resoldre el problema via
&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;System.out.println(&amp;quot;.........9.........&amp;quot;);&lt;/span&gt;&lt;/tt&gt; planteja't que passarà
si se't requereix que els símbols a escriure s'han de demanar a
l'usuari.&lt;/p&gt;
&lt;p&gt;Anomena el programa &lt;em&gt;Triangles.java&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:57:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:primers-exercicis-en-java.html</guid><category>java</category></item><item><title>Reconeixement d'elements de programació</title><link>http://apuntstecnics.herokuapp.com/reconeixement-delements-de-programacio.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document serveix d'orientació a l'estudiant del llenguatge de
programació Java per endinsar-se en la seva sintaxi tot seguint els
&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/nutsandbolts/index.html"&gt;tutorials&lt;/a&gt;
d'ajuda proporcionats pels propis dissenyadors del llenguatge.&lt;/p&gt;
&lt;p&gt;Està format per tres exercicis que requereixen la lectura de diferents
documents per a poder respondre a una sèrie de qüestions.&lt;/p&gt;
&lt;p&gt;Els documents referenciats apareixen en anglès. Es pressuposa que
l'estudiant disposa del coneixement suficient d'aquesta llengua per
realitzar els exercicis. Altrament, es recorda l'existència de
traductors automàtics. És d'esperar que aquestes eines, no sent ni de
lluny perfectes, esperonin l'estudiant a obtenir el necessari domini
de la &lt;em&gt;lingua franca&lt;/em&gt; entre els desenvolupadors d'aplicacions.
&lt;a class="footnote-reference" href="#aprenangles" id="id1"&gt;[1]&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-tipus-primitius-del-java"&gt;
&lt;h3&gt;Exercici 1. Tipus primitius del Java&lt;/h3&gt;
&lt;p&gt;Llegeix les pàgines:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://download.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html"&gt;Primitive Data Types&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://download.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html"&gt;Arrays&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A continuació, contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Fes una taula que relacioni els tipus primitius de que disposa el
Java. Inclou una petita descripció, el rang de valors i el valor
per defecte. Indica, si existeix, el corresponent amb el del
llenguatge C.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;descriu amb les teves paraules el significat de literal. Inclou
exemples teus.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;descriu amb les teves paraules com es declaren i s'accedeixen els
arrays. Compara'ls amb el que coneixies de C. A la teva comparació
inclou avantatges/inconvenients que trobes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;De les següents declaracions, indica si són vàlides i si són
recomanables, i en cas que no, el perquè&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;notes&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;notes&lt;/span&gt;&lt;span class="o"&gt;[];&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;notes&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="n"&gt;notes&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quina diferència hi ha entre declarar una variable de tipus array i crear un array? Com anava això en C?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Per a què serveix arraycopy()? Indica almenys dues raons per les quals és preferible fer servir aquesta funció en comptes de fer la còpia amb un for()&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Fes un programa que:&lt;/p&gt;
&lt;ol class="loweralpha simple"&gt;
&lt;li&gt;crei un vector amb els primers cinc anys a partir del del teu naixement&lt;/li&gt;
&lt;li&gt;fent servir arraycopy() copii del segon al quart any en un altre vector&lt;/li&gt;
&lt;li&gt;mostri els anys del segon vector en ordre invers.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-operadors-del-java"&gt;
&lt;h3&gt;Exercici 2. Operadors del Java&lt;/h3&gt;
&lt;p&gt;Llegeix les pàgines:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://download.oracle.com/javase/tutorial/java/nutsandbolts/opsummary.html"&gt;Summary of Operators&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://download.oracle.com/javase/tutorial/java/nutsandbolts/expressions.html"&gt;Expressions, Statements, and Blocks&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A continuació, contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;indica els operadors que ofereix el Java en format de taula.
Afegeix una descripció amb les teves paraules i compara'ls amb els
que coneixies de C.&lt;/li&gt;
&lt;li&gt;descriu l'ús recomanat dels parèntesis a les expressions de Java&lt;/li&gt;
&lt;li&gt;descriu què és un statement. Prova de trobar una traducció al teu idioma.&lt;/li&gt;
&lt;li&gt;descriu què és un bloc. Compara aquest concepte amb el que coneixes de C.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-control-de-flux-d-execucio"&gt;
&lt;h3&gt;Exercici 3. Control de flux d'execució&lt;/h3&gt;
&lt;p&gt;Llegeix les pàgines de la secció següent:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://download.oracle.com/javase/tutorial/java/nutsandbolts/flow.html"&gt;Control Flow Statements&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A continuació, contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;descriu el funcionament de les estructures condicionals del java
(if, switch) Compara-les amb les del llenguatge C&lt;/li&gt;
&lt;li&gt;descriu el funcionament de les estructures mentre (while)
Compara-les amb les del llenguatge C 3.  descriu el funcionament
de les estructures per (for) Compara-les amb les del llenguatge C.
Fes especial menció del que a la pàgina indicada anomenen
&amp;quot;Enhanced for&amp;quot; o per millorat. L'has vist mai a algun altre
llenguatge? A quin i amb quina notació?&lt;/li&gt;
&lt;/ol&gt;
&lt;hr class="docutils" /&gt;
&lt;table class="docutils footnote" frame="void" id="aprenangles" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En altres paraules, si encara no ets capaç de llegir
anglès tècnic, ja pots posar-te les piles!&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:56:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:reconeixement-delements-de-programacio.html</guid><category>java</category></item><item><title>Encapsulació</title><link>http://apuntstecnics.herokuapp.com/encapsulacio.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document és una introducció a un dels conceptes fonamentals de
la programació orientada a objectes: l'encapsulació.&lt;/p&gt;
&lt;p&gt;Pressuposa que l'estudiant té coneixements bàsics de programació en C
i, desitjablement, del concepte de TAD. Considera &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/tipus-abstractes-de-dades.html"&gt;aquesta introducció
al concepte de TAD&lt;/a&gt; (des del
llenguatge C)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="tads-classes-i-encapsulacio"&gt;
&lt;h2&gt;TADs, classes i Encapsulació&lt;/h2&gt;
&lt;p&gt;Llegim a la definició de &lt;a class="reference external" href="http://ca.wikipedia.org/wiki/Tipus_abstracte_de_dades"&gt;TAD de la vikipèdia&lt;/a&gt; :&lt;/p&gt;
&lt;blockquote&gt;
En informàtica, un tipus abstracte de dades (TAD) és una
especificació d'un conjunt de dades i d'un conjunt
d'operacions que poden ser executades sobre el conjunt de
dades. Com a tipus de dades diem que és abstracte en el sentit
que és independent de les possibles implementacions.&lt;/blockquote&gt;
&lt;p&gt;De l'article &lt;a class="reference external" href="http://ca.wikipedia.org/wiki/Classe_%28inform%C3%A0tica%29"&gt;Classe de la viquipèdia&lt;/a&gt; extraiem la següent definició de classe:&lt;/p&gt;
&lt;blockquote&gt;
En programació orientada a objectes, una classe és una construcció
d'un llenguatge de programació usada per agrupar camps relacionats
i mètodes.&lt;/blockquote&gt;
&lt;p&gt;De l'article &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29"&gt;Encapsulation de la Wikipedia&lt;/a&gt; transcrivim:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In a programming language, encapsulation is used to refer to one
of two related but distinct notions, and sometimes to the
combination thereof:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;A language mechanism for restricting access to some of the
object's components.&lt;/li&gt;
&lt;li&gt;A language construct that facilitates the bundling of data with
the methods (or other functions) operating on that data.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;És a dir, per una part tenim el concepte de TAD que ens permet
especificar unes dades i les funcions que les manipulen d'una manera
independent de les possibles implementacions. Per una altra bada,
tenim el concepte de classe que, en POO, ens permet agrupar camps
(dades) i mètodes (funcions) relacionats entre ells. Finalment
disposem del concepte d'&lt;em&gt;encapsulació&lt;/em&gt; que ens parla de mecanismes per
restringir l'accés a alguns elements i facilitar l'agrupació de dades
amb les funcions que operen amb aquestes dades.&lt;/p&gt;
&lt;p&gt;És possible que pugui semblar-te que tot plegat, aquests conceptes
estan parlant del mateix o, si més no, de quelcom molt relacionat. A
veure si amb un petit exemple podem afegir-hi una mica de sentit.&lt;/p&gt;
&lt;div class="section" id="el-triangle-en-c"&gt;
&lt;h3&gt;El Triangle en C&lt;/h3&gt;
&lt;p&gt;Considera el següent programa escrit en C:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer triangle.h&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Definició del tipus Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="cp"&gt;#ifndef TRIANGLE_H&lt;/span&gt;
&lt;span class="cp"&gt;#define TRIANGLE_H&lt;/span&gt;

&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* Assigna valors als atributs d&amp;#39;un triangle */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* Calcula l&amp;#39;àrea d&amp;#39;un triangle. Pressuposa el triangle inicialitzat. */&lt;/span&gt;
&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cp"&gt;#endif&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer triangle.c&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Definició del tipus Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="cp"&gt;#include &amp;quot;triangle.h&amp;quot;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer usatriangle.c&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Programa que calcula l&amp;#39;àrea d&amp;#39;un triangle de base 5 i altura 3&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;quot;triangle.h&amp;quot;&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%g&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Aquest exemple mostra una possible implementació del TAD Triangle.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-observa-el-tad-triangle"&gt;
&lt;h3&gt;Exercici 1. Observa el TAD Triangle&lt;/h3&gt;
&lt;p&gt;Contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Per a què cal a &lt;em&gt;usatriangle.c&lt;/em&gt; fer un include de &lt;em&gt;triangle.h&lt;/em&gt; ?&lt;/li&gt;
&lt;li&gt;On es defineix l'estructura i el tipus &lt;em&gt;Triangle&lt;/em&gt; ?&lt;/li&gt;
&lt;li&gt;&lt;em&gt;usatriangle.c&lt;/em&gt; necessita saber, tal i com està implementat, quina
és l'estructura d'un Triangle?&lt;/li&gt;
&lt;li&gt;En comptes de fer servir &lt;em&gt;inicialitza_triangle()&lt;/em&gt;,
&lt;em&gt;usatriangle.c&lt;/em&gt; podria inicialitzar els valors del triangle
d'alguna altra manera? Com?&lt;/li&gt;
&lt;li&gt;Si canviem la implementació del Triangle de manera
que guardem els valors base i altura en un array de dos
double, indica què caldrà modificar perquè &lt;em&gt;usatriangle.c&lt;/em&gt; pugui
continuar funcionant. El què és més important, quin codi &lt;strong&gt;no&lt;/strong&gt; és
necessari modificar? Perquè creus que això pot ser important?&lt;/li&gt;
&lt;li&gt;En cas que haguérem canviat la implementació de &lt;em&gt;usatriangle.c&lt;/em&gt;
segons la resposta de la pregunta 4, en què hauria canviat la teva
resposta de la pregunta 5? Quin consell donaries als usuaris del
teu TAD Triangle tenint això en compte?&lt;/li&gt;
&lt;li&gt;Perquè creus que cal que &lt;em&gt;inicialitza_triangle()&lt;/em&gt; i
&lt;em&gt;calcula_area_triangle()&lt;/em&gt; indiquin en el seu nom la paraula
&lt;em&gt;triangle&lt;/em&gt;? Pista: què passaria si tinguéssim a l'hora un Triangle
i un Cercle amb similars funcionalitats?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="el-triangle-en-java"&gt;
&lt;h3&gt;El Triangle en Java&lt;/h3&gt;
&lt;p&gt;Considera ara el següent codi que correspon, en certa mesura, al TAD
Triangle vist anteriorment. Ara, en notació Java, direm la classe
Triangle.&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer &lt;em&gt;Triangle.java&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Implementació de la classe Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;base&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/* calcula i retorna l&amp;#39;àrea del triangle */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calculaArea&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer &lt;em&gt;UsaTriangle.java&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/** Classe que calcula l&amp;#39;àrea d&amp;#39;un triangle de base 5 i altura 3 */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaTriangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;calculaArea&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-2-observa-la-classe-triangle"&gt;
&lt;h3&gt;Exercici 2. Observa la classe Triangle&lt;/h3&gt;
&lt;p&gt;Contesta les següents preguntes sobre la classe Triangle.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;La proposta en Java té només dos fitxers en comptes dels tres de C.
Aventura una explicació.&lt;/li&gt;
&lt;li&gt;Quin creus que és l'equivalent de &lt;em&gt;inicialitza_triangle()&lt;/em&gt; de C en
la versió Java? Quines diferències hi trobes? Considera tant la
definició com l'ús.&lt;/li&gt;
&lt;li&gt;L'equivalent de &lt;em&gt;calcula_area_triangle()&lt;/em&gt; sembla molt més directe
en Java, oi? Descriu, però, les diferències que hi trobes tant en
la definició com en l'ús&lt;/li&gt;
&lt;li&gt;On penses que (dins &lt;em&gt;UsaTriangle.java&lt;/em&gt;) se li passa a
&lt;em&gt;calculaArea()&lt;/em&gt; el triangle del que ha de calcular l'àrea?&lt;/li&gt;
&lt;li&gt;Perquè creus que en la versió Java, es diu &lt;em&gt;calculaArea()&lt;/em&gt; i no
&lt;em&gt;calculaAreaTriangle()&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Aventura una raó per la qual &lt;em&gt;Triangle(double, double)&lt;/em&gt; fa servir
&lt;em&gt;this.base = base&lt;/em&gt; tot tenint en compte que &lt;em&gt;calculaArea()&lt;/em&gt;
accedeix directament als atributs sense indicar &lt;em&gt;this&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Prova el següent canvi a &lt;em&gt;UsaTriangle.java&lt;/em&gt;. Afegeix, després de
declarar &lt;em&gt;t&lt;/em&gt; una línia amb &lt;em&gt;t.base = 2;&lt;/em&gt; que, si es comportés com a
C, hauria de canviar el valor de l'atribut &lt;em&gt;base&lt;/em&gt; del triangle. Què
passa? Aventura una explicació pel missatge que t'apareix. Pista: La
clau està en &lt;em&gt;private&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Intenta explicar el concepte d'&lt;em&gt;encapsulació&lt;/em&gt; fent servir els
exemples del TAD Triangle i la classe Triangle. És a dir, descriu
quins mecanismes creus que ofereix Java per a permetre agrupar
dades i funcions, i a l'hora protegir l'accés directe a les dades.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:55:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:encapsulacio.html</guid><category>java</category></item><item><title>Classes i objectes</title><link>http://apuntstecnics.herokuapp.com/classes-i-objectes.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document introdueix l'estudiant de programació orientada a
objectes als conceptes fonamentals de &lt;em&gt;classe&lt;/em&gt; i &lt;em&gt;objecte&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Aquesta introducció es realitza de manera pràctica, guiada amb
exercicis que progressivament incorporen diferents perspectives dels
conceptes a tractar.&lt;/p&gt;
&lt;p&gt;Per al correcte seguiment d'aquests materials, es pressuposa
coneixement bàsic de la sintaxi de les estructures bàsiques del
llenguatge Java, així com de certa experiència en programació
elemental en el llenguatge C. Bàsicament, declaració de variables,
assignació, estructures condicionals i iteratives, declaració i crida
de funcions, i E/S estàndard.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="hola-gat-renat"&gt;
&lt;h2&gt;Hola gat Renat!&lt;/h2&gt;
&lt;p&gt;Ja va sent hora que coneguem un del principals personatges d'aquests
materials.&lt;/p&gt;
&lt;div class="section" id="exercici-1-el-gat-renat-te-set-vides"&gt;
&lt;h3&gt;Exercici 1. El gat Renat té set vides&lt;/h3&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// vides disponibles del gat Renat&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;           &lt;span class="c1"&gt;// declarem la referència al gat&lt;/span&gt;
        &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;   &lt;span class="c1"&gt;// creem la instància del gat Renat.&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al gat Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Copia i executa el codi i contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Quin ha de ser el nom del fitxer que contingui aquest codi perquè
funcioni?&lt;/li&gt;
&lt;li&gt;A quina línia està declarada la variable &lt;tt class="docutils literal"&gt;renat&lt;/tt&gt; que apareix a la
línia 6?&lt;/li&gt;
&lt;li&gt;A quina línia s'assigna el valor que es mostra per pantalla?&lt;/li&gt;
&lt;li&gt;Quin valor apareix si a aquesta línia no s'assigna cap valor?&lt;/li&gt;
&lt;li&gt;Què passaria sí la línia 5 no hi fos? Perquè creus?&lt;/li&gt;
&lt;li&gt;Perquè creus que el comentari de la línia 4 parla de &lt;em&gt;referència&lt;/em&gt;?
Recordes quelcom equivalent en C? Què?&lt;/li&gt;
&lt;li&gt;La línia 5 parla d'&lt;em&gt;instància&lt;/em&gt;. En aquest context, una instància es
pot entendre com el contingut real al que fa referència la variable
&lt;tt class="docutils literal"&gt;renat&lt;/tt&gt;. Es diu que la instància es &lt;em&gt;construeix&lt;/em&gt; amb l'operador
&lt;tt class="docutils literal"&gt;new&lt;/tt&gt; i això implica bàsicament que es reserva espai de memòria
per a allotjar tota la informació relativa a la instància. Què et
sona que pugui comparar-se a això en el llenguatge C?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;El resultat de l'exercici consistirà en el fitxer amb el codi i, al
final d'aquest, en forma de comentaris, cada pregunta amb la seva
resposta.&lt;/p&gt;
&lt;p&gt;No oblidis posar el nom de l'autor/l'autora (el teu és clar), la data
i una petita descripció del contingut, al començament del fitxer.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-el-gat-renat-te-un-accident"&gt;
&lt;h3&gt;Exercici 2. El gat Renat té un accident&lt;/h3&gt;
&lt;p&gt;Podem canviar el nombre de vides del gat Renat simplement afegint les
següents línies al final del main:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;           &lt;span class="c1"&gt;// declarem l&amp;#39;objecte (la referència) al gat&lt;/span&gt;
    &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;   &lt;span class="c1"&gt;// creem la instància del gat Renat.&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Abans el gat Renat tenia &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;  &lt;span class="c1"&gt;// Renat ha tingut un accident&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Ara el gat Renat té &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Modifica la classe GatRenat amb els canvis, executa el codi i contesta
les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Com podem consultar (llegir, obtenir) el valor d'una propietat de
la instància?&lt;/li&gt;
&lt;li&gt;Com podem canviar (escriure, assignar) el valor d'una propietat de
la instància?&lt;/li&gt;
&lt;li&gt;És possible indicar que el gat Renat té -12 vides? Com? És quelcom
desitjable que pugui passar? En cas que es pugui, com ho podries
evitar fent servir els teus coneixements amb el llenguatge C?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-hi-ha-dos-gats-renat"&gt;
&lt;h3&gt;Exercici 3. Hi ha dos gats Renat?&lt;/h3&gt;
&lt;p&gt;Considera ara el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// vides disponibles del gat Renat&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;renat_I&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;               &lt;span class="c1"&gt;// crea un primer gat Renat&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat I té  &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat_II&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;     &lt;span class="c1"&gt;// crea un segon gat Renat!&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat II té &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_II&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;++;&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat I té  &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat II té &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_II&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;renat_II&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// atenció: la instància de Renat II es perd!&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat I té  &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat II té &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_II&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;++;&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat I té  &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_I&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat Renat II té &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat_II&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Copia i executa el codi i contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Quanta memòria ocupa, com a mínim, una instància de GatRenat?&lt;/li&gt;
&lt;li&gt;Quantes instàncies hi ha de GatRenat tot just executat el codi fins la línia 5 (inclosa)?&lt;/li&gt;
&lt;li&gt;I fins la línia 6?&lt;/li&gt;
&lt;li&gt;I fins la línia 9?&lt;/li&gt;
&lt;li&gt;Perquè les línies 7 i 10 mostren les mateixes vides pels gats Renat
I i Renat II?&lt;/li&gt;
&lt;li&gt;Perquè les línies 13 i 14 mostren diferent nombre de vides pels
gats Renat I i Renat II?&lt;/li&gt;
&lt;li&gt;Què creus que vol dir el comentari de la línia 16?&lt;/li&gt;
&lt;li&gt;Perquè les línies 17 i 18 mostren les mateixes vides pels gats
Renat I i Renat II?&lt;/li&gt;
&lt;li&gt;Perquè les línies 21 i 22 mostren les mateixes vides pels gats
Renat I i Renat II malgrat la instrucció de la línia 20?&lt;/li&gt;
&lt;li&gt;Quantes instàncies hi ha quan s'executa la l'inia 20? Perquè?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-renat-tambe-des-de-fora"&gt;
&lt;h3&gt;Exercici 4. Renat també des de fora&lt;/h3&gt;
&lt;p&gt;Considera ara el següent codi que apareix a un altre fitxer:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaGatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al gat Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Copia el codi en un fitxer al mateix directori que el de l'exercici
anterior i executa'l.&lt;/p&gt;
&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Quin és el nom del fitxer on està definit el punt d'entrada &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; d'aquest programa?&lt;/li&gt;
&lt;li&gt;Ara tenim dos fitxers amb &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;. Com pot saber Java quin és el
&lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; a executar?&lt;/li&gt;
&lt;li&gt;A quin fitxer està definida la classe del gat Renat?&lt;/li&gt;
&lt;li&gt;Quants programes es podrien construir fent ús de la definició del gat Renat?&lt;/li&gt;
&lt;li&gt;Què passaria si el fitxer amb el codi anterior i el que conté la
definició de la classe del Renat estiguessin en directoris
diferents? (prova-ho!)&lt;/li&gt;
&lt;li&gt;Elimina el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; de GatRenat. Continua funcionant UsaGatRenat?
Què ha deixat de poder-se executar?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Per a aquest, com potser ja has imaginat, caldrà lliurar els dos
fitxers. Fes servir la utilitat tar per a agrupar-los.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-renat-te-estat"&gt;
&lt;h3&gt;Exercici 5. Renat té estat&lt;/h3&gt;
&lt;p&gt;El gat Renat pot estar dret, assegut o estirat. Modifica la definició
de la seva classe perquè pugui guardar aquesta informació, fent que
inicialment estigui estirat.&lt;/p&gt;
&lt;p&gt;Crea un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; dins de la definició de la classe, que instanciï un
gat Renat, mostri el nombre de vides i l'estat per defecte, canviï
l'estat a assegut i torni a mostrar el nou estat.&lt;/p&gt;
&lt;p&gt;Crea un altre main() fora de la definició de la classe, que instanciï
un gat Renat, mostri el nombre de vides i l'estat per defecte, canviï
l'estat a dret i torni a mostrar el nou estat.&lt;/p&gt;
&lt;p&gt;Pista: el tipus de dades per codificar l'estat podria ser &lt;tt class="docutils literal"&gt;String&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-el-renat-te-sempre-un-nombre-de-vides-correcte"&gt;
&lt;h3&gt;Exercici 6. El Renat té sempre un nombre de vides correcte!&lt;/h3&gt;
&lt;p&gt;Ja hem comentat abans que deixar una propietat pública perquè tothom pugui modificar-la pot portar a problemes. Per exemple, al gat Renat li podem posar impunement -15 vides.&lt;/p&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// vides disponibles del gat Renat&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;  &lt;span class="c1"&gt;// mètode que retorna el nombre de vides&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// modifica el nombre de vides del gat si el paràmetre vides conté un valor vàlid&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// de moment passem per alt aquest &amp;quot;this&amp;quot;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Contesta les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Què passa si intentes executar el següent codi? Perquè creus?&lt;/li&gt;
&lt;/ol&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaGatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al gat Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;ol class="arabic simple" start="2"&gt;
&lt;li&gt;Què s'està declarant a la línia 3? Així, que pot voler dir &lt;em&gt;mètode&lt;/em&gt;
en notació POO?&lt;/li&gt;
&lt;li&gt;Indica quina sortida genera el següent &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; i explica perquè
és aquesta?&lt;/li&gt;
&lt;/ol&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;   &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
       &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
       &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al gat Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
       &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(-&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
       &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al gat Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
       &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
       &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al gat Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
   &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;ol class="arabic simple" start="4"&gt;
&lt;li&gt;Sense modificar la classe GatRenat, és possible aconseguir que una
instància de GatRenat pugui tenir un nombre de vides negatiu?
Perquè o Com?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-l-estat-del-renat-es-sempre-bo"&gt;
&lt;h3&gt;Exercici 7. L'estat del Renat és sempre bo!&lt;/h3&gt;
&lt;p&gt;Crea els mètodes &lt;em&gt;setters&lt;/em&gt; i &lt;em&gt;getters&lt;/em&gt; necessaris per garantir que
l'estat del Renat sigui sempre correcte, a l'hora que pugui ser
canviat.&lt;/p&gt;
&lt;p&gt;Crea un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que demostri el funcionament dels nous mètodes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-8-com-esta-renat"&gt;
&lt;h3&gt;Exercici 8. Com està Renat?&lt;/h3&gt;
&lt;p&gt;De vegades amb els &lt;em&gt;accessors&lt;/em&gt; (mètodes &lt;em&gt;getters&lt;/em&gt; i &lt;em&gt;setters&lt;/em&gt;) no
resulta pràctic treballar. Així, cal afegir nous mètodes que permetin
un ús més còmode.&lt;/p&gt;
&lt;p&gt;Afegeix al repertori de mètodes del Renat els següents:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean estaViu()&lt;/tt&gt; // cert si encara li queda alguna vida&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean estaDret()&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;boolean estaAssegut()&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;boolean estaEstirat()&lt;/tt&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Crea un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que demostri el funcionament dels nous mètodes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-9-el-gat-renat-esta-ensinistrat"&gt;
&lt;h3&gt;Exercici 9. El gat Renat està ensinistrat!&lt;/h3&gt;
&lt;p&gt;Una de les gràcies de la POO és que podem tractar peces de codi com si
tinguessin una mena de personalitat pròpia. D'això s'en diu de vegades
com la metàfora de la POO. Així, podem imaginar que els objectes ens
realitzen serveis o que els podem donar ordres. Ho visualitzarem amb
el nostre pacient amic Renat.&lt;/p&gt;
&lt;p&gt;Afegeix tres nous mètodes: &lt;tt class="docutils literal"&gt;void aixecat()&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;void seu()&lt;/tt&gt;, i
&lt;tt class="docutils literal"&gt;void estirat()&lt;/tt&gt; de manera que quan vulguem, per exemple, que Renat
s'aixequi simplement li diguem  &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;renat.aixecat();&lt;/span&gt;&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Quan s'executa l'acció, Renat ens dirà el que fa en forma de missatge
per sortida estàndard. Així, la instrucció anterior faria generar per
pantalla el missatge: &lt;tt class="docutils literal"&gt;m'aixeco&lt;/tt&gt;. En cas, però, que ja estigui
en l'estat que se li demana, no mostra cap missatge.&lt;/p&gt;
&lt;p&gt;Crea un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que demostri el funcionament dels nous mètodes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-protegim-encara-mes-l-estat-del-renat"&gt;
&lt;h3&gt;Exercici 10. Protegim encara més l'estat del Renat&lt;/h3&gt;
&lt;p&gt;El fet que l'estat del gat estigui codificat amb un String, no deixa
de ser una incomoditat. Hom es pot equivocar teclejant i la detecció
no és massa senzilla. Has de fer un munt de comprovacions.&lt;/p&gt;
&lt;p&gt;Cerca per la web el concepte de enum en java i tracta de millorar la
definició del Renat creant una enumeració anomenada GatEstat. Afegeix
els següents mètodes&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;void setEstat(String)&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Assigna l'estat a partir d'un String. Si el string no es correspon
amb un estat vàlid, no canvia res. Aquest mètode és pràcticament el
que ja teníem.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;void setEstat(GatEstat)&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Assigna l'estat a partir d'un GatEstat. Sí, té el mateix nom que la
funció anterior. Cerca method overloading o sobrecàrrega de
mètodes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;String getEstatComString()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Retorna l'estat del gat en forma de String&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;GatEstat getEstat()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Retorna l'estat del gat com a GatEstat. Fixa't que ara no podem
posar-li el mateix nom que a l'anterior&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;És probable que et calgui realitzar algun altre canvi en el codi de
mètodes existents. Prova de realitzar-los sense modificar-los la
signatura.&lt;/p&gt;
&lt;p&gt;Perquè creus que el codi de &lt;tt class="docutils literal"&gt;setEstat()&lt;/tt&gt; es tan diferent en
complexitat depenent del tipus paràmetre que rep? Afegeix aquest
comentari al codi del mètode més senzill. Inclou als comentaris una
descripció amb les teves paraules.&lt;/p&gt;
&lt;p&gt;Executa el codi amb un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; del problema anterior. Funciona
sense haver de modificar res? Perquè creus que és així? Quin avantatge
hi trobes? Crea un nou &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; ampliant l'anterior que demostri el
funcionament dels nous mètodes. Afegeix-hi les teves reflexions.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-11-el-gat-renat-sap-parlar-i-callar"&gt;
&lt;h3&gt;Exercici 11. El gat Renat sap parlar i callar&lt;/h3&gt;
&lt;p&gt;De vegades ens pot interessar que Renat &lt;strong&gt;no&lt;/strong&gt; indiqui el que està
fent quan li donem una ordre de canvi d'estat amb els mètodes
&lt;tt class="docutils literal"&gt;aixecat()&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;seu()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;estirat()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Afegeix els següents mètodes a Renat:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;void calla()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Indica a Renat que deixi de dir el que fa. Si ja estava callat, ho
continua estant.&lt;/p&gt;
&lt;p&gt;A partir d'aquest moment, els missatges de moviment (ex.
&amp;quot;m'aixeco&amp;quot;) queden reemplaçats per &amp;quot;...&amp;quot;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;void parla()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Indica a Renat que digui el que fa. És el comportament per defecte.
Si ja estava parlant, ho continua fent.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;boolean potParlar()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Retorna cert quan el Renat pot parlar i fals altrament.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;void miola()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Escriu el missatge &lt;tt class="docutils literal"&gt;MEEEEEEU&lt;/tt&gt; si pot parlar, altrament escriurà &lt;tt class="docutils literal"&gt;...&lt;/tt&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Modifica UsaGatRenat perquè demostri el funcionament d'aquests nous
mètodes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-12-que-he-apres"&gt;
&lt;h3&gt;Exercici 12. Què he aprés?&lt;/h3&gt;
&lt;p&gt;Fes un repàs dels exercicis anteriors. Indica exercici a exercici què
has aprés de nou en fer-lo, o bé quins són els conceptes que
introdueix l'exercici, si ja els coneixies anteriorment. Procura ser
molt concret. Si et cal, ajuda't de (nous) exemples.&lt;/p&gt;
&lt;p&gt;En el cas que no hagis entès algun dels exercicis... bé, aquest cas no
es pot donar ja que, abans de fer aquest exercici t'ajudaràs de les
diferents fonts de suport que tens al teu abast (incloent, és clar,
consultes al teu docent) per arribar a entendre'l.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:54:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:classes-i-objectes.html</guid><category>java</category></item><item><title>Procedural vs OO</title><link>http://apuntstecnics.herokuapp.com/procedural-vs-oo.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Els paradigmes de programació modular (procedural) i orientada  a
objectes presenten característiques pròpies. De vegades costa de
trobar equivalència d'un concepte d'un paradigma (normalment POO) a
l'altre.&lt;/p&gt;
&lt;p&gt;Sovint els programadors aprenem a programar des de la
programació procedural, per després &lt;em&gt;desembarcar&lt;/em&gt; a la POO.&lt;/p&gt;
&lt;p&gt;Aquest document ofereix una introducció a la terminologia de la
programació orientada a objectes a partir de la de la programació
estructurada i modular.&lt;/p&gt;
&lt;p&gt;Es pressuposa coneixements dels conceptes bàsics de programació
estructurada i modular, de programació en llenguatge C i unes primeres
nocions de sintaxi pròpia de java.&lt;/p&gt;
&lt;p&gt;Per poder realitzar els exercicis d'aquest document caldrà disposar
d'un compilador de C (per exemple la versió 4.6.x de gcc) i un jdk
(per exemple la versió 1.7.x d'Oracle)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="comparacio-dels-dos-paradigmes"&gt;
&lt;h2&gt;Comparació dels dos paradigmes&lt;/h2&gt;
&lt;p&gt;Quan volem desenvolupar un programa amb el paradigma procedural,
normalment ens preocupem de decidir:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;quina és la informació d'entrada&lt;/li&gt;
&lt;li&gt;què hem de fer amb aquesta informació&lt;/li&gt;
&lt;li&gt;quina és la sortida que s'espera&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A partir d'aquesta informació definim una sèrie de variables on
allotjar la informació d'entrada i de sortida, i on deixar resultats
intermedis. A més a més, definim una sèrie de procediments
(subrutines, accions, funcions) que manipulen aquestes variables fins
a obtenir els valors de sortida esperats.&lt;/p&gt;
&lt;div class="section" id="tads"&gt;
&lt;h3&gt;TADs&lt;/h3&gt;
&lt;p&gt;Amb el temps, anem veient que algunes dades i procediments associats a
aquestes, es van repetint en diferents programes. Per exemple, sovint
ens trobem amb la necessitat de manipular diferents aspectes de les
&lt;em&gt;dates&lt;/em&gt; tot i que en alguns programes fem servir només per calcular
edats, mentre que en d'altres en fem servir càlculs de distància en el
temps. Així, implementem el concepte de tipus abstracte de dades (TAD)
on ajuntem una representació de les dades amb els seus procediments
associats.&lt;/p&gt;
&lt;p&gt;Considerem, per exemple, el següent TAD escrit en C:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer triangle.h&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Definició del TAD Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="cp"&gt;#ifndef TRIANGLE_H&lt;/span&gt;
&lt;span class="cp"&gt;#define TRIANGLE_H&lt;/span&gt;

&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* Assigna valors als atributs d&amp;#39;un triangle */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* Calcula l&amp;#39;àrea d&amp;#39;un triangle. Pressuposa el triangle inicialitzat. */&lt;/span&gt;
&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cp"&gt;#endif&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;ul class="simple"&gt;
&lt;li&gt;Fitxer triangle.c&lt;/li&gt;
&lt;/ul&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Implementació del TAD Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="cp"&gt;#include &amp;quot;triangle.h&amp;quot;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Amb aquesta implementació del TAD Triangle, podríem fer servir
triangles en diferents programes. Es pot considerar &lt;em&gt;abstracte&lt;/em&gt; perquè
els programes que el facin servir poden utilitzar les funcions del TAD
sense necessitat de conèixer la definició de les dades. Així, el TAD
podria ser modificat en un futur, afegint-hi noves funcionalitats (ex.
&lt;tt class="docutils literal"&gt;double calcula_perimetre_triangle(Triangle t)&lt;/tt&gt;) o bé canviar la
representació de les dades a un format que es pugui trobar més adequat
com ara un array de dos &lt;tt class="docutils literal"&gt;double&lt;/tt&gt; &lt;a class="footnote-reference" href="#arrayadequat" id="id1"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="classes"&gt;
&lt;h3&gt;Classes&lt;/h3&gt;
&lt;p&gt;En una primera aproximació, podríem entendre la programació
orientada a objectes com una mena d'&lt;em&gt;evolució&lt;/em&gt; dels TADs.&lt;/p&gt;
&lt;p&gt;En notació POO, un TAD seria equiparable a una &lt;em&gt;classe&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Les classes agrupen dades i procediments que, en notació POO es
coneixen com a &lt;em&gt;propietats&lt;/em&gt; i &lt;em&gt;mètodes&lt;/em&gt; respectivament. Ens referirem
a les propietats i mètodes d'una classe com a &lt;em&gt;membres&lt;/em&gt; de la classe.&lt;/p&gt;
&lt;p&gt;L'exemple del TAD Triangle, el traduïriem a Java, per exemple amb:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Implementació de la classe Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;base&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/* calcula i retorna l&amp;#39;àrea del triangle */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calculaArea&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En aquesta implementació veiem que tant la definició de les dades (el
&lt;tt class="docutils literal"&gt;struct&lt;/tt&gt; de C) com els procediments, apareixen en el mateix bloc de
codi (entre les claus que segueixen a &lt;tt class="docutils literal"&gt;public class Triangle&lt;/tt&gt;)&lt;/p&gt;
&lt;p&gt;La paraula clau &lt;tt class="docutils literal"&gt;class&lt;/tt&gt; de la línia 5, indica que el que ve a
continuació és el nom de la classe que s'està definint.&lt;/p&gt;
&lt;p&gt;Les línies 6 i 7 declaren les &lt;em&gt;propietats&lt;/em&gt; base i altura, metre que
els blocs iniciats a les línies 9 i 15 defineixen els mètodes
associats a la classe Triangle.&lt;/p&gt;
&lt;p&gt;Acompanyant a la definició de la classe i dels seus membres, veiem que
apareixen &lt;tt class="docutils literal"&gt;public&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;private&lt;/tt&gt;. Es tracta d'uns modificadors que
en Java permeten definir l'accessibilitat a aquesta classe i als seus
membres. Pel que respecta a aquest document introductori, &lt;em&gt;public&lt;/em&gt;
indica que la classe o el membre pot ser accedit per tothom, mentre
que &lt;em&gt;private&lt;/em&gt; limita l'accés a només el bloc on estigui definit el
membre &lt;a class="footnote-reference" href="#modificadorsdacces" id="id2"&gt;[2]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;El conjunt membres públics d'una classe formen el que es coneix com a
&lt;em&gt;interfície&lt;/em&gt; de la classe. Mentre es mantingui la mateixa interfície,
o com a molt, s'ampliï amb nous membres, els programes que fan servir
la classe han de poder continuar funcionant sense canvis: potser el
benefici més important de l'encapsulació.&lt;/p&gt;
&lt;p&gt;També cal esmentar que el mètode que es defineix a la línia 9 és una
mica especial. Per començar, no retorna cap tipus (ni tant sols
&lt;tt class="docutils literal"&gt;void&lt;/tt&gt;) i té el mateix nom de la classe. A aquests mètodes se'ls
anomena &lt;em&gt;constructors&lt;/em&gt; i tenen unes característiques especials que
queden fora dels objectius d'aquest text. &lt;a class="footnote-reference" href="#constructors" id="id3"&gt;[3]&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="objectes-instancies-i-referencies"&gt;
&lt;h3&gt;Objectes, instàncies i referències&lt;/h3&gt;
&lt;p&gt;Disposant de la definició d'un TAD, a l'igual que amb la definició
d'una classe, en realitat no disposem de cap dada d'aquest
tipus/classe. Per a aconseguir una dada d'aquest tipus/classe, ens
caldrà crear-la.&lt;/p&gt;
&lt;p&gt;En C, ho fem simplement dient:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Amb aquesta instrucció, el compilador reserva l'espai requerit per
allotjar tota la informació relativa a un triangle. Podem anomenar a
aquest espai com &lt;em&gt;instància&lt;/em&gt; del tipus triangle, i des del nostre
programa ens referirem amb el nom &lt;em&gt;t&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Aquest espai, donat que ha estat reservat pel propi compilador, serà
retornat automàticament en finalitzar el bloc on està definida.&lt;/p&gt;
&lt;p&gt;Per inicialitzar aquesta instància, si volem respectar el TAD, farem
servir la funció &lt;tt class="docutils literal"&gt;inicialitza_triangle()&lt;/tt&gt;, per exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En java, aquesta &lt;em&gt;instanciació&lt;/em&gt; es realitzaria mitjançant:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;La primera línia &lt;strong&gt;no&lt;/strong&gt; instància. Només declara una variable (o
referència) a una instància (també coneguda com a &lt;em&gt;objecte&lt;/em&gt;) de tipus
Triangle. Fins que no s'executa la segona línia, no es reserva espai
per la nova instància.&lt;/p&gt;
&lt;p&gt;Java, però, ens ofereix la possibilitat de compactar totes dues passes
(declaració i instanciació) en una sola línia:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En tot cas, és molt important tenir clar que aquesta instrucció es
composa de dues passes.&lt;/p&gt;
&lt;p&gt;A Java, com a molts altres llenguatges orientats a objectes, tots els
objectes es creen de manera dinàmica. És a dir, cal indicar
explícitament que es creï la instància (es reservi memòria per a
allotjar-la) i això té lloc en temps d'execució i no de compilació com
passa en C.&lt;/p&gt;
&lt;p&gt;C, és clar, també permet declarar dades dinàmicament. Per exemple,
podem crear un triangle de manera dinàmica fent servir quelcom similar
a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;*)&lt;/span&gt; &lt;span class="n"&gt;malloc&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sizeof&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;D'aquesta manera ens acostem molt més al que passa en Java. En aquest
cas, però, la instància referenciada per la variable t ja no ha estat
creada pel compilador i ens tocarà alliberar &lt;em&gt;explícitament&lt;/em&gt; el seu espai
quan ja no la necessitem. Això ho farem, per exemple, amb
&lt;tt class="docutils literal"&gt;free(t)&lt;/tt&gt;. Afortunadament, en Java, no ens caldrà preocupar-nos
d'alliberar explícitament la instància creada per &lt;tt class="docutils literal"&gt;new&lt;/tt&gt; perquè Java
(de fet un procés anomenat &lt;em&gt;recolector d'escombraries&lt;/em&gt; o &lt;em&gt;garbage
collector&lt;/em&gt;) ja se n'encarrega per nosaltres.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="us-dels-procediments-i-dels-metodes"&gt;
&lt;h3&gt;Ús dels procediments i dels mètodes&lt;/h3&gt;
&lt;p&gt;Per poder cridar a un procediment en C, simplement fem:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Veiem que al procediment li passem com a argument el triangle del que
ha de calcular l'àrea. És clar, la visió procedimental parteix de la
base que tenim un conjunt de dades a manipular i uns procediments que
la manipulen. El nom escollit per la funció
&lt;tt class="docutils literal"&gt;calcula_area_triangle()&lt;/tt&gt; ja implica que estem donant-li l'ordre de
calcular a &lt;em&gt;algú&lt;/em&gt;, probablement al programa. Ens cal indicar al nom
que es tracta del càlcul sobre un triangle, donat que també podríem
estar treballant al mateix programa amb un altre TAD anomenat
&lt;em&gt;Quadrat&lt;/em&gt; que tingués una funció equivalent pel càlcul de l'àrea (ex.
&lt;tt class="docutils literal"&gt;calcula_area_quadrat()&lt;/tt&gt;) Si ambdós es diguessin &lt;tt class="docutils literal"&gt;calcula_area()&lt;/tt&gt;
el compilador no sabria a quin dels dos procediments ens referim i
generaria un error.&lt;/p&gt;
&lt;p&gt;En Java, això no ens passa. El mètode està associat a la classe dins
del bloc que defineix la classe. Per poder-lo cridar, ens caldrà fer
referència d'alguna manera a la classe. La crida equivalent en Java
seria:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;calcula_area&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixem-nos que &lt;em&gt;t&lt;/em&gt; no se li passa com a argument dins dels parèntesis
de la crida, sinó que apareix abans del nom del mètode separat
d'aquest per un punt. Aquesta notació és la mateixa que fa servir C
per a poder accedir als camps d'un &lt;em&gt;struct&lt;/em&gt; i bé a implicar que, per
Java, tant les propietats com els mètodes formen part de la definició
de la classe. És a dir, són &lt;em&gt;membres&lt;/em&gt; de la classe.&lt;/p&gt;
&lt;p&gt;El mètode &lt;tt class="docutils literal"&gt;calcula_area()&lt;/tt&gt; queda associat a la classe &lt;em&gt;Triangle&lt;/em&gt; pel
fet que el tipus de la variable &lt;em&gt;t&lt;/em&gt; és &lt;em&gt;Triangle&lt;/em&gt;. A l'hora,
&lt;tt class="docutils literal"&gt;calcula_area()&lt;/tt&gt; sap de quin triangle concret ha de calcular l'àrea
perquè està associat a &lt;em&gt;t&lt;/em&gt; en ser cridat.&lt;/p&gt;
&lt;p&gt;Es podria entendre com si es fes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Triangle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;calcula_area&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;    &lt;span class="c1"&gt;// no compila en Java!&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;És a dir, la crida indica per una banda la classe en que es defineix
el mètode, i per una altra la instància a la que s'ha d'aplicar el
mètode. &lt;a class="footnote-reference" href="#pythonsiaccepta" id="id4"&gt;[4]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;A la crida a un mètode d'un objecte, en POO també se la coneix com a
&lt;em&gt;enviament de missatge&lt;/em&gt;, on el tipus del missatge el defineix el propi
mètode, mentre que el contingut del missatge es codifica en els
arguments que se li passa.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="programacio-orientada-a-objectes"&gt;
&lt;h3&gt;Programació orientada a objectes&lt;/h3&gt;
&lt;p&gt;Ara que hem fet una ullada a part de la nomenclatura de la programació
orientada a objectes, no ens hauria d'estranyar que aquest paradigma
entengui els programes com un conjunt d'objectes que interactuen entre
si, en comptes d'una llista d'instruccions que manipulen dades.&lt;/p&gt;
&lt;p&gt;Cada objecte és capaç de rebre i enviar missatges a altres objectes
(mitjançant crides a mètodes), processar dades, i en general mostrar
un comportament depenent de la seva lògica (el codi dels mètodes), el
seu estat (el valor de les seves propietats) i l'entorn en que es mou
(els arguments dels missatges i altres dades &amp;quot;globals&amp;quot; com per exemple
el contingut del buffer de teclat).&lt;/p&gt;
&lt;p&gt;Les dades dels programes ben orientats a objectes, solen estar
&amp;quot;protegides&amp;quot; de l'accés de codi que no sigui el que ofereixen els
mètodes de la classe.&lt;/p&gt;
&lt;p&gt;Cada classe sol tenir unes &lt;em&gt;responsabilitats&lt;/em&gt; molt concretes i
relacionades amb la classe, i minimitza la dependència amb altres
classes. Això permet reutilitzar les classes en contexts molt
diferents.&lt;/p&gt;
&lt;p&gt;Cada mètode, idealment, realitza una única responsabilitat de la
classe a la que pertany. Els mètodes solen contenir poques
instruccions ja que, quan la responsabilitat requereix moltes passes,
normalment es divideix en &amp;quot;subresponsabilitats&amp;quot; més petites a
realitzar per altres mètodes.&lt;/p&gt;
&lt;p&gt;El punt d'entrada (la funció &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;) d'un programa orientat a
objectes, sol ser un mètode (que compleix alguns requisits com ara
tenir un nom concret) de la classe que representa el &amp;quot;programa
principal&amp;quot;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-objectes-instancies-i-referencies"&gt;
&lt;h3&gt;Exercici 1. Objectes, instàncies i referències&lt;/h3&gt;
&lt;p&gt;Compara amb les teves paraules aquests tres conceptes (són el mateix?,
com es relacionen entre si?)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-el-tad-quadrat"&gt;
&lt;h3&gt;Exercici 2. El TAD Quadrat&lt;/h3&gt;
&lt;p&gt;Desenvolupa el TAD Quadrat en llenguatge C, amb les operacions
equivalents al TAD Triangle vist anteriorment.&lt;/p&gt;
&lt;p&gt;Crea un nou programa principal anomenat &lt;tt class="docutils literal"&gt;usafigures.c&lt;/tt&gt; que, fent
servir els dos TADs, calculi l'àrea d'un triangle de base 5 i altura
3, i la d'un quadrat de costat 5. Pots fer servir el següent exemple
com a plantilla:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Fitxer: usatriangle.c&lt;/span&gt;
&lt;span class="cm"&gt; * Programa que calcula l&amp;#39;àrea d&amp;#39;un triangle de base 5 i altura 3&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;quot;triangle.h&amp;quot;&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Triangle&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;inicialitza_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;area&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;calcula_area_triangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%g&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;area&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Recorda que amb gcc pots crear l'executable d'aquest codi amb la
comanda:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;gcc -o usatriangle usatriangle.c triangle.c
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-la-classe-quadrat"&gt;
&lt;h3&gt;Exercici 3. La classe Quadrat&lt;/h3&gt;
&lt;p&gt;Desenvolupa la classe Quadrat en llenguatge Java, amb les operacions
equivalents a la classe Triangle vista anteriorment.&lt;/p&gt;
&lt;p&gt;Crea una nova classe anomenada &lt;tt class="docutils literal"&gt;UsaFigures&lt;/tt&gt; que realitzi un càlcul
equivalent al de &lt;tt class="docutils literal"&gt;usafigures.c&lt;/tt&gt; de l'exercici anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-identificacio-d-elements"&gt;
&lt;h3&gt;Exercici 4. Identificació d'elements&lt;/h3&gt;
&lt;p&gt;Recupera el codi de les tres classes que has fet servir en l'exercici
anterior. Col·loca-ho tot en un mateix document i indica quines línies
contenen algun dels següents conceptes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;declaració de classe&lt;/li&gt;
&lt;li&gt;declaració de propietat&lt;/li&gt;
&lt;li&gt;declaració de mètode&lt;/li&gt;
&lt;li&gt;declaració de variable&lt;/li&gt;
&lt;li&gt;instanciació&lt;/li&gt;
&lt;li&gt;lectura de propietat&lt;/li&gt;
&lt;li&gt;escriptura de propietat&lt;/li&gt;
&lt;li&gt;crida a mètode&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per exemple, considera:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Implementació de la classe Triangle&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Triangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;     &lt;span class="c1"&gt;// declaració de classe&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;    &lt;span class="c1"&gt;// declaració de propietat&lt;/span&gt;

&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-5-estatic-vs-dinamic"&gt;
&lt;h3&gt;Exercici 5. Estàtic vs dinàmic&lt;/h3&gt;
&lt;p&gt;Descriu amb les teves paraules la diferència entre la creació estàtica
i dinàmica d'instàncies. Argumenta a favor i en contra de cada opció.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-opcional-creacio-dinamica-d-instancies-d-un-tad-en-c"&gt;
&lt;h3&gt;Exercici 6. (opcional) Creació dinàmica d'instàncies d'un TAD en C&lt;/h3&gt;
&lt;p&gt;Realitza una nova versió del codi dels programes que apareixen a
l'exercici del TAD Quadrat. En aquest cas, aconsegueix que les
instàncies de les figures siguin creades dinàmicament en comptes
d'estàticament.&lt;/p&gt;
&lt;p&gt;Aquest exercici, tot i sent opcional, és molt recomanable per a
arribar a entendre el funcionament d'instanciació de llenguatges com
Java.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;hr class="docutils" /&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="arrayadequat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En aquest exemple tan bàsic, probablement no és
molt més adequat fer servir un array que deixar base i altura com
estan. L'exemple, però, hauria de permetre veure que el canvi
d'implementació de les dades no afecta als programes usuaris del
TAD (a banda de requerir recompilació, és clar)&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="modificadorsdacces" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si tens preses per saber què hi ha al darrera
d'aquests mots en Java, pots consultar el que diuen els seus
dissenyadors al tutorial de Java sobre &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html"&gt;els modificadors&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="constructors" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Pels impacients, podeu mirar al tutorial de java
què diuen sobre &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html"&gt;els constructors&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="pythonsiaccepta" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Hi ha llenguatges que accepten les dues
notacions. Per exemple, Python requereix explicitar la instància
com a primer paràmetre dels mètodes, i després permet realitzar
crides tant a partir de la instància com a partir de la classe.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:53:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:procedural-vs-oo.html</guid><category>java</category></item><item><title>Constructors (part I)</title><link>http://apuntstecnics.herokuapp.com/constructors-part-i.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document introdueix els &lt;em&gt;constructors&lt;/em&gt;, un tipus especial de
bloc de codi que en programació orientada a objectes és cridat la
creació d'una nova instància d'una classe, i que té la funció de
preparar la instància per a ser utilitzada.&lt;/p&gt;
&lt;p&gt;Es tracta d'una primera aproximació al concepte que no tracta
característiques més avançades com la relació amb l'herència. Aquests
elements seran tractats posteriorment a la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/constructors-part-ii.html"&gt;segona part&lt;/a&gt; d'aquest document.&lt;/p&gt;
&lt;p&gt;Aquesta introducció comença amb una secció &lt;em&gt;teòrica&lt;/em&gt; que descriu els
constructors (i destructors), per després continuar amb l'anàlisi
d'exercicis en Java.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Atenció&lt;/strong&gt; La secció teòrica pot resultar molt complexa per qui mai
no ha estat exposat a la gestió explícita de memòria dinàmica. Si és
el teu cas, intenta aproximar-te-hi amb ment oberta.&lt;/p&gt;
&lt;p&gt;Es pressuposa que s'ha seguit els continguts de &lt;a class="reference external" href="poo006.classes_objectes.rst"&gt;classes i objectes&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="constructors-i-destructors"&gt;
&lt;h2&gt;Constructors i destructors&lt;/h2&gt;
&lt;p&gt;Un aspecte important, pels programes en execució, és la reserva i
posterior alliberament de memòria necessària per a poder fer encabir
dinàmicament les dades que manipulen.&lt;/p&gt;
&lt;p&gt;Considerem per exemple, la implementació d'una &lt;em&gt;llista dinàmica&lt;/em&gt; d'enllaç simple,
sovint es realitza amb una estructura (Node) que conté almenys dos
camps (el valor a guardar per un element de la llista i un apuntador
al següent node). Normalment ens cal disposar d'un apuntador al primer
node, i el darrer node apunta convenientment a un valor nul.&lt;/p&gt;
&lt;p&gt;La següent imatge esquematitza una llista d'aquestes amb dos elements.&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="Dos elements" src="http://apuntstecnics.herokuapp.com/images/poo008.img001.llistadin_doselem.png" /&gt;
&lt;/div&gt;
&lt;p&gt;En cas que hi vulguem afegir un nou node, ens cal realitzar les
següents passes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;strong&gt;reservar&lt;/strong&gt; l'espai pel nou node&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;inicialitzar&lt;/strong&gt; els valors del nou node. Com a mínim l'apuntador a
següent node, que farem apuntar al node que correspongui de la
llista, o bé a &lt;em&gt;null&lt;/em&gt; si ha de ser el nou darrer.&lt;/li&gt;
&lt;li&gt;reassignar l'apuntador del node de la llista que ha de ser anterior
al nou node, per què tingui com a següent el nou node.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;El resultat final queda representat per la següent imatge:&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="Tres elements" src="http://apuntstecnics.herokuapp.com/images/poo008.img002.llistadin_treselem.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Per una altra banda, quan volem eliminar un element de la llista, les
passes que hem de fer són:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;fer que el punter a següent node del node anterior al que volem
eliminar, passi a apuntar al node següent del node que volem
eliminar.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;alliberar&lt;/strong&gt; l'espai ocupat pel node a eliminar.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;El resultat final queda:&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="Menys elements" src="http://apuntstecnics.herokuapp.com/images/poo008.img003.llistadin_menyselem.png" /&gt;
&lt;/div&gt;
&lt;p&gt;De les operacions vistes en aquest exemple, podem dir que tot node de
la llista ha de ser:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;strong&gt;creat&lt;/strong&gt;: &lt;em&gt;reserva de memòria&lt;/em&gt; per a allotjar-lo i &lt;em&gt;inicialització&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;destruït&lt;/strong&gt;: &lt;em&gt;alliberament&lt;/em&gt; de la memòria reservada un cop sabem
que no ens cal tornar a fer-lo servir.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;En Java, la creació d'una nova instància la realitzem mitjançant
l'expressió &lt;tt class="docutils literal"&gt;new &lt;span class="pre"&gt;«Constructor»(«args»)&lt;/span&gt;&lt;/tt&gt; on «Constructor» coincideix
amb el nom de la classe i «args» corresponen als valors
d'inicialització (sovint no hi ha cap).&lt;/p&gt;
&lt;p&gt;La destrucció en Java &lt;strong&gt;no&lt;/strong&gt; es realitza explícitament (a diferència
d'altres llenguatges OO com ara C++) &lt;a class="footnote-reference" href="#javafinalize" id="id1"&gt;[2]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Java (com molts altres llenguatges OO) disposen d'un procés de baixa
prioritat anomenat &lt;em&gt;recolector d'escombraries&lt;/em&gt; (&lt;em&gt;Garbage Collector&lt;/em&gt;)
que se n'encarrega d'anar alliberant aquells espais de memòria que ja
no estan referenciats per ningú. El llenguatge no ens ofereix manera
d'influenciar a aquest procés &lt;a class="footnote-reference" href="#javagc" id="id2"&gt;[3]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;En tot cas &lt;strong&gt;sí&lt;/strong&gt; podem ajudar al &lt;em&gt;Garbage Collector&lt;/em&gt;. Si disposem
d'una instància que ocupa &lt;strong&gt;molta&lt;/strong&gt; memòria i sabem que ja no la
necessitem més al nostre programa, sempre podem assignar totes les
seves referències a &lt;tt class="docutils literal"&gt;null&lt;/tt&gt;. D'aquesta manera, el &lt;em&gt;Garbage Collector&lt;/em&gt;
sabrà de seguida que ja no cal i podrà actuar en conseqüència.
Considera el següent exemple:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="n"&gt;ClasseGrossa&lt;/span&gt; &lt;span class="n"&gt;cg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ClasseGrossa&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// instància que ocupa molt&lt;/span&gt;
&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;           &lt;span class="c1"&gt;// usem la instància tot el que la necessitem&lt;/span&gt;
&lt;span class="n"&gt;cg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;      &lt;span class="c1"&gt;// eliminem la referència a la instància&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-1-construccio-del-gat-renat"&gt;
&lt;h2&gt;Exercici 1. Construcció del gat Renat&lt;/h2&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// vides disponibles del gat Renat&lt;/span&gt;

    &lt;span class="c1"&gt;// constructor per defecte&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// constructor específic&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// canvia el nombre de vides si el nou valor és vàlid&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Al Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt; &lt;span class="n"&gt;megaRenat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;A Mega Renat li queden &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;megaRenat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Executa el programa i respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;A quina línia es posa el valor de vides de la instància creada a la 26?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A quina línia es posa el valor de vides de la instància creada a la 28?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Els blocs que s'inicien a les línies 5 i 8 semblen mètodes però hi
ha algunes diferències amb un mètode convencional. Quines són?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Què et suggereixen els comentaris de les línies 4 i 7?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quan s'executa el codi dels blocs iniciats a les línies 5 i 8.
Ajuda't, si et cal, de &lt;em&gt;xivatos&lt;/em&gt; &lt;a class="footnote-reference" href="#xivato" id="id3"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Elimina o comenta la línia 5. Continua funcionant el codi? Perquè
creus?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Substitueix el codi del bloc de la línia 8 pel següent i descriu
què passa a l'hora d'executar:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c1"&gt;// constructor específic&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;     &lt;span class="c1"&gt;// o també this.setVides(vides);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Per a què creus que serveix el &lt;tt class="docutils literal"&gt;this()&lt;/tt&gt;?&lt;/p&gt;
&lt;p&gt;Pista: posa un &lt;em&gt;xivato&lt;/em&gt; al constructor per defecte i compara que
passa en executar el codi quan &lt;tt class="docutils literal"&gt;this()&lt;/tt&gt; hi és, i quan el treus.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-el-gat-renat-pot-neixer-silenciosament"&gt;
&lt;h2&gt;Exercici 2. El gat Renat pot néixer silenciosament&lt;/h2&gt;
&lt;p&gt;Crea una nova versió de la classe GatRenat a partir de la que
incorporava la possibilitat de parlar i callar.&lt;/p&gt;
&lt;p&gt;En aquesta ocasió, la classe permetrà ser inicialitzada de manera que
parli o calli. Cal però, evitar que codi que ja funcionava amb la
versió anterior, deixi de fer-ho amb aquesta.&lt;/p&gt;
&lt;p&gt;Per defecte, el gat Renat &lt;em&gt;naixerà&lt;/em&gt; podent parlar i dirà &amp;quot;He nascut!&amp;quot;
en el moment de la seva creació. En cas, però, que es construeixi
silenciós, no dirà res en nàixer.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-lentorn-operatiu-del-gat-renat"&gt;
&lt;h2&gt;Exercici 3. L’entorn operatiu del gat Renat&lt;/h2&gt;
&lt;p&gt;Desenvolupa un nou programa que ofereixi a l’usuari la possibilitat
d’interaccionar amb el gat Renat (inclòs el silenciar-lo i fer-lo
tornar a parlar).&lt;/p&gt;
&lt;p&gt;El programa mostrarà com a &amp;quot;prompt&amp;quot; &lt;tt class="docutils literal"&gt;[Renat]:&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Les ordres que se li podran donar seran:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;com estàs?
aixeca’t
seu
estira’t
miola
calla
parla
adèu
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;L'entorn no distingirà entre majúscules i minúscules.&lt;/p&gt;
&lt;p&gt;En cas que la comanda introduïda per l'usuari no coincideixi amb
alguna d'aquestes, l'entorn respondrà amb el missatge &amp;quot;com?&amp;quot; i
continuarà demanant noves comandes.&lt;/p&gt;
&lt;p&gt;Inicialment el gat Renat parlarà i estarà estirat.&lt;/p&gt;
&lt;p&gt;Quan se li demani com està, si pot parlar, dirà &lt;tt class="docutils literal"&gt;estic «estat»&lt;/tt&gt; (per
exemple, &lt;tt class="docutils literal"&gt;estic estirat&lt;/tt&gt;), altrament respondrà amb &lt;tt class="docutils literal"&gt;...&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Quan se li digui &lt;tt class="docutils literal"&gt;adèu&lt;/tt&gt;, si pot parlar respondrà amb &lt;tt class="docutils literal"&gt;adèu&lt;/tt&gt;,
altrament també s'acomiadarà silenciosament amb un &lt;tt class="docutils literal"&gt;...&lt;/tt&gt;. En tots
dos casos finalitzarà.&lt;/p&gt;
&lt;p&gt;Per la resta de comandes, el programa respondrà amb el que respongui
el gat.&lt;/p&gt;
&lt;p&gt;Crea un joc de proves que permeti comprovar el funcionament de
cadascuna de les opcions. El joc de proves estarà format per dos
fitxers, un amb les comandes d'entrada i un amb la sortida esperada.&lt;/p&gt;
&lt;p&gt;El d'entrada començarà amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;com estàs?
aixeca&amp;#39;t
«...»
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;El de sortida començarà amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;He nascut!
[Renat] estic estirat
[Renat] m&amp;#39;aixeco
[Renat] «...»
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nota: en cas que ens descuidem de finalitzar al fitxer d'entrada amb
&amp;quot;adèu&amp;quot;, és molt probable que ens surti un error d'execució del tipus
&lt;tt class="docutils literal"&gt;java.lang.NullPointerException&lt;/tt&gt;. El problema és que la lectura de
l'entrada estàndard ens returna &lt;tt class="docutils literal"&gt;null&lt;/tt&gt; en comptes d'un string buit.
Caldrà només continuar quan llegim res que no sigui null. És clar, si
arribem a null finalitzarem l'execució però no ens acomiadarem de
l'usuari. Faltaria més!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-la-classe-hora"&gt;
&lt;h2&gt;Exercici 4. La classe Hora&lt;/h2&gt;
&lt;p&gt;Implementa la classe Hora amb les propietats (privades) hora, minut i
segon de tipus enter, i els accessors (públics) que assegurin que
l'hora és sempre vàlida.&lt;/p&gt;
&lt;p&gt;Per defecte, l'hora correspondrà a &lt;tt class="docutils literal"&gt;0:00:00&lt;/tt&gt;, però la classe oferirà
els mecanismes necessaris per a inicialitzar una hora amb algun altre
valor &lt;em&gt;vàlid&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Afegeix els següents mètodes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void incrementa()&lt;/tt&gt;: fa que l'hora tingui un segon més&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void seguent(int)&lt;/tt&gt;: fa que l'hora s'incrementi en el nombre de segons indicats&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void decrementa()&lt;/tt&gt;: fa que l'hora tingui un segon menys&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void decrementa(int)&lt;/tt&gt;: fa que l'hora es decrementi en el nombre de segons indicats&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;int compareTo(Hora)&lt;/tt&gt;: compara amb l'hora indicada i retorna &amp;lt;0 si és menor que la indicada, 0 si són iguals i &amp;gt;0 si és més gran que la indicada.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String toString()&lt;/tt&gt;: retorna un string amb l'hora en format h:mm:ss.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Desenvolupa una funció &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que demani a l'usuari les dades de
tres hores i, fent servir la classe Hora, les mostri ordenades
creixentment.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Notes / pistes&lt;/strong&gt;&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;En cas que un constructor específic es trobi amb un o més
paràmetres no vàlids, inicialitzarà la instància amb els valors per
defecte.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Per escriure el 0 inicial als minuts i segons quan el valor és
menor de 10, es pot fer servir el mètode &lt;a class="reference external" href="https://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html"&gt;System.out.format()&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Per si vas justet de temps:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;#39;%d %02d %05d%n&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;O més compacte:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;#39;%d %1$02d %1$05d%n&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-la-classe-persona"&gt;
&lt;h2&gt;Exercici 5. La classe Persona&lt;/h2&gt;
&lt;p&gt;Implementa la classe Persona amb les propietats nom, cognoms, any de
naixement i any de defunció protegides amb inicialitzadors i
accessors, que respectin les següents regles:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;l'any de naixement haurà de ser sempre un enter positiu&lt;/li&gt;
&lt;li&gt;l'any de defunció només pot ser -1, per representar que la persona
encara és viva, o bé un valor superior o igual al de l'any de
naixement. En cap cas, però, es permetrà a l'usuari de la classe
indicar explícitament el valor -1 per l'any de defunció. Per
corregir l'estat d'una persona i indicar que està viva, caldrà fer
servir el mètode &lt;tt class="docutils literal"&gt;setViu()&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;cap persona pot no tenir nom, cognoms o any de naixement.&lt;/li&gt;
&lt;li&gt;les persones poden ser inicialitzades vives o no.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;El càlcul de l'edat es realitzarà únicament a partir de l'any de
naixement i serà, per tant, aproximat (no disposem del mes i el dia).&lt;/p&gt;
&lt;p&gt;Per saber l'any actual, podem fer servir el següent codi:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;anyAct&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Calendar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getInstance&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Calendar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;YEAR&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Desenvolupa un main() que demani a l'usuari les dades d'una persona
(incloent la de defunció si és el cas), construeixi una instància de
Persona amb aquestes dades i indiqui:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;si la persona és difunta: l'edat a la que va arribar&lt;/li&gt;
&lt;li&gt;si la persona està encara viva: l'edat actual&lt;/li&gt;
&lt;/ul&gt;
&lt;hr class="docutils" /&gt;
&lt;table class="docutils footnote" frame="void" id="xivato" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;Un &lt;em&gt;xivato&lt;/em&gt; és un missatge, normalment escrit per sortida
estàndard, que permet saber que s'ha passat per alguna línia de codi.&lt;/p&gt;
&lt;p&gt;Es tracta d'una pràctica senzilla i eficaç per realitzar proves de
codi quan no es disposa d'un depurador (o no es pot/vol fer
servir).&lt;/p&gt;
&lt;p&gt;Solen ser molt més efectius quan incorporen certa informació de
context. Per exemple, trobar-se:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;per aquí 1
per aquí 2
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;és molt menys informatiu vistós que un:&lt;/p&gt;
&lt;div class="last"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;XXX GatRenat.setVides(-12): entra amb vides inicials 7
XXX GatRenat.setVides(-12): surt amb vides finals 7
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="javafinalize" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si bé els objectes Java disposen del
mètode &lt;tt class="docutils literal"&gt;finalize()&lt;/tt&gt;, es tracta d'un mètode per especificar accions
de neteja i no per decidir quan una instància ha de ser alliberada.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="javagc" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;De fet si que podem fer una crida a
&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;Runtime.getRuntime().gc()&lt;/span&gt;&lt;/tt&gt; o &lt;tt class="docutils literal"&gt;System.gc()&lt;/tt&gt; què, com diu
l'especificació del mètode, &lt;em&gt;suggereix&lt;/em&gt; a la màquina virtual de
Java a dedicar esforços per recuperar la memòria disponible, tot i
que serà cridat de manera automàtica cada cop que la màquina
virtual ho trobi necessari.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:52:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:constructors-part-i.html</guid><category>java</category></item><item><title>Membres d'instància i de classe</title><link>http://apuntstecnics.herokuapp.com/membres-dinstancia-i-de-classe.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Tot i que habitualment els membres que definim a les nostres classes,
estan orientats a cada instància concreta de la classe, hi ha
ocasions en que ens cal disposar de mètodes o/i propietats que facin
referència a tota la classe i no a una instància concreta d'aquesta.&lt;/p&gt;
&lt;p&gt;En aquest document es discuteix aquesta possibilitat en forma de
membres d'instància i de classe.&lt;/p&gt;
&lt;p&gt;Com a &lt;em&gt;extra&lt;/em&gt; se li afegeix el concepte de &lt;em&gt;final&lt;/em&gt; què,
simplificant-ho molt, permet indicar que quelcom és constant.&lt;/p&gt;
&lt;p&gt;Es pressuposa que s'ha seguit els continguts de &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/classes-i-objectes.html"&gt;classes i objectes&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-metodes-de-classe"&gt;
&lt;h2&gt;Exercici 1. Mètodes de classe&lt;/h2&gt;
&lt;p&gt;Fins ara, tots els mètodes que hem programat depenien d'una instància
per a funcionar. Tots? Bé, potser només fins on hem estat conscients.&lt;/p&gt;
&lt;p&gt;Per cridar-los, ens calia indicar «referència a la instància».«nom del
mètode» o, des del codi d'un mètode de la classe també podíem
directament cridar el nom del mètode.&lt;/p&gt;
&lt;p&gt;Per exemple, a la classe Hora, el mètode d'incrementar un segon
requeria una instància d'hora a qui aplicar-lo. Dèiem&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;incrSeg&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ara bé, imagina que volguéssim comprovar que els valors d'una hora són
vàlids abans d'assignar-los a una instància de Hora. El mètode podria
ser quelcom semblant a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;esValida&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{...}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aquest mètode, però, no requeriria l'accés a l'estat de cap instància
de Hora, i amb qualsevol instància de Hora hauria de donar el mateix
resultat. Per a poder-lo usar, ens caldria, però, crear una instància
que probablement no la voldrem per res més. Per exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;esValida&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per a solucionar aquest tipus de situacions, la POO ens ofereix la
possibilitat de distingir mètodes de classe de mètodes d'instància.
Aquest de esValida() seria clarament un mètode de classe ja que no depèn
de cap instància per a ser executat.&lt;/p&gt;
&lt;p&gt;Java ens permet indicar que un mètode és de classe amb la paraula
reservada static. Així, el mètode &lt;tt class="docutils literal"&gt;esValida()&lt;/tt&gt; tindria el següent aspecte&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;esValida&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{...}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per a ser utilitzat, a banda de com abans, també podríem fer-ho d'una
manera més eficient amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;esValida&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que ara, en comptes de cridar al mètode des d'una instància, ho
fem directament a partir de la classe!&lt;/p&gt;
&lt;p&gt;Ara potser comença a tenir sentit la paraula &lt;tt class="docutils literal"&gt;static&lt;/tt&gt; del
&lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;, oi?&lt;/p&gt;
&lt;p&gt;En aquest exercici es demana que ampliïs la classe Hora amb els
mètodes estàtics:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean esValida(int, int, int)&lt;/tt&gt;: retorna true si i només sí les
hores, minuts i segons indicats, en aquest ordre, pels paràmetres,
corresponen a una combinació vàlida per una hora.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;int compareTo(Hora, Hora)&lt;/tt&gt;: retorna -1 si la primera hora és
menor que (anterior a) la segona, 0 si són iguals i 1 si la primera
és més gran que (posterior a) la segona.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;Hora duplica(Hora)&lt;/tt&gt;: retorna una nova instància de la classe Hora
amb els mateixos valors per les propietats de l'hora rebuda.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Aquest últim retorna una nova instància de Hora amb els mateixos
valors de la que rep.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-propietats-de-classe"&gt;
&lt;h2&gt;Exercici 2. Propietats de classe&lt;/h2&gt;
&lt;p&gt;Les propietats també poden ser de classe.&lt;/p&gt;
&lt;p&gt;Un dels exemples més típics és el de portar el comptador de quantes instàncies d'una classe s'han creat.&lt;/p&gt;
&lt;p&gt;Considera el següent codi, executa'l i intenta entendre el perquè de la sortida&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* Demostració d&amp;#39;ús de membres de classe */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;numInstancies&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// constructor per defecte incrementa el nombre d&amp;#39;instàncies&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;numInstancies&lt;/span&gt;&lt;span class="o"&gt;++;&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Creat un nou gat Renat. Ja van &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;numInstancies&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getNumInstancies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// retorna el nombre d&amp;#39;instàncies creades fins el moment&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;numInstancies&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Gat Renat amb &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Inicialment el nombre d&amp;#39;instàncies és: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
            &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNumInstancies&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="c1"&gt;// crea uns quants GatRenat per demostrar l&amp;#39;ús de membres estàtics&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="na"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;    &lt;span class="c1"&gt;// canviem les vides només per distingir-los&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Tenim: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; amb &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="na"&gt;getNumInstancies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; germanets&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="c1"&gt;// tornem a demanar a cadascun quants germans té&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;I si tornem a demanar-los quants germans tenen, ens diuen:&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; amb &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="na"&gt;getNumInstancies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; germanets&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Demostra que l'has entès realitzant la següent modificació al codi:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;cada gat haurà de tenir un número identificador que indiqui en quin
ordre va nàixer respecte els seus germans.&lt;/li&gt;
&lt;li&gt;Aquest identificador es podrà demanar (amb el mètode &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;get«X»()&lt;/span&gt;&lt;/tt&gt;),
però no modificar; i apareixerà a la cadena retornada pel mètode
&lt;tt class="docutils literal"&gt;toString()&lt;/tt&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Nota: la darrera crida a &lt;tt class="docutils literal"&gt;println()&lt;/tt&gt; es podria escriure més
simple, sense necessitat de cridar explícitament al mètode
&lt;tt class="docutils literal"&gt;toString()&lt;/tt&gt;. Considera:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; amb &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
    &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="na"&gt;getNumInstancies&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; germanets&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;El mètode &lt;tt class="docutils literal"&gt;toString()&lt;/tt&gt; té la particularitat de ser cridat
(implícitament) en alguns contextos on s'espera un String, com ara en
aquesta concatenació de Strings que passem a &lt;tt class="docutils literal"&gt;println()&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-propietats-finals"&gt;
&lt;h2&gt;Exercici 3. Propietats finals&lt;/h2&gt;
&lt;p&gt;La paraula clau final pot ser aplicada a diferents elements.&lt;/p&gt;
&lt;p&gt;L'aplicació a classes té a veure amb el concepte d'herència que no es
tracta en aquest document.&lt;/p&gt;
&lt;p&gt;L'aplicació a mètodes sovint està també relacionada amb l'herència. Un
altre ús és per l'eficiència: el compilador pot substituir les crides
al mètode final pel seu codi (&lt;em&gt;inline call&lt;/em&gt;). Tot i que teòricament
Java sap quan ha de fer aquestes substitucions, es recomana només
indicar final per temes d'eficiència a mètodes molt breus o el codi
podria tornar-se massa gran. En aquestes primeres etapes
d'aprenentatge de la POO i de Java, no cal que ens preocupem d'aquest
tipus d'optimització.&lt;/p&gt;
&lt;p&gt;L'aplicació a paràmetres permet indicar que el paràmetre no pot
canviar el seu valor dins del codi (paràmetres &lt;em&gt;read-only&lt;/em&gt;) De la
mateixa manera, si indiquem que una variable és final, només li podrem
assignar valor un sol cop.&lt;/p&gt;
&lt;p&gt;L'aplicació a propietats permet indicar que la propietat només pot
rebre un valor un cop en tota l'execució. És una mena de constant de
la instància. En cas que hi afegim &lt;tt class="docutils literal"&gt;static&lt;/tt&gt;, la constant és de la
classe.&lt;/p&gt;
&lt;p&gt;També podem afegir &lt;em&gt;final&lt;/em&gt; a una variable. El comportament és el
mateix que amb les propietats: el compilador només permet assignar un
cop a la variable.&lt;/p&gt;
&lt;p&gt;Nota: en cas que la propietat o variable referenciï a una instància
mutable (que els valors de les seves propietats puguin ser
modificats), fer que la propietat/variable sigui final &lt;strong&gt;no&lt;/strong&gt;
converteix la instància referenciada en immutable, només impedeix que
la referència canviï a una altra instància. Per exemple:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;canviaI&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;canviaA&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;nova&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nova&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// error de compilació&lt;/span&gt;
                    &lt;span class="c1"&gt;// &amp;quot;error: cannot assign a value to final variable a&amp;quot;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Per a aquest exercici es demana que trobis una manera d'aplicar el
concepte de propietat final a la teva resposta del problema anterior.&lt;/p&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:51:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:membres-dinstancia-i-de-classe.html</guid><category>java</category></item><item><title>Relacions entre classes</title><link>http://apuntstecnics.herokuapp.com/relacions-entre-classes.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;En la programació orientada a objectes, els programes es composen de
classes que interaccionen les unes amb les altres. Aquesta interacció
de les classes es realitza en funció de la relació que tenen aquestes
classes entre si.&lt;/p&gt;
&lt;p&gt;Aquest document explora aquestes relacions amb una excepció important,
&lt;em&gt;l'herència&lt;/em&gt;, que serà abordada en un altre document.&lt;/p&gt;
&lt;p&gt;Aquesta introducció es realitza de manera pràctica, a partir de
l'anàlisi de dos exercicis.&lt;/p&gt;
&lt;p&gt;Es pressuposa coneixement de creació i construcció de classes en
Java.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-el-picarol"&gt;
&lt;h2&gt;Exercici 1. El Picarol&lt;/h2&gt;
&lt;p&gt;Definició: Quan una classe A usa els serveis (membres públics) d'una
altra B, es diu que hi ha una &lt;em&gt;dependència&lt;/em&gt; entre la classe A i la B.
Quan B pateix algun canvi en la seva interfície, A podria requerir ser
modificat.&lt;/p&gt;
&lt;p&gt;Definició: Es diu que una classe A &lt;em&gt;agrega&lt;/em&gt; una classe B quan té una
dependència de B, de manera que l'existència de B és independent de la
de A. És a dir la instància de B pot ser creada abans que la de A i
&amp;quot;sobreviure&amp;quot; després de A. Es diu que A usa (uses-a) B&lt;/p&gt;
&lt;p&gt;Aquesta relació de dependència es coneix com a &lt;strong&gt;agregació&lt;/strong&gt;. En java,
s'implementa normalment amb una propietat de l'objecte agregat. En cas
d'haver de duplicar una instància de la classe A, les dues instàncies
farien referència a la mateixa instància de la classe B.&lt;/p&gt;
&lt;p&gt;Considera la classe Picarol que ofereix el servei (mètode) &lt;tt class="docutils literal"&gt;sona()&lt;/tt&gt;
que de moment, simplement escriu per pantalla el missatge
&amp;quot;clink-clink&amp;quot;.&lt;/p&gt;
&lt;p&gt;Ara el nostre gat Renat, si li pengem un picarol, cada cop que es
mogui (s'aixeca, seu o s'estira), farà sonar el picarol
amb independència de si el gat calla o parla.&lt;/p&gt;
&lt;p&gt;Es demana:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;implementa la classe Picarol amb el mètode &lt;em&gt;sona()&lt;/em&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;amplia la classe del gat Renat amb els següents mètodes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean tePicarol()&lt;/tt&gt;: cert si té un picarol assignat. Inicialment no en té.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;posaPicarol(Picarol)&lt;/tt&gt;: assigna un picarol. Si en tenia un, el
substitueix pel nou&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;Picarol treuPicarol()&lt;/tt&gt;: retorna el picarol i l'elimina. Si no en
tenia cap, retorna null.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;crea una nova versió de l'entorn operatiu del gat Renat, que
ofereixi les noves comandes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;posa&amp;#39;t picarol
treu-te picarol
tens picarol?
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En cas que ja tingui un picarol i li demanin posar-se un altre
respondrà amb &amp;quot;ja tinc picarol&amp;quot;. En canvi, si no en tenia i se li
demana treure'l dirà &amp;quot;no en tinc cap de picarol&amp;quot;. A la pregunta si té
picarol contestarà &amp;quot;sí&amp;quot; o &amp;quot;no&amp;quot; segons correspongui. Cal tenir present
que si Renat no pot parlar, en comptes d'aquests missatges dirà
l'habitual &amp;quot;...&amp;quot;.&lt;/p&gt;
&lt;p&gt;Crea un joc de proves que mostri el funcionament d'aquestes noves
funcionalitats així com el fet que sona quan el gat es mou.&lt;/p&gt;
&lt;p&gt;Atenció: el Gat Renat &lt;strong&gt;no&lt;/strong&gt; ha de ser responsable de crear la
instància de cap Picarol! És quelcom que els seus usuaris li donaran,
si ho estimen oportú.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-els-ulls-del-gat-renat"&gt;
&lt;h2&gt;Exercici 2. Els ulls del gat Renat&lt;/h2&gt;
&lt;p&gt;Definició: Es diu que una classe A es &lt;em&gt;composa&lt;/em&gt; d'una altra B quan
existeix una dependència de A a B com a l'agregació, però en aquest
cas, la instància de B està completament lligada a la de A. Es diu
també B forma part de A i que A té (has-a) B.&lt;/p&gt;
&lt;p&gt;Aquesta relació de dependència es coneix com &lt;strong&gt;composició&lt;/strong&gt;. En java,
la implementació és molt similar a la de la relació d'agregació: amb
una propietat. La diferència consisteix en el fet que la creació de la
instància (on es fa el new) és dins de la classe A. En cas que
haguéssim de duplicar una instància de la classe A, hauríem també de
duplicar la instància de la classe B.&lt;/p&gt;
&lt;p&gt;Implementa la classe UllDeGat. Un UllDeGat pot estar obert o tancat i
ofereix els mètodes &lt;tt class="docutils literal"&gt;obret()&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;tancat()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;boolean
estasObert()&lt;/tt&gt;. En obrir-se els ulls &lt;strong&gt;sempre&lt;/strong&gt; fa el soroll &amp;quot;nyeek&amp;quot; i
en tancar-se &lt;strong&gt;sempre&lt;/strong&gt; fa el soroll &amp;quot;plonx&amp;quot;. Evidentment, si demanem
obrir quan els ulls ja es troben oberts, no en farà res. Inicialment
l'ull estarà tancat per defecte i no farà soroll de tancament en
néixer.&lt;/p&gt;
&lt;p&gt;Amplia la classe GatRenat de manera que ara tingui &lt;strong&gt;dos&lt;/strong&gt; ulls. Els
ulls estaran oberts o tancats depenent de l'estat del gat. Si el gat
està dret, tots dos ulls estaran oberts. Si està assegut, l'ull dret
estarà obert i l'esquerre estarà tancat. Quan està estirat, tots dos
ulls estaran tancats. Per facilitar la prova, el gat sempre començarà
a obrir/tancar l'ull esquerre abans que el dret.&lt;/p&gt;
&lt;p&gt;Crea un joc de proves que tingui com a entrada el joc de proves
que vas crear quan l'entorn no considerava ni ulls ni picarol, i la
sortida quedi adaptada als sorolls dels ulls. El joc de proves hauria
de ser vàlid tan per l'entorn que considerava el picarol com per
l'anterior, sense requerir cap canvi en ambdós programes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="tot-plegat"&gt;
&lt;h2&gt;Tot plegat&lt;/h2&gt;
&lt;p&gt;Respecte les dues relacions que acabem de veure, considerarem que:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;la relació d'agregació es un tipus de relació feble entre dues
classes.&lt;/p&gt;
&lt;p&gt;Presenta les següents característiques:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;el component pot ser accedit directament sense que calgui passar
per la instància que l'agrega.&lt;/li&gt;
&lt;li&gt;el component pot sobreviure la instància que l'agrega.&lt;/li&gt;
&lt;li&gt;el mateix component podria ser agregat per més d'una instància&lt;/li&gt;
&lt;li&gt;la instància que agrega el component normalment no té
responsabilitats sobre aquest: per exemple, no sol ser
l'encarregada de crear-lo.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;la relació de composició és molt més forta que la d'agregació.&lt;/p&gt;
&lt;p&gt;Algunes característiques:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;la instància que conté el component, es considera &lt;em&gt;propietària&lt;/em&gt;
d'aquest.&lt;/li&gt;
&lt;li&gt;els component són elements (part) del propietari.&lt;/li&gt;
&lt;li&gt;el component forma part de l'estat del propietari. És a dir, un
canvi en l'estat del component resulta en un canvi d'estat del
composat.&lt;/li&gt;
&lt;li&gt;el component només pot ser accedit a partir del contenidor. Es diu
que el component està encapsulat pel propietari. Sovint, la classe
contenidora no ofereix mecanismes per obtenir el component (get),
especialment quan aquest sigui mutable.&lt;/li&gt;
&lt;li&gt;el temps de vida del component queda liminat al del propietari. És
a dir, quan desaparegui la instància del propietari, també ho farà
la del component.&lt;/li&gt;
&lt;li&gt;el propietari és responsable dels seus components: per exemple, el
crea.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-ampliacio-la-llista-dinamica-en-java"&gt;
&lt;h2&gt;Exercici 3. (ampliació) La llista dinàmica en Java&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Atencio&lt;/strong&gt;: Aquest és un exercici d'ampliació. Encara que opcional,
pot resultar molt interessant per a aquells estudiants que no hagin
pogut treballar amb memòria dinàmica de manera explícita (ex. amb el
llenguatge C)&lt;/p&gt;
&lt;p&gt;Implementa en Java la llista dinàmica vista a la secció &lt;strong&gt;Constructors
i Destructors&lt;/strong&gt; de la introducció als &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/constructors-part-i.html"&gt;constructors&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Et caldran tres classes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Node: tindrà dos propietats: &lt;em&gt;valor&lt;/em&gt; que per simplificar serà un
string, i &lt;em&gt;seguent&lt;/em&gt; que serà de tipus Node (sí, com la classe!) i
que per defecte valdrà null.&lt;/p&gt;
&lt;p&gt;La classe oferirà la possibilitat d'accedir a les dues propietats
(get/set) i inicialitzar-les totes dues, una o cap, en el moment de
la seva construcció.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Llista: tindrà una propietat: &lt;em&gt;primer&lt;/em&gt; de tipus Node que
inicialment apuntarà a null.&lt;/p&gt;
&lt;p&gt;Oferirà els mètodes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void afegir(int, String)&lt;/tt&gt;: afegeix un nou node a la posició de
la llista indicada pel primer paràmetre i el valor expressat pel
segon. En cas que la posició especificada sigui més gran que el
nombre d'elements a la llista, simplement es col·locarà el nou
element al final. Altrament, es desplaçaran convenientment tots
els nodes de la llista per fer encabir el nou a la posició
requerida.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void eliminar(int)&lt;/tt&gt;: elimina el node situat a la posició
indicada pel paràmetre. Si la posició és superior al nombre
d'elements de la llista, no fa res.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;void elimina(String)&lt;/tt&gt;: elimina tots els nodes que el valor
coincideixi amb el del paràmetre. Si no hi ha cap, no fa res.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String toString()&lt;/tt&gt;: retorna una representació de la llista en
forma de String. Així, si la llista conté els valors &amp;quot;Hola&amp;quot;, &amp;quot;i&amp;quot;,
&amp;quot;adéu&amp;quot;, aquest mètode retornarà el String &amp;quot;[Hola -&amp;gt; i -&amp;gt; adéu]&amp;quot;. Si
està buida, retornarà simplement &amp;quot;[]&amp;quot;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;UsaLlista: disposarà d'un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que construirà una llista,
afegirà els valors &amp;quot;Hola&amp;quot;, &amp;quot;i&amp;quot;, adéu&amp;quot;, i després els eliminarà un a
un començant pel primer. A cada pas, mostrarà el contingut de la
llista per sortida estàndard. El resultat hauria de ser quelcom
molt similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;[]
[Hola]
[Hola -&amp;gt; i]
[Hola -&amp;gt; i -&amp;gt; adéu]
[i -&amp;gt; adéu]
[adéu]
[]
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-repte-les-urpes-del-gat-renat"&gt;
&lt;h2&gt;Exercici 4. (repte) Les Urpes del gat Renat&lt;/h2&gt;
&lt;p&gt;Et proposo aquest exercici d'ampliació dels conceptes que hem
treballat en aquest tema.&lt;/p&gt;
&lt;p&gt;Atenció: aquest problema és un &lt;strong&gt;repte&lt;/strong&gt;. La part més difícil és, com
sol passar, entendre el que es demana. Ah! Encara que ho sembli, no et
caldrà multifil (&lt;em&gt;multithread&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;Implementa la classe UrpesDeGat i modifica GatRenat segons el diagrama
de classes:&lt;/p&gt;
&lt;p&gt;El funcionament de UrpesDeGat és el següent:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Inicialment les urpes estan esmolades al 100% i s'estan desgastant&lt;/li&gt;
&lt;li&gt;Quan criden el servei esmola(), les urpes comencen a esmolar-se. El
màxim, és clar, és un 100%.&lt;/li&gt;
&lt;li&gt;Quan criden el servei desgasta(), les urpes comencen a
desgastar-se. El mínim, és clar, és un 0%&lt;/li&gt;
&lt;li&gt;Quan es demana el canvi a esmolant o desgastant, o bé quan es
demana el grau d'esmolat es recalcula el grau d'esmolament a partir
del temps que portava esmolant-se o desgastant-se des del darrer
recàlcul, i per cada 1 milisegon se li suma/resta un 1%
d'esmolament.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;El gat Renat tindrà urpes, és clar. I fixa't que ara el gat Renat
tindrà un nou estat possible (caminant). Quan el gat estigui en un
estat que no sigui caminant, les seves urpes estaran desgastant-se i,
quan estigui caminant, en canvi, les urpes estaran esmolant-se. En cas
que les urpes estiguin totalment desgastades, el gat Renat deixarà de
fer-nos cas a les ordres de canvi d'estat i es posarà a caminar fins
que el grau d'esmolament sigui al menys 20%.&lt;/p&gt;
&lt;p&gt;Prova la nova versió del gat Renat amb el seu entorn operatiu, tot
realitzant els canvis que consideris oportuns per a mostrar les noves
funcionalitats.&lt;/p&gt;
&lt;p&gt;Com a pista/ajut per a treballar aquest exercici, considera el següent
codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* Demostració d&amp;#39;ús del temps */&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Calendar&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;momentNaixement&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// ens guardem el moment del naixement&lt;/span&gt;
        &lt;span class="n"&gt;momentNaixement&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Calendar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getInstance&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getTimeInMillis&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="c1"&gt;// ens esperem una estoneta perquè es pensin que costa molt crear un gat&lt;/span&gt;
        &lt;span class="n"&gt;esperatUnaEstona&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;esperatUnaEstona&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// fa que el programa es detengui una estona pseudoaleatòria&lt;/span&gt;
        &lt;span class="c1"&gt;// De moment, no cal que intentis entendre com ho fa això&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;tempsEspera&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;random&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;lang&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Thread&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sleep&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tempsEspera&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;InterruptedException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getVides&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="nf"&gt;getTempsViu&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// retorna el nombre de milisegons que porta viu&lt;/span&gt;
        &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;actual&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Calendar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getInstance&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getTimeInMillis&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;actual&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;momentNaixement&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Gat Renat amb &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; vides.  Porta viu &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;getTempsViu&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; milisegons&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// crea uns quants GatRenat per demostrar com passa el temps&lt;/span&gt;
        &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="na"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="c1"&gt;// tornem a veure el temps que porten vius&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;I si tornem mirar:&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:50:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:relacions-entre-classes.html</guid><category>java</category></item><item><title>Herència</title><link>http://apuntstecnics.herokuapp.com/herencia.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Si es pregunta pel concepte més &lt;em&gt;representatiu&lt;/em&gt; de la programació
orientada a objectes, amb pocs dubtes sortiria el d'&lt;strong&gt;herència&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Ja hem vist un parell de relacions entre classes: &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/relacions-entre-classes.html"&gt;la agregació i la
composició&lt;/a&gt;. L'herència és una
altra relació de dependència entre dues classes.&lt;/p&gt;
&lt;p&gt;Aquest document introdueix el concepte d'herència i explora algunes de
les repercussions més visibles en la programació orientada a objectes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="l-herencia"&gt;
&lt;h2&gt;L'herència&lt;/h2&gt;
&lt;p&gt;Què tenen en comú en Renat, el Garfield, el Misifú, i en Tom (company
del Jerry)? Doncs tots ells tenen quatre potes amb urpes i ullals,
miolen, respiren, mengen sardines, empaiten ratolins... en definitiva:
són gats.&lt;/p&gt;
&lt;p&gt;I, què tenen en comú els gats, els gossos i els ratolins? Doncs que
respiren, mengen... en definitiva: són animals. Però també són éssers
vius, mamífers terrestres, de sang calenta, amb endoesquelet...&lt;/p&gt;
&lt;p&gt;Cadascuna de les diferents categories (classes) a les que pertany en
Renat, li ofereix un conjunt de característiques. En Renat hereta
necessitat de menjar per ser ésser viu, de respirar per ser animal, un
esquelet intern per ser un animal amb endoesquelet, urpes i ullals per
ser felí, etc.&lt;/p&gt;
&lt;p&gt;Diem que Renat és un gat (is-a). I com que els gats són felins, en
Renat és un felí. I com que els felins són animals, en Renat és un
animal. És a dir, la relació is-a és transitiva:&lt;/p&gt;
&lt;blockquote&gt;
Si A és subclasse de B, i B és subclasse de C, llavors A és subclasse de C&lt;/blockquote&gt;
&lt;p&gt;El següent diagrama mostra una jerarquia &lt;em&gt;parcial&lt;/em&gt; dels animals.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Jerarquia d'animals" src="http://apuntstecnics.herokuapp.com/images/poo011.img001.jerarquia_animals.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Al diagrama, les &lt;em&gt;caixes&lt;/em&gt; amb nom representen classes, mentre que les
fletxetes (totes amb nom &lt;em&gt;és un&lt;/em&gt;) representen la relació d'herència
entre dues classes. La classe d'on parteix la fletxa és la que hereta
de la classe destinació de la fletxa.&lt;/p&gt;
&lt;p&gt;Quan una classe A hereta d'una classe B, es diu que:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;A és un B&lt;/li&gt;
&lt;li&gt;A estén B&lt;/li&gt;
&lt;li&gt;A especialitza a B&lt;/li&gt;
&lt;li&gt;A concreta B&lt;/li&gt;
&lt;li&gt;B generalitza a A&lt;/li&gt;
&lt;li&gt;A és subclasse de B&lt;/li&gt;
&lt;li&gt;B és superclasse d'A&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Al diagrama veiem també casos en que una classe estén més d'una
superclasse. Per exemple, els felins són a l'hora carnívors i
mamífers.  Això permet que un felí tingui a l'hora característiques de
Carnívor (ex. menja carn), i a l'hora les de mamífer (ex. alleta les
seves cries).&lt;/p&gt;
&lt;p&gt;D'aquesta possibilitat de disposar de més d'una superclasse pertanyent
a jerarquies diferents, se'n diu &lt;em&gt;herència múltiple&lt;/em&gt; i es produeix
quan :&lt;/p&gt;
&lt;blockquote&gt;
A estén B i A estén C però B no estén C ni C estén B&lt;/blockquote&gt;
&lt;p&gt;Així, tenim que els gats són a l'hora mamífers i carnívors (per ser
felins). El diagrama ens mostra que els gossos són també mamífers i
carnívors, però no són felins. Això explica que, com els gats, mengin
carn (per ser carnívors) i alletin les seves cries (per ser mamífers)
però, a diferència dels gats, no tinguin urpes (per no ser felins).
Això exemplifica el fet que cada classe dins la jerarquia afegeix
característiques particulars a les seves subclasses.&lt;/p&gt;
&lt;div class="section" id="herencia-a-java"&gt;
&lt;h3&gt;Herència a Java&lt;/h3&gt;
&lt;p&gt;En el cas concret de Java:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;Indica l'especialització amb la paraula clau extends.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Renat&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;No admet herència múltiple: cada classe pot ser (i de fet és) només
subclasse d'una única classe &lt;a class="footnote-reference" href="#javainterfaces" id="id1"&gt;[3]&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Al final de la jerarquia, la classe més general és &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quan no s'indica res, en definir una classe, estén per defecte
&lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;. És a dir, és equivalent definir:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Gat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;que definir-ho com:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Gat&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;Object&lt;/tt&gt; aporta una sèrie de característiques a totes les classes de
java, per exemple, el mètode toString(). Mireu la descripció
completa dels membres d'&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html"&gt;Object&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="visualitzacio-del-concepte-d-extensio"&gt;
&lt;h3&gt;Visualització del concepte d'extensió&lt;/h3&gt;
&lt;p&gt;La interfície pública d'una classe està formada per tots els membres
públics que defineix la classe, més tots els membres públics
&lt;a class="footnote-reference" href="#protected" id="id2"&gt;[7]&lt;/a&gt; que hereta.&lt;/p&gt;
&lt;p&gt;Considerem el següent diagrama:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="herència" src="http://apuntstecnics.herokuapp.com/images/poo011.img002.herencia.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Veiem que la classe Felí defineix els membres &lt;em&gt;mf1&lt;/em&gt; i &lt;em&gt;mf2&lt;/em&gt;.  Aquests
membres, en virtut de la relació d'herència, queden inclosos entre els
membres de Gat i de Pantera. Així Gat disposa dels membres que
defineix &lt;em&gt;mg1&lt;/em&gt; i &lt;em&gt;mg2&lt;/em&gt;, més els heretats &lt;em&gt;mf1&lt;/em&gt; i &lt;em&gt;mf2&lt;/em&gt;. És clar, Gat no
disposa dels membres definits per altes subclasses de Felí, com ara el
&lt;em&gt;mp1&lt;/em&gt; que defineix Pantera, tot i que comparteix amb aquesta els membres
de Felí.&lt;/p&gt;
&lt;p&gt;Finalment, Renat, en ser un Gat disposa dels membres &lt;em&gt;mr1&lt;/em&gt;, &lt;em&gt;mr2&lt;/em&gt;
(propis), més &lt;strong&gt;tots&lt;/strong&gt; els de Gat (&lt;em&gt;mg1&lt;/em&gt;, &lt;em&gt;mg2&lt;/em&gt;, &lt;em&gt;mf1&lt;/em&gt; i &lt;em&gt;mf2&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;El diagrama permet visualitzar gràficament el concepte d'extensió
d'una classe. Gat estén els membres de Felí amb els membres propis. És
a dir, Gat inclou &lt;em&gt;tota&lt;/em&gt; la definició de Felí, i a més a més, estén
aquesta amb nous continguts.&lt;/p&gt;
&lt;p&gt;Concretem una mica. Suposem que disposem de les següents
definicions de classe:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Feli&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Menjar&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Nyam Nyam &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Gat&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Feli&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;miola&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;MEEEEEEU&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaGat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;miola&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Menjar&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En aquest exemple podem observar com, des de la classe &lt;em&gt;UsaGat&lt;/em&gt; podem
accedir a un membre de &lt;em&gt;Gat&lt;/em&gt; (el mètode &lt;em&gt;menja()&lt;/em&gt;) que no ha estat
definit a &lt;em&gt;Gat&lt;/em&gt; sinó a la seva superclasse &lt;em&gt;Feli&lt;/em&gt;. Fixem-nos en que
l'accés a un mètode heretat de &lt;em&gt;Gat&lt;/em&gt; des de &lt;em&gt;UsaGat&lt;/em&gt; és idèntic a
l'accés a un mètode definit per &lt;em&gt;Gat&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="comportaments-especifics"&gt;
&lt;h3&gt;Comportaments específics&lt;/h3&gt;
&lt;p&gt;El fet que una subclasse hereti tots els membres d'una superclasse no
vol dir que la subclasse s'hagi de comportar exàctament igual que la
superclasse a l'hora d'executar els serveis que hereta.&lt;/p&gt;
&lt;p&gt;Per exemple, el nostre amic Renat és un gat molt especial. Només menja
després de netejar-se les urpes. Suposem que Renat hereta els mètodes
&lt;tt class="docutils literal"&gt;void menja(Menjar)&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;void netejaUrpes()&lt;/tt&gt;. Així el codi
(parcial) tindria el següent aspecte:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;extens&lt;/span&gt; &lt;span class="n"&gt;Feli&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Menjar&lt;/span&gt; &lt;span class="n"&gt;menjar&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;netejaUrpes&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;GatRenat&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Menjar&lt;/span&gt; &lt;span class="n"&gt;menjar&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;netejaUrpes&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;menjar&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixem-nos que, si Renat no fa res diferent amb el mètode
&lt;em&gt;netejaUrpes()&lt;/em&gt;, no cal que el torni a definir. Tota instància de
GatRenat, en ser cridat el mètode &lt;em&gt;netejaUrpes()&lt;/em&gt; executarà
directament el mètode de la superclasse de GatRenat. En aquest cas
Gat. Podria passar, com de fet passa en aquest exemple, que Gat heretés
aquest mètode de la seva superclasse Felí. Cap problema els membres de
la superclasse de la meva superclasse, són també els meus membres!&lt;/p&gt;
&lt;p&gt;En canvi, en definir el mètode &lt;em&gt;menja(Menjar)&lt;/em&gt;, qualsevol crida
que es faci a una instància de GatRenat cridarà aquest mètode i no el
de Gat!&lt;/p&gt;
&lt;p&gt;Anem a analitzar el codi de &lt;tt class="docutils literal"&gt;GatRenat.menja(Menjar)&lt;/tt&gt;. La
primera instrucció és una crida a un mètode &amp;quot;propi&amp;quot;. Bé,
&lt;tt class="docutils literal"&gt;netejaUrpes()&lt;/tt&gt; no és un mètode definit per GatRenat. Amb tot, com
que l'hereta, el pot considerar com seu. Fins i tot podria cridar-lo
amb un &lt;tt class="docutils literal"&gt;this.netejaUrpes()&lt;/tt&gt;!.&lt;/p&gt;
&lt;p&gt;Per poder accedir a membres de la superclasse no cal que fem res
especial. Podem accedir-hi com si haguessin estat declarats a la
subclasse &lt;a class="footnote-reference" href="#superprivat" id="id3"&gt;[1]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;No passa el mateix amb la segona instrucció. La idea que volem
implementar és que, quan s'ha netejat les urpes, Renat menja com ho
faria qualsevol altre gat.  No pot cridar directament, però, al mètode
&lt;tt class="docutils literal"&gt;menja(Menjar)&lt;/tt&gt;, perquè altrament estaria fent una crida al
mètode que està redefinint.  En aquest cas seria una crida recursiva
que acabaria d'una manera poc dessitjable (amb la pila d'execució
plena i el gat sense arribar a menjar!)&lt;/p&gt;
&lt;p&gt;El problema és que el mètode &lt;tt class="docutils literal"&gt;menja(Menjar)&lt;/tt&gt; heretat pel
GatRenat, ha quedat &lt;em&gt;ocultat&lt;/em&gt; per la nova definició del mètode a dins
de GatRenat.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="ocultacio-i-redefinicio"&gt;
&lt;h3&gt;Ocultació i redefinició&lt;/h3&gt;
&lt;p&gt;El cas d'ocultació (&lt;em&gt;hidding&lt;/em&gt;) ja ens l'hem trobat. Per exemple,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setVides&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;vides&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;vides&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest exemple, la propietat &lt;tt class="docutils literal"&gt;vides&lt;/tt&gt; queda amagada pel paràmetre
amb el mateix nom. La paraula clau &lt;tt class="docutils literal"&gt;this&lt;/tt&gt; ens permet accedir a la
propietat.&lt;/p&gt;
&lt;p&gt;En el cas del mètode &lt;tt class="docutils literal"&gt;menja(Menjar)&lt;/tt&gt; l'ocultació correspon a
una redefinició del mètode que es coneix també com &lt;em&gt;overriding&lt;/em&gt;
&lt;a class="footnote-reference" href="#overridingoverwriting" id="id4"&gt;[2]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Per a accedir des de la subclasse, a membres de la superclasse
redefinits (&lt;em&gt;overrided&lt;/em&gt;) fem servir la paraula clau &lt;tt class="docutils literal"&gt;super&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;De fet, podríem fer servir &lt;tt class="docutils literal"&gt;super&lt;/tt&gt; per a accedir a membres &lt;em&gt;no&lt;/em&gt;
redefinits de la superclasse, de la mateixa manera que podem fer
servir opcionalment el &lt;tt class="docutils literal"&gt;this&lt;/tt&gt; per a referenciar membres pròpis quan
el nom no ha estat ocultat pel d'un paràmetre o variable local.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;      &lt;span class="c1"&gt;// redefinició de m()&lt;/span&gt;
        &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="c1"&gt;// no cal començar amb super, que no és un constructor!&lt;/span&gt;
        &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;

        &lt;span class="c1"&gt;// puc cridar a f() de diferents maneres&lt;/span&gt;
        &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;f&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;f&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;

        &lt;span class="c1"&gt;// però...&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;       &lt;span class="c1"&gt;// és una crida recursiva! compte!&lt;/span&gt;
        &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;            &lt;span class="c1"&gt;// li passa el mateix que a l&amp;#39;anterior!&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="l-herencia-no-permesa"&gt;
&lt;h3&gt;L'herència no permesa&lt;/h3&gt;
&lt;p&gt;De vegades ens pot interessar que una classe no permeti tenir
subclasses. Això pot passar, per exemple, quan la nostra classe és
immutable (el valor de les seves propietats es manté des de
l'assignació). No voldrem que una subclasse pugui permetre perdre
aquesta condició d'immutabilitat.&lt;/p&gt;
&lt;p&gt;Això, que pot semblar una mica estrany si no coneixem el concepte de
&lt;em&gt;polimorfisme&lt;/em&gt;, és quelcom que ha preocupat suficientment als
desenvolupadors de classes com String, com per voler trobar una manera
d'evitar-ho.&lt;/p&gt;
&lt;p&gt;Evitar-ho és molt simple: declares la classe &lt;em&gt;final&lt;/em&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// error de compilació&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Per cert, també pots fer que no es pugui redefinir un mètode de la
mateixa manera: fent-lo &lt;em&gt;final&lt;/em&gt;. Això pot repercutir en una certa
millora d'eficiència en alguns casos (generalment també relacionats
amb el polimorfisme)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="l-herencia-no-desitjada"&gt;
&lt;h3&gt;L'herència no desitjada&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Nota&lt;/strong&gt;: aquesta secció és opcional en una primera visita a la POO.
És perfectament raonable que te la saltis.&lt;/p&gt;
&lt;p&gt;De vegades pot passar que heretem coses que no volem.&lt;/p&gt;
&lt;p&gt;Considera per exemple el cas de l'ornitorinc. Es tracta d'un mamífer.
Sí, té un aspecte una mica... peculiar com es pot començar a apreciar
a la foto &lt;a class="footnote-reference" href="#ornitorinc" id="id5"&gt;[4]&lt;/a&gt;. Aquest animaló d'Australia fa servir ous per
reproduir-se, és verinós, té bec d'ànec, cua de castor i potes de
llúdria. Ah!  l'alletament de les cries es realitza a través de porus
a la pell en comptes de fer servir mamelles, no fos que semblés normal
en alguna cosa... Amb tot, no és una mena de &lt;em&gt;pokemon&lt;/em&gt; sinó què és
real i...  és un mamífer!.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="L'ornitorinc" src="http://apuntstecnics.herokuapp.com/images/poo011.img003.ornitorinc.png" /&gt;
&lt;/div&gt;
&lt;p&gt;És clar, si tens una classe Mamífer ben construïda per la &lt;strong&gt;immensa&lt;/strong&gt;
majoria dels mamífers, probablement l'ornitorinc la posarà molt a
prova!&lt;/p&gt;
&lt;p&gt;Tornem a la POO. Què fem quan heretem un membre que no ens interessa
oferir? Si hem de ser puristes, ens hauríem de replantejar tota la
jerarquia de classes. Com que això no sempre és possible, des de Java
ens queden poques opcions.&lt;/p&gt;
&lt;p&gt;Si el membre heretat era una propietat pública, la podem ocultar
creant una nova propietat a la subclasse amb el mateix nom i
visibilitat privada. Ara tindrem dues còpies de la propietat però al
menys no serà accessible, i si accedim a la instància considerant-la
de la superclasse &lt;a class="footnote-reference" href="#polimorfisme" id="id6"&gt;[6]&lt;/a&gt; encara hi accedirem a la propietat
heretada!&lt;/p&gt;
&lt;p&gt;Si és un mètode públic, no podem fer el mateix que amb una propietat,
perquè l'estem redefinint amb una visibilitat més restrictiva i el
compilador ens retornarà l'error &lt;tt class="docutils literal"&gt;attempting to assign weaker access
privileges; was public&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;El que farem serà:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;documentar a la nostra classe que el membre heretat no es suporta.&lt;/li&gt;
&lt;li&gt;ocultar el membre heretat amb una versió pròpia&lt;/li&gt;
&lt;li&gt;fer que el cos del mètode redefinit llenci l'excepció
&lt;tt class="docutils literal"&gt;UnsuportedOperationException&lt;/tt&gt;. &lt;a class="footnote-reference" href="#excepcions" id="id7"&gt;[5]&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;És a dir, avisarem als desenvolupadors que vulguin fer servir la
nostra classe, que el mètode no està suportat, i en cas que tot i
així l'intentin fer servir, farem que en executar el seu codi se
n'adonin que anàvem seriosament.&lt;/p&gt;
&lt;p&gt;Atenció: aquestes mesures tindran repercussions desagradables si la
nostra classe es fa servir en un context &lt;em&gt;polimòrfic&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-la-classe-gat"&gt;
&lt;h3&gt;Exercici 1. La classe Gat&lt;/h3&gt;
&lt;p&gt;Desenvolupa la classe Gat que contingui tota la funcionalitat de la
classe Renat amb ulls, i que a més permeti definir el nom del gat de
cada instància.&lt;/p&gt;
&lt;p&gt;La classe Gat disposarà del mètode &lt;tt class="docutils literal"&gt;String comEtDius()&lt;/tt&gt; que ens
retornarà el seu nom. No es permetrà crear-ne cap instància sense
nom! (Pista: constructor)&lt;/p&gt;
&lt;p&gt;Finalment, per provar la classe Gat executem el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Descripció: Classe que comprova el funcionament de classe Gat&lt;/span&gt;
&lt;span class="cm"&gt; * Crea tants gats com li ho indiquin els paràmetres de la línia&lt;/span&gt;
&lt;span class="cm"&gt; * de comandes, els pregunta com estan i el seu nom, i mostra els&lt;/span&gt;
&lt;span class="cm"&gt; * resultats per pantalla.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Vector&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaGat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Provador de gats&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;llistaDeGats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="c1"&gt;// crea la llista de gats passats per paràmetre&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nl"&gt;nom:&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;llistaDeGats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hem creat &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;llistaDeGats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;size&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;llistaDeGats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;size&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; gat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; gats&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="nl"&gt;gat:&lt;/span&gt; &lt;span class="n"&gt;llistaDeGats&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;comEtDius&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;estat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getEstatComString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El gat &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;nom&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; diu que està &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;estat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Ara el Garbage Collector acabarà amb tots els gats. Ha Ha Ha!&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Executant-lo amb l'ordre&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java UsaGat RenatJR Misifú Garfield &amp;gt; sortida.out
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ens haurà de generar el següent contingut dins del fitxer
&lt;tt class="docutils literal"&gt;sortida.out&lt;/tt&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Provador de gats
RenatJR: he nascut
Misifú: he nascut
Garfield: he nascut
Hem creat 3 gats
El gat RenatJR diu que està estirat
El gat Misifú diu que està estirat
El gat Garfield diu que està estirat
Ara el Garbage Collector acabarà amb tots els gats. Ha Ha Ha!
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nota: el tipus Vector&amp;lt;Gat&amp;gt; és un vector de gats. Pots trobar
l'especificació dels mètodes de la classe &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; a la documentació
oficial de la API de Java. Tot i que la notació pot semblar-te una
mica confosa, simplement està dient que el vector és de gats i no de
cap altra classe. Considera l'exemple com a introducció al concepte de
&lt;em&gt;genèrics&lt;/em&gt; que treballarem posteriorment.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-el-gat-renat-es-un-gat"&gt;
&lt;h3&gt;Exercici 2. El gat Renat és un Gat&lt;/h3&gt;
&lt;p&gt;Modifica la classe GatRenat de manera que ara sigui una subclasse de Gat.&lt;/p&gt;
&lt;p&gt;Copia literalment el programa de l'exercici de l'entorn del Gat Renat
que funcionava amb el gat Renat amb ulls i fes les proves
corresponents. Ho hauràs fet bé si tot funciona i no has hagut de
modificar de cap manera el codi de l'entorn.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-qui-miola"&gt;
&lt;h3&gt;Exercici 3. Qui miola?&lt;/h3&gt;
&lt;p&gt;Ja sabem que el nostre amic Renat és especial en moltes coses. Una
d'elles és a l'hora de miolar. En comptes de fer &amp;quot;MEEEEEEU&amp;quot; com tots els
gats, en Renat fa &amp;quot;MARRAMEEEEEEU&amp;quot;.&lt;/p&gt;
&lt;p&gt;Desenvolupa un nou programa anomenat &lt;em&gt;Mioladors&lt;/em&gt; que creï una instància
del gat Renat i una altra d'un gat genèric anomenat &lt;em&gt;Misifú&lt;/em&gt;
(assegura't que poden parlar).&lt;/p&gt;
&lt;p&gt;Un cop creats, el programa cridarà al mètode &lt;tt class="docutils literal"&gt;miola()&lt;/tt&gt; de tots dos
gats de manera que la sortida indiqui el nom del gat i el resultat de
miolar.&lt;/p&gt;
&lt;p&gt;Respon amb un comentari dins del codi de &lt;em&gt;Mioladors&lt;/em&gt; el perquè de la
sortida de cada crida al &amp;quot;mateix&amp;quot; mètode.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-l-amic-garfield"&gt;
&lt;h3&gt;Exercici 4. L'amic Garfield&lt;/h3&gt;
&lt;p&gt;Al gat Renat li ha sorgit un competidor: l'amic Garfield. En Garfield
és també un gat però afegeix el mètode &lt;tt class="docutils literal"&gt;fesEntremaliadures()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Per no embolicar-la massa, les entremaliadures del Garfield
consistiran en dir una paraulota a escollir aleatòriament d'una llista
de com a mínim 10 elements.&lt;/p&gt;
&lt;p&gt;Crea una nova versió de l'entorn operatiu del gat Renat que permeti
gestionar tant el Renat com el Garfield. Evidentment només permetrà
demanar fer entremaliadures al Garfield.&lt;/p&gt;
&lt;p&gt;L'entorn simplement crearà una instància dels dos gat i les comandes
es prefixaran amb el nom del gat en qüestió.&lt;/p&gt;
&lt;p&gt;Per exemple, si es vol que s'aixequi Garfield, escriurem:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Garfield aixeca&amp;#39;t
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Mentre que si el que volem és que calli Renat, ho especificarem amb:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Renat calla
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pista: pel tema de les paraulotes, considera el següent codi&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Random&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
 &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaRandom&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;Random&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Random&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
             &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;abs&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nextInt&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
             &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
         &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;hr class="docutils" /&gt;
&lt;p&gt;Notes:&lt;/p&gt;
&lt;table class="docutils footnote" frame="void" id="superprivat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Des d'una classe podem accedir directament a un
membre de la seva superclasse, sempre i quan aquest no hagi estat
redefinit a la subclasse (&lt;em&gt;overrided&lt;/em&gt;) ni hagi estat definit a la
superclasse com a &lt;tt class="docutils literal"&gt;private&lt;/tt&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="overridingoverwriting" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;De vegades, trobarem que en comptes d' &lt;em&gt;overriding&lt;/em&gt;
es refereixen a aquest concepte com a &lt;em&gt;overwriting&lt;/em&gt;. La diferència pot ser
subtil, però existeix. Es diu que quelcom &lt;em&gt;overwrites&lt;/em&gt; una altra cosa quan la
reemplaça completament de manera que ja deixi d'existir la reemplaçada. Podríem
fer servir com a sinònim el terme &lt;em&gt;reemplaça&lt;/em&gt;. Quan la substitució d'una cosa
per una altra té només efecte en alguns casos i no en tots (és a dir, hi ha
casos en que encara es podria fer servir l'anterior) llavors es parla d'
&lt;em&gt;overriding&lt;/em&gt;. En el cas concret en que una subclasse redefineix un mètode que
hereda de la superclasse, la definició original del mètode de la superclasse
encara és usable per altres subclasses que no l'hagin redefinit.&lt;/p&gt;
&lt;p class="last"&gt;Com a traducció podríem fer servir &lt;em&gt;sobreescriure&lt;/em&gt; per &lt;em&gt;overwrite&lt;/em&gt; i
i &lt;em&gt;anteposar&lt;/em&gt; per &lt;em&gt;override&lt;/em&gt;.&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="javainterfaces" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;p class="first"&gt;Java no ofereix herència múltiple per evitar
certs problemes que hi apareixen quan es permet heredar de
múltiples superclasses. Els curiosos podeu cercar el concepte del
&lt;em&gt;Deadly Diamond of Death&lt;/em&gt; per exemple a
&lt;a class="reference external" href="http://es.wikipedia.org/wiki/Problema_del_diamante"&gt;http://es.wikipedia.org/wiki/Problema_del_diamante&lt;/a&gt;&lt;/p&gt;
&lt;p class="last"&gt;Java ofereix, però, un altre mecanisme anomenat &lt;em&gt;interface&lt;/em&gt; que
permet heredar &lt;em&gt;contractes&lt;/em&gt; o signatures de mètodes de múltiples
fonts.&lt;/p&gt;
&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="ornitorinc" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Foto obtinguda de &lt;a class="reference external" href="http://commons.wikimedia.org"&gt;Wikimedia commons&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="excepcions" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id7"&gt;[5]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si encara no coneixes les excepcions, no t'amoïnis,
que arribaran aviat.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="polimorfisme" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id6"&gt;[6]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Estudiarem més endavant, el concepte de polimorfisme.
En poques paraules, és la possibilitat de fer servir una instància
considerant-la d'un tipus diferent del que és (per exemple, com la
seva superclasse)&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="protected" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[7]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Per ser precisos, hereta tots els mèmbres no privats
de la superclasse. Aquesta puntualització tindrà més sentit quan
coneguem el concepte de &lt;em&gt;visibilitat&lt;/em&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:49:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:herencia.html</guid><category>java</category></item><item><title>Constructors (part II)</title><link>http://apuntstecnics.herokuapp.com/constructors-part-ii.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document és una breu recapitulació dels constructors en java.&lt;/p&gt;
&lt;p&gt;Tots els continguts d'aquest document ja han aparegut en altres
documents, especialment a la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/constructors-part-i.html"&gt;primera part de constructors&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="constructors"&gt;
&lt;h2&gt;Constructors&lt;/h2&gt;
&lt;p&gt;Un constructor és un tipus especial de bloc de codi que en programació
orientada a objectes és cridat la creació d'una nova instància d'una
classe, i que té la funció de preparar la instància per a ser
utilitzada.&lt;/p&gt;
&lt;div class="section" id="definicio-de-constructors"&gt;
&lt;h3&gt;Definició de constructors&lt;/h3&gt;
&lt;p&gt;Per a definir un constructor en Java, hem de crear una &lt;em&gt;mena&lt;/em&gt; de
mètode amb les següents particularitats:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;la signatura del &amp;quot;mètode&amp;quot; no ha d'especificar cap tipus de retorn, ni
tant sols &lt;tt class="docutils literal"&gt;void&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;el nom del &amp;quot;mètode* ha de coincidir amb el de la classe.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En podem crear zero o més constructors per una classe, amb
independència de la seva visibilitat (ex. públics o privats)&lt;/p&gt;
&lt;p&gt;Un exemple de creació de constructors pot ser:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;        &lt;span class="c1"&gt;// una propietat per a il·lustrar la&lt;/span&gt;
                            &lt;span class="c1"&gt;// inicialització amb constructors&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;B&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;            &lt;span class="c1"&gt;// definició d&amp;#39;un constructor sense paràmetres&lt;/span&gt;
        &lt;span class="n"&gt;val&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;     &lt;span class="c1"&gt;// un altre constructor&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;val&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;     &lt;span class="c1"&gt;// incialització de la propietat&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;sval&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="c1"&gt;// i un altre&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;val&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sval&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Com qualsevol altre mètode, el constructor pot ser sobrecarregat
(&lt;em&gt;overloaded&lt;/em&gt;). La única condició és que la llista de tipus dels
arguments ha de ser diferent a cada constructor.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="us-de-constructors"&gt;
&lt;h3&gt;Ús de constructors&lt;/h3&gt;
&lt;p&gt;En Java, la creació d'una nova instància la realitzem mitjançant
l'expressió &lt;tt class="docutils literal"&gt;new &lt;span class="pre"&gt;«Constructor»(«args»)&lt;/span&gt;&lt;/tt&gt; on «Constructor» coincideix
amb el nom de la classe i «args» corresponen als valors
d'inicialització (de vegades no hi ha cap).&lt;/p&gt;
&lt;p&gt;El resultat d'aquesta expressió és una referència a la nova instància
acabada de crear. Sovint aquest resultat és assignat a una variable
del mateix tipus (classe) que a la que pertany el constructor. Ex.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;De vegades pot passar que no ens interessi guardar la referència a la
instància, sinó que només estiguem interessats en executar algun
mètode i després oblidar-nos-en.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaA&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;A&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;    &lt;span class="c1"&gt;// executa el mètode i &amp;quot;oblida&amp;quot; la instància&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fins i tot, pot ser que la instància només ens interessi per passar-li a
algun altre objecte.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaB&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;   &lt;span class="c1"&gt;// passa al constructor de B una nova instància d&amp;#39;A&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Per finalitzar, també és possible fer tot això en qualsevol context que
esperi una instància d'una superclasse de la classe del constructor.
Aquest punt es considera amb molt més detall en el tema de
&lt;a class="reference external" href="poo013.polimorfisme.rst"&gt;polimorfisme&lt;/a&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaB&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixat que al mètode f() de UsaB es crea una instància de B i se li
assigna a una referència de tipus A.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="constructor-per-defecte"&gt;
&lt;h3&gt;Constructor per defecte&lt;/h3&gt;
&lt;p&gt;Al constructor sense paràmetres se li anomena sovint &lt;em&gt;constructor per
defecte&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Si definim una classe sense explicitar cap constructor, Java ens
crearà el constructor per defecte. Per exemple, considerem la classe:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aquest codi és equivalent a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;B&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixem-nos que el constructor no defineix cap instrucció dins del seu cos.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="this"&gt;
&lt;h3&gt;this()&lt;/h3&gt;
&lt;p&gt;Per referir-nos al constructor de la nostra instància podem fer servir
la instrucció:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;On «args» és la llista d'arguments que passem al constructor (pot ser
cap).&lt;/p&gt;
&lt;p&gt;Hem de complir però una condició: la crida a &lt;tt class="docutils literal"&gt;this()&lt;/tt&gt; només pot
estar a la primera línia del cos d'un constructor.&lt;/p&gt;
&lt;p&gt;Aquesta possibilitat ens permet reaprofitar el codi entre
constructors. Per exemple, suposem que tenim una classe que ofereix la
possibilitat d'inicialitzar una o més propietats, mentre que la resta
queden amb valors per defecte.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;enter&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;caracter&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;A&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;A&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;enter&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;caracter&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="super"&gt;
&lt;h3&gt;super()&lt;/h3&gt;
&lt;p&gt;Per referir-nos al constructor de la superclasse, farem servir:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Al igual que amb &lt;tt class="docutils literal"&gt;this()&lt;/tt&gt;, la crida a &lt;tt class="docutils literal"&gt;super()&lt;/tt&gt; ha de ser la
primera instrucció del constructor. Només pot haver una crida a un
constructor.&lt;/p&gt;
&lt;p&gt;En cas que no afegim una crida a un constructor des del nostre
constructor, Java ens afegirà una: al constructor per defecte de la
superclasse.&lt;/p&gt;
&lt;p&gt;Per exemple, considera els següent codi:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;  &lt;span class="c1"&gt;// cos del constructor buit&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;equival a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;De fet, el constructor per defecte de B a l'exemple anterior, podria
contenir instruccions al cos. Sempre i quan no fossin una crida a un
constructor, afegir &lt;tt class="docutils literal"&gt;super()&lt;/tt&gt; com a primera instrucció continuaria
sent equivalent.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Atenció&lt;/strong&gt;: En cas que la superclasse (en el cas de l'exemple
A) no disposi de constructor per defecte, es converteix en
obligatori declarar almenys un constructor i fer la crida des d'aquest
a un constructor vàlid. A l'exemple anterior, considerem el cas en que
la definició de &lt;em&gt;A&lt;/em&gt; fos la següent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// no es disposa de constructor per defecte!&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest cas, les definicions anteriors de la classe B
fallarien en temps de compilació. Per solucionar-ho caldria, o afegir
el constructor per defecte a &lt;em&gt;A&lt;/em&gt; o bé definir a &lt;em&gt;B&lt;/em&gt;
els constructors que facin referència al constructor específic de
la seva superclasse&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// cal passar algun valor enter!&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="visibilitat"&gt;
&lt;h3&gt;Visibilitat&lt;/h3&gt;
&lt;p&gt;Com qualsevol altre mètode, es pot definir la visibilitat d'un constructor.&lt;/p&gt;
&lt;p&gt;En cas que declarem un constructor com a privat, només es podrà fer
servir des de la pròpia classe. És típic especificar constructors
privats en implementacions del patró &lt;a class="reference external" href="http://ca.wikipedia.org/wiki/Patr%C3%B3_singleton"&gt;singleton&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-resum-de-constructors"&gt;
&lt;h3&gt;Exercici 1. Resum de constructors&lt;/h3&gt;
&lt;p&gt;Construeix un esquema/resum amb els diferents aspectes que has vist
dels constructors. Afegeix exemples propis que els il·lustrin.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:48:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:constructors-part-ii.html</guid><category>java</category></item><item><title>Polimorfisme</title><link>http://apuntstecnics.herokuapp.com/polimorfisme.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document introdueix al concepte de &lt;em&gt;polimorfisme&lt;/em&gt;. Es tracta
d'una de les conseqüències més útils de l'herència i altres relacions
jeràrquiques.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;Polimorfisme&lt;/h2&gt;
&lt;div class="section" id="definicio"&gt;
&lt;h3&gt;Definició&lt;/h3&gt;
&lt;p&gt;Una possible definició del polimorfisme és: possibilitat que
ofereixen alguns llenguatges de programació de fer servir dades de
diferents tipus d'una manera uniforme.&lt;/p&gt;
&lt;p&gt;De les diferents &amp;quot;varietats&amp;quot; de polimorfisme que els teòrics
discuteixen, en aquest context ens és útil considerar:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;em&gt;polimorfisme de funcions&lt;/em&gt;: mètodes que poden ser aplicats a diferents
tipus d'arguments. És el que aconseguim, per exemple, amb la
sobrecàrrega de mètodes en Java. Ex.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;     &lt;span class="c1"&gt;// versió amb enter&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;    &lt;span class="c1"&gt;// versió amb caràcter&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;       &lt;span class="c1"&gt;// usa la versió amb enter&lt;/span&gt;
        &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;     &lt;span class="c1"&gt;// usa la versió amb caràcter&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;em&gt;polimòrfisme de subclasses&lt;/em&gt;: una variable declarada d'una
determinada classe A, pot fer referència a instàncies de la classe
A, però també de qualsevol classe B que tingui a A com a
avantpassat &lt;a class="footnote-reference" href="#avantpassat" id="id2"&gt;[1]&lt;/a&gt;. Ex.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;C&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;            &lt;span class="c1"&gt;// referència de tipus A&lt;/span&gt;
        &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;    &lt;span class="c1"&gt;// instància de tipus A&lt;/span&gt;
        &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;    &lt;span class="c1"&gt;// instància de tipus B assignada a una referència de tipus A&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="b-es-un-a-pero-a-no-es-un-b"&gt;
&lt;h3&gt;B és un A però A no és un B&lt;/h3&gt;
&lt;p&gt;EL polimorfisme de subclasses ens permet fer servir una variable de
la superclasse per referenciar una instància de la subclasse, però
&lt;strong&gt;no&lt;/strong&gt; a l'inrevés.&lt;/p&gt;
&lt;p&gt;El següent dibuix intenta mostrar-ho gràficament.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Metàfora dels cucurutxos" src="http://apuntstecnics.herokuapp.com/images/poo013.img001.cucurutxos.png" /&gt;
&lt;/div&gt;
&lt;p&gt;A la imatge veiem com un suport (&lt;em&gt;variable&lt;/em&gt;) per cucurutxos de tipus
(&lt;em&gt;classe&lt;/em&gt;) A, pot subjectar (&lt;em&gt;referenciar&lt;/em&gt;) cucurutxos (&lt;em&gt;instàncies&lt;/em&gt;) de
tipus A. Aquest mateix suport, és capaç de subjectar cucurutxos que
estenen el tipus A. En canvi, amb el suport pels cucurutxos de tipus
B, els de tipus A ens &lt;strong&gt;caurien&lt;/strong&gt; a terra!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="assignacio-tardana"&gt;
&lt;h3&gt;Assignació tardana&lt;/h3&gt;
&lt;p&gt;L'&lt;em&gt;assignació tardana&lt;/em&gt; (o &lt;em&gt;late binding&lt;/em&gt;) és la determinació del tipus
de dades/mètode que realment s'executarà és realitza en temps
d'execució i no en la compilació.&lt;/p&gt;
&lt;p&gt;Per exemple, considerem:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;C&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;El codi que finalment es cridarà en la línia 7 sembla que podria ser
determinat en temps de compilació: no hauria de ser el definit pel
mètode &lt;tt class="docutils literal"&gt;A.m()&lt;/tt&gt;?. En canvi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// redefinició de m()&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;n&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// un altre mètode&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;C&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="k"&gt;instanceof&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;   &lt;span class="c1"&gt;// comprova si a és instància de B&lt;/span&gt;
             &lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;         &lt;span class="c1"&gt;// considera a com un B&lt;/span&gt;
             &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;n&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;              &lt;span class="c1"&gt;// ara ja puc accedir a B.n()&lt;/span&gt;
             &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;n&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;         &lt;span class="c1"&gt;// també ho puc fer directament&lt;/span&gt;
         &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;g&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
         &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En aquest segon exemple, la situació no està tan clara. Quin mètode
s'executarà a la línia 10? El del mètode definit a la línia 2 o el de
la 5?&lt;/p&gt;
&lt;p&gt;El compilador no té manera de saber-ho, així que serà la màquina
virtual qui ho determinarà, en funció del tipus de la instància que
finalment estigui rebent &lt;tt class="docutils literal"&gt;C.f(A)&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;A la línia 11 fem servir l'operador &lt;em&gt;instanceof&lt;/em&gt;. Aquest operador ens
retornarà True si, en temps d'execució, el primer operand resulta ser
una instància del tipus del segon operand (o bé d'una subclasse
d'aquest) &lt;a class="footnote-reference" href="#instanceof" id="id3"&gt;[3]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Sovint &lt;em&gt;late binding&lt;/em&gt; es traduït també per &lt;em&gt;assignació dinàmica&lt;/em&gt;, per
contrapossar-ho a l'&lt;em&gt;assignació estàtica&lt;/em&gt; que oferiria el compilador
(si pogués).&lt;/p&gt;
&lt;p&gt;Per cert, aquesta flexibilitat té un preu: es paga amb la velocitat
d'execució. Si estàs desenvolupant un codi on l'eficiència sigui
crítica i saps que un mètode no serà redefinit per una subclasse, pots
facilitar la feina al compilador fent servir &lt;tt class="docutils literal"&gt;final&lt;/tt&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;C&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Amb aquest darrer exemple, el compilador &lt;em&gt;sí&lt;/em&gt; sap quin serà el codi
que s'executarà. Això sí, no intentis crear una subclasse B com la de
fa dos exemples perquè el compilador es queixarà!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="si-pero-quin-metode-es-crida"&gt;
&lt;h3&gt;Sí però... quin mètode es crida&lt;/h3&gt;
&lt;p&gt;Quan ens enfrontem per primer cop al polimorfisme, una de les
dificultats més grans és saber com es realitza finalment aquesta
assignació tardana.&lt;/p&gt;
&lt;p&gt;Per exemple:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;superclasse&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;

 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;m&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;  &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;subclasse&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;sm&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// una mena d&amp;#39;àlies de A.m()&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;

 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;C&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;       &lt;span class="c1"&gt;// escriu: superclasse&lt;/span&gt;
         &lt;span class="n"&gt;B&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;       &lt;span class="c1"&gt;// escriu: subclasse&lt;/span&gt;
         &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;  &lt;span class="c1"&gt;// escriu... subclasse!&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;       &lt;span class="c1"&gt;// escriu... subclasse!&lt;/span&gt;
         &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sm&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;      &lt;span class="c1"&gt;// escriu: superclasse&lt;/span&gt;

         &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// error de compilació&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
         &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sm&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;      &lt;span class="c1"&gt;// error de compilació&lt;/span&gt;
         &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;sm&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// error d&amp;#39;execució&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En l'exemple veiem que a la màquina virtual no hi ha manera de fer-li
executar el mètode definit per A des d'una instància de B (excepte
fent servir l'&amp;quot;&lt;em&gt;àlies&lt;/em&gt;&amp;quot; &lt;tt class="docutils literal"&gt;B.sm()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;L'exemple afegeix, a mode de repàs, alguns errors típics dels que
s'inicien amb aquests temes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="liskov"&gt;
&lt;h3&gt;Liskov&lt;/h3&gt;
&lt;p&gt;El principi de substitució de &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Barbara_Jane_Liskov"&gt;Liskov&lt;/a&gt; diu que:&lt;/p&gt;
&lt;blockquote&gt;
una herència entre dues classes està correctament definida si
&lt;strong&gt;sempre&lt;/strong&gt; es pot fer servir una instància de la subclasse allà on
el programa espera una instància de la superclasse.&lt;/blockquote&gt;
&lt;p&gt;Un exemple típic d'herència incorrecta &lt;a class="footnote-reference" href="#herenciaincorrecta" id="id5"&gt;[2]&lt;/a&gt; és entre
Quadrat i Rectangle (o també Cercle i Oval). Suposa que tens les
següents classes:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Rectangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Rectangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;base&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;altura&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getBase&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getAltura&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setBase&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;base&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setAltura&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;altura&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;

 &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Quadrat&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Rectangle&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Quadrat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;costat&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;costat&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;costat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getCostat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;getBase&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setCostat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;costat&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;setBase&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;costat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
         &lt;span class="n"&gt;setAltura&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;costat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Malgrat que, en principi, una herència com aquesta pot semblar una
bona idea (especialment si els «...» inclouen molt de codi, en
realitat amaga una desagradable sorpresa. Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaRectangles&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
         &lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;rectangles&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
         &lt;span class="n"&gt;rectangles&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
         &lt;span class="n"&gt;rectangles&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Quadrat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
         &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Rectangle&lt;/span&gt; &lt;span class="nl"&gt;r:&lt;/span&gt; &lt;span class="n"&gt;rectangles&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
             &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setBase&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getBase&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// encongeix la base&lt;/span&gt;
         &lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="o"&gt;}&lt;/span&gt;
 &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En &lt;tt class="docutils literal"&gt;UsaRectangles.f()&lt;/tt&gt; aconseguim que la instància de Quadrat
referenciada per &lt;tt class="docutils literal"&gt;rectangles[1]&lt;/tt&gt; acabi tenint un quadrat de costat 3
i 4!. És a dir, hem aconseguit &lt;em&gt;petar&lt;/em&gt; la coherència de la classe i
tot fent-la servir &amp;quot;legalment&amp;quot;.&lt;/p&gt;
&lt;p&gt;El problema de l'exemple és que un quadrat &lt;strong&gt;no&lt;/strong&gt; es pot considerar un
rectangle en tots els contexts on s'espera que es comporti
correctament un rectangle (ex. quan encongim un dels seus costats)&lt;/p&gt;
&lt;p&gt;En resum, abans de crear una subclasse B d'una classe A, assegurem-nos
que podem dir que tot B &lt;strong&gt;és un&lt;/strong&gt; A. No n'hi ha prou amb que &lt;em&gt;algun&lt;/em&gt; B
és un A, o tot B s'&lt;em&gt;assembla&lt;/em&gt; a A, o &lt;em&gt;és pràcticament un&lt;/em&gt; A &lt;em&gt;excepte
per&lt;/em&gt;..., etc. Els &lt;em&gt;ornitorincs&lt;/em&gt; en POO a la llarga es paguen cars. No
diguis després que no se t'ha avisa't!.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-analisi-d-errors-tipics"&gt;
&lt;h2&gt;Exercici 1. Anàlisi d'errors típics&lt;/h2&gt;
&lt;p&gt;Torna a considerar el codi de l'exemple que apareix a la secció &lt;a class="reference internal" href="#si-pero-quin-metode-es-crida"&gt;Sí
però... quin mètode es crida&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Redacta un breu document en que expliquis el perquè de cada sortida o
error de les instruccions de la funció &lt;tt class="docutils literal"&gt;C.f()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, per la línia 13 es podria dir:&lt;/p&gt;
&lt;blockquote&gt;
Línia 13.  &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;a.m();&lt;/span&gt;&lt;/tt&gt; escriu &lt;em&gt;superclasse&lt;/em&gt; perquè &lt;tt class="docutils literal"&gt;a&lt;/tt&gt; fa
referència a una instància de tipus &lt;tt class="docutils literal"&gt;A&lt;/tt&gt; i aquesta inclou el
mètode &lt;tt class="docutils literal"&gt;void m()&lt;/tt&gt;.&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-molts-gats"&gt;
&lt;h2&gt;Exercici 2. Molts gats&lt;/h2&gt;
&lt;p&gt;Ja se sap, deixes entrar un gat a casa i aviat convida els seus
amics...&lt;/p&gt;
&lt;p&gt;Modifiquem la classe Gat per què el seu constructor mostri el missatge
&amp;quot;«nom»: he nascut!&amp;quot; a menys que es crei com a silenciós.&lt;/p&gt;
&lt;p&gt;Modifica el codi de la classe UsaGat que inclou l'exercici 1 dels
continguts d'&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/herencia.html"&gt;herència&lt;/a&gt; de
manera que &lt;em&gt;main()&lt;/em&gt; afegeixi sempre a Renat i a Garfield a la llista.
En crearà una instància de gat per cada nom que rebi per línia de
comandes. En cas que per la línia de comandes es demani al Renat o al
Garfield, indicarà amb un warning que aquests dos ja hi són a la
gàbia.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-l-entorn-operatiu-dels-gats"&gt;
&lt;h2&gt;Exercici 3. L'entorn operatiu dels gats&lt;/h2&gt;
&lt;p&gt;Ara que tenim una quantitat considerable de gats, necessitem disposar
d'un sistema flexible per a poder-los &amp;quot;manipular&amp;quot;.&lt;/p&gt;
&lt;p&gt;Així, crearem una nova versió de l'entorn operatiu dels Gats amb les
següents modificacions.&lt;/p&gt;
&lt;p&gt;El &lt;em&gt;prompt&lt;/em&gt; de l'entorn serà:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;[Gats]:
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Les ordres que se li podran donar, seran:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;crea gat «nom»
mata gat «nom»
llista gats
«nom» com estàs?
«nom» aixeca’t
«nom» seu
«nom» estira&amp;#39;t
«nom» miola
adéu
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Substituirem, es clar «nom» pel nom del gat en qüestió.&lt;/p&gt;
&lt;p&gt;Els missatges que generarà seran:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Creat el gat «nom».
Ja existeix un gat amb el nom «nom».
Matat el gat «nom».
No hi ha cap gat amb el nom «nom».
Els gats de la llista són: «nom», «nom», ..., «nom».
No hi ha cap gat a la llista.
«nom» diu: estic dret.
«nom» diu: estic assegut.
«nom» diu: estic estirat.
«nom» diu: fet.
«nom» diu: ja estava dret.
«nom» diu: ja estava assegut.
«nom» diu: ja estava estirat.
No entenc el missatge.
Adéu.
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Inicialment el programa afegirà automàticament una instància dels gats
Renat i Garfield a la llista de gats. Aquests podran ser eliminats com
qualsevol altre i no s'oferirà a l'usuari la possibilitat d'accedir a
membres de subclasse que no pertanyin a l'hora a la superclasse.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pista&lt;/strong&gt;: en cas que tinguis problemes per extreure la informació de
l'entrada de l'usuari, et proposo que facis una ullada a &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/resources/ComandaText.java"&gt;aquest codi&lt;/a&gt;. Estudia el mètode
&lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; per entendre el seu funcionament.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-l-entorn-operatiu-dels-animals"&gt;
&lt;h2&gt;Exercici 4. L'entorn operatiu dels animals&lt;/h2&gt;
&lt;p&gt;Els amics dels gats potser estaran satisfets amb l'entorn dels gats,
però, que em dius dels amics dels gossos?&lt;/p&gt;
&lt;p&gt;En aquest problema, es demana implementar les classes Animal i Gos.&lt;/p&gt;
&lt;p&gt;Els gossos, pel que respecta a aquest exercici, són molt semblants als
gats. Únicament no miolen. En canvi sí borden. Per aquesta raó, la
classe Animal disposarà del mètode &lt;tt class="docutils literal"&gt;fesSoroll()&lt;/tt&gt; que els Gats
implementaran cridant a &lt;tt class="docutils literal"&gt;miola()&lt;/tt&gt; i els gossos a &lt;tt class="docutils literal"&gt;borda()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Realitza els canvis que siguin necessaris a la classe Gat, de manera
que no calgui modificar cap de les seves subclasses ni cap dels
programes dels exercicis anteriors.&lt;/p&gt;
&lt;p&gt;Finalment implementa un entorn operatiu d'animals, similar al dels
gats però que permeti explotar les funcionalitats que ofereixen els
animals.&lt;/p&gt;
&lt;p&gt;El &lt;em&gt;prompt&lt;/em&gt; de l'entorn serà: &lt;tt class="docutils literal"&gt;[Animals]:&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Les ordres que se li podran donar, seran les mateixes que les de
l'exercici anterior, i a més:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;crea gos «nom»
mata gos «nom»
mata animal «nom»
llista gossos
llista animals
«nom» borda
«nom» fes soroll
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Substituirem, es clar «nom» pel nom del gat en qüestió.&lt;/p&gt;
&lt;p&gt;Els missatges que generarà seran:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Creat el gos «nom».
Ja existeix un animal amb el nom «nom».
Matat el gos «nom».
No hi ha cap gos amb el nom «nom».
No hi ha cap animal amb el nom «nom».
Els gossos de la llista són: «nom», «nom», ..., «nom».
Els animals de la llista són: «nom», «nom», ..., «nom».
No hi ha cap gos a la llista.
No hi ha cap animal a la llista.
«nom» no és cap gat per miolar.
«nom» no és cap gos per bordar.
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Inicialment no hi haurà cap animal a la llista.&lt;/p&gt;
&lt;p&gt;Pista: tot i que pots fer servir l'operador &lt;em&gt;instanceof&lt;/em&gt;, també pots
considerar fer servir tres llistes, una per gats, una altra per gos i
la tercera per animals en general. Si estàs preocupat per que això
pugui representar una duplicació d'informació, recorda que en realitat
d'un mateix gat només tindràs una instància, amb una referència a la
llista d'animals i una altra a la de gats.&lt;/p&gt;
&lt;/div&gt;
&lt;hr class="docutils" /&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="avantpassat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;(B és subclasse de A, o bé d'una classe C que tingui a A com a
avantpassat)&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="herenciaincorrecta" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Sorprenentment, aquestes exemples els
trobarem a molts textos (i cursos) d'introducció a la programació
orientada a objectes, pel concepte d'herència!&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="instanceof" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;No tothom està gaire d'acord amb l'ús &amp;quot;indiscriminat&amp;quot;
del &lt;em&gt;instanceof&lt;/em&gt;. Mira per exemple l'article &lt;a class="reference external" href="http://www.javapractices.com/topic/TopicAction.do?Id=31"&gt;Beware of instanceof
operator&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:47:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:polimorfisme.html</guid><category>java</category></item><item><title>Paquets i empaquetats</title><link>http://apuntstecnics.herokuapp.com/paquets-i-empaquetats.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document aprofita un senzill joc de paraules per a introduir dos
conceptes diferents:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;l'organització de classes en &lt;em&gt;packages&lt;/em&gt; pel seu ús en altres
programes&lt;/li&gt;
&lt;li&gt;l'agrupació de codi en paquets per la seva distribució&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Veuràs que es tracta de dos utilitats del llenguatge. Hi trobaràs un
exercici per a cadascuna d'elles, i un extra per a practicar-les a
l'hora.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-comprensio-dels-packages-en-java"&gt;
&lt;h2&gt;Exercici 1. Comprensió dels &lt;em&gt;packages&lt;/em&gt; en Java&lt;/h2&gt;
&lt;p&gt;Els &lt;em&gt;packages&lt;/em&gt; en Java permeten organitzar els nostres programes. Es
corresponen amb els directoris del sistema de fitxers. Entre altres
coses, ofereixen un mecanisme per a evitar les col·lisions de noms.&lt;/p&gt;
&lt;p&gt;Llegeix la &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/package/index.html"&gt;lliçó sobre packages&lt;/a&gt;
dels tutorials de java, i contesta les següents preguntes en un
document senzill però llegible.&lt;/p&gt;
&lt;p&gt;Es recomana fer una lectura &amp;quot;guiada&amp;quot; per les preguntes. És a dir,
primer llegir la primera pregunta, trobar contestació, llegir la
següent, etc. D'aquesta manera probablement es podrà &lt;em&gt;saltar&lt;/em&gt; el
material de la lliçó pel que encara no estem del tot preparats.&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Segons el tutorial, per a què tres coses serveix un &lt;em&gt;package&lt;/em&gt;?
Perquè, fins ara, no l'hem hagut de fer servir en la definició de
les nostres classes?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Defineix amb les teves paraules què és un &lt;em&gt;package&lt;/em&gt; en Java.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;En quin &lt;em&gt;package&lt;/em&gt; es troben les classes fonamentals de Java, com
ara &lt;em&gt;String&lt;/em&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Com s'indica que una classe pertany a un &lt;em&gt;package&lt;/em&gt;? Indica la o les
sentències necessàries pel &lt;em&gt;package&lt;/em&gt; org.estudi_poo.«el teu
nom» (per exemple, &lt;em&gt;org.estudi_poo.anna&lt;/em&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A quants packages pot pertànyer una mateixa classe?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Què pot aparèixer abans de les sentències que indiquen el &lt;em&gt;package&lt;/em&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quantes classes públiques poden aparèixer en un mateix fitxer de
codi?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;És recomanable incloure més d'una classe en un mateix fitxer de
codi?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Desenvolupa la classe HolaPackage que pertany al &lt;em&gt;package&lt;/em&gt; anterior i
que està formada d'un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que simplement escriu per sortida
estàndard el missatge: &amp;quot;Hola des del &lt;em&gt;package&lt;/em&gt; «nom del package»&amp;quot;.
Inclou el codi en aquest document.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quina visibilitat tindrà una classe no declarada com a pública?
&lt;a class="footnote-reference" href="#packageprivate" id="id1"&gt;[1]&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A quin &lt;em&gt;package&lt;/em&gt; pertanyen les classes quan no se li declara
explícitament cap?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quina condició s'ha de complir per a poder utilitzar en un mateix
codi, dues classes amb exactament el mateix nom?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Què ens recomanen per evitar que dos desenvolupadors creïn
&lt;em&gt;packages&lt;/em&gt; amb exactament el mateix nom?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;De quines tres maneres es pot fer servir un membre públic d'un
&lt;em&gt;package&lt;/em&gt;? Posa un exemple de cada considerant la classe GatRenat
que es troba al &lt;em&gt;package&lt;/em&gt; &lt;tt class="docutils literal"&gt;org.gatsdelmon&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Què vol dir que els &lt;em&gt;packages&lt;/em&gt; no estan relacionats jeràrquicament?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Quin nom recomanen pel fitxer on col·locar el codi font d'una
classe? En quin directori recomanen col·locar el fitxer?
Il·lustra-ho amb un exemple considerant la classe GatRenat que
pertany al &lt;em&gt;package&lt;/em&gt; &lt;tt class="docutils literal"&gt;org.gatsdelmon&lt;/tt&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Suposa que tens GatRenat.class del &lt;em&gt;package&lt;/em&gt; &lt;tt class="docutils literal"&gt;org.gatsdelmon&lt;/tt&gt; ben
col·locat al següent directori &lt;tt class="docutils literal"&gt;~/estudi/poo/&lt;/tt&gt; indica que ha de
contenir la variable de sistema &lt;tt class="docutils literal"&gt;CLASSPATH&lt;/tt&gt; perquè puguem
executar el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; de GatRenat (en cas que en tingués) fent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java org.gatsdelmon.GatRenat
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;L'opció &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-d&lt;/span&gt; «path»&lt;/tt&gt; de &lt;tt class="docutils literal"&gt;javac&lt;/tt&gt; ens permet especificar una
destinació diferent pels &lt;tt class="docutils literal"&gt;.class&lt;/tt&gt;. Fent servir aquesta opció,
col·loca els &lt;tt class="docutils literal"&gt;.class&lt;/tt&gt; en un directori diferent d'on estan
els fonts, i canvia convenientment &lt;tt class="docutils literal"&gt;CLASSPATH&lt;/tt&gt; de manera que es
pugui executar GatRenat amb la comanda del punt anterior. Indica la
comanda completa de compilació que has fet servir, i el contingut
del teu &lt;tt class="docutils literal"&gt;CLASSPATH&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Canvia el missatge del HolaPackage.java de manera que mostri el
resultat de la crida a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;System.getProperty(&amp;quot;java.class.path&amp;quot;)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Recompila i executa. Què es mostra?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Crea la classe Salutator amb el següent contingut i afegeix-la al
&lt;em&gt;package&lt;/em&gt; org.estudi_poo.«el teu nom»&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Salutator&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt;   &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;varPrivada&lt;/span&gt;   &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt;    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;varPublica&lt;/span&gt;   &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;protected&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;varProtegida&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
              &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;varPackage&lt;/span&gt;   &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;saluda&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Salutator diu: Hola Món!&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Des del &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; de la classe HolaPackage afegeix una crida al
mètode saluda() de Salutator, i mostra el valor de totes les
propietats de Salutator que es puguin &amp;quot;veure&amp;quot; des de HolaPackage
(pots fer-ho amb prova i error).
Indica perquè és possible veure les variables que es poden i perquè
no es pot les que no es poden. &lt;a class="footnote-reference" href="#packageprivate" id="id2"&gt;[1]&lt;/a&gt;
Inclou el codi d'ambdues classes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Crea ara una nova versió de HolaPackage, aquest cop dins del
&lt;em&gt;package&lt;/em&gt; org.estudi_poo.knuth&lt;/p&gt;
&lt;p&gt;Modifica el que calgui perquè pugui accedir a la classe Salutator
del &lt;em&gt;package&lt;/em&gt; org.estudi_poo.«el teu nom»&lt;/p&gt;
&lt;p&gt;Indica perquè es poden/es deixa de poder accedir a membres del teu
Salutator des de l'HolaPackage del mestre Knuth.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Crea una nova versió de Salutator, aquest cop dins del &lt;em&gt;package&lt;/em&gt; de
Knuth i canvia el codi de saluda() per&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;saluda&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Knuth diu: Hola Món!&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Modifica HolaPackage de Knuth de manera que faci una crida a
saluda() del Salutator teu i a continuació del Salutator de Knuth.&lt;/p&gt;
&lt;p&gt;Inclou el codi de les dues classes de Knuth.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-fitxers-jar"&gt;
&lt;h2&gt;Exercici 2. Fitxers jar&lt;/h2&gt;
&lt;p&gt;Java ens ofereix la possibilitat d'empaquetar el nostre codi en un sol
fitxer que anomena jar. Empaquetant d'aquesta manera, podem distribuir
còmodament i eficient la nostra aplicació.&lt;/p&gt;
&lt;p&gt;En aquest problema construirem un fitxer jar de la nostra aplicació
HolaPackage (la del nostre paquet no la de Knuth) realitzada a
l'exercici anterior.&lt;/p&gt;
&lt;p&gt;Com que el que realitzarem és molt bàsic, si tens interès en conèixer
més detalls d'aquesta eina, pots considerar el &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/deployment/jar/index.html"&gt;tutorial d'oracle pel
jar&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;En qualsevol cas, segueix les passes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Col·locat al directori que conté la base del teu package (és a dir
la carpeta que conté org/ si has seguit els exemples anteriors)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Executa la següent comanda:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;jar cvf elteunom.jar org/estudi_poo/«elteunom»/*.class
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Copia el fitxer resultant a /tmp i fes&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;unzip elteunom.jar
&lt;span class="nv"&gt;$ &lt;/span&gt;cat META-INF/MANIFEST.MF
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Hauria d'aparèixer quelcom semblant a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Manifest-Version: 1.0
Created-By: 1.6.0_15 (Sun Microsystems Inc.)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En un moment veurem per a què serveix aquest fitxer.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Ara, si intentes executar el teu programa veuràs que no es pot&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java -jar elteunom.jar
Failed to load Main-Class manifest attribute from
elteunom.jar
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;El problema està en que no hem indicat al .jar la classe principal
de la nostra aplicació. Per fer-ho, hem de completar el fitxer
&lt;tt class="docutils literal"&gt;MANIFEST.MF&lt;/tt&gt; que hem vist abans.&lt;/p&gt;
&lt;p&gt;El manifest és un fitxer que conté informació de l'aplicació
guardada en el fitxer jar. Aquesta informació pot ser molt variada
com ara control de versió, el classpath, o la signatura
electrònica. De moment, ens interessarem en indicar la classe
principal (la que conté el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Edita un fitxer de text (per exemple amb nom manifest.txt) i
inclou-hi el següent contingut&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Main-Class: org.estudi_poo.«elteunom».HolaPackage
                                                    &amp;lt;--- salt de línia
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Assegura't que el fitxer acaba amb un salt de línia, o no
interpretarà bé el contingut.&lt;/p&gt;
&lt;p&gt;Ara construeix el jar amb la comanda (vigila on has posat manifest.txt)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;jar cvfm «elteunom».jar «camí al manifest»/manifest.txt org/estudi_poo/«elteunom»/*.class
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I executa el teu programa&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java -jar «elteunom».jar
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Torna a mirar el contingut del fitxer &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;META-INF/MANIFEST.MF&lt;/span&gt;&lt;/tt&gt; que
ara hauria de contenir una nova línia&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;D'aquest exercici no cal que lliuris res!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-entorn-operatiu-dels-animals-jar"&gt;
&lt;h2&gt;Exercici 3. Entorn operatiu dels animals.jar&lt;/h2&gt;
&lt;p&gt;Modifica l'exercici de l'entorn operatiu dels animals de manera que
ara totes les classes pertanyin al package
&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;org.estudi_poo.«elteunom».animals&lt;/span&gt;&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Empaqueta-ho tot a un .jar que permeti executar l'entorn directament.
Lliura el .jar amb els .class i els fitxers font.&lt;/p&gt;
&lt;/div&gt;
&lt;hr class="docutils" /&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="packageprivate" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;[1]&lt;/td&gt;&lt;td&gt;&lt;em&gt;(&lt;a class="fn-backref" href="#id1"&gt;1&lt;/a&gt;, &lt;a class="fn-backref" href="#id2"&gt;2&lt;/a&gt;)&lt;/em&gt; Aquesta pregunta pot resultar una mica difícil si
encara no tens més que nocions del concepte de &lt;em&gt;visibilitat&lt;/em&gt; en Java.
Consell: fes el que puguis ara i, quan ja sàpigues més de visibilitats,
torna i revisa-ho. El primer intent t'ajudarà a entendre millor la
visibilitat i els &lt;em&gt;packages&lt;/em&gt;.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:46:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:paquets-i-empaquetats.html</guid><category>java</category></item><item><title>Visibilitat</title><link>http://apuntstecnics.herokuapp.com/visibilitat.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;A continuació trobaràs una petita guia per obtenir una visió precisa
del control d'accés en el llenguatge de programació Java.&lt;/p&gt;
&lt;p&gt;El document consta d'un únic exercici que et dirigirà a una secció del
tutorial &amp;quot;oficial&amp;quot; de java, i a partir d'una sèrie de preguntes
concretes, t'ajudarà a plantejar-te els punts més rellevants del
document, i del tema.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-visibilitat"&gt;
&lt;h2&gt;Exercici Visibilitat&lt;/h2&gt;
&lt;p&gt;Llegeix l'article &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html"&gt;Controlling Access to Members of a Class&lt;/a&gt;
i contesta les preguntes que apareixen a continuació.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;per a què serveix un modificador de nivell d'accés?&lt;/li&gt;
&lt;li&gt;quants nivells de control d'accés n'hi ha a java. Indica què afecta
cadascun d'ells&lt;/li&gt;
&lt;li&gt;quins modificadors es poden indicar a la definició d'una classe?&lt;/li&gt;
&lt;li&gt;puc indicar que una classe és privada amb &lt;em&gt;private&lt;/em&gt;?&lt;/li&gt;
&lt;li&gt;quins són els modificadors que es poden indicar per una propietat
d'una classe? i sinó s'indica cap?&lt;/li&gt;
&lt;li&gt;quins són els modificadors que es poden indicar per un mètode d'una
classe? i sinó s'indica cap?&lt;/li&gt;
&lt;li&gt;suposa que tens una propietat a una superclasse marcada com a
&lt;em&gt;public&lt;/em&gt; i extens la superclasse amb una subclasse que pertany a un
altre &lt;em&gt;package&lt;/em&gt;. Pot un mètode de la subclasse accedir a la
propietat directament?&lt;/li&gt;
&lt;li&gt;suposa que tens una propietat a una superclasse marcada com a
protected i extens la superclasse amb una subclasse que pertany a
un altre &lt;em&gt;package&lt;/em&gt;. Pot un mètode de la subclasse accedir a la
propietat directament?&lt;/li&gt;
&lt;li&gt;suposa que tens una propietat a una superclasse marcada com a
&lt;em&gt;private&lt;/em&gt; i extens la superclasse amb una subclasse que pertany a
un altre &lt;em&gt;package&lt;/em&gt;. Pot un mètode de la subclasse accedir a la
propietat directament?&lt;/li&gt;
&lt;li&gt;suposa que tens una propietat a una superclasse marcada com a
&lt;em&gt;package&lt;/em&gt; i extens la superclasse amb una subclasse que pertany a
un altre &lt;em&gt;package&lt;/em&gt;. Pot un mètode de la subclasse accedir a la
propietat directament?&lt;/li&gt;
&lt;li&gt;amb quin modificador es pot evitar que un membre d'una classe no
pugui accedir a una propietat de la mateixa classe?&lt;/li&gt;
&lt;li&gt;com es podria permetre canviar el valor d'una propietat d'una
classe marcada com a &lt;em&gt;private&lt;/em&gt;, des d'un mètode d'una altra classe
que no es troba a la jerarquia ni al &lt;em&gt;package&lt;/em&gt; de la primera ?&lt;/li&gt;
&lt;li&gt;explica el valor 'Y' de la columna Gamma de l'exemple.&lt;/li&gt;
&lt;li&gt;explica el valor 'N' de la columna Beta de l'exemple.&lt;/li&gt;
&lt;li&gt;quin és el modificador que recomanen usar per defecte a l'article?
Perquè creus?&lt;/li&gt;
&lt;li&gt;quin és el modificador que recomanen evitar per defecte a
l'article? Quina raó donen? I llavors, perquè ells mateixos el fan
servir als seus exemples?&lt;/li&gt;
&lt;li&gt;perquè creus que és segur marcar com a &lt;em&gt;public&lt;/em&gt; les constants?&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:45:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:visibilitat.html</guid><category>java</category></item><item><title>Classes abstractes</title><link>http://apuntstecnics.herokuapp.com/classes-abstractes.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document introdueix l'alumne de programació orientada a
objectes al concepte de classe abstracta. Està estructurat en una
primera visió teòrica del concepte, per després oferir uns exercicis
que permetin donar-li un sentit pràctic.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;Classes abstractes&lt;/h2&gt;
&lt;p&gt;A una jerarquia de classes, es pressuposa que la superclasse és més
&lt;em&gt;abstracta&lt;/em&gt; que la subclasse. Sovint recollim els elements comuns
d'unes classes i els agrupem en una superclasse (per exemple, la
classe Animal és creada a partir d'elements comuns de Gat i Gos).&lt;/p&gt;
&lt;p&gt;Quan la raó principal de crear una classe és per actuar com a
agrupador d'elements comuns de les seves subclasses, però no es pretén
que existeixin instàncies d'aquesta classe, aquesta classe li diem
classe abstracta.&lt;/p&gt;
&lt;p&gt;A l'exemple dels animals, té sentit instanciar un Gat o un Gos. En
podem fer coses amb ells com, demanar-los que miolin o que bordin (que
facin soroll). Quina &amp;quot;pinta&amp;quot; té però una instància d'Animal? Quin
soroll ha de fer un animal quan se li demani &lt;tt class="docutils literal"&gt;fesSoroll()&lt;/tt&gt;?&lt;/p&gt;
&lt;p&gt;D'una classe abstracta no es poden fer instàncies, però poden contenir
qualsevol dels elements que una classe &amp;quot;normal&amp;quot; tingui permès. A més a
més, pot fer servir el modificador abstract per a indicar mètodes que
han de ser implementats per les subclasses. En el moment que una
classe fa servir el modificador abstract en algun dels seus mètodes,
es torna abstracta.&lt;/p&gt;
&lt;p&gt;En cas que tots els mètodes d'una classe siguin abstractes, és
preferible fer servir el concepte d'interface que veurem més endavant.&lt;/p&gt;
&lt;p&gt;Una subclasse d'una classe abstracta pot ser també abstracta.
Simplement cal no implementar algun dels mètodes de la superclasse.&lt;/p&gt;
&lt;p&gt;Considerem el clàssic exemple de les figures geomètriques. Les figures
geomètriques, com ara cercles, quadrats, triangles..., tenen alguns
elements en comú. Per exemple, totes elles ocupen un àrea i se'ls pot
mesurar el perímetre. En paraules de la POO, totes les figures
disposen de dos mètodes: getArea() i getPerimetre() que retornen
respectivament l'àrea i el perímetre corresponents a la figura.&lt;/p&gt;
&lt;p&gt;És a dir, les classes Cercle i Rectangle serien subclasses de la
classe Figura. Ara bé, com calculem l'àrea d'una instància de la
classe Figura? No té sentit, oi? Per tant, la classe Figura seria una
classe abstracta.&lt;/p&gt;
&lt;p&gt;La implementació de la classe Figura vindria a ser quelcom similar a:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;abstract&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Figura&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;abstract&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;getArea&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;abstract&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;getPerimetre&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixa't en l'ús del modificador abstract als diferents mètodes.&lt;/p&gt;
&lt;p&gt;La implementació de la classe Cercle podria ser:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Cercle&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Figura&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Cercle&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Cercle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;radi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;getArea&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pow&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getRadi&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PI&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;getPerimetre&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PI&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;getRadi&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;getRadi&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixat en que l'herència s'indica exactament igual que amb una
superclasse no abstracta (concreta)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-figures"&gt;
&lt;h2&gt;Exercici 1. Figures&lt;/h2&gt;
&lt;p&gt;Implementaren un package anomenat
&lt;em&gt;org.estudi_poo.«elteunom».figures&lt;/em&gt; que contindrà diferents
figures geomètriques. De moment només: cercle (que ja el tens),
rectangle, quadrat i triangle.&lt;/p&gt;
&lt;p&gt;Nota: si et passa pel cap, venç la temptació de fer Quadrat una
subclasse de Rectangle (recorda el principi de Liskov)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-entorn-d-animals-abstractes"&gt;
&lt;h2&gt;Exercici 2. Entorn d'Animals abstractes&lt;/h2&gt;
&lt;p&gt;Torna a considerar l'exercici de &lt;em&gt;l'entorn operatiu dels animals&lt;/em&gt; del
tema de &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/polimorfisme.html"&gt;polimorfisme&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Modifica la jerarquia d'animals de manera que ara la classe Animal
sigui abstracta. Segurament l'únic mètode que necessites construir com
a &lt;em&gt;abstract&lt;/em&gt; és el de &lt;tt class="docutils literal"&gt;Animal.fesSoroll()&lt;/tt&gt;. Fixa't que ja no et
caldrà fer res estrany com deixar el cos del mètode en blanc, ja que
ara ni tindrà cos! Té més sentit, no?&lt;/p&gt;
&lt;p&gt;Si ho vas fer bé, tota la resta hauria de compilar i executar sense
més canvi. Altrament, analitza si és raonable fer els canvis que
t'obliga aquesta nova versió.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-mes-animals"&gt;
&lt;h2&gt;Exercici 3. Més animals&lt;/h2&gt;
&lt;p&gt;Se't proposa ara crear una nova jerarquia d'animals. Per les
necessitats de l'exercici, el que farem serà simplificar la classe
Animal de l'exercici anterior. Evidentment, no s'espera que aquesta
versió sigui compatible amb exercicis previs, eh?&lt;/p&gt;
&lt;p&gt;En aquest cas, Animal únicament tindrà els següents mètodes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;Animal(String nom)&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String getNom()&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String moute()&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String menja()&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String fesSoroll()&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;String dorm()&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Fixa't que tant el constructor, com &lt;tt class="docutils literal"&gt;getNom()&lt;/tt&gt; poden ser
implementats perfectament per la classe abstracta Animal, mentre que
la resta són específics de cada animal concret.&lt;/p&gt;
&lt;p&gt;Implementa les subclasses d'animal Gat, Gos, Canari i Lleo, de manera
que es pugui executar el següent codi.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;estudi_poo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="n"&gt;elteunom&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;animals&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Vector&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaAnimals&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;llistaAnimals&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="c1"&gt;// crea uns quants animals&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Fido&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Canari&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Piolin&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Lleo&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Bonifaci&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="c1"&gt;// fa que tots els animals facin les diferents accions&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt; &lt;span class="nl"&gt;a:&lt;/span&gt; &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt;     &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;moute&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; fa: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; fa: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fesSoroll&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; fa: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;dorm&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En executar-lo, cal que es generi el següent resultat per sortida
estàndard:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Fido camina
Fido fa: nyam nyam
Fido fa: bof bof
Fido fa: ZZZzzzz
Renat camina
Renat fa: myam myam
Renat fa: meww
Renat fa: ZZZzzzz
Piolin vola
Piolin fa: pyam pyam
Piolin fa: piu piu
Piolin fa: pi-pi-pi-pi
Bonifaci camina
Bonifaci fa: gram gram
Bonifaci fa: grrrr
Bonifaci fa: ZRrrrrr
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Avís&lt;/strong&gt;: és possible que trobis problemes per a adaptar codi
d'exercicis previs que aparentment s'assemblen a les classes d'aquest.
Com que hi ha prou canvis (ex. les instàncies de les classes i
subclasses d'Animal, mai no mostren missatges per sortida estàndard
sinó que el retornen) és recomanable començar tot el codi d'aquest
exercici des de zero.&lt;/p&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:44:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:classes-abstractes.html</guid><category>java</category></item><item><title>Interfaces</title><link>http://apuntstecnics.herokuapp.com/interfaces.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document ofereix una breu introducció al concepte
d'&lt;em&gt;interface&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Es tracta d'un mecanisme molt flexible que permet definir el
comportament de les classes, de tal manera que de vegades puguem
arribar a no necessitar conèixer amb quina classe concreta estem
treballant mentre tinguem clar que respon al comportament que esperem.&lt;/p&gt;
&lt;p&gt;El tema s'inicia amb l'anàlisi de les possibilitats d'implementació
d'un cas concret en forma d'exercici. Tot seguit es fa una discussió
més teòrica, per acabar amb uns exercicis que permeten posar en
pràctica els continguts.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="animals-de-companyia"&gt;
&lt;h2&gt;Animals de companyia&lt;/h2&gt;
&lt;p&gt;Considera la jerarquia de l'exercici dels animals abstractes.&lt;/p&gt;
&lt;p&gt;Imagina que ara volguéssim implementar els mètodes propis d'un animal
de companyia (&lt;tt class="docutils literal"&gt;siguesAmistos()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;juga()&lt;/tt&gt;)&lt;/p&gt;
&lt;p&gt;Pensa en les diferents possibilitats i considera els seus avantatges i
inconvenients:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;implementar els mètodes a la classe Animal&lt;/li&gt;
&lt;li&gt;indicar els mètodes com a abstractes a la classe Animal i
implementar-los a les subclasses&lt;/li&gt;
&lt;li&gt;Col·loca els mètodes només allà on tenen sentit (ex. al Gos i al
Gat)&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="section" id="proposta-de-respostes"&gt;
&lt;h3&gt;Proposta de respostes&lt;/h3&gt;
&lt;p&gt;No les miris fins que no hagis intentat donar una resposta pròpia!&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;implementar els mètodes a la classe Animal&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;PROS:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;totes les subclasses d'Animal hereten automàticament els mètodes&lt;/li&gt;
&lt;li&gt;no cal modificar les subclasses existents ni adaptar les futures&lt;/li&gt;
&lt;li&gt;les subclasses poden ser usades polimòrficament com a animals de
companyia&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;CONS:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;un lleó com a animal de companyia?&lt;/li&gt;
&lt;li&gt;tots els animals juguen igual?&lt;/li&gt;
&lt;/ul&gt;
&lt;ol class="arabic simple" start="2"&gt;
&lt;li&gt;indicar els mètodes com a abstractes a la classe Animal i
implementar-los a les subclasses&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;PROS:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;permet evitar el segon problema de la primera opció: els diferents
animals podran implementar els mètodes a la seva manera.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;CONS:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;cal modificar totes les subclasses (fins i tot les que no
corresponen a animals de companyia)&lt;/li&gt;
&lt;li&gt;queda lleig: sí, encara que no faci res, un Lleó indica (amb la seva
interfície) que ofereix el mètode siguesAmistos()&lt;/li&gt;
&lt;/ul&gt;
&lt;ol class="arabic simple" start="3"&gt;
&lt;li&gt;Col·loca els mètodes només allà on tenen sentit (ex. al Gos i al Gat)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;PROS:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;no cal preocupar-se de lleons llepant-te la cara en arribar a casa&lt;/li&gt;
&lt;li&gt;no cal modificar res de les classes que no són animals de companyia&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;CONS:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;no podem fer servir polimorfisme amb les subclasses que són animals
de companyia&lt;/li&gt;
&lt;li&gt;com que no hi ha cap &amp;quot;contracte&amp;quot; cada subclasse pot anomenar els
mètodes de diferent manera: ex. siguesBonGosset() en comptes de
siguesAmistos()&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Sembla com si necessitéssim una altra superclasse per Gos i Gat?&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="multiples-superclasses"&gt;
&lt;h2&gt;Múltiples superclasses?&lt;/h2&gt;
&lt;p&gt;A això s'anomena herència múltiple i, com a aquestes alçades
probablement ja sabràs, Java no l'admet! En canvi, ens ofereix una
alternativa anomenada &lt;em&gt;interface&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Una &lt;em&gt;interface&lt;/em&gt; de Java especifica un conjunt de constants i signatures
de mètodes que hauran de ser definits per qualsevol classe que
implementi la &lt;em&gt;interface&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Un dels avantatges de les &lt;em&gt;interfaces&lt;/em&gt; és la possibilitat de
desenvolupar independentment peces de codi que només es comprometen a
respectar &lt;em&gt;un contracte&lt;/em&gt;: la implementació de la &lt;em&gt;interface&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Donat que una classe pot implementar un nombre indefinit d'&lt;em&gt;interfaces&lt;/em&gt;,
aquest mecanisme resol parcialment l'aparent limitació del Java amb
l'herència múltiple.&lt;/p&gt;
&lt;p&gt;Considerem el següent exemple adaptat del &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/"&gt;tutorial oficial de Java&lt;/a&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="nc"&gt;Conduible&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
   &lt;span class="c1"&gt;// declaracions de constants (si escau)&lt;/span&gt;
   &lt;span class="c1"&gt;// signatures dels mètodes&lt;/span&gt;
   &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;gira&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Direction&lt;/span&gt; &lt;span class="n"&gt;direccio&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;   &lt;span class="c1"&gt;// Un enumerat amb els valors LEFT i RIGHT&lt;/span&gt;
              &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;radi&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;velocitatInicial&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;velocitatFinal&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
   &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;canviaCarril&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Direction&lt;/span&gt; &lt;span class="n"&gt;direccio&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;velocitatInicial&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;velocitatFinal&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
   &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;senyalitzaGir&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Direction&lt;/span&gt; &lt;span class="n"&gt;direccio&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;activar&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
   &lt;span class="c1"&gt;// més signatures de mètodes&lt;/span&gt;
   &lt;span class="c1"&gt;// ...&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixa't que les signatures dels mètodes no tenen claus i finalitzen amb
punt i coma. Et sona, oi?&lt;/p&gt;
&lt;p&gt;Per a fer servir la &lt;em&gt;interface&lt;/em&gt; Conduible podem implementar:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Seat600&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;Conduible&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
   &lt;span class="c1"&gt;// mètodes definits per Conduible&lt;/span&gt;
   &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;senyalitzaGir&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Direction&lt;/span&gt; &lt;span class="n"&gt;direccio&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;activar&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="c1"&gt;//codi per activar i desactivar els intermitents del Seat 600&lt;/span&gt;
      &lt;span class="c1"&gt;// ...&lt;/span&gt;
   &lt;span class="o"&gt;}&lt;/span&gt;
   &lt;span class="c1"&gt;// ...&lt;/span&gt;
   &lt;span class="c1"&gt;// altres membres de la classe independents de la interface i&lt;/span&gt;
   &lt;span class="c1"&gt;// no visibles als usuaris d&amp;#39;aquesta&lt;/span&gt;
   &lt;span class="c1"&gt;// ...&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixa't que, per a implementar una &lt;em&gt;interface&lt;/em&gt;, ho indiquem amb
implements. Per altra banda, implementar un mètode de la &lt;em&gt;interface&lt;/em&gt;
implica simplement escriure el mètode incloent el cos.&lt;/p&gt;
&lt;p&gt;Per què la classe implementi correctament una &lt;em&gt;interface&lt;/em&gt; cal que
implementi &lt;strong&gt;tots&lt;/strong&gt; els mètodes especificats per la &lt;em&gt;interface&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="classes-subclasses-classes-abstractes-interfaces"&gt;
&lt;h2&gt;Classes, subclasses, classes abstractes, &lt;em&gt;interfaces&lt;/em&gt;?&lt;/h2&gt;
&lt;p&gt;Recepta per a decidir si vols una classe, una subclasse, una classe
abstracta o una &lt;em&gt;interface&lt;/em&gt;.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Si de la teva nova classe només pots dir que és un &lt;em&gt;Object&lt;/em&gt; (&lt;em&gt;is a&lt;/em&gt;),
llavors fes una classe concreta&lt;/li&gt;
&lt;li&gt;Si la teva nova classe correspon a una versió més específica d'una
altra existent, fes una subclasse (recorda el principi de
substitució de Liskov)&lt;/li&gt;
&lt;li&gt;Si et cal realitzar una plantilla per a un conjunt de classes i
disposes d'algun codi que totes les subclasses podrien fer servir,
i no t'interessa que es pugui instanciar aquesta classe, crea una
classe abstracta&lt;/li&gt;
&lt;li&gt;Si et cal definir un rol al que altres classes hagin de jugar, amb
independència de la posició d'aquestes a l'arbre jeràrquic, fes-ho
amb una interfície.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-la-interficie-d-animals-de-companyia"&gt;
&lt;h2&gt;Exercici 1. La interfície d'animals de companyia&lt;/h2&gt;
&lt;p&gt;Defineix la interfície AnimalDeCompanyia amb els mètodes &lt;tt class="docutils literal"&gt;String
siguesAmistos()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;String juga()&lt;/tt&gt;. Fes que Gos i Gat implementin
la interfície (Canari no cal)&lt;/p&gt;
&lt;p&gt;Aconsegueix que funcioni el codi següent:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;estudi_poo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="n"&gt;elteunom&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;animals&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Vector&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaAnimals&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;llistaAnimals&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;AnimalDeCompanyia&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;llistaAnimalsDeCompanyia&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;AnimalDeCompanyia&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="c1"&gt;// crea uns quants animals&lt;/span&gt;
        &lt;span class="n"&gt;Gos&lt;/span&gt; &lt;span class="n"&gt;gos&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Fido&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gos&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimalsDeCompanyia&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gos&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimalsDeCompanyia&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Canari&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Piolin&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Lleo&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Bonifaci&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="c1"&gt;// fa que tots els animals facin coses&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt; &lt;span class="nl"&gt;a:&lt;/span&gt; &lt;span class="n"&gt;llistaAnimals&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt;     &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;moute&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; fa: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;menja&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; fa: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fesSoroll&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; fa: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;dorm&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="c1"&gt;// fa que tots els animals de companyia facin coses&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;AnimalDeCompanyia&lt;/span&gt; &lt;span class="nl"&gt;a:&lt;/span&gt; &lt;span class="n"&gt;llistaAnimalsDeCompanyia&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(((&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt;     &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;siguesAmistos&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(((&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt;     &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;juga&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En executar, el codi anterior ha de generar el següent resultat per
sortida estàndard:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Fido camina
Fido fa: nyam nyam
Fido fa: bof bof
Fido fa: ZZZzzzz
Renat camina
Renat fa: myam myam
Renat fa: meww
Renat fa: ZZZzzzz
Piolin vola
Piolin fa: pyam pyam
Piolin fa: piu piu
Piolin fa: pi-pi-pi-pi
Bonifaci camina
Bonifaci fa: gram gram
Bonifaci fa: grrrr
Bonifaci fa: ZRrrrrr
Fido et llepa la cara
Fido busca una pilota
Renat es frega amb la teva cama
Renat esgarrapa el teu sofa
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="pistes"&gt;
&lt;h3&gt;Pistes:&lt;/h3&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;class Gos extends Animal implements AnimalDeCompanyia { ... }&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;AnimalDeCompanyia.getNom()&lt;/tt&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:43:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:interfaces.html</guid><category>java</category></item><item><title>Conjunts en Java</title><link>http://apuntstecnics.herokuapp.com/conjunts-en-java.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document introdueix l'agrupació d'informació sense ordre en un
objecte Java. Per fer-ho, descriu l'important concepte d'&lt;em&gt;igualtat&lt;/em&gt;
des de la perspectiva del llenguatge.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="conjunts"&gt;
&lt;h2&gt;Conjunts&lt;/h2&gt;
&lt;p&gt;Entendrem com &lt;em&gt;conjunt&lt;/em&gt; una agrupació d'objectes en alguna classe
contenidora que implementi la &lt;em&gt;interface&lt;/em&gt; &lt;tt class="docutils literal"&gt;Set&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;De entre les característiques particulars dels conjunts destacarem el
fet que no accepten elements repetits i que no es poden fer
assumpcions en l'ordre en que es recuperen els elements introduïts.&lt;/p&gt;
&lt;p&gt;El següent diagrama UML és una representació parcial de les classes i
&lt;em&gt;interfaces&lt;/em&gt; que ofereix l'API de Java per donar suport al concepte de
conjunts.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Jerarquia de HashSet" src="http://apuntstecnics.herokuapp.com/images/poo021.img001.hashset.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Algunes de les operacions principals de la &lt;em&gt;interface&lt;/em&gt; &lt;tt class="docutils literal"&gt;Set&lt;/tt&gt; són:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean add(E e)&lt;/tt&gt;: afegeix l'element &lt;tt class="docutils literal"&gt;e&lt;/tt&gt; al conjunt sempre i
quant no s'hi trobi ja. En cas que s'afegeixi, retorna &lt;tt class="docutils literal"&gt;true&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;int size()&lt;/tt&gt;: retorna el nombre d'elements dins el conjunt.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean remove(Object o)&lt;/tt&gt;: elimina l'element &lt;tt class="docutils literal"&gt;o&lt;/tt&gt; del conjunt si
hi era, i retorna &lt;tt class="docutils literal"&gt;true&lt;/tt&gt; en cas que l'hagi pogut eliminar.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;boolean contains(Object o)&lt;/tt&gt;: retorna &lt;tt class="docutils literal"&gt;true&lt;/tt&gt; si el conjunt
inclou l'objecte &lt;tt class="docutils literal"&gt;o&lt;/tt&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Mira l'&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/Set.html"&gt;API de Set&lt;/a&gt; per a
més detalls.&lt;/p&gt;
&lt;p&gt;Per recórrer tots els elements d'un conjunt, donat que implementen
&lt;em&gt;Iterable&lt;/em&gt;, podem fer servir el bucle &lt;em&gt;foreach&lt;/em&gt;. Per exemple&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Set&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nl"&gt;s:&lt;/span&gt; &lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Tal i com està definit el codi anterior, no podem fer cap assumpció de
l'ordre en que apareixeran els elements del conjunt de &lt;em&gt;Strings&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Una de les implementacions de conjunts és &lt;tt class="docutils literal"&gt;HashSet&lt;/tt&gt;. Serà la que
farem servir pels següents exercicis.&lt;/p&gt;
&lt;div class="section" id="exercici-1-gestio-d-un-conjunt-de-strings"&gt;
&lt;h3&gt;Exercici 1. Gestió d'un conjunt de Strings&lt;/h3&gt;
&lt;p&gt;Implementa un programa que permeti mantenir un conjunt de &lt;em&gt;Strings&lt;/em&gt;.
Les opcions disponibles seran:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;a «string»&lt;/tt&gt;: afegeix el String al conjunt si no existia.&lt;/p&gt;
&lt;p&gt;Si el pot afegir indica &lt;tt class="docutils literal"&gt;Afegit «string»&lt;/tt&gt; altrament indica &lt;tt class="docutils literal"&gt;Ja
existeix «string»&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;e «string»&lt;/tt&gt;: consulta si el String es troba al conjunt. Indica
&lt;tt class="docutils literal"&gt;Existeix «string»&lt;/tt&gt; o &lt;tt class="docutils literal"&gt;No existeix «string»&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;r «string»&lt;/tt&gt;: elimina el String del conjunt si existia.&lt;/p&gt;
&lt;p&gt;Si el pot eliminar indica &lt;tt class="docutils literal"&gt;Eliminat «string»&lt;/tt&gt; altrament indica
&lt;tt class="docutils literal"&gt;No existeix «string»&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;b&lt;/tt&gt;         : buida el conjunt. Demana confirmació si hi ha al
menys un element a eliminar amb &lt;tt class="docutils literal"&gt;Eliminar «n» element/s? (s/N)&lt;/tt&gt;.
Si no hi ha cap element, indica &lt;tt class="docutils literal"&gt;Conjunt buit&lt;/tt&gt;.  Finalment, i en
qualsevol dels casos, indica el nombre d'elements eliminats amb
&lt;tt class="docutils literal"&gt;Eliminats «n» element/s&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;q&lt;/tt&gt;         : mostra el nombre d'elements al conjunt amb el
missatge: &lt;tt class="docutils literal"&gt;Nombre d'elements: «n»&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;m&lt;/tt&gt;         : mostra tots els elements del conjunt separats per
coma i entre cometes dobles, o &lt;tt class="docutils literal"&gt;Conjunt buit&lt;/tt&gt; si no hi ha cap
element.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;x&lt;/tt&gt;         : finalitza l'execució.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="igualtat"&gt;
&lt;h2&gt;Igualtat&lt;/h2&gt;
&lt;p&gt;Què vol dir que dos objectes siguin iguals?&lt;/p&gt;
&lt;p&gt;Probablement, estarem d'acord amb que dos objectes són iguals si fan
referència a la mateixa instància, oi? És clar, és la identitat la que
està en joc!&lt;/p&gt;
&lt;p&gt;Són iguals però, dos cadenes de caràcters que, no ocupant la mateixa
posició de memòria, contenen el mateix (ex. &amp;quot;hola&amp;quot;)? Sembla què és
quelcom que esperaríem, oi?&lt;/p&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;EnvoltaString: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;hola&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\&amp;quot; == \&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\&amp;quot; -&amp;gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\&amp;quot;.equals(\&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\&amp;quot;) -&amp;gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;)));&lt;/span&gt;
        &lt;span class="c1"&gt;//&lt;/span&gt;
        &lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; == &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; -&amp;gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.equals(&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;) -&amp;gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esb&lt;/span&gt;&lt;span class="o"&gt;)));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;El codi anterior té com a sortida:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&amp;quot;hola&amp;quot; == &amp;quot;hola&amp;quot; -&amp;gt; false
&amp;quot;hola&amp;quot;.equals(&amp;quot;hola&amp;quot;) -&amp;gt; true
EnvoltaString: hola == EnvoltaString: hola -&amp;gt; false
EnvoltaString: hola.equals(EnvoltaString: hola) -&amp;gt; false
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Com ja sabem, per comparar &lt;em&gt;Strings&lt;/em&gt; en Java, ens hem vist obligats a
fer servir el mètode &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Aquest mètode l'hereta tota classe que definim de la classe &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;.
A l'exemple, però, no sembla funcionar per altres objectes
com ara &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;El problema deu trobar al mètode &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt;. On està definit el codi
de &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; que s'executa a la darrera línia de l'exemple?&lt;/p&gt;
&lt;p&gt;A &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt; és clar. Però lògicament a &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt; no li podem demanar que
sàpiga com comparar totes i cadascuna de les seves subclasses!&lt;/p&gt;
&lt;p&gt;Imagina-t'ho només amb &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;. Quan hauria de considerar que
dos &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; són iguals? Quan els seus valors són iguals (segons
&lt;tt class="docutils literal"&gt;String.equals()&lt;/tt&gt;)? Quan siguin iguals independents de majúscules i
minúscules?&lt;/p&gt;
&lt;p&gt;Nosaltres decidim què fa iguals a dues instàncies de &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;
i, per tant, nosaltres haurem de desenvolupar el codi per
comparar-les.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;EnvoltaString: &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;hola&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; == &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; -&amp;gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.equals(&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;esb&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;) -&amp;gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esb&lt;/span&gt;&lt;span class="o"&gt;)));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixa't que sobreescrivim &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; de manera que, en rebre un altre &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;, indiqui cert si els valors són iguals segons &lt;tt class="docutils literal"&gt;String.equals()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;La sortida d'aquest programa, com era d'esperar, serà:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;EnvoltaString: hola == EnvoltaString: hola -&amp;gt; false
EnvoltaString: hola.equals(EnvoltaString: hola) -&amp;gt; true
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-2-envoltastring-indiferent-a-majuscules-i-minuscules"&gt;
&lt;h3&gt;Exercici 2. EnvoltaString indiferent a majúscules i minúscules&lt;/h3&gt;
&lt;p&gt;Modifica la classe &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; de manera que consideri iguals
dos &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; quan els seus valors coincideixen sense tenir en
compte majúscules i minúscules.&lt;/p&gt;
&lt;p&gt;De fet, no hem redefinit completament el &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; de &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;. Només l'hem sobrecarregat quan el paràmetre sigui un &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Què passaria si provéssim el següent?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;esa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;GatRenat&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;()));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest cas cridaria a &lt;tt class="docutils literal"&gt;Object.equals()&lt;/tt&gt; i respondria
adequadament. Si volguéssim controlar-ho més podríem definir
&lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; com:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt; &lt;span class="k"&gt;instanceof&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;  &lt;span class="c1"&gt;// si ja no és ni un EnvoltaString malament&lt;/span&gt;
        &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(((&lt;/span&gt;&lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-3-envoltastring-es-compara-amb-strings"&gt;
&lt;h3&gt;Exercici 3. EnvoltaString és compara amb Strings&lt;/h3&gt;
&lt;p&gt;Modifica la classe &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; de manera que permeti comparar un
&lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; també amb un String i que en aquest cas,
&lt;tt class="docutils literal"&gt;EnvoltaString.equals(String)&lt;/tt&gt; sigui cert si el paràmetre és
igual al valor del &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Planteja dues versions, amb una que no faci servir &lt;tt class="docutils literal"&gt;instanceof&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="no-hi-ha-prou-amb-equals"&gt;
&lt;h3&gt;No hi ha prou amb &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt;&lt;/h3&gt;
&lt;p&gt;Si les coses fossin tan fàcils com redefinir el mètode &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt;,
Java seria massa avorrit.&lt;/p&gt;
&lt;p&gt;Considera la classe &lt;a class="reference external" href="http://java.sun.com/javase/7/docs/api/java/util/HashSet.html"&gt;java.util.HashSet&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Segons la seva documentació, aquesta classe implementa un conjunt
d'elements en el que les operacions bàsiques (afegir, eliminar,
comptar i cercar) tenen un cost constant.&lt;/p&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.HashSet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;  &lt;span class="c1"&gt;// aquest no l&amp;#39;afegirà perquè està repetit&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="nl"&gt;i:&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Trobat l&amp;#39;enter: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Una possible sortida seria:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Trobat l&amp;#39;enter: 0
Trobat l&amp;#39;enter: 1
Trobat l&amp;#39;enter: 2
Trobat l&amp;#39;enter: 3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En aquest cas, els valors han sortit ordenats però no podem esperar
això sempre d'una classe conjunt.&lt;/p&gt;
&lt;p&gt;Ara bé, que passarà amb una classe feta per nosaltres?&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.HashSet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// definim una classe interna que encapsula un Integer&lt;/span&gt;
    &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Enter&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt; &lt;span class="nl"&gt;i:&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Trobat l&amp;#39;enter: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;En negreta veiem els canvis principals. Ara, el nostre
&lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; disposa d'un valor de tipus Integer, de constructors
adequats per a incialitzar-lo i d'un mètode &lt;tt class="docutils literal"&gt;toString()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Per altra banda, el &lt;tt class="docutils literal"&gt;HashSet&lt;/tt&gt; ara és de &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt; i no de &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Funcionarà el programa? La sortida pot ser:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Trobat l&amp;#39;enter: 1
Trobat l&amp;#39;enter: 3
Trobat l&amp;#39;enter: 2
Trobat l&amp;#39;enter: 2
Trobat l&amp;#39;enter: 0
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;No et deixis confondre per l'ordre de la sortida. Si a tu et surt un
altre, recorda que els conjunts no es basen en un ordre concret.&lt;/p&gt;
&lt;p&gt;El punt crític està en el fet que el valor 2 està repetit! No viola
això el què ha de ser un conjunt?&lt;/p&gt;
&lt;p&gt;Però, com s'ho pot fer &lt;tt class="docutils literal"&gt;HashSet&lt;/tt&gt; per saber que dos Enter són iguals?&lt;/p&gt;
&lt;p&gt;És clar, el problema està en que Enter no té implementat equals()&lt;/p&gt;
&lt;p&gt;Fem-ho doncs&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.HashSet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// definim una classe interna que encapsula un Integer&lt;/span&gt;
    &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Enter&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt; &lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt; &lt;span class="nl"&gt;i:&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Trobat l&amp;#39;enter: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Funcionarà?&lt;/p&gt;
&lt;p&gt;Doncs no. Tenim el mateix resultat! Perquè?&lt;/p&gt;
&lt;p&gt;Tot plegat, té a veure amb un mètode heretat de &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt; anomenat
&lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Mirem el que ens diu la documentació d'&lt;a class="reference external" href="http://java.sun.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29"&gt;aquest mètode&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[&lt;tt class="docutils literal"&gt;int hashcode()&lt;/tt&gt;] Returns a hash code value for the object.
This method is supported for the benefit of hashtables such as
those provided by java.util.Hashtable.&lt;/p&gt;
&lt;p&gt;The general contract of hashCode is:&lt;/p&gt;
&lt;p&gt;Whenever it is invoked on the same object more than once during an
execution of a Java application, the hashCode method must
consistently return the same integer, provided no information used
in equals comparisons on the object is modified. This integer need
not remain consistent from one execution of an application to
another execution of the same application.&lt;/p&gt;
&lt;p&gt;If two objects are equal according to the equals(Object) method,
then calling the hashCode method on each of the two objects must
produce the same integer result.&lt;/p&gt;
&lt;p&gt;It is not required that if two objects are unequal according to
the equals(java.lang.Object) method, then calling the hashCode
method on each of the two objects must produce distinct integer
results. However, the programmer should be aware that producing
distinct integer results for unequal objects may improve the
performance of hashtables.&lt;/p&gt;
&lt;p&gt;As much as is reasonably practical, the hashCode method defined by
class Object does return distinct integers for distinct objects.
(This is typically implemented by converting the internal address
of the object into an integer, but this implementation technique
is not required by the JavaTM programming language.)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Considera que modifiquem el main() anterior amb el següent:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt; &lt;span class="nl"&gt;i:&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Trobat l&amp;#39;enter: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; amb hashCode: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Genera la següent sortida&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Trobat l&amp;#39;enter: 1 amb hashCode: 8152936
Trobat l&amp;#39;enter: 3 amb hashCode: 5538765
Trobat l&amp;#39;enter: 2 amb hashCode: 10039797
Trobat l&amp;#39;enter: 2 amb hashCode: 23660326
Trobat l&amp;#39;enter: 0 amb hashCode: 32716405
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que els dos &amp;quot;2&amp;quot; tenen valors diferents de &lt;tt class="docutils literal"&gt;hashCode&lt;/tt&gt;!&lt;/p&gt;
&lt;p&gt;El problema, però, té una fàcil solució: redefinint &lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt; per
la nostra classe.&lt;/p&gt;
&lt;p&gt;Per exemple, considera:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Enter&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt; &lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fàcil, oi? Aprofitem el &lt;tt class="docutils literal"&gt;hashCode&lt;/tt&gt; de &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; que hem de suposar
que està ben definit, i ja està. Doncs... encara no funciona!&lt;/p&gt;
&lt;p&gt;La sortida ara és:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Trobat l&amp;#39;enter: 0 amb hashCode: 0
Trobat l&amp;#39;enter: 1 amb hashCode: 1
Trobat l&amp;#39;enter: 2 amb hashCode: 2
Trobat l&amp;#39;enter: 2 amb hashCode: 2
Trobat l&amp;#39;enter: 3 amb hashCode: 3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;És a dir, els &lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt; dels dos '2' són iguals. Perquè no
funciona doncs?&lt;/p&gt;
&lt;p&gt;A veure, repassem, tenim redefinit &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt;. El
primer retorna cert si, i només si, els valors són iguals segons
&lt;tt class="docutils literal"&gt;Integer.equals()&lt;/tt&gt; mentre que el segon retorna un enter diferent
depenent del valor (que amb &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; semblava funcionar)&lt;/p&gt;
&lt;p&gt;Pensem...&lt;/p&gt;
&lt;p&gt;Posem un &lt;em&gt;xivato&lt;/em&gt; als nostres mètodes i mirem que passa&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.HashSet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;EnvoltaString: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;EnvoltaString.equals(): this=&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\taltre=&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;EnvoltaString.hashCode(): this=&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;EnvoltaString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EnvoltaString&lt;/span&gt; &lt;span class="nl"&gt;i:&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Trobat el EnvoltaString: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; amb hashCode: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Ens hauria de sortir el &lt;em&gt;xivato&lt;/em&gt; cada cop que algú (&lt;tt class="docutils literal"&gt;HashSet&lt;/tt&gt;) cridi
a aquestes funcions.&lt;/p&gt;
&lt;p&gt;Però la resposta és:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Enter.hashCode(): this=0
Enter.hashCode(): this=1
Enter.hashCode(): this=2
Enter.hashCode(): this=3
Enter.hashCode(): this=2
Enter.hashCode(): this=0
Trobat l&amp;#39;enter: 0 amb hashCode: 0
Enter.hashCode(): this=1
Trobat l&amp;#39;enter: 1 amb hashCode: 1
Enter.hashCode(): this=2
Trobat l&amp;#39;enter: 2 amb hashCode: 2
Enter.hashCode(): this=2
Trobat l&amp;#39;enter: 2 amb hashCode: 2
Enter.hashCode(): this=3
Trobat l&amp;#39;enter: 3 amb hashCode: 3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que crida &lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt; dos cops per element. Primer en
introduir-lo i després per extreure'l.&lt;/p&gt;
&lt;p&gt;Fixa't també que ni rastre de la crida a &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt;!&lt;/p&gt;
&lt;p&gt;Perquè no la fa? Perquè no crida a &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; per comprovar si són
elements iguals?&lt;/p&gt;
&lt;p&gt;Pensa abans de continuar llegint!&lt;/p&gt;
&lt;p&gt;Per a aquells que encara no ho hàgiu vist, el problema està en que
&lt;tt class="docutils literal"&gt;HashSet&lt;/tt&gt; crida a &lt;tt class="docutils literal"&gt;equals(Object)&lt;/tt&gt; i no a &lt;tt class="docutils literal"&gt;equals(Enter)&lt;/tt&gt; !&lt;/p&gt;
&lt;p&gt;Per a arreglar-ho, haurem de programar &lt;tt class="docutils literal"&gt;equals(Object)&lt;/tt&gt; en comptes
de &lt;tt class="docutils literal"&gt;equals(Enter)&lt;/tt&gt;. Sí, no sembla massa elegant des de la
perspectiva OO, oi?. De moment és el que tenim.&lt;/p&gt;
&lt;p&gt;Per exemple:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.HashSet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EnvoltaString&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="cm"&gt;/* definim una classe interna que encapsula un Integer */&lt;/span&gt;
    &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Enter&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Enter.equals(): this=&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\taltre=&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt; &lt;span class="k"&gt;instanceof&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;resultat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(((&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;altre&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Enter.hashCode(): this=&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;valor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt; &lt;span class="nl"&gt;i:&lt;/span&gt; &lt;span class="n"&gt;hsint&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Trobat l&amp;#39;enter: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; amb hashCode: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hashCode&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Ara la sortida és&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Enter.hashCode(): this=0
Enter.hashCode(): this=1
Enter.hashCode(): this=2
Enter.hashCode(): this=3
Enter.hashCode(): this=2
Enter.equals(): this=2      altre=2
Enter.hashCode(): this=0
Trobat l&amp;#39;enter: 0 amb hashCode: 0
Enter.hashCode(): this=1
Trobat l&amp;#39;enter: 1 amb hashCode: 1
Enter.hashCode(): this=2
Trobat l&amp;#39;enter: 2 amb hashCode: 2
Enter.hashCode(): this=3
Trobat l&amp;#39;enter: 3 amb hashCode: 3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que a &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; només se'l crida un cop.&lt;/p&gt;
&lt;p&gt;Quan? Pensa-ho abans de continuar llegint!&lt;/p&gt;
&lt;p&gt;Evidentment és a l'hora d'inserir un element que coincideix amb un
&lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt; d'un altre ja existent.&lt;/p&gt;
&lt;p&gt;En tot cas, fixa't que finalment hem aconseguit el nostre objectiu:
que un conjunt no repeteixi elements d'un tipus definit per nosaltres!&lt;/p&gt;
&lt;p&gt;En resum: quan l'usuari de la teva classe hagi de poder comparar la
igualtat d'instàncies d'aquesta, redefineix també el mètode
&lt;tt class="docutils literal"&gt;hashCode()&lt;/tt&gt; i assegura't que &lt;tt class="docutils literal"&gt;equals()&lt;/tt&gt; accepta &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-una-colla-de-gats"&gt;
&lt;h3&gt;Exercici 4. Una colla de gats&lt;/h3&gt;
&lt;p&gt;Crea una nova versió de la classe Gat que permeti a un
&lt;tt class="docutils literal"&gt;HashSet&amp;lt;Gat&amp;gt;&lt;/tt&gt; funcionar correctament.&lt;/p&gt;
&lt;p&gt;Considerarem que un gat és igual a un altre si, i només si, els seus
noms són iguals.&lt;/p&gt;
&lt;p&gt;Fes una classe &lt;tt class="docutils literal"&gt;TestGatSet&lt;/tt&gt; similar a la classe &lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;
vista a l'exemple que afegeixi a un &lt;tt class="docutils literal"&gt;HashSet&amp;lt;Gat&amp;gt;&lt;/tt&gt; cinc instàncies
de Gat tals que:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;donades dues instàncies de gat qualsevol d'entre les cinc
(referenciem amb &lt;tt class="docutils literal"&gt;g1&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;g2&lt;/tt&gt;) és fals &lt;tt class="docutils literal"&gt;g1 == g2&lt;/tt&gt;. És a dir,
les cinc provenen de cinc crides a &lt;tt class="docutils literal"&gt;new Gat(nom)&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;existeixen dues instàncies de gat d'entre les cinc (i només dues)
tals que &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;g1.getNom().equals(g2.getNom())&lt;/span&gt;&lt;/tt&gt;. És a dir, únicament
dos dels gats tenen el mateix nom. De la mateixa manera que
&lt;tt class="docutils literal"&gt;EnvoltaString&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;fes que la sortida de &lt;tt class="docutils literal"&gt;TestGatSet&lt;/tt&gt; mostri
clarament que no hi ha cap gat repetit (és a dir, amb nom repetit).&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:42:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:conjunts-en-java.html</guid><category>java</category></item><item><title>Contenidors ordenats</title><link>http://apuntstecnics.herokuapp.com/contenidors-ordenats.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document introdueix diferents maneres de agrupar informació de
manera seqüencial en un objecte Java.&lt;/p&gt;
&lt;p&gt;La línia general és la comparació de les diferents estructures segons
eficiència, de manera que permetin fer-se una idea de en quins casos
una solució es preferible a una altra.&lt;/p&gt;
&lt;p&gt;Comença amb una discussió respecte l'ús dels Strings i s'introdueix
&lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;A continuació es consideren els &lt;tt class="docutils literal"&gt;Arrays&lt;/tt&gt; i la classe alternativa &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Finalment es comparen tres estructures seqüèncials: &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;,
&lt;tt class="docutils literal"&gt;ArrayList&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;LinkedList&lt;/tt&gt; basat en l'article &lt;a class="reference external" href="http://onjava.com/pub/a/onjava/2001/05/30/optimization.html"&gt;The Performance of
Java's Lists&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="strings"&gt;
&lt;h2&gt;Strings&lt;/h2&gt;
&lt;p&gt;La classe &lt;tt class="docutils literal"&gt;String&lt;/tt&gt; és una de les primeres que coneixem en Java.
Resulta una classe molt útil i és especialment estimada pel nous
programadors de Java que venen de llenguatges com ara C.&lt;/p&gt;
&lt;p&gt;La classe String presenta, però, un problema que cal tenir present:
baix rendiment en les modificacions.&lt;/p&gt;
&lt;p&gt;El problema és que en Java, els Strings són immutables. Això vol dir
que un cop creats, no podem modificar el seu valor. Mentre que per a
moltes aplicacions dels Strings, això no representa cap problema, per
altres pot suposar un alentiment important en l'execució.&lt;/p&gt;
&lt;p&gt;Per exemple, imagina que ens cal posar en majúscules la inicial d'un
String. La manera que ens ofereix la classe és crear un nou String a
partir de dues peces de l'original, per exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;paraula&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;paraula&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;toUpperCase&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;paraula&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;o potser una mica millor&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;paraula&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Character&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toUpperCase&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;paraula&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;charAt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;paraula&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En qualsevol dels dos casos, estem creant dos o més Strings, mentre
que en C ho hagéssim resolt amb un econòmic:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;paraula&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]=&lt;/span&gt;&lt;span class="n"&gt;toupper&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;paraula&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per millorar el rendiment, hi ha diferents possibilitats.
Malauradament no hi ha una resposta única per decidir &lt;em&gt;la manera més
eficient sempre&lt;/em&gt;. Per tant, cal analitzar cas a cas depenent de l'ús
que fem dels Strings.&lt;/p&gt;
&lt;div class="section" id="proves-de-rendiment"&gt;
&lt;h3&gt;Proves de rendiment&lt;/h3&gt;
&lt;p&gt;Analitzem quan ens costa realitzar alguna tasca amb Strings. Per
exemple, suposa que ens interessa construir un String a partir
d'afegir-hi substrings al començament. El codi podria ser quelcom
similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;mida&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;str&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;A&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Una manera habitual de comprovar quan costa realitzar una certa tasca es
comptant el temps que passa des de que se la crida fins que acaba
l'execució. Per exemple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;tempsInicial&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nanoTime&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="err"&gt;«&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;analitzar&lt;/span&gt; &lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;tempsFinal&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nanoTime&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Cal tenir present que diferents execucions sobre la mateixa prova
ofereixen resultats diferents. Hi ha diferents raons, des de la
càrrega de l'equip en el moment de la prova fins als optimitzadors que
disposi la implementació de Java que estiguem fent servir.&lt;/p&gt;
&lt;p&gt;Per aquesta raó, pot ser adequat
realitzar la prova vàries vegades i calcular la desviació tipus per
tenir una idea de la dispersió de les mesures.&lt;/p&gt;
&lt;p&gt;Simplificant-ho molt, si per una prova concreta els resultat mig de
rendiment d'una estructura es troba dins del rang definit pel resultat
mig +/- la desviació tipus d'una altra estructura, podríem deduir que
el rendiment de les dues estructures no és significativament diferent
per a aquella prova.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-comparacio-string"&gt;
&lt;h3&gt;Exercici 1. Comparació String&lt;/h3&gt;
&lt;p&gt;En aquest primer exercici compararem el rendiment de composar un
String des de l'inici (&lt;tt class="docutils literal"&gt;str = &amp;quot;A&amp;quot; + str;&lt;/tt&gt;) i des del final (&lt;tt class="docutils literal"&gt;str =
str + &amp;quot;A&amp;quot;;&lt;/tt&gt;)&lt;/p&gt;
&lt;p&gt;Realitza 5 proves de cadascuna de les dues opcions amb mides de 10,
1000 i 100000. Calcula la mitjana i la desviació tipus i omple
una taula com la següent:&lt;/p&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="35%" /&gt;
&lt;col width="22%" /&gt;
&lt;col width="22%" /&gt;
&lt;col width="22%" /&gt;
&lt;/colgroup&gt;
&lt;thead valign="bottom"&gt;
&lt;tr&gt;&lt;th class="head"&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class="head"&gt;10&lt;/th&gt;
&lt;th class="head"&gt;1000&lt;/th&gt;
&lt;th class="head"&gt;100000&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;String inserció ini&lt;/td&gt;
&lt;td&gt;xxxx (yyyy)&lt;/td&gt;
&lt;td&gt;xxxx (yyyy)&lt;/td&gt;
&lt;td&gt;xxxx (yyyy)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;String inserció fin&lt;/td&gt;
&lt;td&gt;xxxx (yyyy)&lt;/td&gt;
&lt;td&gt;xxxx (yyyy)&lt;/td&gt;
&lt;td&gt;xxxx (yyyy)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;On &lt;tt class="docutils literal"&gt;xxxx&lt;/tt&gt; indica la mitjana i &lt;tt class="docutils literal"&gt;(yyyy)&lt;/tt&gt; la desviació tipus.&lt;/p&gt;
&lt;p&gt;També caldrà que aportis algunes dades de l'equip on executes les
proves: processador, versió del SO, versió de jre.&lt;/p&gt;
&lt;p&gt;En un equip GNU/Linux, pots obtenir aquestes dades (i més) amb les
comandes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;$ lshw &lt;span class="pre"&gt;-class&lt;/span&gt; cpu &lt;span class="pre"&gt;-class&lt;/span&gt; memory&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;$ uname &lt;span class="pre"&gt;-a&lt;/span&gt;&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;$ java &lt;span class="pre"&gt;-version&lt;/span&gt;&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per fer-ho fàcil, pots afegir a l'informe directament el resultat
d'aquestes crides.&lt;/p&gt;
&lt;p&gt;Finalment afegeix al teu informe una interpretació dels resultats que
inclogui, com a mínim, si si hi trobes una diferència significativa en
les dues maneres de composar el String.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pistes&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;Per calcular la mitjana d'un &lt;tt class="docutils literal"&gt;long[]&lt;/tt&gt; pots fer servir:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calculaMitjana&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;

    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Per calcular la desviació tipus d'un &lt;tt class="docutils literal"&gt;long[]&lt;/tt&gt; pots fer servir:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="nf"&gt;calculaDesviacio&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;desviacio&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;mitjana&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;calculaMitjana&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;desviacio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;desviacio&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;mitjana&lt;/span&gt; &lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;quadrats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;quadrats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;quadrats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;desviacio&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;desviacio&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;quadrats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;quadrats&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;suma&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resultats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sqrt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Donat que hauràs de preparar més d'un informe com aquest, es
recomanable que preparis una mena de plantilla amb les següents
seccions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;Dades de la prova&lt;/p&gt;
&lt;p&gt;Inclou com a mínim: descripció, autor i data de la prova.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Resultats de la prova&lt;/p&gt;
&lt;p&gt;La taula de resultats.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Interpretació dels resultats&lt;/p&gt;
&lt;p&gt;La teva interpretació dels resultats segons et demani l'enunciat.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Descripció de l'equip&lt;/p&gt;
&lt;p&gt;Informació de l'equip, SO i JRE.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="preparant-l-entorn-de-proves-de-rendiment"&gt;
&lt;h3&gt;Preparant l'entorn de proves de rendiment&lt;/h3&gt;
&lt;p&gt;Com que haurem de realitzar l'anàlisi de rendiment en diverses
ocasions, ens pot ser interessant preparar alguna mena d'entorn de
proves de rendiment que ens faciliti la feina.&lt;/p&gt;
&lt;p&gt;Un entorn senzill per realitzar proves de rendiment podria tenir el
següent aspecte:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Entorn de proves" src="http://apuntstecnics.herokuapp.com/images/poo020.img001.entorn_proves.png" /&gt;
&lt;/div&gt;
&lt;p&gt;La classe &lt;tt class="docutils literal"&gt;Tester&lt;/tt&gt; permetria, a partir del mètode &lt;tt class="docutils literal"&gt;test(String,
Testable)&lt;/tt&gt;, comprovar el temps d'execució d'un mètode tenint en
comptes diferents mides de prova i generaria un conjunt d'estadístics
resultants: bàsicament temps mig d'execució de les &lt;em&gt;num_proves&lt;/em&gt; i
desviació tipus per cadascuna de les mides de prova.&lt;/p&gt;
&lt;p&gt;Depenent de la potència de la teva màquina, potser voldràs fer més o
menys proves, o amb mides més grans o més petits. Per aquesta raó
&lt;tt class="docutils literal"&gt;Tester&lt;/tt&gt; ofereix diferents maneres d'inicialitzar-lo. Es proposa com
a valors per defecte de &lt;em&gt;num_proves&lt;/em&gt; el 5 i per &lt;em&gt;mides&lt;/em&gt; 10, 1000,
10000.&lt;/p&gt;
&lt;p&gt;&lt;tt class="docutils literal"&gt;Tester&lt;/tt&gt; fa servir la &lt;em&gt;interface&lt;/em&gt; &lt;tt class="docutils literal"&gt;Testable&lt;/tt&gt; que especifica dos
mètodes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;setMida(int mida)&lt;/tt&gt; permet especificar la mida de la prova. El
temps requerit per executar aquest mètode no computa amb el càlcul
total. D'aquesta manera, aquest mètode és adequat per realitzar
tasques d'inicialització de la prova.&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;crida()&lt;/tt&gt;. Aquest serà el mètode que cridarà &lt;tt class="docutils literal"&gt;Tester&lt;/tt&gt; amb
cadascuna de les mides.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-l-entorn-de-proves-de-rendiment"&gt;
&lt;h3&gt;Exercici 2. L'entorn de proves de rendiment&lt;/h3&gt;
&lt;p&gt;Munta l'entorn de proves descrit abans.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pista&lt;/strong&gt;: potser voldràs aïllar la prova real de la resta dels
càlculs i preparacions estadístiques amb un codi similar a:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="nf"&gt;realitzaProva&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Testable&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mida&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setMida&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mida&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// la preparació no compta en el temps&lt;/span&gt;
    &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;tempsInicial&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nanoTime&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;crida&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;tempsFinal&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;nanoTime&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tempsFinal&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;tempsInicial&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Torna a passar les proves de l'exercici 1 tot fent servir el teu nou
entorn de proves i omple la taula amb els nous resultats.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-stringbuilder-en-insercio"&gt;
&lt;h3&gt;Exercici 3. &lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt; en inserció&lt;/h3&gt;
&lt;p&gt;Considera la classe &lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt; (consulta l'&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html"&gt;API de
StringBuilder&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;Prepara les següents proves amb aquesta classe i compara-les amb les
que has obtingut fins ara amb String:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;StringBuilder amb constructor per defecte inserint a l'inici (&lt;tt class="docutils literal"&gt;insert(0, &amp;quot;A&amp;quot;)&lt;/tt&gt;)&lt;/li&gt;
&lt;li&gt;StringBuilder amb constructor per defecte inserint al final (&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;append(&amp;quot;A&amp;quot;)&lt;/span&gt;&lt;/tt&gt;)&lt;/li&gt;
&lt;li&gt;StringBuilder construït amb &lt;tt class="docutils literal"&gt;StringBuilder(int capacity)&lt;/tt&gt; i
inserint a l'inici.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Omple una taula amb els resultats i elabora un petit informe que
compari el que has obtingut. Inclou a l'informe una comparativa amb
els resultats obtinguts amb Strings.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-stringbuilder-en-modificacio"&gt;
&lt;h3&gt;Exercici 4. &lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt; en modificació&lt;/h3&gt;
&lt;p&gt;Posarem novament a prova les classes &lt;tt class="docutils literal"&gt;String&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt;.
Aquest cop, construirem amb el mètode &lt;tt class="docutils literal"&gt;setMida(int)&lt;/tt&gt; un
&lt;tt class="docutils literal"&gt;String&lt;/tt&gt; / &lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt; tot de &amp;quot;A&amp;quot;s, i al mètode &lt;tt class="docutils literal"&gt;crida()&lt;/tt&gt;
simplement passarem, caràcter per caràcter, a minúscules.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pista&lt;/strong&gt;: El codi de test per &lt;tt class="docutils literal"&gt;String&lt;/tt&gt; podria ser similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;mida&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;str&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;Character&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toLowerCase&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;charAt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Omple una taula amb els resultats obtinguts i elabora un breu informe
comparant els resultats.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-string-vs-stringbuilder"&gt;
&lt;h3&gt;Exercici 5. &lt;tt class="docutils literal"&gt;String&lt;/tt&gt; vs &lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt;&lt;/h3&gt;
&lt;p&gt;A partir dels resultats que has obtingut, prepara un petit resum en el
que indicaràs en quins casos és preferible fer servir
&lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt; i en quins en tindrem prou amb &lt;tt class="docutils literal"&gt;String&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Nota: tingues en comptes que per a fer servir el resultat de
&lt;tt class="docutils literal"&gt;StringBuilder&lt;/tt&gt; probablement haurem de passar-lo a &lt;tt class="docutils literal"&gt;String&lt;/tt&gt;.
Potser voldràs comprovar quin cost té fer-ho per elaborar les teves
conclusions.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="arrays"&gt;
&lt;h2&gt;Arrays&lt;/h2&gt;
&lt;p&gt;Els &lt;em&gt;arrays&lt;/em&gt; són una manera senzilla d'agrupar dades d'un mateix tipus
en forma de seqüència.&lt;/p&gt;
&lt;p&gt;A la secció anterior hem analitzat un tipus d'&lt;em&gt;array&lt;/em&gt; particular
(seqüència de caràcters) encapsulat dins la classe &lt;tt class="docutils literal"&gt;String&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;En aquesta secció, analitzarem el rendiment d'aquesta estructura i
veurem algunes maneres d'optimitzar-la.&lt;/p&gt;
&lt;div class="section" id="exercici-6-copia-d-arrays"&gt;
&lt;h3&gt;Exercici 6. Còpia d'&lt;em&gt;arrays&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;Construirem una prova que donat un &lt;em&gt;array&lt;/em&gt; (de diferents mides) de
valors enters (ex. de 1 a mida de la prova), calculem quan de temps
ens costa copiar els valors a un altre &lt;em&gt;array&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Farem servir dues aproximacions:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&amp;quot;a ma&amp;quot;: amb un bucle copiarem un a un cada valor de l'&lt;em&gt;array&lt;/em&gt;
inicial al final.&lt;/li&gt;
&lt;li&gt;automàtic: farem servir la utilitat &lt;tt class="docutils literal"&gt;System.arraycopy()&lt;/tt&gt;
(consulteu l'&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/System.html"&gt;API d'arraycopy()&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Elabora una taula de resultats i un informe comparatiu.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Recomanació&lt;/strong&gt;: fes servir la classe &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; (mira l'&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/index.html?java/lang/System.html"&gt;API de
Integer&lt;/a&gt;)
en comptes del tipus primitiu &lt;tt class="docutils literal"&gt;int&lt;/tt&gt; si vols estalviar-te feina per
un exercici posterior.  Si disposes de prou temps, pots també fer les
dues opcions, de manera que podràs comprovar el rendiment de la
creació massiva d'objectes en Java.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="operacions-costoses-amb-arrays"&gt;
&lt;h3&gt;Operacions costoses amb &lt;em&gt;arrays&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;Fer servir &lt;em&gt;arrays&lt;/em&gt; sol ser convenient si volem una agrupació
seqüèncial d'elements del mateix tipus amb un accés directe ràpid (per
consultes i modificacions), que només s'amplia afegint nous elements
al final i, sobretot, del que coneixem la mida màxima (nombre màxim
d'elements que contindrà) en el moment de la creació.&lt;/p&gt;
&lt;p&gt;Quan les operacions que hem de realitzar amb l'&lt;em&gt;array&lt;/em&gt; inclouen
inserció o eliminació d'elements en qualsevol punt de l'&lt;em&gt;array&lt;/em&gt;, tenim
un problema. Ens cal &amp;quot;moure&amp;quot; els elements cap a un costat i cap a
l'altre.&lt;/p&gt;
&lt;p&gt;Quan la mida total de la seqüència ens és desconeguda o pot variar
significativament (creixent i decreixent) al llarg del seu ús, el
problema és encara &amp;quot;pitjor&amp;quot;: ens trobem amb la complexitat d'anar
ampliant o/i encongint l'&lt;em&gt;array&lt;/em&gt;.  La manera habitual sol ser, crear
un nou &lt;em&gt;array&lt;/em&gt; amb la nova mida i copiar-hi les dades. Com que
l'operació és costosa, sovint es deixa un cert marge d'espai
disponible per a ampliacions.&lt;/p&gt;
&lt;p&gt;Java ens ofereix una classe que ens fa totes aquestes operacions sense
haver-les d'implementar nosaltres. Consulta l'&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/index.html?java/lang/System.html"&gt;API de Vector&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-rendiment-de-vector"&gt;
&lt;h3&gt;Exercici 7. Rendiment de &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;&lt;/h3&gt;
&lt;p&gt;Defineix una prova per poder comparar el rendiment de la classe
&lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; amb l'ús dels &lt;em&gt;arrays&lt;/em&gt; analitzat al'exercici anterior.&lt;/p&gt;
&lt;p&gt;Com que &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; només pot emmagatzemar objectes (no tipus
primitius), declara un &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; de &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; amb el constructor
&lt;tt class="docutils literal"&gt;Vector(int initialCapacity)&lt;/tt&gt; i omple'l amb els valors dels enters,
per exemple amb &lt;tt class="docutils literal"&gt;add()&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Les dues variants de còpia seran:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&amp;quot;a mà&amp;quot;: com amb la primera d'&lt;em&gt;arrays&lt;/em&gt; copiarem element a element
fent servir un bucle.&lt;/li&gt;
&lt;li&gt;automàtic: fent servir el constructor &lt;tt class="docutils literal"&gt;Vector(Collection&amp;lt;? extends
E&amp;gt; c)&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Com sempre, omple la taula de resultats i elabora un informe
comparatiu. Inclou la comparativa amb els resultats de l'exercici
anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-8-opcional-operacions-de-vector"&gt;
&lt;h3&gt;Exercici 8. [opcional] Operacions de &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;&lt;/h3&gt;
&lt;p&gt;Si disposes de prou temps, pot ser un bon exercici implementar i
comparar algunes de les funcionalitats que ens ofereix &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Aquestes poden ser:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;inserció dels valors d'un &lt;em&gt;array&lt;/em&gt;/&lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; des del principi&lt;/p&gt;
&lt;p&gt;Requereix la implementació del desplaçament cap al final de la
seqüència a cada inserció.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;eliminat dels valors d'un &lt;em&gt;array&lt;/em&gt;/&lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; des del principi&lt;/p&gt;
&lt;p&gt;Requereix la implementació del desplaçament cap a l'inici de la
seqüència de la resta d'elements.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;ampliació de l'espai&lt;/p&gt;
&lt;p&gt;A partir d'un &lt;em&gt;array&lt;/em&gt;/&lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; amb unes dimensions inicials
determinades (i comunes) i un increment també comú, implementar una
prova que permeti anar incrementant les seqüències de manera que
requereixin fer l'increment de mida vàries vegades.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Disposes de quelcom més que idees per implementar alguna d'aquestes
funcionalitats a l'article &lt;a class="reference external" href="http://onjava.com/pub/a/onjava/2001/05/30/optimization.html"&gt;The Performance of Java's Lists&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="llistes"&gt;
&lt;h2&gt;Llistes&lt;/h2&gt;
&lt;p&gt;A la secció anterior hem analitzat diferents maneres d'agrupar
informació d'un mateix tipus en forma de seqüència, fins a arribar a
la classe &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; que ens ofereix un bon nombre de funcionalitats
ja implementades.&lt;/p&gt;
&lt;p&gt;Tot i sent molt convenient, la classe &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; presenta alguns
problemes de rendiment en determinades situacions. Per aquesta raó,
els desenvolupadors de l'API de Java han inclòs altres classes.&lt;/p&gt;
&lt;p&gt;En aquesta secció n'analitzarem bàsicament les classes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;ArrayList&lt;/tt&gt;: &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html"&gt;API ArrayList&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;LinkedList&lt;/tt&gt;: &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html"&gt;API LinkedList&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Nota&lt;/strong&gt;: normalment a la programació orientada a objectes, amb
l'encapsulació es pretén ocultar informació sobre la implementació
interna de les classes. En aquest cas, els dissenyadors de l'API de
Java s'estan saltant aquest principi donant-nos pistes de com estan
implementades aquestes classes. La raó principal es resumeix amb la
paraula &lt;strong&gt;rendiment&lt;/strong&gt;. El coneixement de la implementació interna
d'aquestes classes permet els programadors de Java decidir-se per la
classe que millor s'ajusta a les necessitats del programa que està
realitzant.&lt;/p&gt;
&lt;div class="section" id="exercici-9-insercio-sequencial"&gt;
&lt;h3&gt;Exercici 9. Inserció seqüencial&lt;/h3&gt;
&lt;p&gt;Defineix una prova amb les tres classe de manera que inserim una
seqüència de &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; al final (&lt;tt class="docutils literal"&gt;add()&lt;/tt&gt;)&lt;/p&gt;
&lt;p&gt;Per &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;ArrayList&lt;/tt&gt; farem dues versions:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;amb el constructor per defecte&lt;/li&gt;
&lt;li&gt;amb el constructor que permet inicialitzar l'espai que requerirà la
prova.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per &lt;tt class="docutils literal"&gt;LinkedList&lt;/tt&gt; només en fem una perquè la seva implementació
interna la fa insensible a saber la mida final.&lt;/p&gt;
&lt;p&gt;És a dir, en total hi ha 5 variants: dues per &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;, dues per
&lt;tt class="docutils literal"&gt;ArrayList&lt;/tt&gt; i una per &lt;tt class="docutils literal"&gt;LinkedList&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-consulta-sequencial"&gt;
&lt;h3&gt;Exercici 10. Consulta seqüèncial&lt;/h3&gt;
&lt;p&gt;Defineix una prova amb les tres classe de manera que inicialment
disposem d'una seqüència creixent de &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; i la ordeni
decreixement amb el mètode de la bombolla.&lt;/p&gt;
&lt;p&gt;Recorda que aquest mètode d'ordenació es basa en anar comparant dos a
dos i intercanviant els valors que no es troben en ordre, fent
passades per tots els elements fins que no hi ha més canvis.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-11-consulta-aleatoria"&gt;
&lt;h3&gt;Exercici 11. Consulta aleatòria&lt;/h3&gt;
&lt;p&gt;Aquest conjunt de proves persegueix comprovar el rendiment de les tres
estructures que estem analitzant quan s'accedeix de manera aleatòria
(no seqüencial).&lt;/p&gt;
&lt;p&gt;Omplirem inicialment les seqüències de manera creixent amb &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;La prova consisteix en mesurar quan costa mostrar tots els valors
començant per cada posició múltiple de tres, per continuar amb els
anteriors fins (sense incloure) l'anterior múltiple de tres.  Serien
les posicions 0, 3, 2, 1, 6, 5, 4, 9, 8, 7, ...&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-12-insercio-aleatoria"&gt;
&lt;h3&gt;Exercici 12. Inserció aleatòria&lt;/h3&gt;
&lt;p&gt;En aquesta ocasió, realitzarem la prova d'inserir dades a instàncies
de les diferents classes que estem analitzant. Aquest cop, però, no
inserirem les dades de manera seqüencial, sinó que ho farem sempre des
del punt mig.&lt;/p&gt;
&lt;p&gt;Per &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;ArrayList&lt;/tt&gt; farem dues versions: una amb el
constructor per defecte i l'altra inicialitzant-les amb la mida
màxima.&lt;/p&gt;
&lt;p&gt;En total doncs, tindrem cinc proves, dues per &lt;tt class="docutils literal"&gt;Vector&lt;/tt&gt;, dues per
&lt;tt class="docutils literal"&gt;ArrayList&lt;/tt&gt; i una per &lt;tt class="docutils literal"&gt;LinkedList&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-13-modificacio-aleatoria"&gt;
&lt;h3&gt;Exercici 13. Modificació aleatòria&lt;/h3&gt;
&lt;p&gt;Per la realització d'aquest conjunt de proves, et caldrà implementar
l'algoritme d'ordenació &lt;em&gt;quicksort&lt;/em&gt; (mira per exemple la proposta de
&lt;a class="reference external" href="http://www.vogella.com/articles/JavaAlgorithmsQuicksort/article.html"&gt;vogela&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Per començar, tenint en comptes que les tres classes que estem
comparant implementen la interfície &lt;tt class="docutils literal"&gt;List&lt;/tt&gt;, adapta l'algorisme de
manera que el mètode &lt;tt class="docutils literal"&gt;sort()&lt;/tt&gt; disposi (també) de la següent
signatura:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;sort&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Un cop el tinguis funcionant (fes alguna prova simple), munta les
proves de manera que els valors de cada seqüència s'inicialitzi en ordre
decreixent, i mesura quan li costa a l'algorisme d'ordenació processar
instàncies de cadascuna de les tres classes de manera que les deixi
ordenades creixentment.&lt;/p&gt;
&lt;p&gt;Donat que &lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; implementa la &lt;em&gt;interface&lt;/em&gt; &lt;tt class="docutils literal"&gt;Comparable&lt;/tt&gt;,
afegeix a l'estudi l'anàlisi fent servir &lt;tt class="docutils literal"&gt;Collections.sort(List&amp;lt;T&amp;gt;
list)&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;En total, doncs, hauràs de fer sis proves: dues per cadascuna de les
classes que estem comparant.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-14-buidat"&gt;
&lt;h3&gt;Exercici 14. Buidat&lt;/h3&gt;
&lt;p&gt;Aquest conjunt de proves requereix inicialitzar les seqüències amb
&lt;tt class="docutils literal"&gt;Integer&lt;/tt&gt; seqüencials.&lt;/p&gt;
&lt;p&gt;El que es mesurarà és el temps que costa per cada classe buidar tots
els elements segons els següents criteris:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;eliminant sempre el primer (cua)&lt;/li&gt;
&lt;li&gt;eliminant sempre el darrer (pila)&lt;/li&gt;
&lt;li&gt;eliminant sempre el del punt mig&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En total són nou proves (tres per classe)&lt;/p&gt;
&lt;p&gt;Opcionalment se't proposa que avaluïs les classes &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/ArrayDeque.html"&gt;ArrayDeque&lt;/a&gt;
i &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/Stack.html"&gt;Stack&lt;/a&gt; per
comprovar si aquestes classes ofereixen avantatge eliminant el primer
o el darrer respectivament)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-15-resum"&gt;
&lt;h3&gt;Exercici 15. Resum&lt;/h3&gt;
&lt;p&gt;A partir dels resultats obtinguts amb els exercicis anteriors, elabora
un informe en el que, per cada opció, indiquis en quins casos d'ús
és recomanable escollir-la i en quins casos és preferible no fer-ho.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:42:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:contenidors-ordenats.html</guid><category>java</category></item><item><title>Excepcions</title><link>http://apuntstecnics.herokuapp.com/excepcions.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquests continguts introdueixen el mecanisme de control d'excepcions
en el llenguatge Java.&lt;/p&gt;
&lt;p&gt;Els conceptes que es treballen són: control d'errors, excepcions, captura
d'excepcions (&lt;em&gt;try&lt;/em&gt;/&lt;em&gt;catch&lt;/em&gt;/&lt;em&gt;finally&lt;/em&gt;), llançament d'excepcions (&lt;em&gt;throw&lt;/em&gt;),
excepcions predefinides, creació d'excepcions personalitzades&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="control-d-excepcions"&gt;
&lt;h2&gt;Control d'excepcions&lt;/h2&gt;
&lt;p&gt;Una excepció és un esdeveniment (&lt;em&gt;event&lt;/em&gt;) que representa una condició anormal
en l’execució d’un programa i que atura el flux normal d’execució.&lt;/p&gt;
&lt;p&gt;Les excepcions permeten a les aplicacions detectar i donar resposta situacions
d’error de manera controlada (sense penjar-se)&lt;/p&gt;
&lt;p&gt;Considerem l’exemple de la classe &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;                   &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getHora&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;            &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                     &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getMinut&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;           &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                     &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getSegon&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;           &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                     &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;      &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                     &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setMinut&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;     &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;m&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                     &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setSegon&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;     &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;                     &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;        &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;:&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;         &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Imaginem que volem controlar que els valors que ens introdueixen els
mètodes set siguin correctes.&lt;/p&gt;
&lt;p&gt;Una manera seria la següent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;  &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;D’aquesta manera només hi acceptem hores vàlides.&lt;/p&gt;
&lt;p&gt;El problema és que el programa usuari no té manera de saber que ha
introduït un valor no vàlid!&lt;/p&gt;
&lt;p&gt;Una solució pot ser fer que el mètode cridat retorni informació sobre
el resultat de la seva execució:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/** retorna true si s&amp;#39;ha assignat satisfactòriament */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;  &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;correcte&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;correcte&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;correcte&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Que podem usar d’una manera similar a:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Assignada l&amp;#39;hora correctament&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error assignant l&amp;#39;hora&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Però el nostre programa s’ha fet força més llarg i menys llegible.&lt;/p&gt;
&lt;p&gt;Considerem el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;Exception&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hora.setHora(&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;) valor fora de rang&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Que usarem:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;224&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error assignant l&amp;#39;hora: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Aquest codi genera la sortida:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Error assignant l&amp;#39;hora: java.lang.Exception: Hora.setHora(224) valor fora de rang
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;D'aquesta manera aconseguim que els mètodes set assegurin l'hora
correcta.&lt;/p&gt;
&lt;p&gt;Però, què passa amb el constructor? Tal i com el tenim es
pot crear una hora no vàlida! Doncs fem que generi una excepció si
algun paràmetre no és correcte.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;setMinut&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;setSegon&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Totes les excepcions a Java hereten de la &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html"&gt;classe Throwable&lt;/a&gt;.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Jerarquia de la classe Throwable" src="http://apuntstecnics.herokuapp.com/images/poo018.img001.throwable.png" /&gt;
&lt;/div&gt;
&lt;p&gt;La funció de la classe &lt;tt class="docutils literal"&gt;Throwable&lt;/tt&gt; és indicar que les seves
subclasses poden ser llençades. Ja hem vist signatures de funcions amb
&lt;tt class="docutils literal"&gt;throws&lt;/tt&gt;, oi?&lt;/p&gt;
&lt;p&gt;Podem classificar les excepcions de Java en dos tipus: les que
requereixen ser gestionades explícitament (per exemple amb un bloc
&lt;em&gt;try&lt;/em&gt;/&lt;em&gt;catch&lt;/em&gt;) i les que no requereixen d'aquesta gestió explícita.&lt;/p&gt;
&lt;p&gt;Les excepcions que no requereixen de gestió explícita són les classes
&lt;tt class="docutils literal"&gt;Error&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;RuntimeException&lt;/tt&gt; i les seves subclasses. Aquestes
excepcions representen situacions d'error del sistema de les que
normalment no s'espera que el programa es recuperi. Considera per
exemple les subclasses &lt;tt class="docutils literal"&gt;VirtualMachineError&lt;/tt&gt; i
&lt;tt class="docutils literal"&gt;ClassCastException&lt;/tt&gt; que indiquen, respectivament, que la màquina
virtual de Java s'ha trencat, i que el codi està intentant fer un
&lt;em&gt;cast&lt;/em&gt; incorrecte.&lt;/p&gt;
&lt;p&gt;La gestió explícita de les excepcions és revisada pel compilador.
Aquest no deixarà passar un codi que no gestioni les excepcions
adequadament. Hi ha dues maneres de gestionar una excepció:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;envoltar el codi que pot generar una excepció en un bloc &lt;tt class="docutils literal"&gt;try {}&lt;/tt&gt; i
capturar l'excepció amb una clàusula &lt;tt class="docutils literal"&gt;catch (E e)&lt;/tt&gt; on &lt;tt class="docutils literal"&gt;E&lt;/tt&gt; ha de ser del
tipus d'excepció a gestionar o bé una superclasse d'aquesta (mira
l'exercici &amp;quot;Subclasses d'Exception&amp;quot; per a més detalls).&lt;/li&gt;
&lt;li&gt;indicar al mètode que conté el codi que pot generar l'excepció, que
pot llençar (&lt;em&gt;throws&lt;/em&gt;) una excepció del tipus a gestionar o bé una
superclasse d'aquesta (mira l'exercici &amp;quot;Subclasses d'Exception&amp;quot;
per a més detalls).&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Una advertència abans que comencis a pensar en usar excepcions a tort
i a dret: cal tenir present que el mecanisme de excepcions pot
representar una certa càrrega a algunes versions de la màquina virtual
de Java. Els blocs &lt;em&gt;try&lt;/em&gt;/&lt;em&gt;catch&lt;/em&gt; no tenen cap problema. És a dir, el seu
ús no afegeix cap sobrecàrrega important a l'execució dels teus programes. En
canvi, l'expressió &lt;tt class="docutils literal"&gt;throw&lt;/tt&gt; no resulta tan barata. La màquina virtual ha
de crear un &lt;em&gt;try&lt;/em&gt;/&lt;em&gt;catch&lt;/em&gt; apropiat en temps d'execució entre altres coses.&lt;/p&gt;
&lt;p&gt;La recomanació és que llencis excepcions &lt;em&gt;només&lt;/em&gt; en situacions
excepcionals, al menys quan l'eficiència sigui important. Per exemple,
si has de recórrer molts cops una llista d'elements, sovint resultarà
més eficient anar comprovant a cada iteració si en queden més que
aturar el recorregut en arribar a l'excepció.&lt;/p&gt;
&lt;p&gt;Si tens curiositat pots mirar discussions com aquesta de
&lt;a class="reference external" href="http://stackoverflow.com/questions/299068/how-slow-are-java-exceptions"&gt;stackoverflow&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercicis"&gt;
&lt;h2&gt;Exercicis&lt;/h2&gt;
&lt;div class="section" id="exercici-1-hora-amb-excepcions"&gt;
&lt;h3&gt;Exercici 1. Hora amb excepcions&lt;/h3&gt;
&lt;p&gt;Desenvolupeu la classe Hora amb control d'excepcions per tots els
mètodes que puguin generar un error. Incloeu un &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; que
comprovi cadascun dels mètodes que puguin generar excepcions.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-main-amb-excepcions"&gt;
&lt;h3&gt;Exercici 2. &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; amb excepcions&lt;/h3&gt;
&lt;p&gt;El mètode &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; pot també generar excepcions. Aquestes seran
recollides per l'interpret de java&lt;/p&gt;
&lt;p&gt;Substitueix la funció &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; del programa anterior per la següent.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argM&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
        &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;argH&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;argM&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;argS&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Creada l&amp;#39;hora &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;ha capturat l&amp;#39;excepció &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;  &lt;span class="c1"&gt;// tornem a llençar l&amp;#39;excepció&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;executa tant si hi ha com si no hi ha excepció&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;executa en finalitzar si no hi ha excepció&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Comprova el resultat d'executar amb diferents paràmetres: amb menys de
tres paràmetres, amb paràmetres textuals (ex. java Hora un dos tres),
amb paràmetres fora de rang, amb paràmetres correctes.&lt;/p&gt;
&lt;p&gt;Descriu amb les teves paraules la funcionalitat representa la clàusula
finally{} Se t'acut alguna utilitat? Sinó, troba una per la web!&lt;/p&gt;
&lt;p&gt;El codi mostra el resultat de e.toString() però hi ha més maneres
d'obtenir informació de l'excepció. Descriu amb les teves paraules què
fan els mètodes d'Exception getMessage(), getStackTrace() i
printStackTrace().&lt;/p&gt;
&lt;p&gt;Fixat que el codi llença l'excepció directament amb un&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;  &lt;span class="c1"&gt;// tornem a llençar l&amp;#39;excepció&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Què passaria si substitueixes aquesta línia per la següent? (considera
la informació del constructor a la API de Java)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;Exception&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Exception capturada&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;  &lt;span class="c1"&gt;// tornem a llençar l&amp;#39;excepció&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-renat-amb-excepcions"&gt;
&lt;h3&gt;Exercici 3. Renat amb excepcions&lt;/h3&gt;
&lt;p&gt;Crea una nova versió de la classe la classe GatRenat de manera que les
operacions que puguin donar lloc a error (ex. assignar un nombre de
vides negatiu) disposin d'excepcions. Modifica el programa
&lt;tt class="docutils literal"&gt;EntornGatRenat&lt;/tt&gt; de manera que tracti aquestes excepcions.&lt;/p&gt;
&lt;p&gt;Nota: Fes servir la versió de GatRenat de l'exercici 2 de la secció de
&lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/relacions-entre-classes.html"&gt;relacions&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-excepcions-amb-recursos"&gt;
&lt;h3&gt;Exercici 4. Excepcions amb recursos&lt;/h3&gt;
&lt;p&gt;Des de la versió 7 de Java, existeix una variant d'ús del &lt;em&gt;try&lt;/em&gt;. Es
diu &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html"&gt;try amb recursos&lt;/a&gt; i permet especificar recursos com a arguments
de &lt;em&gt;try&lt;/em&gt;. Quan fem servir aquest format, el compilador de Java afegirà
el codi necessari per tancar els recursos tant si es produeix excepció
o no.&lt;/p&gt;
&lt;p&gt;El format és:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;llista&lt;/span&gt; &lt;span class="n"&gt;de&lt;/span&gt; &lt;span class="n"&gt;recursos&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;processament&lt;/span&gt; &lt;span class="n"&gt;dels&lt;/span&gt; &lt;span class="n"&gt;recursos&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Un recurs és una instància d'una classe que implementi la interfície
&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html"&gt;java.lang.AutoCloseable&lt;/a&gt;. Per
tant, en podem fins i tot crear-ne de nous.&lt;/p&gt;
&lt;p&gt;El que ens ofereix és la possibilitat de no haver de tancar el recurs.  Amb els
coneixements que ja hem vist abans, podíem resoldre-ho amb un &lt;em&gt;finally&lt;/em&gt; Això
equival a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;obrir&lt;/span&gt; &lt;span class="n"&gt;recursos&lt;/span&gt;
    &lt;span class="n"&gt;processament&lt;/span&gt; &lt;span class="n"&gt;dels&lt;/span&gt; &lt;span class="n"&gt;recursos&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;tancar&lt;/span&gt; &lt;span class="n"&gt;recursos&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Considera el següent codi que defineix la nostra versió de la comanda
&lt;em&gt;cat&lt;/em&gt;:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.BufferedReader&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.FileReader&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Vector&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;CatMeu&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="nf"&gt;llegeix_fitxer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;linies&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BufferedReader&lt;/span&gt; &lt;span class="n"&gt;br&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;BufferedReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;FileReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;)))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;linia&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;linia&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;br&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;readLine&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;linia&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Ops: s&amp;#39;ha produït una excepció: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getMessage&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toArray&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;size&lt;/span&gt;&lt;span class="o"&gt;()]);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Indica un o més paràmetres&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nl"&gt;a:&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;llegeix_fitxer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;linia&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;linia&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;linia&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Línia [%d]: &amp;#39;%s&amp;#39;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linia&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linies&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;linia&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Pots executar aquest codi des del mateix directori on tinguis el seu
codi font, fent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java CatMeu fitxerinexistent1 CatMeu.java fitxerinexistent2
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;De manera que puguis veure:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;dos missatges amb excepcions de fitxer o directori no existent&lt;/li&gt;
&lt;li&gt;el contingut del fitxer CatMeu.java.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="es-demana"&gt;
&lt;h4&gt;Es demana&lt;/h4&gt;
&lt;p&gt;Analitza aquest codi fins que et familiaritzis amb el seu
funcionament. A continuació, desenvolupa un programa anomenat
&lt;em&gt;MostraImports&lt;/em&gt; tal que:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;processi la llista d'arguments que se li passin&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;ignori sense cap missatge aquells paràmetres que no siguin fitxers
amb codi font java (per simplicitat, els que no tinguin extensió
.java)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;per cada fitxer .java, que mostri la llista d'imports que conté o el
missatge &amp;quot;Cap import&amp;quot; si no conté cap.&lt;/p&gt;
&lt;p&gt;Per exemple:&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;java MostraImports fitxerinexistent CatMeu.java
CatMeu.java:
    java.io.BufferedReader
    java.io.FileReader
    java.io.IOException
    java.util.Vector
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;fes servir el &lt;em&gt;try&lt;/em&gt; amb recursos.&lt;/li&gt;
&lt;li&gt;recorda que la classe &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html"&gt;String&lt;/a&gt; disposa de
moltes utilitats per a poder consultar i extreure parts d'un string.&lt;/li&gt;
&lt;li&gt;no cal que consideris el cas &lt;em&gt;import static&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-subclasses-d-exception"&gt;
&lt;h3&gt;Exercici 5. Subclasses d'Exception&lt;/h3&gt;
&lt;p&gt;Exception no deixa de ser una classe més i com a tal, podem trobar la
seva documentació a
&lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html"&gt;http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;A la secció &amp;quot;Direct known subclasses&amp;quot; hi trobem les subclasses
d'Exception que ens ofereix la API. Per exemple hi trobem la ja
coneguda IOException.&lt;/p&gt;
&lt;p&gt;Potser trobar-ne una que sigui més propera al significat de les
nostres excepcions no sempre és fàcil ni possible. Per sort, en podem
crear de noves.&lt;/p&gt;
&lt;p&gt;Considerem el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;HoraNoValidaException&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;HoraNoValidaException&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;missatge&lt;/span&gt;&lt;span class="o"&gt;){&lt;/span&gt;
    &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Excepció Hora no vàlida: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;missatge&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;i&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;                  &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;HoraNoValidaException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;setMinut&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;setSegon&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;   &lt;span class="c1"&gt;// altres mètodes&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setHora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;HoraNoValidaException&lt;/span&gt;  &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;HoraNoValidaException&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hora.setHora(&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;) valor fora de rang&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;   &lt;span class="c1"&gt;// altres mètodes&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argM&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;]);&lt;/span&gt;
            &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;argH&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;argM&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;argS&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Creada l&amp;#39;hora &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;HoraNoValidaException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;ha capturat una excepció d&amp;#39;hora: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;ha capturat una excepció no d&amp;#39;hora: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;  &lt;span class="c1"&gt;// tornem a llençar l&amp;#39;excepció&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;finally&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;executa tant si hi ha com si no hi ha excepció&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;executa en finalitzar si no hi ha excepció&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;div class="section" id="id1"&gt;
&lt;h4&gt;Es demana&lt;/h4&gt;
&lt;p&gt;Crea una nova classe anomenada &lt;tt class="docutils literal"&gt;Data&lt;/tt&gt; que disposi dels atributs
&lt;tt class="docutils literal"&gt;dia&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;mes&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;any&lt;/tt&gt;, amb els mètodes get/set i constructors que
assegurin que tota instància creada conté una data correcta. Altrament
generarà l'excepció &lt;tt class="docutils literal"&gt;DataNoValidaException&lt;/tt&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-embolicant-una-excepcio"&gt;
&lt;h3&gt;Exercici 6. Embolicant una excepció&lt;/h3&gt;
&lt;p&gt;Crea la classe &lt;tt class="docutils literal"&gt;DataHora&lt;/tt&gt; què conté una &lt;tt class="docutils literal"&gt;Data&lt;/tt&gt; i una &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; (exercicis
anteriors) privades.&lt;/p&gt;
&lt;p&gt;La classe &lt;tt class="docutils literal"&gt;DataHora&lt;/tt&gt; oferirà mètodes per a accedir directament als
valors de les propietats de &lt;tt class="docutils literal"&gt;Data&lt;/tt&gt; i de &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; com si fossin seus.
En cas que es produeixi alguna excepció específica de &lt;tt class="docutils literal"&gt;Data&lt;/tt&gt; o de
&lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; en fer servir les classes dels seus atributs, la classe
&lt;tt class="docutils literal"&gt;DataHora&lt;/tt&gt; &amp;quot;traduirà&amp;quot; l'excepció a una pròpia &lt;tt class="docutils literal"&gt;DataHoraException&lt;/tt&gt;
que permetrà incloure l'excepció original en el seu constructor.&lt;/p&gt;
&lt;p&gt;Inclou un &lt;em&gt;main()&lt;/em&gt; similar al de l'exercici anterior, per poder provar
el funcionament.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:42:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:excepcions.html</guid><category>java</category></item><item><title>Generics</title><link>http://apuntstecnics.herokuapp.com/generics.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document és una introducció als &lt;em&gt;genèrics&lt;/em&gt; de Java, a partir de
diferents qüestions respecte els continguts de la &lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/index.html"&gt;lliçó Generics&lt;/a&gt; de
&amp;quot;The Java Tutorials&amp;quot;. No es cobreixen, però, tots els continguts
d'aquest &lt;em&gt;tutorial&lt;/em&gt;. Amb tot, t'animo a llegir el contingut sencer de
manera que disposis d'una visió més global del tema.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;Genèrics&lt;/h2&gt;
&lt;div class="section" id="el-mon-sense-generics"&gt;
&lt;h3&gt;El món sense genèrics&lt;/h3&gt;
&lt;p&gt;En versions antigues de Java (abans de la versió Java SE 5.0) ja
estaven disponibles algunes classes per a agrupar objectes.
Per exemple, &lt;tt class="docutils literal"&gt;java.util.Vector&lt;/tt&gt; implementa un &lt;em&gt;array&lt;/em&gt; d'objectes que
pot ampliar o reduir la seva mida per a adaptar-se a les dades que
conté.&lt;/p&gt;
&lt;p&gt;El mètode per a afegir una nova entrada al final del vector era &lt;tt class="docutils literal"&gt;boolean
add(Object o)&lt;/tt&gt;. Donat que tota classe és descendent de &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;, el
resultat és que podíem afegir instàncies de qualsevol classe.&lt;/p&gt;
&lt;p&gt;El mètode &lt;tt class="docutils literal"&gt;Object get(int index)&lt;/tt&gt; ens permetia recuperar un element
del vector a partir de la seva posició.&lt;/p&gt;
&lt;p&gt;Un exemple d'ús seria:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Vector&lt;/span&gt; &lt;span class="n"&gt;estol&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;renat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;estol&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;renat&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;estol&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;    &lt;span class="c1"&gt;// hem de fer el cast&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En principi això pot semblar que no és cap problema. Només una
incomoditat haver de fer un &lt;em&gt;cast&lt;/em&gt; quan ja sabem el tipus de tots els
elements que hi guardem al vector.&lt;/p&gt;
&lt;p&gt;El problema es troba en la detecció d'errors. En cas que hi hagi
error de tipus (que el que ens retorna el vector no sigui realment un
gat) no ens assabentem fins que no executem el programa. El compilador
no en sap res de tipus i se'n refia de nosaltres quan li concretem el
tipus amb un &lt;em&gt;cast&lt;/em&gt;. En programes molt més complexos que a l'exemple,
això pot portar a que l'error no es detecti fins que, després de molt
de temps d'ús, el programa es penja per una condició que mai abans
s'havia produït.&lt;/p&gt;
&lt;p&gt;Per oferir la possibilitat de detectar aquest tipus d'error en temps
de compilació, al Java SE 5.0 es van introduir els &lt;em&gt;genèrics&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-1-perque-generics"&gt;
&lt;h3&gt;Exercici 1. Perquè genèrics&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/why.html"&gt;Why generics&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Què permeten els genèrics?&lt;/li&gt;
&lt;li&gt;En que s'assemblen els &lt;em&gt;paràmetres formals&lt;/em&gt; als &lt;em&gt;paràmetres de
tipus&lt;/em&gt;?&lt;/li&gt;
&lt;li&gt;En que es diferencien els &lt;em&gt;paràmetres formals&lt;/em&gt; dels
&lt;em&gt;paràmetres de tipus&lt;/em&gt;?&lt;/li&gt;
&lt;li&gt;Descriu amb les teves paraules, tres avantatges de l'ús de genèrics
al nostre codi.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-classes-generiques"&gt;
&lt;h3&gt;Exercici 2. Classes genèriques&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/types.html"&gt;Generic Types&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Què és un &lt;em&gt;tipus genèric&lt;/em&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Considera l'exemple de la versió simple de la classe &lt;tt class="docutils literal"&gt;Box&lt;/tt&gt;
(secció &lt;em&gt;A Simple Box Class&lt;/em&gt;).  Indica perquè no hi podem afegir
tipus primitius però sí qualsevol altre element.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Un altre cop sobre la caixa simple: desenvolupa un programa
anomenat &lt;tt class="docutils literal"&gt;CaixaDeGats&lt;/tt&gt; que creï una caixa (&lt;tt class="docutils literal"&gt;Box&lt;/tt&gt;), hi
afegeixi un gat Renat &lt;a class="footnote-reference" href="#renat" id="id2"&gt;[1]&lt;/a&gt; i després el recuperi i mostri el
seu nom per sortida estàndard.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Considera la secció &lt;em&gt;Invoking and Instantiating a Generic Type&lt;/em&gt;. De
quina manera es declara una referència d'una classe genèrica? De
quina manera s'instancia una classe genèrica?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Considera ara la versió de la caixa genèrica que apareix a la
secció &lt;em&gt;A Generic Version of the Box Class&lt;/em&gt;. Desenvolupa una nova
versió de &lt;tt class="docutils literal"&gt;CaixaDeGats&lt;/tt&gt; que faci servir aquesta nova versió
genèrica de la classe &lt;tt class="docutils literal"&gt;Box&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;És obligatori anomenar als paràmetres de tipus amb una &lt;tt class="docutils literal"&gt;T&lt;/tt&gt;? Si és
que no, hi trobes alguna raó per fer servir aquest nom?  ----&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Indica una manera alternativa d'escriure el següent codi a partir
de Java SE 7&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Box&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;gatBox&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Box&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A la secció &lt;em&gt;Multiple Type Parameters&lt;/em&gt; veiem un exemple
d'&lt;em&gt;interface&lt;/em&gt; i de classe genèrics amb més d'un paràmetre de tipus.
Es podria fer servir &lt;tt class="docutils literal"&gt;T&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;S&lt;/tt&gt; en comptes de &lt;tt class="docutils literal"&gt;K&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;V&lt;/tt&gt;?
Perquè creus que han fet servir &lt;tt class="docutils literal"&gt;K&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;V&lt;/tt&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-metodes-generics"&gt;
&lt;h3&gt;Exercici 3. Mètodes genèrics&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/methods.html"&gt;Generic Methods&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Què és un mètode genèric?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Els mètodes genèrics han de ser sempre estàtics?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Considera el següent codi que fa servir les classes &lt;tt class="docutils literal"&gt;Util&lt;/tt&gt; i
&lt;tt class="docutils literal"&gt;Pair&lt;/tt&gt; d'aquest article:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Payme&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Gos&lt;/span&gt; &lt;span class="n"&gt;gos1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Fido&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Gos&lt;/span&gt; &lt;span class="n"&gt;gos2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Rantanplan&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Gos&lt;/span&gt; &lt;span class="n"&gt;gos3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Fido&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;gat1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;gos1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;gat1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;gos1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;p1(%s,%s) == p2(%s,%s) -&amp;gt; %s\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getKey&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getKey&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt;
                &lt;span class="n"&gt;Util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;compare&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;p3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;gat1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;gos2&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;p1(%s,%s) == p3(%s,%s) -&amp;gt; %s\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getKey&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getKey&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt;
                &lt;span class="n"&gt;Util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;compare&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p3&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;p4&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Pair&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;gat1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;gos3&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;p1(%s,%s) == p4(%s,%s) -&amp;gt; %s\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getKey&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p4&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getKey&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;p4&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt;
                &lt;span class="n"&gt;Util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;compare&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p4&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Executa'l i descriu el perquè de cada línia.&lt;/p&gt;
&lt;p&gt;En cas de que no disposis de les classes Gat i Gos, simplement
crea una versió mínima que permeti l'execució d'aquest codi.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-generics-i-herencia"&gt;
&lt;h3&gt;Exercici 4. Genèrics i herència&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/inheritance.html"&gt;Generics, Inheritance, and Subtypes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Perquè, si tenim el mètode següent&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;domestica&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;són vàlides les següents crides? &lt;a class="footnote-reference" href="#animal" id="id3"&gt;[2]&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;domestica&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
&lt;span class="n"&gt;domestica&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Fido&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Perquè, si tenim el mètode següent&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;domestica&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;no és vàlid el següent codi?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;domesticaGats&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vector&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;domestica&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Perquè a l'exemple que apareix a la secció &lt;em&gt;Generic Classes and
Subtyping&lt;/em&gt;, &lt;tt class="docutils literal"&gt;PayloadList&amp;lt;String, Integer&amp;gt;&lt;/tt&gt; és subclasse de
&lt;tt class="docutils literal"&gt;List&amp;lt;String&amp;gt;&lt;/tt&gt;? Penses que també ho seria &lt;tt class="docutils literal"&gt;PayloadList&amp;lt;Integer,
String&amp;gt;&lt;/tt&gt;? Perquè?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;TestGen1&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nl"&gt;s:&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%s &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;al&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;();&lt;/span&gt;
        &lt;span class="n"&gt;al&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hola&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;al&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;adéu&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;al&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Perquè funciona la crida &lt;tt class="docutils literal"&gt;mostra(al)&lt;/tt&gt; malgrat es fa servir
&lt;tt class="docutils literal"&gt;ArrayList&amp;lt;String&amp;gt;&lt;/tt&gt; i no &lt;tt class="docutils literal"&gt;List&amp;lt;String&lt;/tt&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.*&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;TestGen2&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="nl"&gt;o:&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%s &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;al&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;();&lt;/span&gt;
        &lt;span class="n"&gt;al&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hola&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;al&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;adéu&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;al&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Perquè &lt;strong&gt;no&lt;/strong&gt; funciona la crida &lt;tt class="docutils literal"&gt;mostra(al)&lt;/tt&gt; malgrat &lt;tt class="docutils literal"&gt;String&lt;/tt&gt;
és un &lt;tt class="docutils literal"&gt;Object&lt;/tt&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-delimitacio-de-parametres-de-tipus"&gt;
&lt;h3&gt;Exercici 5. Delimitació de paràmetres de tipus&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/bounded.html"&gt;Bounded Type Parameters&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Considera la següent classe&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt; &lt;span class="n"&gt;animal&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt; &lt;span class="n"&gt;animal&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;animal&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;animal&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt; &lt;span class="nf"&gt;getEngabiat&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;animal&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;I el següent codi que la prova:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Test&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;e1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Misteri&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;e2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;e1: %s\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getEngabiat&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;e2: %s\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getEngabiat&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Descriu que implica el contingut entre &amp;lt;&amp;gt; a la definició de
la classe &lt;tt class="docutils literal"&gt;Engabiat&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Perquè funciona &lt;tt class="docutils literal"&gt;Test&lt;/tt&gt;? Prova-ho!&lt;/p&gt;
&lt;p&gt;En cas de no disposar de les classes &lt;tt class="docutils literal"&gt;Animal&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;Gat&lt;/tt&gt;, crea una
versió de cada de manera que funcioni &lt;tt class="docutils literal"&gt;Test&lt;/tt&gt; (recorda un Gat &lt;strong&gt;és
un&lt;/strong&gt; Animal)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Funcionaria si la instanciació fes servir el &amp;quot;truc&amp;quot; del diamant per
demanar que el compilador infereixi el tipus?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Prova-ho. Que afegeixis alguna explicació del perquè del resultat
en aquesta pregunta és opcional.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Funcionaria si la declaració de &lt;tt class="docutils literal"&gt;Engabiat&lt;/tt&gt; fos la següent?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Engabiat&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Perquè?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Ara que ja saps aquest concepte, proposa una modificació de la
classe &lt;tt class="docutils literal"&gt;TestGen2&lt;/tt&gt; del darrer exemple de l'exercici anterior, de
manera que funcioni el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; tal i com apareix a l'exemple.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;!-- private  static &lt;T extends Object&gt; void mostra(ArrayList&lt;T&gt; l) --&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-contenidors-amb-herencia"&gt;
&lt;h3&gt;Exercici 6. Contenidors amb herència&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/upperBounded.html"&gt;Upper Bounded Wildcards&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Considera el següent codi:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.ArrayList&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Animtest&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;?&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;la&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt; &lt;span class="nl"&gt;a:&lt;/span&gt; &lt;span class="n"&gt;la&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%s &amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Animal&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;aa&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;();&lt;/span&gt;
        &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Renat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Gat&lt;/span&gt; &lt;span class="n"&gt;gat2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Mishifú&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Gos&lt;/span&gt; &lt;span class="n"&gt;gos1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Gos&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Fido&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;aa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;aa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat2&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;aa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gos1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;aa&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Gat&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;ag&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;();&lt;/span&gt;
        &lt;span class="n"&gt;ag&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;ag&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gat2&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ag&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Respon a les següents preguntes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Perquè funciona la primera crida a &lt;tt class="docutils literal"&gt;mostra()&lt;/tt&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Perquè funciona la segona crida a &lt;tt class="docutils literal"&gt;mostra()&lt;/tt&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Què vol dir l'interrogant (&lt;tt class="docutils literal"&gt;?&lt;/tt&gt;) a la definició del paràmetre
&lt;tt class="docutils literal"&gt;la&lt;/tt&gt; de &lt;tt class="docutils literal"&gt;mostra()&lt;/tt&gt;?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Funcionaria aquest codi si la definició fos simplement?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostra&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;?&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;la&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Perquè?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Què hauríem de canviar perquè funcionés sense l'interrogant. Ex.
&lt;tt class="docutils literal"&gt;void mostra(T animal)&lt;/tt&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A partir de les respostes de les dues preguntes anteriors, indica
quin avantatge es desprèn de l'ús de &lt;em&gt;wildcards&lt;/em&gt; en aquest exemple.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;!-- private static &lt;T extends Animal&gt; void mostra(ArrayList&lt;T&gt; la) { --&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-limitacions-dels-generics"&gt;
&lt;h3&gt;Exercici 7. Limitacions dels genèrics&lt;/h3&gt;
&lt;p&gt;Llegeix el següent article:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://docs.oracle.com/javase/tutorial/java/generics/restrictions.html"&gt;Restrictions on Generics&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Descriu amb les teves paraules i de manera resumida cadascuna de les
limitacions que apareixen en aquest article.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;hr class="docutils" /&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="renat" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;En cas que no disposis d'aquesta classe, fes servir
simplement un String.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="animal" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Pots suposar que Gat i Gos són subclasses d'animal.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:42:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:generics.html</guid><category>java</category></item><item><title>Mapes I</title><link>http://apuntstecnics.herokuapp.com/mapes-i.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document correspon a la primera part de l'estudi del concepte
d'associació &lt;em&gt;clau-valor&lt;/em&gt; que aquí anomenarem &lt;em&gt;mapes&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;La introducció no és directa. Abans d'arribar-hi, presenta un cas
d'estudi &lt;a class="footnote-reference" href="#refheadfirst" id="id1"&gt;[1]&lt;/a&gt; — una petita aplicació per gestionar un
celler de vins &lt;a class="footnote-reference" href="#consumresponsable" id="id2"&gt;[2]&lt;/a&gt; — i segueix l'evolució del seu
desenvolupament des dels primers requeriments fins deixar un disseny
preparat pels canvis previsibles que ofereix el context per a aplicar
el tema principal del document.&lt;/p&gt;
&lt;p&gt;En aquesta primera part s'estableixen les bases que permetran treure
profit d'una de les maneres d'usar els mapes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="la-botiga-de-vi"&gt;
&lt;h2&gt;La botiga de vi&lt;/h2&gt;
&lt;p&gt;La senyora Estrella d'Argent és propietària d'una reconeguda botiga de
vi a la ciutat especialitzada en vins de taula catalans. Fins ara,
arribaves a la botiga i li descrivies les característiques que
voldries que tingués el vi que cercaves, i quasi bé sempre la Sra.
Estrella sortia de la rebotiga amb una o més ampolles que satisfeien
els teus desitjos.&lt;/p&gt;
&lt;p&gt;Ara però, la Sra. Estrella comença a fer-se gran i hi el seu nebot li
ajuda a col·locar les ampolles al magatzem. El problema és que
d'aquesta manera la Sra. Estrella no se'n recorda on para cada vi quan
el client li demana. La seva germana, la Gualda, li ha comentat que
coneix un equip de desenvolupadors molt trempats (nosaltres) que li
podrien fer una aplicació a mida per ajudar-la amb els estocs de vi.&lt;/p&gt;
&lt;div class="section" id="exercici-1-cerques-de-vi"&gt;
&lt;h3&gt;Exercici 1. Cerques de vi&lt;/h3&gt;
&lt;p&gt;En aquest exercici, implementarem una primera versió de l'aplicació de
gestió d'estocs de la botiga de la Sra. Estrella.&lt;/p&gt;
&lt;p&gt;Així, el nostre model inicial es representa amb el diagrama de classes
següent:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama inicial de classes de la Botiga" src="http://apuntstecnics.herokuapp.com/images/poo022.img001.botiga.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Les propietats que ens interessen de moment d'un vi
&lt;a class="footnote-reference" href="#simplificacions" id="id3"&gt;[3]&lt;/a&gt; són:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;ref: un nr. de referència intern de la botiga. Ex. &lt;tt class="docutils literal"&gt;2012010043&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;nom: el nom oficial del producte. Ex. &lt;tt class="docutils literal"&gt;Roura blanc&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;preu: l'import a la venda (en euros i sense iva)&lt;/li&gt;
&lt;li&gt;lloc: la localització del producte al magatzem. Ex. &lt;tt class="docutils literal"&gt;al fons
prestatge vermell&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;celler: el celler que el produeix. Ex. &lt;tt class="docutils literal"&gt;Juan Antonio Pérez Roura&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;origen: la denominació d'origen. Ex. &lt;tt class="docutils literal"&gt;Alella&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;varietat: la varietat del raïm &lt;a class="footnote-reference" href="#varietatraim" id="id4"&gt;[4]&lt;/a&gt;. Ex. &lt;tt class="docutils literal"&gt;sauvignon&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;tipus: el tipus de vi. Ex. &lt;tt class="docutils literal"&gt;blanc&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;collita: l'any de collita. Ex. &lt;tt class="docutils literal"&gt;2012&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Alguns detalls d'implementació:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;El mètode &lt;tt class="docutils literal"&gt;Botiga.afegeix(Vi)&lt;/tt&gt;, en cas que ja existeixi un
vi amb el mateix nr. de referència (atribut &lt;tt class="docutils literal"&gt;ref&lt;/tt&gt;), genera
l'excepció &lt;tt class="docutils literal"&gt;BotigaException&lt;/tt&gt; que estén directament
&lt;tt class="docutils literal"&gt;java.lang.Exception&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El mètode &lt;tt class="docutils literal"&gt;Vi Botiga.obte(ref)&lt;/tt&gt;, en cas que no
existeixi cap vi amb el nr. de referència indicat, genera
l'excepció &lt;tt class="docutils literal"&gt;BotigaException&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El mètode &lt;tt class="docutils literal"&gt;List&amp;lt;Vi&amp;gt; Botiga.cerca(Vi)&lt;/tt&gt;, retorna la
llista de vins que acompleixen tots els camps no nuls del
vi que rep. En cas que no trobi cap vi que respongui a
les especificacions, retorna una llista buida.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El tipus &lt;em&gt;integer&lt;/em&gt; pot ser representat per un &lt;tt class="docutils literal"&gt;long&lt;/tt&gt; o un &lt;tt class="docutils literal"&gt;int&lt;/tt&gt;
depenent del context. Per exemple, per l'any de collita probablement
en tindrem prou amb un &lt;tt class="docutils literal"&gt;int&lt;/tt&gt;, mentre que per la referència ens
serà interessant disposar d'un &lt;tt class="docutils literal"&gt;long&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El tipus &lt;em&gt;Money&lt;/em&gt; pot ser representat en Java pel tipus &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html"&gt;BigDecimal&lt;/a&gt;
arrodonint a dos decimals.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El següent esquema de codi, tot i sent incomplet i no gaire elegant,
pot ajudar a fer-te una idea de com podria funcionar.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Botiga&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;Botiga&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;existeix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;ref&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Botiga.existeix() no implementat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;afegeix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;BotigaException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Botiga.afegeix() no completat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="nf"&gt;obte&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;ref&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;BotigaException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Botiga.obte() no implementat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/* retorna la llista de vins que s&amp;#39;ajusten a la espec */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nf"&gt;cerca&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="c1"&gt;// ignorem ref perquè és únic&lt;/span&gt;

            &lt;span class="c1"&gt;// comprova nom&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;())))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;continue&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="c1"&gt;// comprova preu màxim&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getPreu&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getPreu&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;compareTo&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getPreu&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;continue&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="c1"&gt;// comprova lloc&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLloc&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;(!&lt;/span&gt; &lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLloc&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;equals&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLloc&lt;/span&gt;&lt;span class="o"&gt;())))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;continue&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="c1"&gt;// «...» comprova la resta&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Botiga.cerca() no completat&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// l&amp;#39;afegim donat ha passat tots els filtres&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Podem provar la Botiga amb el següent codi (també incomplet)&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsaBotiga&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="cm"&gt;/* afegeix uns vins */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;inicialitzaBotiga&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Botiga&lt;/span&gt; &lt;span class="n"&gt;botiga&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;

        &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2010010003&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Roura blanc&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;6.06&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;prestatge blau&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Juan Antonio Pérez Roura&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Alella&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;sauvignon&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;blanc&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2011100042&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Cercium 2009&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;5.65&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;prestatge verd amunt&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Mas Llunes Vinyes i Cellers&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Empordà&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;samsó&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;negre&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="mi"&gt;2009&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2011090002&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Masia Serra - IO 2008&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;13.50&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;prestatge verd amunt&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Masia Serra&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Empordà&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;garnatxa&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;negre&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="mi"&gt;2008&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="nl"&gt;v:&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;botiga&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;afegeix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BotigaException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/* defineix una especificació de vi */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="nf"&gt;creaEspec&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;   &lt;span class="c1"&gt;// sense nr. de ref perquè és únic&lt;/span&gt;
                &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;       &lt;span class="c1"&gt;// no importa el nom&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;10.50&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="c1"&gt;// com a molt fins a aquest preu&lt;/span&gt;
                &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;       &lt;span class="c1"&gt;// no importa el lloc&lt;/span&gt;
                &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;       &lt;span class="c1"&gt;// no importa el celler&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Empordà&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;  &lt;span class="c1"&gt;// la denominació d&amp;#39;origen sí importa&lt;/span&gt;
                &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;       &lt;span class="c1"&gt;// no importa la varietat&lt;/span&gt;
                &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;       &lt;span class="c1"&gt;// no importa el tipus&lt;/span&gt;
                &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;          &lt;span class="c1"&gt;// no importa l&amp;#39;any&lt;/span&gt;
                &lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/* mostra la llista de vins trobats */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;mostraVins&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;size&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;No s&amp;#39;ha trobat cap Vi&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;S&amp;#39;ha trobat les següents coincidències:&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="nl"&gt;v:&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                        &lt;span class="s"&gt;&amp;quot;Vi: %s\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                        &lt;span class="s"&gt;&amp;quot;\tNom : %s\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                        &lt;span class="s"&gt;&amp;quot;\tPreu: %s\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                        &lt;span class="s"&gt;&amp;quot;\tLloc: %s\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
                        &lt;span class="s"&gt;&amp;quot;\t«...»\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                        &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRef&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt;
                        &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getNom&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt;
                        &lt;span class="n"&gt;NumberFormat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getCurrencyInstance&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getPreu&lt;/span&gt;&lt;span class="o"&gt;()),&lt;/span&gt;
                        &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLloc&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;
                        &lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Botiga&lt;/span&gt; &lt;span class="n"&gt;botiga&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Botiga&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;inicialitzaBotiga&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;botiga&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="n"&gt;espec&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;creaEspec&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;trobats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;botiga&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;cerca&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;espec&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostraVins&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trobats&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;L'exercici consisteix en completar el codi que falta per que el
programa &lt;tt class="docutils literal"&gt;UsaBotiga&lt;/tt&gt; funcioni.&lt;/p&gt;
&lt;p&gt;Comprova que estigui donant els resultats esperats.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-protegint-la-classe-vi"&gt;
&lt;h3&gt;Exercici 2. Protegint la classe Vi&lt;/h3&gt;
&lt;p&gt;Això de fer servir Strings com a tipus de les propietats és sovint una
mala idea. Què passa si diem que la denominació d'origen és &amp;quot;Alella&amp;quot;,
&amp;quot;alella&amp;quot;, o fins i tot &amp;quot;Aleya&amp;quot;?&lt;/p&gt;
&lt;p&gt;Alguns d'aquests problemes els podem resoldre comparant només la
versió diguem en majúscules, però d'altres...&lt;/p&gt;
&lt;p&gt;A aquest exercici hauràs de millorar el disseny de la classe Vi
de manera que:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;el nom i el celler continuïn sent de tipus String, però en les
cerques no es tindrà present les majúscules i minúscules
&lt;a class="footnote-reference" href="#caractersespecials" id="id5"&gt;[6]&lt;/a&gt;. A més a més, les cerques seran parcials i
per tant, el String buit (&amp;quot;&amp;quot;) serà tractat equivalentment a &lt;tt class="docutils literal"&gt;null&lt;/tt&gt;.
Considera el mètode &lt;tt class="docutils literal"&gt;String.contains()&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;Les localitzacions puguin ser: prestatge blau, prestatge verd amunt,
prestatge verd a baix, prestatge vermell, i altre.&lt;/li&gt;
&lt;li&gt;La denominació d'origen pugui ser (com a mínim &lt;a class="footnote-reference" href="#minimdo" id="id6"&gt;[5]&lt;/a&gt;):
Penedès, Terra Alta, Catalunya, Tarragona, Conca de Barberà,
Costers del Segre, Empordà, Montsant, Priorat, Alella, Pla de
Bages, i altre.&lt;/li&gt;
&lt;li&gt;La varietat pugui ser (com a mínim): Garnatxa, Malvasia, Monestrell,
Moscatell, Parellada, Samsó, Macabeu, Xarel·lo, Sauvignon, i altre.&lt;/li&gt;
&lt;li&gt;El tipus de vi pugui ser: blanc, negre, rosat, i altre.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Els valors &lt;em&gt;altre&lt;/em&gt; que apareixen a tots aquests enumerats permetran
indicar un valor no nul en els casos no contemplats a l'enumerat.&lt;/p&gt;
&lt;p&gt;Els accents i altres &amp;quot;floritures&amp;quot; de la nostra llengua poden
posar entrebancs a l'estructura &lt;tt class="docutils literal"&gt;enum&lt;/tt&gt; de Java. Considera el següent
codi d'exemple, que permetria fer ús del mètode &lt;tt class="docutils literal"&gt;toString()&lt;/tt&gt; per a
poder mostrar correctament un valor de les possibles varietats&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;enum&lt;/span&gt; &lt;span class="n"&gt;Varietat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;GARNATXA&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Garnatxa&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
    &lt;span class="n"&gt;SAMSO&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Samsó&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;XARELLO&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Xarel·lo&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;descr&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// descripció en format llegible&lt;/span&gt;
    &lt;span class="n"&gt;Varietat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;descr&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;descr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;descr&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;descr&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Malgrat tot, hem deixat algunes de les propietats &amp;quot;obertes&amp;quot; a rebre
valors poc adequats (ex.  un preu negatiu). A més, les propietats que
mantenim com a Strings, tot i havent eliminat el tema de
majúscules/minúscules, continuen patint de problemes a l'hora de
cercar (molt notablement ús d'accents). De moment ens despreocuparem
d'aquestes situacions.&lt;/p&gt;
&lt;p&gt;Evidentment, ara caldrà canviar la resta de classes per a adaptar-les
a aquestes modificacions.&lt;/p&gt;
&lt;p&gt;Crea una nova versió del &lt;tt class="docutils literal"&gt;UsaBotiga&lt;/tt&gt; amb el següent codi
d'inicialització:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;inicialitzaBotiga&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Botiga&lt;/span&gt; &lt;span class="n"&gt;botiga&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;];&lt;/span&gt;

    &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2010010003&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;Roura blanc&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;6.06&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
            &lt;span class="n"&gt;Localitzacio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PRESTATGE_BLAU&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;Juan Antonio Pérez Roura&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Origen&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ALELLA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Varietat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SAUVIGNON&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Tipus&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;BLANC&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2011100042&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;Cercium 2009&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;5.65&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
            &lt;span class="n"&gt;Localitzacio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PRESTATGE_VERD_AMUNT&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;Mas Llunes Vinyes i Cellers&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Origen&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;EMPORDA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Varietat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SAMSO&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Tipus&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;NEGRE&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="mi"&gt;2009&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2011090002&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;Masia Serra - IO 2008&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;13.50&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
            &lt;span class="n"&gt;Localitzacio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PRESTATGE_VERD_AMUNT&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;Masia Serra&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Origen&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;EMPORDA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Varietat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;GARNATXA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;Tipus&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;NEGRE&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="mi"&gt;2008&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="nl"&gt;v:&lt;/span&gt; &lt;span class="n"&gt;vins&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;botiga&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;afegeix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BotigaException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Considera també la nova versió del mètode &lt;tt class="docutils literal"&gt;creaEspec()&lt;/tt&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Vi&lt;/span&gt; &lt;span class="nf"&gt;creaEspec&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;Vi&lt;/span&gt;&lt;span class="o"&gt;(-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;              &lt;span class="c1"&gt;// sense nr. de ref perquè és únic&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;                    &lt;span class="c1"&gt;// no importa el nom&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;10.50&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="c1"&gt;// com a molt fins a aquest preu&lt;/span&gt;
            &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;                  &lt;span class="c1"&gt;// no importa el lloc&lt;/span&gt;
            &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;                    &lt;span class="c1"&gt;// no importa el celler&lt;/span&gt;
            &lt;span class="n"&gt;Origen&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;EMPORDA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;        &lt;span class="c1"&gt;// la denominació d&amp;#39;origen sí importa&lt;/span&gt;
            &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;                  &lt;span class="c1"&gt;// no importa la varietat&lt;/span&gt;
            &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;                  &lt;span class="c1"&gt;// no importa el tipus&lt;/span&gt;
            &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;                     &lt;span class="c1"&gt;// no importa l&amp;#39;any&lt;/span&gt;
            &lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Finalment, assegura't que crides el mètode &lt;tt class="docutils literal"&gt;Botiga.cerca(espec)&lt;/tt&gt;
perquè et surti el mateix resultat que a l'exercici anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-millorant-el-disseny-de-la-botiga-de-vins"&gt;
&lt;h3&gt;Exercici 3. Millorant el disseny de la botiga de vins&lt;/h3&gt;
&lt;p&gt;Amb els canvis de l'exercici anterior hem millorat força la usabilitat
de l'aplicació.&lt;/p&gt;
&lt;p&gt;Hi ha, però, un element que &amp;quot;canta&amp;quot;: per cercar els vins, el mètode
&lt;tt class="docutils literal"&gt;Botiga.cerca()&lt;/tt&gt; requereix un Vi. El vi que li passem, però, &lt;strong&gt;no
és&lt;/strong&gt; exactament un &lt;tt class="docutils literal"&gt;Vi&lt;/tt&gt;. Per exemple, no té nr. de referència, el
preu no és tampoc el preu real del vi sinó un màxim, i molt
probablement no li indicarem la localització bàsicament perquè és
probablement un dels objectius principals de la cerca
&lt;a class="footnote-reference" href="#finsaracercadaloc" id="id7"&gt;[7]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Quan dissenyem aplicacions orientades a objectes, hem de tenir clar
que aquests tipus d'incoherències tard o d'hora ens portaran
problemes.&lt;/p&gt;
&lt;p&gt;El cert és que, com ja ho diu bé el nom del seu paràmetre, el mètode
&lt;tt class="docutils literal"&gt;cerca()&lt;/tt&gt; espera una especificació de vi i &lt;strong&gt;no&lt;/strong&gt; un vi!.  Si el
concepte d'&lt;em&gt;especificació de vi&lt;/em&gt; sembla tenir tanta rellevància,
potser ja va sent hora que li reconeguem, no?&lt;/p&gt;
&lt;p&gt;Tenint en compte tot plegat, millorem el nostre disseny afegint la
classe &lt;tt class="docutils literal"&gt;ViEspec&lt;/tt&gt; segons el següent diagrama.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes amb l'especificació de Vins" src="http://apuntstecnics.herokuapp.com/images/poo022.img002.espec.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Ara que les especificacions de Vi no disposen de preu, el mètode
&lt;tt class="docutils literal"&gt;cerca()&lt;/tt&gt; ha d'oferir dues versions per mantenir la funcionalitat de
cercar fins a un màxim de preu. En concret, el substituirem pels
mètodes &lt;tt class="docutils literal"&gt;cerca(ViEspec)&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;cerca(ViEspec, preuMax)&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;Crea una nova versió de l'aplicació de manera que inclogui aquests
canvis.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-la-botiga-de-vins-amplia-l-oferta"&gt;
&lt;h3&gt;Exercici 4. La botiga de vins amplia l'oferta&lt;/h3&gt;
&lt;p&gt;La Sra. Estrella està encantada amb l'aplicació que li
hem fet per a la seva botiga de vins. Li funciona tan bé que vol
ampliar la seva oferta al món del cava.&lt;/p&gt;
&lt;p&gt;El cava és força semblant al vi: té un nr. de referència i un preu. Es
col·loca en un lloc del magatzem, i té nom i celler. En quant a les
varietats de raïm amb les que es fan el cava, podem considerar un
subconjunt de les que s'utilitzen per l'elaboració del vi.&lt;/p&gt;
&lt;p&gt;El cava presenta, però, les següents diferències respecte el vi:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;al cava no se li indica la collita &lt;a class="footnote-reference" href="#collitacava" id="id8"&gt;[9]&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;hi ha algunes denominacions d'origen pròpies del cava que no
comparteix amb el vi. En concret, les denominacions típiques del
cava són: Alt Penedès i Tarragonès.&lt;/li&gt;
&lt;li&gt;Tampoc no coincideix amb la tipologia dels vins. Els tipus de cava
són: Brut Nature, Extra Brut, Brut, Extra Sec, Sec, Semisec, i Dolç.
Com sempre, afegirem l'opció &amp;quot;altre&amp;quot; per deixar la porta oberta a
altres possibilitats.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Com que són poques, afegirem les denominacions pròpies del cava a les
del vi, i deixarem a mans dels experts la correcta associació.&lt;/p&gt;
&lt;p&gt;En el cas de la tipologia no aplicarem la mateixa solució que amb les
denominacions perquè són força més. Així que ens tocarà crear la
classe &lt;tt class="docutils literal"&gt;TipusCava&lt;/tt&gt; i reanomenar l'antic &lt;tt class="docutils literal"&gt;Tipus&lt;/tt&gt; per &lt;tt class="docutils literal"&gt;TipusVi&lt;/tt&gt;
amb els mateixos valors que abans.&lt;/p&gt;
&lt;p&gt;El diagrama corresponent seria:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes amb Cava" src="http://apuntstecnics.herokuapp.com/images/poo022.img003.cava.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Amb aquest disseny ens trobem què &lt;a class="footnote-reference" href="#canvisdisseny" id="id9"&gt;[8]&lt;/a&gt;:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;s'ha evitat duplicar el mètode &lt;tt class="docutils literal"&gt;existeix()&lt;/tt&gt; amb un
&lt;tt class="docutils literal"&gt;existeixVi()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;existeixCava()&lt;/tt&gt; basant-se en que els nr. de
referència són identificatius entre tots dos tipus de productes de
la botiga.&lt;/li&gt;
&lt;li&gt;el mètode &lt;tt class="docutils literal"&gt;afegeix()&lt;/tt&gt; queda sobrecarregat ja que amb el tipus del
paràmetre podem decidir si hem d'afegir a una o altra llista.&lt;/li&gt;
&lt;li&gt;amb la resta de mètodes, però, no podem fer servir aquesta tècnica
perquè no podem decidir el tipus de sortida a partir del de
l'entrada. Això ens obliga a disposar de mètodes diferents amb codi
pràcticament idèntic.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En tot cas, ara ens toca realitzar els canvis que calguin a la nostra
aplicació de manera que integri el nou producte.&lt;/p&gt;
&lt;p&gt;Per la creació d'un cava, pots fer servir:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Cava&lt;/span&gt; &lt;span class="n"&gt;cava&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Cava&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2009100004&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
        &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;BigDecimal&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;12.10&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
        &lt;span class="n"&gt;Localitzacio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PRESTATGE_VERMELL&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Marfil escumós blanc de negre brut&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;Alella vinícola&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;Origen&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ALELLA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;Varietat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;GARNATXA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;TipusCava&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;BRUT&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="exercici-5-pero-no-teniem-herencia-a-la-poo"&gt;
&lt;h3&gt;Exercici 5. Però... no teníem herència a la POO?&lt;/h3&gt;
&lt;p&gt;Segur que ja te n'havies adonat. Aquest disseny no està fent us
d'un dels mecanismes més paradigmàtics de la programació orientada a
objectes: l'herència. Això fa que hi hagi un munt de informació
duplicada.&lt;/p&gt;
&lt;p&gt;Millora el disseny anterior fent servir les següents pistes:&lt;/p&gt;
&lt;p&gt;Pista 1. Fixa't què tenen en comú el vi i el cava. Sí, tots dos són
elements líquids produïts amb matèries primeres similars, amb una
certa quantitat d'alcohol que la Sra. Estrella ven embotellats.
Va, no ens emboliquem. Què tal simplement dir que són &lt;em&gt;begudes&lt;/em&gt;?.&lt;/p&gt;
&lt;p&gt;Pista 2. No tan ràpid! Moltes de les propietats de les classes Vi i
Cava, en realitat les contenen a partir d'altres classes (ex. ViEspec)
Per tant, potser no resulta tant adequat posar a Beguda atributs com
ara el nom de la beguda.&lt;/p&gt;
&lt;p&gt;Pista 3. Per cert, té sentit permetre instanciar una beguda en
general? No hauríem de permetre només instàncies de Vi i de Cava?&lt;/p&gt;
&lt;p&gt;Pista 4. Què tenen en comú les especificacions de Vi i de Cava? No
sembla que ja hem fet quelcom similar fa un moment?&lt;/p&gt;
&lt;p&gt;Pista 5. Malgrat la botiga podria funcionar amb una única llista de
begudes, potser resultarà convenient disposar d'una llista per cada
classe de begudes.&lt;/p&gt;
&lt;p&gt;Pista 6. Considera el següent diagrama UML com a referència dels
canvis que has d'implementar.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes amb herència" src="http://apuntstecnics.herokuapp.com/images/poo022.img004.basic.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="la-botiga-de-vi-es-redissenya"&gt;
&lt;h2&gt;La botiga de vi es redissenya&lt;/h2&gt;
&lt;p&gt;Tot i que aquest darrer disseny presenta clares millores respecte els
anteriors, encara hi trobem algunes pegues:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;la Sra. Estrella podria estar interessada en realitzar cerques amb
independència de si és vi o cava? Pensa que potser només li estan
demanant per un determinat celler i no importa si és vi o cava.  La
versió actual permetria fàcilment (i elegantment) afegir aquesta
funcionalitat?&lt;/li&gt;
&lt;li&gt;el nostre codi presenta força duplicació. Per exemple, les
classes Vi i Cava pràcticament són idèntiques excepte pel nom.
Aquest problema s'accentua més en el cas que afegim un nou producte
com ara el &lt;em&gt;vi d'agulla&lt;/em&gt; que té els mateixos atributs que el vi
estàndard (o de taula)&lt;/li&gt;
&lt;li&gt;el nostre codi presenta una certa resistència a canvis raonables.
Les classes són altament dependents entre si. Tant que pràcticament
qualsevol canvi afecta a la major part de les classes.&lt;ol class="arabic"&gt;
&lt;li&gt;Què costaria afegir un nou atribut a les begudes? Per exemple,
imagina que ens interessa afegir la &lt;em&gt;graduació&lt;/em&gt; a les diferents
begudes? Un detall com aquest ens obliga a canviar pràcticament
&lt;strong&gt;totes&lt;/strong&gt; les classes!&lt;/li&gt;
&lt;li&gt;Què costaria afegir noves begudes a la botiga?  Per exemple,
imagina que volem incorporar el &lt;em&gt;vi d'agulla&lt;/em&gt;. Quantes classes es
veuen afectades? És desitjable? Com afecta al problema de
duplicació de codi?&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Anem a veure com podem resoldre, o si més no alleugerir, aquests
problemes al nostre disseny.&lt;/p&gt;
&lt;div class="section" id="exercici-6-flexibilitzant-el-disseny-per-nous-atributs"&gt;
&lt;h3&gt;Exercici 6. Flexibilitzant el disseny per nous atributs&lt;/h3&gt;
&lt;p&gt;Sabem que el nostre disseny, tal i com està, ens obliga a realitzar
canvia a la majoria de les classes simplement per afegir un atribut
nou.&lt;/p&gt;
&lt;p&gt;Considera la nova propietat del vi &lt;tt class="docutils literal"&gt;graduacio&lt;/tt&gt; amb les possibilitats
&lt;em&gt;alta&lt;/em&gt;, &lt;em&gt;mitjana&lt;/em&gt;, &lt;em&gt;baixa&lt;/em&gt;, &lt;em&gt;sense alcohol&lt;/em&gt;, i &lt;em&gt;altre&lt;/em&gt;; i el mètode
get corresponent.&lt;/p&gt;
&lt;p&gt;Fes una revisió ràpida i apunta totes les classes que requereixen ser
modificades per a integrar aquest canvi.&lt;/p&gt;
&lt;p&gt;El problema està en que totes les classes són molt interdependents. I
l'objectiu seria trobar un disseny que ens permeti evitar modificar
tantes coses per cada canvi a les propietats.&lt;/p&gt;
&lt;p&gt;Segueix els següents passos:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Abans de començar a codificar, dibuixa un diagrama UML que faràs
servir com a guió per realitzar els canvis que se t'indiquen a
continuació.&lt;/li&gt;
&lt;li&gt;canvia el constructor de les diferents begudes de manera que rebin
directament una especificació en comptes de les seves propietats.
Aquest canvi permetrà independitzar les classes de begudes de les
propietats que les especifiquen.
Ofereix també un &lt;tt class="docutils literal"&gt;getEspec()&lt;/tt&gt; que permeti recuperar
l'especificació &lt;a class="footnote-reference" href="#especinmutable" id="id10"&gt;[10]&lt;/a&gt; . Ja no caldrà la resta de
mètodes com ara &lt;tt class="docutils literal"&gt;Vi.getNom()&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;canvia els mètodes &lt;tt class="docutils literal"&gt;Botiga.cerca()&lt;/tt&gt; de manera que aquest delegui
la comparació de especificacions a un nou mètode &lt;tt class="docutils literal"&gt;boolean
BegudaEspec.coincideix(BegudaEspec)&lt;/tt&gt; qui farà realment la
comparació de les propietats que formen part de l'especificació.&lt;/li&gt;
&lt;li&gt;modifica el codi de prova perquè sigui capaç de funcionar amb els
nous constructors.&lt;/li&gt;
&lt;li&gt;afegeix ara la nova propietat. Apuntat en quantes classes cal ara
fer canvis.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Fixa't que amb aquest nou disseny, afegir una nova propietat a
l'especificació d'un vi només obliga a canviar &lt;tt class="docutils literal"&gt;ViEspec&lt;/tt&gt; i, és clar,
allà on es construeixin les seves instàncies. Fixat que ara moltes
classes com ara &lt;tt class="docutils literal"&gt;Vi&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;Botiga&lt;/tt&gt; se n'han de preocupar!.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-7-el-celler-creix"&gt;
&lt;h3&gt;Exercici 7. El celler creix&lt;/h3&gt;
&lt;p&gt;Ja sabem que la Sra. Estrella no es quedarà pas amb només vi i cava. Ens
toca ampliar l'oferta a nous productes: el vi generós, el vi d'agulla
i el vi gasificat.&lt;/p&gt;
&lt;p&gt;El vi generós presenta una tipologia pròpia amb els valors: ranci,
fondellol, mistela, dolç, mut negre, mut blanc i vimblanc. A
banda, té una propietat nova per indicar el licor que el fa &amp;quot;generós&amp;quot;.
La propietat &lt;em&gt;licor&lt;/em&gt; pot tenir els valors: reforçat, generós, sec i
altre. Per la resta, coincideix amb el vi de taula (el que ja tractava
la nostra aplicació)&lt;/p&gt;
&lt;p&gt;El vi d'agulla és en tot, igual al vi de taula. El vi gasificat només
presenta les propietats genèriques de BegudaEspec.&lt;/p&gt;
&lt;p&gt;Ajudat d'un diagrama UML per descriure el que has d'implementar.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;hr class="docutils" /&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="refheadfirst" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;El cas que seguirem està inspirat en els exemples
trobats al llibre &lt;a class="reference external" href="http://www.headfirstlabs.com/books/hfooad/"&gt;Head First Object Oriented Analysis and Design&lt;/a&gt; de l'editorial
O'Reilly de novembre de 2006. Es tracta d'un llibre de seguiment
agradable que et recomano si vols aprofundir en aquest tema.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="consumresponsable" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;L'autor vol deixar clar des de bon començament
que, amb l'ús de begudes alcohòliques en els següents exercicis, de
cap manera pretén incitar al seu consum.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="simplificacions" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Donat que el vi disposa d'una varietat
impressionant de característiques i matisos, en aquest exercici ens
veiem forçats a fer importants simplificacions. Si entens molt de
vins, espero que sàpigues acceptar-les.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="varietatraim" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Suposarem que només hi ha una varietat de raïm
per vi. Si tens temptacions d'afegir una llista de varietats, et
proposo que ho deixis per la darrera versió.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="minimdo" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id6"&gt;[5]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Per simplicitat, s'ha eliminat accents i altres
caràcters especials. Si la denominació d'origen del teu vi favorit
no es troba aquí, estàs convidat a afegir-la. Aquesta possibilitat
d'ampliació és vàlida per a qualsevol altre llista de l'enunciat.
Intenta, però, no treure'n d'existents encara que no t'agradin.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="caractersespecials" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[6]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Potser voldràs posar-te a prova i fer que la
comparació ignori caràcters especials com ara accents.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="finsaracercadaloc" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id7"&gt;[7]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;És cert, fins ara havíem inclós la
localització a l'algorisme de cerca. No és l'error de disseny més
greu que hem comés aquí. En tot cas, algú podria argumentar que
potser pugui tenir sentit cercar per aquest paràmetre. Si
l'argument convenç l'Estrella, podrem recuperar aquesta
funcionalitat amb un mècanisme similar al que fem servir per
controlar el preu màxim.  Perquè no dins de &lt;tt class="docutils literal"&gt;ViEspec&lt;/tt&gt;? Segur que
quan acabis aquest exercici ja podràs trobar la resposta sense
ajut.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="canvisdisseny" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id9"&gt;[8]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;És molt probable que a aquestes alçades de curs ja
vegis molt clar com millorar aquest disseny. Amb tot, et proposo
que el segueixis tal i com es demana i tinguis una mica de
paciència.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="collitacava" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id8"&gt;[9]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;D'acord, segurament sí s'indica la collita pels més
entesos en cava. Per fer més ric l'exemple suposarem que la gent
sol mirar l'any pel vi i no pel cava.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="especinmutable" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id10"&gt;[10]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Donat que les especificacions són immutables, no
ens hem de preocupar de guardar i lliurar-ne còpies.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:42:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:mapes-i.html</guid><category>java</category></item><item><title>Mapes II</title><link>http://apuntstecnics.herokuapp.com/mapes-ii.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquest document correspon a la segona i darrera part de l'estudi del
concepte d'associació &lt;em&gt;clau-valor&lt;/em&gt; que aquí anomenem &lt;em&gt;mapes&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Pressuposa que s'ha seguit la &lt;a class="reference external" href="http://apuntstecnics.herokuapp.com/mapes-i.html"&gt;primera part&lt;/a&gt;. De fet, la numeració dels
exercicis d'aquesta part és consecutiva respecte les anteriors.&lt;/p&gt;
&lt;p&gt;En aquesta segona part reprenem el desenvolupament de la botiga de
vins de la Sra. Estrella a partir del darrer exercici de la primera
part.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="un-disseny-discutible"&gt;
&lt;h2&gt;Un disseny discutible&lt;/h2&gt;
&lt;p&gt;Ens havíem quedat amb un disseny de la botiga de vins de la Sra.
Estrella similar al que descriu el següent diagrama.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes amb la botiga de Vins" src="http://apuntstecnics.herokuapp.com/images/poo023.img001.inicial.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Com podem veure, cada cop que hem d'afegir una nova beguda hem de
crear un mínim de dues classes: la de la beguda i la de la seva
especificació. Sovint el contingut d'aquestes classes és idèntic al
d'altres existents com per exemple les especificacions de Vi i
ViGasificat. De fet, el codi de Vi, Cava, etc. té poc més que un
constructor! És pitjor en el cas del vi gasificat, que no afegeix cap
atribut als genèrics de beguda. Amb tot hem de crear la classe buida
perquè funcioni tot plegat! A més a més, ens ha tocat modificar Botiga
per a afegir un mecanisme de cerca per cada beguda i el mètode per a
afegir una instància de beguda a l'inventari!&lt;/p&gt;
&lt;p&gt;És clar que tot plegat sembla un problema de tipus copy&amp;amp;paste que, amb
l'ajut d'un &amp;quot;mico picatecles&amp;quot; &lt;a class="footnote-reference" href="#picatecles" id="id1"&gt;[1]&lt;/a&gt; i una mica de paciència
corregint els petits errors que se li escapin al mico... Però, també
podem aspirar a un disseny millor, no?&lt;/p&gt;
&lt;p&gt;Convenim doncs que tot plegat és un disseny que, veient les ànsies
d'ampliació de la Sra. Estrella, convindrà revisar, oi?&lt;/p&gt;
&lt;p&gt;Per a adreçar una solució a aquests problemes de disseny,
(re)considerarem els següents elements: interfaces, encapsulació,
canvi i enumerats.&lt;/p&gt;
&lt;div class="section" id="interfaces"&gt;
&lt;h3&gt;1. interfaces.&lt;/h3&gt;
&lt;p&gt;Quan implementem el nostre codi contra una interface en comptes d'una
classe, el fem automàticament més flexible donat que podem fer servir
diferents classes que implementen la interface sense modificar-lo.
Fins i tot aquelles classes que encara no han estat programades!&lt;/p&gt;
&lt;p&gt;Per exemple, imagina que tens la següent jerarquia:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes pels jugadors" src="http://apuntstecnics.herokuapp.com/images/poo023.img002.jugadors.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Imagina que has d'implementar la classe Equip que té un mètode
anomenat &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;afegeixJugador(«?»)&lt;/span&gt;&lt;/tt&gt; que permet afegir un jugador a
l'equip.  Quin penses que serà el tipus més adequat per al paràmetre
d'aquest mètode? En fem un per cada tipus de jugador (ex.
&lt;tt class="docutils literal"&gt;JugadorFutbol&lt;/tt&gt;) o un de sol per Jugador?.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="encapsulacio"&gt;
&lt;h3&gt;2. encapsulació&lt;/h3&gt;
&lt;p&gt;Sí, ja n'hem parlat a fartar. L'encapsulació és aquell mecanisme que
amaga la implementació interna d'un element, a la que només es pot
accedir mitjançant un conjunt de mètodes/serveis. Aquest mecanisme ens
ofereix diferents avantatges ja coneguts com ara la facilitat de
reutilització de codi, la modificabilitat de la implementació interna
sense afectar al codi que la fa servir, i l'assegurament de la
integritat de les dades internes.&lt;/p&gt;
&lt;p&gt;Un altre avantatge, del que potser no hem fet tan d'èmfasi fins ara,
és que pot permetre protegir el nostre codi de canvis innecessaris. La
idea bàsica és que intentarem aïllar les parts del nostre codi que més
difícilment variaran d'aquelles que ho faran més probablement. És a
dir, &lt;strong&gt;encapsularem allò que varia&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, imaginem que tenim la classe Pintor amb la següent
descripció:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes dels pintors" src="http://apuntstecnics.herokuapp.com/images/poo023.img003.pintor.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Podem pensar que els diferents estils de pintors (impressionistes,
cubistes, surrealistes, etc.) prepararan els cavallets i netejaran els
pinzells de la mateixa manera &lt;a class="footnote-reference" href="#pintura" id="id2"&gt;[2]&lt;/a&gt;. En canvi, a l'hora de pintar, cadascú
farà servir una manera molt diferent depenent del seu estil.&lt;/p&gt;
&lt;p&gt;Haurem, per tant, de trobar un disseny que permeti mantenir fixa la
part que no varia, i que a l'hora faci molt fàcil ampliar/modificar la
part que sí varia.&lt;/p&gt;
&lt;p&gt;Podem implementar Pintor com una classe abstracta. On
&lt;tt class="docutils literal"&gt;preparaCavallet()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;netejaPinzells()&lt;/tt&gt; estiguin implementades i
&lt;tt class="docutils literal"&gt;pinta()&lt;/tt&gt; sigui abstracta. Així, cada estil de pintor pot estendre
aquesta classe i implementar el mètode &lt;tt class="docutils literal"&gt;pinta()&lt;/tt&gt; de la manera
corresponent al seu estil. Podria funcionar, tot i que això impediria
que alguns estils de pintor poguessin pertànyer a una altra jerarquia
si els calgués (herència simple)&lt;/p&gt;
&lt;p&gt;Fixa't, però, en aquesta altra proposta:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Diagrama de classes amb proposta amb interface" src="http://apuntstecnics.herokuapp.com/images/poo023.img004.pintura.png" /&gt;
&lt;/div&gt;
&lt;p&gt;On &lt;tt class="docutils literal"&gt;Pintor.pinta()&lt;/tt&gt; podria ser quelcom similar a:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;pinta&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;estil&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;estil&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pinta&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aquesta solució no &amp;quot;malgasta&amp;quot; herència. A més a més, podem instanciar
directament la classe Pintor en comptes d'estar forçat a fer servir
les seves subclasses. Fixa't que Pintor està implementat contra una
interface i no contra una classe concreta. Això li dóna una gran
flexibilitat ja que pot funcionar fins i tot amb estils que encara
estan per descobrir!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="canvi"&gt;
&lt;h3&gt;3. canvi&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;The only constant is change, continuing change, inevitable change,
that is the dominant factor in society today. No sensible decision
can be made any longer without taking into account not only the
world as it is, but the world as it will be.&lt;/p&gt;
&lt;p class="attribution"&gt;&amp;mdash;Isaac Asimov&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;La qüestió no és si el nostre disseny d'avui haurà de canviar o no,
sinó &lt;strong&gt;quan&lt;/strong&gt; ho haurà de fer. Per a fer el nostre codi més resistent
al canvi, un dels &amp;quot;trucs&amp;quot; ben coneguts és assegurar-nos que cada
classe tingui un &lt;em&gt;únic punt de canvi&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Per exemple, considera la següent classe:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Cotxe&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;arrenca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;atura&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;  &lt;span class="o"&gt;{}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;canviaRodes&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Roda&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;rodesNoves&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;condueix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Lloc&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;neteja&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't en tot el que arriba a fer aquesta classe. A banda de saber com
arrencar i aturar el cotxe, també ha de conèixer com canviar les
rodes, sobre la neteja, i com ha de ser conduït. Tot plegat, un munt
de punts de possible canvi. L'haurem de modificar si varia el
sistema de collat de les rodes, o la manera de conduir del conductor o
de rentar la tapisseria.&lt;/p&gt;
&lt;p&gt;Si la teva classe té massa punts de canvi és que probablement està
fent massa coses. Solucionar-ho és tan simple com dividir les
funcionalitats en més classes. Per exemple, considera el disseny&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Cotxe&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;arrenca&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;atura&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;  &lt;span class="o"&gt;{}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;NetejaCotxes&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;neteja&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Cotxe&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Conductor&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;condueix&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Cotxe&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Lloc&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Mecanic&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;canviaRodes&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Cotxe&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Roda&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;rodesNoves&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que el nou disseny fa que cada classe tingui un mínim de punts
de canvi.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="enum"&gt;
&lt;h3&gt;4. enum&lt;/h3&gt;
&lt;p&gt;Els enumerats en java són en realitat un tipus especial de classe que
indica les instàncies possibles.&lt;/p&gt;
&lt;p&gt;Com una classe qualsevol, té la possibilitat de definir els seus
propis atributs i mètodes i, també, implementar interfaces. De fet,
tot enum ve, de fàbrica, implementant dues interfaces
java.io.Serializable i java.lang.Comparable.&lt;/p&gt;
&lt;p&gt;Considera el següent codi d'exemple:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Codi d&amp;#39;exemple per mostrar el funcionament dels enums&lt;/span&gt;
&lt;span class="cm"&gt; * Es pot trobar informació detallada per exemple a:&lt;/span&gt;
&lt;span class="cm"&gt; *    http://download.oracle.com/javase/1.5.0/docs/guide/language/enums.html&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ExempleUsEnum&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// recorrem els valors de Intercanvi com si fossin Codificat&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Codificat&lt;/span&gt; &lt;span class="nl"&gt;teCodi:&lt;/span&gt; &lt;span class="n"&gt;Intercanvi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;values&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;teCodi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getCodi&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="cm"&gt;/* seria més eficient fer el següent codi recorrent els valors&lt;/span&gt;
&lt;span class="cm"&gt;             * de Intercanvi amb elements de tipus Intercanvi, però en aquest&lt;/span&gt;
&lt;span class="cm"&gt;             * cas no veuríem que podem tractar-los com a Codificat */&lt;/span&gt;
            &lt;span class="n"&gt;Intercanvi&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Intercanvi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fromCodi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;El codi de &amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;#39; és &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* una interface senzilla per a tot allò que disposi d&amp;#39;un codi numèric */&lt;/span&gt;
&lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="nc"&gt;Codificat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getCodi&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Un enum és bàsicament una classe que indica les instàncies possibles,&lt;/span&gt;
&lt;span class="cm"&gt; * amb el seu constructor i els seus membres. */&lt;/span&gt;
&lt;span class="kd"&gt;enum&lt;/span&gt; &lt;span class="n"&gt;Intercanvi&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;Codificat&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;ALTRES&lt;/span&gt;      &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;    &lt;span class="c1"&gt;// entre parèntesis els atributs del constructor&lt;/span&gt;
    &lt;span class="n"&gt;COMPRES&lt;/span&gt;     &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;VENDES&lt;/span&gt;      &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;INTERCANVIS&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;    &lt;span class="c1"&gt;// el &amp;#39;;&amp;#39; és requerit en aquest cas!&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// aquí va la declaració dels atributs del constructor&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="nf"&gt;Intercanvi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;codi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;  &lt;span class="c1"&gt;// el constructor&lt;/span&gt;

    &lt;span class="c1"&gt;// redefinim el toString()&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;toLowerCase&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// una manera d&amp;#39;obtenir el valor corresponent a un codi.&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Intercanvi&lt;/span&gt; &lt;span class="nf"&gt;fromCodi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Intercanvi&lt;/span&gt; &lt;span class="nl"&gt;e:&lt;/span&gt; &lt;span class="n"&gt;Intercanvi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;values&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getCodi&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// implementació del mètode definit a la interface&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;getCodi&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;codi&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Amb la seva sortida&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;El codi de &amp;#39;altres&amp;#39; és 0
El codi de &amp;#39;compres&amp;#39; és 1
El codi de &amp;#39;vendes&amp;#39; és 2
El codi de &amp;#39;intercanvis&amp;#39; és 4
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="redissenyant-la-botiga"&gt;
&lt;h2&gt;Redissenyant la botiga&lt;/h2&gt;
&lt;p&gt;De vegades passa que les decisions que prenem ens porten a camins
tortuosos. Hi ha una dita hindú que diu:&lt;/p&gt;
&lt;blockquote&gt;
No importa quan de temps portis caminant per un camí, si te
n'adones que no va allà on vols, fes mitja volta!&lt;/blockquote&gt;
&lt;p&gt;Doncs bé, amb els quatre punts vists anteriorment ens toca analitzar
com podríem aplicar-los al redisseny de la botiga de begudes de la
Sra. Estrella.&lt;/p&gt;
&lt;div class="section" id="exercici-8-els-tipus-de-beguda"&gt;
&lt;h3&gt;Exercici 8. Els tipus de beguda&lt;/h3&gt;
&lt;p&gt;Un dels problemes que té el nostre disseny és que les classes de les
diferents begudes no fan pràcticament res diferent entre si. En
realitat, només les posem per indicar distingir cada tipus de beguda.&lt;/p&gt;
&lt;p&gt;Normalment creem noves classes per implementar comportaments que no
tenen les existents, però en aquest cas, la classe Vi fa el mateix que
Cava, és a dir, únicament contenir una especificació de beguda.&lt;/p&gt;
&lt;p&gt;Perquè no afegir una nova propietat a Beguda que sigui TipusBeguda (un
enum amb VI, CAVA...  podria fer un bon paper) Com que totes les
classes &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;«...»Espec&lt;/span&gt;&lt;/tt&gt; són descendents de &lt;tt class="docutils literal"&gt;BegudaEspec&lt;/tt&gt;, podem tenir
accés a les diferents especificacions sense gaires problemes, oi?&lt;/p&gt;
&lt;p&gt;Això sí, ara Beguda s'ha de poder instanciar, és clar!&lt;/p&gt;
&lt;p&gt;On posarem el tipus de beguda, a Beguda o a BegudaEspec?
&lt;a class="footnote-reference" href="#redundanttipus" id="id3"&gt;[3]&lt;/a&gt; Una posiblitat seria:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;afegeix una propietat a cada especificació concreta que
guardi el tipus de beguda a la que correspon l'especificació. Pensa
si cal que cada instància tingui el seu propi tipus i si aquest pot
variar.&lt;/li&gt;
&lt;li&gt;afegeix un mètode a BegudaEspec que retorni el tipus de beguda.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Fixa't també que ara que ja no distingim com a classes els diferents
tipus de begudes, hi ha un munt de mètodes de la classe Botiga que es
simplifiquen.&lt;/p&gt;
&lt;p&gt;Defineix el UML amb aquests canvis i implementa'ls.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-9-tantes-especificacions-fan-nosa"&gt;
&lt;h3&gt;Exercici 9. Tantes especificacions fan nosa!&lt;/h3&gt;
&lt;p&gt;D'acord, ens hem carregat les subclasses de beguda i, amb elles,
una bona part de la complexitat del nostre disseny.&lt;/p&gt;
&lt;p&gt;Encara, però, no hem resolt el tema de les especificacions. Cada cop
que volem afegir una nova beguda ens cal tenir en compte la seva
especificació.&lt;/p&gt;
&lt;p&gt;Pensa: l'especificació d'una beguda no deixa de ser un conjunt més o
menys variable de propietats de beguda com ara el nom, l'origen,
etc.  I una propietat no deixa de ser un nom i un valor. El nom
identifica la propietat i és únic respecte a la resta de propietats.
Per exemple la propietat origen pot tenir el valor Origen.PENEDES.&lt;/p&gt;
&lt;p&gt;Seria possible guardar aquest conjunt de propietats en algun
contenidor? Hi ha alguna classe que ens ofereixi la possibilitat
d'afegir parells (clau, valor)? La resposta és SÍ! En un &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html"&gt;Map&lt;/a&gt;.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="Jerarquia de classes de HashMap" src="http://apuntstecnics.herokuapp.com/images/poo023.img005.hashmap.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Alguns dels mètodes que ens caldran:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;boolean containsKey(Object)&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Retorna cert si el mapa conté la clau especificada.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;V get(Object)&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Retorna el valor associat a la clau especificada al paràmetre o
null si no conté cap valor associat a la clau.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;V put(K, V)&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Associa la clau al valor i retorna l'antic valor associat a
aquesta clau (null si no n'hi havia)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;De moment, escollirem la classe &lt;a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html"&gt;HashMap&lt;/a&gt;.
Un tipus de Map amb un accés als elements força eficient.&lt;/p&gt;
&lt;p&gt;Abans de començar a codificar, com sempre, dibuixa el diagrama UML amb
els nous canvis. Et servirà de guia per no perdre't.&lt;/p&gt;
&lt;p&gt;Alguns dels canvis que haurem de fer:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;crear un nou enumerat anomenat TipusPropietat amb valors com ara
NOM, ORIGEN, etc.&lt;/li&gt;
&lt;li&gt;crear una interface anomenada PropietatBeguda. Planteja't si cal
que especifiqui algun mètode.&lt;/li&gt;
&lt;li&gt;fer que els diferents enums (compte amb propietats com ara el nom
o la collita) de les propietats implementin la interface
PropietatBeguda.&lt;/li&gt;
&lt;li&gt;substituir les propietats de BegudaEspec per un nou membre
HashMap&amp;lt;TipusPropietat, PropietatBeguda&amp;gt; amb les propietats de la
classe... bé, decideix si el posem a Beguda o a BegudaEspec. Pista:
pensa què afegeix ara la classe BegudaEspec.&lt;/li&gt;
&lt;li&gt;afegir a Beguda (o a BegudaEspec si encara la mantens) la
possibilitat d'accedir als valors de les diferents propietats que
l'especifiquen. És a dir, ens cal algun mètode que ens permeti
substituir l'antic &lt;tt class="docutils literal"&gt;getNom()&lt;/tt&gt;. La proposta és implementar un
&lt;tt class="docutils literal"&gt;PropietatBeguda getPropietat(TipusPropietat)&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;modificar la resta d'elements perquè funcionin amb aquests canvis.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;Nota&lt;/em&gt;: Potser t'hauràs adonat que ara no tenim un mecanisme fiable
per a assegurar-nos de que cada tipus de beguda presenti totes les
propietats que li correspon i només aquestes. Et proposo que de moment
acceptis aquesta feblesa del sistema i, si tens interès, miris de
solucionar-lo com una de les millores addicionals que et proposa el
següent exercici.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-opcional-millores-addicionals"&gt;
&lt;h3&gt;Exercici 10. (opcional) Millores addicionals&lt;/h3&gt;
&lt;p&gt;En cas que t'hagis quedat amb les ganes, aquest exercici et permet
tancar alguns punts que han quedat oberts amb el disseny final de
l'exercici anterior.&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Fer que la comprovació de coincidència permeti ignorar també els
caràcters especials com ara accents i els espais de més. A més, que
permeti acceptar aquelles entrades que continguin alguna de les
paraules que s'introdueixin. Ex. si l'especificació cercada del
celler indica &amp;quot;Joan Juán&amp;quot;, aquesta nova versió acceptarà &amp;quot;Juan
Antonio Pérez Roura&amp;quot;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Afegir un nou mètode de cerca que permeti l'ús d'expressions
regulars per a aquells atributs textuals (com ara nom i celler).
Aquesta és una ampliació molt fàcil, tenint en comptes que disposem
de &lt;tt class="docutils literal"&gt;String.matches(regex)&lt;/tt&gt;, però potser et servirà com a
introducció a aquesta potent tècnica de manipulació de strings.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;El disseny de l'exercici anterior, deixa sense comprovar que les
especificacions que s'afegeixen a una beguda realment corresponguin
al tipus de beguda que estan especificant. Per exemple, a un Cava
se li podria passar perfectament una especificació sense nom o bé
amb graduació.&lt;/p&gt;
&lt;p&gt;Aquesta proposta d'ampliació, hauria de generar una excepció en cas
que l'especificació no contingui tots i només aquells atributs que
corresponen a una beguda del tipus que estan especificant. Pista:
TipusBeguda podria disposar d'una llista d'atributs requerits per
cada tipus, o fins i tot disposar d'un mètode que accepti una
especificació i comprovi si conté els elements que toquen.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Se t'acut alguna altra millora?&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;hr class="docutils" /&gt;
&lt;div class="section" id="notes"&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;table class="docutils footnote" frame="void" id="picatecles" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si aquesta expressió de &amp;quot;mico picatecles&amp;quot; t'ha
semblat despectiva contra la noble professió d'aquells que
programen sense utilitzar el cervell... tens tota la raó, és
despectiva. Si el cim al que aspires professionalment és aquest,
estàs perdent el temps amb aquests exercicis i, probablement, amb
aquest cicle.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="pintura" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Si en saps molt de pintura, per favor accepta-ho com a
simplificació per a entendre el concepte.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="redundanttipus" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Tenint en comptes que Beguda disposa de
l'especificació i que aquesta hauria de ser del tipus que correspon
a la beguda, probablement incloure aquesta propietat a Beguda
resultaria redundant o, com a molt, tindria una funció merament de
comprovació d'errors, especialment durant la creació de la beguda.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:42:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:mapes-ii.html</guid><category>java</category></item><item><title>Tipus Abstractes de Dades</title><link>http://apuntstecnics.herokuapp.com/tipus-abstractes-de-dades.html</link><description>&lt;div class="section" id="introduccio"&gt;
&lt;h2&gt;Introducció&lt;/h2&gt;
&lt;p&gt;Aquests continguts presenten el concepte de &lt;em&gt;Tipus Abstracte de Dades&lt;/em&gt;
o més conegut com a TAD.&lt;/p&gt;
&lt;p&gt;Els TADs són bàsicament una agrupació de dades i processos que actuen
sobre aquestes, de manera que l'usuari de les dades (un altre
programa, és clar) no tingui perquè conèixer la implementació interna
d'aquestes. Així, en cas que es trobin maneres més eficients de
codificar les dades, es poden realitzar els canvis sense requerir que
els usuaris d'aquestes hagin de modificar el seu codi.&lt;/p&gt;
&lt;p&gt;Per introduir-nos als TADs, farem servir un exemple conductor:
treballarem amb hores. Inicialment farem servir els components d'una
hora (les hores, minuts i segons) per separat. A continuació
estudiarem ara la possibilitat d'agrupar aquests components sota
un mateix identificador. Avançarem amb aquesta idea per crear els
nostres propis tipus de dades fins a arribar a l'agrupació d'aquestes
amb operacions que les manipulen: els TADs.&lt;/p&gt;
&lt;p&gt;Amb la complexitat creixent dels nostres programes, començarà a tenir
sentit separar els programes en fitxers, i de seguida que el nombre de
fitxers comenci a créixer, ens caldrà algun mecanisme per gestionar la
compilació. Tot plegat, ho veurem introduït a la part final d'aquest
tema.&lt;/p&gt;
&lt;p&gt;Els exercicis que apareixen en aquest document estan classificats amb
zero o més asteriscs. Si disposes de prou temps, ignora les marques i
realitza els exercicis en l'ordre en que apareixen. En cas contrari
considera primer els exercicis sense marques. Els exercicis amb un
asterisc són exercicis per practicar i si has fet els exercicis de que
depenen, no haurien de resultar-te gaire difícils. Els exercicis amb
dos asteriscs presenten una complexitat una mica superior, normalment
de tipus algorísmic.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="estructures"&gt;
&lt;h2&gt;Estructures&lt;/h2&gt;
&lt;p&gt;De vegades ens trobem que un grup de variables, no necessàriament del
mateix tipus, estan tan relacionades entre si que ens trobem
pràcticament sempre declarant-les juntes, passant-les com a paràmetre
juntes, etc.&lt;/p&gt;
&lt;div class="section" id="exercici-1-un-segon-mes"&gt;
&lt;h3&gt;Exercici 1. Un segon més&lt;/h3&gt;
&lt;p&gt;Desenvolupa un procediment que, donada una hora representada per tres
enters hora, minut i segon, calculi el resultat d'afegir un segon a
l'hora.&lt;/p&gt;
&lt;p&gt;Completa el següent codi perquè compili i s'executi sense cap
missatge. Evidentment, no es val modificar el codi de
&lt;tt class="docutils literal"&gt;valida_resultat()&lt;/tt&gt; ni de &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include&amp;lt;stdio.h&amp;gt;&lt;/span&gt;

&lt;span class="cm"&gt;/* Donada una hora d&amp;#39;origen formada per tres enters ho, mo i so,&lt;/span&gt;
&lt;span class="cm"&gt;   calcula l&amp;#39;hora corresponent a sumar-li un segon a aquesta hora&lt;/span&gt;
&lt;span class="cm"&gt;   origen i deixa el resultat en l&amp;#39;hora calculada composada per&lt;/span&gt;
&lt;span class="cm"&gt;   les referències a enter hc, mc i sc. Pressuposa que l&amp;#39;hora d&amp;#39;origen&lt;/span&gt;
&lt;span class="cm"&gt;   és correcta i apareix en format 24h. */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                             &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Valida el resultat trobat a partir de l&amp;#39;esperat.&lt;/span&gt;
&lt;span class="cm"&gt; * En cas de discrepància, mostra un missatge d&amp;#39;error indicant l&amp;#39;hora esperada&lt;/span&gt;
&lt;span class="cm"&gt; * i l&amp;#39;hora trobada */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="n"&gt;mt&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error: &lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s"&gt; esperat %d:%d:%d&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s"&gt; trobat  %d:%d:%d&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;     &lt;span class="cm"&gt;/* compoments de l&amp;#39;hora origen    */&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;     &lt;span class="cm"&gt;/* compoments de l&amp;#39;hora esperada  */&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;     &lt;span class="cm"&gt;/* compoments de l&amp;#39;hora calculada */&lt;/span&gt;

    &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;se&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;div class="section" id="agrupacio-en-arrays"&gt;
&lt;h3&gt;Agrupació en arrays&lt;/h3&gt;
&lt;p&gt;T'has fixat quants cops hem de passar a l'hora els diferents elements
que composen una hora? Està clar que ens cal poder agrupar aquests
conceptes d'hora, minut i segon.&lt;/p&gt;
&lt;p&gt;Ho podríem fer mitjançant un array d'enters, on la primera posició fos
l'hora, la segona el minut i la tercera el segon. Això és possible
perquè els tres components d'una hora són del mateix tipus.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-2-incrementa-segons-amb-un-array-d-hora"&gt;
&lt;h3&gt;Exercici 2. Incrementa segons amb un array d'hora&lt;/h3&gt;
&lt;p&gt;Desenvolupa una versió de l'exercici anterior, on els diferents
components d'una hora apareguin codificats en forma d'array.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h3&gt;Estructures&lt;/h3&gt;
&lt;p&gt;Si bé la manera de resoldre el problema amb un array pot ser
acceptable per a aquest tipus de problemes en que tots els components
són del mateix tipus, no sempre serà així.&lt;/p&gt;
&lt;p&gt;Per aquesta raó, considera ara el següent codi&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include&amp;lt;stdio.h&amp;gt;&lt;/span&gt;

&lt;span class="cm"&gt;/* definició de l&amp;#39;estructura Hora */&lt;/span&gt;
&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* assigna els valors h, m i s als components de la referència a Hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa valors correctes. */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Donada una hora d&amp;#39;origen calcula l&amp;#39;hora corresponent a&lt;/span&gt;
&lt;span class="cm"&gt;   sumar-li un segon i deixa el resultat en l&amp;#39;hora calculada.&lt;/span&gt;
&lt;span class="cm"&gt;   Pressuposa que l&amp;#39;hora d&amp;#39;origen és correcta i apareix en format 24h. */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Valida el resultat trobat a partir de l&amp;#39;esperat.&lt;/span&gt;
&lt;span class="cm"&gt; * En cas de discrepància, mostra un missatge d&amp;#39;error indicant l&amp;#39;hora esperada&lt;/span&gt;
&lt;span class="cm"&gt; * i l&amp;#39;hora trobada */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error: &lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s"&gt; esperat %d:%d:%d&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s"&gt; trobat  %d:%d:%d&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="cm"&gt;/* declara les hores origen, esperada i calculada */&lt;/span&gt;

    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;assigna_valors&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;valida_resultat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Fixa't que:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;El bloc iniciat a la línia 4 declara un nou tipus de dades anomenat
&lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; que està format per tres &lt;em&gt;camps&lt;/em&gt; enters.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;La línia 37 declara tres variables de tipus &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;La línia 41 passa dues variables de tipus &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; com arguments de
la crida a una subrutina. La primera la passa per valor i la segona
per referència.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A la línia 29 es mostra com, a partir del nom d'una variable de
tipus &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; es pot accedir als valors dels seus camps. La forma
general és&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;variable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;nom_camp&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;A la línia 13 es mostra com accedir a un camp a partir de la
referència a una variable de tipus &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt;. La forma
general és&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;variable&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;nom_camp&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;És a dir, accedirem als camps de manera diferent si disposem de la
variable o d'una referència a aquesta.&lt;/p&gt;
&lt;p&gt;De fet, la notació amb fletxeta és en realitat una &lt;em&gt;comoditat&lt;/em&gt; que
ens ofereix el llenguatge. Podem fer servir l'asterisc per
derreferenciar la variable i accedir directament als seus camps
mitjançant el punt&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Per cert, en aquest cas podem copiar directament els valors dels camps
d'una Hora en una altra:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Malauradament no podrem fer el mateix amb la comparació
(ex. &lt;tt class="docutils literal"&gt;if (he != ht) &lt;span class="pre"&gt;«...»&lt;/span&gt;&lt;/tt&gt;) En tot cas, no es recomanable que facis
servir aquesta assignació directa en cas que algun dels camps sigui un
punter (ex. un string) ja que et trobaràs amb que només es copia
l'adreça. En resum: millor fes-te un procediment que dupliqui el
contingut de la teva estructura en una altra.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-3-incrementa-l-hora-amb-estructura"&gt;
&lt;h3&gt;Exercici 3. Incrementa l'hora amb estructura&lt;/h3&gt;
&lt;p&gt;Completa el codi anterior de manera que compili i executi sense cap
missatge.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-4-el-tipus-data"&gt;
&lt;h3&gt;Exercici 4**. El tipus Data&lt;/h3&gt;
&lt;p&gt;Implementa un nou tipus de dades anomenat &lt;tt class="docutils literal"&gt;Data&lt;/tt&gt; que estigui
composat de tres enters: dia, mes i any.&lt;/p&gt;
&lt;p&gt;Desenvolupa un programa similar al de l'exercici anterior que permeti
provar una funció anomenada &lt;tt class="docutils literal"&gt;incrementa_dia_a_data()&lt;/tt&gt; en els
casos rellevants.&lt;/p&gt;
&lt;p&gt;Nota: sí, has de considerar els diferents dies que té cada mes i els
anys de traspàs. Serà acceptable que consideris com a any de traspàs
qualsevol any múltiple de 4. No serà precís però sí ràpid
d'implementar.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-5-el-tipus-persona"&gt;
&lt;h3&gt;Exercici 5*. El tipus Persona&lt;/h3&gt;
&lt;p&gt;No hi ha cap raó per què una estructura no pugui tenir camps amb tipus
de dades diferents. Fins i tot aquest podria ser un tipus definit per
nosaltres.&lt;/p&gt;
&lt;p&gt;Defineix el tipus &lt;tt class="docutils literal"&gt;Persona&lt;/tt&gt; que té un camp nom i un camp data de
naixement.&lt;/p&gt;
&lt;p&gt;Completa el següent codi de manera que compili i executi sense cap
missatge&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include&amp;lt;stdio.h&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&amp;lt;string.h&amp;gt;&lt;/span&gt;

&lt;span class="cm"&gt;/* definició d&amp;#39;estructura/es */&lt;/span&gt;
&lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;

&lt;span class="cm"&gt;/* assigna els valors h, m i s als components de la referència a Hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa valors correctes. */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;assigna_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;dia&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mes&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;any&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* mostra una data per sortida estàndard en format d/m/a */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;mostra_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Donada dues Dates, retorna cert quan les dues coincideixen en dia i mes */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;es_aniversari_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="n"&gt;d1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="n"&gt;d2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Donat un nom i una data, copia els valors a la persona */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;assigna_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;nom&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Persona&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Donada una Persona i una Data, retorna si és l&amp;#39;aniversari de la persona&lt;/span&gt;
&lt;span class="cm"&gt; * en aquesta data. */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;es_aniversari_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Persona&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* mostra la persona per sortida estàndard&lt;/span&gt;
&lt;span class="cm"&gt; * El format és [nom: «nom», dn: «data naixement»] */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;mostra_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Persona&lt;/span&gt; &lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;«&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="err"&gt;»&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Persona&lt;/span&gt; &lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;assigna_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2013&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;data_avui&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;assigna_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Joan&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;es_aniversari_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error: es_aniversari_persona(&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;, &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;) retorna fals&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;assigna_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2013&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;data_avui&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;assigna_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Marta&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;es_aniversari_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error: es_aniversari_persona(&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;, &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;) retorna cert&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;assigna_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2013&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;data_avui&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;assigna_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Pau&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_naixement&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt; &lt;span class="n"&gt;es_aniversari_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error: es_aniversari_persona(&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra_persona&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;, &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mostra_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_avui&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;) retorna fals&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Pista: recorda que l'assignació d'un string no es pot fer directament
en C. Per això la inclusió de &lt;tt class="docutils literal"&gt;string.h&lt;/tt&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-data-i-hora"&gt;
&lt;h3&gt;Exercici 6*. Data i Hora&lt;/h3&gt;
&lt;p&gt;Defineix ara el tipus &lt;tt class="docutils literal"&gt;DataHora&lt;/tt&gt; que estarà format per dos camps
de tipus &lt;tt class="docutils literal"&gt;Data&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;Hora&lt;/tt&gt; respectivament.&lt;/p&gt;
&lt;p&gt;Implementa la següent subrutina&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* Donada una DataHora d&amp;#39;origen calcula el valor corresponent a&lt;/span&gt;
&lt;span class="cm"&gt;   sumar-li un segon i deixa el resultat en la DataHora calculada.&lt;/span&gt;
&lt;span class="cm"&gt;   Pressuposa que els valors d&amp;#39;origen són correctes. */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;incrementa_segon_a_datahora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DataHora&lt;/span&gt; &lt;span class="n"&gt;dho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;DataHora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;dhc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Implementa un programa que permeti comprovar el funcionament d'aquesta
subrutina, incloent totes les comprovacions realitzades a exercicis
previs d'Hora i de Data.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="tads"&gt;
&lt;h2&gt;TADs&lt;/h2&gt;
&lt;p&gt;És probable que ja t'hagis fixat en que algunes subrutines
acompanyen als tipus que hem definit. Si és així, felicitats, t'has
adonat pel teu compte d'un concepte molt important a l'hora de
reutilitzar codi: l'&lt;em&gt;abstracció&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;El concepte d'abstracció implica la definició de tipus i les
operacions associades a aquests, de manera que si fem servir sempre
aquestes operacions no ens haurem de preocupar de la implementació
interna del tipus.&lt;/p&gt;
&lt;p&gt;Quan el nostre tipus ve acompanyat de les operacions (subrutines) per
manipular-lo, de manera que es pugui fer servir sense preocupar-se per
la seva implementació interna, direm que és un &lt;em&gt;Tipus Abstracte de
Dades&lt;/em&gt; o &lt;em&gt;TAD&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Això ens ofereix almenys els següents avantatges:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;millora la reutilització de codi&lt;/p&gt;
&lt;p&gt;Si un tipus està tan ben definit que disposem de totes les
operacions necessàries per manegar-lo, el podrem fer servir en
altres contexts.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;facilita el control d'errors.&lt;/p&gt;
&lt;p&gt;Donat que només es pot modificar els valors interns del nostre TAD
mitjançant les operacions que oferim, sabem que si variables del
TAD tenen un valor erroni, aquest l'haurem assignat nosaltres des
de les nostres operacions. No cal cercar tant, oi?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;independitza de la implementació&lt;/p&gt;
&lt;p&gt;Com que el codi que fa servir aquests tipus abstractes no accedeix
mai a la implementació interna del tipus, podem canviar aquesta
implementació amb tranquil·litat de que el codi que abans
funcionava continuarà fent-ho, si no afegim nous errors i mantenim
la signatura de les subrutines.&lt;/p&gt;
&lt;p&gt;Per a què podem voler canviar la implementació d'un tipus ja
definit? doncs per exemple per fer-lo més eficient, o per afegir
noves funcionalitats.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="section" id="exercici-4-el-tad-hora"&gt;
&lt;h3&gt;Exercici 4. El TAD Hora&lt;/h3&gt;
&lt;p&gt;Les següents subrutines sobre l'estructura Hora podrien permetre un ús
&lt;em&gt;abstracte&lt;/em&gt; d'aquesta, de manera que si canviem la implementació (ex.
implementem les hores, minuts i segons en array d'enters), no calgui
modificar els programes que facin servir &lt;em&gt;només&lt;/em&gt; les subrutines.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/* assigna els valors que composen l&amp;#39;hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Retorna 0 si algun dels valors és incorrecte */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;assigna_valors_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* assigna el valor de les hores a l&amp;#39;hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Retorna 0 si el valor és incorrecte */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;assigna_hores_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* assigna el valor dels minuts a l&amp;#39;hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Retorna 0 si el valor és incorrecte */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;assigna_minuts_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* assigna el valor dels segons a l&amp;#39;hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Retorna 0 si el valor és incorrecte */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;assigna_segons_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* Retorna 0 si hi ha algun error en algun dels valors considerant-los&lt;/span&gt;
&lt;span class="cm"&gt; * components d&amp;#39;una Hora */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;valida_valors_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* Retorna 0 si hi ha algun error en algun dels valors de l&amp;#39;Hora. */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;valida_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* retorna les hores d&amp;#39;una Hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa valors correctes de l&amp;#39;hora */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;obte_hores_de_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* retorna els minuts d&amp;#39;una Hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa valors correctes de l&amp;#39;hora */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;obte_minuts_de_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* retorna els segons d&amp;#39;una Hora.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa valors correctes de l&amp;#39;hora */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;obte_segons_de_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* incrementa un segon a l&amp;#39;hora d&amp;#39;origen i deixa el resultat a l&amp;#39;hora&lt;/span&gt;
&lt;span class="cm"&gt; * calculda.&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa valors correctes de l&amp;#39;hora d&amp;#39;origen */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;incrementa_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hc&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* converteix l&amp;#39;hora en un string amb format h:m:s&lt;/span&gt;
&lt;span class="cm"&gt; * Pressuposa que hi ha prou espai reservat a dest */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;convert_hora_a_string&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="p"&gt;[]);&lt;/span&gt;

&lt;span class="cm"&gt;/* compara dues hores. Retorna cert si les dues hores són iguals.&lt;/span&gt;
&lt;span class="cm"&gt; * És a dir, contenen els mateixos valors */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;compara_hores&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* copia els valors d&amp;#39;una hora en una altra de manera que les dues&lt;/span&gt;
&lt;span class="cm"&gt; * hores siguin iguals. */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;duplica_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;origen&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;desti&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cm"&gt;/* incrementa l&amp;#39;hora ho en un segon i deixa el resultat a hd.&lt;/span&gt;
&lt;span class="cm"&gt;   En cas que l&amp;#39;hora fos 23:59:59, retorna 1, altrament retorna 0. */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;incr_segon_a_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="n"&gt;ho&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hd&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;El codi anterior només inclou la signatura de les subrutines. Algunes
ja les teníem implementades encara que de manera lleugerament
diferent. Per exemple, &lt;em&gt;assigna_valors_a_hora()&lt;/em&gt; abans es deia
&lt;em&gt;assigna_valors()&lt;/em&gt;, i &lt;em&gt;incr_segon_a_hora()&lt;/em&gt; abans no retornava res.&lt;/p&gt;
&lt;p&gt;Completa el codi de totes les funcions i modifica el codi de les
funcions &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;valida_resultat()&lt;/tt&gt; de l'exercici 3, de manera
que faci servir les subrutines anteriors en comptes d'accedir
directament als camps de l'estructura &lt;em&gt;Hora&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Nota: fixa't que moltes d'aquestes subrutines no les necessitem per
aquest &lt;em&gt;main()&lt;/em&gt;. Potser en altres aplicacions apareixerà la
necessitat.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="mes-d-un-fitxer"&gt;
&lt;h2&gt;Més d'un fitxer&lt;/h2&gt;
&lt;p&gt;Ara ja disposem del concepte de TAD. No trobes, però, que és una mica
incòmode a l'hora de reutilitzar codi? És clar, cada cop que vull fer
servir el TAD Hora, em cal copiar i enganxar tot el codi en el fitxer
on tinc el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;. No és gaire àgil, no...&lt;/p&gt;
&lt;p&gt;El que ens cal és trobar una manera de col·locar el codi del TAD en un
fitxer i demanar al compilador de C que l'&lt;em&gt;inclogui&lt;/em&gt; amb el codi del
nostre programa.&lt;/p&gt;
&lt;div class="section" id="exercici-5-el-tad-hora-amb-mes-d-un-fitxer"&gt;
&lt;h3&gt;Exercici 5. El TAD Hora amb més d'un fitxer&lt;/h3&gt;
&lt;p&gt;Segueix les passes:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;copia el codi de l'exercici 7 en un nou lloc.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;crea els fitxers: &lt;tt class="docutils literal"&gt;tad_hora.h&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;mou el codi amb la definició del tipus Hora i la signatura de les
subrutines (incloent comentaris) a &lt;tt class="docutils literal"&gt;tad_hora.h&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;mou el codi amb el cos de les subrutines a &lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;mou la resta de subrutines (&lt;tt class="docutils literal"&gt;valida_resultat()&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;) al
fitxer &lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;després de la capçalera de &lt;tt class="docutils literal"&gt;tad_hora.h&lt;/tt&gt; (perquè li has posat una
capçalera, oi?) afegeix les següents línies:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#ifndef TAD_HORA_H   &lt;/span&gt;&lt;span class="cm"&gt;/* permet garantir que no s&amp;#39;ha inclós abans */&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#define TAD_HORA_H&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Per altra banda, com a darrera línia afegeix la següent&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#endif    &lt;/span&gt;&lt;span class="cm"&gt;/* ve de ifndef TAD_HORA_H */&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aquestes línies, com diu el comentari, permeten que només es pugui
incloure un cop. Més endavant veurem què vol dir això.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;després de la capçalera de &lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt;, i abans d'altres
&lt;em&gt;includes&lt;/em&gt;, afegeix la línia&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include &amp;quot;tad_hora.h&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que va amb cometes dobles en comptes dels habituals angles.&lt;/p&gt;
&lt;p&gt;Com que en aquest fitxer hi apareix codi que fa servir, per
exemple, el &lt;tt class="docutils literal"&gt;printf()&lt;/tt&gt;, et caldrà afegir els &lt;em&gt;includes&lt;/em&gt;
necessaris.&lt;/p&gt;
&lt;p&gt;Nota també que aquest fitxer no té funció &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;compila &lt;tt class="docutils literal"&gt;tad_hora.h&lt;/tt&gt; i corregeix els errors que hi puguin haver&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;gcc -Wall -c tad_hora.h
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fixa't que fem servir l'opció &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-c&lt;/span&gt;&lt;/tt&gt; que indica a &lt;tt class="docutils literal"&gt;gcc&lt;/tt&gt; que
únicament intenti compilar (sense enllaçar).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;compila &lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt; i corregeix els errors que hi puguin haver&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;gcc -Wall -c tad_hora.c
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Sí, novament no volem enllaçar.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;inclou la capçalera del tad hora en el fitxer amb el &lt;tt class="docutils literal"&gt;main()&lt;/tt&gt;
(suposem que es diu «usa_hora.c») i compila'l de la següent manera:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;gcc -Wall tad_hora.c usa_hora.c
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;executa el fitxer resultant de la manera habitual.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;El resultat quedaria representat pel diagrama següent:&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="El TAD Hora" src="http://apuntstecnics.herokuapp.com/images/prg016.img001.tad_hora.png" /&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-6-canvi-implementacio-del-tad-hora"&gt;
&lt;h3&gt;Exercici 6. Canvi implementació del tad Hora&lt;/h3&gt;
&lt;p&gt;Comprovem ara que podem canviar la implementació interna d'un tipus
abstracte sense afectar els programes que el fan servir.&lt;/p&gt;
&lt;p&gt;En concret, modifica el tipus de dades Hora de manera que ara tingui
el següent aspecte:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt; &lt;span class="cm"&gt;/* codifica hores, minuts i segons a cada posició */&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;Hora&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Modifica el que calgui a &lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt;, torna a compilar i executar
&lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt; sense modificar el seu codi.&lt;/p&gt;
&lt;p&gt;Fixa't el que acabes de fer: has modificat completament la
implementació de Hora però no t'ha calgut modificar el codi que la
fa servir.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-10-el-tad-data"&gt;
&lt;h3&gt;Exercici 10**. El TAD Data&lt;/h3&gt;
&lt;p&gt;Defineix el TAD Data amb operacions similars a les del TAD Hora. Crea
un &lt;tt class="docutils literal"&gt;UsaData.c&lt;/tt&gt; similar al &lt;tt class="docutils literal"&gt;UsaHora.c&lt;/tt&gt;. Probablement ja el tens fet
en un exercici anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-11-el-tad-datahora"&gt;
&lt;h3&gt;Exercici 11*. El TAD DataHora&lt;/h3&gt;
&lt;p&gt;Defineix ara el TAD DataHora.&lt;/p&gt;
&lt;p&gt;Fixa't que el nou TAD oferirà subrutines que simplement cridaran a
subrutines dels TADs que conté. Per exemple,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;obte_hores_de_datahora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DataHora&lt;/span&gt; &lt;span class="n"&gt;dh&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;obte_hores_de_hora&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dh&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hora&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Posa especial compte en que DataHora &lt;strong&gt;no&lt;/strong&gt; accedeixi directament a
les implementacions de Data ni d'Hora. Recorda que aquestes podrien
canviar i no volem haver de modificar més codi de l'imprescindible.&lt;/p&gt;
&lt;p&gt;Afegeix un codi &lt;tt class="docutils literal"&gt;usa_datahora.c&lt;/tt&gt; que faci quelcom similar a
&lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt;. Probablement ja el tens fet en un exercici anterior.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="la-utilitat-make"&gt;
&lt;h2&gt;La utilitat make **&lt;/h2&gt;
&lt;p&gt;Quan el nombre de fitxers creix, apareix la necessitat de simplificar
la seva gestió. Per exemple, per generar l'executable, fins ara només
ens ha calgut fer servir &lt;tt class="docutils literal"&gt;gcc&lt;/tt&gt; tot indicant-li no més de tres
fitxers font a compilar. Què passa però quan en comptes de tres en
tenim trenta, o trescents...?&lt;/p&gt;
&lt;p&gt;Hi ha una utilitat molt habitual en el desenvolupament en C anomenada
&lt;tt class="docutils literal"&gt;make&lt;/tt&gt;. De fet, &lt;tt class="docutils literal"&gt;make&lt;/tt&gt; pot ser utilitzada per gestionar arxius que
tinguin algun tipus de dependència entre si.&lt;/p&gt;
&lt;p&gt;Si fem &lt;tt class="docutils literal"&gt;man make&lt;/tt&gt; , ens dirà que es tracta d'una utilitat per a
mantenir un grup de programes, i que el seu propòsit és determinar
automàticament quines peces d'un programa gran necessiten ser
recompilades i llençar les comandes per recompilar-les.&lt;/p&gt;
&lt;p&gt;Un fitxer anomenat &lt;tt class="docutils literal"&gt;Makefile&lt;/tt&gt; defineix les dependències, de manera
que només amb &lt;tt class="docutils literal"&gt;make&lt;/tt&gt; podem tenir l'executable apunt.&lt;/p&gt;
&lt;p&gt;Veiem un petit exemple amb el programa &lt;tt class="docutils literal"&gt;usa_hora&lt;/tt&gt;. Segueix les
passes:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Crea una nova carpeta i copia-hi els fitxers &lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt;,
&lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;tad_hora.h&lt;/tt&gt; desenvolupats a l'exercici 7.&lt;/li&gt;
&lt;li&gt;Crea un fitxer amb el nom &lt;tt class="docutils literal"&gt;Makefile&lt;/tt&gt; dins del nou directori i
afegeix el següent contingut. Atenció: assegura't que fas servir un
tabulador per indentar&lt;/li&gt;
&lt;/ol&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;# Makefile: usa_hora&lt;/span&gt;
&lt;span class="cp"&gt;# Descr:    Construeix l&amp;#39;aplicació usa_hora&lt;/span&gt;

&lt;span class="n"&gt;cflags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Wall&lt;/span&gt;
&lt;span class="n"&gt;cc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gcc&lt;/span&gt;

&lt;span class="nl"&gt;all:&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;

&lt;span class="nl"&gt;usa_hora:&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cflags&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;

&lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cflags&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;

&lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;
    &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cflags&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;

&lt;span class="nl"&gt;clean:&lt;/span&gt;
    &lt;span class="n"&gt;rm&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;*~&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gz&lt;/span&gt;

&lt;span class="nl"&gt;tar:&lt;/span&gt;
    &lt;span class="n"&gt;tar&lt;/span&gt; &lt;span class="n"&gt;czvf&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gz&lt;/span&gt; &lt;span class="n"&gt;Makefile&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="n"&gt;tad_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="n"&gt;usa_hora&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Ara escriu a consola&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;make
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Amb aquesta comanda es llençaran les següents comandes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;gcc -Wall -c usa_hora.c
gcc -Wall -c tad_hora.c
gcc -Wall usa_hora.o tad_hora.o -o usa_hora
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si tornem a executar &lt;tt class="docutils literal"&gt;make&lt;/tt&gt; ens dirà quelcom similar a&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;make: Nothing to be &lt;span class="k"&gt;done for&lt;/span&gt; &lt;span class="sb"&gt;`&lt;/span&gt;all&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;.
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ara modifiquem &lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt;, o simplement el podem &amp;quot;tocar&amp;quot; amb&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;touch usa_hora.c
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si tornem a fer &lt;tt class="docutils literal"&gt;make&lt;/tt&gt; trobarem que només compila &lt;tt class="docutils literal"&gt;usa_hora.c&lt;/tt&gt;
però no &lt;tt class="docutils literal"&gt;tad_hora.c&lt;/tt&gt; ja que ha detectat que el seu font no ha estat
modificat&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;make
gcc -Wall -c usa_hora.c
gcc -Wall usa_hora.o tad_hora.o -o usa_hora
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;D'una manera coherent, &lt;tt class="docutils literal"&gt;make&lt;/tt&gt; compilarà el que correspongui depenent
dels fitxers modificats:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;touch tad_hora.c
&lt;span class="nv"&gt;$ &lt;/span&gt;make
gcc -Wall -c tad_hora.c
gcc -Wall usa_hora.o tad_hora.o -o usa_hora
&lt;span class="nv"&gt;$ &lt;/span&gt;touch tad_hora.h
&lt;span class="nv"&gt;$ &lt;/span&gt;make
gcc -Wall -c usa_hora.c
gcc -Wall -c tad_hora.c
gcc -Wall usa_hora.o tad_hora.o -o usa_hora
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Podem llegir el nostre fitxer &lt;tt class="docutils literal"&gt;Makefile&lt;/tt&gt; de la següent manera:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;línies 1 i 2: capçalera descriptiva (sí aquí també cal!)&lt;/li&gt;
&lt;li&gt;línies 4 i 5: definició de variables. Per exemple, només ens caldria
canviar els valors assignats a &lt;tt class="docutils literal"&gt;cflags&lt;/tt&gt; per a definir noves
opcions de compilació.&lt;/li&gt;
&lt;li&gt;línia 7: definició de l'objectiu principal &lt;tt class="docutils literal"&gt;all&lt;/tt&gt; que demana que
estigui disponible el fitxer &lt;tt class="docutils literal"&gt;usa_hora&lt;/tt&gt;.&lt;/li&gt;
&lt;li&gt;línia 9: per a aconseguir el fitxer &lt;tt class="docutils literal"&gt;usa_hora&lt;/tt&gt; ens cal obtenir els
fitxers &lt;tt class="docutils literal"&gt;usa_hora.o&lt;/tt&gt; i &lt;tt class="docutils literal"&gt;tad_hora.o&lt;/tt&gt;. Si &lt;tt class="docutils literal"&gt;usa_hora&lt;/tt&gt; no existeix
o bé presenta una data &lt;strong&gt;anterior&lt;/strong&gt; a la d'algun d'aquests dos
fitxers, llavors s'executarà la comanda de la línia 10 (indentada
amb un tabulador) que en substituir les variables pels seus valors,
es traduiria per&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;gcc -Wall usa_hora.o tad_hora.o -o usa_hora
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;línies 11 i 14: indiquen com aconseguir els subobjectius requerits
per l'objectiu &lt;tt class="docutils literal"&gt;usa_hora&lt;/tt&gt;. Bàsicament requereix que els fitxers
objecte (&lt;tt class="docutils literal"&gt;.o&lt;/tt&gt;)tinguin una data posterior als fitxers font (&lt;tt class="docutils literal"&gt;.c&lt;/tt&gt;
i &lt;tt class="docutils literal"&gt;.h&lt;/tt&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;línies 16 i 19: defineixen objectius independents al principal
(&lt;tt class="docutils literal"&gt;all&lt;/tt&gt;)&lt;/p&gt;
&lt;p&gt;La utilitat &lt;tt class="docutils literal"&gt;make&lt;/tt&gt; ens permet disposar d'altres &lt;em&gt;objectius&lt;/em&gt; a
banda del principal. Per exemple, el nostre &lt;tt class="docutils literal"&gt;Makefile&lt;/tt&gt; disposa de
l'objectiu &lt;tt class="docutils literal"&gt;clean&lt;/tt&gt;. Si l'executem ens eliminarà tots els fitxers
temporals&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;  &lt;span class="nv"&gt;$ &lt;/span&gt;make clean

També disposa de l&lt;span class="s1"&gt;&amp;#39;opció tar que genera un paquet amb tots els&lt;/span&gt;
&lt;span class="s1"&gt;fitxers font de l&amp;#39;&lt;/span&gt;aplicació
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;make tar
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Hi ha moltes altres possibilitats amb el &lt;tt class="docutils literal"&gt;make&lt;/tt&gt;.  Amb el que hem
vist, però, tenim una primera idea de les possibilitats de l'eina. Si
tens interès en aprofundir-hi més, pots consultar per exemple el
&lt;a class="reference external" href="http://www.gnu.org/software/make/manual/make.html"&gt;manual oficial de make&lt;/a&gt;.&lt;/p&gt;
&lt;div class="section" id="exercici-7-makefile-pel-tad-punt"&gt;
&lt;h3&gt;Exercici 7. Makefile pel TAD punt&lt;/h3&gt;
&lt;p&gt;Desenvolupa el TAD d'un punt que permeti manipular punts en dos
dimensions (x, y). El TAD oferirà operacions per a assignar i obtenir
cada coordenada i sumar dos punts deixant el resultat en un tercer.
Crea un &lt;tt class="docutils literal"&gt;usa_punt.c&lt;/tt&gt; que creï dos punts amb valors demanats a
l'usuari i mostri el resultat de sumar-los.&lt;/p&gt;
&lt;p&gt;Finalment, crea un Makefile adequat.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-13-makefile-pel-tad-data"&gt;
&lt;h3&gt;Exercici 13*. Makefile pel TAD Data&lt;/h3&gt;
&lt;p&gt;Desenvolupa un &lt;tt class="docutils literal"&gt;Makefile&lt;/tt&gt; adequat pel TAD Data i el programa
&lt;tt class="docutils literal"&gt;usa_data&lt;/tt&gt; de l'exercici 10.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exercici-14-makefile-pel-tad-datahora"&gt;
&lt;h3&gt;Exercici 14*. Makefile pel TAD DataHora&lt;/h3&gt;
&lt;p&gt;Desenvolupa un &lt;tt class="docutils literal"&gt;Makefile&lt;/tt&gt; adequat pel TAD DataHora i el programa
&lt;tt class="docutils literal"&gt;usa_datahora&lt;/tt&gt; de l'exercici 11.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Moisès Gómez Girón</dc:creator><pubDate>Fri, 30 Aug 2013 23:42:00 +0200</pubDate><guid>tag:apuntstecnics.herokuapp.com,2013-08-30:tipus-abstractes-de-dades.html</guid><category>C</category></item></channel></rss>